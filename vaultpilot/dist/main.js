"use strict";var t=require("obsidian");function e(t,e,n,o){return new(n||(n=Promise))(function(i,s){function a(t){try{r(o.next(t))}catch(t){s(t)}}function l(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,l)}r((o=o.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!0,defaultAgent:"",chatHistoryLimit:100,debugMode:!1};class o extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"VaultPilot Settings"}),n.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),n.createEl("h3",{text:"Connection"}),new t.Setting(n).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),n.createEl("h3",{text:"Features"}),new t.Setting(n).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(n).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Enable Auto-Complete").setDesc("Automatically suggest completions as you type").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Agent Configuration"}),new t.Setting(n).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Advanced"}),new t.Setting(n).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Information"});n.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let o=yield this.plugin.apiClient.healthCheck();if(!o.success&&(null===(e=o.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(o={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),o.success?new t.Notice("✅ Connection successful!",3e3):new t.Notice(`❌ Connection failed: ${o.error}`,5e3)}catch(e){n.hide(),new t.Notice(`❌ Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const i="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return i}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"🤖 VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),o=t.createEl("div",{cls:"vaultpilot-status-item"});o.createEl("span",{text:"WebSocket: "}),o.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"🟢 Connected":"🔴 Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="🟢 Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="🔴 Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="🔴 Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"💬 Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"⚙️ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"🔍 Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"✨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"🔄 Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),o=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:o.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getAgents();if(t.success&&t.data){const e=t.data.length,n=t.data.filter(t=>t.active).length,o=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});o.createEl("h4",{text:"Available Agents"});o.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${n}/${e} active`})}}catch(t){}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}class a extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"🤖 VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const o=n.createEl("select",{cls:"vaultpilot-agent-select"});o.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(o),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask me anything about your vault...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();e.success&&e.data&&e.data.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})})}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const n=this.app.workspace.getActiveFile();let o="";if(n){const t=yield this.app.vault.read(n);o=`Current file: ${n.name}\n\nContent:\n${t}`}const i=yield this.plugin.apiClient.chat({message:e,conversation_id:this.currentConversationId||void 0,vault_context:o,agent_id:this.getSelectedAgent()});i.success&&i.data?(this.currentConversationId=i.data.conversation_id,this.addMessage("assistant",i.data.response)):(this.addMessage("assistant",`Error: ${i.error||"Failed to get response"}`),new t.Notice(`Chat error: ${i.error}`))}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class l extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"⚙️ Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=o.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const s=n.createEl("div",{cls:"vaultpilot-form-group"});s.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const a=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=a.createEl("input",{type:"checkbox"});a.createSpan({text:"Include active file content"});const r=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,o){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(o){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const s=yield this.plugin.apiClient.executeWorkflow(i);if(!s.success||!s.data)throw new Error(s.error||"Workflow execution failed");yield this.displayResults(s.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"✅ Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const o=e.createEl("div",{cls:"vaultpilot-artifact"});o.createEl("h5",{text:t.title}),o.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});o.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,o){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,o=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,o),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let o="# VaultPilot Workflow Results\n\n";o+=`**Goal:** ${this.goalInput.value}\n\n`,o+=`**Execution Time:** ${n.execution_time}s\n\n`,o+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(o+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{o+=`${e+1}. ${t}\n`}),o+="\n"),n.artifacts&&n.artifacts.length>0&&(o+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{o+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,o),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>❌ Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class r{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,o=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(o.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:o,mode:"cors",credentials:"omit"}));let i;const s=t.headers.get("content-type");if(i=s&&s.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/api/obsidian/health`);const t=yield this.makeRequest("/api/obsidian/health",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/api/obsidian/health`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,o,i,s,a,l;try{const l=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",l.type),l.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,l.data);break;case"workflow_progress":null===(o=t.onWorkflowProgress)||void 0===o||o.call(t,l.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,l.data);break;case"vault_sync":null===(s=t.onVaultSync)||void 0===s||s.call(t,l.data);break;case"error":null===(a=t.onError)||void 0===a||a.call(t,l.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(l=t.onError)||void 0===l||l.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class c extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e;yield this.loadSettings(),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey);try{let n=yield this.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(new t.Notice("✅ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",n.error),new t.Notice("⚠️ EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("⚠️ Cannot connect to EvoAgentX backend",5e3)}this.registerView(i,t=>new s(t,this));this.addRibbonIcon("bot","VaultPilot",t=>{this.openChatModal()}).addClass("vaultpilot-ribbon-class"),this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new o(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(i),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new a(this.app,this).open()}openWorkflowModal(){new l(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let o="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);o+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:o,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let o=`# Vault Analysis - ${e}\n\n`;o+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(o+="## Key Insights\n\n",i.data.insights.forEach(t=>{o+=`- ${t}\n`}),o+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(o+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{o+=`- ${t}\n`})),yield this.app.vault.create(n,o),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),o=n.getLine(e.line).substring(0,e.ch),i=n.getValue();try{const s=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:o});s.success&&s.data?(n.replaceRange(s.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${s.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const o=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(o.success&&o.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${o.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${o.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),o=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==o?void 0:o.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==o?void 0:o.basename)||"Untitled"} - ${e}.md`;let s=`# ${n.data.plan.title}\n\n`;s+=`${n.data.plan.description}\n\n`,s+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(s+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";s+=`${e} **${t.title}** (${t.priority} priority)\n`,s+=`   ${t.description}\n`,s+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(s+="## Milestones\n\n",n.data.milestones.forEach(t=>{s+=`- **${t.title}** (${t.target_date})\n`,s+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,s),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(i);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:i,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},1e3))}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,o=n.getCursor(),i=n.getLine(o.line);if(!(i.trim().length<3||o.ch!==i.length))try{const e=yield this.apiClient.getCopilotCompletion({text:n.getValue(),cursor_position:n.posToOffset(o),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},n,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){yield this.saveData(this.settings),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=c;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvY2hhdC1tb2RhbC50cyIsIi4uL3NyYy93b3JrZmxvdy1tb2RhbC50cyIsIi4uL3NyYy9hcGktY2xpZW50LnRzIiwiLi4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFZhdWx0UGlsb3RTZXR0aW5ncyA9IHtcbiAgYmFja2VuZFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsXG4gIGFwaUtleTogJycsXG4gIGVuYWJsZVdlYlNvY2tldDogdHJ1ZSxcbiAgZW5hYmxlQ29waWxvdDogdHJ1ZSxcbiAgZW5hYmxlQXV0b0NvbXBsZXRlOiB0cnVlLFxuICBkZWZhdWx0QWdlbnQ6ICcnLFxuICBjaGF0SGlzdG9yeUxpbWl0OiAxMDAsXG4gIGRlYnVnTW9kZTogZmFsc2Vcbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYXMgeW91IHR5cGUnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gV29ya2Zsb3cgYWN0aW9uXG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcblxuICAgIC8vIEFuYWx5emUgdmF1bHQgYWN0aW9uXG4gICAgY29uc3QgYW5hbHl6ZUJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UjSBBbmFseXplIFZhdWx0JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBhbmFseXplQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hbmFseXplVmF1bHQoKTtcblxuICAgIC8vIENvcGlsb3QgYWN0aW9uXG4gICAgY29uc3QgY29waWxvdEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pyoIEdldCBDb21wbGV0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjb3BpbG90QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmdldENvcGlsb3RDb21wbGV0aW9uKGFjdGl2ZVZpZXcuZWRpdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBlZGl0b3IgZm91bmQnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CflIQgUmVmcmVzaCBTdGF0dXMnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhZ2VudCBpbmZvIGlmIGF2YWlsYWJsZVxuICAgIHRoaXMubG9hZEFnZW50SW5mbygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IHJlc3BvbnNlLmRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSByZXNwb25zZS5kYXRhLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudFN0YXRzRWwgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXRzJyB9KTtcbiAgICAgICAgYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2YWlsYWJsZSBBZ2VudHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgaWYgYWdlbnRzIGNhbid0IGJlIGxvYWRlZFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtdmlldyB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1oZWFkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3VidGl0bGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIGgzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yLFxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVmcmVzaC1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xuICAgICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWl0ZW0ge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtdmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyBoNCB7XG4gICAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LWluZm8ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlc291cmNlc1xuICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY2hhdENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbWVzc2FnZXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0RWwhOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHNlbmRCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNoYXQtbW9kYWwnKTtcblxuICAgIC8vIE1vZGFsIGhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCBDaGF0JyB9KTtcbiAgICBcbiAgICBjb25zdCB0b29sYmFyRWwgPSBoZWFkZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdG9vbGJhcicgfSk7XG4gICAgXG4gICAgLy8gQ2xlYXIgY2hhdCBidXR0b25cbiAgICBjb25zdCBjbGVhckJ0biA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDbGVhciBDaGF0JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY2xlYXJCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xlYXJDaGF0KCk7XG5cbiAgICAvLyBBZ2VudCBzZWxlY3RvciAod2lsbCBiZSBwb3B1bGF0ZWQgd2hlbiBhZ2VudHMgYXJlIGxvYWRlZClcbiAgICBjb25zdCBhZ2VudFNlbGVjdCA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXNlbGVjdCcgfSk7XG4gICAgYWdlbnRTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0F1dG8tc2VsZWN0IEFnZW50JywgdmFsdWU6ICcnIH0pO1xuICAgIHRoaXMubG9hZEFnZW50cyhhZ2VudFNlbGVjdCk7XG5cbiAgICAvLyBDaGF0IGNvbnRhaW5lclxuICAgIHRoaXMuY2hhdENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBNZXNzYWdlcyBhcmVhXG4gICAgdGhpcy5tZXNzYWdlc0VsID0gdGhpcy5jaGF0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcycgfSk7XG4gICAgXG4gICAgLy8gSW5wdXQgY29udGFpbmVyXG4gICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICB0aGlzLmlucHV0RWwgPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQXNrIG1lIGFueXRoaW5nIGFib3V0IHlvdXIgdmF1bHQuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZW5kQnV0dG9uID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1NlbmQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LXNlbmQtYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZW5kQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNlbmRNZXNzYWdlKCk7XG5cbiAgICAvLyBGb2N1cyB0aGUgaW5wdXRcbiAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcblxuICAgIC8vIExvYWQgY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgICB0aGlzLmxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCk7XG5cbiAgICAvLyBBZGQgc3R5bGVzXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50cyhzZWxlY3RFbDogSFRNTFNlbGVjdEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChhZ2VudCA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgICAgIHRleHQ6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogYWdlbnQuaWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50czonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSgpIHtcbiAgICAvLyBPbmx5IHRyeSB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGlmIHdlIGhhdmUgYSBjb252ZXJzYXRpb24gSURcbiAgICBpZiAodGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENvbnZlcnNhdGlvbkhpc3RvcnkodGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZXM7XG4gICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcygpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIElmIG5vIGNvbnZlcnNhdGlvbiBJRCwgc3RhcnQgZnJlc2ggKG5vIGhpc3RvcnkgdG8gbG9hZClcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZE1lc3NhZ2UoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuaW5wdXRFbC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm47XG5cbiAgICAvLyBEaXNhYmxlIGlucHV0IHdoaWxlIHByb2Nlc3NpbmdcbiAgICB0aGlzLmlucHV0RWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2VuZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlbmRpbmcuLi4nO1xuXG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZSB0byBVSVxuICAgIHRoaXMuYWRkTWVzc2FnZSgndXNlcicsIG1lc3NhZ2UpO1xuICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9ICcnO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCB2YXVsdCBjb250ZXh0IGlmIGF2YWlsYWJsZVxuICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICBsZXQgdmF1bHRDb250ZXh0ID0gJyc7XG4gICAgICBcbiAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICB2YXVsdENvbnRleHQgPSBgQ3VycmVudCBmaWxlOiAke2FjdGl2ZUZpbGUubmFtZX1cXG5cXG5Db250ZW50OlxcbiR7Y29udGVudH1gO1xuICAgICAgfVxuXG4gICAgICAvLyBTZW5kIHRvIEFQSVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY2hhdCh7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGNvbnZlcnNhdGlvbl9pZDogdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiB2YXVsdENvbnRleHQsXG4gICAgICAgIGFnZW50X2lkOiB0aGlzLmdldFNlbGVjdGVkQWdlbnQoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSByZXNwb25zZS5kYXRhLmNvbnZlcnNhdGlvbl9pZDtcbiAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yOiAke3Jlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2V0IHJlc3BvbnNlJ31gKTtcbiAgICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gUmUtZW5hYmxlIGlucHV0XG4gICAgICB0aGlzLmlucHV0RWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlbmQnO1xuICAgICAgdGhpcy5pbnB1dEVsLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZWxlY3RlZEFnZW50KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3Qgc2VsZWN0RWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcudmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICByZXR1cm4gc2VsZWN0RWw/LnZhbHVlIHx8IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgYWRkTWVzc2FnZShyb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgbWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICByb2xlLFxuICAgICAgY29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICB0aGlzLnJlbmRlck1lc3NhZ2UobWVzc2FnZSk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcygpIHtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuZW1wdHkoKTtcbiAgICB0aGlzLm1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB0aGlzLnJlbmRlck1lc3NhZ2UobWVzc2FnZSkpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSkge1xuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMubWVzc2FnZXNFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiBgdmF1bHRwaWxvdC1tZXNzYWdlIHZhdWx0cGlsb3QtbWVzc2FnZS0ke21lc3NhZ2Uucm9sZX1gXG4gICAgfSk7XG5cbiAgICBjb25zdCByb2xlRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlJyxcbiAgICAgIHRleHQ6IG1lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInID8gJ1lvdScgOiAnVmF1bHRQaWxvdCdcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLWNvbnRlbnQnXG4gICAgfSk7XG5cbiAgICAvLyBTaW1wbGUgbWFya2Rvd24gcmVuZGVyaW5nIGZvciBiYXNpYyBmb3JtYXR0aW5nXG4gICAgY29udGVudEVsLmlubmVySFRNTCA9IHRoaXMucmVuZGVyTWFya2Rvd24obWVzc2FnZS5jb250ZW50KTtcblxuICAgIGlmIChtZXNzYWdlLnRpbWVzdGFtcCkge1xuICAgICAgY29uc3QgdGltZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS10aW1lJyxcbiAgICAgICAgdGV4dDogbmV3IERhdGUobWVzc2FnZS50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+JylcbiAgICAgIC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKVxuICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuICB9XG5cbiAgcHJpdmF0ZSBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0VsLnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJDaGF0KCkge1xuICAgIHRoaXMubWVzc2FnZXMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCA9IG51bGw7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgbmV3IE5vdGljZSgnQ2hhdCBjbGVhcmVkJyk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LWNoYXQtc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LWNoYXQtc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbW9kYWwge1xuICAgICAgICAgIHdpZHRoOiA2MDBweDtcbiAgICAgICAgICBoZWlnaHQ6IDcwMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGVhZGVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXRvb2xiYXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0IHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA4MHB4KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2VzIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS11c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlIHtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWNvbnRlbnQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogdGV4dDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBXb3JrZmxvd1JlcXVlc3QsIFdvcmtmbG93UmVzcG9uc2UsIFdvcmtmbG93UHJvZ3Jlc3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFdvcmtmbG93TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBnb2FsSW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGNvbnRleHRJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgZXhlY3V0ZUJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIHByb2dyZXNzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcmVzdWx0c0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlzRXhlY3V0aW5nID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsJyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn4pqZ77iPIFdvcmtmbG93IEV4ZWN1dGlvbicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0RlZmluZSBhIGdvYWwgYW5kIGxldCBWYXVsdFBpbG90IGNyZWF0ZSBhbmQgZXhlY3V0ZSBhIGNvbXByZWhlbnNpdmUgd29ya2Zsb3cgdG8gYWNoaWV2ZSBpdC4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbidcbiAgICB9KTtcblxuICAgIC8vIEZvcm1cbiAgICBjb25zdCBmb3JtRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1mb3JtJyB9KTtcblxuICAgIC8vIEdvYWwgaW5wdXRcbiAgICBjb25zdCBnb2FsQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgZ29hbENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0dvYWwgKicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5nb2FsSW5wdXQgPSBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnZS5nLiwgXCJDcmVhdGUgYSBjb21wcmVoZW5zaXZlIHN0dWR5IHBsYW4gZm9yIG1hY2hpbmUgbGVhcm5pbmcgYmFzZWQgb24gbXkgbm90ZXNcIicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWdvYWwtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBDb250ZXh0IGlucHV0XG4gICAgY29uc3QgY29udGV4dENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdBZGRpdGlvbmFsIENvbnRleHQgKG9wdGlvbmFsKScsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0SW5wdXQgPSBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnUHJvdmlkZSBhbnkgYWRkaXRpb25hbCBjb250ZXh0LCBjb25zdHJhaW50cywgb3IgcmVxdWlyZW1lbnRzLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIFZhdWx0IGNvbnRlbnQgb3B0aW9uc1xuICAgIGNvbnN0IG9wdGlvbnNDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnVmF1bHQgSW50ZWdyYXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFjdGl2ZUZpbGUgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWN0aXZlRmlsZUNoZWNrYm94ID0gaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhY3RpdmUgZmlsZSBjb250ZW50JyB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBbGxGaWxlcyA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhbGxGaWxlc0NoZWNrYm94ID0gaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFsbCB2YXVsdCBmaWxlcyAobWF5IHRha2UgbG9uZ2VyKScgfSk7XG5cbiAgICAvLyBFeGVjdXRlIGJ1dHRvblxuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbiA9IGZvcm1FbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5leGVjdXRlV29ya2Zsb3coYWN0aXZlRmlsZUNoZWNrYm94LmNoZWNrZWQsIGFsbEZpbGVzQ2hlY2tib3guY2hlY2tlZCk7XG5cbiAgICAvLyBQcm9ncmVzcyBjb250YWluZXJcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gUmVzdWx0cyBjb250YWluZXJcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gRm9jdXMgdGhlIGdvYWwgaW5wdXRcbiAgICB0aGlzLmdvYWxJbnB1dC5mb2N1cygpO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KGluY2x1ZGVBY3RpdmVGaWxlOiBib29sZWFuLCBpbmNsdWRlQWxsRmlsZXM6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBnb2FsID0gdGhpcy5nb2FsSW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGlmICghZ29hbCkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgZ29hbCBmb3IgdGhlIHdvcmtmbG93Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0V4ZWN1dGluZyA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0aW5nLi4uJztcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFByZXBhcmUgdmF1bHQgY29udGVudFxuICAgICAgbGV0IHZhdWx0Q29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICBpZiAoaW5jbHVkZUFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHthY3RpdmVGaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmNsdWRlQWxsRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAyMCkpIHsgLy8gTGltaXQgdG8gZmlyc3QgMjAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHdvcmtmbG93IHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCA9IHtcbiAgICAgICAgZ29hbCxcbiAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0SW5wdXQudmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmF1bHRfY29udGVudDogdmF1bHRDb250ZW50IHx8IHVuZGVmaW5lZFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgV2ViU29ja2V0IGxpc3RlbmVyIGZvciBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICBpZiAodGhpcy5wbHVnaW4uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSkge1xuICAgICAgICAvLyBMaXN0ZW4gZm9yIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgdGhpcy5zZXR1cFByb2dyZXNzTGlzdGVuZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQhLmV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRpc3BsYXlSZXN1bHRzKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdXb3JrZmxvdyBleGVjdXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoZXJyb3JNc2cpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzRXhlY3V0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRlIFdvcmtmbG93JztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNvbm5lY3RlZCB0byB0aGUgV2ViU29ja2V0IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBzaW11bGF0ZSBwcm9ncmVzc1xuICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdBbmFseXppbmcgZ29hbCBhbmQgY29udGV4dC4uLicpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ1BsYW5uaW5nIHdvcmtmbG93IHN0ZXBzLi4uJyk7XG4gICAgfSwgMTAwMCk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnRXhlY3V0aW5nIHdvcmtmbG93Li4uJyk7XG4gICAgfSwgMjAwMCk7XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlQcm9ncmVzcyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLWl0ZW1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICA8c3Bhbj4ke21lc3NhZ2V9PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGlzcGxheVJlc3VsdHMod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcmVzdWx0c1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn4pyFIFdvcmtmbG93IENvbXBsZXRlZCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYEV4ZWN1dGlvbiB0aW1lOiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNgLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSdcbiAgICB9KTtcblxuICAgIC8vIE1haW4gcmVzdWx0XG4gICAgY29uc3QgcmVzdWx0RWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCcgfSk7XG4gICAgcmVzdWx0RWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmVzdWx0JyB9KTtcbiAgICBjb25zdCByZXN1bHRDb250ZW50RWwgPSByZXN1bHRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC10ZXh0JyB9KTtcbiAgICByZXN1bHRDb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bih3b3JrZmxvdy5yZXN1bHQpO1xuXG4gICAgLy8gU3RlcHMgdGFrZW5cbiAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RlcHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcicgfSk7XG4gICAgICBzdGVwc0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1N0ZXBzIFRha2VuJyB9KTtcbiAgICAgIGNvbnN0IHN0ZXBzTGlzdCA9IHN0ZXBzRWwuY3JlYXRlRWwoJ29sJywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWxpc3QnIH0pO1xuICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaChzdGVwID0+IHtcbiAgICAgICAgc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogc3RlcCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFydGlmYWN0c1xuICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFydGlmYWN0c0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lcicgfSk7XG4gICAgICBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdHZW5lcmF0ZWQgQXJ0aWZhY3RzJyB9KTtcbiAgICAgIFxuICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goKGFydGlmYWN0LCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhcnRpZmFjdEVsID0gYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdCcgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiBhcnRpZmFjdC50aXRsZSB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgdGV4dDogYFR5cGU6ICR7YXJ0aWZhY3QudHlwZX1gLFxuICAgICAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYXJ0aWZhY3RFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdTYXZlIGFzIE5vdGUnLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBhbGwgYnV0dG9uXG4gICAgY29uc3QgYWN0aW9uc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zJyB9KTtcbiAgICBjb25zdCBzYXZlQWxsQnV0dG9uID0gYWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2F2ZSBDb21wbGV0ZSBSZXN1bHRzIGFzIE5vdGUnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQWxsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3cpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3Q6IGFueSwgaW5kZXg6IG51bWJlcikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGAke2FydGlmYWN0LnRpdGxlLnJlcGxhY2UoL1teYS16QS1aMC05XFxzXS9nLCAnJyl9Lm1kYDtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1gO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQXJ0aWZhY3Qgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgYXJ0aWZhY3Q6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICBcbiAgICAgIGxldCBjb250ZW50ID0gYCMgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqR29hbDoqKiAke3RoaXMuZ29hbElucHV0LnZhbHVlfVxcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkV4ZWN1dGlvbiBUaW1lOioqICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAjIyBSZXN1bHRcXG5cXG4ke3dvcmtmbG93LnJlc3VsdH1cXG5cXG5gO1xuICAgICAgXG4gICAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBTdGVwcyBUYWtlblxcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgJHtpbmRleCArIDF9LiAke3N0ZXB9XFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XG4gICAgICB9XG5cbiAgICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgR2VuZXJhdGVkIEFydGlmYWN0c1xcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKGFydGlmYWN0ID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAjIyMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBDb21wbGV0ZSByZXN1bHRzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIHJlc3VsdHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5RXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtZXJyb3JcIj5cbiAgICAgICAgPGgzPuKdjCBXb3JrZmxvdyBGYWlsZWQ8L2gzPlxuICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwge1xuICAgICAgICAgIHdpZHRoOiA3MDBweDtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiA4MHZoO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24ge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1ncm91cCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWdvYWwtaW5wdXQsXG4gICAgICAgIC52YXVsdHBpbG90LWNvbnRleHQtaW5wdXQge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIGlucHV0IHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lciB7XG4gICAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICB9XG4gICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC1jb250ZW50IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LXRleHQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtbGlzdCB7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXJyb3Ige1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFxuICBBUElSZXNwb25zZSwgXG4gIENoYXRSZXF1ZXN0LCBcbiAgQ2hhdFJlc3BvbnNlLCBcbiAgQ29udmVyc2F0aW9uSGlzdG9yeSxcbiAgQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QsXG4gIENvcGlsb3RSZXF1ZXN0LCBcbiAgQ29waWxvdFJlc3BvbnNlLFxuICBXb3JrZmxvd1JlcXVlc3QsXG4gIFdvcmtmbG93UmVzcG9uc2UsXG4gIEFnZW50LFxuICBBZ2VudENyZWF0ZVJlcXVlc3QsXG4gIEFnZW50RXhlY3V0ZVJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlc3BvbnNlLFxuICBUYXNrUGxhbm5pbmdSZXF1ZXN0LFxuICBUYXNrUGxhbm5pbmdSZXNwb25zZSxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0LFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlLFxuICBNZW1vcnlVcGRhdGVSZXF1ZXN0LFxuICBXZWJTb2NrZXRNZXNzYWdlLFxuICBFcnJvclJlc3BvbnNlXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRXZvQWdlbnRYQ2xpZW50IHtcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpS2V5Pzogc3RyaW5nO1xuICBwcml2YXRlIHdlYnNvY2tldD86IFdlYlNvY2tldDtcbiAgcHJpdmF0ZSB3c0NhbGxiYWNrczogTWFwPHN0cmluZywgKGRhdGE6IGFueSkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoYmFzZVVybDogc3RyaW5nLCBhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdDxUPihcbiAgICBlbmRwb2ludDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9XG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2U8VD4+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9JHtlbmRwb2ludH1gO1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIC4uLihvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8fCB7fSksXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBIYW5kbGUgbm9uLUpTT04gcmVzcG9uc2VzIGdyYWNlZnVsbHlcbiAgICAgIGxldCBkYXRhO1xuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgICBpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YS5lcnJvciBcbiAgICAgICAgICA/IGRhdGEuZXJyb3IgXG4gICAgICAgICAgOiBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5lcnJvcihgQVBJIEVycm9yIFske3Jlc3BvbnNlLnN0YXR1c31dOmAsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnID8geyBtZXNzYWdlOiBkYXRhIH0gYXMgVCA6IGRhdGEsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEkgUmVxdWVzdCBFcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWFsdGggY2hlY2tcbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTxBUElSZXNwb25zZTx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4+IHtcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBoZWFsdGggY2hlY2sgdG8gJHt0aGlzLmJhc2VVcmx9L2FwaS9vYnNpZGlhbi9oZWFsdGhgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PHsgc3RhdHVzOiBzdHJpbmc7IHZlcnNpb246IHN0cmluZyB9PignL2FwaS9vYnNpZGlhbi9oZWFsdGgnLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBIZWFsdGggY2hlY2sgcmVzdWx0OicsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIEFsdGVybmF0aXZlIGhlYWx0aCBjaGVjayBtZXRob2QgaWYgdGhlIG1haW4gb25lIGZhaWxzXG4gIGFzeW5jIHNpbXBsZUhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L2FwaS9vYnNpZGlhbi9oZWFsdGhgO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2sgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDUpIHsgLy8gNDA1IG1lYW5zIHNlcnZlciBpcyB1cCBidXQgZG9lc24ndCBzdXBwb3J0IEhFQURcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnb2snIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Nvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGF0IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgY2hhdChyZXF1ZXN0OiBDaGF0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29udmVyc2F0aW9uSGlzdG9yeShjb252ZXJzYXRpb25JZDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gNTApOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvbnZlcnNhdGlvbkhpc3Rvcnk+PiB7XG4gICAgY29uc3QgcmVxdWVzdEJvZHk6IENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0ID0ge1xuICAgICAgY29udmVyc2F0aW9uX2lkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIGluY2x1ZGVfbWVzc2FnZXM6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbi9oaXN0b3J5Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChgL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENvcGlsb3QgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihyZXF1ZXN0OiBDb3BpbG90UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29waWxvdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvcGlsb3QvY29tcGxldGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV29ya2Zsb3cgZXhlY3V0aW9uXG4gIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQWdlbnQgbWFuYWdlbWVudFxuICBhc3luYyBnZXRBZ2VudHMoKTogUHJvbWlzZTxBUElSZXNwb25zZTxBZ2VudFtdPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cycpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQWdlbnQocmVxdWVzdDogQWdlbnRDcmVhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxBZ2VudD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudHMvY3JlYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVBZ2VudChyZXF1ZXN0OiBBZ2VudEV4ZWN1dGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxhbnk+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnQvZXhlY3V0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBWYXVsdCBhbmFseXNpc1xuICBhc3luYyBhbmFseXplVmF1bHRDb250ZXh0KHJlcXVlc3Q6IFZhdWx0Q29udGV4dFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFZhdWx0Q29udGV4dFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2NvbnRleHQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVGFzayBwbGFubmluZ1xuICBhc3luYyBwbGFuVGFza3MocmVxdWVzdDogVGFza1BsYW5uaW5nUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VGFza1BsYW5uaW5nUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vcGxhbm5pbmcvdGFza3MnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSW50ZWxsaWdlbmNlIHBhcnNpbmdcbiAgYXN5bmMgcGFyc2VJbnRlbGxpZ2VuY2UocmVxdWVzdDogSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBNZW1vcnkgbWFuYWdlbWVudFxuICBhc3luYyB1cGRhdGVNZW1vcnkocmVxdWVzdDogTWVtb3J5VXBkYXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9tZW1vcnkvdXBkYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBmdW5jdGlvbmFsaXR5XG4gIGNvbm5lY3RXZWJTb2NrZXQoY2FsbGJhY2tzOiB7XG4gICAgb25DaGF0PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbldvcmtmbG93UHJvZ3Jlc3M/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uQ29waWxvdD86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25WYXVsdFN5bmM/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uRXJyb3I/OiAoZXJyb3I6IHN0cmluZykgPT4gdm9pZDtcbiAgICBvbkNvbm5lY3Q/OiAoKSA9PiB2b2lkO1xuICAgIG9uRGlzY29ubmVjdD86ICgpID0+IHZvaWQ7XG4gIH0pOiB2b2lkIHtcbiAgICBjb25zdCB3c1VybCA9IHRoaXMuYmFzZVVybC5yZXBsYWNlKCdodHRwJywgJ3dzJykgKyAnL3dzL29ic2lkaWFuJztcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBXZWJTb2NrZXQgY29ubmVjdGlvbiB0byAke3dzVXJsfWApO1xuICAgIFxuICAgIHRoaXMud2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCh3c1VybCk7XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IGNvbm5lY3RlZCB0byBFdm9BZ2VudFgnKTtcbiAgICAgIGNhbGxiYWNrcy5vbkNvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFdlYlNvY2tldE1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IG1lc3NhZ2UgcmVjZWl2ZWQ6JywgbWVzc2FnZS50eXBlKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY2hhdCc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25DaGF0Py4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dvcmtmbG93X3Byb2dyZXNzJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbldvcmtmbG93UHJvZ3Jlc3M/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY29waWxvdCc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25Db3BpbG90Py4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3ZhdWx0X3N5bmMnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uVmF1bHRTeW5jPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignRmFpbGVkIHRvIHBhcnNlIFdlYlNvY2tldCBtZXNzYWdlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZyb20gRXZvQWdlbnRYJywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgIGNhbGxiYWNrcy5vbkRpc2Nvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3InKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQpIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LmNsb3NlKCk7XG4gICAgICB0aGlzLndlYnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZW5kV2ViU29ja2V0TWVzc2FnZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCAmJiB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGUsIGRhdGEgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU47XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldywgVEZpbGUsIEVkaXRvclBvc2l0aW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9ULCBWYXVsdFBpbG90VmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBDaGF0TW9kYWwgfSBmcm9tICcuL2NoYXQtbW9kYWwnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RhbCB9IGZyb20gJy4vd29ya2Zsb3ctbW9kYWwnO1xuaW1wb3J0IHsgRXZvQWdlbnRYQ2xpZW50IH0gZnJvbSAnLi9hcGktY2xpZW50JztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncywgQ29waWxvdFJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhdWx0UGlsb3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5ncyE6IFZhdWx0UGlsb3RTZXR0aW5ncztcbiAgYXBpQ2xpZW50ITogRXZvQWdlbnRYQ2xpZW50O1xuICBwcml2YXRlIHdlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICBwcml2YXRlIGNvcGlsb3RFbmFibGVkID0gZmFsc2U7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIEFQSSBjbGllbnRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG5cbiAgICAvLyBUZXN0IGJhY2tlbmQgY29ubmVjdGlvblxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWFpbiBoZWFsdGggY2hlY2sgZmFpbGVkIHdpdGggNDAwLCB0cnlpbmcgYWx0ZXJuYXRpdmUgbWV0aG9kJyk7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KchSBWYXVsdFBpbG90IGNvbm5lY3RlZCB0byBFdm9BZ2VudFgnLCAzMDAwKTtcbiAgICAgICAgLy8gQ29ubmVjdCBXZWJTb2NrZXQgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQpIHtcbiAgICAgICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGZhaWxlZDonLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBFdm9BZ2VudFggYmFja2VuZCBvZmZsaW5lIC0gc29tZSBmZWF0dXJlcyBtYXkgbm90IHdvcmsnLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGVycm9yOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBDYW5ub3QgY29ubmVjdCB0byBFdm9BZ2VudFggYmFja2VuZCcsIDUwMDApO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdGVyIHZpZXdcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgKGxlYWYpID0+IG5ldyBWYXVsdFBpbG90VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICBjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ2JvdCcsICdWYXVsdFBpbG90JywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgdGhpcy5vcGVuQ2hhdE1vZGFsKCk7XG4gICAgfSk7XG4gICAgcmliYm9uSWNvbkVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXJpYmJvbi1jbGFzcycpO1xuXG4gICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLWNoYXQnLFxuICAgICAgbmFtZTogJ09wZW4gQ2hhdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuQ2hhdE1vZGFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2V4ZWN1dGUtd29ya2Zsb3cnLFxuICAgICAgbmFtZTogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlbldvcmtmbG93TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYW5hbHl6ZS12YXVsdCcsXG4gICAgICBuYW1lOiAnQW5hbHl6ZSBDdXJyZW50IFZhdWx0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFuYWx5emVWYXVsdCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdjb3BpbG90LWNvbXBsZXRlJyxcbiAgICAgIG5hbWU6ICdHZXQgQUkgQ29tcGxldGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLmdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3F1aWNrLWNoYXQnLFxuICAgICAgbmFtZTogJ1F1aWNrIENoYXQgd2l0aCBTZWxlY3Rpb24nLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5xdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tdGFza3MnLFxuICAgICAgbmFtZTogJ1BsYW4gVGFza3MgZnJvbSBOb3RlJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMucGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi12YXVsdHBpbG90LXZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBWaWV3JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpXG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBlZGl0b3IgZXZlbnRzIGZvciBjb3BpbG90XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCAmJiB0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZhdWx0UGlsb3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBNYW5hZ2VtZW50XG4gIGNvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSByZXR1cm47XG5cbiAgICB0aGlzLmFwaUNsaWVudC5jb25uZWN0V2ViU29ja2V0KHtcbiAgICAgIG9uQ2hhdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjaGF0IHVwZGF0ZXNcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjaGF0IHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbldvcmtmbG93UHJvZ3Jlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93OiAke2RhdGEuc3RlcH1gLCAyMDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvcGlsb3Q6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBjb3BpbG90IHN1Z2dlc3Rpb25zXG4gICAgICAgIHRoaXMuaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25WYXVsdFN5bmM6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB2YXVsdCBzeW5jaHJvbml6YXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IHN5bmMgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICBuZXcgTm90aWNlKGBXZWJTb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCwgNTAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGNvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25EaXNjb25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICB0aGlzLmFwaUNsaWVudC5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldENvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIE1vZGFsIE1hbmFnZW1lbnRcbiAgb3BlbkNoYXRNb2RhbCgpIHtcbiAgICBuZXcgQ2hhdE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICBvcGVuV29ya2Zsb3dNb2RhbCgpIHtcbiAgICBuZXcgV29ya2Zsb3dNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgLy8gQ29tbWFuZCBJbXBsZW1lbnRhdGlvbnNcbiAgYXN5bmMgYW5hbHl6ZVZhdWx0KCkge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ0FuYWx5emluZyB2YXVsdC4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIC8vIEluY2x1ZGUgdXAgdG8gMTAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAxMCkpIHtcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICBjb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7ZmlsZUNvbnRlbnR9XFxuXFxuYDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5hbmFseXplVmF1bHRDb250ZXh0KHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYW5hbHlzaXNfdHlwZTogJ2luc2lnaHRzJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuYWx5c2lzIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0IEFuYWx5c2lzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgYW5hbHlzaXNDb250ZW50ID0gYCMgVmF1bHQgQW5hbHlzaXMgLSAke3RpbWVzdGFtcH1cXG5cXG5gO1xuICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEFuYWx5c2lzXFxuXFxuJHtyZXNwb25zZS5kYXRhLmFuYWx5c2lzfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnNpZ2h0cyAmJiByZXNwb25zZS5kYXRhLmluc2lnaHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEtleSBJbnNpZ2h0c1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5mb3JFYWNoKGluc2lnaHQgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7aW5zaWdodH1cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSAnXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucyAmJiByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBSZWNvbW1lbmRhdGlvbnNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke3JlY31cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBhbmFseXNpc0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBWYXVsdCBhbmFseXNpcyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdBbmFseXNpcyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYEFuYWx5c2lzIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0NvcGlsb3QgaXMgZGlzYWJsZWQgaW4gc2V0dGluZ3MnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgdGV4dEJlZm9yZUN1cnNvciA9IGN1cnJlbnRMaW5lLnN1YnN0cmluZygwLCBjdXJzb3IuY2gpO1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bicsXG4gICAgICAgIGNvbnRleHQ6IHRleHRCZWZvcmVDdXJzb3JcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCBjb21wbGV0aW9uIGF0IGN1cnNvclxuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKHJlc3BvbnNlLmRhdGEuY29tcGxldGlvbiwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQ29tcGxldGlvbiBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBxdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyB0ZXh0IHNlbGVjdGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY2hhdCh7XG4gICAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgZXhwbGFpbiBvciBhbmFseXplIHRoaXMgdGV4dDogXCIke3NlbGVjdGlvbn1cImAsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgcmVzcG9uc2UgYmVsb3cgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgICAgIGNvbnN0IG5ld0xpbmUgPSBgXFxuXFxuKipWYXVsdFBpbG90IEFuYWx5c2lzOioqXFxuJHtyZXNwb25zZS5kYXRhLnJlc3BvbnNlfVxcblxcbmA7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3TGluZSwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQW5hbHlzaXMgaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gY29udGVudCB0byBhbmFseXplJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgdGFza3MuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnBsYW5UYXNrcyh7XG4gICAgICAgIGdvYWw6IGBDcmVhdGUgYSB0YXNrIHBsYW4gYmFzZWQgb24gdGhpcyBub3RlOiAke2FjdGl2ZUZpbGU/Lm5hbWUgfHwgJ1VudGl0bGVkJ31gLFxuICAgICAgICBjb250ZXh0OiBjb250ZW50LFxuICAgICAgICB0aW1lZnJhbWU6ICcxIHdlZWsnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgdGFzayBwbGFuIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFRhc2sgUGxhbiAtICR7YWN0aXZlRmlsZT8uYmFzZW5hbWUgfHwgJ1VudGl0bGVkJ30gLSAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRhc2tDb250ZW50ID0gYCMgJHtyZXNwb25zZS5kYXRhLnBsYW4udGl0bGV9XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7cmVzcG9uc2UuZGF0YS5wbGFuLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAqKkVzdGltYXRlZCBEdXJhdGlvbjoqKiAke3Jlc3BvbnNlLmRhdGEucGxhbi5lc3RpbWF0ZWRfZHVyYXRpb259XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnBsYW4udGFza3MgJiYgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgVGFza3NcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAnW3hdJyA6ICdbIF0nO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7Y2hlY2tib3h9ICoqJHt0YXNrLnRpdGxlfSoqICgke3Rhc2sucHJpb3JpdHl9IHByaW9yaXR5KVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAgJHt0YXNrLmRlc2NyaXB0aW9ufVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAgKkVzdGltYXRlZCB0aW1lOiAke3Rhc2suZXN0aW1hdGVkX3RpbWV9KlxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzICYmIHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIE1pbGVzdG9uZXNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcy5mb3JFYWNoKG1pbGVzdG9uZSA9PiB7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgLSAqKiR7bWlsZXN0b25lLnRpdGxlfSoqICgke21pbGVzdG9uZS50YXJnZXRfZGF0ZX0pXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICR7bWlsZXN0b25lLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIHRhc2tDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFuIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1Rhc2sgcGxhbm5pbmcgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW5uaW5nIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgIGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICAvLyBBdXRvLWNvbXBsZXRpb24gaGFuZGxpbmdcbiAgcHJpdmF0ZSBoYW5kbGVLZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUgfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NtLWNvbnRlbnQnKSkgcmV0dXJuO1xuXG4gICAgLy8gRGVib3VuY2UgYXV0by1jb21wbGV0aW9uIHJlcXVlc3RzXG4gICAgY2xlYXJUaW1lb3V0KCh0aGlzIGFzIGFueSkuYXV0b0NvbXBsZXRlVGltZW91dCk7XG4gICAgKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXJBdXRvQ29tcGxldGlvbigpO1xuICAgIH0sIDEwMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQXV0b0NvbXBsZXRpb24oKSB7XG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm47XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgXG4gICAgLy8gT25seSB0cmlnZ2VyIGlmIGxpbmUgaGFzIHNvbWUgY29udGVudCBhbmQgY3Vyc29yIGlzIGF0IGVuZFxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkubGVuZ3RoIDwgMyB8fCBjdXJzb3IuY2ggIT09IGN1cnJlbnRMaW5lLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBlZGl0b3IuZ2V0VmFsdWUoKSxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2hvdyBzdWdnZXN0aW9ucyAoZm9yIG5vdyBqdXN0IHNob3cgZmlyc3Qgc3VnZ2VzdGlvbilcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgU3VnZ2VzdGlvbjogJHtyZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zWzBdfWAsIDMwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgZm9yIGF1dG8tY29tcGxldGlvblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dG8tY29tcGxldGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbihkYXRhOiBDb3BpbG90UmVzcG9uc2UpIHtcbiAgICAvLyBIYW5kbGUgcmVhbC10aW1lIGNvcGlsb3Qgc3VnZ2VzdGlvbnMgZnJvbSBXZWJTb2NrZXRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoYExpdmUgc3VnZ2VzdGlvbjogJHtkYXRhLmNvbXBsZXRpb259YCwgMjAwMCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0dGluZ3MgbWFuYWdlbWVudFxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgQVBJIGNsaWVudCBpZiBVUkwgY2hhbmdlZFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcbiAgICBcbiAgICAvLyBSZWNvbm5lY3QgV2ViU29ja2V0IGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgIXRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiB0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9TRVRUSU5HUyIsImJhY2tlbmRVcmwiLCJhcGlLZXkiLCJlbmFibGVXZWJTb2NrZXQiLCJlbmFibGVDb3BpbG90IiwiZW5hYmxlQXV0b0NvbXBsZXRlIiwiZGVmYXVsdEFnZW50IiwiY2hhdEhpc3RvcnlMaW1pdCIsImRlYnVnTW9kZSIsIlZhdWx0UGlsb3RTZXR0aW5nVGFiIiwiUGx1Z2luU2V0dGluZ1RhYiIsImNvbnN0cnVjdG9yIiwiYXBwIiwicGx1Z2luIiwic3VwZXIiLCJ0aGlzIiwiZGlzcGxheSIsImNvbnRhaW5lckVsIiwiZW1wdHkiLCJjcmVhdGVFbCIsInRleHQiLCJTZXR0aW5nIiwic2V0TmFtZSIsInNldERlc2MiLCJhZGRUZXh0Iiwic2V0UGxhY2Vob2xkZXIiLCJzZXRWYWx1ZSIsInNldHRpbmdzIiwib25DaGFuZ2UiLCJ2YWx1ZSIsIl9fYXdhaXRlciIsInNhdmVTZXR0aW5ncyIsImFkZEJ1dHRvbiIsImJ1dHRvbiIsInNldEJ1dHRvblRleHQiLCJvbkNsaWNrIiwidGVzdENvbm5lY3Rpb24iLCJhZGRUb2dnbGUiLCJ0b2dnbGUiLCJjb25uZWN0V2ViU29ja2V0IiwiZGlzY29ubmVjdFdlYlNvY2tldCIsImFkZFNsaWRlciIsInNsaWRlciIsInNldExpbWl0cyIsInNldER5bmFtaWNUb29sdGlwIiwiY2xzIiwiaW5uZXJIVE1MIiwibm90aWNlIiwiTm90aWNlIiwicmVzcG9uc2UiLCJhcGlDbGllbnQiLCJoZWFsdGhDaGVjayIsInN1Y2Nlc3MiLCJlcnJvciIsIl9hIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInNpbXBsZVJlc3BvbnNlIiwic2ltcGxlSGVhbHRoQ2hlY2siLCJkYXRhIiwic3RhdHVzIiwidmVyc2lvbiIsImhpZGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVCIsIlZhdWx0UGlsb3RWaWV3IiwiSXRlbVZpZXciLCJsZWFmIiwiZ2V0Vmlld1R5cGUiLCJnZXREaXNwbGF5VGV4dCIsImdldEljb24iLCJvbk9wZW4iLCJjb250YWluZXIiLCJhZGRDbGFzcyIsImhlYWRlckVsIiwic3RhdHVzRWwiLCJ1cGRhdGVTdGF0dXMiLCJxdWlja0FjdGlvbnNFbCIsImNyZWF0ZVF1aWNrQWN0aW9ucyIsInZhdWx0U3RhdHNFbCIsInVwZGF0ZVZhdWx0U3RhdHMiLCJhY3Rpdml0aWVzRWwiLCJhZGRTdHlsZXMiLCJzdGF0dXNDb250YWluZXIiLCJiYWNrZW5kU3RhdHVzIiwiYmFja2VuZEluZGljYXRvciIsIndzU3RhdHVzIiwiaXNXZWJTb2NrZXRDb25uZWN0ZWQiLCJjaGVja0JhY2tlbmRTdGF0dXMiLCJpbmRpY2F0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTmFtZSIsImFjdGlvbnNHcmlkIiwib25jbGljayIsIm9wZW5DaGF0TW9kYWwiLCJvcGVuV29ya2Zsb3dNb2RhbCIsImFuYWx5emVWYXVsdCIsImFjdGl2ZVZpZXciLCJ3b3Jrc3BhY2UiLCJnZXRBY3RpdmVWaWV3T2ZUeXBlIiwiTWFya2Rvd25WaWV3IiwiZ2V0Q29waWxvdENvbXBsZXRpb24iLCJlZGl0b3IiLCJzdGF0c0NvbnRhaW5lciIsImZpbGVzIiwidmF1bHQiLCJnZXRGaWxlcyIsIm1hcmtkb3duRmlsZXMiLCJnZXRNYXJrZG93bkZpbGVzIiwibGFiZWwiLCJsZW5ndGgiLCJ0b1N0cmluZyIsImdldEFsbExvYWRlZEZpbGVzIiwiZmlsdGVyIiwiZiIsIlRGb2xkZXIiLCJmb3JFYWNoIiwic3RhdCIsInN0YXRFbCIsImxvYWRBZ2VudEluZm8iLCJnZXRBZ2VudHMiLCJhZ2VudENvdW50IiwiYWN0aXZlQWdlbnRzIiwiYWdlbnQiLCJhY3RpdmUiLCJhZ2VudFN0YXRzRWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGVFbCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsIm9uQ2xvc2UiLCJDaGF0TW9kYWwiLCJNb2RhbCIsImN1cnJlbnRDb252ZXJzYXRpb25JZCIsIm1lc3NhZ2VzIiwiY29udGVudEVsIiwidG9vbGJhckVsIiwiY2xlYXJDaGF0IiwiYWdlbnRTZWxlY3QiLCJsb2FkQWdlbnRzIiwiY2hhdENvbnRhaW5lciIsIm1lc3NhZ2VzRWwiLCJpbnB1dENvbnRhaW5lciIsImlucHV0RWwiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJzZW5kQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0Iiwic2VuZE1lc3NhZ2UiLCJmb2N1cyIsImxvYWRDb252ZXJzYXRpb25IaXN0b3J5Iiwic2VsZWN0RWwiLCJuYW1lIiwiZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSIsInJlbmRlck1lc3NhZ2VzIiwidHJpbSIsImRpc2FibGVkIiwiYWRkTWVzc2FnZSIsImFjdGl2ZUZpbGUiLCJnZXRBY3RpdmVGaWxlIiwidmF1bHRDb250ZXh0IiwiY29udGVudCIsInJlYWQiLCJjaGF0IiwiY29udmVyc2F0aW9uX2lkIiwidW5kZWZpbmVkIiwidmF1bHRfY29udGV4dCIsImFnZW50X2lkIiwiZ2V0U2VsZWN0ZWRBZ2VudCIsImVycm9yTXNnIiwicXVlcnlTZWxlY3RvciIsInJvbGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwdXNoIiwicmVuZGVyTWVzc2FnZSIsInNjcm9sbFRvQm90dG9tIiwibWVzc2FnZUVsIiwicmVuZGVyTWFya2Rvd24iLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJyZXBsYWNlIiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwiV29ya2Zsb3dNb2RhbCIsImlzRXhlY3V0aW5nIiwiZm9ybUVsIiwiZ29hbENvbnRhaW5lciIsImdvYWxJbnB1dCIsImNvbnRleHRDb250YWluZXIiLCJjb250ZXh0SW5wdXQiLCJvcHRpb25zQ29udGFpbmVyIiwiaW5jbHVkZUFjdGl2ZUZpbGUiLCJhY3RpdmVGaWxlQ2hlY2tib3giLCJjcmVhdGVTcGFuIiwiaW5jbHVkZUFsbEZpbGVzIiwiYWxsRmlsZXNDaGVja2JveCIsImV4ZWN1dGVCdXR0b24iLCJleGVjdXRlV29ya2Zsb3ciLCJjaGVja2VkIiwicHJvZ3Jlc3NDb250YWluZXIiLCJzdHlsZSIsInJlc3VsdHNDb250YWluZXIiLCJnb2FsIiwidmF1bHRDb250ZW50IiwiZmlsZSIsInNsaWNlIiwicmVxdWVzdCIsImNvbnRleHQiLCJ2YXVsdF9jb250ZW50Iiwic2V0dXBQcm9ncmVzc0xpc3RlbmVyIiwiZGlzcGxheVJlc3VsdHMiLCJkaXNwbGF5RXJyb3IiLCJkaXNwbGF5UHJvZ3Jlc3MiLCJzZXRUaW1lb3V0Iiwid29ya2Zsb3ciLCJleGVjdXRpb25fdGltZSIsInJlc3VsdEVsIiwicmVzdWx0Iiwic3RlcHNfdGFrZW4iLCJzdGVwc0VsIiwic3RlcHNMaXN0Iiwic3RlcCIsImFydGlmYWN0cyIsImFydGlmYWN0c0VsIiwiYXJ0aWZhY3QiLCJpbmRleCIsImFydGlmYWN0RWwiLCJ0aXRsZSIsInNhdmVBcnRpZmFjdEFzTm90ZSIsInNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUiLCJmaWxlbmFtZSIsImNyZWF0ZSIsInNwbGl0IiwiRXZvQWdlbnRYQ2xpZW50IiwiYmFzZVVybCIsIndzQ2FsbGJhY2tzIiwiTWFwIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludF8xIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsIk9iamVjdCIsImFzc2lnbiIsIkFjY2VwdCIsImZldGNoIiwibW9kZSIsImNyZWRlbnRpYWxzIiwiY29udGVudFR5cGUiLCJnZXQiLCJqc29uIiwib2siLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNUZXh0IiwibG9nIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb252ZXJzYXRpb25JZF8xIiwiY29udmVyc2F0aW9uSWQiLCJsaW1pdCIsInJlcXVlc3RCb2R5IiwiaW5jbHVkZV9tZXNzYWdlcyIsImRlbGV0ZUNvbnZlcnNhdGlvbiIsImNyZWF0ZUFnZW50IiwiZXhlY3V0ZUFnZW50IiwiYW5hbHl6ZVZhdWx0Q29udGV4dCIsInBsYW5UYXNrcyIsInBhcnNlSW50ZWxsaWdlbmNlIiwidXBkYXRlTWVtb3J5IiwiY2FsbGJhY2tzIiwid3NVcmwiLCJ3ZWJzb2NrZXQiLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJvbkNvbm5lY3QiLCJjYWxsIiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJzZSIsIm9uQ2hhdCIsIl9iIiwib25Xb3JrZmxvd1Byb2dyZXNzIiwiX2MiLCJvbkNvcGlsb3QiLCJfZCIsIm9uVmF1bHRTeW5jIiwiX2UiLCJvbkVycm9yIiwiX2YiLCJvbmNsb3NlIiwiY29kZSIsInJlYXNvbiIsIm9uRGlzY29ubmVjdCIsIm9uZXJyb3IiLCJjbG9zZSIsInNlbmRXZWJTb2NrZXRNZXNzYWdlIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwiVmF1bHRQaWxvdFBsdWdpbiIsIlBsdWdpbiIsIndlYnNvY2tldENvbm5lY3RlZCIsImNvcGlsb3RFbmFibGVkIiwib25sb2FkIiwibG9hZFNldHRpbmdzIiwicmVnaXN0ZXJWaWV3IiwiYWRkUmliYm9uSWNvbiIsImV2dCIsImFkZENvbW1hbmQiLCJjYWxsYmFjayIsImVkaXRvckNhbGxiYWNrIiwicXVpY2tDaGF0V2l0aFNlbGVjdGlvbiIsInBsYW5UYXNrc0Zyb21Ob3RlIiwiYWN0aXZhdGVWaWV3IiwicmVnaXN0ZXJEb21FdmVudCIsImhhbmRsZUtleVVwIiwiYmluZCIsImFkZFNldHRpbmdUYWIiLCJvbnVubG9hZCIsImRldGFjaExlYXZlc09mVHlwZSIsImhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uIiwib3BlbiIsImZpbGVDb250ZW50IiwiYW5hbHlzaXNfdHlwZSIsImFuYWx5c2lzQ29udGVudCIsImFuYWx5c2lzIiwiaW5zaWdodHMiLCJpbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwicmVjIiwiY3Vyc29yIiwiZ2V0Q3Vyc29yIiwidGV4dEJlZm9yZUN1cnNvciIsImdldExpbmUiLCJsaW5lIiwic3Vic3RyaW5nIiwiY2giLCJmdWxsVGV4dCIsImdldFZhbHVlIiwiY3Vyc29yX3Bvc2l0aW9uIiwicG9zVG9PZmZzZXQiLCJmaWxlX3R5cGUiLCJyZXBsYWNlUmFuZ2UiLCJjb21wbGV0aW9uIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwibmV3TGluZSIsInRpbWVmcmFtZSIsImJhc2VuYW1lIiwidGFza0NvbnRlbnQiLCJwbGFuIiwiZGVzY3JpcHRpb24iLCJlc3RpbWF0ZWRfZHVyYXRpb24iLCJ0YXNrcyIsInRhc2siLCJjaGVja2JveCIsInByaW9yaXR5IiwiZXN0aW1hdGVkX3RpbWUiLCJtaWxlc3RvbmVzIiwibWlsZXN0b25lIiwidGFyZ2V0X2RhdGUiLCJsZWF2ZXMiLCJnZXRMZWF2ZXNPZlR5cGUiLCJyaWdodExlYWYiLCJnZXRSaWdodExlYWYiLCJzZXRWaWV3U3RhdGUiLCJyZXZlYWxMZWFmIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjbGVhclRpbWVvdXQiLCJhdXRvQ29tcGxldGVUaW1lb3V0IiwidHJpZ2dlckF1dG9Db21wbGV0aW9uIiwiY3VycmVudExpbmUiLCJzdWdnZXN0aW9ucyIsImxvYWREYXRhIiwic2F2ZURhdGEiXSwibWFwcGluZ3MiOiI0WEFJTyxNQUFNQSxFQUF1QyxDQUNsREMsV0FBWSx3QkFDWkMsT0FBUSxHQUNSQyxpQkFBaUIsRUFDakJDLGVBQWUsRUFDZkMsb0JBQW9CLEVBQ3BCQyxhQUFjLEdBQ2RDLGlCQUFrQixJQUNsQkMsV0FBVyxHQUdQLE1BQU9DLFVBQTZCQyxFQUFBQSxpQkFHeEMsV0FBQUMsQ0FBWUMsRUFBVUMsR0FDcEJDLE1BQU1GLEVBQUtDLEdBQ1hFLEtBQUtGLE9BQVNBLENBQ2YsQ0FFRCxPQUFBRyxHQUNFLE1BQU1DLFlBQUVBLEdBQWdCRixLQUN4QkUsRUFBWUMsUUFFWkQsRUFBWUUsU0FBUyxLQUFNLENBQUVDLEtBQU0sd0JBQ25DSCxFQUFZRSxTQUFTLElBQUssQ0FDeEJDLEtBQU0sb0VBSVJILEVBQVlFLFNBQVMsS0FBTSxDQUFFQyxLQUFNLGVBRW5DLElBQUlDLEVBQUFBLFFBQVFKLEdBQ1RLLFFBQVEsZUFDUkMsUUFBUSxtQ0FDUkMsUUFBUUosR0FDUEEsRUFDR0ssZUFBZSx5QkFDZkMsU0FBU1gsS0FBS0YsT0FBT2MsU0FBUzFCLFlBQzlCMkIsU0FBZUMsR0FBUUMsRUFBQWYsVUFBQSxPQUFBLEVBQUEsWUFDdEJBLEtBQUtGLE9BQU9jLFNBQVMxQixXQUFhNEIsUUFDNUJkLEtBQUtGLE9BQU9rQixjQUNuQixLQUdQ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
