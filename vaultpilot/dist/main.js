"use strict";var t=require("obsidian");function e(t,e,n,a){return new(n||(n=Promise))(function(i,o){function s(t){try{r(a.next(t))}catch(t){o(t)}}function l(t){try{r(a.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,l)}r((a=a.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={enableVaultManagement:!0,autoSyncVaultStructure:!1,searchResultsLimit:50,enableSmartSearch:!0,batchOperationTimeout:3e4,showVaultStats:!0,maxSearchResults:100,defaultSearchType:"content",enableFileOperations:!0,confirmDestructiveOperations:!0,autoBackupBeforeOperations:!1};const a={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1,vaultManagement:n};class i extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:a}=this;a.empty(),a.createEl("h2",{text:"VaultPilot Settings"}),a.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),a.createEl("h3",{text:"Connection"}),new t.Setting(a).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),a.createEl("h3",{text:"Features"}),new t.Setting(a).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(a).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Agent Configuration"}),new t.Setting(a).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(t=>t.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Advanced"}),new t.Setting(a).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(t=>t.setValue(this.plugin.settings.showIntentDebug).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Vault Management"}),function(a,i){a.createEl("h2",{text:"Vault Management"}),a.createEl("p",{text:"Configure AI-powered vault structure analysis and file operations."}),new t.Setting(a).setName("Enable Vault Management").setDesc("Enable AI-powered vault structure analysis and file operations").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.enableVaultManagement)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.enableVaultManagement=t,yield i.saveSettings(),t?i.initializeVaultManagement():i.disableVaultManagement()}))}),new t.Setting(a).setName("Auto Sync Vault Structure").setDesc("Automatically update vault structure analysis when files change").addToggle(t=>{var a,o;return t.setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.autoSyncVaultStructure)&&void 0!==o&&o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.autoSyncVaultStructure=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Enable Smart Search").setDesc("Use AI-powered search with context and insights").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.enableSmartSearch)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.enableSmartSearch=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Search Results Limit").setDesc("Maximum number of search results to display").addSlider(t=>{var a,o;return t.setLimits(10,200,10).setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.searchResultsLimit)&&void 0!==o?o:50).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.searchResultsLimit=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Default Search Type").setDesc("Default search mode for smart search").addDropdown(t=>{var a,o;return t.addOption("content","Content Search").addOption("filename","Filename Search").addOption("tags","Tag Search").addOption("links","Link Search").addOption("comprehensive","Comprehensive Search").setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.defaultSearchType)&&void 0!==o?o:"content").onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.defaultSearchType=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Enable File Operations").setDesc("Allow file creation, deletion, and modification through the interface").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.enableFileOperations)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.enableFileOperations=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Confirm Destructive Operations").setDesc("Show confirmation dialog for file deletion and destructive operations").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.confirmDestructiveOperations)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.confirmDestructiveOperations=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Auto Backup Before Operations").setDesc("Automatically create backups before destructive file operations").addToggle(t=>{var a,o;return t.setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.autoBackupBeforeOperations)&&void 0!==o&&o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.autoBackupBeforeOperations=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Batch Operation Timeout").setDesc("Timeout for batch operations in milliseconds").addText(t=>{var a,o;return t.setPlaceholder("30000").setValue(String(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.batchOperationTimeout)&&void 0!==o?o:3e4)).onChange(t=>e(this,void 0,void 0,function*(){const e=parseInt(t)||3e4;i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.batchOperationTimeout=e,yield i.saveSettings()}))}),new t.Setting(a).setName("Show Vault Statistics").setDesc("Display vault statistics in modals and interfaces").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.showVaultStats)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.showVaultStats=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Test Vault Management Connection").setDesc("Test connection to vault management endpoints").addButton(t=>t.setButtonText("Test Connection").setCta().onClick(()=>e(this,void 0,void 0,function*(){if(!i.vaultClient)return t.setButtonText("Not Available"),void setTimeout(()=>t.setButtonText("Test Connection"),2e3);t.setButtonText("Testing..."),t.setDisabled(!0);try{(yield i.vaultClient.testConnection()).success?t.setButtonText("âœ… Connected"):t.setButtonText("âŒ Failed")}catch(e){t.setButtonText("âŒ Error")}t.setDisabled(!1),setTimeout(()=>t.setButtonText("Test Connection"),3e3)}))),a.createEl("h3",{text:"Advanced Vault Management"}),new t.Setting(a).setName("Maximum Search Results").setDesc("Absolute maximum number of search results to fetch from backend").addSlider(t=>{var a,o;return t.setLimits(50,500,25).setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.maxSearchResults)&&void 0!==o?o:100).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.maxSearchResults=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Reset Vault Management Settings").setDesc("Reset all vault management settings to their default values").addButton(t=>t.setButtonText("Reset to Defaults").setWarning().onClick(()=>e(this,void 0,void 0,function*(){i.settings.vaultManagement=Object.assign({},n),yield i.saveSettings();const t=i.app.setting.activeTab;t&&t.display&&t.display()})))}(a,this.plugin),a.createEl("h2",{text:"Help & Documentation"}),a.createEl("h3",{text:"Information"});a.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let a=yield this.plugin.apiClient.healthCheck();if(!a.success&&(null===(e=a.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(a={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),a.success?new t.Notice("âœ… Connection successful!",3e3):new t.Notice(`âŒ Connection failed: ${a.error}`,5e3)}catch(e){n.hide(),new t.Notice(`âŒ Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const o="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return o}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),a=t.createEl("div",{cls:"vaultpilot-status-item"});a.createEl("span",{text:"WebSocket: "}),a.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="ðŸŸ¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="ðŸ”´ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="ðŸ”´ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"ðŸ’¬ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"ðŸ“Š Open Dashboard",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateFullTabView();e.createEl("button",{text:"âš™ï¸ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"ðŸ” Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"âœ¨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"ðŸ”„ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),a=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:a.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in view...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in view:",t),t.success&&t.data){let e=[];if(Array.isArray(t.data))e=t.data;else if(t.data&&"object"==typeof t.data){const n=t.data;n.agents&&Array.isArray(n.agents)?(e=n.agents,console.log("VaultPilot: Found agents array in view, using response.data.agents")):n.data&&Array.isArray(n.data)?(e=n.data,console.log("VaultPilot: Found nested data in view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof t.data,t.data)}const n=e.length,a=e.filter(t=>t.active).length,i=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});i.createEl("h4",{text:"Available Agents"});i.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${a}/${n} active`})}}catch(t){console.error("Failed to load agents in view:",t)}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}const l="vaultpilot-full-tab-view";class r extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return l}getDisplayText(){return"VaultPilot Dashboard"}getIcon(){return"layout-dashboard"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-full-tab-view"),t.style.height="100%",t.style.overflow="hidden";const e=t.createEl("div",{cls:"vaultpilot-main-layout"}),n=e.createEl("div",{cls:"vaultpilot-left-sidebar"});this.createLeftSidebar(n);const a=e.createEl("div",{cls:"vaultpilot-main-content"});this.createMainContent(a);const i=e.createEl("div",{cls:"vaultpilot-right-sidebar"});this.createRightSidebar(i),this.addFullTabStyles()})}createLeftSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-sidebar-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot"}),e.createEl("p",{text:"AI Assistant Dashboard",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats()}createMainContent(t){const e=t.createEl("div",{cls:"vaultpilot-tab-nav"}),n=e.createEl("button",{text:"ðŸ’¬ Chat",cls:"vaultpilot-tab-button active"}),a=e.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-tab-button"}),i=e.createEl("button",{text:"ðŸ“Š Analytics",cls:"vaultpilot-tab-button"}),o=t.createEl("div",{cls:"vaultpilot-tab-content"});this.chatEl=o.createEl("div",{cls:"vaultpilot-chat-section active"}),this.createChatSection(this.chatEl),this.workflowEl=o.createEl("div",{cls:"vaultpilot-workflow-section"}),this.createWorkflowSection(this.workflowEl);const s=o.createEl("div",{cls:"vaultpilot-analytics-section"});this.createAnalyticsSection(s),n.onclick=()=>this.switchTab("chat",n),a.onclick=()=>this.switchTab("workflow",a),i.onclick=()=>this.switchTab("analytics",i)}createRightSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-recent-files"});e.createEl("h3",{text:"Recent Files"}),this.updateRecentFiles(e);const n=t.createEl("div",{cls:"vaultpilot-agent-status"});n.createEl("h3",{text:"Agent Status"}),this.updateAgentStatus(n);const a=t.createEl("div",{cls:"vaultpilot-activity-feed"});a.createEl("h3",{text:"Activity Feed"}),this.createActivityFeed(a)}createChatSection(t){t.createEl("div",{cls:"vaultpilot-chat-header"}).createEl("h3",{text:"AI Chat Interface"});const e=t.createEl("div",{cls:"vaultpilot-chat-history"});e.createEl("div",{text:"Welcome! Start a conversation with your AI assistant.",cls:"vaultpilot-chat-welcome"});const n=t.createEl("div",{cls:"vaultpilot-chat-input"}),a=n.createEl("textarea",{placeholder:"Type your message here...",cls:"vaultpilot-chat-textarea"}),i=n.createEl("button",{text:"Send",cls:"vaultpilot-chat-send-button"});i.onclick=()=>{const t=a.value.trim();t&&(this.sendChatMessage(t,e),a.value="")},a.onkeydown=t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),i.click())}}createWorkflowSection(t){t.createEl("div",{cls:"vaultpilot-workflow-header"}).createEl("h3",{text:"Workflow Management"});const e=t.createEl("div",{cls:"vaultpilot-workflow-container"}).createEl("div",{cls:"vaultpilot-workflow-grid"});[{name:"Analyze Vault",icon:"ðŸ”",description:"Analyze your vault structure and content"},{name:"Generate Summary",icon:"ðŸ“",description:"Create summaries of your notes"},{name:"Link Analysis",icon:"ðŸ”—",description:"Analyze note connections and relationships"},{name:"Tag Management",icon:"ðŸ·ï¸",description:"Organize and manage your tags"},{name:"Daily Planning",icon:"ðŸ“…",description:"Plan your day based on your notes"},{name:"Knowledge Graph",icon:"ðŸ•¸ï¸",description:"Visualize your knowledge connections"},{name:"Content Search",icon:"ðŸ”Ž",description:"Advanced search across your vault"},{name:"Note Templates",icon:"ðŸ“„",description:"Create and manage note templates"}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-workflow-card"});n.createEl("div",{text:t.icon,cls:"vaultpilot-workflow-icon"}),n.createEl("h4",{text:t.name}),n.createEl("p",{text:t.description});n.createEl("button",{text:"Run",cls:"vaultpilot-workflow-run-button"}).onclick=()=>this.runWorkflow(t.name)})}createAnalyticsSection(t){t.createEl("div",{cls:"vaultpilot-analytics-header"}).createEl("h3",{text:"Vault Analytics"});const e=t.createEl("div",{cls:"vaultpilot-charts-container"}),n=e.createEl("div",{cls:"vaultpilot-chart-card"});n.createEl("h4",{text:"File Type Distribution"}),n.createEl("div",{text:"Chart visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const a=e.createEl("div",{cls:"vaultpilot-chart-card"});a.createEl("h4",{text:"Note Creation Timeline"}),a.createEl("div",{text:"Timeline visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const i=e.createEl("div",{cls:"vaultpilot-chart-card"});i.createEl("h4",{text:"Tag Usage"}),i.createEl("div",{text:"Tag analytics coming soon...",cls:"vaultpilot-chart-placeholder"});const o=e.createEl("div",{cls:"vaultpilot-chart-card"});o.createEl("h4",{text:"Word Count Analysis"}),o.createEl("div",{text:"Word count visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const s=e.createEl("div",{cls:"vaultpilot-chart-card"});s.createEl("h4",{text:"Link Density"}),s.createEl("div",{text:"Link analysis coming soon...",cls:"vaultpilot-chart-placeholder"});const l=e.createEl("div",{cls:"vaultpilot-chart-card"});l.createEl("h4",{text:"Activity Heatmap"}),l.createEl("div",{text:"Activity heatmap coming soon...",cls:"vaultpilot-chart-placeholder"})}switchTab(t,e){var n;this.containerEl.querySelectorAll(".vaultpilot-tab-button").forEach(t=>{t.removeClass("active")}),this.containerEl.querySelectorAll(".vaultpilot-chat-section, .vaultpilot-workflow-section, .vaultpilot-analytics-section").forEach(t=>{t.removeClass("active")}),e.addClass("active"),"chat"===t?this.chatEl.addClass("active"):"workflow"===t?this.workflowEl.addClass("active"):"analytics"===t&&(null===(n=this.containerEl.querySelector(".vaultpilot-analytics-section"))||void 0===n||n.addClass("active"))}sendChatMessage(t,n){return e(this,void 0,void 0,function*(){n.createEl("div",{cls:"vaultpilot-chat-message user"}).createEl("div",{text:t});const e=n.createEl("div",{cls:"vaultpilot-chat-message assistant thinking"});e.createEl("div",{text:"Thinking..."}),n.scrollTop=n.scrollHeight;try{const a=yield this.plugin.apiClient.sendChat({message:t,context:null});if(e.remove(),a.success&&a.data){n.createEl("div",{cls:"vaultpilot-chat-message assistant"}).createEl("div",{text:a.data.response})}else{n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Could not get response from AI"})}}catch(t){e.remove();n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Connection failed"})}n.scrollTop=n.scrollHeight})}runWorkflow(n){return e(this,void 0,void 0,function*(){new t.Notice(`Running workflow: ${n}`);try{switch(n){case"Analyze Vault":yield this.plugin.analyzeVault();break;case"Daily Planning":yield this.plugin.planMyDay();break;default:new t.Notice(`${n} workflow is coming soon!`)}}catch(e){new t.Notice(`Error running workflow: ${n}`)}})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),a=t.createEl("div",{cls:"vaultpilot-status-item"});a.createEl("span",{text:"WebSocket: "}),a.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="ðŸŸ¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="ðŸ”´ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="ðŸ”´ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const t=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});t.createEl("button",{text:"ðŸ”„ Refresh",cls:"vaultpilot-action-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()};t.createEl("button",{text:"ðŸ“‹ Sidebar View",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateView();t.createEl("button",{text:"ðŸ’¬ Modal Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();t.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal()}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),a=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:a.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})})}updateRecentFiles(t){this.app.vault.getMarkdownFiles().sort((t,e)=>e.stat.mtime-t.stat.mtime).slice(0,5).forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-recent-file"});n.createEl("span",{text:e.basename}),n.onclick=()=>{this.app.workspace.openLinkText(e.path,"",!1)}})}updateAgentStatus(t){this.loadAgentInfo(t)}loadAgentInfo(t){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in full-tab-view...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in full-tab-view:",e),e.success&&e.data&&t){let n=[];if(Array.isArray(e.data))n=e.data;else if(e.data&&"object"==typeof e.data){const t=e.data;t.agents&&Array.isArray(t.agents)?(n=t.agents,console.log("VaultPilot: Found agents array in full-tab-view, using response.data.agents")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("VaultPilot: Found nested data in full-tab-view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof e.data,e.data)}const a=n.length,i=n.filter(t=>t.active).length,o=t.createEl("div",{cls:"vaultpilot-agent-info"});o.createEl("div",{text:`${i}/${a} active`}),n.forEach(t=>{const e=o.createEl("div",{cls:"vaultpilot-agent-item"});e.createEl("span",{text:t.name}),e.createEl("span",{text:t.active?"ðŸŸ¢":"ðŸ”´",cls:"vaultpilot-agent-status"})})}}catch(t){console.error("Failed to load agents in full tab view:",t)}})}createActivityFeed(t){[{time:"Just now",activity:"VaultPilot started"},{time:"5 min ago",activity:"Connection established"},{time:"1 hour ago",activity:"Last vault analysis"}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-activity-item"});n.createEl("div",{text:e.activity}),n.createEl("div",{text:e.time,cls:"vaultpilot-activity-time"})})}addFullTabStyles(){if(!document.getElementById("vaultpilot-full-tab-styles")){const t=document.createElement("style");t.id="vaultpilot-full-tab-styles",t.textContent='\n        /* Ensure the full tab view fills available space */\n        .workspace-leaf-content[data-type="vaultpilot-full-tab-view"] {\n          height: 100%;\n        }\n        .vaultpilot-full-tab-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-main-layout {\n          display: flex;\n          flex: 1;\n          gap: 1px;\n          background: var(--background-modifier-border);\n          min-height: 0;\n        }\n        .vaultpilot-left-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-main-content {\n          flex: 1;\n          background: var(--background-primary);\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n        }\n        .vaultpilot-right-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-sidebar-header {\n          text-align: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-nav {\n          display: flex;\n          background: var(--background-secondary);\n          border-bottom: 1px solid var(--background-modifier-border);\n          flex-shrink: 0;\n        }\n        .vaultpilot-tab-button {\n          flex: 1;\n          padding: 12px 16px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .vaultpilot-tab-button:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-tab-button.active {\n          background: var(--background-primary);\n          color: var(--text-normal);\n          border-bottom: 2px solid var(--interactive-accent);\n        }\n        .vaultpilot-tab-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-chat-section,\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          flex: 1;\n          padding: 16px;\n          display: none;\n          overflow-y: auto;\n          box-sizing: border-box;\n          min-height: 0;\n        }\n        .vaultpilot-chat-section.active,\n        .vaultpilot-workflow-section.active,\n        .vaultpilot-analytics-section.active {\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-chat-history {\n          flex: 1;\n          overflow-y: auto;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          margin-bottom: 16px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-chat-input {\n          display: flex;\n          gap: 8px;\n        }\n        .vaultpilot-chat-textarea {\n          flex: 1;\n          min-height: 60px;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-chat-send-button {\n          padding: 8px 16px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          height: fit-content;\n          align-self: flex-end;\n        }\n        .vaultpilot-chat-message {\n          margin-bottom: 12px;\n          padding: 8px 12px;\n          border-radius: 8px;\n          max-width: 80%;\n        }\n        .vaultpilot-chat-message.user {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          margin-left: auto;\n        }\n        .vaultpilot-chat-message.assistant {\n          background: var(--background-primary);\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-message.thinking {\n          opacity: 0.7;\n          font-style: italic;\n        }\n        .vaultpilot-chat-message.error {\n          background: var(--background-modifier-error);\n          color: var(--text-error);\n        }\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n          min-height: 0;\n        }\n        .vaultpilot-workflow-header,\n        .vaultpilot-analytics-header {\n          flex-shrink: 0;\n        }\n        .vaultpilot-workflow-container,\n        .vaultpilot-charts-container {\n          flex: 1;\n          min-height: 0;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding-bottom: 16px;\n        }\n        .vaultpilot-workflow-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          text-align: center;\n        }\n        .vaultpilot-workflow-icon {\n          font-size: 32px;\n          margin-bottom: 8px;\n        }\n        .vaultpilot-workflow-run-button {\n          margin-top: 8px;\n          padding: 6px 12px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .vaultpilot-charts-container {\n          flex: 1;\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding-bottom: 16px;\n          overflow-y: auto;\n          min-height: 0;\n        }\n        .vaultpilot-chart-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n        }\n        .vaultpilot-chart-placeholder {\n          text-align: center;\n          color: var(--text-muted);\n          font-style: italic;\n          padding: 40px;\n        }\n        .vaultpilot-recent-file {\n          padding: 4px 8px;\n          margin-bottom: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-recent-file:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-agent-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px 0;\n        }\n        .vaultpilot-activity-item {\n          margin-bottom: 8px;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-activity-time {\n          font-size: 11px;\n          color: var(--text-muted);\n          margin-top: 2px;\n        }\n        /* Inherit styles from original view */\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3 {\n          margin-bottom: 12px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 4px;\n          font-size: 14px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n          font-size: 11px;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-action-button {\n          padding: 8px 6px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 11px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 8px;\n          background: var(--background-secondary);\n          border-radius: 4px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 2px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 10px;\n          color: var(--text-muted);\n        }\n      ',document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}let c;function u(){return e(this,void 0,void 0,function*(){const t=c.workspace.getActiveFile();if(!t)return null;return(yield c.vault.read(t)).slice(0,8e3)})}class d extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"âš¡ Automatic mode detection enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const a=n.createEl("select",{cls:"vaultpilot-agent-select"});a.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(a),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response:",e),e.success&&e.data){console.log("VaultPilot: response.data type:",typeof e.data),console.log("VaultPilot: response.data content:",e.data);let n=[];if(Array.isArray(e.data))n=e.data;else if(e.data&&"object"==typeof e.data){const t=e.data;t.agents&&Array.isArray(t.agents)?n=t.agents:t.data&&Array.isArray(t.data)&&(n=t.data)}if(n.length>0)console.log("VaultPilot: Found",n.length,"agents"),n.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})});else{console.log("VaultPilot: No agents found in response");t.createEl("option",{text:"No agents available",value:""}).disabled=!0}}else console.error("Failed to load agents: API returned error or no data:",e)}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const[n,a]=yield Promise.all([u(),this.plugin.apiClient.classifyIntent(e)]),i={message:e,context:n};let o;this.plugin.settings.showIntentDebug&&this.showIntentDebug(a.intent),"agent"===a.intent?(o=yield this.plugin.apiClient.runWorkflow(i),o.success&&o.data?this.addMessage("assistant",`âš™ï¸ Agent Mode (auto-detected)\n\n${o.data.result}`):this.addMessage("assistant",`Error in agent mode: ${o.error||"Failed to get response"}`)):(o=yield this.plugin.apiClient.sendChat(i,{conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent()}),o.success&&o.data?(this.currentConversationId=o.data.conversation_id,this.addMessage("assistant",o.data.response)):this.addMessage("assistant",`Error: ${o.error||"Failed to get response"}`)),(null==n?void 0:n.length)||new t.Notice("âš ï¸ No vault content was sent; replies may be generic."),o.success||new t.Notice(`Chat error: ${o.error}`)}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(t)}}showIntentDebug(t){const e=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"ðŸ” Intent detected: "+("agent"===t?"âš™ï¸ Agent Mode":"ðŸ’¬ Ask Mode")});setTimeout(()=>{e.remove()},3e3)}onClose(){const{contentEl:t}=this;t.empty()}}class p extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"âš™ï¸ Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=a.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const r=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,a){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(a){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const o=yield this.plugin.apiClient.executeWorkflow(i);if(!o.success||!o.data)throw new Error(o.error||"Workflow execution failed");yield this.displayResults(o.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"âœ… Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const a=e.createEl("div",{cls:"vaultpilot-artifact"});a.createEl("h5",{text:t.title}),a.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});a.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,a){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,a=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,a),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let a="# VaultPilot Workflow Results\n\n";a+=`**Goal:** ${this.goalInput.value}\n\n`,a+=`**Execution Time:** ${n.execution_time}s\n\n`,a+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(a+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{a+=`${e+1}. ${t}\n`}),a+="\n"),n.artifacts&&n.artifacts.length>0&&(a+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{a+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,a),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>âŒ Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class h{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,a=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(a.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:a,mode:"cors",credentials:"omit"}));let i;const o=t.headers.get("content-type");if(i=o&&o.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/status`);const t=yield this.makeRequest("/status",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/status`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}runWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:t.message,context:t.context||void 0})})})}sendChat(t,n){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:t.message,vault_context:t.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}classifyIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5}})}explainIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t,include_debug:!0})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,a,i,o,s,l,r;try{const r=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",r.type),r.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,r.data);break;case"workflow_progress":null===(a=t.onWorkflowProgress)||void 0===a||a.call(t,r.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,r.data);break;case"vault_sync":null===(o=t.onVaultSync)||void 0===o||o.call(t,r.data);break;case"intent_debug":null===(s=t.onIntentDebug)||void 0===s||s.call(t,r.data);break;case"error":null===(l=t.onError)||void 0===l||l.call(t,r.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(r=t.onError)||void 0===r||r.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class v extends Error{constructor(t,e,n){super(t),this.name="VaultManagementError",this.code=e,this.feature=n}}class g{constructor(t,e){this.baseUrl=t,this.apiKey=e}getVaultStructure(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new v(`Failed to get vault structure: ${e.statusText}`,"STRUCTURE_FETCH_FAILED","structure");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"structure"),t}})}performFileOperation(t){return e(this,void 0,void 0,function*(){try{this.validateFileOperationRequest(t);const e=yield this.makeRequest("/api/obsidian/vault/file/operation",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new v(`File operation failed: ${e.statusText}`,"FILE_OPERATION_FAILED","file-operations");const n=yield e.json();if(!n.success)throw new v(n.message||"File operation failed","FILE_OPERATION_FAILED","file-operations");return n}catch(t){throw this.handleVaultManagementError(t,"file-operations"),t}})}performBatchOperations(t){return e(this,void 0,void 0,function*(){try{if(!t.operations||0===t.operations.length)throw new v("No operations specified for batch request","INVALID_BATCH_REQUEST","batch-operations");t.operations.forEach((t,e)=>{try{this.validateFileOperationRequest(t)}catch(t){throw new v(`Invalid operation at index ${e}: ${t.message||t}`,"INVALID_BATCH_OPERATION","batch-operations")}});const e=yield this.makeRequest("/api/obsidian/vault/file/batch",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new v(`Batch operations failed: ${e.statusText}`,"BATCH_OPERATION_FAILED","batch-operations");const n=yield e.json();if(!n.success)throw new v(n.message||"Batch operations failed","BATCH_OPERATION_FAILED","batch-operations");return n}catch(t){throw this.handleVaultManagementError(t,"batch-operations"),t}})}searchVault(t){return e(this,void 0,void 0,function*(){try{if(!t.query||0===t.query.trim().length)throw new v("Search query cannot be empty","INVALID_SEARCH_QUERY","search");const e=yield this.makeRequest("/api/obsidian/vault/search",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new v(`Search failed: ${e.statusText}`,"SEARCH_FAILED","search");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"search"),t}})}organizeVault(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/organize",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new v(`Organization analysis failed: ${e.statusText}`,"ORGANIZATION_FAILED","organization");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"organization"),t}})}backupVault(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/backup",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new v(`Backup failed: ${e.statusText}`,"BACKUP_FAILED","backup");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"backup"),t}})}createFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!1){return this.performFileOperation({operation:"create",file_path:t,content:e,backup:n})})}updateFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!0){return this.performFileOperation({operation:"update",file_path:t,content:e,backup:n})})}deleteFile(t){return e(this,arguments,void 0,function*(t,e=!0){return this.performFileOperation({operation:"delete",file_path:t,backup:e})})}moveFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!0){return this.performFileOperation({operation:"move",file_path:t,new_path:e,backup:n})})}copyFile(t,n){return e(this,void 0,void 0,function*(){return this.performFileOperation({operation:"copy",file_path:t,new_path:n})})}quickSearch(t){return e(this,arguments,void 0,function*(t,e=20){return this.searchVault({query:t,search_type:"comprehensive",max_results:e,include_content:!0})})}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl.replace(/\/$/,"")}${t}`,a=Object.assign({"Content-Type":"application/json"},e.headers||{});this.apiKey&&(a.Authorization=`Bearer ${this.apiKey}`);const i=Object.assign(Object.assign({},e),{headers:a});try{return yield fetch(n,i)}catch(t){throw new v(`Network request failed: ${t.message||t}`,"NETWORK_ERROR","api")}})}validateFileOperationRequest(t){if(!t.file_path||0===t.file_path.trim().length)throw new v("File path is required","INVALID_FILE_PATH","validation");if(!("move"!==t.operation&&"copy"!==t.operation||t.new_path&&0!==t.new_path.trim().length))throw new v("New path is required for move/copy operations","INVALID_NEW_PATH","validation");if(("create"===t.operation||"update"===t.operation)&&void 0===t.content)throw new v("Content is required for create/update operations","INVALID_CONTENT","validation")}handleVaultManagementError(e,n){console.error(`Vault management error in ${n}:`,e),e instanceof v?new t.Notice(`Vault ${n} error: ${e.message}`,5e3):new t.Notice(`Vault ${n} operation failed`,3e3)}testConnection(){return e(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify({include_content:!1,max_depth:1})});return t.ok?{success:!0,message:"Vault management connection successful"}:{success:!1,message:`Connection failed: ${t.status} ${t.statusText}`}}catch(t){return{success:!1,message:`Connection error: ${t.message||t}`}}})}}class m extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setFocusPath(t){return this.focusPath=t,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:t}=this;t.empty(),t.addClass("vault-structure-modal");const e=t.createEl("div",{cls:"modal-header"});e.createEl("h2",{text:"Vault Structure Analysis"});const n=e.createEl("button",{text:"ðŸ”„ Refresh",cls:"mod-cta"}),a=t.createDiv({cls:"vault-loading"});a.setText("ðŸ” Analyzing vault structure...");try{const e=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:5});a.remove(),this.renderStructure(t,e),n.onclick=()=>{this.onOpen()}}catch(e){a.setText("âŒ Failed to load vault structure"),console.error(e);t.createEl("button",{text:"Retry",cls:"mod-cta"}).onclick=()=>this.onOpen()}})}renderStructure(t,e){t.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“</span>\n          <span class="stat-label">Files</span>\n          <span class="stat-value">${e.total_files}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“‚</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${e.total_folders}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ’¾</span>\n          <span class="stat-label">Size</span>\n          <span class="stat-value">${(e.total_size/1024/1024).toFixed(2)} MB</span>\n        </div>\n      </div>\n    `;const n=t.createDiv({cls:"vault-tree-container"});n.createEl("h3",{text:"Folder Structure"});const a=n.createDiv({cls:"vault-tree"});if(this.renderFolder(a,e.structure,0),e.recent_files.length>0){const n=t.createDiv({cls:"recent-files-container"});n.createEl("h3",{text:"Recent Files"});const a=n.createDiv({cls:"recent-files"});e.recent_files.slice(0,10).forEach(t=>{a.createDiv({cls:"recent-file"}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${t.name}</span>\n          <span class="file-date">${new Date(t.modified).toLocaleDateString()}</span>\n        `})}if(e.orphaned_files.length>0){const n=t.createDiv({cls:"orphaned-files-container"});n.createEl("h3",{text:"âš ï¸ Orphaned Files"});const a=n.createDiv({cls:"orphaned-files"});e.orphaned_files.forEach(t=>{a.createDiv({cls:"orphaned-file"}).innerHTML=`\n          <span class="file-icon">ðŸ”—</span>\n          <span class="file-path">${t.path}</span>\n        `})}}renderFolder(t,e,n){const a=t.createDiv({cls:"folder-item",attr:{"data-level":n.toString()}});a.innerHTML=`\n      <span class="folder-toggle">â–¶</span>\n      <span class="folder-icon">ðŸ“</span>\n      <span class="folder-name">${e.name}</span>\n      <span class="folder-count">(${e.children.length})</span>\n    `;const i=t.createDiv({cls:"folder-children",attr:{style:"display: none;"}}),o=a.querySelector(".folder-toggle");o.onclick=()=>{const t="none"!==i.style.display;i.style.display=t?"none":"block",o.textContent=t?"â–¶":"â–¼"},e.children.forEach(t=>{if("folder"===t.type)this.renderFolder(i,t,n+1);else{i.createDiv({cls:"file-item",attr:{"data-level":(n+1).toString()}}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${t.name}</span>\n          <span class="file-size">${(t.size/1024).toFixed(1)}KB</span>\n        `}})}onClose(){const{contentEl:t}=this;t.empty()}}class f extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setInitialQuery(t,e){return this.initialQuery=t,this.searchType=e,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:n}=this;n.empty(),n.addClass("smart-search-modal"),n.createEl("h2",{text:"ðŸ” Smart Vault Search"});const a=n.createDiv({cls:"search-form"}),i=a.createEl("input",{type:"text",placeholder:"Enter search query...",cls:"search-query-input"});this.initialQuery&&(i.value=this.initialQuery);const o=a.createEl("select",{cls:"search-type-select"});[{value:"comprehensive",label:"Comprehensive"},{value:"content",label:"Content"},{value:"filename",label:"Filename"},{value:"tags",label:"Tags"},{value:"links",label:"Links"}].forEach(t=>{const e=o.createEl("option",{value:t.value});e.textContent=t.label,t.value===(this.searchType||"comprehensive")&&(e.selected=!0)});const s=a.createEl("button",{text:"Search",cls:"mod-cta search-button"}),l=n.createDiv({cls:"search-results-container"}),r=()=>e(this,void 0,void 0,function*(){var e;const n=i.value.trim();if(!n)return void new t.Notice("Please enter a search query");s.textContent="Searching...",s.disabled=!0,l.empty();const a=l.createDiv({cls:"search-loading"});a.textContent="ðŸ” Searching vault...";try{const t=yield this.vaultClient.searchVault({query:n,search_type:o.value,max_results:(null===(e=this.plugin.settings.vaultManagement)||void 0===e?void 0:e.searchResultsLimit)||50,include_content:!0});a.remove(),this.renderSearchResults(l,t)}catch(t){a.textContent="âŒ Search failed",console.error("Search error:",t)}finally{s.textContent="Search",s.disabled=!1}});s.onclick=r,i.addEventListener("keypress",t=>{"Enter"===t.key&&r()}),this.initialQuery&&r(),i.focus()})}renderSearchResults(t,e){if(t.createEl("h3",{text:`Search Results (${e.total_found})`}),e.insights){t.createDiv({cls:"search-insights"}).innerHTML=`\n        <div class="insights-header">ðŸ§  AI Insights</div>\n        <div class="insights-content">${e.insights}</div>\n      `}if(0===e.results.length)return void t.createDiv({cls:"no-results",text:"No results found. Try a different search term or type."});const n=t.createDiv({cls:"search-results-list"});if(e.results.forEach(t=>{const e=n.createDiv({cls:"search-result"});e.innerHTML=`\n        <div class="result-header">\n          <span class="result-file-name">${t.file_name}</span>\n          <span class="result-match-type">${t.match_type}</span>\n          <span class="result-score">${(100*t.score).toFixed(0)}%</span>\n        </div>\n        <div class="result-path">${t.file_path}</div>\n        <div class="result-preview">${t.preview}</div>\n        ${t.matches.length>0?`\n          <div class="result-matches">\n            <strong>Matches:</strong> ${t.matches.join(", ")}\n          </div>\n        `:""}\n      `,e.onclick=()=>{this.app.workspace.openLinkText(t.file_path,""),this.close()}}),e.suggested_queries&&e.suggested_queries.length>0){const n=t.createDiv({cls:"suggested-queries"});n.createEl("h4",{text:"ðŸ’¡ Suggested Queries"});const a=n.createDiv({cls:"suggestions-list"});e.suggested_queries.forEach(t=>{a.createEl("button",{text:t,cls:"suggestion-button"}).onclick=()=>{const e=this.contentEl.querySelector(".search-query-input");e&&(e.value=t,e.dispatchEvent(new KeyboardEvent("keypress",{key:"Enter"})))}})}}onClose(){const{contentEl:t}=this;t.empty()}}class b extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setInitialPath(t){return this.initialPath=t,this}setOperation(t){return this.operation=t,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:e}=this;e.empty(),e.addClass("file-operations-modal"),e.createEl("h2",{text:"ðŸ“ File Operations Manager"}),new t.Setting(e).setName("Operation").setDesc("Select the file operation to perform").addDropdown(t=>t.addOption("create","Create File").addOption("update","Update File").addOption("delete","Delete File").addOption("move","Move File").addOption("copy","Copy File").setValue(this.operation||"create").onChange(t=>{this.operation=t,this.updateOperationForm()})),e.createDiv({cls:"operation-form"}),this.updateOperationForm()})}updateOperationForm(){const e=this.contentEl.querySelector(".operation-form");if(!e)return;e.empty();const n=this.operation||"create";new t.Setting(e).setName("File Path").setDesc("Path to the file (including filename)").addText(t=>t.setPlaceholder("path/to/file.md").setValue(this.initialPath||"").onChange(t=>this.initialPath=t)),"move"!==n&&"copy"!==n||new t.Setting(e).setName("New Path").setDesc("Destination path for the file").addText(t=>t.setPlaceholder("new/path/to/file.md")),"create"!==n&&"update"!==n||new t.Setting(e).setName("Content").setDesc("File content").addTextArea(t=>{t.setPlaceholder("Enter file content..."),"create"===n&&t.setValue("# New File\n\nContent goes here...")}),"create"!==n&&new t.Setting(e).setName("Create Backup").setDesc("Create a backup before performing the operation").addToggle(t=>t.setValue(!0)),new t.Setting(e).addButton(t=>t.setButtonText(`Execute ${n.charAt(0).toUpperCase()+n.slice(1)}`).setCta().onClick(()=>this.executeOperation()))}executeOperation(){return e(this,void 0,void 0,function*(){var e;const n=this.operation||"create",a=this.contentEl.querySelector('input[placeholder*="path/to/file"]'),i=this.contentEl.querySelector('input[placeholder*="new/path"]'),o=this.contentEl.querySelector("textarea"),s=this.contentEl.querySelector('input[type="checkbox"]');if(!(null==a?void 0:a.value))return void new t.Notice("File path is required");const l={operation:n,file_path:a.value,backup:null===(e=null==s?void 0:s.checked)||void 0===e||e};(null==i?void 0:i.value)&&(l.new_path=i.value),(null==o?void 0:o.value)&&(l.content=o.value);try{new t.Notice(`Performing ${n}...`);const e=yield this.vaultClient.performFileOperation(l);new t.Notice(`âœ… ${n} successful: ${e.message}`),this.close()}catch(e){new t.Notice(`âŒ ${n} failed: ${e.message}`)}})}onClose(){const{contentEl:t}=this;t.empty()}}class y extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e,n,a;yield this.loadSettings(),a=this.app,c=a,this.apiClient=new h(this.settings.backendUrl,this.settings.apiKey),(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)&&this.initializeVaultManagement();try{let e=yield this.apiClient.healthCheck();if(!e.success&&(null===(n=e.error)||void 0===n?void 0:n.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(e={success:!0,data:{status:t.data.status,version:"unknown"}})}e.success?(new t.Notice("âœ… VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",e.error),new t.Notice("âš ï¸ EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("âš ï¸ Cannot connect to EvoAgentX backend",5e3)}this.registerView(o,t=>new s(t,this)),this.registerView(l,t=>new r(t,this));const u=this.addRibbonIcon("bot","VaultPilot",t=>{t.ctrlKey||t.metaKey?this.activateFullTabView():this.openChatModal()});u.addClass("vaultpilot-ribbon-class"),u.title="VaultPilot (Ctrl+click for Dashboard)",this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.addCommand({id:"open-vaultpilot-full-tab",name:"Open VaultPilot Dashboard",callback:()=>this.activateFullTabView()}),this.registerVaultManagementCommands(),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new i(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(o),this.app.workspace.detachLeavesOfType(l),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onIntentDebug:t=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new d(this.app,this).open()}openWorkflowModal(){new p(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let a="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);a+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:a,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let a=`# Vault Analysis - ${e}\n\n`;a+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(a+="## Key Insights\n\n",i.data.insights.forEach(t=>{a+=`- ${t}\n`}),a+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(a+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{a+=`- ${t}\n`})),yield this.app.vault.create(n,a),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),a=n.getLine(e.line).substring(0,e.ch),i=n.getValue();if(i&&0!==i.trim().length)try{const o=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:a});o.success&&o.data?(n.replaceRange(o.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${o.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const a=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(a.success&&a.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${a.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${a.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),a=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==a?void 0:a.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==a?void 0:a.basename)||"Untitled"} - ${e}.md`;let o=`# ${n.data.plan.title}\n\n`;o+=`${n.data.plan.description}\n\n`,o+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(o+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";o+=`${e} **${t.title}** (${t.priority} priority)\n`,o+=`   ${t.description}\n`,o+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(o+="## Milestones\n\n",n.data.milestones.forEach(t=>{o+=`- **${t.title}** (${t.target_date})\n`,o+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,o),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){const n=this.app.workspace.getActiveFile();if(!n)return void new t.Notice("No active noteâ€”open today's daily note first.");const a=new t.Notice("Planning your day...",0);try{const i=yield this.app.vault.read(n),{scheduleMarkdown:o,headline:s}=yield function(n){return e(this,void 0,void 0,function*(){const e=yield t.request({url:"http://localhost:3000/planday",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:n})});return JSON.parse(e)})}(i);if(!function(t){return t.trim().length>0}(o))throw new Error("Invalid schedule data received from API");const l=function(t,e){const n=function(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im;return t.match(e)||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}(t);if(n){const[a,i]=n,o=i+e;return t.replace(a,o)}return t+`\n\n## Schedule\n${e}`}(i,o);yield this.app.vault.modify(n,l),a.hide();const r=s?`${s} âœ…`:"Schedule inserted âœ…";new t.Notice(r)}catch(e){a.hide(),e instanceof Error?e.message.includes("JSON")?new t.Notice("Planner API error: Invalid response format"):e.message.includes("fetch")||e.message.includes("network")?new t.Notice("Planner API error: Unable to connect to localhost:3000"):new t.Notice(`Planner API error: ${e.message}`):new t.Notice("Planner API error: Unknown error occurred")}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(o);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:o,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}activateFullTabView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(l);if(0===t.length){const t=this.app.workspace.getLeaf("tab");t&&(yield t.setViewState({type:l,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}initializeVaultManagement(){var t;(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)&&(this.vaultClient=new g(this.settings.backendUrl,this.settings.apiKey),this.settings.debugMode&&console.log("Vault management initialized"))}disableVaultManagement(){this.vaultClient=null,this.settings.debugMode&&console.log("Vault management disabled")}registerVaultManagementCommands(){[{id:"vaultpilot-vault-structure",name:"View Vault Structure",callback:function(){console.log("Opening vault structure modal"),this.openVaultStructureModal?this.openVaultStructureModal():new t.Notice("Vault structure feature not available")}},{id:"vaultpilot-smart-search",name:"Smart Vault Search",callback:function(){console.log("Opening smart search modal"),this.openSmartSearchModal?this.openSmartSearchModal():new t.Notice("Smart search feature not available")}},{id:"vaultpilot-file-operations",name:"File Operations Manager",callback:function(){console.log("Opening file operations modal"),this.openFileOperationsModal?this.openFileOperationsModal():new t.Notice("File operations feature not available")}},{id:"vaultpilot-organize-vault",name:"AI Vault Organization",callback:function(){console.log("Opening vault organizer modal"),this.openVaultOrganizerModal?this.openVaultOrganizerModal():new t.Notice("Vault organizer feature not available")}},{id:"vaultpilot-batch-operations",name:"Batch File Operations",callback:function(){console.log("Opening batch operations modal"),this.openBatchOperationsModal?this.openBatchOperationsModal():new t.Notice("Batch operations feature not available")}},{id:"vaultpilot-quick-search-selection",name:"Quick Search Selected Text",editorCallback:function(e){const n=e.getSelection();n.trim()?(console.log("Quick search for:",n.trim()),this.openSmartSearchModal?this.openSmartSearchModal(n.trim()):new t.Notice("Smart search feature not available")):new t.Notice("Please select text to search for")}},{id:"vaultpilot-vault-health-check",name:"Vault Health Check",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");new t.Notice("Running vault health check...");const e=yield this.vaultClient.testConnection();if(!e.success)return void new t.Notice(`Health check failed: ${e.message}`,5e3);const n=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:1}),a=yield this.vaultClient.searchVault({query:"test",max_results:1});new t.Notice(`âœ… Vault Health Check Passed\nðŸ“ ${n.total_files} files, ${n.total_folders} folders\nðŸ” Search: ${a.results.length} results\nðŸ’¾ Size: ${(n.total_size/1024/1024).toFixed(2)} MB`,8e3)}catch(e){console.error("Vault health check failed:",e),new t.Notice(`âŒ Health check failed: ${e.message}`,5e3)}})}},{id:"vaultpilot-vault-backup",name:"Create Vault Backup",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");new t.Notice("Creating vault backup...");const e=yield this.vaultClient.backupVault({include_settings:!0,compression:!0,backup_name:`vaultpilot-backup-${(new Date).toISOString().split("T")[0]}`});new t.Notice(`âœ… Backup created successfully\nðŸ“¦ ${e.files_backed_up} files\nðŸ’¾ Size: ${(e.backup_size/1024/1024).toFixed(2)} MB\nðŸ“ Location: ${e.backup_path}`,8e3)}catch(e){console.error("Backup failed:",e),new t.Notice(`âŒ Backup failed: ${e.message}`,5e3)}})}},{id:"vaultpilot-search-content",name:"Search Content",editorCallback:function(e){const n=e.getSelection().trim()||"Enter search query";this.openSmartSearchModal?this.openSmartSearchModal(n,"content"):new t.Notice("Smart search feature not available")}},{id:"vaultpilot-search-filenames",name:"Search Filenames",callback:function(){this.openSmartSearchModal?this.openSmartSearchModal("","filename"):new t.Notice("Smart search feature not available")}},{id:"vaultpilot-recent-files",name:"View Recent Files",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");const e=yield this.vaultClient.getVaultStructure({include_content:!1});if(0===e.recent_files.length)return void new t.Notice("No recent files found");const n=e.recent_files.slice(0,10).map(t=>`â€¢ ${t.name} (${t.modified})`).join("\n");new t.Notice(`ðŸ“ Recent Files:\n${n}`,1e4)}catch(e){console.error("Failed to get recent files:",e),new t.Notice(`âŒ Failed to get recent files: ${e.message}`,5e3)}})}}].forEach(t=>{var e,n;this.addCommand(Object.assign(Object.assign({},t),{callback:null===(e=t.callback)||void 0===e?void 0:e.bind(this),editorCallback:null===(n=t.editorCallback)||void 0===n?void 0:n.bind(this)}))})}openVaultStructureModal(){this.vaultClient?new m(this.app,this).open():new t.Notice("Vault management not available")}openSmartSearchModal(e,n){if(!this.vaultClient)return void new t.Notice("Vault management not available");const a=new f(this.app,this);e&&a.setInitialQuery(e,n),a.open()}openFileOperationsModal(e,n){if(!this.vaultClient)return void new t.Notice("Vault management not available");const a=new b(this.app,this);e&&a.setInitialPath(e),n&&a.setOperation(n),a.open()}openVaultOrganizerModal(){new t.Notice("Vault organizer modal not yet implemented")}openBatchOperationsModal(){new t.Notice("Batch operations modal not yet implemented")}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(t)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(e){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(e.key))return!1;const n=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!n)return!1;const a=n.editor,i=a.getCursor(),o=a.getLine(i.line);if(i.ch!==o.length)return!1;const s=o.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===e.key||"Enter"===e.key&&o.trim().length>10}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,a=n.getCursor(),i=n.getLine(a.line),o=n.getValue();if(i.trim().length<10||a.ch!==i.length)return;if(!o||0===o.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const e=yield this.apiClient.getCopilotCompletion({text:o,cursor_position:n.posToOffset(a),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Auto-suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},a,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){var t;yield this.saveData(this.settings),this.apiClient=new h(this.settings.backendUrl,this.settings.apiKey),(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)?this.initializeVaultManagement():this.disableVaultManagement(),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=y;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3ZhdWx0LXNldHRpbmdzLnRzIiwiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvZnVsbC10YWItdmlldy50cyIsIi4uL3NyYy92YXVsdC11dGlscy50cyIsIi4uL3NyYy9jaGF0LW1vZGFsLnRzIiwiLi4vc3JjL3dvcmtmbG93LW1vZGFsLnRzIiwiLi4vc3JjL2FwaS1jbGllbnQudHMiLCIuLi9zcmMvdmF1bHQtdHlwZXMudHMiLCIuLi9zcmMvdmF1bHQtYXBpLWNsaWVudC50cyIsIi4uL3NyYy92YXVsdC1tb2RhbHMudHMiLCIuLi9zcmMvbWFpbi50cyIsIi4uL3NyYy9wbGFubmVyLnRzIiwiLi4vc3JjL3ZhdWx0LWNvbW1hbmRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2V0dGluZ3MgRXh0ZW5zaW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIH0gZnJvbSAnLi92YXVsdC10eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1M6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzID0ge1xuICBlbmFibGVWYXVsdE1hbmFnZW1lbnQ6IHRydWUsXG4gIGF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmU6IGZhbHNlLFxuICBzZWFyY2hSZXN1bHRzTGltaXQ6IDUwLFxuICBlbmFibGVTbWFydFNlYXJjaDogdHJ1ZSxcbiAgYmF0Y2hPcGVyYXRpb25UaW1lb3V0OiAzMDAwMCxcbiAgc2hvd1ZhdWx0U3RhdHM6IHRydWUsXG4gIG1heFNlYXJjaFJlc3VsdHM6IDEwMCxcbiAgZGVmYXVsdFNlYXJjaFR5cGU6ICdjb250ZW50JyxcbiAgZW5hYmxlRmlsZU9wZXJhdGlvbnM6IHRydWUsXG4gIGNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnM6IHRydWUsXG4gIGF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zOiBmYWxzZVxufTtcblxuLyoqXG4gKiBBZGQgdmF1bHQgbWFuYWdlbWVudCBzZXR0aW5ncyB0byB0aGUgc2V0dGluZ3MgdGFiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogYW55KSB7XG4gIC8vIFZhdWx0IE1hbmFnZW1lbnQgU2VjdGlvbiBIZWFkZXJcbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHQgTWFuYWdlbWVudCcgfSk7XG4gIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICB0ZXh0OiAnQ29uZmlndXJlIEFJLXBvd2VyZWQgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIGFuZCBmaWxlIG9wZXJhdGlvbnMuJyBcbiAgfSk7XG5cbiAgLy8gRW5hYmxlIFZhdWx0IE1hbmFnZW1lbnRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBWYXVsdCBNYW5hZ2VtZW50JylcbiAgICAuc2V0RGVzYygnRW5hYmxlIEFJLXBvd2VyZWQgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIGFuZCBmaWxlIG9wZXJhdGlvbnMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZVZhdWx0TWFuYWdlbWVudCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBwbHVnaW4uaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBsdWdpbi5kaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcblxuICAvLyBBdXRvIFN5bmMgVmF1bHQgU3RydWN0dXJlXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdBdXRvIFN5bmMgVmF1bHQgU3RydWN0dXJlJylcbiAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSB1cGRhdGUgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIHdoZW4gZmlsZXMgY2hhbmdlJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5hdXRvU3luY1ZhdWx0U3RydWN0dXJlID8/IGZhbHNlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmUgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEVuYWJsZSBTbWFydCBTZWFyY2hcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBTbWFydCBTZWFyY2gnKVxuICAgIC5zZXREZXNjKCdVc2UgQUktcG93ZXJlZCBzZWFyY2ggd2l0aCBjb250ZXh0IGFuZCBpbnNpZ2h0cycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlU21hcnRTZWFyY2ggPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5lbmFibGVTbWFydFNlYXJjaCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gU2VhcmNoIFJlc3VsdHMgTGltaXRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ1NlYXJjaCBSZXN1bHRzIExpbWl0JylcbiAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gZGlzcGxheScpXG4gICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAuc2V0TGltaXRzKDEwLCAyMDAsIDEwKVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LnNlYXJjaFJlc3VsdHNMaW1pdCA/PyA1MClcbiAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuc2VhcmNoUmVzdWx0c0xpbWl0ID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBEZWZhdWx0IFNlYXJjaCBUeXBlXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdEZWZhdWx0IFNlYXJjaCBUeXBlJylcbiAgICAuc2V0RGVzYygnRGVmYXVsdCBzZWFyY2ggbW9kZSBmb3Igc21hcnQgc2VhcmNoJylcbiAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgIC5hZGRPcHRpb24oJ2NvbnRlbnQnLCAnQ29udGVudCBTZWFyY2gnKVxuICAgICAgLmFkZE9wdGlvbignZmlsZW5hbWUnLCAnRmlsZW5hbWUgU2VhcmNoJylcbiAgICAgIC5hZGRPcHRpb24oJ3RhZ3MnLCAnVGFnIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdsaW5rcycsICdMaW5rIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdjb21wcmVoZW5zaXZlJywgJ0NvbXByZWhlbnNpdmUgU2VhcmNoJylcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5kZWZhdWx0U2VhcmNoVHlwZSA/PyAnY29udGVudCcpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuZGVmYXVsdFNlYXJjaFR5cGUgPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBFbmFibGUgRmlsZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdFbmFibGUgRmlsZSBPcGVyYXRpb25zJylcbiAgICAuc2V0RGVzYygnQWxsb3cgZmlsZSBjcmVhdGlvbiwgZGVsZXRpb24sIGFuZCBtb2RpZmljYXRpb24gdGhyb3VnaCB0aGUgaW50ZXJmYWNlJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVGaWxlT3BlcmF0aW9ucyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZUZpbGVPcGVyYXRpb25zID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBDb25maXJtIERlc3RydWN0aXZlIE9wZXJhdGlvbnNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0NvbmZpcm0gRGVzdHJ1Y3RpdmUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ1Nob3cgY29uZmlybWF0aW9uIGRpYWxvZyBmb3IgZmlsZSBkZWxldGlvbiBhbmQgZGVzdHJ1Y3RpdmUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9ucyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEF1dG8gQmFja3VwIEJlZm9yZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdBdXRvIEJhY2t1cCBCZWZvcmUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgY3JlYXRlIGJhY2t1cHMgYmVmb3JlIGRlc3RydWN0aXZlIGZpbGUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMgPz8gZmFsc2UpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEJhdGNoIE9wZXJhdGlvbiBUaW1lb3V0XG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdCYXRjaCBPcGVyYXRpb24gVGltZW91dCcpXG4gICAgLnNldERlc2MoJ1RpbWVvdXQgZm9yIGJhdGNoIG9wZXJhdGlvbnMgaW4gbWlsbGlzZWNvbmRzJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgIC5zZXRQbGFjZWhvbGRlcignMzAwMDAnKVxuICAgICAgLnNldFZhbHVlKFN0cmluZyhwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPz8gMzAwMDApKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gcGFyc2VJbnQodmFsdWUpIHx8IDMwMDAwO1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmJhdGNoT3BlcmF0aW9uVGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBTaG93IFZhdWx0IFN0YXRzXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdTaG93IFZhdWx0IFN0YXRpc3RpY3MnKVxuICAgIC5zZXREZXNjKCdEaXNwbGF5IHZhdWx0IHN0YXRpc3RpY3MgaW4gbW9kYWxzIGFuZCBpbnRlcmZhY2VzJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5zaG93VmF1bHRTdGF0cyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LnNob3dWYXVsdFN0YXRzID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBUZXN0IENvbm5lY3Rpb24gQnV0dG9uXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdUZXN0IFZhdWx0IE1hbmFnZW1lbnQgQ29ubmVjdGlvbicpXG4gICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbiB0byB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50cycpXG4gICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJylcbiAgICAgIC5zZXRDdGEoKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi52YXVsdENsaWVudCkge1xuICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdOb3QgQXZhaWxhYmxlJyk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJyksIDIwMDApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0aW5nLi4uJyk7XG4gICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBsdWdpbi52YXVsdENsaWVudC50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KchSBDb25uZWN0ZWQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KdjCBGYWlsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KdjCBFcnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJyksIDMwMDApO1xuICAgICAgfSkpO1xuXG4gIC8vIEFkdmFuY2VkIFNldHRpbmdzIFNlY3Rpb25cbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQgVmF1bHQgTWFuYWdlbWVudCcgfSk7XG5cbiAgLy8gTWF4IFNlYXJjaCBSZXN1bHRzXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdNYXhpbXVtIFNlYXJjaCBSZXN1bHRzJylcbiAgICAuc2V0RGVzYygnQWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gZmV0Y2ggZnJvbSBiYWNrZW5kJylcbiAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgIC5zZXRMaW1pdHMoNTAsIDUwMCwgMjUpXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8ubWF4U2VhcmNoUmVzdWx0cyA/PyAxMDApXG4gICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Lm1heFNlYXJjaFJlc3VsdHMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIFJlc2V0IHRvIERlZmF1bHRzIEJ1dHRvblxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnUmVzZXQgVmF1bHQgTWFuYWdlbWVudCBTZXR0aW5ncycpXG4gICAgLnNldERlc2MoJ1Jlc2V0IGFsbCB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHQgdmFsdWVzJylcbiAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXNldCB0byBEZWZhdWx0cycpXG4gICAgICAuc2V0V2FybmluZygpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyBkaXNwbGF5XG4gICAgICAgIGNvbnN0IHNldHRpbmdzVGFiID0gcGx1Z2luLmFwcC5zZXR0aW5nLmFjdGl2ZVRhYjtcbiAgICAgICAgaWYgKHNldHRpbmdzVGFiICYmIHNldHRpbmdzVGFiLmRpc3BsYXkpIHtcbiAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVZhdWx0TWFuYWdlbWVudFNldHRpbmdzKHNldHRpbmdzOiBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChzZXR0aW5ncy5zZWFyY2hSZXN1bHRzTGltaXQgPCAxIHx8IHNldHRpbmdzLnNlYXJjaFJlc3VsdHNMaW1pdCA+IDEwMDApIHtcbiAgICBlcnJvcnMucHVzaCgnU2VhcmNoIHJlc3VsdHMgbGltaXQgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMDAnKTtcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5tYXhTZWFyY2hSZXN1bHRzIDwgc2V0dGluZ3Muc2VhcmNoUmVzdWx0c0xpbWl0KSB7XG4gICAgZXJyb3JzLnB1c2goJ01heGltdW0gc2VhcmNoIHJlc3VsdHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gc2VhcmNoIHJlc3VsdHMgbGltaXQnKTtcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPCAxMDAwIHx8IHNldHRpbmdzLmJhdGNoT3BlcmF0aW9uVGltZW91dCA+IDMwMDAwMCkge1xuICAgIGVycm9ycy5wdXNoKCdCYXRjaCBvcGVyYXRpb24gdGltZW91dCBtdXN0IGJlIGJldHdlZW4gMSBzZWNvbmQgYW5kIDUgbWludXRlcycpO1xuICB9XG5cbiAgY29uc3QgdmFsaWRTZWFyY2hUeXBlcyA9IFsnY29udGVudCcsICdmaWxlbmFtZScsICd0YWdzJywgJ2xpbmtzJywgJ2NvbXByZWhlbnNpdmUnXTtcbiAgaWYgKCF2YWxpZFNlYXJjaFR5cGVzLmluY2x1ZGVzKHNldHRpbmdzLmRlZmF1bHRTZWFyY2hUeXBlKSkge1xuICAgIGVycm9ycy5wdXNoKCdJbnZhbGlkIGRlZmF1bHQgc2VhcmNoIHR5cGUnKTtcbiAgfVxuXG4gIHJldHVybiBlcnJvcnM7XG59XG5cbi8qKlxuICogR2V0IHZhdWx0IG1hbmFnZW1lbnQgc2V0dGluZ3Mgd2l0aCBkZWZhdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MocGx1Z2luU2V0dGluZ3M6IGFueSk6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MsXG4gICAgLi4uKHBsdWdpblNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCB8fCB7fSlcbiAgfTtcbn1cbiIsImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncywgREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH0gZnJvbSAnLi92YXVsdC1zZXR0aW5ncyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWYXVsdFBpbG90U2V0dGluZ3MgPSB7XG4gIGJhY2tlbmRVcmw6ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnLFxuICBhcGlLZXk6ICcnLFxuICBlbmFibGVXZWJTb2NrZXQ6IHRydWUsXG4gIGVuYWJsZUNvcGlsb3Q6IHRydWUsXG4gIGVuYWJsZUF1dG9Db21wbGV0ZTogZmFsc2UsIC8vIERpc2FibGVkIGJ5IGRlZmF1bHQgdG8gcHJldmVudCBmcmVxdWVudCByZXF1ZXN0c1xuICBkZWZhdWx0QWdlbnQ6ICcnLFxuICBkZWZhdWx0TW9kZTogJ2FzaycsXG4gIGNoYXRIaXN0b3J5TGltaXQ6IDEwMCxcbiAgZGVidWdNb2RlOiBmYWxzZSxcbiAgc2hvd0ludGVudERlYnVnOiBmYWxzZSxcbiAgdmF1bHRNYW5hZ2VtZW50OiBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1Ncbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyBhbmQgbmV3IGxpbmVzICh3aXRoIDEwcyBjb29sZG93biknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQ2hhdCBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IG1vZGUgZm9yIG5ldyBjaGF0IHNlc3Npb25zOiBBc2sgZm9yIHNpbXBsZSBRJkEsIEFnZW50IGZvciBjb21wbGV4IHdvcmtmbG93cycpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdhc2snLCAnQXNrIE1vZGUgLSBTaW1wbGUgUSZBJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdhZ2VudCcsICdBZ2VudCBNb2RlIC0gQ29tcGxleCBXb3JrZmxvd3MnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1vZGUgPSB2YWx1ZSBhcyAnYXNrJyB8ICdhZ2VudCc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdTaG93IEludGVudCBEZWJ1ZyBPdmVybGF5JylcbiAgICAgIC5zZXREZXNjKCdEaXNwbGF5IGF1dG9tYXRpYyBpbnRlbnQgZGV0ZWN0aW9uIGluIGNoYXQgKEFzayB2cyBBZ2VudCBtb2RlKScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gVmF1bHQgTWFuYWdlbWVudCBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IE1hbmFnZW1lbnQnIH0pO1xuICAgIGFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzKGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbik7XG5cbiAgICAvLyBIZWxwIHNlY3Rpb25cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdIZWxwICYgRG9jdW1lbnRhdGlvbicgfSk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRGFzaGJvYXJkIGFjdGlvbiAobmV3KVxuICAgIGNvbnN0IGRhc2hib2FyZEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiiBPcGVuIERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgZGFzaGJvYXJkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG5cbiAgICAvLyBXb3JrZmxvdyBhY3Rpb25cbiAgICBjb25zdCB3b3JrZmxvd0J1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pqZ77iPIEV4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuXG4gICAgLy8gQW5hbHl6ZSB2YXVsdCBhY3Rpb25cbiAgICBjb25zdCBhbmFseXplQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SNIEFuYWx5emUgVmF1bHQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGFuYWx5emVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuXG4gICAgLy8gQ29waWxvdCBhY3Rpb25cbiAgICBjb25zdCBjb3BpbG90QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfinKggR2V0IENvbXBsZXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvcGlsb3RCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGVkaXRvciBmb3VuZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZWZyZXNoIGJ1dHRvblxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoIFN0YXR1cycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFnZW50IGluZm8gaWYgYXZhaWxhYmxlXG4gICAgdGhpcy5sb2FkQWdlbnRJbmZvKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudEluZm8oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cyBpbiB2aWV3Li4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBnZXRBZ2VudHMgcmVzcG9uc2UgaW4gdmlldzonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgbGV0IGFnZW50czogYW55W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkge1xuICAgICAgICAgIC8vIERpcmVjdCBhcnJheSByZXNwb25zZVxuICAgICAgICAgIGFnZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBDaGVjayBmb3Igd3JhcHBlZCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgICAgY29uc3QgZGF0YU9iaiA9IHJlc3BvbnNlLmRhdGEgYXMgYW55O1xuICAgICAgICAgIGlmIChkYXRhT2JqLmFnZW50cyAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouYWdlbnRzKSkge1xuICAgICAgICAgICAgLy8gUmVzcG9uc2UgZm9ybWF0OiB7YWdlbnRzOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouYWdlbnRzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kIGFnZW50cyBhcnJheSBpbiB2aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmFnZW50cycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YU9iai5kYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5kYXRhKSkge1xuICAgICAgICAgICAgLy8gUmVzcG9uc2UgZm9ybWF0OiB7ZGF0YTogWy4uLl19XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgbmVzdGVkIGRhdGEgaW4gdmlldywgdXNpbmcgcmVzcG9uc2UuZGF0YS5kYXRhJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVmF1bHRQaWxvdDogVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQ6JywgdHlwZW9mIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGxheSBhZ2VudCBpbmZvcm1hdGlvblxuICAgICAgICBjb25zdCBhZ2VudENvdW50ID0gYWdlbnRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYWN0aXZlQWdlbnRzID0gYWdlbnRzLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudFN0YXRzRWwgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXRzJyB9KTtcbiAgICAgICAgYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2YWlsYWJsZSBBZ2VudHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50cyBpbiB2aWV3OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXZpZXctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXZpZXctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXZpZXcge1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN1YnRpdGxlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyBoMyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1lcnJvcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgMWZyKTtcbiAgICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1pdGVtIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LXZhbHVlIHtcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMgaDQge1xuICAgICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1pbmZvIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIgPSAndmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RGdWxsVGFiVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIHN0YXR1c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcXVpY2tBY3Rpb25zRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB2YXVsdFN0YXRzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBjaGF0RWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB3b3JrZmxvd0VsITogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQjtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdWYXVsdFBpbG90IERhc2hib2FyZCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtZGFzaGJvYXJkJztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygndmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3Jyk7XG5cbiAgICAvLyBGb3JjZSB0aGUgY29udGFpbmVyIHRvIHRha2UgZnVsbCBoZWlnaHRcbiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gICAgLy8gQ3JlYXRlIG1haW4gbGF5b3V0XG4gICAgY29uc3QgbWFpbkxheW91dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tbGF5b3V0JyB9KTtcblxuICAgIC8vIExlZnQgc2lkZWJhclxuICAgIGNvbnN0IGxlZnRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWxlZnQtc2lkZWJhcicgfSk7XG4gICAgdGhpcy5jcmVhdGVMZWZ0U2lkZWJhcihsZWZ0U2lkZWJhcik7XG5cbiAgICAvLyBNYWluIGNvbnRlbnQgYXJlYVxuICAgIGNvbnN0IG1haW5Db250ZW50ID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tY29udGVudCcgfSk7XG4gICAgdGhpcy5jcmVhdGVNYWluQ29udGVudChtYWluQ29udGVudCk7XG5cbiAgICAvLyBSaWdodCBzaWRlYmFyXG4gICAgY29uc3QgcmlnaHRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJpZ2h0LXNpZGViYXInIH0pO1xuICAgIHRoaXMuY3JlYXRlUmlnaHRTaWRlYmFyKHJpZ2h0U2lkZWJhcik7XG5cbiAgICB0aGlzLmFkZEZ1bGxUYWJTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTGVmdFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zaWRlYmFyLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90JyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQUkgQXNzaXN0YW50IERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN1YnRpdGxlJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhdHVzIHNlY3Rpb25cbiAgICB0aGlzLnN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMnIH0pO1xuICAgIHRoaXMuY3JlYXRlUXVpY2tBY3Rpb25zKCk7XG5cbiAgICAvLyBWYXVsdCBzdGF0c1xuICAgIHRoaXMudmF1bHRTdGF0c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXZhdWx0LXN0YXRzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWFpbkNvbnRlbnQoY29udGVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBUYWIgbmF2aWdhdGlvblxuICAgIGNvbnN0IHRhYk5hdiA9IGNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC10YWItbmF2JyB9KTtcbiAgICBjb25zdCBjaGF0VGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/CfkqwgQ2hhdCcsIFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC10YWItYnV0dG9uIGFjdGl2ZSdcbiAgICB9KTtcbiAgICBjb25zdCB3b3JrZmxvd1RhYiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG4gICAgY29uc3QgYW5hbHl0aWNzVGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/Cfk4ogQW5hbHl0aWNzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBUYWIgY29udGVudFxuICAgIGNvbnN0IHRhYkNvbnRlbnQgPSBjb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdGFiLWNvbnRlbnQnIH0pO1xuXG4gICAgLy8gQ2hhdCBzZWN0aW9uXG4gICAgdGhpcy5jaGF0RWwgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uIGFjdGl2ZScgfSk7XG4gICAgdGhpcy5jcmVhdGVDaGF0U2VjdGlvbih0aGlzLmNoYXRFbCk7XG5cbiAgICAvLyBXb3JrZmxvdyBzZWN0aW9uXG4gICAgdGhpcy53b3JrZmxvd0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24nIH0pO1xuICAgIHRoaXMuY3JlYXRlV29ya2Zsb3dTZWN0aW9uKHRoaXMud29ya2Zsb3dFbCk7XG5cbiAgICAvLyBBbmFseXRpY3Mgc2VjdGlvblxuICAgIGNvbnN0IGFuYWx5dGljc0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWwpO1xuXG4gICAgLy8gVGFiIHN3aXRjaGluZ1xuICAgIGNoYXRUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdjaGF0JywgY2hhdFRhYik7XG4gICAgd29ya2Zsb3dUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCd3b3JrZmxvdycsIHdvcmtmbG93VGFiKTtcbiAgICBhbmFseXRpY3NUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdhbmFseXRpY3MnLCBhbmFseXRpY3NUYWIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSaWdodFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZWNlbnQgZmlsZXNcbiAgICBjb25zdCByZWNlbnRGaWxlc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycgfSk7XG4gICAgcmVjZW50RmlsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgIHRoaXMudXBkYXRlUmVjZW50RmlsZXMocmVjZW50RmlsZXNFbCk7XG5cbiAgICAvLyBBZ2VudCBzdGF0dXNcbiAgICBjb25zdCBhZ2VudFN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cycgfSk7XG4gICAgYWdlbnRTdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBTdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlQWdlbnRTdGF0dXMoYWdlbnRTdGF0dXNFbCk7XG5cbiAgICAvLyBBY3Rpdml0eSBmZWVkXG4gICAgY29uc3QgYWN0aXZpdHlFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS1mZWVkJyB9KTtcbiAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FjdGl2aXR5IEZlZWQnIH0pO1xuICAgIHRoaXMuY3JlYXRlQWN0aXZpdHlGZWVkKGFjdGl2aXR5RWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDaGF0U2VjdGlvbihjaGF0RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQ2hhdCBoZWFkZXJcbiAgICBjb25zdCBjaGF0SGVhZGVyID0gY2hhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGNoYXRIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQUkgQ2hhdCBJbnRlcmZhY2UnIH0pO1xuXG4gICAgLy8gQ2hhdCBoaXN0b3J5XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBjaGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhpc3RvcnknIH0pO1xuICAgIGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1dlbGNvbWUhIFN0YXJ0IGEgY29udmVyc2F0aW9uIHdpdGggeW91ciBBSSBhc3Npc3RhbnQuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC13ZWxjb21lJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hhdCBpbnB1dFxuICAgIGNvbnN0IGNoYXRJbnB1dCA9IGNoYXRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnIH0pO1xuICAgIGNvbnN0IHRleHRhcmVhID0gY2hhdElucHV0LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgXG4gICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBtZXNzYWdlIGhlcmUuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXRleHRhcmVhJ1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHNlbmRCdXR0b24gPSBjaGF0SW5wdXQuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICBzZW5kQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5zZW5kQ2hhdE1lc3NhZ2UobWVzc2FnZSwgY2hhdEhpc3RvcnkpO1xuICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgRW50ZXIga2V5XG4gICAgdGV4dGFyZWEub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNlbmRCdXR0b24uY2xpY2soKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVXb3JrZmxvd1NlY3Rpb24od29ya2Zsb3dFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBXb3JrZmxvdyBoZWFkZXJcbiAgICBjb25zdCB3b3JrZmxvd0hlYWRlciA9IHdvcmtmbG93RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIHdvcmtmbG93SGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1dvcmtmbG93IE1hbmFnZW1lbnQnIH0pO1xuXG4gICAgLy8gV29ya2Zsb3cgZ3JpZCBjb250YWluZXJcbiAgICBjb25zdCB3b3JrZmxvd0NvbnRhaW5lciA9IHdvcmtmbG93RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHdvcmtmbG93R3JpZCA9IHdvcmtmbG93Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZ3JpZCcgfSk7XG5cbiAgICAvLyBQcmVkZWZpbmVkIHdvcmtmbG93c1xuICAgIGNvbnN0IHdvcmtmbG93cyA9IFtcbiAgICAgIHsgbmFtZTogJ0FuYWx5emUgVmF1bHQnLCBpY29uOiAn8J+UjScsIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSB5b3VyIHZhdWx0IHN0cnVjdHVyZSBhbmQgY29udGVudCcgfSxcbiAgICAgIHsgbmFtZTogJ0dlbmVyYXRlIFN1bW1hcnknLCBpY29uOiAn8J+TnScsIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIHN1bW1hcmllcyBvZiB5b3VyIG5vdGVzJyB9LFxuICAgICAgeyBuYW1lOiAnTGluayBBbmFseXNpcycsIGljb246ICfwn5SXJywgZGVzY3JpcHRpb246ICdBbmFseXplIG5vdGUgY29ubmVjdGlvbnMgYW5kIHJlbGF0aW9uc2hpcHMnIH0sXG4gICAgICB7IG5hbWU6ICdUYWcgTWFuYWdlbWVudCcsIGljb246ICfwn4+377iPJywgZGVzY3JpcHRpb246ICdPcmdhbml6ZSBhbmQgbWFuYWdlIHlvdXIgdGFncycgfSxcbiAgICAgIHsgbmFtZTogJ0RhaWx5IFBsYW5uaW5nJywgaWNvbjogJ/Cfk4UnLCBkZXNjcmlwdGlvbjogJ1BsYW4geW91ciBkYXkgYmFzZWQgb24geW91ciBub3RlcycgfSxcbiAgICAgIHsgbmFtZTogJ0tub3dsZWRnZSBHcmFwaCcsIGljb246ICfwn5W477iPJywgZGVzY3JpcHRpb246ICdWaXN1YWxpemUgeW91ciBrbm93bGVkZ2UgY29ubmVjdGlvbnMnIH0sXG4gICAgICB7IG5hbWU6ICdDb250ZW50IFNlYXJjaCcsIGljb246ICfwn5SOJywgZGVzY3JpcHRpb246ICdBZHZhbmNlZCBzZWFyY2ggYWNyb3NzIHlvdXIgdmF1bHQnIH0sXG4gICAgICB7IG5hbWU6ICdOb3RlIFRlbXBsYXRlcycsIGljb246ICfwn5OEJywgZGVzY3JpcHRpb246ICdDcmVhdGUgYW5kIG1hbmFnZSBub3RlIHRlbXBsYXRlcycgfVxuICAgIF07XG5cbiAgICB3b3JrZmxvd3MuZm9yRWFjaCh3b3JrZmxvdyA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd0NhcmQgPSB3b3JrZmxvd0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1jYXJkJyB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB3b3JrZmxvdy5pY29uLCBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWljb24nIH0pO1xuICAgICAgd29ya2Zsb3dDYXJkLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogd29ya2Zsb3cubmFtZSB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgncCcsIHsgdGV4dDogd29ya2Zsb3cuZGVzY3JpcHRpb24gfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJ1bkJ1dHRvbiA9IHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ1J1bicsXG4gICAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBydW5CdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucnVuV29ya2Zsb3cod29ya2Zsb3cubmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQW5hbHl0aWNzIGhlYWRlclxuICAgIGNvbnN0IGFuYWx5dGljc0hlYWRlciA9IGFuYWx5dGljc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYW5hbHl0aWNzLWhlYWRlcicgfSk7XG4gICAgYW5hbHl0aWNzSGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IEFuYWx5dGljcycgfSk7XG5cbiAgICAvLyBDaGFydHMgY29udGFpbmVyXG4gICAgY29uc3QgY2hhcnRzQ29udGFpbmVyID0gYW5hbHl0aWNzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydHMtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBGaWxlIHR5cGUgZGlzdHJpYnV0aW9uXG4gICAgY29uc3QgZmlsZVR5cGVDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIGZpbGVUeXBlQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRmlsZSBUeXBlIERpc3RyaWJ1dGlvbicgfSk7XG4gICAgZmlsZVR5cGVDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdDaGFydCB2aXN1YWxpemF0aW9uIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBOb3RlIGNyZWF0aW9uIHRpbWVsaW5lXG4gICAgY29uc3QgdGltZWxpbmVDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIHRpbWVsaW5lQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnTm90ZSBDcmVhdGlvbiBUaW1lbGluZScgfSk7XG4gICAgdGltZWxpbmVDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdUaW1lbGluZSB2aXN1YWxpemF0aW9uIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBUYWcgdXNhZ2VcbiAgICBjb25zdCB0YWdDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIHRhZ0NoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1RhZyBVc2FnZScgfSk7XG4gICAgdGFnQ2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnVGFnIGFuYWx5dGljcyBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gV29yZCBjb3VudCBhbmFseXNpc1xuICAgIGNvbnN0IHdvcmRDb3VudENoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgd29yZENvdW50Q2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnV29yZCBDb3VudCBBbmFseXNpcycgfSk7XG4gICAgd29yZENvdW50Q2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnV29yZCBjb3VudCB2aXN1YWxpemF0aW9uIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBMaW5rIGRlbnNpdHlcbiAgICBjb25zdCBsaW5rQ2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICBsaW5rQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnTGluayBEZW5zaXR5JyB9KTtcbiAgICBsaW5rQ2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnTGluayBhbmFseXNpcyBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gQWN0aXZpdHkgaGVhdG1hcFxuICAgIGNvbnN0IGFjdGl2aXR5Q2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICBhY3Rpdml0eUNoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0FjdGl2aXR5IEhlYXRtYXAnIH0pO1xuICAgIGFjdGl2aXR5Q2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgaGVhdG1hcCBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzd2l0Y2hUYWIodGFiTmFtZTogc3RyaW5nLCBidXR0b246IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbCB0YWJzXG4gICAgdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcudmF1bHRwaWxvdC10YWItYnV0dG9uJykuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52YXVsdHBpbG90LWNoYXQtc2VjdGlvbiwgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbiwgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24nKS5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgc2VjdGlvbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGNsaWNrZWQgdGFiXG4gICAgYnV0dG9uLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgIC8vIFNob3cgY29ycmVzcG9uZGluZyBjb250ZW50XG4gICAgaWYgKHRhYk5hbWUgPT09ICdjaGF0Jykge1xuICAgICAgdGhpcy5jaGF0RWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ3dvcmtmbG93Jykge1xuICAgICAgdGhpcy53b3JrZmxvd0VsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9IGVsc2UgaWYgKHRhYk5hbWUgPT09ICdhbmFseXRpY3MnKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJyk/LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRDaGF0TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcsIGNoYXRIaXN0b3J5OiBIVE1MRWxlbWVudCkge1xuICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2VcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIHVzZXInIH0pO1xuICAgIHVzZXJNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IG1lc3NhZ2UgfSk7XG5cbiAgICAvLyBBZGQgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgY29uc3QgdGhpbmtpbmdNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgYXNzaXN0YW50IHRoaW5raW5nJyB9KTtcbiAgICB0aGlua2luZ01lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1RoaW5raW5nLi4uJyB9KTtcblxuICAgIC8vIFNjcm9sbCB0byBib3R0b21cbiAgICBjaGF0SGlzdG9yeS5zY3JvbGxUb3AgPSBjaGF0SGlzdG9yeS5zY3JvbGxIZWlnaHQ7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2VuZENoYXQoeyBtZXNzYWdlLCBjb250ZXh0OiBudWxsIH0pO1xuICAgICAgXG4gICAgICAvLyBSZW1vdmUgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgICB0aGlua2luZ01lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGFzc2lzdGFudCcgfSk7XG4gICAgICAgIGFzc2lzdGFudE1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGVycm9yJyB9KTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdFcnJvcjogQ291bGQgbm90IGdldCByZXNwb25zZSBmcm9tIEFJJyB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gUmVtb3ZlIHRoaW5raW5nIGluZGljYXRvclxuICAgICAgdGhpbmtpbmdNZXNzYWdlLnJlbW92ZSgpO1xuICAgICAgXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBlcnJvcicgfSk7XG4gICAgICBlcnJvck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yOiBDb25uZWN0aW9uIGZhaWxlZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbVxuICAgIGNoYXRIaXN0b3J5LnNjcm9sbFRvcCA9IGNoYXRIaXN0b3J5LnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuV29ya2Zsb3cod29ya2Zsb3dOYW1lOiBzdHJpbmcpIHtcbiAgICBuZXcgTm90aWNlKGBSdW5uaW5nIHdvcmtmbG93OiAke3dvcmtmbG93TmFtZX1gKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gTWFwIHdvcmtmbG93IG5hbWVzIHRvIGFwcHJvcHJpYXRlIGFjdGlvbnNcbiAgICAgIHN3aXRjaCAod29ya2Zsb3dOYW1lKSB7XG4gICAgICAgIGNhc2UgJ0FuYWx5emUgVmF1bHQnOlxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdEYWlseSBQbGFubmluZyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ucGxhbk15RGF5KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gRm9yIG5vdywgc2hvdyBhIHBsYWNlaG9sZGVyXG4gICAgICAgICAgbmV3IE5vdGljZShgJHt3b3JrZmxvd05hbWV9IHdvcmtmbG93IGlzIGNvbWluZyBzb29uIWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBFcnJvciBydW5uaW5nIHdvcmtmbG93OiAke3dvcmtmbG93TmFtZX1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/Cfn6IgQ29ubmVjdGVkJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IEVycm9yJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtZXJyb3InO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBPZmZsaW5lJztcbiAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVpY2tBY3Rpb25zKCkge1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuZW1wdHkoKTtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1aWNrIEFjdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgYWN0aW9uc0dyaWQgPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkJyB9KTtcblxuICAgIC8vIFJlZnJlc2ggYnV0dG9uXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcblxuICAgIC8vIE9wZW4gc2lkZWJhciB2aWV3XG4gICAgY29uc3Qgc2lkZWJhckJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiyBTaWRlYmFyIFZpZXcnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHNpZGViYXJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldygpO1xuXG4gICAgLy8gT3BlbiBtb2RhbCBjaGF0XG4gICAgY29uc3QgbW9kYWxDaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE1vZGFsIENoYXQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIG1vZGFsQ2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgIGNvbnN0IHdvcmtmbG93QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUmVjZW50RmlsZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlY2VudEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lKVxuICAgICAgLnNsaWNlKDAsIDUpO1xuXG4gICAgcmVjZW50RmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlJyB9KTtcbiAgICAgIGZpbGVFbC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgIGZpbGVFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUFnZW50U3RhdHVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLmxvYWRBZ2VudEluZm8oY29udGFpbmVyKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50SW5mbyhjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTG9hZGluZyBhZ2VudHMgaW4gZnVsbC10YWItdmlldy4uLicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogZ2V0QWdlbnRzIHJlc3BvbnNlIGluIGZ1bGwtdGFiLXZpZXc6JywgcmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIGNvbnRhaW5lcikge1xuICAgICAgICBsZXQgYWdlbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgLy8gRGlyZWN0IGFycmF5IHJlc3BvbnNlXG4gICAgICAgICAgYWdlbnRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIC8vIENoZWNrIGZvciB3cmFwcGVkIHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgICBjb25zdCBkYXRhT2JqID0gcmVzcG9uc2UuZGF0YSBhcyBhbnk7XG4gICAgICAgICAgaWYgKGRhdGFPYmouYWdlbnRzICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5hZ2VudHMpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHthZ2VudHM6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5hZ2VudHM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgYWdlbnRzIGFycmF5IGluIGZ1bGwtdGFiLXZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuYWdlbnRzJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhT2JqLmRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHtkYXRhOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouZGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBuZXN0ZWQgZGF0YSBpbiBmdWxsLXRhYi12aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmRhdGEnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdWYXVsdFBpbG90OiBVbmV4cGVjdGVkIHJlc3BvbnNlIGZvcm1hdDonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwbGF5IGFnZW50IGluZm9ybWF0aW9uXG4gICAgICAgIGNvbnN0IGFnZW50Q291bnQgPSBhZ2VudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSBhZ2VudHMuZmlsdGVyKChhZ2VudDogYW55KSA9PiBhZ2VudC5hY3RpdmUpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50SW5mbyA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWluZm8nIH0pO1xuICAgICAgICBhZ2VudEluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICAgIFxuICAgICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGFnZW50RWwgPSBhZ2VudEluZm8uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pdGVtJyB9KTtcbiAgICAgICAgICBhZ2VudEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBhZ2VudC5uYW1lIH0pO1xuICAgICAgICAgIGFnZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgdGV4dDogYWdlbnQuYWN0aXZlID8gJ/Cfn6InIDogJ/CflLQnLFxuICAgICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zdGF0dXMnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHMgaW4gZnVsbCB0YWIgdmlldzonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBY3Rpdml0eUZlZWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGFjdGl2aXRpZXMgPSBbXG4gICAgICB7IHRpbWU6ICdKdXN0IG5vdycsIGFjdGl2aXR5OiAnVmF1bHRQaWxvdCBzdGFydGVkJyB9LFxuICAgICAgeyB0aW1lOiAnNSBtaW4gYWdvJywgYWN0aXZpdHk6ICdDb25uZWN0aW9uIGVzdGFibGlzaGVkJyB9LFxuICAgICAgeyB0aW1lOiAnMSBob3VyIGFnbycsIGFjdGl2aXR5OiAnTGFzdCB2YXVsdCBhbmFseXNpcycgfVxuICAgIF07XG5cbiAgICBhY3Rpdml0aWVzLmZvckVhY2goYWN0aXZpdHkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZpdHlFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXR5LWl0ZW0nIH0pO1xuICAgICAgYWN0aXZpdHlFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhY3Rpdml0eS5hY3Rpdml0eSB9KTtcbiAgICAgIGFjdGl2aXR5RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYWN0aXZpdHkudGltZSwgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS10aW1lJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRnVsbFRhYlN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LWZ1bGwtdGFiLXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1mdWxsLXRhYi1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLyogRW5zdXJlIHRoZSBmdWxsIHRhYiB2aWV3IGZpbGxzIGF2YWlsYWJsZSBzcGFjZSAqL1xuICAgICAgICAud29ya3NwYWNlLWxlYWYtY29udGVudFtkYXRhLXR5cGU9XCJ2YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXdcIl0ge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3IHtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1haW4tbGF5b3V0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZ2FwOiAxcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbGVmdC1zaWRlYmFyIHtcbiAgICAgICAgICB3aWR0aDogMjUwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWFpbi1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmlnaHQtc2lkZWJhciB7XG4gICAgICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNpZGViYXItaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXRhYi1uYXYge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbiB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbi5hY3RpdmUge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItY29udGVudCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbiB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLmFjdGl2ZSxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbi5hY3RpdmUsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uLmFjdGl2ZSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGlzdG9yeSB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdGV4dGFyZWEge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1heC13aWR0aDogODAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS51c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLmFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLnRoaW5raW5nIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS5lcnJvciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24sXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3MtaGVhZGVyIHtcbiAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1jb250YWluZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0cy1jb250YWluZXIge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWljb24ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbiB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydHMtY29udGFpbmVyIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNnB4O1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1jYXJkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICBwYWRkaW5nOiA0MHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlY2VudC1maWxlIHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWNlbnQtZmlsZTpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0eS1pdGVtIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0eS10aW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDJweDtcbiAgICAgICAgfVxuICAgICAgICAvKiBJbmhlcml0IHN0eWxlcyBmcm9tIG9yaWdpbmFsIHZpZXcgKi9cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIGgzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNHB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yLFxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1pdGVtIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtdmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBHbG9iYWwgYXBwIGluc3RhbmNlIC0gd2lsbCBiZSBzZXQgYnkgdGhlIG1haW4gcGx1Z2luXG5leHBvcnQgbGV0IGFwcDogQXBwO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXBwKGFwcEluc3RhbmNlOiBBcHApIHtcbiAgYXBwID0gYXBwSW5zdGFuY2U7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29udGVudCBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBtYXJrZG93biBmaWxlXG4gKiBAcmV0dXJucyBUaGUgbWFya2Rvd24gY29udGVudCAodHJ1bmNhdGVkIHRvIDgwMDAgY2hhcnMpIG9yIG51bGwgaWYgbm8gZmlsZSBpcyBhY3RpdmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZU1hcmtkb3duKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gIGlmICghZmlsZSkgcmV0dXJuIG51bGw7XG4gIFxuICAvLyBMYXJnZSBub3Rlcz8gU25pcCB0byA4MDAwIGNoYXJzIHRvIGtlZXAgdG9rZW5zIHJlYXNvbmFibGVcbiAgY29uc3QgdGV4dCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICByZXR1cm4gdGV4dC5zbGljZSgwLCA4XzAwMCk7XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSwgSW50ZW50IH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmVNYXJrZG93biB9IGZyb20gJy4vdmF1bHQtdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY2hhdENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbWVzc2FnZXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0RWwhOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHNlbmRCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNoYXQtbW9kYWwnKTtcblxuICAgIC8vIE1vZGFsIGhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCBDaGF0JyB9KTtcbiAgICBcbiAgICBjb25zdCB0b29sYmFyRWwgPSBoZWFkZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdG9vbGJhcicgfSk7XG4gICAgXG4gICAgLy8gQWRkIGluZm8gYWJvdXQgYXV0b21hdGljIG1vZGUgZGV0ZWN0aW9uXG4gICAgY29uc3QgYXV0b01vZGVJbmZvID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbycsXG4gICAgICB0ZXh0OiAn4pqhIEF1dG9tYXRpYyBtb2RlIGRldGVjdGlvbiBlbmFibGVkJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFyIGNoYXQgYnV0dG9uXG4gICAgY29uc3QgY2xlYXJCdG4gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsZWFyQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsZWFyQ2hhdCgpO1xuXG4gICAgLy8gQWdlbnQgc2VsZWN0b3IgKHdpbGwgYmUgcG9wdWxhdGVkIHdoZW4gYWdlbnRzIGFyZSBsb2FkZWQpXG4gICAgY29uc3QgYWdlbnRTZWxlY3QgPSB0b29sYmFyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnIH0pO1xuICAgIGFnZW50U2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdBdXRvLXNlbGVjdCBBZ2VudCcsIHZhbHVlOiAnJyB9KTtcbiAgICB0aGlzLmxvYWRBZ2VudHMoYWdlbnRTZWxlY3QpO1xuXG4gICAgLy8gQ2hhdCBjb250YWluZXJcbiAgICB0aGlzLmNoYXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gTWVzc2FnZXMgYXJlYVxuICAgIHRoaXMubWVzc2FnZXNFbCA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMnIH0pO1xuICAgIFxuICAgIC8vIElucHV0IGNvbnRhaW5lclxuICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgdGhpcy5pbnB1dEVsID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FzayBhIHF1ZXN0aW9uIG9yIGRlc2NyaWJlIHdoYXQgeW91IHdhbnQgdG8gYWNjb21wbGlzaC4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3Qtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKTtcblxuICAgIC8vIEZvY3VzIHRoZSBpbnB1dFxuICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuXG4gICAgLy8gTG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIHRoaXMubG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKTtcblxuICAgIC8vIEFkZCBzdHlsZXNcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRzKHNlbGVjdEVsOiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTG9hZGluZyBhZ2VudHMuLi4nKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IGdldEFnZW50cyByZXNwb25zZTonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IHJlc3BvbnNlLmRhdGEgdHlwZTonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiByZXNwb25zZS5kYXRhIGNvbnRlbnQ6JywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgYWdlbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YSBpcyBkaXJlY3RseSBhbiBhcnJheVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkge1xuICAgICAgICAgIGFnZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gXG4gICAgICAgIC8vIENoZWNrIGlmIGRhdGEgaGFzIGFuICdhZ2VudHMnIHByb3BlcnR5IHdpdGggYW4gYXJyYXlcbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjb25zdCBkYXRhT2JqID0gcmVzcG9uc2UuZGF0YSBhcyBhbnk7XG4gICAgICAgICAgaWYgKGRhdGFPYmouYWdlbnRzICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5hZ2VudHMpKSB7XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmFnZW50cztcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFPYmouZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouZGF0YSkpIHtcbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouZGF0YTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChhZ2VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCcsIGFnZW50cy5sZW5ndGgsICdhZ2VudHMnKTtcbiAgICAgICAgICBhZ2VudHMuZm9yRWFjaChhZ2VudCA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICAgICAgICB0ZXh0OiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICB2YWx1ZTogYWdlbnQuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBObyBhZ2VudHMgZm91bmQgaW4gcmVzcG9uc2UnKTtcbiAgICAgICAgICAvLyBBZGQgYSBkZWZhdWx0IG9wdGlvbiBpbmRpY2F0aW5nIG5vIGFnZW50c1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnTm8gYWdlbnRzIGF2YWlsYWJsZScsXG4gICAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvcHRpb24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHM6IEFQSSByZXR1cm5lZCBlcnJvciBvciBubyBkYXRhOicsIHJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCkge1xuICAgIC8vIE9ubHkgdHJ5IHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3RvcnkgaWYgd2UgaGF2ZSBhIGNvbnZlcnNhdGlvbiBJRFxuICAgIGlmICh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcztcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgbm8gY29udmVyc2F0aW9uIElELCBzdGFydCBmcmVzaCAobm8gaGlzdG9yeSB0byBsb2FkKVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZSgpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybjtcblxuICAgIC8vIERpc2FibGUgaW5wdXQgd2hpbGUgcHJvY2Vzc2luZ1xuICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZGluZy4uLic7XG5cbiAgICAvLyBBZGQgdXNlciBtZXNzYWdlIHRvIFVJXG4gICAgdGhpcy5hZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZSk7XG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG5cbiAgICB0cnkge1xuICAgICAgLy8g4pSA4pSAIGZldGNoIGNvbnRleHQgJiBpbnRlbnQgaW4gcGFyYWxsZWwg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICBjb25zdCBbY29udGV4dCwgaW50ZW50UmVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0QWN0aXZlTWFya2Rvd24oKSwgICAgICAgICAgLy8gcmV0dXJucyBzdHJpbmcgfCBudWxsXG4gICAgICAgIHRoaXMucGx1Z2luLmFwaUNsaWVudC5jbGFzc2lmeUludGVudChtZXNzYWdlKSAgLy8gUE9TVCAvaW50ZWxsaWdlbmNlL3BhcnNlXG4gICAgICBdKTtcblxuICAgICAgLy8gYnVpbGQgYSBnZW5lcmljIHBheWxvYWQ7IGNvbnRleHQgbWF5IGJlIG51bGwvZW1wdHlcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IG1lc3NhZ2UsIGNvbnRleHQgfTtcblxuICAgICAgLy8gU2hvdyBpbnRlbnQgZGV0ZWN0aW9uIGluIFVJIGlmIGRlYnVnIG1vZGUgaXMgZW5hYmxlZFxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1Zykge1xuICAgICAgICB0aGlzLnNob3dJbnRlbnREZWJ1ZyhpbnRlbnRSZXMuaW50ZW50KTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgXG4gICAgICBpZiAoaW50ZW50UmVzLmludGVudCA9PT0gXCJhZ2VudFwiKSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJ1bldvcmtmbG93KHBheWxvYWQpOyAgICAgLy8gUE9TVCAvd29ya2Zsb3dcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGDimpnvuI8gQWdlbnQgTW9kZSAoYXV0by1kZXRlY3RlZClcXG5cXG4ke3Jlc3BvbnNlLmRhdGEucmVzdWx0fWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yIGluIGFnZW50IG1vZGU6ICR7cmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UnfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZW5kQ2hhdChwYXlsb2FkLCB7XG4gICAgICAgICAgY29udmVyc2F0aW9uX2lkOiB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgYWdlbnRfaWQ6IHRoaXMuZ2V0U2VsZWN0ZWRBZ2VudCgpXG4gICAgICAgIH0pOyAgICAgICAgLy8gUE9TVCAvY2hhdFxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gcmVzcG9uc2UuZGF0YS5jb252ZXJzYXRpb25faWQ7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2FybiB1c2VyIGlmIHRoZXkgaGFkIGNvbnRleHQgZGlzYWJsZWRcbiAgICAgIGlmICghY29udGV4dD8ubGVuZ3RoKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCLimqDvuI8gTm8gdmF1bHQgY29udGVudCB3YXMgc2VudDsgcmVwbGllcyBtYXkgYmUgZ2VuZXJpYy5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBSZS1lbmFibGUgaW5wdXRcbiAgICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZCc7XG4gICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFNlbGVjdGVkQWdlbnQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBzZWxlY3RFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LWFnZW50LXNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHJldHVybiBzZWxlY3RFbD8udmFsdWUgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRNZXNzYWdlKHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIHRoaXMubWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6IGB2YXVsdHBpbG90LW1lc3NhZ2UgdmF1bHRwaWxvdC1tZXNzYWdlLSR7bWVzc2FnZS5yb2xlfWBcbiAgICB9KTtcblxuICAgIGNvbnN0IHJvbGVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUnLFxuICAgICAgdGV4dDogbWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAnWW91JyA6ICdWYXVsdFBpbG90J1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCdcbiAgICB9KTtcblxuICAgIC8vIFNpbXBsZSBtYXJrZG93biByZW5kZXJpbmcgZm9yIGJhc2ljIGZvcm1hdHRpbmdcbiAgICBjb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bihtZXNzYWdlLmNvbnRlbnQpO1xuXG4gICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wKSB7XG4gICAgICBjb25zdCB0aW1lRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUnLFxuICAgICAgICB0ZXh0OiBuZXcgRGF0ZShtZXNzYWdlLnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckNoYXQoKSB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuZW1wdHkoKTtcbiAgICBuZXcgTm90aWNlKCdDaGF0IGNsZWFyZWQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDYwMHB4O1xuICAgICAgICAgIGhlaWdodDogNzAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1oZWFkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdG9vbGJhciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXV0by1tb2RlLWluZm8ge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXNlbGVjdCB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gODBweCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcyB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdXNlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1hc3Npc3RhbnQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Utcm9sZSB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS40O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS10aW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zZW5kLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWludGVudC1kZWJ1ZyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlci1ob3Zlcik7XG4gICAgICAgICAgYW5pbWF0aW9uOiBmYWRlSW5PdXQgM3MgZWFzZS1pbi1vdXQ7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW5PdXQge1xuICAgICAgICAgIDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfVxuICAgICAgICAgIDEwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxuICAgICAgICAgIDkwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxuICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0ludGVudERlYnVnKGludGVudDogc3RyaW5nKSB7XG4gICAgLy8gQ3JlYXRlIGEgc3VidGxlIG5vdGlmaWNhdGlvbiBzaG93aW5nIHRoZSBkZXRlY3RlZCBpbnRlbnRcbiAgICBjb25zdCBkZWJ1Z0VsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWludGVudC1kZWJ1ZycsXG4gICAgICB0ZXh0OiBg8J+UjSBJbnRlbnQgZGV0ZWN0ZWQ6ICR7aW50ZW50ID09PSAnYWdlbnQnID8gJ+Kame+4jyBBZ2VudCBNb2RlJyA6ICfwn5KsIEFzayBNb2RlJ31gXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQXV0by1yZW1vdmUgYWZ0ZXIgMyBzZWNvbmRzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWJ1Z0VsLnJlbW92ZSgpO1xuICAgIH0sIDMwMDApO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFdvcmtmbG93UmVxdWVzdCwgV29ya2Zsb3dSZXNwb25zZSwgV29ya2Zsb3dQcm9ncmVzcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV29ya2Zsb3dNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGdvYWxJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgY29udGV4dElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBleGVjdXRlQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgcHJvZ3Jlc3NDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSByZXN1bHRzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaXNFeGVjdXRpbmcgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfimpnvuI8gV29ya2Zsb3cgRXhlY3V0aW9uJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnRGVmaW5lIGEgZ29hbCBhbmQgbGV0IFZhdWx0UGlsb3QgY3JlYXRlIGFuZCBleGVjdXRlIGEgY29tcHJlaGVuc2l2ZSB3b3JrZmxvdyB0byBhY2hpZXZlIGl0LicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRm9ybVxuICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWZvcm0nIH0pO1xuXG4gICAgLy8gR29hbCBpbnB1dFxuICAgIGNvbnN0IGdvYWxDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnR29hbCAqJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmdvYWxJbnB1dCA9IGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdlLmcuLCBcIkNyZWF0ZSBhIGNvbXByZWhlbnNpdmUgc3R1ZHkgcGxhbiBmb3IgbWFjaGluZSBsZWFybmluZyBiYXNlZCBvbiBteSBub3Rlc1wiJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZ29hbC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIENvbnRleHQgaW5wdXRcbiAgICBjb25zdCBjb250ZXh0Q29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0FkZGl0aW9uYWwgQ29udGV4dCAob3B0aW9uYWwpJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHRJbnB1dCA9IGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdQcm92aWRlIGFueSBhZGRpdGlvbmFsIGNvbnRleHQsIGNvbnN0cmFpbnRzLCBvciByZXF1aXJlbWVudHMuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jb250ZXh0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gVmF1bHQgY29udGVudCBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdWYXVsdCBJbnRlZ3JhdGlvbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWN0aXZlRmlsZSA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhY3RpdmVGaWxlQ2hlY2tib3ggPSBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFjdGl2ZSBmaWxlIGNvbnRlbnQnIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFsbEZpbGVzID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFsbEZpbGVzQ2hlY2tib3ggPSBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWxsIHZhdWx0IGZpbGVzIChtYXkgdGFrZSBsb25nZXIpJyB9KTtcblxuICAgIC8vIEV4ZWN1dGUgYnV0dG9uXG4gICAgdGhpcy5leGVjdXRlQnV0dG9uID0gZm9ybUVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24nXG4gICAgfSk7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmV4ZWN1dGVXb3JrZmxvdyhhY3RpdmVGaWxlQ2hlY2tib3guY2hlY2tlZCwgYWxsRmlsZXNDaGVja2JveC5jaGVja2VkKTtcblxuICAgIC8vIFByb2dyZXNzIGNvbnRhaW5lclxuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBSZXN1bHRzIGNvbnRhaW5lclxuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBGb2N1cyB0aGUgZ29hbCBpbnB1dFxuICAgIHRoaXMuZ29hbElucHV0LmZvY3VzKCk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlV29ya2Zsb3coaW5jbHVkZUFjdGl2ZUZpbGU6IGJvb2xlYW4sIGluY2x1ZGVBbGxGaWxlczogYm9vbGVhbikge1xuICAgIGNvbnN0IGdvYWwgPSB0aGlzLmdvYWxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFnb2FsKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSBnb2FsIGZvciB0aGUgd29ya2Zsb3cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzRXhlY3V0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRpbmcuLi4nO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJlcGFyZSB2YXVsdCBjb250ZW50XG4gICAgICBsZXQgdmF1bHRDb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIGlmIChpbmNsdWRlQWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2FjdGl2ZUZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGluY2x1ZGVBbGxGaWxlcykge1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDIwKSkgeyAvLyBMaW1pdCB0byBmaXJzdCAyMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgd29ya2Zsb3cgcmVxdWVzdFxuICAgICAgY29uc3QgcmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0ID0ge1xuICAgICAgICBnb2FsLFxuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHRJbnB1dC52YWx1ZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuICAgICAgICB2YXVsdF9jb250ZW50OiB2YXVsdENvbnRlbnQgfHwgdW5kZWZpbmVkXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBXZWJTb2NrZXQgbGlzdGVuZXIgZm9yIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpKSB7XG4gICAgICAgIC8vIExpc3RlbiBmb3Igd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICB0aGlzLnNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudCEuZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3QpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGlzcGxheVJlc3VsdHMocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1dvcmtmbG93IGV4ZWN1dGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3cgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcihlcnJvck1zZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNFeGVjdXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGUgV29ya2Zsb3cnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY29ubmVjdGVkIHRvIHRoZSBXZWJTb2NrZXQgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgIC8vIEZvciBub3csIHdlJ2xsIHNpbXVsYXRlIHByb2dyZXNzXG4gICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0FuYWx5emluZyBnb2FsIGFuZCBjb250ZXh0Li4uJyk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnUGxhbm5pbmcgd29ya2Zsb3cgc3RlcHMuLi4nKTtcbiAgICB9LCAxMDAwKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdFeGVjdXRpbmcgd29ya2Zsb3cuLi4nKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheVByb2dyZXNzKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyXCI+PC9kaXY+XG4gICAgICAgIDxzcGFuPiR7bWVzc2FnZX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkaXNwbGF5UmVzdWx0cyh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyByZXN1bHRzXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfinIUgV29ya2Zsb3cgQ29tcGxldGVkJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRXhlY3V0aW9uIHRpbWU6ICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c2AsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gTWFpbiByZXN1bHRcbiAgICBjb25zdCByZXN1bHRFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC1jb250ZW50JyB9KTtcbiAgICByZXN1bHRFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdSZXN1bHQnIH0pO1xuICAgIGNvbnN0IHJlc3VsdENvbnRlbnRFbCA9IHJlc3VsdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LXRleHQnIH0pO1xuICAgIHJlc3VsdENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKHdvcmtmbG93LnJlc3VsdCk7XG5cbiAgICAvLyBTdGVwcyB0YWtlblxuICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdGVwc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyJyB9KTtcbiAgICAgIHN0ZXBzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3RlcHMgVGFrZW4nIH0pO1xuICAgICAgY29uc3Qgc3RlcHNMaXN0ID0gc3RlcHNFbC5jcmVhdGVFbCgnb2wnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtbGlzdCcgfSk7XG4gICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKHN0ZXAgPT4ge1xuICAgICAgICBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBzdGVwIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQXJ0aWZhY3RzXG4gICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYXJ0aWZhY3RzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyJyB9KTtcbiAgICAgIGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0dlbmVyYXRlZCBBcnRpZmFjdHMnIH0pO1xuICAgICAgXG4gICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaCgoYXJ0aWZhY3QsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGFydGlmYWN0RWwgPSBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0JyB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6IGFydGlmYWN0LnRpdGxlIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICB0ZXh0OiBgVHlwZTogJHthcnRpZmFjdC50eXBlfWAsXG4gICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1NhdmUgYXMgTm90ZScsXG4gICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0LCBpbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGFsbCBidXR0b25cbiAgICBjb25zdCBhY3Rpb25zRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMnIH0pO1xuICAgIGNvbnN0IHNhdmVBbGxCdXR0b24gPSBhY3Rpb25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlIENvbXBsZXRlIFJlc3VsdHMgYXMgTm90ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVBbGxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdDogYW55LCBpbmRleDogbnVtYmVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7YXJ0aWZhY3QudGl0bGUucmVwbGFjZSgvW15hLXpBLVowLTlcXHNdL2csICcnKX0ubWRgO1xuICAgICAgY29uc3QgY29udGVudCA9IGAjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fWA7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBBcnRpZmFjdCBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSBhcnRpZmFjdDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgIFxuICAgICAgbGV0IGNvbnRlbnQgPSBgIyBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipHb2FsOioqICR7dGhpcy5nb2FsSW5wdXQudmFsdWV9XFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqRXhlY3V0aW9uIFRpbWU6KiogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCMjIFJlc3VsdFxcblxcbiR7d29ya2Zsb3cucmVzdWx0fVxcblxcbmA7XG4gICAgICBcbiAgICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIFN0ZXBzIFRha2VuXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAke2luZGV4ICsgMX0uICR7c3RlcH1cXG5gO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGVudCArPSAnXFxuJztcbiAgICAgIH1cblxuICAgICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBHZW5lcmF0ZWQgQXJ0aWZhY3RzXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goYXJ0aWZhY3QgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1cXG5cXG5gO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYENvbXBsZXRlIHJlc3VsdHMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgcmVzdWx0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1lcnJvclwiPlxuICAgICAgICA8aDM+4p2MIFdvcmtmbG93IEZhaWxlZDwvaDM+XG4gICAgICAgIDxwPiR7bWVzc2FnZX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDcwMHB4O1xuICAgICAgICAgIG1heC1oZWlnaHQ6IDgwdmg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWdyb3VwIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZ29hbC1pbnB1dCxcbiAgICAgICAgLnZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwgaW5wdXQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyIHtcbiAgICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtdGV4dCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcixcbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1saXN0IHtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3Qge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0LXR5cGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1lcnJvciB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgXG4gIEFQSVJlc3BvbnNlLCBcbiAgQ2hhdFJlcXVlc3QsIFxuICBDaGF0UmVzcG9uc2UsIFxuICBDb252ZXJzYXRpb25IaXN0b3J5LFxuICBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCxcbiAgQ29waWxvdFJlcXVlc3QsIFxuICBDb3BpbG90UmVzcG9uc2UsXG4gIFdvcmtmbG93UmVxdWVzdCxcbiAgV29ya2Zsb3dSZXNwb25zZSxcbiAgQWdlbnQsXG4gIEFnZW50Q3JlYXRlUmVxdWVzdCxcbiAgQWdlbnRFeGVjdXRlUmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVzcG9uc2UsXG4gIFRhc2tQbGFubmluZ1JlcXVlc3QsXG4gIFRhc2tQbGFubmluZ1Jlc3BvbnNlLFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2UsXG4gIE1lbW9yeVVwZGF0ZVJlcXVlc3QsXG4gIFdlYlNvY2tldE1lc3NhZ2UsXG4gIEVycm9yUmVzcG9uc2UsXG4gIEludGVudCxcbiAgSW50ZW50UmVzdWx0LFxuICBJbnRlbnREZWJ1Z1xufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEV2b0FnZW50WENsaWVudCB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ/OiBXZWJTb2NrZXQ7XG4gIHByaXZhdGUgd3NDYWxsYmFja3M6IE1hcDxzdHJpbmcsIChkYXRhOiBhbnkpID0+IHZvaWQ+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmw6IHN0cmluZywgYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3Q8VD4oXG4gICAgZW5kcG9pbnQ6IHN0cmluZywgXG4gICAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fVxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlPFQ+PiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZW5kcG9pbnR9YDtcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfHwge30pLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5hcGlLZXkpIHtcbiAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gSGFuZGxlIG5vbi1KU09OIHJlc3BvbnNlcyBncmFjZWZ1bGx5XG4gICAgICBsZXQgZGF0YTtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuZXJyb3IgXG4gICAgICAgICAgPyBkYXRhLmVycm9yIFxuICAgICAgICAgIDogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFQSSBFcnJvciBbJHtyZXNwb25zZS5zdGF0dXN9XTpgLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyA/IHsgbWVzc2FnZTogZGF0YSB9IGFzIFQgOiBkYXRhLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQVBJIFJlcXVlc3QgRXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSGVhbHRoIGNoZWNrXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+PiB7XG4gICAgY29uc29sZS5sb2coYFZhdWx0UGlsb3Q6IEF0dGVtcHRpbmcgaGVhbHRoIGNoZWNrIHRvICR7dGhpcy5iYXNlVXJsfS9zdGF0dXNgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PHsgc3RhdHVzOiBzdHJpbmc7IHZlcnNpb246IHN0cmluZyB9PignL3N0YXR1cycsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEhlYWx0aCBjaGVjayByZXN1bHQ6JywgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gQWx0ZXJuYXRpdmUgaGVhbHRoIGNoZWNrIG1ldGhvZCBpZiB0aGUgbWFpbiBvbmUgZmFpbHNcbiAgYXN5bmMgc2ltcGxlSGVhbHRoQ2hlY2soKTogUHJvbWlzZTxBUElSZXNwb25zZTx7IHN0YXR1czogc3RyaW5nIH0+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vc3RhdHVzYDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ0hFQUQnLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA1KSB7IC8vIDQwNSBtZWFucyBzZXJ2ZXIgaXMgdXAgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBIRUFEXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ29rJyB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYFNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdDb25uZWN0aW9uIGZhaWxlZCdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hhdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGNoYXQocmVxdWVzdDogQ2hhdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENoYXRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jaGF0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbnZlcnNhdGlvbkhpc3RvcnkoY29udmVyc2F0aW9uSWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUwKTogUHJvbWlzZTxBUElSZXNwb25zZTxDb252ZXJzYXRpb25IaXN0b3J5Pj4ge1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCA9IHtcbiAgICAgIGNvbnZlcnNhdGlvbl9pZDogY29udmVyc2F0aW9uSWQsXG4gICAgICBsaW1pdDogbGltaXQsXG4gICAgICBpbmNsdWRlX21lc3NhZ2VzOiB0cnVlXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb24vaGlzdG9yeScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHZvaWQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYC9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSk7XG4gIH1cblxuICAvLyBDb3BpbG90IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgZ2V0Q29waWxvdENvbXBsZXRpb24ocmVxdWVzdDogQ29waWxvdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvcGlsb3RSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jb3BpbG90L2NvbXBsZXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdvcmtmbG93IGV4ZWN1dGlvblxuICBhc3luYyBleGVjdXRlV29ya2Zsb3cocmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxXb3JrZmxvd1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3dvcmtmbG93Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE5ldyB1bmlmaWVkIEFQSSBtZXRob2RzIGZvciBzaW1wbGlmaWVkIGNvbnRleHQgcGFja2FnaW5nXG4gIGFzeW5jIHJ1bldvcmtmbG93KHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmcgfCBudWxsIH0pOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZ29hbDogcGF5bG9hZC5tZXNzYWdlLFxuICAgICAgICBjb250ZXh0OiBwYXlsb2FkLmNvbnRleHQgfHwgdW5kZWZpbmVkXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbmRDaGF0KHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmcgfCBudWxsIH0sIG9wdGlvbnM/OiB7IGNvbnZlcnNhdGlvbl9pZD86IHN0cmluZzsgYWdlbnRfaWQ/OiBzdHJpbmcgfSk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbWVzc2FnZTogcGF5bG9hZC5tZXNzYWdlLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBwYXlsb2FkLmNvbnRleHQgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjb252ZXJzYXRpb25faWQ6IG9wdGlvbnM/LmNvbnZlcnNhdGlvbl9pZCxcbiAgICAgICAgYWdlbnRfaWQ6IG9wdGlvbnM/LmFnZW50X2lkLFxuICAgICAgICBtb2RlOiAnYXNrJ1xuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gIGFzeW5jIGdldEFnZW50cygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50W10+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVBZ2VudChyZXF1ZXN0OiBBZ2VudENyZWF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cy9jcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUFnZW50KHJlcXVlc3Q6IEFnZW50RXhlY3V0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudC9leGVjdXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhdWx0IGFuYWx5c2lzXG4gIGFzeW5jIGFuYWx5emVWYXVsdENvbnRleHQocmVxdWVzdDogVmF1bHRDb250ZXh0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VmF1bHRDb250ZXh0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvY29udGV4dCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBUYXNrIHBsYW5uaW5nXG4gIGFzeW5jIHBsYW5UYXNrcyhyZXF1ZXN0OiBUYXNrUGxhbm5pbmdSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxUYXNrUGxhbm5pbmdSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9wbGFubmluZy90YXNrcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbGxpZ2VuY2UgcGFyc2luZ1xuICBhc3luYyBwYXJzZUludGVsbGlnZW5jZShyZXF1ZXN0OiBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEludGVudCBjbGFzc2lmaWNhdGlvblxuICBhc3luYyBjbGFzc2lmeUludGVudChtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPEludGVudFJlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnRSZXN1bHQ+KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pLFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byAnYXNrJyBtb2RlIGlmIGNsYXNzaWZpY2F0aW9uIGZhaWxzXG4gICAgcmV0dXJuIHsgaW50ZW50OiAnYXNrJywgY29uZmlkZW5jZTogMC41IH07XG4gIH1cblxuICAvLyBPcHRpb25hbDogRGVidWcgaW50ZW50IGNsYXNzaWZpY2F0aW9uXG4gIGFzeW5jIGV4cGxhaW5JbnRlbnQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxJbnRlbnREZWJ1Zz4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnREZWJ1Zz4oJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UsIGluY2x1ZGVfZGVidWc6IHRydWUgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIGRlYnVnIGluZm9cbiAgICByZXR1cm4geyBcbiAgICAgIGludGVudDogJ2FzaycsIFxuICAgICAgY29uZmlkZW5jZTogMC41LCBcbiAgICAgIHJlYXNvbmluZzogJ0NsYXNzaWZpY2F0aW9uIGZhaWxlZCwgZGVmYXVsdGluZyB0byBhc2sgbW9kZScgXG4gICAgfTtcbiAgfVxuXG4gIC8vIE1lbW9yeSBtYW5hZ2VtZW50XG4gIGFzeW5jIHVwZGF0ZU1lbW9yeShyZXF1ZXN0OiBNZW1vcnlVcGRhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL21lbW9yeS91cGRhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IGZ1bmN0aW9uYWxpdHlcbiAgY29ubmVjdFdlYlNvY2tldChjYWxsYmFja3M6IHtcbiAgICBvbkNoYXQ/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uV29ya2Zsb3dQcm9ncmVzcz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Db3BpbG90PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvblZhdWx0U3luYz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25JbnRlbnREZWJ1Zz86IChkZWJ1ZzogSW50ZW50RGVidWcpID0+IHZvaWQ7XG4gICAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIG9uQ29ubmVjdD86ICgpID0+IHZvaWQ7XG4gICAgb25EaXNjb25uZWN0PzogKCkgPT4gdm9pZDtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHdzVXJsID0gdGhpcy5iYXNlVXJsLnJlcGxhY2UoJ2h0dHAnLCAnd3MnKSArICcvd3Mvb2JzaWRpYW4nO1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvICR7d3NVcmx9YCk7XG4gICAgXG4gICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcpO1xuICAgICAgY2FsbGJhY2tzLm9uQ29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNoYXQ/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd29ya2Zsb3dfcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV29ya2Zsb3dQcm9ncmVzcz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3BpbG90JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNvcGlsb3Q/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndmF1bHRfc3luYyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25WYXVsdFN5bmM/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaW50ZW50X2RlYnVnJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkludGVudERlYnVnPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignRmFpbGVkIHRvIHBhcnNlIFdlYlNvY2tldCBtZXNzYWdlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZyb20gRXZvQWdlbnRYJywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgIGNhbGxiYWNrcy5vbkRpc2Nvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3InKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQpIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LmNsb3NlKCk7XG4gICAgICB0aGlzLndlYnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZW5kV2ViU29ja2V0TWVzc2FnZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCAmJiB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGUsIGRhdGEgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU47XG4gIH1cbn1cbiIsIi8qKlxuICogVHlwZVNjcmlwdCB0eXBlIGRlZmluaXRpb25zIGZvciBWYXVsdFBpbG90IHZhdWx0IG1hbmFnZW1lbnQgaW50ZWdyYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vID09PSBWQVVMVCBTVFJVQ1RVUkUgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0IHtcbiAgaW5jbHVkZV9jb250ZW50PzogYm9vbGVhbjtcbiAgbWF4X2RlcHRoPzogbnVtYmVyO1xuICBmaWxlX3R5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRGaWxlSW5mbyB7XG4gIHBhdGg6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIG1vZGlmaWVkOiBzdHJpbmc7XG4gIGZpbGVfdHlwZTogc3RyaW5nO1xuICBjb250ZW50X3ByZXZpZXc/OiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbiAgbGlua3M/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEZvbGRlckluZm8ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgY2hpbGRyZW46IChWYXVsdEZpbGVJbmZvIHwgVmF1bHRGb2xkZXJJbmZvKVtdO1xuICB0eXBlOiAnZm9sZGVyJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlIHtcbiAgdmF1bHRfbmFtZTogc3RyaW5nO1xuICB0b3RhbF9maWxlczogbnVtYmVyO1xuICB0b3RhbF9mb2xkZXJzOiBudW1iZXI7XG4gIHRvdGFsX3NpemU6IG51bWJlcjtcbiAgc3RydWN0dXJlOiBWYXVsdEZvbGRlckluZm87XG4gIHJlY2VudF9maWxlczogVmF1bHRGaWxlSW5mb1tdO1xuICBvcnBoYW5lZF9maWxlczogVmF1bHRGaWxlSW5mb1tdO1xufVxuXG4vLyA9PT0gRklMRSBPUEVSQVRJT04gVFlQRVMgPT09XG5cbmV4cG9ydCB0eXBlIEZpbGVPcGVyYXRpb25UeXBlID0gJ2NyZWF0ZScgfCAndXBkYXRlJyB8ICdkZWxldGUnIHwgJ21vdmUnIHwgJ2NvcHknO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPcGVyYXRpb25SZXF1ZXN0IHtcbiAgb3BlcmF0aW9uOiBGaWxlT3BlcmF0aW9uVHlwZTtcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIG5ld19wYXRoPzogc3RyaW5nO1xuICBjb250ZW50Pzogc3RyaW5nO1xuICBiYWNrdXA/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPcGVyYXRpb25SZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIGJhY2t1cF9wYXRoPzogc3RyaW5nO1xuICBuZXdfcGF0aD86IHN0cmluZztcbn1cblxuLy8gPT09IEJBVENIIE9QRVJBVElPTlMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCB7XG4gIG9wZXJhdGlvbnM6IEZpbGVPcGVyYXRpb25SZXF1ZXN0W107XG4gIGF0b21pYz86IGJvb2xlYW47XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBjb21wbGV0ZWQ6IG51bWJlcjtcbiAgZmFpbGVkOiBudW1iZXI7XG4gIHJlc3VsdHM6IEZpbGVPcGVyYXRpb25SZXNwb25zZVtdO1xuICBlcnJvcnM/OiBzdHJpbmdbXTtcbn1cblxuLy8gPT09IFNFQVJDSCBUWVBFUyA9PT1cblxuZXhwb3J0IHR5cGUgU2VhcmNoVHlwZSA9ICdjb250ZW50JyB8ICdmaWxlbmFtZScgfCAndGFncycgfCAnbGlua3MnIHwgJ2NvbXByZWhlbnNpdmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVxdWVzdCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIHNlYXJjaF90eXBlPzogU2VhcmNoVHlwZTtcbiAgbWF4X3Jlc3VsdHM/OiBudW1iZXI7XG4gIGluY2x1ZGVfY29udGVudD86IGJvb2xlYW47XG4gIGZpbGVfdHlwZXM/OiBzdHJpbmdbXTtcbiAgZm9sZGVycz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVzdWx0IHtcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIGZpbGVfbmFtZTogc3RyaW5nO1xuICBtYXRjaF90eXBlOiAnY29udGVudCcgfCAnZmlsZW5hbWUnIHwgJ3RhZycgfCAnbGluayc7XG4gIG1hdGNoZXM6IHN0cmluZ1tdO1xuICBwcmV2aWV3OiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxpbmVfbnVtYmVycz86IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVzcG9uc2Uge1xuICByZXN1bHRzOiBWYXVsdFNlYXJjaFJlc3VsdFtdO1xuICB0b3RhbF9mb3VuZDogbnVtYmVyO1xuICBzZWFyY2hfdHlwZTogU2VhcmNoVHlwZTtcbiAgcXVlcnk6IHN0cmluZztcbiAgaW5zaWdodHM/OiBzdHJpbmc7XG4gIHN1Z2dlc3RlZF9xdWVyaWVzPzogc3RyaW5nW107XG59XG5cbi8vID09PSBPUkdBTklaQVRJT04gVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0IHtcbiAgZm9jdXNfZm9sZGVycz86IHN0cmluZ1tdO1xuICBvcmdhbml6YXRpb25fbW9kZTogJ2J5X3RvcGljJyB8ICdieV9kYXRlJyB8ICdieV90eXBlJyB8ICdjdXN0b20nO1xuICBjcmVhdGVfZm9sZGVycz86IGJvb2xlYW47XG4gIG1vdmVfZmlsZXM/OiBib29sZWFuO1xuICBjdXN0b21fcnVsZXM/OiBPcmdhbml6YXRpb25SdWxlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JnYW5pemF0aW9uUnVsZSB7XG4gIHBhdHRlcm46IHN0cmluZztcbiAgdGFyZ2V0X2ZvbGRlcjogc3RyaW5nO1xuICBydWxlX3R5cGU6ICdmaWxlbmFtZScgfCAnY29udGVudCcgfCAndGFnJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlIHtcbiAgc3VnZ2VzdGVkX21vdmVzOiBGaWxlTW92ZU9wZXJhdGlvbltdO1xuICBzdWdnZXN0ZWRfZm9sZGVyczogc3RyaW5nW107XG4gIG9yZ2FuaXphdGlvbl9pbnNpZ2h0czogc3RyaW5nO1xuICBlc3RpbWF0ZWRfaW1wcm92ZW1lbnRzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU1vdmVPcGVyYXRpb24ge1xuICBmcm9tX3BhdGg6IHN0cmluZztcbiAgdG9fcGF0aDogc3RyaW5nO1xuICByZWFzb246IHN0cmluZztcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xufVxuXG4vLyA9PT0gQkFDS1VQIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QmFja3VwUmVxdWVzdCB7XG4gIGluY2x1ZGVfc2V0dGluZ3M/OiBib29sZWFuO1xuICBjb21wcmVzc2lvbj86IGJvb2xlYW47XG4gIGJhY2t1cF9uYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QmFja3VwUmVzcG9uc2Uge1xuICBiYWNrdXBfcGF0aDogc3RyaW5nO1xuICBiYWNrdXBfc2l6ZTogbnVtYmVyO1xuICBmaWxlc19iYWNrZWRfdXA6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbi8vID09PSBFUlJPUiBIQU5ETElORyA9PT1cblxuZXhwb3J0IGNsYXNzIFZhdWx0TWFuYWdlbWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogc3RyaW5nO1xuICBwdWJsaWMgZmVhdHVyZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29kZTogc3RyaW5nLCBmZWF0dXJlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnVmF1bHRNYW5hZ2VtZW50RXJyb3InO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgdGhpcy5mZWF0dXJlID0gZmVhdHVyZTtcbiAgfVxufVxuXG4vLyA9PT0gU0VUVElOR1MgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3Mge1xuICBlbmFibGVWYXVsdE1hbmFnZW1lbnQ6IGJvb2xlYW47XG4gIGF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmU6IGJvb2xlYW47XG4gIHNlYXJjaFJlc3VsdHNMaW1pdDogbnVtYmVyO1xuICBlbmFibGVTbWFydFNlYXJjaDogYm9vbGVhbjtcbiAgYmF0Y2hPcGVyYXRpb25UaW1lb3V0OiBudW1iZXI7XG4gIHNob3dWYXVsdFN0YXRzOiBib29sZWFuO1xuICBtYXhTZWFyY2hSZXN1bHRzOiBudW1iZXI7XG4gIGRlZmF1bHRTZWFyY2hUeXBlOiBTZWFyY2hUeXBlO1xuICBlbmFibGVGaWxlT3BlcmF0aW9uczogYm9vbGVhbjtcbiAgY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9uczogYm9vbGVhbjtcbiAgYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnM6IGJvb2xlYW47XG59XG5cbi8vID09PSBBUEkgSU5URVJGQUNFID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0TWFuYWdlbWVudEFQSSB7XG4gIGdldFZhdWx0U3RydWN0dXJlKHJlcXVlc3Q6IFZhdWx0U3RydWN0dXJlUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTdHJ1Y3R1cmVSZXNwb25zZT47XG4gIHBlcmZvcm1GaWxlT3BlcmF0aW9uKHJlcXVlc3Q6IEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+O1xuICBwZXJmb3JtQmF0Y2hPcGVyYXRpb25zKHJlcXVlc3Q6IEJhdGNoRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEJhdGNoRmlsZU9wZXJhdGlvblJlc3BvbnNlPjtcbiAgc2VhcmNoVmF1bHQocmVxdWVzdDogVmF1bHRTZWFyY2hSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFNlYXJjaFJlc3BvbnNlPjtcbiAgb3JnYW5pemVWYXVsdChyZXF1ZXN0OiBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QpOiBQcm9taXNlPFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2U+O1xuICBiYWNrdXBWYXVsdChyZXF1ZXN0OiBWYXVsdEJhY2t1cFJlcXVlc3QpOiBQcm9taXNlPFZhdWx0QmFja3VwUmVzcG9uc2U+O1xufVxuXG4vLyA9PT0gVVRJTElUWSBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE1vZGFsUHJvcHMge1xuICBhcHA6IEFwcDtcbiAgcGx1Z2luOiBhbnk7XG4gIG9uQ2xvc2U/OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVUcmVlTm9kZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICB0eXBlOiAnZmlsZScgfCAnZm9sZGVyJztcbiAgY2hpbGRyZW4/OiBGaWxlVHJlZU5vZGVbXTtcbiAgc2l6ZT86IG51bWJlcjtcbiAgbW9kaWZpZWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdGF0cyB7XG4gIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgdG90YWxGb2xkZXJzOiBudW1iZXI7XG4gIHRvdGFsU2l6ZTogbnVtYmVyO1xuICBhdmVyYWdlRmlsZVNpemU6IG51bWJlcjtcbiAgbGFyZ2VzdEZpbGU6IFZhdWx0RmlsZUluZm87XG4gIG1vc3RSZWNlbnRGaWxlOiBWYXVsdEZpbGVJbmZvO1xuICBmaWxlVHlwZURpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hGaWx0ZXIge1xuICBmaWxlVHlwZXM/OiBzdHJpbmdbXTtcbiAgZm9sZGVycz86IHN0cmluZ1tdO1xuICBkYXRlUmFuZ2U/OiB7XG4gICAgc3RhcnQ6IHN0cmluZztcbiAgICBlbmQ6IHN0cmluZztcbiAgfTtcbiAgc2l6ZVJhbmdlPzoge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICB9O1xuICB0YWdzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRIZWFsdGhDaGVjayB7XG4gIHN0YXR1czogJ2hlYWx0aHknIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJztcbiAgaXNzdWVzOiBIZWFsdGhJc3N1ZVtdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBsYXN0Q2hlY2s6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWFsdGhJc3N1ZSB7XG4gIHR5cGU6ICdvcnBoYW5lZF9maWxlJyB8ICdicm9rZW5fbGluaycgfCAnZHVwbGljYXRlX25hbWUnIHwgJ2xhcmdlX2ZpbGUnIHwgJ2VtcHR5X2ZvbGRlcic7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGZpbGVzOiBzdHJpbmdbXTtcbiAgc2V2ZXJpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG59XG4iLCIvKipcbiAqIEFQSSBDbGllbnQgRXh0ZW5zaW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtcbiAgVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0LFxuICBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlLFxuICBGaWxlT3BlcmF0aW9uUmVxdWVzdCxcbiAgRmlsZU9wZXJhdGlvblJlc3BvbnNlLFxuICBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0LFxuICBCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZSxcbiAgVmF1bHRTZWFyY2hSZXF1ZXN0LFxuICBWYXVsdFNlYXJjaFJlc3BvbnNlLFxuICBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QsXG4gIFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2UsXG4gIFZhdWx0QmFja3VwUmVxdWVzdCxcbiAgVmF1bHRCYWNrdXBSZXNwb25zZSxcbiAgVmF1bHRNYW5hZ2VtZW50RXJyb3IsXG4gIFZhdWx0TWFuYWdlbWVudEFQSVxufSBmcm9tICcuL3ZhdWx0LXR5cGVzJztcblxuLyoqXG4gKiBWYXVsdCBNYW5hZ2VtZW50IEFQSSBDbGllbnRcbiAqL1xuZXhwb3J0IGNsYXNzIFZhdWx0TWFuYWdlbWVudENsaWVudCBpbXBsZW1lbnRzIFZhdWx0TWFuYWdlbWVudEFQSSB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICAvLyA9PT0gQ09SRSBBUEkgTUVUSE9EUyA9PT1cblxuICAvKipcbiAgICogR2V0IGNvbXByZWhlbnNpdmUgdmF1bHQgc3RydWN0dXJlIHdpdGggQUkgYW5hbHlzaXNcbiAgICovXG4gIGFzeW5jIGdldFZhdWx0U3RydWN0dXJlKHJlcXVlc3Q6IFZhdWx0U3RydWN0dXJlUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTdHJ1Y3R1cmVSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvc3RydWN0dXJlJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIGdldCB2YXVsdCBzdHJ1Y3R1cmU6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdTVFJVQ1RVUkVfRkVUQ0hfRkFJTEVEJyxcbiAgICAgICAgICAnc3RydWN0dXJlJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnc3RydWN0dXJlJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBpbmRpdmlkdWFsIGZpbGUgb3BlcmF0aW9uIChjcmVhdGUsIHVwZGF0ZSwgZGVsZXRlLCBtb3ZlLCBjb3B5KVxuICAgKi9cbiAgYXN5bmMgcGVyZm9ybUZpbGVPcGVyYXRpb24ocmVxdWVzdDogRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3QocmVxdWVzdCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9maWxlL29wZXJhdGlvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEZpbGUgb3BlcmF0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ0ZJTEVfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2ZpbGUtb3BlcmF0aW9ucydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICByZXN1bHQubWVzc2FnZSB8fCAnRmlsZSBvcGVyYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICAnRklMRV9PUEVSQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnZmlsZS1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnZmlsZS1vcGVyYXRpb25zJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBtdWx0aXBsZSBmaWxlIG9wZXJhdGlvbnMgZWZmaWNpZW50bHlcbiAgICovXG4gIGFzeW5jIHBlcmZvcm1CYXRjaE9wZXJhdGlvbnMocmVxdWVzdDogQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8QmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZXF1ZXN0Lm9wZXJhdGlvbnMgfHwgcmVxdWVzdC5vcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgJ05vIG9wZXJhdGlvbnMgc3BlY2lmaWVkIGZvciBiYXRjaCByZXF1ZXN0JyxcbiAgICAgICAgICAnSU5WQUxJRF9CQVRDSF9SRVFVRVNUJyxcbiAgICAgICAgICAnYmF0Y2gtb3BlcmF0aW9ucydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgZWFjaCBvcGVyYXRpb25cbiAgICAgIHJlcXVlc3Qub3BlcmF0aW9ucy5mb3JFYWNoKChvcCwgaW5kZXgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3Qob3ApO1xuICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAgIGBJbnZhbGlkIG9wZXJhdGlvbiBhdCBpbmRleCAke2luZGV4fTogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YCxcbiAgICAgICAgICAgICdJTlZBTElEX0JBVENIX09QRVJBVElPTicsXG4gICAgICAgICAgICAnYmF0Y2gtb3BlcmF0aW9ucydcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2ZpbGUvYmF0Y2gnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBCYXRjaCBvcGVyYXRpb25zIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ0JBVENIX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIHJlc3VsdC5tZXNzYWdlIHx8ICdCYXRjaCBvcGVyYXRpb25zIGZhaWxlZCcsXG4gICAgICAgICAgJ0JBVENIX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnYmF0Y2gtb3BlcmF0aW9ucycpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCB2YXVsdCB3aXRoIEFJLXBvd2VyZWQgaW5zaWdodHNcbiAgICovXG4gIGFzeW5jIHNlYXJjaFZhdWx0KHJlcXVlc3Q6IFZhdWx0U2VhcmNoUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTZWFyY2hSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcXVlc3QucXVlcnkgfHwgcmVxdWVzdC5xdWVyeS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnU2VhcmNoIHF1ZXJ5IGNhbm5vdCBiZSBlbXB0eScsXG4gICAgICAgICAgJ0lOVkFMSURfU0VBUkNIX1FVRVJZJyxcbiAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvc2VhcmNoJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgU2VhcmNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ1NFQVJDSF9GQUlMRUQnLFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdzZWFyY2gnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQUktcG93ZXJlZCB2YXVsdCBvcmdhbml6YXRpb24gc3VnZ2VzdGlvbnNcbiAgICovXG4gIGFzeW5jIG9yZ2FuaXplVmF1bHQocmVxdWVzdDogVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0KTogUHJvbWlzZTxWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9vcmdhbml6ZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYE9yZ2FuaXphdGlvbiBhbmFseXNpcyBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdPUkdBTklaQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnb3JnYW5pemF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnb3JnYW5pemF0aW9uJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHZhdWx0IGJhY2t1cFxuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHQocmVxdWVzdDogVmF1bHRCYWNrdXBSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdEJhY2t1cFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9iYWNrdXAnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBCYWNrdXAgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnQkFDS1VQX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhY2t1cCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvciwgJ2JhY2t1cCcpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09IENPTlZFTklFTkNFIE1FVEhPRFMgPT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmaWxlIHdpdGggY29udGVudFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdjcmVhdGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZXhpc3RpbmcgZmlsZSBjb250ZW50XG4gICAqL1xuICBhc3luYyB1cGRhdGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyZm9ybUZpbGVPcGVyYXRpb24oe1xuICAgICAgb3BlcmF0aW9uOiAndXBkYXRlJyxcbiAgICAgIGZpbGVfcGF0aDogZmlsZVBhdGgsXG4gICAgICBjb250ZW50LFxuICAgICAgYmFja3VwXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmlsZVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBiYWNrdXA6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdkZWxldGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmaWxlIHRvIG5ldyBsb2NhdGlvblxuICAgKi9cbiAgYXN5bmMgbW92ZUZpbGUoZnJvbVBhdGg6IHN0cmluZywgdG9QYXRoOiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ21vdmUnLFxuICAgICAgZmlsZV9wYXRoOiBmcm9tUGF0aCxcbiAgICAgIG5ld19wYXRoOiB0b1BhdGgsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IGEgZmlsZSB0byBuZXcgbG9jYXRpb25cbiAgICovXG4gIGFzeW5jIGNvcHlGaWxlKGZyb21QYXRoOiBzdHJpbmcsIHRvUGF0aDogc3RyaW5nKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdjb3B5JyxcbiAgICAgIGZpbGVfcGF0aDogZnJvbVBhdGgsXG4gICAgICBuZXdfcGF0aDogdG9QYXRoXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUXVpY2sgc2VhcmNoIHdpdGggZGVmYXVsdCBzZXR0aW5nc1xuICAgKi9cbiAgYXN5bmMgcXVpY2tTZWFyY2gocXVlcnk6IHN0cmluZywgbWF4UmVzdWx0czogbnVtYmVyID0gMjApOiBQcm9taXNlPFZhdWx0U2VhcmNoUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5zZWFyY2hWYXVsdCh7XG4gICAgICBxdWVyeSxcbiAgICAgIHNlYXJjaF90eXBlOiAnY29tcHJlaGVuc2l2ZScsXG4gICAgICBtYXhfcmVzdWx0czogbWF4UmVzdWx0cyxcbiAgICAgIGluY2x1ZGVfY29udGVudDogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09IEhFTFBFUiBNRVRIT0RTID09PVxuXG4gIC8qKlxuICAgKiBNYWtlIGF1dGhlbnRpY2F0ZWQgcmVxdWVzdCB0byB0aGUgQVBJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyl9JHtlbmRwb2ludH1gO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgLi4uKChvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPikgfHwge30pXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnNcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgYE5ldHdvcmsgcmVxdWVzdCBmYWlsZWQ6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyfWAsXG4gICAgICAgICdORVRXT1JLX0VSUk9SJyxcbiAgICAgICAgJ2FwaSdcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGZpbGUgb3BlcmF0aW9uIHJlcXVlc3RcbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChyZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IHZvaWQge1xuICAgIGlmICghcmVxdWVzdC5maWxlX3BhdGggfHwgcmVxdWVzdC5maWxlX3BhdGgudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAnRmlsZSBwYXRoIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgJ0lOVkFMSURfRklMRV9QQVRIJyxcbiAgICAgICAgJ3ZhbGlkYXRpb24nXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lm9wZXJhdGlvbiA9PT0gJ21vdmUnIHx8IHJlcXVlc3Qub3BlcmF0aW9uID09PSAnY29weScpIHtcbiAgICAgIGlmICghcmVxdWVzdC5uZXdfcGF0aCB8fCByZXF1ZXN0Lm5ld19wYXRoLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdOZXcgcGF0aCBpcyByZXF1aXJlZCBmb3IgbW92ZS9jb3B5IG9wZXJhdGlvbnMnLFxuICAgICAgICAgICdJTlZBTElEX05FV19QQVRIJyxcbiAgICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5vcGVyYXRpb24gPT09ICdjcmVhdGUnIHx8IHJlcXVlc3Qub3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgaWYgKHJlcXVlc3QuY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnQ29udGVudCBpcyByZXF1aXJlZCBmb3IgY3JlYXRlL3VwZGF0ZSBvcGVyYXRpb25zJyxcbiAgICAgICAgICAnSU5WQUxJRF9DT05URU5UJyxcbiAgICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHZhdWx0IG1hbmFnZW1lbnQgZXJyb3JzIHdpdGggdXNlciBmZWVkYmFja1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvcjogYW55LCBmZWF0dXJlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGBWYXVsdCBtYW5hZ2VtZW50IGVycm9yIGluICR7ZmVhdHVyZX06YCwgZXJyb3IpO1xuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhdWx0TWFuYWdlbWVudEVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBWYXVsdCAke2ZlYXR1cmV9IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFZhdWx0ICR7ZmVhdHVyZX0gb3BlcmF0aW9uIGZhaWxlZGAsIDMwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gdmF1bHQgbWFuYWdlbWVudCBlbmRwb2ludHNcbiAgICovXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgYSBzaW1wbGUgdmF1bHQgc3RydWN0dXJlIHJlcXVlc3Qgd2l0aCBtaW5pbWFsIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9zdHJ1Y3R1cmUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGluY2x1ZGVfY29udGVudDogZmFsc2UsIG1heF9kZXB0aDogMSB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVmF1bHQgbWFuYWdlbWVudCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgbWVzc2FnZTogYENvbm5lY3Rpb24gZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIG1lc3NhZ2U6IGBDb25uZWN0aW9uIGVycm9yOiAke2Vyci5tZXNzYWdlIHx8IGVycn1gIFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8gPT09IFVUSUxJVFkgRlVOQ1RJT05TID09PVxuXG4vKipcbiAqIEZvcm1hdCBmaWxlIHNpemUgaW4gaHVtYW4gcmVhZGFibGUgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQic7XG4gIFxuICBjb25zdCBrID0gMTAyNDtcbiAgY29uc3Qgc2l6ZXMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InXTtcbiAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpO1xuICBcbiAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV07XG59XG5cbi8qKlxuICogVmFsaWRhdGUgZmlsZSBwYXRoIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZpbGVQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAoIXBhdGggfHwgcGF0aC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgaW52YWxpZCBjaGFyYWN0ZXJzXG4gIGNvbnN0IGludmFsaWRDaGFycyA9IC9bPD46XCJ8PypdLztcbiAgaWYgKGludmFsaWRDaGFycy50ZXN0KHBhdGgpKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgcmVzZXJ2ZWQgbmFtZXMgb24gV2luZG93c1xuICBjb25zdCByZXNlcnZlZE5hbWVzID0gL14oQ09OfFBSTnxBVVh8TlVMfENPTVsxLTldfExQVFsxLTldKSQvaTtcbiAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gIGlmIChyZXNlcnZlZE5hbWVzLnRlc3QoZmlsZU5hbWUuc3BsaXQoJy4nKVswXSkpIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGZpbGUgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGaWxlUGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aFxuICAgIC5yZXBsYWNlKC9bPD46XCJ8PypdL2csICdfJylcbiAgICAucmVwbGFjZSgvXFxcXC9nLCAnLycpXG4gICAgLnJlcGxhY2UoL1xcLysvZywgJy8nKVxuICAgIC5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCAnJyk7XG59XG4iLCIvKipcbiAqIE1vZGFsIENsYXNzZXMgZm9yIFZhdWx0UGlsb3QgVmF1bHQgTWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZhdWx0TWFuYWdlbWVudENsaWVudCB9IGZyb20gJy4vdmF1bHQtYXBpLWNsaWVudCc7XG5pbXBvcnQgeyBcbiAgVmF1bHRTdHJ1Y3R1cmVSZXNwb25zZSwgXG4gIFZhdWx0U2VhcmNoUmVzcG9uc2UsIFxuICBGaWxlT3BlcmF0aW9uUmVxdWVzdCxcbiAgU2VhcmNoVHlwZSxcbiAgVmF1bHRPcmdhbml6YXRpb25SZXNwb25zZVxufSBmcm9tICcuL3ZhdWx0LXR5cGVzJztcblxuLy8gPT09IFZBVUxUIFNUUlVDVFVSRSBNT0RBTCA9PT1cblxuZXhwb3J0IGNsYXNzIFZhdWx0U3RydWN0dXJlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBhbnk7XG4gIHByaXZhdGUgdmF1bHRDbGllbnQ6IFZhdWx0TWFuYWdlbWVudENsaWVudDtcbiAgcHJpdmF0ZSBmb2N1c1BhdGg/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogYW55KSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnZhdWx0Q2xpZW50ID0gcGx1Z2luLnZhdWx0Q2xpZW50O1xuICB9XG5cbiAgc2V0Rm9jdXNQYXRoKHBhdGg6IHN0cmluZyk6IHRoaXMge1xuICAgIHRoaXMuZm9jdXNQYXRoID0gcGF0aDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0LXN0cnVjdHVyZS1tb2RhbCcpO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21vZGFsLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHQgU3RydWN0dXJlIEFuYWx5c2lzJyB9KTtcbiAgICBcbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gTG9hZGluZyBzdGF0ZVxuICAgIGNvbnN0IGxvYWRpbmdFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC1sb2FkaW5nJyB9KTtcbiAgICBsb2FkaW5nRWwuc2V0VGV4dCgn8J+UjSBBbmFseXppbmcgdmF1bHQgc3RydWN0dXJlLi4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7XG4gICAgICAgIGluY2x1ZGVfY29udGVudDogZmFsc2UsXG4gICAgICAgIG1heF9kZXB0aDogNVxuICAgICAgfSk7XG5cbiAgICAgIGxvYWRpbmdFbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMucmVuZGVyU3RydWN0dXJlKGNvbnRlbnRFbCwgc3RydWN0dXJlKTtcbiAgICAgIFxuICAgICAgcmVmcmVzaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLm9uT3BlbigpO1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBsb2FkaW5nRWwuc2V0VGV4dCgn4p2MIEZhaWxlZCB0byBsb2FkIHZhdWx0IHN0cnVjdHVyZScpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBcbiAgICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICB0ZXh0OiAnUmV0cnknLFxuICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgfSk7XG4gICAgICByZXRyeUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5vbk9wZW4oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0cnVjdHVyZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBzdHJ1Y3R1cmU6IFZhdWx0U3RydWN0dXJlUmVzcG9uc2UpIHtcbiAgICAvLyBTdGF0cyBvdmVydmlld1xuICAgIGNvbnN0IHN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtc3RhdHMnIH0pO1xuICAgIHN0YXRzRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInN0YXQtZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWljb25cIj7wn5OBPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPkZpbGVzPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7c3RydWN0dXJlLnRvdGFsX2ZpbGVzfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfk4I8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+Rm9sZGVyczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3N0cnVjdHVyZS50b3RhbF9mb2xkZXJzfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfkr48L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+U2l6ZTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4keyhzdHJ1Y3R1cmUudG90YWxfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8gRm9sZGVyIHRyZWVcbiAgICBjb25zdCB0cmVlQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LXRyZWUtY29udGFpbmVyJyB9KTtcbiAgICB0cmVlQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZvbGRlciBTdHJ1Y3R1cmUnIH0pO1xuICAgIFxuICAgIGNvbnN0IHRyZWVFbCA9IHRyZWVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtdHJlZScgfSk7XG4gICAgdGhpcy5yZW5kZXJGb2xkZXIodHJlZUVsLCBzdHJ1Y3R1cmUuc3RydWN0dXJlLCAwKTtcblxuICAgIC8vIFJlY2VudCBmaWxlc1xuICAgIGlmIChzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJlY2VudENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZXMtY29udGFpbmVyJyB9KTtcbiAgICAgIHJlY2VudENvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZWNlbnRFbCA9IHJlY2VudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZXMnIH0pO1xuICAgICAgc3RydWN0dXJlLnJlY2VudF9maWxlcy5zbGljZSgwLCAxMCkuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgY29uc3QgZmlsZUVsID0gcmVjZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWZpbGUnIH0pO1xuICAgICAgICBmaWxlRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+8J+ThDwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtbmFtZVwiPiR7ZmlsZS5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtZGF0ZVwiPiR7bmV3IERhdGUoZmlsZS5tb2RpZmllZCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9PC9zcGFuPlxuICAgICAgICBgO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3JwaGFuZWQgZmlsZXNcbiAgICBpZiAoc3RydWN0dXJlLm9ycGhhbmVkX2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG9ycGhhbmVkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ29ycGhhbmVkLWZpbGVzLWNvbnRhaW5lcicgfSk7XG4gICAgICBvcnBoYW5lZENvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfimqDvuI8gT3JwaGFuZWQgRmlsZXMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBvcnBoYW5lZEVsID0gb3JwaGFuZWRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3JwaGFuZWQtZmlsZXMnIH0pO1xuICAgICAgc3RydWN0dXJlLm9ycGhhbmVkX2ZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IG9ycGhhbkVsID0gb3JwaGFuZWRFbC5jcmVhdGVEaXYoeyBjbHM6ICdvcnBoYW5lZC1maWxlJyB9KTtcbiAgICAgICAgb3JwaGFuRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+8J+Ulzwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtcGF0aFwiPiR7ZmlsZS5wYXRofTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRm9sZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZvbGRlcjogYW55LCBsZXZlbDogbnVtYmVyKSB7XG4gICAgY29uc3QgZm9sZGVyRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6ICdmb2xkZXItaXRlbScsXG4gICAgICBhdHRyOiB7ICdkYXRhLWxldmVsJzogbGV2ZWwudG9TdHJpbmcoKSB9XG4gICAgfSk7XG4gICAgXG4gICAgZm9sZGVyRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPHNwYW4gY2xhc3M9XCJmb2xkZXItdG9nZ2xlXCI+4pa2PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJmb2xkZXItaWNvblwiPvCfk4E8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci1uYW1lXCI+JHtmb2xkZXIubmFtZX08L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci1jb3VudFwiPigke2ZvbGRlci5jaGlsZHJlbi5sZW5ndGh9KTwvc3Bhbj5cbiAgICBgO1xuXG4gICAgLy8gQWRkIGNoaWxkcmVuIGNvbnRhaW5lclxuICAgIGNvbnN0IGNoaWxkcmVuRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6ICdmb2xkZXItY2hpbGRyZW4nLFxuICAgICAgYXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7JyB9XG4gICAgfSk7XG5cbiAgICAvLyBUb2dnbGUgZnVuY3Rpb25hbGl0eVxuICAgIGNvbnN0IHRvZ2dsZUVsID0gZm9sZGVyRWwucXVlcnlTZWxlY3RvcignLmZvbGRlci10b2dnbGUnKSBhcyBIVE1MRWxlbWVudDtcbiAgICB0b2dnbGVFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXNPcGVuID0gY2hpbGRyZW5FbC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICBjaGlsZHJlbkVsLnN0eWxlLmRpc3BsYXkgPSBpc09wZW4gPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgdG9nZ2xlRWwudGV4dENvbnRlbnQgPSBpc09wZW4gPyAn4pa2JyA6ICfilrwnO1xuICAgIH07XG5cbiAgICAvLyBSZW5kZXIgY2hpbGRyZW5cbiAgICBmb2xkZXIuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4ge1xuICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdmb2xkZXInKSB7XG4gICAgICAgIHRoaXMucmVuZGVyRm9sZGVyKGNoaWxkcmVuRWwsIGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZmlsZUVsID0gY2hpbGRyZW5FbC5jcmVhdGVEaXYoeyBcbiAgICAgICAgICBjbHM6ICdmaWxlLWl0ZW0nLFxuICAgICAgICAgIGF0dHI6IHsgJ2RhdGEtbGV2ZWwnOiAobGV2ZWwgKyAxKS50b1N0cmluZygpIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZpbGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5OEPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtjaGlsZC5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtc2l6ZVwiPiR7KGNoaWxkLnNpemUgLyAxMDI0KS50b0ZpeGVkKDEpfUtCPC9zcGFuPlxuICAgICAgICBgO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG4vLyA9PT0gU01BUlQgU0VBUkNIIE1PREFMID09PVxuXG5leHBvcnQgY2xhc3MgU21hcnRTZWFyY2hNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgcHJpdmF0ZSB2YXVsdENsaWVudDogVmF1bHRNYW5hZ2VtZW50Q2xpZW50O1xuICBwcml2YXRlIGluaXRpYWxRdWVyeT86IHN0cmluZztcbiAgcHJpdmF0ZSBzZWFyY2hUeXBlPzogU2VhcmNoVHlwZTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBwbHVnaW4udmF1bHRDbGllbnQ7XG4gIH1cblxuICBzZXRJbml0aWFsUXVlcnkocXVlcnk6IHN0cmluZywgdHlwZT86IFNlYXJjaFR5cGUpOiB0aGlzIHtcbiAgICB0aGlzLmluaXRpYWxRdWVyeSA9IHF1ZXJ5O1xuICAgIHRoaXMuc2VhcmNoVHlwZSA9IHR5cGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdzbWFydC1zZWFyY2gtbW9kYWwnKTtcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+UjSBTbWFydCBWYXVsdCBTZWFyY2gnIH0pO1xuXG4gICAgLy8gU2VhcmNoIGZvcm1cbiAgICBjb25zdCBzZWFyY2hGb3JtID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1mb3JtJyB9KTtcbiAgICBcbiAgICBjb25zdCBxdWVyeUlucHV0ID0gc2VhcmNoRm9ybS5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0VudGVyIHNlYXJjaCBxdWVyeS4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtcXVlcnktaW5wdXQnXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMuaW5pdGlhbFF1ZXJ5KSB7XG4gICAgICBxdWVyeUlucHV0LnZhbHVlID0gdGhpcy5pbml0aWFsUXVlcnk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoVHlwZVNlbGVjdCA9IHNlYXJjaEZvcm0uY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnc2VhcmNoLXR5cGUtc2VsZWN0JyB9KTtcbiAgICBjb25zdCBzZWFyY2hUeXBlcyA9IFtcbiAgICAgIHsgdmFsdWU6ICdjb21wcmVoZW5zaXZlJywgbGFiZWw6ICdDb21wcmVoZW5zaXZlJyB9LFxuICAgICAgeyB2YWx1ZTogJ2NvbnRlbnQnLCBsYWJlbDogJ0NvbnRlbnQnIH0sXG4gICAgICB7IHZhbHVlOiAnZmlsZW5hbWUnLCBsYWJlbDogJ0ZpbGVuYW1lJyB9LFxuICAgICAgeyB2YWx1ZTogJ3RhZ3MnLCBsYWJlbDogJ1RhZ3MnIH0sXG4gICAgICB7IHZhbHVlOiAnbGlua3MnLCBsYWJlbDogJ0xpbmtzJyB9XG4gICAgXTtcbiAgICBcbiAgICBzZWFyY2hUeXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gc2VhcmNoVHlwZVNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogdHlwZS52YWx1ZSB9KTtcbiAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHR5cGUubGFiZWw7XG4gICAgICBpZiAodHlwZS52YWx1ZSA9PT0gKHRoaXMuc2VhcmNoVHlwZSB8fCAnY29tcHJlaGVuc2l2ZScpKSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzZWFyY2hCdXR0b24gPSBzZWFyY2hGb3JtLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ1NlYXJjaCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHNlYXJjaC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBSZXN1bHRzIGNvbnRhaW5lclxuICAgIGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLXJlc3VsdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIFNlYXJjaCBmdW5jdGlvblxuICAgIGNvbnN0IHBlcmZvcm1TZWFyY2ggPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5SW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCFxdWVyeSkge1xuICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSBzZWFyY2ggcXVlcnknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWFyY2hCdXR0b24udGV4dENvbnRlbnQgPSAnU2VhcmNoaW5nLi4uJztcbiAgICAgIHNlYXJjaEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IHJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWxvYWRpbmcnIH0pO1xuICAgICAgbG9hZGluZ0VsLnRleHRDb250ZW50ID0gJ/CflI0gU2VhcmNoaW5nIHZhdWx0Li4uJztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuc2VhcmNoVmF1bHQoe1xuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHNlYXJjaF90eXBlOiBzZWFyY2hUeXBlU2VsZWN0LnZhbHVlIGFzIFNlYXJjaFR5cGUsXG4gICAgICAgICAgbWF4X3Jlc3VsdHM6IHRoaXMucGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uc2VhcmNoUmVzdWx0c0xpbWl0IHx8IDUwLFxuICAgICAgICAgIGluY2x1ZGVfY29udGVudDogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2FkaW5nRWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2VhcmNoUmVzdWx0cyhyZXN1bHRzQ29udGFpbmVyLCByZXN1bHRzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgbG9hZGluZ0VsLnRleHRDb250ZW50ID0gJ+KdjCBTZWFyY2ggZmFpbGVkJztcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNlYXJjaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZWFyY2gnO1xuICAgICAgICBzZWFyY2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgc2VhcmNoQnV0dG9uLm9uY2xpY2sgPSBwZXJmb3JtU2VhcmNoO1xuICAgIHF1ZXJ5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIHBlcmZvcm1TZWFyY2goKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEF1dG8tc2VhcmNoIGlmIGluaXRpYWwgcXVlcnkgcHJvdmlkZWRcbiAgICBpZiAodGhpcy5pbml0aWFsUXVlcnkpIHtcbiAgICAgIHBlcmZvcm1TZWFyY2goKTtcbiAgICB9XG5cbiAgICAvLyBGb2N1cyBpbnB1dFxuICAgIHF1ZXJ5SW5wdXQuZm9jdXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2VhcmNoUmVzdWx0cyhjb250YWluZXI6IEhUTUxFbGVtZW50LCByZXN1bHRzOiBWYXVsdFNlYXJjaFJlc3BvbnNlKSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogYFNlYXJjaCBSZXN1bHRzICgke3Jlc3VsdHMudG90YWxfZm91bmR9KWAgfSk7XG5cbiAgICBpZiAocmVzdWx0cy5pbnNpZ2h0cykge1xuICAgICAgY29uc3QgaW5zaWdodHNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtaW5zaWdodHMnIH0pO1xuICAgICAgaW5zaWdodHNFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbnNpZ2h0cy1oZWFkZXJcIj7wn6egIEFJIEluc2lnaHRzPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbnNpZ2h0cy1jb250ZW50XCI+JHtyZXN1bHRzLmluc2lnaHRzfTwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0cy5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICduby1yZXN1bHRzJyxcbiAgICAgICAgdGV4dDogJ05vIHJlc3VsdHMgZm91bmQuIFRyeSBhIGRpZmZlcmVudCBzZWFyY2ggdGVybSBvciB0eXBlLicgXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtcmVzdWx0cy1saXN0JyB9KTtcbiAgICBcbiAgICByZXN1bHRzLnJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0RWwgPSByZXN1bHRzTGlzdC5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtcmVzdWx0JyB9KTtcbiAgICAgIFxuICAgICAgcmVzdWx0RWwuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LWhlYWRlclwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVzdWx0LWZpbGUtbmFtZVwiPiR7cmVzdWx0LmZpbGVfbmFtZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHQtbWF0Y2gtdHlwZVwiPiR7cmVzdWx0Lm1hdGNoX3R5cGV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVzdWx0LXNjb3JlXCI+JHsocmVzdWx0LnNjb3JlICogMTAwKS50b0ZpeGVkKDApfSU8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LXBhdGhcIj4ke3Jlc3VsdC5maWxlX3BhdGh9PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtcHJldmlld1wiPiR7cmVzdWx0LnByZXZpZXd9PC9kaXY+XG4gICAgICAgICR7cmVzdWx0Lm1hdGNoZXMubGVuZ3RoID4gMCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LW1hdGNoZXNcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+TWF0Y2hlczo8L3N0cm9uZz4gJHtyZXN1bHQubWF0Y2hlcy5qb2luKCcsICcpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgIDogJyd9XG4gICAgICBgO1xuXG4gICAgICAvLyBDbGljayB0byBvcGVuIGZpbGVcbiAgICAgIHJlc3VsdEVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocmVzdWx0LmZpbGVfcGF0aCwgJycpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gU3VnZ2VzdGVkIHF1ZXJpZXNcbiAgICBpZiAocmVzdWx0cy5zdWdnZXN0ZWRfcXVlcmllcyAmJiByZXN1bHRzLnN1Z2dlc3RlZF9xdWVyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGVkLXF1ZXJpZXMnIH0pO1xuICAgICAgc3VnZ2VzdGlvbnNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfwn5KhIFN1Z2dlc3RlZCBRdWVyaWVzJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3VnZ2VzdGlvbnNMaXN0ID0gc3VnZ2VzdGlvbnNFbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9ucy1saXN0JyB9KTtcbiAgICAgIHJlc3VsdHMuc3VnZ2VzdGVkX3F1ZXJpZXMuZm9yRWFjaChzdWdnZXN0aW9uID0+IHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkVsID0gc3VnZ2VzdGlvbnNMaXN0LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgIHRleHQ6IHN1Z2dlc3Rpb24sXG4gICAgICAgICAgY2xzOiAnc3VnZ2VzdGlvbi1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBzdWdnZXN0aW9uRWwub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBxdWVyeUlucHV0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnNlYXJjaC1xdWVyeS1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKHF1ZXJ5SW5wdXQpIHtcbiAgICAgICAgICAgIHF1ZXJ5SW5wdXQudmFsdWUgPSBzdWdnZXN0aW9uO1xuICAgICAgICAgICAgcXVlcnlJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCdrZXlwcmVzcycsIHsga2V5OiAnRW50ZXInIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbi8vID09PSBGSUxFIE9QRVJBVElPTlMgTU9EQUwgPT09XG5cbmV4cG9ydCBjbGFzcyBGaWxlT3BlcmF0aW9uc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHZhdWx0Q2xpZW50OiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgaW5pdGlhbFBhdGg/OiBzdHJpbmc7XG4gIHByaXZhdGUgb3BlcmF0aW9uPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFueSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdENsaWVudCA9IHBsdWdpbi52YXVsdENsaWVudDtcbiAgfVxuXG4gIHNldEluaXRpYWxQYXRoKHBhdGg6IHN0cmluZyk6IHRoaXMge1xuICAgIHRoaXMuaW5pdGlhbFBhdGggPSBwYXRoO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0T3BlcmF0aW9uKG9wZXJhdGlvbjogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdmaWxlLW9wZXJhdGlvbnMtbW9kYWwnKTtcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+TgSBGaWxlIE9wZXJhdGlvbnMgTWFuYWdlcicgfSk7XG5cbiAgICAvLyBPcGVyYXRpb24gc2VsZWN0aW9uXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ09wZXJhdGlvbicpXG4gICAgICAuc2V0RGVzYygnU2VsZWN0IHRoZSBmaWxlIG9wZXJhdGlvbiB0byBwZXJmb3JtJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAuYWRkT3B0aW9uKCdjcmVhdGUnLCAnQ3JlYXRlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCd1cGRhdGUnLCAnVXBkYXRlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCdkZWxldGUnLCAnRGVsZXRlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCdtb3ZlJywgJ01vdmUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ2NvcHknLCAnQ29weSBGaWxlJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMub3BlcmF0aW9uIHx8ICdjcmVhdGUnKVxuICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMub3BlcmF0aW9uID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy51cGRhdGVPcGVyYXRpb25Gb3JtKCk7XG4gICAgICAgIH0pKTtcblxuICAgIC8vIE9wZXJhdGlvbiBmb3JtIGNvbnRhaW5lclxuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnb3BlcmF0aW9uLWZvcm0nIH0pO1xuICAgIHRoaXMudXBkYXRlT3BlcmF0aW9uRm9ybSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVPcGVyYXRpb25Gb3JtKCkge1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcub3BlcmF0aW9uLWZvcm0nKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIWZvcm1Db250YWluZXIpIHJldHVybjtcbiAgICBcbiAgICBmb3JtQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLm9wZXJhdGlvbiB8fCAnY3JlYXRlJztcbiAgICBcbiAgICAvLyBGaWxlIHBhdGggaW5wdXRcbiAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0ZpbGUgUGF0aCcpXG4gICAgICAuc2V0RGVzYygnUGF0aCB0byB0aGUgZmlsZSAoaW5jbHVkaW5nIGZpbGVuYW1lKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdwYXRoL3RvL2ZpbGUubWQnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5pbml0aWFsUGF0aCB8fCAnJylcbiAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHRoaXMuaW5pdGlhbFBhdGggPSB2YWx1ZSkpO1xuXG4gICAgLy8gQWRkaXRpb25hbCBpbnB1dHMgYmFzZWQgb24gb3BlcmF0aW9uXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ21vdmUnIHx8IG9wZXJhdGlvbiA9PT0gJ2NvcHknKSB7XG4gICAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnTmV3IFBhdGgnKVxuICAgICAgICAuc2V0RGVzYygnRGVzdGluYXRpb24gcGF0aCBmb3IgdGhlIGZpbGUnKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ25ldy9wYXRoL3RvL2ZpbGUubWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2NyZWF0ZScgfHwgb3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NvbnRlbnQnKVxuICAgICAgICAuc2V0RGVzYygnRmlsZSBjb250ZW50JylcbiAgICAgICAgLmFkZFRleHRBcmVhKHRleHRhcmVhID0+IHtcbiAgICAgICAgICB0ZXh0YXJlYS5zZXRQbGFjZWhvbGRlcignRW50ZXIgZmlsZSBjb250ZW50Li4uJyk7XG4gICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2NyZWF0ZScpIHtcbiAgICAgICAgICAgIHRleHRhcmVhLnNldFZhbHVlKCcjIE5ldyBGaWxlXFxuXFxuQ29udGVudCBnb2VzIGhlcmUuLi4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEJhY2t1cCBvcHRpb25cbiAgICBpZiAob3BlcmF0aW9uICE9PSAnY3JlYXRlJykge1xuICAgICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NyZWF0ZSBCYWNrdXAnKVxuICAgICAgICAuc2V0RGVzYygnQ3JlYXRlIGEgYmFja3VwIGJlZm9yZSBwZXJmb3JtaW5nIHRoZSBvcGVyYXRpb24nKVxuICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodHJ1ZSkpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dChgRXhlY3V0ZSAke29wZXJhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG9wZXJhdGlvbi5zbGljZSgxKX1gKVxuICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5leGVjdXRlT3BlcmF0aW9uKCkpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZU9wZXJhdGlvbigpIHtcbiAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLm9wZXJhdGlvbiB8fCAnY3JlYXRlJztcbiAgICBjb25zdCBwYXRoSW5wdXQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtwbGFjZWhvbGRlcio9XCJwYXRoL3RvL2ZpbGVcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IG5ld1BhdGhJbnB1dCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyKj1cIm5ldy9wYXRoXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBjb250ZW50VGV4dGFyZWEgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgY29uc3QgYmFja3VwVG9nZ2xlID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIGlmICghcGF0aElucHV0Py52YWx1ZSkge1xuICAgICAgbmV3IE5vdGljZSgnRmlsZSBwYXRoIGlzIHJlcXVpcmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdDogRmlsZU9wZXJhdGlvblJlcXVlc3QgPSB7XG4gICAgICBvcGVyYXRpb246IG9wZXJhdGlvbiBhcyBhbnksXG4gICAgICBmaWxlX3BhdGg6IHBhdGhJbnB1dC52YWx1ZSxcbiAgICAgIGJhY2t1cDogYmFja3VwVG9nZ2xlPy5jaGVja2VkID8/IHRydWVcbiAgICB9O1xuXG4gICAgaWYgKG5ld1BhdGhJbnB1dD8udmFsdWUpIHtcbiAgICAgIHJlcXVlc3QubmV3X3BhdGggPSBuZXdQYXRoSW5wdXQudmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRlbnRUZXh0YXJlYT8udmFsdWUpIHtcbiAgICAgIHJlcXVlc3QuY29udGVudCA9IGNvbnRlbnRUZXh0YXJlYS52YWx1ZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbmV3IE5vdGljZShgUGVyZm9ybWluZyAke29wZXJhdGlvbn0uLi5gKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQucGVyZm9ybUZpbGVPcGVyYXRpb24ocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYOKchSAke29wZXJhdGlvbn0gc3VjY2Vzc2Z1bDogJHtyZXN1bHQubWVzc2FnZX1gKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBuZXcgTm90aWNlKGDinYwgJHtvcGVyYXRpb259IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldywgVEZpbGUsIEVkaXRvclBvc2l0aW9uLCByZXF1ZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9ULCBWYXVsdFBpbG90VmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQiwgVmF1bHRQaWxvdEZ1bGxUYWJWaWV3IH0gZnJvbSAnLi9mdWxsLXRhYi12aWV3JztcbmltcG9ydCB7IENoYXRNb2RhbCB9IGZyb20gJy4vY2hhdC1tb2RhbCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGFsIH0gZnJvbSAnLi93b3JrZmxvdy1tb2RhbCc7XG5pbXBvcnQgeyBFdm9BZ2VudFhDbGllbnQgfSBmcm9tICcuL2FwaS1jbGllbnQnO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzLCBDb3BpbG90UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZldGNoU2NoZWR1bGUsIGluamVjdFNjaGVkdWxlLCB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24gfSBmcm9tICcuL3BsYW5uZXInO1xuaW1wb3J0IHsgc2V0QXBwIH0gZnJvbSAnLi92YXVsdC11dGlscyc7XG5pbXBvcnQgeyBWYXVsdE1hbmFnZW1lbnRDbGllbnQgfSBmcm9tICcuL3ZhdWx0LWFwaS1jbGllbnQnO1xuaW1wb3J0IHsgY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMgfSBmcm9tICcuL3ZhdWx0LWNvbW1hbmRzJztcbmltcG9ydCB7IFxuICBWYXVsdFN0cnVjdHVyZU1vZGFsLCBcbiAgU21hcnRTZWFyY2hNb2RhbCwgXG4gIEZpbGVPcGVyYXRpb25zTW9kYWxcbn0gZnJvbSAnLi92YXVsdC1tb2RhbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYXVsdFBpbG90UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3MhOiBWYXVsdFBpbG90U2V0dGluZ3M7XG4gIGFwaUNsaWVudCE6IEV2b0FnZW50WENsaWVudDtcbiAgdmF1bHRDbGllbnQhOiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgd2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIHByaXZhdGUgY29waWxvdEVuYWJsZWQgPSBmYWxzZTtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIEluaXRpYWxpemUgYXBwIGluc3RhbmNlIGZvciB2YXVsdC11dGlsc1xuICAgIHNldEFwcCh0aGlzLmFwcCk7XG5cbiAgICAvLyBJbml0aWFsaXplIEFQSSBjbGllbnRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG5cbiAgICAvLyBJbml0aWFsaXplIHZhdWx0IG1hbmFnZW1lbnQgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICB9XG5cbiAgICAvLyBUZXN0IGJhY2tlbmQgY29ubmVjdGlvblxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWFpbiBoZWFsdGggY2hlY2sgZmFpbGVkIHdpdGggNDAwLCB0cnlpbmcgYWx0ZXJuYXRpdmUgbWV0aG9kJyk7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KchSBWYXVsdFBpbG90IGNvbm5lY3RlZCB0byBFdm9BZ2VudFgnLCAzMDAwKTtcbiAgICAgICAgLy8gQ29ubmVjdCBXZWJTb2NrZXQgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQpIHtcbiAgICAgICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGZhaWxlZDonLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBFdm9BZ2VudFggYmFja2VuZCBvZmZsaW5lIC0gc29tZSBmZWF0dXJlcyBtYXkgbm90IHdvcmsnLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGVycm9yOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBDYW5ub3QgY29ubmVjdCB0byBFdm9BZ2VudFggYmFja2VuZCcsIDUwMDApO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdGVyIHZpZXdzXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfVkFVTFRQSUxPVCxcbiAgICAgIChsZWFmKSA9PiBuZXcgVmF1bHRQaWxvdFZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuICAgIFxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RGdWxsVGFiVmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICBjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ2JvdCcsICdWYXVsdFBpbG90JywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKGV2dC5jdHJsS2V5IHx8IGV2dC5tZXRhS2V5KSB7XG4gICAgICAgIC8vIE9wZW4gZnVsbCB0YWIgdmlldyBvbiBDdHJsL0NtZCArIGNsaWNrXG4gICAgICAgIHRoaXMuYWN0aXZhdGVGdWxsVGFiVmlldygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGVmYXVsdCBhY3Rpb246IG9wZW4gY2hhdCBtb2RhbFxuICAgICAgICB0aGlzLm9wZW5DaGF0TW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtcmliYm9uLWNsYXNzJyk7XG4gICAgcmliYm9uSWNvbkVsLnRpdGxlID0gJ1ZhdWx0UGlsb3QgKEN0cmwrY2xpY2sgZm9yIERhc2hib2FyZCknO1xuXG4gICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLWNoYXQnLFxuICAgICAgbmFtZTogJ09wZW4gQ2hhdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuQ2hhdE1vZGFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2V4ZWN1dGUtd29ya2Zsb3cnLFxuICAgICAgbmFtZTogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlbldvcmtmbG93TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYW5hbHl6ZS12YXVsdCcsXG4gICAgICBuYW1lOiAnQW5hbHl6ZSBDdXJyZW50IFZhdWx0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFuYWx5emVWYXVsdCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdjb3BpbG90LWNvbXBsZXRlJyxcbiAgICAgIG5hbWU6ICdHZXQgQUkgQ29tcGxldGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLmdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3F1aWNrLWNoYXQnLFxuICAgICAgbmFtZTogJ1F1aWNrIENoYXQgd2l0aCBTZWxlY3Rpb24nLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5xdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tdGFza3MnLFxuICAgICAgbmFtZTogJ1BsYW4gVGFza3MgZnJvbSBOb3RlJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMucGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi1teS1kYXknLFxuICAgICAgbmFtZTogJ1BsYW4gTXkgRGF5JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnBsYW5NeURheSgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLXZhdWx0cGlsb3QtdmlldycsXG4gICAgICBuYW1lOiAnT3BlbiBWYXVsdFBpbG90IFZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tdmF1bHRwaWxvdC1mdWxsLXRhYicsXG4gICAgICBuYW1lOiAnT3BlbiBWYXVsdFBpbG90IERhc2hib2FyZCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZUZ1bGxUYWJWaWV3KClcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIHZhdWx0IG1hbmFnZW1lbnQgY29tbWFuZHNcbiAgICB0aGlzLnJlZ2lzdGVyVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcblxuICAgIC8vIFJlZ2lzdGVyIGVkaXRvciBldmVudHMgZm9yIGNvcGlsb3RcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90ICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVmF1bHRQaWxvdFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIpO1xuICAgIHRoaXMuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IE1hbmFnZW1lbnRcbiAgY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHJldHVybjtcblxuICAgIHRoaXMuYXBpQ2xpZW50LmNvbm5lY3RXZWJTb2NrZXQoe1xuICAgICAgb25DaGF0OiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgcmVhbC10aW1lIGNoYXQgdXBkYXRlc1xuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNoYXQgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uV29ya2Zsb3dQcm9ncmVzczogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3c6ICR7ZGF0YS5zdGVwfWAsIDIwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29waWxvdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGNvcGlsb3Qgc3VnZ2VzdGlvbnNcbiAgICAgICAgdGhpcy5oYW5kbGVDb3BpbG90U3VnZ2VzdGlvbihkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvblZhdWx0U3luYzogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHZhdWx0IHN5bmNocm9uaXphdGlvblxuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHQgc3luYyB1cGRhdGU6JywgZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25JbnRlbnREZWJ1ZzogKGRlYnVnKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnRlbnQgZGVidWcgaW5mbyAob25seSBpbiBkZWJ1ZyBtb2RlKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcgJiYgdGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSW50ZW50IGRlYnVnOicsIGRlYnVnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICBuZXcgTm90aWNlKGBXZWJTb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCwgNTAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGNvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25EaXNjb25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICB0aGlzLmFwaUNsaWVudC5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldENvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIE1vZGFsIE1hbmFnZW1lbnRcbiAgb3BlbkNoYXRNb2RhbCgpIHtcbiAgICBuZXcgQ2hhdE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICBvcGVuV29ya2Zsb3dNb2RhbCgpIHtcbiAgICBuZXcgV29ya2Zsb3dNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgLy8gQ29tbWFuZCBJbXBsZW1lbnRhdGlvbnNcbiAgYXN5bmMgYW5hbHl6ZVZhdWx0KCkge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ0FuYWx5emluZyB2YXVsdC4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIC8vIEluY2x1ZGUgdXAgdG8gMTAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAxMCkpIHtcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICBjb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7ZmlsZUNvbnRlbnR9XFxuXFxuYDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5hbmFseXplVmF1bHRDb250ZXh0KHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYW5hbHlzaXNfdHlwZTogJ2luc2lnaHRzJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuYWx5c2lzIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0IEFuYWx5c2lzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgYW5hbHlzaXNDb250ZW50ID0gYCMgVmF1bHQgQW5hbHlzaXMgLSAke3RpbWVzdGFtcH1cXG5cXG5gO1xuICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEFuYWx5c2lzXFxuXFxuJHtyZXNwb25zZS5kYXRhLmFuYWx5c2lzfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnNpZ2h0cyAmJiByZXNwb25zZS5kYXRhLmluc2lnaHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEtleSBJbnNpZ2h0c1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5mb3JFYWNoKGluc2lnaHQgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7aW5zaWdodH1cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSAnXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucyAmJiByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBSZWNvbW1lbmRhdGlvbnNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke3JlY31cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBhbmFseXNpc0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBWYXVsdCBhbmFseXNpcyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdBbmFseXNpcyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYEFuYWx5c2lzIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0NvcGlsb3QgaXMgZGlzYWJsZWQgaW4gc2V0dGluZ3MnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgdGV4dEJlZm9yZUN1cnNvciA9IGN1cnJlbnRMaW5lLnN1YnN0cmluZygwLCBjdXJzb3IuY2gpO1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICAvLyBDbGllbnQtc2lkZSB2YWxpZGF0aW9uIHRvIHByZXZlbnQgNDIyIGVycm9yc1xuICAgIGlmICghZnVsbFRleHQgfHwgZnVsbFRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnQ2Fubm90IGNvbXBsZXRlIGVtcHR5IHRleHQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bicsXG4gICAgICAgIGNvbnRleHQ6IHRleHRCZWZvcmVDdXJzb3JcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCBjb21wbGV0aW9uIGF0IGN1cnNvclxuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKHJlc3BvbnNlLmRhdGEuY29tcGxldGlvbiwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQ29tcGxldGlvbiBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBxdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyB0ZXh0IHNlbGVjdGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY2hhdCh7XG4gICAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgZXhwbGFpbiBvciBhbmFseXplIHRoaXMgdGV4dDogXCIke3NlbGVjdGlvbn1cImAsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgcmVzcG9uc2UgYmVsb3cgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgICAgIGNvbnN0IG5ld0xpbmUgPSBgXFxuXFxuKipWYXVsdFBpbG90IEFuYWx5c2lzOioqXFxuJHtyZXNwb25zZS5kYXRhLnJlc3BvbnNlfVxcblxcbmA7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3TGluZSwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQW5hbHlzaXMgaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gY29udGVudCB0byBhbmFseXplJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgdGFza3MuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnBsYW5UYXNrcyh7XG4gICAgICAgIGdvYWw6IGBDcmVhdGUgYSB0YXNrIHBsYW4gYmFzZWQgb24gdGhpcyBub3RlOiAke2FjdGl2ZUZpbGU/Lm5hbWUgfHwgJ1VudGl0bGVkJ31gLFxuICAgICAgICBjb250ZXh0OiBjb250ZW50LFxuICAgICAgICB0aW1lZnJhbWU6ICcxIHdlZWsnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgdGFzayBwbGFuIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFRhc2sgUGxhbiAtICR7YWN0aXZlRmlsZT8uYmFzZW5hbWUgfHwgJ1VudGl0bGVkJ30gLSAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRhc2tDb250ZW50ID0gYCMgJHtyZXNwb25zZS5kYXRhLnBsYW4udGl0bGV9XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7cmVzcG9uc2UuZGF0YS5wbGFuLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAqKkVzdGltYXRlZCBEdXJhdGlvbjoqKiAke3Jlc3BvbnNlLmRhdGEucGxhbi5lc3RpbWF0ZWRfZHVyYXRpb259XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnBsYW4udGFza3MgJiYgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgVGFza3NcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5mb3JFYWNoKCh0YXNrOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGFzay5zdGF0dXMgPT09ICdjb21wbGV0ZWQnID8gJ1t4XScgOiAnWyBdJztcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAke2NoZWNrYm94fSAqKiR7dGFzay50aXRsZX0qKiAoJHt0YXNrLnByaW9yaXR5fSBwcmlvcml0eSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgICR7dGFzay5kZXNjcmlwdGlvbn1cXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgICpFc3RpbWF0ZWQgdGltZTogJHt0YXNrLmVzdGltYXRlZF90aW1lfSpcXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcyAmJiByZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAjIyBNaWxlc3RvbmVzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMuZm9yRWFjaCgobWlsZXN0b25lOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAtICoqJHttaWxlc3RvbmUudGl0bGV9KiogKCR7bWlsZXN0b25lLnRhcmdldF9kYXRlfSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgJHttaWxlc3RvbmUuZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgdGFza0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW4gc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnVGFzayBwbGFubmluZyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFRhc2sgcGxhbm5pbmcgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhbk15RGF5KCkge1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIG5vdGXigJRvcGVuIHRvZGF5XFwncyBkYWlseSBub3RlIGZpcnN0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHlvdXIgZGF5Li4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUmVhZCB0aGUgZW50aXJlIGZpbGUgY29udGVudFxuICAgICAgY29uc3QgZmlsZVRleHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCBzY2hlZHVsZSBmcm9tIEFQSVxuICAgICAgY29uc3QgeyBzY2hlZHVsZU1hcmtkb3duLCBoZWFkbGluZSB9ID0gYXdhaXQgZmV0Y2hTY2hlZHVsZShmaWxlVGV4dCk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHRoZSByZXR1cm5lZCBzY2hlZHVsZVxuICAgICAgaWYgKCF2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNjaGVkdWxlIGRhdGEgcmVjZWl2ZWQgZnJvbSBBUEknKTtcbiAgICAgIH1cblxuICAgICAgLy8gSW5qZWN0IHRoZSBzY2hlZHVsZSBpbnRvIHRoZSBub3RlXG4gICAgICBjb25zdCB1cGRhdGVkVGV4dCA9IGluamVjdFNjaGVkdWxlKGZpbGVUZXh0LCBzY2hlZHVsZU1hcmtkb3duKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBmaWxlXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZFRleHQpO1xuXG4gICAgICAvLyBIaWRlIHRoZSBwcm9ncmVzcyBub3RpY2VcbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIC8vIFNob3cgc3VjY2VzcyBub3RpY2VcbiAgICAgIGNvbnN0IHN1Y2Nlc3NNZXNzYWdlID0gaGVhZGxpbmUgPyBgJHtoZWFkbGluZX0g4pyFYCA6ICdTY2hlZHVsZSBpbnNlcnRlZCDinIUnO1xuICAgICAgbmV3IE5vdGljZShzdWNjZXNzTWVzc2FnZSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0eXBlcyBvZiBlcnJvcnNcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdKU09OJykpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmVyIEFQSSBlcnJvcjogSW52YWxpZCByZXNwb25zZSBmb3JtYXQnKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uZXIgQVBJIGVycm9yOiBVbmFibGUgdG8gY29ubmVjdCB0byBsb2NhbGhvc3Q6MzAwMCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYFBsYW5uZXIgQVBJIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uZXIgQVBJIGVycm9yOiBVbmtub3duIGVycm9yIG9jY3VycmVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgYXdhaXQgcmlnaHRMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgdHlwZTogVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWF2ZXNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlRnVsbFRhYlZpZXcoKSB7XG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQik7XG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyB0YWIgaW4gdGhlIG1haW4gd29ya3NwYWNlXG4gICAgICBjb25zdCBuZXdMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuICAgICAgaWYgKG5ld0xlYWYpIHtcbiAgICAgICAgYXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCLFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT0gVkFVTFQgTUFOQUdFTUVOVCBNRVRIT0RTID09PVxuXG4gIGluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSByZXR1cm47XG4gICAgXG4gICAgdGhpcy52YXVsdENsaWVudCA9IG5ldyBWYXVsdE1hbmFnZW1lbnRDbGllbnQoXG4gICAgICB0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsXG4gICAgICB0aGlzLnNldHRpbmdzLmFwaUtleVxuICAgICk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHQgbWFuYWdlbWVudCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGVWYXVsdE1hbmFnZW1lbnQoKSB7XG4gICAgdGhpcy52YXVsdENsaWVudCA9IG51bGwgYXMgYW55O1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IG1hbmFnZW1lbnQgZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCkge1xuICAgIGNvbnN0IGNvbW1hbmRzID0gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcbiAgICBjb21tYW5kcy5mb3JFYWNoKGNvbW1hbmQgPT4ge1xuICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgLi4uY29tbWFuZCxcbiAgICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2s/LmJpbmQodGhpcyksXG4gICAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrPy5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1vZGFsIG9wZW5pbmcgbWV0aG9kcyBmb3IgdmF1bHQgbWFuYWdlbWVudFxuICBvcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCgpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBuZXcgVmF1bHRTdHJ1Y3R1cmVNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlblNtYXJ0U2VhcmNoTW9kYWwocXVlcnk/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBTbWFydFNlYXJjaE1vZGFsKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBpZiAocXVlcnkpIG1vZGFsLnNldEluaXRpYWxRdWVyeShxdWVyeSwgdHlwZSBhcyBhbnkpO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKHBhdGg/OiBzdHJpbmcsIG9wZXJhdGlvbj86IHN0cmluZykge1xuICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVPcGVyYXRpb25zTW9kYWwodGhpcy5hcHAsIHRoaXMpO1xuICAgIGlmIChwYXRoKSBtb2RhbC5zZXRJbml0aWFsUGF0aChwYXRoKTtcbiAgICBpZiAob3BlcmF0aW9uKSBtb2RhbC5zZXRPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCgpIHtcbiAgICBuZXcgTm90aWNlKCdWYXVsdCBvcmdhbml6ZXIgbW9kYWwgbm90IHlldCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgb3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsKCkge1xuICAgIG5ldyBOb3RpY2UoJ0JhdGNoIG9wZXJhdGlvbnMgbW9kYWwgbm90IHlldCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgLy8gPT09IEVORCBWQVVMVCBNQU5BR0VNRU5UIE1FVEhPRFMgPT09XG5cbiAgLy8gQXV0by1jb21wbGV0aW9uIGhhbmRsaW5nXG4gIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbS1jb250ZW50JykpIHJldHVybjtcblxuICAgIC8vIE9ubHkgdHJpZ2dlciBvbiBzcGVjaWZpYyBrZXlzIGFuZCBjb25kaXRpb25zXG4gICAgaWYgKCF0aGlzLnNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUoZXZlbnQpKSByZXR1cm47XG5cbiAgICAvLyBEZWJvdW5jZSBhdXRvLWNvbXBsZXRpb24gcmVxdWVzdHMgd2l0aCBsb25nZXIgZGVsYXlcbiAgICBjbGVhclRpbWVvdXQoKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0KTtcbiAgICAodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckF1dG9Db21wbGV0aW9uKCk7XG4gICAgfSwgMzAwMCk7IC8vIEluY3JlYXNlZCB0byAzIHNlY29uZHNcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZShldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIC8vIERvbid0IHRyaWdnZXIgb24gbmF2aWdhdGlvbiBvciBtb2RpZmllciBrZXlzXG4gICAgY29uc3Qgbm9uVHJpZ2dlcktleXMgPSBbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ1RhYicsICdTaGlmdCcsICdDb250cm9sJywgJ0FsdCcsICdNZXRhJywgJ0VzY2FwZSddO1xuICAgIGlmIChub25UcmlnZ2VyS2V5cy5pbmRleE9mKGV2ZW50LmtleSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgXG4gICAgLy8gT25seSB0cmlnZ2VyIGF0IHRoZSBlbmQgb2YgYSBsaW5lXG4gICAgaWYgKGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHNlbnRlbmNlLWVuZGluZyB0cmlnZ2Vyc1xuICAgIGNvbnN0IHRyaWdnZXJDaGFycyA9IFsnLicsICchJywgJz8nLCAnOicsICdcXG4nXTtcbiAgICBjb25zdCBsYXN0Q2hhciA9IGN1cnJlbnRMaW5lLnNsaWNlKC0xKTtcbiAgICBcbiAgICAvLyBUcmlnZ2VyIGFmdGVyIHNlbnRlbmNlIGVuZGluZ3Mgd2l0aCBzcGFjZVxuICAgIGlmICh0cmlnZ2VyQ2hhcnMuaW5kZXhPZihsYXN0Q2hhcikgIT09IC0xICYmIGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJpZ2dlciBhZnRlciBFbnRlciBrZXkgKG5ldyBsaW5lKVxuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgY3VycmVudExpbmUudHJpbSgpLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQXV0b0NvbXBsZXRpb24oKSB7XG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm47XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBcbiAgICAvLyBNb3JlIHJlc3RyaWN0aXZlIGNvbmRpdGlvbnMgZm9yIGF1dG8tY29tcGxldGlvblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkubGVuZ3RoIDwgMTAgfHwgY3Vyc29yLmNoICE9PSBjdXJyZW50TGluZS5sZW5ndGgpIHJldHVybjtcbiAgICBcbiAgICAvLyBQcmV2ZW50IDQyMiBlcnJvcnMgZnJvbSBlbXB0eSB0ZXh0XG4gICAgaWYgKCFmdWxsVGV4dCB8fCBmdWxsVGV4dC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBBZGQgY29vbGRvd24gdG8gcHJldmVudCB0b28gZnJlcXVlbnQgcmVxdWVzdHNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGxhc3RSZXF1ZXN0ID0gKHRoaXMgYXMgYW55KS5sYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCB8fCAwO1xuICAgIGlmIChub3cgLSBsYXN0UmVxdWVzdCA8IDEwMDAwKSByZXR1cm47IC8vIDEwIHNlY29uZCBjb29sZG93blxuICAgIFxuICAgICh0aGlzIGFzIGFueSkubGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QgPSBub3c7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIChmb3Igbm93IGp1c3Qgc2hvdyBmaXJzdCBzdWdnZXN0aW9uKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBBdXRvLXN1Z2dlc3Rpb246ICR7cmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9uc1swXX1gLCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBmYWlsIGZvciBhdXRvLWNvbXBsZXRpb25cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRvLWNvbXBsZXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YTogQ29waWxvdFJlc3BvbnNlKSB7XG4gICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjb3BpbG90IHN1Z2dlc3Rpb25zIGZyb20gV2ViU29ja2V0XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBuZXcgTm90aWNlKGBMaXZlIHN1Z2dlc3Rpb246ICR7ZGF0YS5jb21wbGV0aW9ufWAsIDIwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldHRpbmdzIG1hbmFnZW1lbnRcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFQSSBjbGllbnQgaWYgVVJMIGNoYW5nZWRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG4gICAgXG4gICAgLy8gUmVpbml0aWFsaXplIHZhdWx0IG1hbmFnZW1lbnQgaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlY29ubmVjdCBXZWJTb2NrZXQgaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiAhdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBwbGFubmVyIGZlYXR1cmVcbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlc3BvbnNlIHtcbiAgc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nO1xuICBoZWFkbGluZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5uZXJSZXF1ZXN0IHtcbiAgbm90ZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZldGNoZXMgc2NoZWR1bGUgZGF0YSBmcm9tIHRoZSBwbGFubmVyIEFQSVxuICogQHBhcmFtIG5vdGVUZXh0IC0gVGhlIGZ1bGwgdGV4dCBvZiB0aGUgYWN0aXZlIG5vdGVcbiAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCB0aGUgc2NoZWR1bGUgbWFya2Rvd24gYW5kIGhlYWRsaW5lXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFNjaGVkdWxlKG5vdGVUZXh0OiBzdHJpbmcpOiBQcm9taXNlPFBsYW5uZXJSZXNwb25zZT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9wbGFuZGF5JyxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5vdGU6IG5vdGVUZXh0IH0pXG4gIH0pO1xuXG4gIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbn1cblxuLyoqXG4gKiBGaW5kcyBhbmQgZXh0cmFjdHMgdGhlIFNjaGVkdWxlIHNlY3Rpb24gZnJvbSBub3RlIHRleHRcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIGZ1bGwgbm90ZSB0ZXh0XG4gKiBAcmV0dXJucyBNYXRjaCByZXN1bHQgd2l0aCBzY2hlZHVsZSBzZWN0aW9uIGRldGFpbHMgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFNjaGVkdWxlU2VjdGlvbih0ZXh0OiBzdHJpbmcpOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCB7XG4gIC8vIEZpcnN0IHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGFyZSBleGFjdGx5IFwiIyMgU2NoZWR1bGVcIiAod2l0aCBvcHRpb25hbCBjb250ZW50IGFmdGVyKVxuICBsZXQgc2NoZWR1bGVSZWdleCA9IC8oXiMjXFxzK1NjaGVkdWxlXFxiW15cXG5dKlxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgbGV0IG1hdGNoID0gdGV4dC5tYXRjaChzY2hlZHVsZVJlZ2V4KTtcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuICBcbiAgLy8gSWYgbm8gZXhhY3QgbWF0Y2gsIHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGNvbnRhaW4gXCJTY2hlZHVsZVwiIGFzIGEgd29yZFxuICBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMqKD86LipcXHMpP1xcYlNjaGVkdWxlXFxiKD86XFxzLiopPyRcXG4pKFtcXHNcXFNdKj8pKD89XFxuIyNcXHN8JCkvaW07XG4gIHJldHVybiB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xufVxuXG4vKipcbiAqIEluamVjdHMgb3IgcmVwbGFjZXMgdGhlIHNjaGVkdWxlIHNlY3Rpb24gaW4gdGhlIG5vdGUgdGV4dFxuICogQHBhcmFtIG9yaWdpbmFsVGV4dCAtIFRoZSBvcmlnaW5hbCBub3RlIHRleHRcbiAqIEBwYXJhbSBzY2hlZHVsZU1hcmtkb3duIC0gVGhlIG5ldyBzY2hlZHVsZSBjb250ZW50IHRvIGluamVjdFxuICogQHJldHVybnMgVXBkYXRlZCBub3RlIHRleHQgd2l0aCB0aGUgbmV3IHNjaGVkdWxlIHNlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluamVjdFNjaGVkdWxlKG9yaWdpbmFsVGV4dDogc3RyaW5nLCBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBtYXRjaCA9IGZpbmRTY2hlZHVsZVNlY3Rpb24ob3JpZ2luYWxUZXh0KTtcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIC8vIFJlcGxhY2UgZXhpc3Rpbmcgc2NoZWR1bGUgc2VjdGlvbiAoa2VlcCBoZWFkaW5nLCByZXBsYWNlIGNvbnRlbnQpXG4gICAgY29uc3QgW2Z1bGxNYXRjaCwgaGVhZGluZ10gPSBtYXRjaDtcbiAgICBjb25zdCByZXBsYWNlbWVudCA9IGhlYWRpbmcgKyBzY2hlZHVsZU1hcmtkb3duO1xuICAgIHJldHVybiBvcmlnaW5hbFRleHQucmVwbGFjZShmdWxsTWF0Y2gsIHJlcGxhY2VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBBcHBlbmQgbmV3IHNjaGVkdWxlIHNlY3Rpb25cbiAgICBjb25zdCBuZXdTZWN0aW9uID0gYFxcblxcbiMjIFNjaGVkdWxlXFxuJHtzY2hlZHVsZU1hcmtkb3dufWA7XG4gICAgcmV0dXJuIG9yaWdpbmFsVGV4dCArIG5ld1NlY3Rpb247XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgdGhlIHNjaGVkdWxlIG1hcmtkb3duIGlzIHByb3Blcmx5IGZvcm1hdHRlZFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgc2NoZWR1bGUgY29udGVudCB0byB2YWxpZGF0ZVxuICogQHJldHVybnMgVHJ1ZSBpZiB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIEJhc2ljIHZhbGlkYXRpb24gLSBjaGVjayBpZiBpdCdzIG5vdCBlbXB0eSBhbmQgY29udGFpbnMgc29tZSBjb250ZW50XG4gIHJldHVybiBzY2hlZHVsZU1hcmtkb3duLnRyaW0oKS5sZW5ndGggPiAwO1xufVxuIiwiLyoqXG4gKiBDb21tYW5kIERlZmluaXRpb25zIGZvciBWYXVsdFBpbG90IFZhdWx0IE1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBDb21tYW5kLCBOb3RpY2UsIEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gRGVmaW5lIGEgdHlwZSBmb3IgcGx1Z2luIGluc3RhbmNlIHdpdGggdmF1bHQgbWFuYWdlbWVudCBtZXRob2RzXG5pbnRlcmZhY2UgVmF1bHRNYW5hZ2VtZW50UGx1Z2luIHtcbiAgdmF1bHRDbGllbnQ/OiBhbnk7XG4gIG9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsPzogKCkgPT4gdm9pZDtcbiAgb3BlblNtYXJ0U2VhcmNoTW9kYWw/OiAocXVlcnk/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9wZW5GaWxlT3BlcmF0aW9uc01vZGFsPzogKCkgPT4gdm9pZDtcbiAgb3BlblZhdWx0T3JnYW5pemVyTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWw/OiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIFZhdWx0IE1hbmFnZW1lbnQgQ29tbWFuZHNcbiAqIFRoZXNlIHdpbGwgYmUgcmVnaXN0ZXJlZCBpbiB0aGUgbWFpbiBwbHVnaW4gZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTogQ29tbWFuZFtdIHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJyxcbiAgICAgIG5hbWU6ICdWaWV3IFZhdWx0IFN0cnVjdHVyZScsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHZhdWx0IHN0cnVjdHVyZSBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblZhdWx0U3RydWN0dXJlTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBzdHJ1Y3R1cmUgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnLFxuICAgICAgbmFtZTogJ1NtYXJ0IFZhdWx0IFNlYXJjaCcsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHNtYXJ0IHNlYXJjaCBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdTbWFydCBzZWFyY2ggZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnLFxuICAgICAgbmFtZTogJ0ZpbGUgT3BlcmF0aW9ucyBNYW5hZ2VyJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgZmlsZSBvcGVyYXRpb25zIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuRmlsZU9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgb3BlcmF0aW9ucyBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LW9yZ2FuaXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBSSBWYXVsdCBPcmdhbml6YXRpb24nLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyB2YXVsdCBvcmdhbml6ZXIgbW9kYWwnKTtcbiAgICAgICAgaWYgKHRoaXMub3BlblZhdWx0T3JnYW5pemVyTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5WYXVsdE9yZ2FuaXplck1vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgb3JnYW5pemVyIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtYmF0Y2gtb3BlcmF0aW9ucycsXG4gICAgICBuYW1lOiAnQmF0Y2ggRmlsZSBPcGVyYXRpb25zJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgYmF0Y2ggb3BlcmF0aW9ucyBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0JhdGNoIG9wZXJhdGlvbnMgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1xdWljay1zZWFyY2gtc2VsZWN0aW9uJyxcbiAgICAgIG5hbWU6ICdRdWljayBTZWFyY2ggU2VsZWN0ZWQgVGV4dCcsXG4gICAgICBlZGl0b3JDYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luLCBlZGl0b3I6IEVkaXRvcikge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1F1aWNrIHNlYXJjaCBmb3I6Jywgc2VsZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgICAgaWYgKHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoc2VsZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIHNlbGVjdCB0ZXh0IHRvIHNlYXJjaCBmb3InKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWhlYWx0aC1jaGVjaycsXG4gICAgICBuYW1lOiAnVmF1bHQgSGVhbHRoIENoZWNrJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoJ1J1bm5pbmcgdmF1bHQgaGVhbHRoIGNoZWNrLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVzdCBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3QgY29ubmVjdGlvblRlc3QgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgaWYgKCFjb25uZWN0aW9uVGVzdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBIZWFsdGggY2hlY2sgZmFpbGVkOiAke2Nvbm5lY3Rpb25UZXN0Lm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCBiYXNpYyBzdHJ1Y3R1cmUgdG8gdGVzdCBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7IFxuICAgICAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSwgXG4gICAgICAgICAgICBtYXhfZGVwdGg6IDEgXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVzdCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgICAgICAgIGNvbnN0IHNlYXJjaFRlc3QgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnNlYXJjaFZhdWx0KHsgXG4gICAgICAgICAgICBxdWVyeTogJ3Rlc3QnLCBcbiAgICAgICAgICAgIG1heF9yZXN1bHRzOiAxIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoYOKchSBWYXVsdCBIZWFsdGggQ2hlY2sgUGFzc2VkXG7wn5OBICR7c3RydWN0dXJlLnRvdGFsX2ZpbGVzfSBmaWxlcywgJHtzdHJ1Y3R1cmUudG90YWxfZm9sZGVyc30gZm9sZGVyc1xu8J+UjSBTZWFyY2g6ICR7c2VhcmNoVGVzdC5yZXN1bHRzLmxlbmd0aH0gcmVzdWx0c1xu8J+SviBTaXplOiAkeyhzdHJ1Y3R1cmUudG90YWxfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQmAsIDgwMDApO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVmF1bHQgaGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShg4p2MIEhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWJhY2t1cCcsXG4gICAgICBuYW1lOiAnQ3JlYXRlIFZhdWx0IEJhY2t1cCcsXG4gICAgICBjYWxsYmFjazogYXN5bmMgZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKCdDcmVhdGluZyB2YXVsdCBiYWNrdXAuLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBiYWNrdXAgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmJhY2t1cFZhdWx0KHtcbiAgICAgICAgICAgIGluY2x1ZGVfc2V0dGluZ3M6IHRydWUsXG4gICAgICAgICAgICBjb21wcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgICAgIGJhY2t1cF9uYW1lOiBgdmF1bHRwaWxvdC1iYWNrdXAtJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1gXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg4pyFIEJhY2t1cCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVxu8J+TpiAke2JhY2t1cC5maWxlc19iYWNrZWRfdXB9IGZpbGVzXG7wn5K+IFNpemU6ICR7KGJhY2t1cC5iYWNrdXBfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQlxu8J+TgSBMb2NhdGlvbjogJHtiYWNrdXAuYmFja3VwX3BhdGh9YCwgODAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdCYWNrdXAgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGDinYwgQmFja3VwIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtc2VhcmNoLWNvbnRlbnQnLFxuICAgICAgbmFtZTogJ1NlYXJjaCBDb250ZW50JyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBzZWxlY3Rpb24udHJpbSgpIHx8ICdFbnRlciBzZWFyY2ggcXVlcnknO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKHF1ZXJ5LCAnY29udGVudCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXNlYXJjaC1maWxlbmFtZXMnLFxuICAgICAgbmFtZTogJ1NlYXJjaCBGaWxlbmFtZXMnLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoJycsICdmaWxlbmFtZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycsXG4gICAgICBuYW1lOiAnVmlldyBSZWNlbnQgRmlsZXMnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jIGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7IFxuICAgICAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc3RydWN0dXJlLnJlY2VudF9maWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHJlY2VudCBmaWxlcyBmb3VuZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCByZWNlbnRMaXN0ID0gc3RydWN0dXJlLnJlY2VudF9maWxlc1xuICAgICAgICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgICAgICAgLm1hcCgoZmlsZTogYW55KSA9PiBg4oCiICR7ZmlsZS5uYW1lfSAoJHtmaWxlLm1vZGlmaWVkfSlgKVxuICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoYPCfk50gUmVjZW50IEZpbGVzOlxcbiR7cmVjZW50TGlzdH1gLCAxMDAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHJlY2VudCBmaWxlczonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShg4p2MIEZhaWxlZCB0byBnZXQgcmVjZW50IGZpbGVzOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIF07XG59XG5cbi8qKlxuICogSG90a2V5IGRlZmluaXRpb25zIGZvciB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gKi9cbmV4cG9ydCBjb25zdCBWQVVMVF9NQU5BR0VNRU5UX0hPVEtFWVM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICd2YXVsdHBpbG90LXZhdWx0LXN0cnVjdHVyZSc6ICdDdHJsK1NoaWZ0K1YnLFxuICAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnOiAnQ3RybCtTaGlmdCtGJyxcbiAgJ3ZhdWx0cGlsb3QtcXVpY2stc2VhcmNoLXNlbGVjdGlvbic6ICdDdHJsK1NoaWZ0K1MnLFxuICAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnOiAnQ3RybCtTaGlmdCtPJyxcbiAgJ3ZhdWx0cGlsb3Qtb3JnYW5pemUtdmF1bHQnOiAnQ3RybCtTaGlmdCtHJyxcbiAgJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJzogJ0N0cmwrU2hpZnQrSCdcbn07XG5cbi8qKlxuICogUmliYm9uIGljb24gZGVmaW5pdGlvbnMgZm9yIGNvbW1vbmx5IHVzZWQgY29tbWFuZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfUklCQk9OX0lDT05TID0gW1xuICB7XG4gICAgaWNvbjogJ2ZvbGRlci10cmVlJyxcbiAgICB0aXRsZTogJ1ZhdWx0IFN0cnVjdHVyZScsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnXG4gIH0sXG4gIHtcbiAgICBpY29uOiAnc2VhcmNoJyxcbiAgICB0aXRsZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnXG4gIH0sXG4gIHtcbiAgICBpY29uOiAnZm9sZGVyLXBsdXMnLFxuICAgIHRpdGxlOiAnRmlsZSBPcGVyYXRpb25zJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucydcbiAgfVxuXTtcblxuLyoqXG4gKiBDb21tYW5kIG1lbnUgaXRlbXMgZm9yIGNvbnRleHQgbWVudXNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfTUVOVV9JVEVNUyA9IFtcbiAge1xuICAgIHRpdGxlOiAnQW5hbHl6ZSBTdHJ1Y3R1cmUnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtYW5hbHlzaXMnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1zZWFyY2gnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0ZpbGUgT3BlcmF0aW9ucycsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1vcGVyYXRpb25zJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdPcmdhbml6ZSBWYXVsdCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1vcmdhbml6ZS12YXVsdCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW9yZ2FuaXphdGlvbidcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnSGVhbHRoIENoZWNrJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LWhlYWx0aC1jaGVjaycsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW1haW50ZW5hbmNlJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdDcmVhdGUgQmFja3VwJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LWJhY2t1cCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW1haW50ZW5hbmNlJ1xuICB9XG5dO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZWdpc3RlciBhbGwgdmF1bHQgbWFuYWdlbWVudCBjb21tYW5kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcyhwbHVnaW46IGFueSkge1xuICBjb25zdCBjb21tYW5kcyA9IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG4gIGNvbW1hbmRzLmZvckVhY2goKGNvbW1hbmQ6IENvbW1hbmQpID0+IHtcbiAgICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAuLi5jb21tYW5kLFxuICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2s/LmJpbmQocGx1Z2luKSxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrPy5iaW5kKHBsdWdpbilcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBBZGQgaG90a2V5cyBpZiBkZWZpbmVkXG4gIE9iamVjdC5lbnRyaWVzKFZBVUxUX01BTkFHRU1FTlRfSE9US0VZUykuZm9yRWFjaCgoW2NvbW1hbmRJZCwgaG90a2V5XSkgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xuICAgIGlmIChjb21tYW5kKSB7XG4gICAgICBjb21tYW5kLmhvdGtleXMgPSBbeyBtb2RpZmllcnM6IFtdLCBrZXk6IGhvdGtleSB9XTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgdmF1bHQgbWFuYWdlbWVudCByaWJib24gaWNvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFZhdWx0TWFuYWdlbWVudFJpYmJvbkljb25zKHBsdWdpbjogYW55KSB7XG4gIFZBVUxUX01BTkFHRU1FTlRfUklCQk9OX0lDT05TLmZvckVhY2goKHsgaWNvbiwgdGl0bGUsIGNvbW1hbmRJZCB9KSA9PiB7XG4gICAgY29uc3QgcmliYm9uSWNvbiA9IHBsdWdpbi5hZGRSaWJib25JY29uKGljb24sIHRpdGxlLCAoKSA9PiB7XG4gICAgICBwbHVnaW4uYXBwLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xuICAgIH0pO1xuICAgIHJpYmJvbkljb24uYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtdmF1bHQtbWFuYWdlbWVudC1yaWJib24nKTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIiwiZW5hYmxlVmF1bHRNYW5hZ2VtZW50IiwiYXV0b1N5bmNWYXVsdFN0cnVjdHVyZSIsInNlYXJjaFJlc3VsdHNMaW1pdCIsImVuYWJsZVNtYXJ0U2VhcmNoIiwiYmF0Y2hPcGVyYXRpb25UaW1lb3V0Iiwic2hvd1ZhdWx0U3RhdHMiLCJtYXhTZWFyY2hSZXN1bHRzIiwiZGVmYXVsdFNlYXJjaFR5cGUiLCJlbmFibGVGaWxlT3BlcmF0aW9ucyIsImNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnMiLCJhdXRvQmFja3VwQmVmb3JlT3BlcmF0aW9ucyIsIkRFRkFVTFRfU0VUVElOR1MiLCJiYWNrZW5kVXJsIiwiYXBpS2V5IiwiZW5hYmxlV2ViU29ja2V0IiwiZW5hYmxlQ29waWxvdCIsImVuYWJsZUF1dG9Db21wbGV0ZSIsImRlZmF1bHRBZ2VudCIsImRlZmF1bHRNb2RlIiwiY2hhdEhpc3RvcnlMaW1pdCIsImRlYnVnTW9kZSIsInNob3dJbnRlbnREZWJ1ZyIsInZhdWx0TWFuYWdlbWVudCIsIlZhdWx0UGlsb3RTZXR0aW5nVGFiIiwiUGx1Z2luU2V0dGluZ1RhYiIsImNvbnN0cnVjdG9yIiwiYXBwIiwicGx1Z2luIiwic3VwZXIiLCJ0aGlzIiwiZGlzcGxheSIsImNvbnRhaW5lckVsIiwiZW1wdHkiLCJjcmVhdGVFbCIsInRleHQiLCJTZXR0aW5nIiwic2V0TmFtZSIsInNldERlc2MiLCJhZGRUZXh0Iiwic2V0UGxhY2Vob2xkZXIiLCJzZXRWYWx1ZSIsInNldHRpbmdzIiwib25DaGFuZ2UiLCJ2YWx1ZSIsIl9fYXdhaXRlciIsInNhdmVTZXR0aW5ncyIsImFkZEJ1dHRvbiIsImJ1dHRvbiIsInNldEJ1dHRvblRleHQiLCJvbkNsaWNrIiwidGVzdENvbm5lY3Rpb24iLCJhZGRUb2dnbGUiLCJ0b2dnbGUiLCJjb25uZWN0V2ViU29ja2V0IiwiZGlzY29ubmVjdFdlYlNvY2tldCIsImFkZERyb3Bkb3duIiwiZHJvcGRvd24iLCJhZGRPcHRpb24iLCJhZGRTbGlkZXIiLCJzbGlkZXIiLCJzZXRMaW1pdHMiLCJzZXREeW5hbWljVG9vbHRpcCIsIl9iIiwiX2EiLCJPYmplY3QiLCJhc3NpZ24iLCJpbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50IiwiZGlzYWJsZVZhdWx0TWFuYWdlbWVudCIsIlN0cmluZyIsInRpbWVvdXQiLCJwYXJzZUludCIsInNldEN0YSIsInZhdWx0Q2xpZW50Iiwic2V0VGltZW91dCIsInNldERpc2FibGVkIiwic3VjY2VzcyIsImVycm9yIiwic2V0V2FybmluZyIsInNldHRpbmdzVGFiIiwic2V0dGluZyIsImFjdGl2ZVRhYiIsImFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIiwiY2xzIiwiaW5uZXJIVE1MIiwibm90aWNlIiwiTm90aWNlIiwicmVzcG9uc2UiLCJhcGlDbGllbnQiLCJoZWFsdGhDaGVjayIsImluY2x1ZGVzIiwiY29uc29sZSIsIndhcm4iLCJzaW1wbGVSZXNwb25zZSIsInNpbXBsZUhlYWx0aENoZWNrIiwiZGF0YSIsInN0YXR1cyIsInZlcnNpb24iLCJoaWRlIiwiRXJyb3IiLCJtZXNzYWdlIiwiVklFV19UWVBFX1ZBVUxUUElMT1QiLCJWYXVsdFBpbG90VmlldyIsIkl0ZW1WaWV3IiwibGVhZiIsImdldFZpZXdUeXBlIiwiZ2V0RGlzcGxheVRleHQiLCJnZXRJY29uIiwib25PcGVuIiwiY29udGFpbmVyIiwiYWRkQ2xhc3MiLCJoZWFkZXJFbCIsInN0YXR1c0VsIiwidXBkYXRlU3RhdHVzIiwicXVpY2tBY3Rpb25zRWwiLCJjcmVhdGVRdWlja0FjdGlvbnMiLCJ2YXVsdFN0YXRzRWwiLCJ1cGRhdGVWYXVsdFN0YXRzIiwiYWN0aXZpdGllc0VsIiwiYWRkU3R5bGVzIiwic3RhdHVzQ29udGFpbmVyIiwiYmFja2VuZFN0YXR1cyIsImJhY2tlbmRJbmRpY2F0b3IiLCJ3c1N0YXR1cyIsImlzV2ViU29ja2V0Q29ubmVjdGVkIiwiY2hlY2tCYWNrZW5kU3RhdHVzIiwiaW5kaWNhdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc05hbWUiLCJhY3Rpb25zR3JpZCIsIm9uY2xpY2siLCJvcGVuQ2hhdE1vZGFsIiwiYWN0aXZhdGVGdWxsVGFiVmlldyIsIm9wZW5Xb3JrZmxvd01vZGFsIiwiYW5hbHl6ZVZhdWx0IiwiYWN0aXZlVmlldyIsIndvcmtzcGFjZSIsImdldEFjdGl2ZVZpZXdPZlR5cGUiLCJNYXJrZG93blZpZXciLCJnZXRDb3BpbG90Q29tcGxldGlvbiIsImVkaXRvciIsInN0YXRzQ29udGFpbmVyIiwiZmlsZXMiLCJ2YXVsdCIsImdldEZpbGVzIiwibWFya2Rvd25GaWxlcyIsImdldE1hcmtkb3duRmlsZXMiLCJsYWJlbCIsImxlbmd0aCIsInRvU3RyaW5nIiwiZ2V0QWxsTG9hZGVkRmlsZXMiLCJmaWx0ZXIiLCJmIiwiVEZvbGRlciIsImZvckVhY2giLCJzdGF0Iiwic3RhdEVsIiwibG9hZEFnZW50SW5mbyIsImxvZyIsImdldEFnZW50cyIsImFnZW50cyIsIkFycmF5IiwiaXNBcnJheSIsImRhdGFPYmoiLCJhZ2VudENvdW50IiwiYWN0aXZlQWdlbnRzIiwiYWdlbnQiLCJhY3RpdmUiLCJhZ2VudFN0YXRzRWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGVFbCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsIm9uQ2xvc2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQiIsIlZhdWx0UGlsb3RGdWxsVGFiVmlldyIsInN0eWxlIiwiaGVpZ2h0Iiwib3ZlcmZsb3ciLCJtYWluTGF5b3V0IiwibGVmdFNpZGViYXIiLCJjcmVhdGVMZWZ0U2lkZWJhciIsIm1haW5Db250ZW50IiwiY3JlYXRlTWFpbkNvbnRlbnQiLCJyaWdodFNpZGViYXIiLCJjcmVhdGVSaWdodFNpZGViYXIiLCJhZGRGdWxsVGFiU3R5bGVzIiwic2lkZWJhciIsImNvbnRlbnQiLCJ0YWJOYXYiLCJjaGF0VGFiIiwid29ya2Zsb3dUYWIiLCJhbmFseXRpY3NUYWIiLCJ0YWJDb250ZW50IiwiY2hhdEVsIiwiY3JlYXRlQ2hhdFNlY3Rpb24iLCJ3b3JrZmxvd0VsIiwiY3JlYXRlV29ya2Zsb3dTZWN0aW9uIiwiYW5hbHl0aWNzRWwiLCJjcmVhdGVBbmFseXRpY3NTZWN0aW9uIiwic3dpdGNoVGFiIiwicmVjZW50RmlsZXNFbCIsInVwZGF0ZVJlY2VudEZpbGVzIiwiYWdlbnRTdGF0dXNFbCIsInVwZGF0ZUFnZW50U3RhdHVzIiwiYWN0aXZpdHlFbCIsImNyZWF0ZUFjdGl2aXR5RmVlZCIsImNoYXRIaXN0b3J5IiwiY2hhdElucHV0IiwidGV4dGFyZWEiLCJwbGFjZWhvbGRlciIsInNlbmRCdXR0b24iLCJ0cmltIiwic2VuZENoYXRNZXNzYWdlIiwib25rZXlkb3duIiwiZSIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJjbGljayIsIndvcmtmbG93R3JpZCIsIm5hbWUiLCJpY29uIiwiZGVzY3JpcHRpb24iLCJ3b3JrZmxvdyIsIndvcmtmbG93Q2FyZCIsInJ1bldvcmtmbG93IiwiY2hhcnRzQ29udGFpbmVyIiwiZmlsZVR5cGVDaGFydCIsInRpbWVsaW5lQ2hhcnQiLCJ0YWdDaGFydCIsIndvcmRDb3VudENoYXJ0IiwibGlua0NoYXJ0IiwiYWN0aXZpdHlDaGFydCIsInRhYk5hbWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnRuIiwicmVtb3ZlQ2xhc3MiLCJzZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsInRoaW5raW5nTWVzc2FnZSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInNlbmRDaGF0IiwiY29udGV4dCIsInJlbW92ZSIsIndvcmtmbG93TmFtZSIsInBsYW5NeURheSIsImFjdGl2YXRlVmlldyIsInNvcnQiLCJhIiwiYiIsIm10aW1lIiwic2xpY2UiLCJmaWxlIiwiZmlsZUVsIiwiYmFzZW5hbWUiLCJvcGVuTGlua1RleHQiLCJwYXRoIiwiYWdlbnRJbmZvIiwiYWdlbnRFbCIsInRpbWUiLCJhY3Rpdml0eSIsImdldEFjdGl2ZU1hcmtkb3duIiwiZ2V0QWN0aXZlRmlsZSIsInJlYWQiLCJDaGF0TW9kYWwiLCJNb2RhbCIsImN1cnJlbnRDb252ZXJzYXRpb25JZCIsIm1lc3NhZ2VzIiwiY29udGVudEVsIiwidG9vbGJhckVsIiwiY2xlYXJDaGF0IiwiYWdlbnRTZWxlY3QiLCJsb2FkQWdlbnRzIiwiY2hhdENvbnRhaW5lciIsIm1lc3NhZ2VzRWwiLCJpbnB1dENvbnRhaW5lciIsImlucHV0RWwiLCJ0eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwiZGlzYWJsZWQiLCJnZXRDb252ZXJzYXRpb25IaXN0b3J5IiwicmVuZGVyTWVzc2FnZXMiLCJhZGRNZXNzYWdlIiwiaW50ZW50UmVzIiwiUHJvbWlzZSIsImFsbCIsImNsYXNzaWZ5SW50ZW50IiwicGF5bG9hZCIsImludGVudCIsInJlc3VsdCIsImNvbnZlcnNhdGlvbl9pZCIsInVuZGVmaW5lZCIsImFnZW50X2lkIiwiZ2V0U2VsZWN0ZWRBZ2VudCIsImVycm9yTXNnIiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJyZW5kZXJNZXNzYWdlIiwic2Nyb2xsVG9Cb3R0b20iLCJtZXNzYWdlRWwiLCJyZW5kZXJNYXJrZG93biIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlcGxhY2UiLCJkZWJ1Z0VsIiwiV29ya2Zsb3dNb2RhbCIsImlzRXhlY3V0aW5nIiwiZm9ybUVsIiwiZ29hbENvbnRhaW5lciIsImdvYWxJbnB1dCIsImNvbnRleHRDb250YWluZXIiLCJjb250ZXh0SW5wdXQiLCJvcHRpb25zQ29udGFpbmVyIiwiaW5jbHVkZUFjdGl2ZUZpbGUiLCJhY3RpdmVGaWxlQ2hlY2tib3giLCJjcmVhdGVTcGFuIiwiaW5jbHVkZUFsbEZpbGVzIiwiYWxsRmlsZXNDaGVja2JveCIsImV4ZWN1dGVCdXR0b24iLCJleGVjdXRlV29ya2Zsb3ciLCJjaGVja2VkIiwicHJvZ3Jlc3NDb250YWluZXIiLCJyZXN1bHRzQ29udGFpbmVyIiwiZ29hbCIsInZhdWx0Q29udGVudCIsImFjdGl2ZUZpbGUiLCJyZXF1ZXN0IiwidmF1bHRfY29udGVudCIsInNldHVwUHJvZ3Jlc3NMaXN0ZW5lciIsImRpc3BsYXlSZXN1bHRzIiwiZGlzcGxheUVycm9yIiwiZGlzcGxheVByb2dyZXNzIiwiZXhlY3V0aW9uX3RpbWUiLCJyZXN1bHRFbCIsInN0ZXBzX3Rha2VuIiwic3RlcHNFbCIsInN0ZXBzTGlzdCIsInN0ZXAiLCJhcnRpZmFjdHMiLCJhcnRpZmFjdHNFbCIsImFydGlmYWN0IiwiaW5kZXgiLCJhcnRpZmFjdEVsIiwidGl0bGUiLCJzYXZlQXJ0aWZhY3RBc05vdGUiLCJzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlIiwiZmlsZW5hbWUiLCJjcmVhdGUiLCJzcGxpdCIsIkV2b0FnZW50WENsaWVudCIsImJhc2VVcmwiLCJ3c0NhbGxiYWNrcyIsIk1hcCIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnRfMSIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsImhlYWRlcnMiLCJBY2NlcHQiLCJmZXRjaCIsIm1vZGUiLCJjcmVkZW50aWFscyIsImNvbnRlbnRUeXBlIiwiZ2V0IiwianNvbiIsIm9rIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzVGV4dCIsIm1ldGhvZCIsImNoYXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnZlcnNhdGlvbklkXzEiLCJjb252ZXJzYXRpb25JZCIsImxpbWl0IiwicmVxdWVzdEJvZHkiLCJpbmNsdWRlX21lc3NhZ2VzIiwiZGVsZXRlQ29udmVyc2F0aW9uIiwidmF1bHRfY29udGV4dCIsImNyZWF0ZUFnZW50IiwiZXhlY3V0ZUFnZW50IiwiYW5hbHl6ZVZhdWx0Q29udGV4dCIsInBsYW5UYXNrcyIsInBhcnNlSW50ZWxsaWdlbmNlIiwiY29uZmlkZW5jZSIsImV4cGxhaW5JbnRlbnQiLCJpbmNsdWRlX2RlYnVnIiwicmVhc29uaW5nIiwidXBkYXRlTWVtb3J5IiwiY2FsbGJhY2tzIiwid3NVcmwiLCJ3ZWJzb2NrZXQiLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJvbkNvbm5lY3QiLCJjYWxsIiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJzZSIsIm9uQ2hhdCIsIm9uV29ya2Zsb3dQcm9ncmVzcyIsIl9jIiwib25Db3BpbG90IiwiX2QiLCJvblZhdWx0U3luYyIsIl9lIiwib25JbnRlbnREZWJ1ZyIsIl9mIiwib25FcnJvciIsIl9nIiwib25jbG9zZSIsImNvZGUiLCJyZWFzb24iLCJvbkRpc2Nvbm5lY3QiLCJvbmVycm9yIiwiY2xvc2UiLCJzZW5kV2ViU29ja2V0TWVzc2FnZSIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsIlZhdWx0TWFuYWdlbWVudEVycm9yIiwiZmVhdHVyZSIsIlZhdWx0TWFuYWdlbWVudENsaWVudCIsImdldFZhdWx0U3RydWN0dXJlIiwiaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IiLCJwZXJmb3JtRmlsZU9wZXJhdGlvbiIsInZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3QiLCJwZXJmb3JtQmF0Y2hPcGVyYXRpb25zIiwib3BlcmF0aW9ucyIsIm9wIiwiZXJyIiwic2VhcmNoVmF1bHQiLCJxdWVyeSIsIm9yZ2FuaXplVmF1bHQiLCJiYWNrdXBWYXVsdCIsImNyZWF0ZUZpbGUiLCJmaWxlUGF0aF8xIiwiY29udGVudF8xIiwiYXJndW1lbnRzIiwiZmlsZVBhdGgiLCJiYWNrdXAiLCJvcGVyYXRpb24iLCJmaWxlX3BhdGgiLCJ1cGRhdGVGaWxlIiwiZGVsZXRlRmlsZSIsIm1vdmVGaWxlIiwiZnJvbVBhdGhfMSIsInRvUGF0aF8xIiwiZnJvbVBhdGgiLCJ0b1BhdGgiLCJuZXdfcGF0aCIsImNvcHlGaWxlIiwicXVpY2tTZWFyY2giLCJxdWVyeV8xIiwibWF4UmVzdWx0cyIsInNlYXJjaF90eXBlIiwibWF4X3Jlc3VsdHMiLCJpbmNsdWRlX2NvbnRlbnQiLCJyZXF1ZXN0T3B0aW9ucyIsIm1heF9kZXB0aCIsIlZhdWx0U3RydWN0dXJlTW9kYWwiLCJzZXRGb2N1c1BhdGgiLCJmb2N1c1BhdGgiLCJyZWZyZXNoQnV0dG9uIiwibG9hZGluZ0VsIiwiY3JlYXRlRGl2Iiwic2V0VGV4dCIsInN0cnVjdHVyZSIsInJlbmRlclN0cnVjdHVyZSIsInRvdGFsX2ZpbGVzIiwidG90YWxfZm9sZGVycyIsInRvdGFsX3NpemUiLCJ0b0ZpeGVkIiwidHJlZUNvbnRhaW5lciIsInRyZWVFbCIsInJlbmRlckZvbGRlciIsInJlY2VudF9maWxlcyIsInJlY2VudENvbnRhaW5lciIsInJlY2VudEVsIiwibW9kaWZpZWQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJvcnBoYW5lZF9maWxlcyIsIm9ycGhhbmVkQ29udGFpbmVyIiwib3JwaGFuZWRFbCIsImZvbGRlciIsImxldmVsIiwiZm9sZGVyRWwiLCJhdHRyIiwiY2hpbGRyZW4iLCJjaGlsZHJlbkVsIiwidG9nZ2xlRWwiLCJpc09wZW4iLCJjaGlsZCIsInNpemUiLCJTbWFydFNlYXJjaE1vZGFsIiwic2V0SW5pdGlhbFF1ZXJ5IiwiaW5pdGlhbFF1ZXJ5Iiwic2VhcmNoVHlwZSIsInNlYXJjaEZvcm0iLCJxdWVyeUlucHV0Iiwic2VhcmNoVHlwZVNlbGVjdCIsIm9wdGlvbiIsInNlbGVjdGVkIiwic2VhcmNoQnV0dG9uIiwicGVyZm9ybVNlYXJjaCIsInJlc3VsdHMiLCJyZW5kZXJTZWFyY2hSZXN1bHRzIiwidG90YWxfZm91bmQiLCJpbnNpZ2h0cyIsInJlc3VsdHNMaXN0IiwiZmlsZV9uYW1lIiwibWF0Y2hfdHlwZSIsInNjb3JlIiwicHJldmlldyIsIm1hdGNoZXMiLCJqb2luIiwic3VnZ2VzdGVkX3F1ZXJpZXMiLCJzdWdnZXN0aW9uc0VsIiwic3VnZ2VzdGlvbnNMaXN0Iiwic3VnZ2VzdGlvbiIsImRpc3BhdGNoRXZlbnQiLCJLZXlib2FyZEV2ZW50IiwiRmlsZU9wZXJhdGlvbnNNb2RhbCIsInNldEluaXRpYWxQYXRoIiwiaW5pdGlhbFBhdGgiLCJzZXRPcGVyYXRpb24iLCJ1cGRhdGVPcGVyYXRpb25Gb3JtIiwiZm9ybUNvbnRhaW5lciIsImFkZFRleHRBcmVhIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJleGVjdXRlT3BlcmF0aW9uIiwicGF0aElucHV0IiwibmV3UGF0aElucHV0IiwiY29udGVudFRleHRhcmVhIiwiYmFja3VwVG9nZ2xlIiwiVmF1bHRQaWxvdFBsdWdpbiIsIlBsdWdpbiIsIndlYnNvY2tldENvbm5lY3RlZCIsImNvcGlsb3RFbmFibGVkIiwib25sb2FkIiwiYXBwSW5zdGFuY2UiLCJsb2FkU2V0dGluZ3MiLCJyZWdpc3RlclZpZXciLCJyaWJib25JY29uRWwiLCJhZGRSaWJib25JY29uIiwiZXZ0IiwiY3RybEtleSIsIm1ldGFLZXkiLCJhZGRDb21tYW5kIiwiY2FsbGJhY2siLCJlZGl0b3JDYWxsYmFjayIsInF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24iLCJwbGFuVGFza3NGcm9tTm90ZSIsInJlZ2lzdGVyVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMiLCJyZWdpc3RlckRvbUV2ZW50IiwiaGFuZGxlS2V5VXAiLCJiaW5kIiwiYWRkU2V0dGluZ1RhYiIsIm9udW5sb2FkIiwiZGV0YWNoTGVhdmVzT2ZUeXBlIiwiaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24iLCJkZWJ1ZyIsIm9wZW4iLCJmaWxlQ29udGVudCIsImFuYWx5c2lzX3R5cGUiLCJhbmFseXNpc0NvbnRlbnQiLCJhbmFseXNpcyIsImluc2lnaHQiLCJyZWNvbW1lbmRhdGlvbnMiLCJyZWMiLCJjdXJzb3IiLCJnZXRDdXJzb3IiLCJ0ZXh0QmVmb3JlQ3Vyc29yIiwiZ2V0TGluZSIsImxpbmUiLCJzdWJzdHJpbmciLCJjaCIsImZ1bGxUZXh0IiwiZ2V0VmFsdWUiLCJjdXJzb3JfcG9zaXRpb24iLCJwb3NUb09mZnNldCIsImZpbGVfdHlwZSIsInJlcGxhY2VSYW5nZSIsImNvbXBsZXRpb24iLCJzZWxlY3Rpb24iLCJnZXRTZWxlY3Rpb24iLCJuZXdMaW5lIiwidGltZWZyYW1lIiwidGFza0NvbnRlbnQiLCJwbGFuIiwiZXN0aW1hdGVkX2R1cmF0aW9uIiwidGFza3MiLCJ0YXNrIiwiY2hlY2tib3giLCJwcmlvcml0eSIsImVzdGltYXRlZF90aW1lIiwibWlsZXN0b25lcyIsIm1pbGVzdG9uZSIsInRhcmdldF9kYXRlIiwiZmlsZVRleHQiLCJzY2hlZHVsZU1hcmtkb3duIiwiaGVhZGxpbmUiLCJub3RlVGV4dCIsIm5vdGUiLCJmZXRjaFNjaGVkdWxlIiwidmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIiwidXBkYXRlZFRleHQiLCJvcmlnaW5hbFRleHQiLCJtYXRjaCIsInNjaGVkdWxlUmVnZXgiLCJmaW5kU2NoZWR1bGVTZWN0aW9uIiwiZnVsbE1hdGNoIiwiaGVhZGluZyIsInJlcGxhY2VtZW50IiwiaW5qZWN0U2NoZWR1bGUiLCJtb2RpZnkiLCJzdWNjZXNzTWVzc2FnZSIsImxlYXZlcyIsImdldExlYXZlc09mVHlwZSIsInJpZ2h0TGVhZiIsImdldFJpZ2h0TGVhZiIsInNldFZpZXdTdGF0ZSIsInJldmVhbExlYWYiLCJuZXdMZWFmIiwiZ2V0TGVhZiIsIm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsIiwib3BlblNtYXJ0U2VhcmNoTW9kYWwiLCJvcGVuRmlsZU9wZXJhdGlvbnNNb2RhbCIsIm9wZW5WYXVsdE9yZ2FuaXplck1vZGFsIiwib3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsIiwiY29ubmVjdGlvblRlc3QiLCJzZWFyY2hUZXN0IiwiaW5jbHVkZV9zZXR0aW5ncyIsImNvbXByZXNzaW9uIiwiYmFja3VwX25hbWUiLCJmaWxlc19iYWNrZWRfdXAiLCJiYWNrdXBfc2l6ZSIsImJhY2t1cF9wYXRoIiwicmVjZW50TGlzdCIsIm1hcCIsImNvbW1hbmQiLCJtb2RhbCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZSIsImNsZWFyVGltZW91dCIsImF1dG9Db21wbGV0ZVRpbWVvdXQiLCJ0cmlnZ2VyQXV0b0NvbXBsZXRpb24iLCJpbmRleE9mIiwiY3VycmVudExpbmUiLCJsYXN0Q2hhciIsIm5vdyIsImxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0Iiwic3VnZ2VzdGlvbnMiLCJsb2FkRGF0YSIsInNhdmVEYXRhIl0sIm1hcHBpbmdzIjoiNFhBT08sTUFBTUEsRUFBNkQsQ0FDeEVDLHVCQUF1QixFQUN2QkMsd0JBQXdCLEVBQ3hCQyxtQkFBb0IsR0FDcEJDLG1CQUFtQixFQUNuQkMsc0JBQXVCLElBQ3ZCQyxnQkFBZ0IsRUFDaEJDLGlCQUFrQixJQUNsQkMsa0JBQW1CLFVBQ25CQyxzQkFBc0IsRUFDdEJDLDhCQUE4QixFQUM5QkMsNEJBQTRCLEdDYnZCLE1BQU1D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
