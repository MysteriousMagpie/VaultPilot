"use strict";var t=require("obsidian");function e(t,e,n,i){return new(n||(n=Promise))(function(a,o){function s(t){try{r(i.next(t))}catch(t){o(t)}}function l(t){try{r(i.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,l)}r((i=i.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={enableVaultManagement:!0,autoSyncVaultStructure:!1,searchResultsLimit:50,enableSmartSearch:!0,batchOperationTimeout:3e4,showVaultStats:!0,maxSearchResults:100,defaultSearchType:"content",enableFileOperations:!0,confirmDestructiveOperations:!0,autoBackupBeforeOperations:!1};const i={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1,vaultManagement:n,modelSelection:{enabled:!0,devpipePath:"../dev-pipe",monitoringInterval:3e4,fallbackEnabled:!0,cacheDuration:3e5,retryAttempts:3,timeout:3e4,debugMode:!1,userPreferences:{priority:"balanced",maxCostPerRequest:.5,preferredProviders:[],qualityThreshold:.7}}};class a extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:a}=this;a.empty(),a.createEl("h2",{text:"VaultPilot Settings"}),a.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),a.createEl("h3",{text:"Connection"}),new t.Setting(a).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),a.createEl("h3",{text:"Features"}),new t.Setting(a).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(a).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Agent Configuration"}),new t.Setting(a).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(t=>t.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Advanced"}),new t.Setting(a).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(t=>t.setValue(this.plugin.settings.showIntentDebug).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Vault Management"}),function(i,a){i.createEl("h2",{text:"Vault Management"}),i.createEl("p",{text:"Configure AI-powered vault structure analysis and file operations."}),new t.Setting(i).setName("Enable Vault Management").setDesc("Enable AI-powered vault structure analysis and file operations").addToggle(t=>{var i,o;return t.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.enableVaultManagement)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.enableVaultManagement=t,yield a.saveSettings(),t?a.initializeVaultManagement():a.disableVaultManagement()}))}),new t.Setting(i).setName("Auto Sync Vault Structure").setDesc("Automatically update vault structure analysis when files change").addToggle(t=>{var i,o;return t.setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.autoSyncVaultStructure)&&void 0!==o&&o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.autoSyncVaultStructure=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Enable Smart Search").setDesc("Use AI-powered search with context and insights").addToggle(t=>{var i,o;return t.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.enableSmartSearch)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.enableSmartSearch=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Search Results Limit").setDesc("Maximum number of search results to display").addSlider(t=>{var i,o;return t.setLimits(10,200,10).setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.searchResultsLimit)&&void 0!==o?o:50).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.searchResultsLimit=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Default Search Type").setDesc("Default search mode for smart search").addDropdown(t=>{var i,o;return t.addOption("content","Content Search").addOption("filename","Filename Search").addOption("tags","Tag Search").addOption("links","Link Search").addOption("comprehensive","Comprehensive Search").setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.defaultSearchType)&&void 0!==o?o:"content").onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.defaultSearchType=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Enable File Operations").setDesc("Allow file creation, deletion, and modification through the interface").addToggle(t=>{var i,o;return t.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.enableFileOperations)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.enableFileOperations=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Confirm Destructive Operations").setDesc("Show confirmation dialog for file deletion and destructive operations").addToggle(t=>{var i,o;return t.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.confirmDestructiveOperations)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.confirmDestructiveOperations=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Auto Backup Before Operations").setDesc("Automatically create backups before destructive file operations").addToggle(t=>{var i,o;return t.setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.autoBackupBeforeOperations)&&void 0!==o&&o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.autoBackupBeforeOperations=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Batch Operation Timeout").setDesc("Timeout for batch operations in milliseconds").addText(t=>{var i,o;return t.setPlaceholder("30000").setValue(String(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.batchOperationTimeout)&&void 0!==o?o:3e4)).onChange(t=>e(this,void 0,void 0,function*(){const e=parseInt(t)||3e4;a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.batchOperationTimeout=e,yield a.saveSettings()}))}),new t.Setting(i).setName("Show Vault Statistics").setDesc("Display vault statistics in modals and interfaces").addToggle(t=>{var i,o;return t.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.showVaultStats)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.showVaultStats=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Test Vault Management Connection").setDesc("Test connection to vault management endpoints").addButton(t=>t.setButtonText("Test Connection").setCta().onClick(()=>e(this,void 0,void 0,function*(){if(!a.vaultClient)return t.setButtonText("Not Available"),void setTimeout(()=>t.setButtonText("Test Connection"),2e3);t.setButtonText("Testing..."),t.setDisabled(!0);try{(yield a.vaultClient.testConnection()).success?t.setButtonText("âœ… Connected"):t.setButtonText("âŒ Failed")}catch(e){t.setButtonText("âŒ Error")}t.setDisabled(!1),setTimeout(()=>t.setButtonText("Test Connection"),3e3)}))),i.createEl("h3",{text:"Advanced Vault Management"}),new t.Setting(i).setName("Maximum Search Results").setDesc("Absolute maximum number of search results to fetch from backend").addSlider(t=>{var i,o;return t.setLimits(50,500,25).setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.maxSearchResults)&&void 0!==o?o:100).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.maxSearchResults=t,yield a.saveSettings()}))}),new t.Setting(i).setName("Reset Vault Management Settings").setDesc("Reset all vault management settings to their default values").addButton(t=>t.setButtonText("Reset to Defaults").setWarning().onClick(()=>e(this,void 0,void 0,function*(){a.settings.vaultManagement=Object.assign({},n),yield a.saveSettings();const t=a.app.setting.activeTab;t&&t.display&&t.display()})))}(a,this.plugin),a.createEl("h3",{text:"Model Selection"}),new t.Setting(a).setName("Enable Model Selection").setDesc("Enable intelligent AI model selection based on task type and requirements").addToggle(t=>{var n,a;return t.setValue(null===(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.enabled)||void 0===a||a).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.enabled=t,yield this.plugin.saveSettings(),t?yield this.plugin.initializeModelSelection():yield this.plugin.disconnectModelSelection()}))}),new t.Setting(a).setName("DevPipe Path").setDesc("Path to the DevPipe communication directory").addText(t=>{var n,a;return t.setPlaceholder("../dev-pipe").setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.devpipePath)&&void 0!==a?a:"../dev-pipe").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.devpipePath=t,yield this.plugin.saveSettings()}))}),new t.Setting(a).setName("Priority Mode").setDesc("How to prioritize model selection: performance, cost, or balanced").addDropdown(t=>{var n,a;return t.addOption("performance","Performance - Best quality models").addOption("cost","Cost - Most economical models").addOption("balanced","Balanced - Optimal quality/cost ratio").setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.userPreferences.priority)&&void 0!==a?a:"balanced").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.userPreferences.priority=t,yield this.plugin.saveSettings()}))}),new t.Setting(a).setName("Max Cost Per Request").setDesc("Maximum cost per AI request (in USD)").addSlider(t=>{var n,a;return t.setLimits(.01,2,.01).setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.userPreferences.maxCostPerRequest)&&void 0!==a?a:.5).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.userPreferences.maxCostPerRequest=t,yield this.plugin.saveSettings()}))}),new t.Setting(a).setName("Model Selection Debug").setDesc("Enable debug logging for model selection decisions").addToggle(t=>{var n,a;return t.setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.debugMode)&&void 0!==a&&a).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.debugMode=t,yield this.plugin.saveSettings()}))}),a.createEl("h2",{text:"Help & Documentation"}),a.createEl("h3",{text:"Information"});a.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let i=yield this.plugin.apiClient.healthCheck();if(!i.success&&(null===(e=i.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(i={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),i.success?new t.Notice("âœ… Connection successful!",3e3):new t.Notice(`âŒ Connection failed: ${i.error}`,5e3)}catch(e){n.hide(),new t.Notice(`âŒ Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const o="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return o}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=t.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="ðŸŸ¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="ðŸ”´ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="ðŸ”´ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"ðŸ’¬ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"ðŸ“Š Open Dashboard",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateFullTabView();e.createEl("button",{text:"âš™ï¸ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"ðŸ” Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"âœ¨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"ðŸ”„ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in view...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in view:",t),t.success&&t.data){let e=[];if(Array.isArray(t.data))e=t.data;else if(t.data&&"object"==typeof t.data){const n=t.data;n.agents&&Array.isArray(n.agents)?(e=n.agents,console.log("VaultPilot: Found agents array in view, using response.data.agents")):n.data&&Array.isArray(n.data)?(e=n.data,console.log("VaultPilot: Found nested data in view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof t.data,t.data)}const n=e.length,i=e.filter(t=>t.active).length,a=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});a.createEl("h4",{text:"Available Agents"});a.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${i}/${n} active`})}}catch(t){console.error("Failed to load agents in view:",t)}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}const l="vaultpilot-full-tab-view";class r extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return l}getDisplayText(){return"VaultPilot Dashboard"}getIcon(){return"layout-dashboard"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-full-tab-view"),t.style.height="100%",t.style.overflow="hidden";const e=t.createEl("div",{cls:"vaultpilot-main-layout"}),n=e.createEl("div",{cls:"vaultpilot-left-sidebar"});this.createLeftSidebar(n);const i=e.createEl("div",{cls:"vaultpilot-main-content"});this.createMainContent(i);const a=e.createEl("div",{cls:"vaultpilot-right-sidebar"});this.createRightSidebar(a),this.addFullTabStyles()})}createLeftSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-sidebar-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot"}),e.createEl("p",{text:"AI Assistant Dashboard",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats()}createMainContent(t){const e=t.createEl("div",{cls:"vaultpilot-tab-nav"}),n=e.createEl("button",{text:"ðŸ’¬ Chat",cls:"vaultpilot-tab-button active"}),i=e.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-tab-button"}),a=e.createEl("button",{text:"ðŸ“Š Analytics",cls:"vaultpilot-tab-button"}),o=t.createEl("div",{cls:"vaultpilot-tab-content"});this.chatEl=o.createEl("div",{cls:"vaultpilot-chat-section active"}),this.createChatSection(this.chatEl),this.workflowEl=o.createEl("div",{cls:"vaultpilot-workflow-section"}),this.createWorkflowSection(this.workflowEl);const s=o.createEl("div",{cls:"vaultpilot-analytics-section"});this.createAnalyticsSection(s),n.onclick=()=>this.switchTab("chat",n),i.onclick=()=>this.switchTab("workflow",i),a.onclick=()=>this.switchTab("analytics",a)}createRightSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-recent-files"});e.createEl("h3",{text:"Recent Files"}),this.updateRecentFiles(e);const n=t.createEl("div",{cls:"vaultpilot-agent-status"});n.createEl("h3",{text:"Agent Status"}),this.updateAgentStatus(n);const i=t.createEl("div",{cls:"vaultpilot-activity-feed"});i.createEl("h3",{text:"Activity Feed"}),this.createActivityFeed(i)}createChatSection(t){const e=t.createEl("div",{cls:"vaultpilot-chat-content"});e.createEl("div",{cls:"vaultpilot-chat-header"}).createEl("h3",{text:"AI Chat Interface"});const n=e.createEl("div",{cls:"vaultpilot-chat-history"});n.createEl("div",{text:"Welcome! Start a conversation with your AI assistant.",cls:"vaultpilot-chat-welcome"});const i=e.createEl("div",{cls:"vaultpilot-chat-input"}),a=i.createEl("textarea",{placeholder:"Type your message here...",cls:"vaultpilot-chat-textarea"}),o=i.createEl("button",{text:"Send",cls:"vaultpilot-chat-send-button"});o.onclick=()=>{const t=a.value.trim();t&&(this.sendChatMessage(t,n),a.value="")},a.onkeydown=t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),o.click())}}createWorkflowSection(t){const e=t.createEl("div",{cls:"vaultpilot-workflow-content"});e.createEl("div",{cls:"vaultpilot-workflow-header"}).createEl("h3",{text:"Workflow Management"});const n=e.createEl("div",{cls:"vaultpilot-workflow-grid"});[{name:"Analyze Vault",icon:"ðŸ”",description:"Analyze your vault structure and content"},{name:"Generate Summary",icon:"ðŸ“",description:"Create summaries of your notes"},{name:"Link Analysis",icon:"ðŸ”—",description:"Analyze note connections and relationships"},{name:"Tag Management",icon:"ðŸ·ï¸",description:"Organize and manage your tags"},{name:"Daily Planning",icon:"ðŸ“…",description:"Plan your day based on your notes"},{name:"Knowledge Graph",icon:"ðŸ•¸ï¸",description:"Visualize your knowledge connections"},{name:"Content Search",icon:"ðŸ”Ž",description:"Advanced search across your vault"},{name:"Note Templates",icon:"ðŸ“„",description:"Create and manage note templates"},{name:"Link Assistant",icon:"ðŸ”—",description:"Intelligent link suggestions and management"}].forEach(t=>{const e=n.createEl("div",{cls:"vaultpilot-workflow-card"});e.createEl("div",{text:t.icon,cls:"vaultpilot-workflow-icon"}),e.createEl("h4",{text:t.name}),e.createEl("p",{text:t.description});e.createEl("button",{text:"Run",cls:"vaultpilot-workflow-run-button"}).onclick=()=>this.runWorkflow(t.name)})}createAnalyticsSection(t){const e=t.createEl("div",{cls:"vaultpilot-analytics-content"});e.createEl("div",{cls:"vaultpilot-analytics-header"}).createEl("h3",{text:"Vault Analytics"});const n=e.createEl("div",{cls:"vaultpilot-charts-container"}),i=n.createEl("div",{cls:"vaultpilot-chart-card"});i.createEl("h4",{text:"File Type Distribution"}),i.createEl("div",{text:"Chart visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const a=n.createEl("div",{cls:"vaultpilot-chart-card"});a.createEl("h4",{text:"Note Creation Timeline"}),a.createEl("div",{text:"Timeline visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const o=n.createEl("div",{cls:"vaultpilot-chart-card"});o.createEl("h4",{text:"Tag Usage"}),o.createEl("div",{text:"Tag analytics coming soon...",cls:"vaultpilot-chart-placeholder"});const s=n.createEl("div",{cls:"vaultpilot-chart-card"});s.createEl("h4",{text:"Word Count Analysis"}),s.createEl("div",{text:"Word count visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const l=n.createEl("div",{cls:"vaultpilot-chart-card"});l.createEl("h4",{text:"Link Density"}),l.createEl("div",{text:"Link analysis coming soon...",cls:"vaultpilot-chart-placeholder"});const r=n.createEl("div",{cls:"vaultpilot-chart-card"});r.createEl("h4",{text:"Activity Heatmap"}),r.createEl("div",{text:"Activity heatmap coming soon...",cls:"vaultpilot-chart-placeholder"})}switchTab(t,e){var n;this.containerEl.querySelectorAll(".vaultpilot-tab-button").forEach(t=>{t.removeClass("active")}),this.containerEl.querySelectorAll(".vaultpilot-chat-section, .vaultpilot-workflow-section, .vaultpilot-analytics-section").forEach(t=>{t.removeClass("active")}),e.addClass("active"),"chat"===t?this.chatEl.addClass("active"):"workflow"===t?this.workflowEl.addClass("active"):"analytics"===t&&(null===(n=this.containerEl.querySelector(".vaultpilot-analytics-section"))||void 0===n||n.addClass("active"))}sendChatMessage(t,n){return e(this,void 0,void 0,function*(){n.createEl("div",{cls:"vaultpilot-chat-message user"}).createEl("div",{text:t});const e=n.createEl("div",{cls:"vaultpilot-chat-message assistant thinking"});e.createEl("div",{text:"Thinking..."}),n.scrollTop=n.scrollHeight;try{const i=yield this.plugin.apiClient.sendChat({message:t,context:null});if(e.remove(),i.success&&i.data){n.createEl("div",{cls:"vaultpilot-chat-message assistant"}).createEl("div",{text:i.data.response})}else{n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Could not get response from AI"})}}catch(t){e.remove();n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Connection failed"})}n.scrollTop=n.scrollHeight})}runWorkflow(n){return e(this,void 0,void 0,function*(){new t.Notice(`Running workflow: ${n}`);try{switch(n){case"Analyze Vault":yield this.plugin.analyzeVault();break;case"Daily Planning":yield this.plugin.planMyDay();break;default:new t.Notice(`${n} workflow is coming soon!`)}}catch(e){new t.Notice(`Error running workflow: ${n}`)}})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=t.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="ðŸŸ¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="ðŸ”´ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="ðŸ”´ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const t=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});t.createEl("button",{text:"ðŸ”„ Refresh",cls:"vaultpilot-action-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()};t.createEl("button",{text:"ðŸ“‹ Sidebar View",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateView();t.createEl("button",{text:"ðŸ’¬ Modal Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();t.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal()}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})})}updateRecentFiles(t){this.app.vault.getMarkdownFiles().sort((t,e)=>e.stat.mtime-t.stat.mtime).slice(0,5).forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-recent-file"});n.createEl("span",{text:e.basename}),n.onclick=()=>{this.app.workspace.openLinkText(e.path,"",!1)}})}updateAgentStatus(t){this.loadAgentInfo(t)}loadAgentInfo(t){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in full-tab-view...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in full-tab-view:",e),e.success&&e.data&&t){let n=[];if(Array.isArray(e.data))n=e.data;else if(e.data&&"object"==typeof e.data){const t=e.data;t.agents&&Array.isArray(t.agents)?(n=t.agents,console.log("VaultPilot: Found agents array in full-tab-view, using response.data.agents")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("VaultPilot: Found nested data in full-tab-view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof e.data,e.data)}const i=n.length,a=n.filter(t=>t.active).length,o=t.createEl("div",{cls:"vaultpilot-agent-info"});o.createEl("div",{text:`${a}/${i} active`}),n.forEach(t=>{const e=o.createEl("div",{cls:"vaultpilot-agent-item"});e.createEl("span",{text:t.name}),e.createEl("span",{text:t.active?"ðŸŸ¢":"ðŸ”´",cls:"vaultpilot-agent-status"})})}}catch(t){console.error("Failed to load agents in full tab view:",t)}})}createActivityFeed(t){[{time:"Just now",activity:"VaultPilot started"},{time:"5 min ago",activity:"Connection established"},{time:"1 hour ago",activity:"Last vault analysis"}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-activity-item"});n.createEl("div",{text:e.activity}),n.createEl("div",{text:e.time,cls:"vaultpilot-activity-time"})})}addFullTabStyles(){if(!document.getElementById("vaultpilot-full-tab-styles")){const t=document.createElement("style");t.id="vaultpilot-full-tab-styles",t.textContent='\n        /* Ensure the full tab view fills available space */\n        .workspace-leaf-content[data-type="vaultpilot-full-tab-view"] {\n          height: 100%;\n        }\n        .vaultpilot-full-tab-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-main-layout {\n          display: flex;\n          flex: 1;\n          gap: 1px;\n          background: var(--background-modifier-border);\n          min-height: 0;\n        }\n        .vaultpilot-left-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-main-content {\n          flex: 1;\n          background: var(--background-primary);\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n        }\n        .vaultpilot-right-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-sidebar-header {\n          text-align: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-nav {\n          display: flex;\n          background: var(--background-secondary);\n          border-bottom: 1px solid var(--background-modifier-border);\n          flex-shrink: 0;\n        }\n        .vaultpilot-tab-button {\n          flex: 1;\n          padding: 12px 16px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .vaultpilot-tab-button:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-tab-button.active {\n          background: var(--background-primary);\n          color: var(--text-normal);\n          border-bottom: 2px solid var(--interactive-accent);\n        }\n        .vaultpilot-tab-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n          height: 100%;\n        }\n        /* Sections just flex-grow and hold their children */\n        .vaultpilot-chat-section,\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          display: none;           /* hidden by default */\n          flex: 1 1 0;             /* flex-grow, flex-shrink, base 0 */\n          flex-direction: column;\n          min-height: 0;           /* allow children to shrink/scroll */\n        }\n\n        /* Active section shows and flexes */\n        .vaultpilot-chat-section.active,\n        .vaultpilot-workflow-section.active,\n        .vaultpilot-analytics-section.active {\n          display: flex;           /* show & flex when active */\n        }\n\n        /* Content panels handle the scrolling */\n        .vaultpilot-chat-content,\n        .vaultpilot-workflow-content,\n        .vaultpilot-analytics-content {\n          flex: 1 1 0;             /* fill remaining space */\n          min-height: 0;           /* critical to allow overflow */\n          overflow-y: auto;        /* now *this* container scrolls */\n          padding: 16px;\n        }\n\n        /* keep special chat gaps */\n        .vaultpilot-chat-content {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        .vaultpilot-chat-history {\n          flex: 1;\n          overflow-y: auto;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          background: var(--background-secondary);\n          min-height: 0;\n        }\n        .vaultpilot-chat-input {\n          display: flex;\n          gap: 8px;\n        }\n        .vaultpilot-chat-textarea {\n          flex: 1;\n          min-height: 60px;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-chat-send-button {\n          padding: 8px 16px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          height: fit-content;\n          align-self: flex-end;\n        }\n        .vaultpilot-chat-message {\n          margin-bottom: 12px;\n          padding: 8px 12px;\n          border-radius: 8px;\n          max-width: 80%;\n        }\n        .vaultpilot-chat-message.user {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          margin-left: auto;\n        }\n        .vaultpilot-chat-message.assistant {\n          background: var(--background-primary);\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-message.thinking {\n          opacity: 0.7;\n          font-style: italic;\n        }\n        .vaultpilot-chat-message.error {\n          background: var(--background-modifier-error);\n          color: var(--text-error);\n        }\n        .vaultpilot-chat-header,\n        .vaultpilot-workflow-header,\n        .vaultpilot-analytics-header {\n          margin-bottom: 16px;\n          padding-bottom: 8px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-header h3,\n        .vaultpilot-workflow-header h3,\n        .vaultpilot-analytics-header h3 {\n          margin: 0;\n          color: var(--text-normal);\n        }\n        .vaultpilot-workflow-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-workflow-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          text-align: center;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-workflow-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-workflow-icon {\n          font-size: 32px;\n          margin-bottom: 8px;\n        }\n        .vaultpilot-workflow-run-button {\n          margin-top: 8px;\n          padding: 6px 12px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .vaultpilot-charts-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-chart-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-chart-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-chart-placeholder {\n          text-align: center;\n          color: var(--text-muted);\n          font-style: italic;\n          padding: 20px;\n        }\n        .vaultpilot-recent-file {\n          padding: 4px 8px;\n          margin-bottom: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-recent-file:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-agent-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px 0;\n        }\n        .vaultpilot-activity-item {\n          margin-bottom: 8px;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-activity-time {\n          font-size: 11px;\n          color: var(--text-muted);\n          margin-top: 2px;\n        }\n        /* Inherit styles from original view */\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3 {\n          margin-bottom: 12px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 4px;\n          font-size: 14px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n          font-size: 11px;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-action-button {\n          padding: 8px 6px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 11px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 8px;\n          background: var(--background-secondary);\n          border-radius: 4px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 2px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 10px;\n          color: var(--text-muted);\n        }\n      ',document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}let c;function d(){return e(this,void 0,void 0,function*(){const t=c.workspace.getActiveFile();if(!t)return null;return(yield c.vault.read(t)).slice(0,8e3)})}class u extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"âš¡ Automatic mode detection enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const i=n.createEl("select",{cls:"vaultpilot-agent-select"});i.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(i),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response:",e),e.success&&e.data){console.log("VaultPilot: response.data type:",typeof e.data),console.log("VaultPilot: response.data content:",e.data);let n=[];if(Array.isArray(e.data))n=e.data;else if(e.data&&"object"==typeof e.data){const t=e.data;t.agents&&Array.isArray(t.agents)?n=t.agents:t.data&&Array.isArray(t.data)&&(n=t.data)}if(n.length>0)console.log("VaultPilot: Found",n.length,"agents"),n.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})});else{console.log("VaultPilot: No agents found in response");t.createEl("option",{text:"No agents available",value:""}).disabled=!0}}else console.error("Failed to load agents: API returned error or no data:",e)}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const[n,i]=yield Promise.all([d(),this.plugin.apiClient.classifyIntent(e)]),a={message:e,context:n};let o;this.plugin.settings.showIntentDebug&&this.showIntentDebug(i.intent),"agent"===i.intent?(o=yield this.plugin.apiClient.runWorkflow(a),o.success&&o.data?this.addMessage("assistant",`âš™ï¸ Agent Mode (auto-detected)\n\n${o.data.result}`):this.addMessage("assistant",`Error in agent mode: ${o.error||"Failed to get response"}`)):(o=yield this.plugin.apiClient.sendChat(a,{conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent()}),o.success&&o.data?(this.currentConversationId=o.data.conversation_id,this.addMessage("assistant",o.data.response)):this.addMessage("assistant",`Error: ${o.error||"Failed to get response"}`)),(null==n?void 0:n.length)||new t.Notice("âš ï¸ No vault content was sent; replies may be generic."),o.success||new t.Notice(`Chat error: ${o.error}`)}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(t)}}showIntentDebug(t){const e=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"ðŸ” Intent detected: "+("agent"===t?"âš™ï¸ Agent Mode":"ðŸ’¬ Ask Mode")});setTimeout(()=>{e.remove()},3e3)}onClose(){const{contentEl:t}=this;t.empty()}}class h extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"âš™ï¸ Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=i.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=a.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const r=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,i){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(i){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const a={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const o=yield this.plugin.apiClient.executeWorkflow(a);if(!o.success||!o.data)throw new Error(o.error||"Workflow execution failed");yield this.displayResults(o.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"âœ… Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const i=e.createEl("div",{cls:"vaultpilot-artifact"});i.createEl("h5",{text:t.title}),i.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});i.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,i){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,i=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,i),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let i="# VaultPilot Workflow Results\n\n";i+=`**Goal:** ${this.goalInput.value}\n\n`,i+=`**Execution Time:** ${n.execution_time}s\n\n`,i+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(i+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{i+=`${e+1}. ${t}\n`}),i+="\n"),n.artifacts&&n.artifacts.length>0&&(i+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{i+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,i),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>âŒ Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class p{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,i=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:i,mode:"cors",credentials:"omit"}));let a;const o=t.headers.get("content-type");if(a=o&&o.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof a&&a.error?a.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof a?{message:a}:a}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/status`);const t=yield this.makeRequest("/status",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/status`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}runWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:t.message,context:t.context||void 0})})})}sendChat(t,n){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:t.message,vault_context:t.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}classifyIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5}})}explainIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t,include_debug:!0})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,i,a,o,s,l,r;try{const r=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",r.type),r.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,r.data);break;case"workflow_progress":null===(i=t.onWorkflowProgress)||void 0===i||i.call(t,r.data);break;case"copilot":null===(a=t.onCopilot)||void 0===a||a.call(t,r.data);break;case"vault_sync":null===(o=t.onVaultSync)||void 0===o||o.call(t,r.data);break;case"intent_debug":null===(s=t.onIntentDebug)||void 0===s||s.call(t,r.data);break;case"error":null===(l=t.onError)||void 0===l||l.call(t,r.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(r=t.onError)||void 0===r||r.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}function g(t){return t.match(/(<!-- vp:plan:start -->)([\s\S]*?)(<!-- vp:plan:end -->)/i)}function v(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im,n=t.match(e);return n||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}class m{constructor(){this.logs=[],this.maxLogs=100}static getInstance(){return m.instance||(m.instance=new m),m.instance}log(t,e){const n=`[${(new Date).toISOString()}] ${t}${e?` | ${JSON.stringify(e)}`:""}`;console.log(n),this.logs.push(n),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}error(t,e){const n=(new Date).toISOString(),i=e instanceof Error?{message:e.message,stack:e.stack,name:e.name}:e,a=`[${n}] ERROR: ${t}${i?` | ${JSON.stringify(i)}`:""}`;console.error(a),this.logs.push(a),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return this.logs.join("\n")}analyzeApiClient(t){return t?{status:"available",available:!0,type:typeof t,methods:Object.getOwnPropertyNames(Object.getPrototypeOf(t)).filter(e=>"function"==typeof t[e]),hasPlanTasks:"function"==typeof t.planTasks,hasHealthCheck:"function"==typeof t.healthCheck}:{status:"null",available:!1}}testConnection(t){return e(this,void 0,void 0,function*(){try{if(this.log("ðŸ”— Testing EvoAgentX connection..."),!t)throw new Error("API client is null or undefined");if(!t.healthCheck)throw new Error("API client does not have healthCheck method");const e=yield t.healthCheck();return this.log("âœ… Connection test successful",e),{success:!0,result:e}}catch(t){return this.error("âŒ Connection test failed",t),{success:!1,error:t instanceof Error?t.message:String(t)}}})}testTaskPlanning(t){return e(this,arguments,void 0,function*(t,e="Test note for schedule generation"){var n,i,a,o;try{if(this.log("ðŸ“‹ Testing task planning..."),!t)throw new Error("API client is null or undefined");if(!t.planTasks)throw new Error("API client does not have planTasks method");const s=yield t.planTasks({goal:"Create a test schedule",context:e,timeframe:"1 day"});return this.log("âœ… Task planning test successful",{success:s.success,hasData:!!s.data,hasPlan:!!(null===(n=s.data)||void 0===n?void 0:n.plan),taskCount:(null===(o=null===(a=null===(i=s.data)||void 0===i?void 0:i.plan)||void 0===a?void 0:a.tasks)||void 0===o?void 0:o.length)||0}),{success:!0,result:s}}catch(t){return this.error("âŒ Task planning test failed",t),{success:!1,error:t instanceof Error?t.message:String(t)}}})}}const f=m.getInstance();class y extends Error{constructor(t,e,n){super(t),this.name="VaultManagementError",this.code=e,this.feature=n}}class b{constructor(t,e){this.baseUrl=t,this.apiKey=e}getVaultStructure(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Failed to get vault structure: ${e.statusText}`,"STRUCTURE_FETCH_FAILED","structure");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"structure"),t}})}performFileOperation(t){return e(this,void 0,void 0,function*(){try{this.validateFileOperationRequest(t);const e=yield this.makeRequest("/api/obsidian/vault/file/operation",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`File operation failed: ${e.statusText}`,"FILE_OPERATION_FAILED","file-operations");const n=yield e.json();if(!n.success)throw new y(n.message||"File operation failed","FILE_OPERATION_FAILED","file-operations");return n}catch(t){throw this.handleVaultManagementError(t,"file-operations"),t}})}performBatchOperations(t){return e(this,void 0,void 0,function*(){try{if(!t.operations||0===t.operations.length)throw new y("No operations specified for batch request","INVALID_BATCH_REQUEST","batch-operations");t.operations.forEach((t,e)=>{try{this.validateFileOperationRequest(t)}catch(t){throw new y(`Invalid operation at index ${e}: ${t.message||t}`,"INVALID_BATCH_OPERATION","batch-operations")}});const e=yield this.makeRequest("/api/obsidian/vault/file/batch",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Batch operations failed: ${e.statusText}`,"BATCH_OPERATION_FAILED","batch-operations");const n=yield e.json();if(!n.success)throw new y(n.message||"Batch operations failed","BATCH_OPERATION_FAILED","batch-operations");return n}catch(t){throw this.handleVaultManagementError(t,"batch-operations"),t}})}searchVault(t){return e(this,void 0,void 0,function*(){try{if(!t.query||0===t.query.trim().length)throw new y("Search query cannot be empty","INVALID_SEARCH_QUERY","search");const e=yield this.makeRequest("/api/obsidian/vault/search",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Search failed: ${e.statusText}`,"SEARCH_FAILED","search");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"search"),t}})}organizeVault(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/organize",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Organization analysis failed: ${e.statusText}`,"ORGANIZATION_FAILED","organization");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"organization"),t}})}backupVault(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/backup",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Backup failed: ${e.statusText}`,"BACKUP_FAILED","backup");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"backup"),t}})}createFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!1){return this.performFileOperation({operation:"create",file_path:t,content:e,backup:n})})}updateFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!0){return this.performFileOperation({operation:"update",file_path:t,content:e,backup:n})})}deleteFile(t){return e(this,arguments,void 0,function*(t,e=!0){return this.performFileOperation({operation:"delete",file_path:t,backup:e})})}moveFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!0){return this.performFileOperation({operation:"move",file_path:t,new_path:e,backup:n})})}copyFile(t,n){return e(this,void 0,void 0,function*(){return this.performFileOperation({operation:"copy",file_path:t,new_path:n})})}quickSearch(t){return e(this,arguments,void 0,function*(t,e=20){return this.searchVault({query:t,search_type:"comprehensive",max_results:e,include_content:!0})})}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl.replace(/\/$/,"")}${t}`,i=Object.assign({"Content-Type":"application/json"},e.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);const a=Object.assign(Object.assign({},e),{headers:i});try{return yield fetch(n,a)}catch(t){throw new y(`Network request failed: ${t.message||t}`,"NETWORK_ERROR","api")}})}validateFileOperationRequest(t){if(!t.file_path||0===t.file_path.trim().length)throw new y("File path is required","INVALID_FILE_PATH","validation");if(!("move"!==t.operation&&"copy"!==t.operation||t.new_path&&0!==t.new_path.trim().length))throw new y("New path is required for move/copy operations","INVALID_NEW_PATH","validation");if(("create"===t.operation||"update"===t.operation)&&void 0===t.content)throw new y("Content is required for create/update operations","INVALID_CONTENT","validation")}handleVaultManagementError(e,n){console.error(`Vault management error in ${n}:`,e),e instanceof y?new t.Notice(`Vault ${n} error: ${e.message}`,5e3):new t.Notice(`Vault ${n} operation failed`,3e3)}testConnection(){return e(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify({include_content:!1,max_depth:1})});return t.ok?{success:!0,message:"Vault management connection successful"}:{success:!1,message:`Connection failed: ${t.status} ${t.statusText}`}}catch(t){return{success:!1,message:`Connection error: ${t.message||t}`}}})}}class k{static detect(){const t={platform:"unknown",hasFileSystem:!1,hasWebSocket:!1,hasHTTP:!1,capabilities:[]};return"undefined"!=typeof window&&window.app&&window.app.workspace?t.platform="obsidian":"undefined"!=typeof window?t.platform="browser":void 0!==globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node&&(t.platform="node"),t.hasHTTP="undefined"!=typeof fetch,t.hasWebSocket="undefined"!=typeof WebSocket,t.hasFileSystem=void 0!==globalThis.require&&"node"===t.platform,t.hasHTTP&&t.capabilities.push("http"),t.hasWebSocket&&t.capabilities.push("websocket"),t.hasFileSystem&&t.capabilities.push("filesystem"),t}static isObsidian(){return"obsidian"===this.detect().platform}static canUseFileSystem(){return this.detect().hasFileSystem}static canUseWebSocket(){return this.detect().hasWebSocket}static getOptimalTransport(){const t=this.detect();if(t.hasWebSocket)return"websocket";if(t.hasHTTP)return"http";if(t.hasFileSystem)return"filesystem";throw new Error("No suitable transport available")}}class w{constructor(t){this.isConnected=!1,this.messageId=1,this.pendingRequests=new Map,this.eventListeners=new Map,this.config=t,this.environment=k.detect(),this.serverUrl=t.server_url,this.config.debug_mode&&console.log("DevPipe Environment:",this.environment)}on(t,e){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(e)}off(t,e){const n=this.eventListeners.get(t);if(n){const t=n.indexOf(e);t>-1&&n.splice(t,1)}}emit(t,e){const n=this.eventListeners.get(t);n&&n.forEach(t=>t(e))}initialize(){return e(this,void 0,void 0,function*(){try{if(!this.environment.hasHTTP)throw new Error("HTTP transport not available in this environment");yield this.testConnection(),this.isConnected=!0,this.emit("connected",{status:"connected",environment:this.environment.platform,transport:"http"}),this.config.debug_mode&&console.log("DevPipe client initialized successfully")}catch(t){throw this.emit("error",t),new Error(`Failed to initialize DevPipe client: ${t instanceof Error?t.message:"Unknown error"}`)}})}testConnection(){return e(this,void 0,void 0,function*(){const t=yield fetch(`${this.serverUrl}/api/v1/devpipe/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!t.ok)throw new Error(`DevPipe server not accessible: ${t.status} ${t.statusText}`)})}sendMessage(t,n){return e(this,arguments,void 0,function*(t,e,n=3e4){if(!this.isConnected)throw new Error("DevPipe client not connected");const i=this.generateMessageId(),a={id:i,timestamp:(new Date).toISOString(),type:t,payload:e,sender:"vaultpilot-plugin",recipient:"evoagentx-backend",priority:"normal"};return new Promise((t,e)=>{const o=window.setTimeout(()=>{this.pendingRequests.delete(i),e(new Error(`Request timeout after ${n}ms`))},n);this.pendingRequests.set(i,{resolve:t,reject:e,timeout:o}),this.sendMessageToServer(a).catch(t=>{this.pendingRequests.delete(i),window.clearTimeout(o),e(t)})})})}sendMessageToServer(t){return e(this,void 0,void 0,function*(){try{const e=yield fetch(`${this.serverUrl}/api/v1/devpipe/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`DevPipe server error: ${e.status}`);const n=yield e.json();if(n.response&&n.response.id===t.id){const e=this.pendingRequests.get(t.id);e&&(window.clearTimeout(e.timeout),this.pendingRequests.delete(t.id),e.resolve(n.response.payload))}return this.config.debug_mode&&console.log("DevPipe message sent successfully:",t.type),n}catch(t){throw this.config.debug_mode&&console.error("Error sending DevPipe message:",t),t}})}generateMessageId(){return`msg_${Date.now()}_${this.messageId++}`}disconnect(){return e(this,void 0,void 0,function*(){for(const[t,e]of this.pendingRequests)window.clearTimeout(e.timeout),e.reject(new Error("DevPipe client disconnected"));this.pendingRequests.clear(),this.isConnected=!1,this.emit("disconnected",{status:"disconnected"})})}isReady(){return this.isConnected}getPendingRequestCount(){return this.pendingRequests.size}}class x extends Error{constructor(t,e,n,i){super(e),this.name="ModelSelectionError",this.code=t,this.details=n,this.suggestions=i}}class E{constructor(t,e="",n={}){this.cachedHealth=[],this.lastHealthUpdate=0,this.eventListeners=new Map,this.config={devpipe_path:e,server_url:t,monitoring_interval:n.monitoring_interval||3e4,fallback_enabled:!1!==n.fallback_enabled,cache_duration:n.cache_duration||3e5,retry_attempts:n.retry_attempts||3,timeout:n.timeout||3e4,debug_mode:n.debug_mode||!1},this.devPipeClient=new w(this.config),this.userPreferences={priority:"balanced",max_cost_per_request:.5,preferred_providers:[],fallback_enabled:!0,quality_threshold:.7,timeout_preference:3e4},this.setupEventListeners()}setupEventListeners(){this.devPipeClient.on("connected",()=>{this.emit("connected",{status:"connected"})}),this.devPipeClient.on("disconnected",()=>{this.emit("disconnected",{status:"disconnected"})}),this.devPipeClient.on("health-updated",t=>{this.cachedHealth=t,this.lastHealthUpdate=Date.now(),this.emit("health-updated",t)}),this.devPipeClient.on("performance-metrics",t=>{this.emit("performance-metrics",t)})}initialize(){return e(this,void 0,void 0,function*(){try{yield this.devPipeClient.initialize(),yield this.refreshModelHealth(),this.startHealthMonitoring(),this.config.debug_mode&&console.log("ModelSelectionService initialized successfully")}catch(t){throw new Error(`Failed to initialize ModelSelectionService: ${t instanceof Error?t.message:"Unknown error"}`)}})}selectModel(t){return e(this,void 0,void 0,function*(){try{return yield this.performSelection(t)}catch(e){if(this.config.fallback_enabled)return yield this.fallbackSelection(t,e);throw e}})}performSelection(t){return e(this,void 0,void 0,function*(){if(!this.devPipeClient.isReady())throw new x("NO_HEALTHY_MODELS","DevPipe client not connected",{},["Check server connection","Retry initialization"]);const e=Object.assign(Object.assign({},t),{user_preferences:this.userPreferences,timeout_ms:t.timeout_ms||this.config.timeout});return yield this.devPipeClient.sendMessage("model-selection-request",e,this.config.timeout)})}fallbackSelection(t,n){return e(this,void 0,void 0,function*(){console.warn("Model selection failed, using fallback:",n);const e=this.getCachedSelection(t);return e||this.staticModelSelection(t)})}staticModelSelection(t){const e={"text-generation":{name:"gpt-3.5-turbo",cost:.002},"code-generation":{name:"gpt-4",cost:.03},chat:{name:"gpt-3.5-turbo",cost:.002},summarization:{name:"gpt-3.5-turbo",cost:.002},translation:{name:"gpt-3.5-turbo",cost:.002}},n=e[t.task_type]||e["text-generation"];return{selected_model:{id:n.name,name:n.name,provider:"openai",capabilities:[{type:t.task_type,score:.8}],cost_per_token:n.cost,max_tokens:4e3,response_time_avg_ms:2e3,availability_score:.9,quality_score:.8},reasoning:"Fallback selection due to service unavailability",fallback_models:[],estimated_cost:100*n.cost,estimated_time_ms:2e3,selection_metadata:{selection_time_ms:0,factors_considered:["fallback"],confidence_score:.5}}}getCachedSelection(t){return null}selectModel_OLD(t){return e(this,void 0,void 0,function*(){if(!this.devPipeClient.isReady())throw new x("NO_HEALTHY_MODELS","DevPipe client not connected",{},["Check server connection","Retry initialization"]);try{const e=Object.assign(Object.assign({},t),{user_preferences:this.userPreferences,timeout_ms:t.timeout_ms||this.config.timeout}),n=yield this.devPipeClient.sendMessage("model-selection-request",e,t.timeout_ms||this.config.timeout);return this.emit("model-selected",n),this.config.debug_mode&&console.log("Model selected:",n.selected_model.name,"for task:",t.task_type),n}catch(t){if(t instanceof Error){if(t.message.includes("timeout"))throw new x("TIMEOUT","Model selection request timed out",{originalError:t},["Increase timeout","Check server performance"]);if(t.message.includes("budget")||t.message.includes("cost"))throw new x("BUDGET_EXCEEDED","Request exceeds budget limits",{originalError:t},["Increase budget","Use lower cost models"])}throw new x("SERVICE_UNAVAILABLE","Model selection service unavailable",{originalError:t},["Check server status","Retry request"])}})}getModelHealth(){return e(this,void 0,void 0,function*(){return this.cachedHealth.length>0&&Date.now()-this.lastHealthUpdate<this.config.cache_duration?this.cachedHealth:yield this.refreshModelHealth()})}refreshModelHealth(){return e(this,void 0,void 0,function*(){try{const t=yield this.devPipeClient.sendMessage("health-check-request",{},1e4);return this.cachedHealth=t,this.lastHealthUpdate=Date.now(),t}catch(t){return this.config.debug_mode&&console.warn("Failed to refresh model health:",t),this.cachedHealth}})}updatePreferences(t){return e(this,void 0,void 0,function*(){this.userPreferences=Object.assign(Object.assign({},this.userPreferences),t);try{yield this.devPipeClient.sendMessage("preferences-update",this.userPreferences,5e3),this.emit("preferences-updated",this.userPreferences),this.config.debug_mode&&console.log("User preferences updated:",this.userPreferences)}catch(t){this.config.debug_mode&&console.warn("Failed to sync preferences with server:",t)}})}getPreferences(){return Object.assign({},this.userPreferences)}startHealthMonitoring(){this.config.monitoring_interval>0&&setInterval(()=>e(this,void 0,void 0,function*(){try{yield this.refreshModelHealth()}catch(t){this.config.debug_mode&&console.warn("Health monitoring failed:",t)}}),this.config.monitoring_interval)}on(t,e){this.eventListeners.has(t)||this.eventListeners.set(t,[]),this.eventListeners.get(t).push(e)}off(t,e){const n=this.eventListeners.get(t);if(n){const t=n.indexOf(e);t>-1&&n.splice(t,1)}}emit(t,e){const n=this.eventListeners.get(t);n&&n.forEach(t=>{try{t(e)}catch(t){this.config.debug_mode&&console.error("Event listener error:",t)}})}selectForTask(t){return e(this,arguments,void 0,function*(t,e="medium"){return this.selectModel({task_type:t,quality_requirement:e})})}selectCostOptimized(t){return e(this,arguments,void 0,function*(t,e=.01){return this.selectModel({task_type:t,quality_requirement:"medium",max_cost:e})})}selectHighPerformance(t){return e(this,void 0,void 0,function*(){return this.selectModel({task_type:t,quality_requirement:"high"})})}isConnected(){return this.devPipeClient.isReady()}getConfig(){return Object.assign({},this.config)}disconnect(){return e(this,void 0,void 0,function*(){yield this.devPipeClient.disconnect()})}}class S extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setFocusPath(t){return this.focusPath=t,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:t}=this;t.empty(),t.addClass("vault-structure-modal");const e=t.createEl("div",{cls:"modal-header"});e.createEl("h2",{text:"Vault Structure Analysis"});const n=e.createEl("button",{text:"ðŸ”„ Refresh",cls:"mod-cta"}),i=t.createDiv({cls:"vault-loading"});i.setText("ðŸ” Analyzing vault structure...");try{const e=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:5});i.remove(),this.renderStructure(t,e),n.onclick=()=>{this.onOpen()}}catch(e){i.setText("âŒ Failed to load vault structure"),console.error(e);t.createEl("button",{text:"Retry",cls:"mod-cta"}).onclick=()=>this.onOpen()}})}renderStructure(t,e){t.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“</span>\n          <span class="stat-label">Files</span>\n          <span class="stat-value">${e.total_files}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“‚</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${e.total_folders}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ’¾</span>\n          <span class="stat-label">Size</span>\n          <span class="stat-value">${(e.total_size/1024/1024).toFixed(2)} MB</span>\n        </div>\n      </div>\n    `;const n=t.createDiv({cls:"vault-tree-container"});n.createEl("h3",{text:"Folder Structure"});const i=n.createDiv({cls:"vault-tree"});if(this.renderFolder(i,e.structure,0),e.recent_files.length>0){const n=t.createDiv({cls:"recent-files-container"});n.createEl("h3",{text:"Recent Files"});const i=n.createDiv({cls:"recent-files"});e.recent_files.slice(0,10).forEach(t=>{i.createDiv({cls:"recent-file"}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${t.name}</span>\n          <span class="file-date">${new Date(t.modified).toLocaleDateString()}</span>\n        `})}if(e.orphaned_files.length>0){const n=t.createDiv({cls:"orphaned-files-container"});n.createEl("h3",{text:"âš ï¸ Orphaned Files"});const i=n.createDiv({cls:"orphaned-files"});e.orphaned_files.forEach(t=>{i.createDiv({cls:"orphaned-file"}).innerHTML=`\n          <span class="file-icon">ðŸ”—</span>\n          <span class="file-path">${t.path}</span>\n        `})}}renderFolder(t,e,n){const i=t.createDiv({cls:"folder-item",attr:{"data-level":n.toString()}});i.innerHTML=`\n      <span class="folder-toggle">â–¶</span>\n      <span class="folder-icon">ðŸ“</span>\n      <span class="folder-name">${e.name}</span>\n      <span class="folder-count">(${e.children.length})</span>\n    `;const a=t.createDiv({cls:"folder-children",attr:{style:"display: none;"}}),o=i.querySelector(".folder-toggle");o.onclick=()=>{const t="none"!==a.style.display;a.style.display=t?"none":"block",o.textContent=t?"â–¶":"â–¼"},e.children.forEach(t=>{if("folder"===t.type)this.renderFolder(a,t,n+1);else{a.createDiv({cls:"file-item",attr:{"data-level":(n+1).toString()}}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${t.name}</span>\n          <span class="file-size">${(t.size/1024).toFixed(1)}KB</span>\n        `}})}onClose(){const{contentEl:t}=this;t.empty()}}class C extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setInitialQuery(t,e){return this.initialQuery=t,this.searchType=e,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:n}=this;n.empty(),n.addClass("smart-search-modal"),n.createEl("h2",{text:"ðŸ” Smart Vault Search"});const i=n.createDiv({cls:"search-form"}),a=i.createEl("input",{type:"text",placeholder:"Enter search query...",cls:"search-query-input"});this.initialQuery&&(a.value=this.initialQuery);const o=i.createEl("select",{cls:"search-type-select"});[{value:"comprehensive",label:"Comprehensive"},{value:"content",label:"Content"},{value:"filename",label:"Filename"},{value:"tags",label:"Tags"},{value:"links",label:"Links"}].forEach(t=>{const e=o.createEl("option",{value:t.value});e.textContent=t.label,t.value===(this.searchType||"comprehensive")&&(e.selected=!0)});const s=i.createEl("button",{text:"Search",cls:"mod-cta search-button"}),l=n.createDiv({cls:"search-results-container"}),r=()=>e(this,void 0,void 0,function*(){var e;const n=a.value.trim();if(!n)return void new t.Notice("Please enter a search query");s.textContent="Searching...",s.disabled=!0,l.empty();const i=l.createDiv({cls:"search-loading"});i.textContent="ðŸ” Searching vault...";try{const t=yield this.vaultClient.searchVault({query:n,search_type:o.value,max_results:(null===(e=this.plugin.settings.vaultManagement)||void 0===e?void 0:e.searchResultsLimit)||50,include_content:!0});i.remove(),this.renderSearchResults(l,t)}catch(t){i.textContent="âŒ Search failed",console.error("Search error:",t)}finally{s.textContent="Search",s.disabled=!1}});s.onclick=r,a.addEventListener("keypress",t=>{"Enter"===t.key&&r()}),this.initialQuery&&r(),a.focus()})}renderSearchResults(t,e){if(t.createEl("h3",{text:`Search Results (${e.total_found})`}),e.insights){t.createDiv({cls:"search-insights"}).innerHTML=`\n        <div class="insights-header">ðŸ§  AI Insights</div>\n        <div class="insights-content">${e.insights}</div>\n      `}if(0===e.results.length)return void t.createDiv({cls:"no-results",text:"No results found. Try a different search term or type."});const n=t.createDiv({cls:"search-results-list"});if(e.results.forEach(t=>{const e=n.createDiv({cls:"search-result"});e.innerHTML=`\n        <div class="result-header">\n          <span class="result-file-name">${t.file_name}</span>\n          <span class="result-match-type">${t.match_type}</span>\n          <span class="result-score">${(100*t.score).toFixed(0)}%</span>\n        </div>\n        <div class="result-path">${t.file_path}</div>\n        <div class="result-preview">${t.preview}</div>\n        ${t.matches.length>0?`\n          <div class="result-matches">\n            <strong>Matches:</strong> ${t.matches.join(", ")}\n          </div>\n        `:""}\n      `,e.onclick=()=>{this.app.workspace.openLinkText(t.file_path,""),this.close()}}),e.suggested_queries&&e.suggested_queries.length>0){const n=t.createDiv({cls:"suggested-queries"});n.createEl("h4",{text:"ðŸ’¡ Suggested Queries"});const i=n.createDiv({cls:"suggestions-list"});e.suggested_queries.forEach(t=>{i.createEl("button",{text:t,cls:"suggestion-button"}).onclick=()=>{const e=this.contentEl.querySelector(".search-query-input");e&&(e.value=t,e.dispatchEvent(new KeyboardEvent("keypress",{key:"Enter"})))}})}}onClose(){const{contentEl:t}=this;t.empty()}}class M extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setInitialPath(t){return this.initialPath=t,this}setOperation(t){return this.operation=t,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:e}=this;e.empty(),e.addClass("file-operations-modal"),e.createEl("h2",{text:"ðŸ“ File Operations Manager"}),new t.Setting(e).setName("Operation").setDesc("Select the file operation to perform").addDropdown(t=>t.addOption("create","Create File").addOption("update","Update File").addOption("delete","Delete File").addOption("move","Move File").addOption("copy","Copy File").setValue(this.operation||"create").onChange(t=>{this.operation=t,this.updateOperationForm()})),e.createDiv({cls:"operation-form"}),this.updateOperationForm()})}updateOperationForm(){const e=this.contentEl.querySelector(".operation-form");if(!e)return;e.empty();const n=this.operation||"create";new t.Setting(e).setName("File Path").setDesc("Path to the file (including filename)").addText(t=>t.setPlaceholder("path/to/file.md").setValue(this.initialPath||"").onChange(t=>this.initialPath=t)),"move"!==n&&"copy"!==n||new t.Setting(e).setName("New Path").setDesc("Destination path for the file").addText(t=>t.setPlaceholder("new/path/to/file.md")),"create"!==n&&"update"!==n||new t.Setting(e).setName("Content").setDesc("File content").addTextArea(t=>{t.setPlaceholder("Enter file content..."),"create"===n&&t.setValue("# New File\n\nContent goes here...")}),"create"!==n&&new t.Setting(e).setName("Create Backup").setDesc("Create a backup before performing the operation").addToggle(t=>t.setValue(!0)),new t.Setting(e).addButton(t=>t.setButtonText(`Execute ${n.charAt(0).toUpperCase()+n.slice(1)}`).setCta().onClick(()=>this.executeOperation()))}executeOperation(){return e(this,void 0,void 0,function*(){var e;const n=this.operation||"create",i=this.contentEl.querySelector('input[placeholder*="path/to/file"]'),a=this.contentEl.querySelector('input[placeholder*="new/path"]'),o=this.contentEl.querySelector("textarea"),s=this.contentEl.querySelector('input[type="checkbox"]');if(!(null==i?void 0:i.value))return void new t.Notice("File path is required");const l={operation:n,file_path:i.value,backup:null===(e=null==s?void 0:s.checked)||void 0===e||e};(null==a?void 0:a.value)&&(l.new_path=a.value),(null==o?void 0:o.value)&&(l.content=o.value);try{new t.Notice(`Performing ${n}...`);const e=yield this.vaultClient.performFileOperation(l);new t.Notice(`âœ… ${n} successful: ${e.message}`),this.close()}catch(e){new t.Notice(`âŒ ${n} failed: ${e.message}`)}})}onClose(){const{contentEl:t}=this;t.empty()}}class P extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e,n,i,d;yield this.loadSettings(),d=this.app,c=d,this.apiClient=new p(this.settings.backendUrl,this.settings.apiKey),(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)&&this.initializeVaultManagement(),(null===(n=this.settings.modelSelection)||void 0===n?void 0:n.enabled)&&(yield this.initializeModelSelection());try{let e=yield this.apiClient.healthCheck();if(!e.success&&(null===(i=e.error)||void 0===i?void 0:i.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(e={success:!0,data:{status:t.data.status,version:"unknown"}})}e.success?(new t.Notice("âœ… VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",e.error),new t.Notice("âš ï¸ EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("âš ï¸ Cannot connect to EvoAgentX backend",5e3)}this.registerView(o,t=>new s(t,this)),this.registerView(l,t=>new r(t,this));const u=this.addRibbonIcon("bot","VaultPilot",t=>{t.ctrlKey||t.metaKey?this.activateFullTabView():this.openChatModal()});u.addClass("vaultpilot-ribbon-class"),u.title="VaultPilot (Ctrl+click for Dashboard)",this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"plan-my-day-debug",name:"Plan My Day - Debug Connection",callback:()=>this.debugPlanMyDay()}),this.addCommand({id:"test-model-selection",name:"Test Smart Model Selection",callback:()=>this.testModelSelection()}),this.addCommand({id:"show-model-health",name:"Show Model Health Status",callback:()=>this.showModelHealth()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.addCommand({id:"open-vaultpilot-full-tab",name:"Open VaultPilot Dashboard",callback:()=>this.activateFullTabView()}),this.registerVaultManagementCommands(),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new a(this.app,this))})}onunload(){return e(this,void 0,void 0,function*(){this.app.workspace.detachLeavesOfType(o),this.app.workspace.detachLeavesOfType(l),this.disconnectWebSocket(),yield this.disconnectModelSelection()})}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onIntentDebug:t=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new u(this.app,this).open()}openWorkflowModal(){new h(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let i="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);i+=`=== ${t.name} ===\n${e}\n\n`}const a=yield this.apiClient.analyzeVaultContext({content:i,analysis_type:"insights"});if(e.hide(),!a.success||!a.data)throw new Error(a.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let i=`# Vault Analysis - ${e}\n\n`;i+=`## Analysis\n\n${a.data.analysis}\n\n`,a.data.insights&&a.data.insights.length>0&&(i+="## Key Insights\n\n",a.data.insights.forEach(t=>{i+=`- ${t}\n`}),i+="\n"),a.data.recommendations&&a.data.recommendations.length>0&&(i+="## Recommendations\n\n",a.data.recommendations.forEach(t=>{i+=`- ${t}\n`})),yield this.app.vault.create(n,i),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),i=n.getLine(e.line).substring(0,e.ch),a=n.getValue();if(a&&0!==a.trim().length)try{const o=yield this.apiClient.getCopilotCompletion({text:a,cursor_position:n.posToOffset(e),file_type:"markdown",context:i});o.success&&o.data?(n.replaceRange(o.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${o.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const i=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(i.success&&i.data){const e=n.getCursor("to"),a=`\n\n**VaultPilot Analysis:**\n${i.data.response}\n\n`;n.replaceRange(a,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${i.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),i=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const a=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==i?void 0:i.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(a.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],a=`Task Plan - ${(null==i?void 0:i.basename)||"Untitled"} - ${e}.md`;let o=`# ${n.data.plan.title}\n\n`;o+=`${n.data.plan.description}\n\n`,o+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(o+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";o+=`${e} **${t.title}** (${t.priority} priority)\n`,o+=`   ${t.description}\n`,o+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(o+="## Milestones\n\n",n.data.milestones.forEach(t=>{o+=`- **${t.title}** (${t.target_date})\n`,o+=`  ${t.description}\n\n`})),yield this.app.vault.create(a,o),new t.Notice(`Task plan saved as ${a}`)}}catch(e){a.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){var n,i;console.log("ðŸš€ [Plan My Day] Command started");const a=this.app.workspace.getActiveFile();if(!a)return console.warn("âš ï¸ [Plan My Day] No active file found"),void new t.Notice("No active noteâ€”open today's daily note first.");console.log("ðŸ“ [Plan My Day] Active file:",{name:a.name,path:a.path,extension:a.extension});const o=new t.Notice("Planning your day with AI...",0);try{console.log("ðŸ“– [Plan My Day] Reading file content...");const s=yield this.app.vault.read(a);if(console.log("ðŸ“ [Plan My Day] File content read:",{length:s.length,hasContent:s.trim().length>0,firstLine:s.split("\n")[0],lineCount:s.split("\n").length}),console.log("ðŸ” [Plan My Day] Checking API client..."),console.log("ðŸ”— [Plan My Day] API client status:",{exists:!!this.apiClient,type:typeof this.apiClient,isConnected:this.apiClient?"available":"not available"}),!this.apiClient){const t="API client not initialized. Check VaultPilot settings and connection.";throw console.error("âŒ [Plan My Day] Error:",t),new Error(t)}console.log("ðŸ“¤ [Plan My Day] Fetching schedule from EvoAgentX...");const{scheduleMarkdown:l,headline:r}=yield function(t,n){return e(this,void 0,void 0,function*(){var e,i,a;if(console.log("ðŸ”„ [Plan My Day] Starting schedule fetch..."),console.log("ðŸ“ [Plan My Day] Note text length:",t.length),console.log("ðŸ”— [Plan My Day] API client type:",typeof n),!n){const t="API client is null or undefined";throw console.error("âŒ [Plan My Day] Error:",t),new Error(t)}if(!n.planTasks){const t="API client does not have planTasks method";throw console.error("âŒ [Plan My Day] Error:",t),console.log("ðŸ” [Plan My Day] Available methods:",Object.getOwnPropertyNames(n)),new Error(t)}try{console.log("ðŸ“¤ [Plan My Day] Sending request to EvoAgentX...");const o=yield n.planTasks({goal:"Create a daily schedule based on this note content",context:t,timeframe:"1 day"});if(console.log("ðŸ“¥ [Plan My Day] Received response:",{success:o.success,hasData:!!o.data,error:o.error}),console.log("ðŸ” [Plan My Day] Raw response data:",JSON.stringify(o.data,null,2)),console.log("ðŸ” [Plan My Day] Response data type:",typeof o.data),console.log("ðŸ” [Plan My Day] Response data keys:",o.data?Object.keys(o.data):"no data"),!o.success){const t=o.error||"Failed to generate schedule";throw console.error("âŒ [Plan My Day] API Error:",t),new Error(t)}if(!o.data){const t="No data in API response";throw console.error("âŒ [Plan My Day] Error:",t),console.log("ðŸ” [Plan My Day] Full response:",o),new Error(t)}const s=o.data.data||o.data;if(console.log("ðŸ“‹ [Plan My Day] Response data structure:",{hasPlan:!!s.plan,planKeys:s.plan?Object.keys(s.plan):null,hasTasks:!!(null===(e=s.plan)||void 0===e?void 0:e.tasks),taskCount:(null===(a=null===(i=s.plan)||void 0===i?void 0:i.tasks)||void 0===a?void 0:a.length)||0}),!s.plan){const t="No plan data in API response";throw console.error("âŒ [Plan My Day] Error:",t),console.log("ðŸ” [Plan My Day] Full response data:",o.data),console.log("ðŸ” [Plan My Day] Actual data:",s),new Error(t)}const l=s.plan.tasks||[];if(console.log("ðŸ“ [Plan My Day] Processing tasks:",l.length),0===l.length)return console.warn("âš ï¸ [Plan My Day] No tasks in response, creating fallback schedule"),{scheduleMarkdown:"| Time | Task |\n|------|------|\n| 9:00 AM | Plan your day |\n| 10:00 AM | Start working |\n| 12:00 PM | Lunch break |",headline:"ðŸ“… Basic schedule created (no tasks found in note)"};let r="| Time | Task |\n|------|------|\n";l.forEach((t,e)=>{var n,i;console.log(`ðŸ“‹ [Plan My Day] Processing task ${e+1}:`,{title:t.title,description:null===(n=t.description)||void 0===n?void 0:n.substring(0,100),priority:t.priority,estimatedTime:t.estimated_time});const a=null===(i=t.description)||void 0===i?void 0:i.match(/(\d{1,2}:\d{2})/),o=a?a[1]:`${9+Math.floor(1.5*e)}:${30*e%60||"00"}`;r+=`| ${o} | ${t.title} |\n`});const c={scheduleMarkdown:r,headline:`âœ¨ Smart schedule created with ${l.length} tasks!`};return console.log("âœ… [Plan My Day] Schedule generated successfully:",{markdownLength:r.length,taskCount:l.length,headline:c.headline}),c}catch(t){throw console.error("âŒ [Plan My Day] Fetch error:",t),console.error("ðŸ” [Plan My Day] Error stack:",t instanceof Error?t.stack:"No stack trace"),t instanceof Error?new Error(`Schedule fetch failed: ${t.message}`):new Error(`Schedule fetch failed: ${String(t)}`)}})}(s,this.apiClient);if(console.log("ðŸ“‹ [Plan My Day] Schedule received:",{markdownLength:l.length,headline:r,firstLine:l.split("\n")[0]}),console.log("âœ… [Plan My Day] Validating schedule..."),!function(t){console.log("ðŸ” [Plan My Day] Validating schedule markdown:",{length:t.length,trimmedLength:t.trim().length,isString:"string"==typeof t,preview:t.substring(0,100)});const e=t.trim().length>0;return console.log("âœ… [Plan My Day] Validation result:",e),e}(l)){const t="Invalid schedule data received from API";throw console.error("âŒ [Plan My Day] Validation failed:",{scheduleMarkdown:l.substring(0,200),length:l.length}),new Error(t)}console.log("ðŸ“ [Plan My Day] Injecting schedule into note...");const c=g(s),d=v(s);console.log("ðŸ” [Plan My Day] Existing sections:",{hasPlanWrapper:!!c,hasScheduleSection:!!d,planContent:null===(n=null==c?void 0:c[2])||void 0===n?void 0:n.substring(0,50),scheduleHeading:null===(i=null==d?void 0:d[1])||void 0===i?void 0:i.substring(0,50)});const u=function(t,e){var n,i,a;console.log("ðŸ“ [Plan My Day] Injecting schedule:",{originalLength:t.length,scheduleLength:e.length,hasOriginalContent:t.trim().length>0});const o=g(t);if(o){console.log("ðŸ”„ [Plan My Day] Replacing existing plan section with comment wrapper"),console.log("ðŸ“‹ [Plan My Day] Found wrapped plan section:",{startComment:o[1],contentLength:(null===(n=o[2])||void 0===n?void 0:n.length)||0,endComment:o[3]});const[i,a,,s]=o,l=`${a}\n${e}\n${s}`,r=t.replace(i,l);return console.log("âœ… [Plan My Day] Plan section replaced within comment wrapper"),r}const s=v(t);if(s){console.log("ðŸ”„ [Plan My Day] Replacing existing schedule section"),console.log("ðŸ“‹ [Plan My Day] Found section:",{headingMatch:null===(i=s[1])||void 0===i?void 0:i.substring(0,50),contentMatch:null===(a=s[2])||void 0===a?void 0:a.substring(0,100)});const[n,o]=s,l=o+e,r=t.replace(n,l);return console.log("âœ… [Plan My Day] Schedule section replaced"),r}{console.log("âž• [Plan My Day] Adding new plan section with comment wrapper at top");const n=`\x3c!-- vp:plan:start --\x3e\n${e}\n\x3c!-- vp:plan:end --\x3e\n\n`+t;return console.log("âœ… [Plan My Day] New plan section with wrapper added at top"),n}}(s,l);console.log("ðŸ’¾ [Plan My Day] Updating file...",{originalLength:s.length,updatedLength:u.length,changed:s!==u}),yield this.app.vault.modify(a,u),console.log("âœ… [Plan My Day] File updated successfully"),o.hide();const h=r?`${r} âœ…`:"Schedule inserted âœ…";console.log("ðŸŽ‰ [Plan My Day] Success:",h),new t.Notice(h)}catch(e){if(console.error("âŒ [Plan My Day] Operation failed:",e),console.error("ðŸ” [Plan My Day] Error details:",{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:"No stack trace",type:typeof e,name:e instanceof Error?e.name:"Unknown"}),o.hide(),e instanceof Error){const n=e.message;console.log("ðŸ” [Plan My Day] Analyzing error message:",n),n.includes("API client not initialized")?(console.error("âŒ [Plan My Day] API client not initialized"),new t.Notice("Planning error: VaultPilot not connected to EvoAgentX. Check settings and restart plugin.")):n.includes("does not have planTasks method")?(console.error("âŒ [Plan My Day] API client missing planTasks method"),new t.Notice("Planning error: EvoAgentX API client outdated. Please update VaultPilot plugin.")):n.includes("JSON")||n.includes("Invalid schedule data")?(console.error("âŒ [Plan My Day] Invalid response format"),new t.Notice("Planning error: Invalid response format from EvoAgentX")):n.includes("fetch")||n.includes("network")||n.includes("Failed to fetch")?(console.error("âŒ [Plan My Day] Network error"),new t.Notice("Planning error: Unable to connect to EvoAgentX server. Check your connection and server status.")):n.includes("Failed to generate schedule")||n.includes("Schedule fetch failed")?(console.error("âŒ [Plan My Day] Schedule generation failed"),new t.Notice("Planning error: EvoAgentX task planning failed. Check server logs for details.")):n.includes("No data in API response")?(console.error("âŒ [Plan My Day] Empty API response"),new t.Notice("Planning error: EvoAgentX returned empty response. Try again or check server status.")):(console.error("âŒ [Plan My Day] Unhandled error"),new t.Notice(`Planning error: ${n.substring(0,100)}${n.length>100?"...":""}`))}else console.error("âŒ [Plan My Day] Non-Error object thrown"),new t.Notice("Planning error: Unknown error occurred with EvoAgentX");console.log("ðŸ” [Plan My Day] Full error log completed")}})}debugPlanMyDay(){return e(this,void 0,void 0,function*(){console.log("ðŸ” [Plan My Day Debug] Starting comprehensive debug..."),f.clearLogs();const e=new t.Notice("Running Plan My Day diagnostics...",0);try{const n=this.app.workspace.getActiveFile();f.log("ðŸ“ Active file check",{hasActiveFile:!!n,fileName:null==n?void 0:n.name,fileExtension:null==n?void 0:n.extension});const i=f.analyzeApiClient(this.apiClient);if(f.log("ðŸ”— API client analysis",i),this.apiClient){const t=yield f.testConnection(this.apiClient);if(f.log("ðŸŒ Connection test result",t),t.success){const t=yield f.testTaskPlanning(this.apiClient,"Test note with some tasks:\n- Write code\n- Test functionality\n- Review results");f.log("ðŸ“‹ Task planning test result",t)}}f.log("âš™ï¸ Plugin settings",{backendUrl:this.settings.backendUrl,hasApiKey:!!this.settings.apiKey,debugMode:this.settings.debugMode}),e.hide();const a=f.getLogs();console.log("ðŸ” [Plan My Day Debug] Complete diagnostic log:",a);const o=a.slice(-5).join("\n");if(new t.Notice(`Debug complete! Check console for full logs.\n\nLast entries:\n${o}`,1e4),n){const e=`# Plan My Day Debug Report\n\nGenerated: ${(new Date).toISOString()}\n\n## Diagnostic Results\n\n\`\`\`\n${f.exportLogs()}\n\`\`\``;yield this.app.vault.create(`Plan My Day Debug - ${Date.now()}.md`,e),new t.Notice("Debug report saved as new note!")}}catch(n){e.hide(),f.error("Debug process failed",n),new t.Notice(`Debug failed: ${n instanceof Error?n.message:String(n)}`)}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(o);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:o,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}activateFullTabView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(l);if(0===t.length){const t=this.app.workspace.getLeaf("tab");t&&(yield t.setViewState({type:l,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}initializeVaultManagement(){var t;(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)&&(this.vaultClient=new b(this.settings.backendUrl,this.settings.apiKey),this.settings.debugMode&&console.log("Vault management initialized"))}disableVaultManagement(){this.vaultClient=null,this.settings.debugMode&&console.log("Vault management disabled")}registerVaultManagementCommands(){[{id:"vaultpilot-vault-structure",name:"View Vault Structure",callback:function(){console.log("Opening vault structure modal"),this.openVaultStructureModal?this.openVaultStructureModal():new t.Notice("Vault structure feature not available")}},{id:"vaultpilot-smart-search",name:"Smart Vault Search",callback:function(){console.log("Opening smart search modal"),this.openSmartSearchModal?this.openSmartSearchModal():new t.Notice("Smart search feature not available")}},{id:"vaultpilot-file-operations",name:"File Operations Manager",callback:function(){console.log("Opening file operations modal"),this.openFileOperationsModal?this.openFileOperationsModal():new t.Notice("File operations feature not available")}},{id:"vaultpilot-organize-vault",name:"AI Vault Organization",callback:function(){console.log("Opening vault organizer modal"),this.openVaultOrganizerModal?this.openVaultOrganizerModal():new t.Notice("Vault organizer feature not available")}},{id:"vaultpilot-batch-operations",name:"Batch File Operations",callback:function(){console.log("Opening batch operations modal"),this.openBatchOperationsModal?this.openBatchOperationsModal():new t.Notice("Batch operations feature not available")}},{id:"vaultpilot-quick-search-selection",name:"Quick Search Selected Text",editorCallback:function(e){const n=e.getSelection();n.trim()?(console.log("Quick search for:",n.trim()),this.openSmartSearchModal?this.openSmartSearchModal(n.trim()):new t.Notice("Smart search feature not available")):new t.Notice("Please select text to search for")}},{id:"vaultpilot-vault-health-check",name:"Vault Health Check",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");new t.Notice("Running vault health check...");const e=yield this.vaultClient.testConnection();if(!e.success)return void new t.Notice(`Health check failed: ${e.message}`,5e3);const n=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:1}),i=yield this.vaultClient.searchVault({query:"test",max_results:1});new t.Notice(`âœ… Vault Health Check Passed\nðŸ“ ${n.total_files} files, ${n.total_folders} folders\nðŸ” Search: ${i.results.length} results\nðŸ’¾ Size: ${(n.total_size/1024/1024).toFixed(2)} MB`,8e3)}catch(e){console.error("Vault health check failed:",e),new t.Notice(`âŒ Health check failed: ${e.message}`,5e3)}})}},{id:"vaultpilot-vault-backup",name:"Create Vault Backup",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");new t.Notice("Creating vault backup...");const e=yield this.vaultClient.backupVault({include_settings:!0,compression:!0,backup_name:`vaultpilot-backup-${(new Date).toISOString().split("T")[0]}`});new t.Notice(`âœ… Backup created successfully\nðŸ“¦ ${e.files_backed_up} files\nðŸ’¾ Size: ${(e.backup_size/1024/1024).toFixed(2)} MB\nðŸ“ Location: ${e.backup_path}`,8e3)}catch(e){console.error("Backup failed:",e),new t.Notice(`âŒ Backup failed: ${e.message}`,5e3)}})}},{id:"vaultpilot-search-content",name:"Search Content",editorCallback:function(e){const n=e.getSelection().trim()||"Enter search query";this.openSmartSearchModal?this.openSmartSearchModal(n,"content"):new t.Notice("Smart search feature not available")}},{id:"vaultpilot-search-filenames",name:"Search Filenames",callback:function(){this.openSmartSearchModal?this.openSmartSearchModal("","filename"):new t.Notice("Smart search feature not available")}},{id:"vaultpilot-recent-files",name:"View Recent Files",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");const e=yield this.vaultClient.getVaultStructure({include_content:!1});if(0===e.recent_files.length)return void new t.Notice("No recent files found");const n=e.recent_files.slice(0,10).map(t=>`â€¢ ${t.name} (${t.modified})`).join("\n");new t.Notice(`ðŸ“ Recent Files:\n${n}`,1e4)}catch(e){console.error("Failed to get recent files:",e),new t.Notice(`âŒ Failed to get recent files: ${e.message}`,5e3)}})}}].forEach(t=>{var e,n;this.addCommand(Object.assign(Object.assign({},t),{callback:null===(e=t.callback)||void 0===e?void 0:e.bind(this),editorCallback:null===(n=t.editorCallback)||void 0===n?void 0:n.bind(this)}))})}openVaultStructureModal(){this.vaultClient?new S(this.app,this).open():new t.Notice("Vault management not available")}openSmartSearchModal(e,n){if(!this.vaultClient)return void new t.Notice("Vault management not available");const i=new C(this.app,this);e&&i.setInitialQuery(e,n),i.open()}openFileOperationsModal(e,n){if(!this.vaultClient)return void new t.Notice("Vault management not available");const i=new M(this.app,this);e&&i.setInitialPath(e),n&&i.setOperation(n),i.open()}openVaultOrganizerModal(){new t.Notice("Vault organizer modal not yet implemented")}openBatchOperationsModal(){new t.Notice("Batch operations modal not yet implemented")}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(t)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(e){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(e.key))return!1;const n=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!n)return!1;const i=n.editor,a=i.getCursor(),o=i.getLine(a.line);if(a.ch!==o.length)return!1;const s=o.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===e.key||"Enter"===e.key&&o.trim().length>10}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,i=n.getCursor(),a=n.getLine(i.line),o=n.getValue();if(a.trim().length<10||i.ch!==a.length)return;if(!o||0===o.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const e=yield this.apiClient.getCopilotCompletion({text:o,cursor_position:n.posToOffset(i),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Auto-suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},i,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){var t,e;yield this.saveData(this.settings),this.apiClient=new p(this.settings.backendUrl,this.settings.apiKey),(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)?this.initializeVaultManagement():this.disableVaultManagement(),(null===(e=this.settings.modelSelection)||void 0===e?void 0:e.enabled)?yield this.initializeModelSelection():yield this.disconnectModelSelection(),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}initializeModelSelection(){return e(this,void 0,void 0,function*(){var e;if(null===(e=this.settings.modelSelection)||void 0===e?void 0:e.enabled)try{if(!k.detect().hasHTTP)throw new Error("HTTP transport not available");this.modelSelectionService=new E(this.settings.backendUrl,this.settings.modelSelection.devpipePath,{monitoring_interval:this.settings.modelSelection.monitoringInterval,fallback_enabled:this.settings.modelSelection.fallbackEnabled,cache_duration:this.settings.modelSelection.cacheDuration,retry_attempts:this.settings.modelSelection.retryAttempts,timeout:this.settings.modelSelection.timeout,debug_mode:this.settings.modelSelection.debugMode}),yield this.modelSelectionService.updatePreferences({priority:this.settings.modelSelection.userPreferences.priority,max_cost_per_request:this.settings.modelSelection.userPreferences.maxCostPerRequest,preferred_providers:this.settings.modelSelection.userPreferences.preferredProviders,fallback_enabled:this.settings.modelSelection.fallbackEnabled,quality_threshold:this.settings.modelSelection.userPreferences.qualityThreshold,timeout_preference:this.settings.modelSelection.timeout}),yield this.modelSelectionService.initialize(),this.settings.debugMode&&console.log("ModelSelectionService initialized successfully"),new t.Notice("ðŸ¤– Smart model selection enabled",3e3)}catch(e){console.error("Failed to initialize ModelSelectionService:",e),e instanceof Error&&(e.message.includes("not accessible")?new t.Notice("âš ï¸ Cannot connect to AI service - using default models",5e3):e.message.includes("transport not available")?new t.Notice("âš ï¸ Model selection not supported in this environment",5e3):new t.Notice("âš ï¸ Model selection unavailable - using default models",3e3))}else this.settings.debugMode&&console.log("Model selection disabled in settings")})}disconnectModelSelection(){return e(this,void 0,void 0,function*(){if(this.modelSelectionService)try{yield this.modelSelectionService.disconnect(),this.modelSelectionService=void 0,this.settings.debugMode&&console.log("ModelSelectionService disconnected")}catch(t){console.error("Error disconnecting ModelSelectionService:",t)}})}testModelSelection(){return e(this,void 0,void 0,function*(){if(!this.modelSelectionService)return void new t.Notice("âŒ Model selection service not initialized",5e3);const e=new t.Notice("ðŸ¤– Testing model selection...",0);try{const n=[{type:"text-generation",quality:"medium"},{type:"code-generation",quality:"high"},{type:"chat",quality:"low"},{type:"summarization",quality:"medium"}];let i=[];for(const t of n)try{const e=yield this.modelSelectionService.selectForTask(t.type,t.quality);i.push(`âœ… ${t.type}: ${e.selected_model.name} ($${e.estimated_cost.toFixed(4)})`)}catch(e){i.push(`âŒ ${t.type}: Failed - ${e instanceof Error?e.message:"Unknown error"}`)}e.hide();const a=i.join("\n");new t.Notice(`Model Selection Test Results:\n${a}`,1e4),this.settings.debugMode&&console.log("Model selection test results:",i)}catch(n){e.hide(),new t.Notice(`âŒ Model selection test failed: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}showModelHealth(){return e(this,void 0,void 0,function*(){if(!this.modelSelectionService)return void new t.Notice("âŒ Model selection service not initialized",5e3);const e=new t.Notice("ðŸ¥ Checking model health...",0);try{const n=yield this.modelSelectionService.getModelHealth();if(e.hide(),0===n.length)return void new t.Notice("âš ï¸ No model health information available",5e3);const i=n.map(t=>`${"healthy"===t.status?"âœ…":"degraded"===t.status?"âš ï¸":"âŒ"} ${t.model_id}: ${t.status} (${t.response_time}ms, ${t.availability_percentage}%)`).join("\n");new t.Notice(`Model Health Status:\n${i}`,15e3),this.settings.debugMode&&console.log("Model health status:",n)}catch(n){e.hide(),new t.Notice(`âŒ Failed to get model health: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}getBestModelForTask(t){return e(this,arguments,void 0,function*(t,e="medium"){if(this.modelSelectionService&&this.modelSelectionService.isConnected())try{const n=yield this.modelSelectionService.selectForTask(t,e);return this.settings.debugMode&&console.log(`Selected model ${n.selected_model.name} for ${t} task`),n}catch(t){this.settings.debugMode&&console.warn("Model selection failed, using default:",t)}return null})}}module.exports=P;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3ZhdWx0LXNldHRpbmdzLnRzIiwiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvZnVsbC10YWItdmlldy50cyIsIi4uL3NyYy92YXVsdC11dGlscy50cyIsIi4uL3NyYy9jaGF0LW1vZGFsLnRzIiwiLi4vc3JjL3dvcmtmbG93LW1vZGFsLnRzIiwiLi4vc3JjL2FwaS1jbGllbnQudHMiLCIuLi9zcmMvcGxhbm5lci50cyIsIi4uL3NyYy9wbGFuLW15LWRheS1kZWJ1Zy50cyIsIi4uL3NyYy92YXVsdC10eXBlcy50cyIsIi4uL3NyYy92YXVsdC1hcGktY2xpZW50LnRzIiwiLi4vc3JjL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3IudHMiLCIuLi9zcmMvZGV2cGlwZS9EZXZQaXBlQ2xpZW50LnRzIiwiLi4vc3JjL3R5cGVzL01vZGVsU2VsZWN0aW9uLnRzIiwiLi4vc3JjL3NlcnZpY2VzL01vZGVsU2VsZWN0aW9uU2VydmljZS50cyIsIi4uL3NyYy92YXVsdC1tb2RhbHMudHMiLCIuLi9zcmMvbWFpbi50cyIsIi4uL3NyYy92YXVsdC1jb21tYW5kcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNldHRpbmdzIEV4dGVuc2lvbnMgZm9yIFZhdWx0UGlsb3QgVmF1bHQgTWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyB9IGZyb20gJy4vdmF1bHQtdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTOiBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyA9IHtcbiAgZW5hYmxlVmF1bHRNYW5hZ2VtZW50OiB0cnVlLFxuICBhdXRvU3luY1ZhdWx0U3RydWN0dXJlOiBmYWxzZSxcbiAgc2VhcmNoUmVzdWx0c0xpbWl0OiA1MCxcbiAgZW5hYmxlU21hcnRTZWFyY2g6IHRydWUsXG4gIGJhdGNoT3BlcmF0aW9uVGltZW91dDogMzAwMDAsXG4gIHNob3dWYXVsdFN0YXRzOiB0cnVlLFxuICBtYXhTZWFyY2hSZXN1bHRzOiAxMDAsXG4gIGRlZmF1bHRTZWFyY2hUeXBlOiAnY29udGVudCcsXG4gIGVuYWJsZUZpbGVPcGVyYXRpb25zOiB0cnVlLFxuICBjb25maXJtRGVzdHJ1Y3RpdmVPcGVyYXRpb25zOiB0cnVlLFxuICBhdXRvQmFja3VwQmVmb3JlT3BlcmF0aW9uczogZmFsc2Vcbn07XG5cbi8qKlxuICogQWRkIHZhdWx0IG1hbmFnZW1lbnQgc2V0dGluZ3MgdG8gdGhlIHNldHRpbmdzIHRhYlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IGFueSkge1xuICAvLyBWYXVsdCBNYW5hZ2VtZW50IFNlY3Rpb24gSGVhZGVyXG4gIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0IE1hbmFnZW1lbnQnIH0pO1xuICBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgdGV4dDogJ0NvbmZpZ3VyZSBBSS1wb3dlcmVkIHZhdWx0IHN0cnVjdHVyZSBhbmFseXNpcyBhbmQgZmlsZSBvcGVyYXRpb25zLicgXG4gIH0pO1xuXG4gIC8vIEVuYWJsZSBWYXVsdCBNYW5hZ2VtZW50XG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdFbmFibGUgVmF1bHQgTWFuYWdlbWVudCcpXG4gICAgLnNldERlc2MoJ0VuYWJsZSBBSS1wb3dlcmVkIHZhdWx0IHN0cnVjdHVyZSBhbmFseXNpcyBhbmQgZmlsZSBvcGVyYXRpb25zJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVWYXVsdE1hbmFnZW1lbnQgPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5lbmFibGVWYXVsdE1hbmFnZW1lbnQgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgcGx1Z2luLmluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwbHVnaW4uZGlzYWJsZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgLy8gQXV0byBTeW5jIFZhdWx0IFN0cnVjdHVyZVxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnQXV0byBTeW5jIFZhdWx0IFN0cnVjdHVyZScpXG4gICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgdXBkYXRlIHZhdWx0IHN0cnVjdHVyZSBhbmFseXNpcyB3aGVuIGZpbGVzIGNoYW5nZScpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uYXV0b1N5bmNWYXVsdFN0cnVjdHVyZSA/PyBmYWxzZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5hdXRvU3luY1ZhdWx0U3RydWN0dXJlID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBFbmFibGUgU21hcnQgU2VhcmNoXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdFbmFibGUgU21hcnQgU2VhcmNoJylcbiAgICAuc2V0RGVzYygnVXNlIEFJLXBvd2VyZWQgc2VhcmNoIHdpdGggY29udGV4dCBhbmQgaW5zaWdodHMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVNtYXJ0U2VhcmNoID8/IHRydWUpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuZW5hYmxlU21hcnRTZWFyY2ggPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIFNlYXJjaCBSZXN1bHRzIExpbWl0XG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdTZWFyY2ggUmVzdWx0cyBMaW1pdCcpXG4gICAgLnNldERlc2MoJ01heGltdW0gbnVtYmVyIG9mIHNlYXJjaCByZXN1bHRzIHRvIGRpc3BsYXknKVxuICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgLnNldExpbWl0cygxMCwgMjAwLCAxMClcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5zZWFyY2hSZXN1bHRzTGltaXQgPz8gNTApXG4gICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LnNlYXJjaFJlc3VsdHNMaW1pdCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gRGVmYXVsdCBTZWFyY2ggVHlwZVxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnRGVmYXVsdCBTZWFyY2ggVHlwZScpXG4gICAgLnNldERlc2MoJ0RlZmF1bHQgc2VhcmNoIG1vZGUgZm9yIHNtYXJ0IHNlYXJjaCcpXG4gICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAuYWRkT3B0aW9uKCdjb250ZW50JywgJ0NvbnRlbnQgU2VhcmNoJylcbiAgICAgIC5hZGRPcHRpb24oJ2ZpbGVuYW1lJywgJ0ZpbGVuYW1lIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCd0YWdzJywgJ1RhZyBTZWFyY2gnKVxuICAgICAgLmFkZE9wdGlvbignbGlua3MnLCAnTGluayBTZWFyY2gnKVxuICAgICAgLmFkZE9wdGlvbignY29tcHJlaGVuc2l2ZScsICdDb21wcmVoZW5zaXZlIFNlYXJjaCcpXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZGVmYXVsdFNlYXJjaFR5cGUgPz8gJ2NvbnRlbnQnKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmRlZmF1bHRTZWFyY2hUeXBlID0gdmFsdWUgYXMgYW55O1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gRW5hYmxlIEZpbGUgT3BlcmF0aW9uc1xuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnRW5hYmxlIEZpbGUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ0FsbG93IGZpbGUgY3JlYXRpb24sIGRlbGV0aW9uLCBhbmQgbW9kaWZpY2F0aW9uIHRocm91Z2ggdGhlIGludGVyZmFjZScpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlRmlsZU9wZXJhdGlvbnMgPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5lbmFibGVGaWxlT3BlcmF0aW9ucyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gQ29uZmlybSBEZXN0cnVjdGl2ZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdDb25maXJtIERlc3RydWN0aXZlIE9wZXJhdGlvbnMnKVxuICAgIC5zZXREZXNjKCdTaG93IGNvbmZpcm1hdGlvbiBkaWFsb2cgZm9yIGZpbGUgZGVsZXRpb24gYW5kIGRlc3RydWN0aXZlIG9wZXJhdGlvbnMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnMgPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5jb25maXJtRGVzdHJ1Y3RpdmVPcGVyYXRpb25zID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBBdXRvIEJhY2t1cCBCZWZvcmUgT3BlcmF0aW9uc1xuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnQXV0byBCYWNrdXAgQmVmb3JlIE9wZXJhdGlvbnMnKVxuICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IGNyZWF0ZSBiYWNrdXBzIGJlZm9yZSBkZXN0cnVjdGl2ZSBmaWxlIG9wZXJhdGlvbnMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zID8/IGZhbHNlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBCYXRjaCBPcGVyYXRpb24gVGltZW91dFxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnQmF0Y2ggT3BlcmF0aW9uIFRpbWVvdXQnKVxuICAgIC5zZXREZXNjKCdUaW1lb3V0IGZvciBiYXRjaCBvcGVyYXRpb25zIGluIG1pbGxpc2Vjb25kcycpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAuc2V0UGxhY2Vob2xkZXIoJzMwMDAwJylcbiAgICAgIC5zZXRWYWx1ZShTdHJpbmcocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uYmF0Y2hPcGVyYXRpb25UaW1lb3V0ID8/IDMwMDAwKSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgdGltZW91dCA9IHBhcnNlSW50KHZhbHVlKSB8fCAzMDAwMDtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPSB0aW1lb3V0O1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gU2hvdyBWYXVsdCBTdGF0c1xuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnU2hvdyBWYXVsdCBTdGF0aXN0aWNzJylcbiAgICAuc2V0RGVzYygnRGlzcGxheSB2YXVsdCBzdGF0aXN0aWNzIGluIG1vZGFscyBhbmQgaW50ZXJmYWNlcycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uc2hvd1ZhdWx0U3RhdHMgPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5zaG93VmF1bHRTdGF0cyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gVGVzdCBDb25uZWN0aW9uIEJ1dHRvblxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnVGVzdCBWYXVsdCBNYW5hZ2VtZW50IENvbm5lY3Rpb24nKVxuICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gdmF1bHQgbWFuYWdlbWVudCBlbmRwb2ludHMnKVxuICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAuc2V0Q3RhKClcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4udmF1bHRDbGllbnQpIHtcbiAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnTm90IEF2YWlsYWJsZScpO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpLCAyMDAwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdGluZy4uLicpO1xuICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwbHVnaW4udmF1bHRDbGllbnQudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCfinIUgQ29ubmVjdGVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCfinYwgRmFpbGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCfinYwgRXJyb3InKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpLCAzMDAwKTtcbiAgICAgIH0pKTtcblxuICAvLyBBZHZhbmNlZCBTZXR0aW5ncyBTZWN0aW9uXG4gIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkdmFuY2VkIFZhdWx0IE1hbmFnZW1lbnQnIH0pO1xuXG4gIC8vIE1heCBTZWFyY2ggUmVzdWx0c1xuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnTWF4aW11bSBTZWFyY2ggUmVzdWx0cycpXG4gICAgLnNldERlc2MoJ0Fic29sdXRlIG1heGltdW0gbnVtYmVyIG9mIHNlYXJjaCByZXN1bHRzIHRvIGZldGNoIGZyb20gYmFja2VuZCcpXG4gICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAuc2V0TGltaXRzKDUwLCA1MDAsIDI1KVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/Lm1heFNlYXJjaFJlc3VsdHMgPz8gMTAwKVxuICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5tYXhTZWFyY2hSZXN1bHRzID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBSZXNldCB0byBEZWZhdWx0cyBCdXR0b25cbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ1Jlc2V0IFZhdWx0IE1hbmFnZW1lbnQgU2V0dGluZ3MnKVxuICAgIC5zZXREZXNjKCdSZXNldCBhbGwgdmF1bHQgbWFuYWdlbWVudCBzZXR0aW5ncyB0byB0aGVpciBkZWZhdWx0IHZhbHVlcycpXG4gICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnUmVzZXQgdG8gRGVmYXVsdHMnKVxuICAgICAgLnNldFdhcm5pbmcoKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVmcmVzaCB0aGUgc2V0dGluZ3MgZGlzcGxheVxuICAgICAgICBjb25zdCBzZXR0aW5nc1RhYiA9IHBsdWdpbi5hcHAuc2V0dGluZy5hY3RpdmVUYWI7XG4gICAgICAgIGlmIChzZXR0aW5nc1RhYiAmJiBzZXR0aW5nc1RhYi5kaXNwbGF5KSB7XG4gICAgICAgICAgc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgdmF1bHQgbWFuYWdlbWVudCBzZXR0aW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyhzZXR0aW5nczogVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoc2V0dGluZ3Muc2VhcmNoUmVzdWx0c0xpbWl0IDwgMSB8fCBzZXR0aW5ncy5zZWFyY2hSZXN1bHRzTGltaXQgPiAxMDAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ1NlYXJjaCByZXN1bHRzIGxpbWl0IG11c3QgYmUgYmV0d2VlbiAxIGFuZCAxMDAwJyk7XG4gIH1cblxuICBpZiAoc2V0dGluZ3MubWF4U2VhcmNoUmVzdWx0cyA8IHNldHRpbmdzLnNlYXJjaFJlc3VsdHNMaW1pdCkge1xuICAgIGVycm9ycy5wdXNoKCdNYXhpbXVtIHNlYXJjaCByZXN1bHRzIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHNlYXJjaCByZXN1bHRzIGxpbWl0Jyk7XG4gIH1cblxuICBpZiAoc2V0dGluZ3MuYmF0Y2hPcGVyYXRpb25UaW1lb3V0IDwgMTAwMCB8fCBzZXR0aW5ncy5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPiAzMDAwMDApIHtcbiAgICBlcnJvcnMucHVzaCgnQmF0Y2ggb3BlcmF0aW9uIHRpbWVvdXQgbXVzdCBiZSBiZXR3ZWVuIDEgc2Vjb25kIGFuZCA1IG1pbnV0ZXMnKTtcbiAgfVxuXG4gIGNvbnN0IHZhbGlkU2VhcmNoVHlwZXMgPSBbJ2NvbnRlbnQnLCAnZmlsZW5hbWUnLCAndGFncycsICdsaW5rcycsICdjb21wcmVoZW5zaXZlJ107XG4gIGlmICghdmFsaWRTZWFyY2hUeXBlcy5pbmNsdWRlcyhzZXR0aW5ncy5kZWZhdWx0U2VhcmNoVHlwZSkpIHtcbiAgICBlcnJvcnMucHVzaCgnSW52YWxpZCBkZWZhdWx0IHNlYXJjaCB0eXBlJyk7XG4gIH1cblxuICByZXR1cm4gZXJyb3JzO1xufVxuXG4vKipcbiAqIEdldCB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzIHdpdGggZGVmYXVsdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhdWx0TWFuYWdlbWVudFNldHRpbmdzKHBsdWdpblNldHRpbmdzOiBhbnkpOiBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyB7XG4gIHJldHVybiB7XG4gICAgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTLFxuICAgIC4uLihwbHVnaW5TZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgfHwge30pXG4gIH07XG59XG4iLCJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncywgTW9kZWxTZWxlY3Rpb25TZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgYWRkVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MsIERFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9IGZyb20gJy4vdmF1bHQtc2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVmF1bHRQaWxvdFNldHRpbmdzID0ge1xuICBiYWNrZW5kVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJyxcbiAgYXBpS2V5OiAnJyxcbiAgZW5hYmxlV2ViU29ja2V0OiB0cnVlLFxuICBlbmFibGVDb3BpbG90OiB0cnVlLFxuICBlbmFibGVBdXRvQ29tcGxldGU6IGZhbHNlLCAvLyBEaXNhYmxlZCBieSBkZWZhdWx0IHRvIHByZXZlbnQgZnJlcXVlbnQgcmVxdWVzdHNcbiAgZGVmYXVsdEFnZW50OiAnJyxcbiAgZGVmYXVsdE1vZGU6ICdhc2snLFxuICBjaGF0SGlzdG9yeUxpbWl0OiAxMDAsXG4gIGRlYnVnTW9kZTogZmFsc2UsXG4gIHNob3dJbnRlbnREZWJ1ZzogZmFsc2UsXG4gIHZhdWx0TWFuYWdlbWVudDogREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTLFxuICBtb2RlbFNlbGVjdGlvbjoge1xuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgZGV2cGlwZVBhdGg6ICcuLi9kZXYtcGlwZScsXG4gICAgbW9uaXRvcmluZ0ludGVydmFsOiAzMDAwMCxcbiAgICBmYWxsYmFja0VuYWJsZWQ6IHRydWUsXG4gICAgY2FjaGVEdXJhdGlvbjogMzAwMDAwLFxuICAgIHJldHJ5QXR0ZW1wdHM6IDMsXG4gICAgdGltZW91dDogMzAwMDAsXG4gICAgZGVidWdNb2RlOiBmYWxzZSxcbiAgICB1c2VyUHJlZmVyZW5jZXM6IHtcbiAgICAgIHByaW9yaXR5OiAnYmFsYW5jZWQnLFxuICAgICAgbWF4Q29zdFBlclJlcXVlc3Q6IDAuNTAsXG4gICAgICBwcmVmZXJyZWRQcm92aWRlcnM6IFtdLFxuICAgICAgcXVhbGl0eVRocmVzaG9sZDogMC43XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgY2xhc3MgVmF1bHRQaWxvdFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICBcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdWYXVsdFBpbG90IFNldHRpbmdzJyB9KTtcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQ29uZmlndXJlIHlvdXIgY29ubmVjdGlvbiB0byBFdm9BZ2VudFggYmFja2VuZCBhbmQgQUkgZmVhdHVyZXMuJyBcbiAgICB9KTtcblxuICAgIC8vIENvbm5lY3Rpb24gU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0JhY2tlbmQgVVJMJylcbiAgICAgIC5zZXREZXNjKCdVUkwgb2YgRXZvQWdlbnRYIGJhY2tlbmQgc2VydmVyJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cDovL2xvY2FsaG9zdDo4MDAwJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFja2VuZFVybClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFja2VuZFVybCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBUEkgS2V5JylcbiAgICAgIC5zZXREZXNjKCdPcHRpb25hbCBBUEkga2V5IGZvciBhdXRoZW50aWNhdGlvbiAoaWYgcmVxdWlyZWQgYnkgYmFja2VuZCknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciBBUEkga2V5Li4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5IHx8ICcnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gVGVzdCBjb25uZWN0aW9uIGJ1dHRvblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0Nvbm5lY3Rpb24gVGVzdCcpXG4gICAgICAuc2V0RGVzYygnVGVzdCBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kJylcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+XG4gICAgICAgIGJ1dHRvblxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdUZXN0IENvbm5lY3Rpb24nKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEZlYXR1cmUgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdGZWF0dXJlcycgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdFbmFibGUgV2ViU29ja2V0JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgcmVhbC10aW1lIGNvbW11bmljYXRpb24gZm9yIGxpdmUgdXBkYXRlcyBhbmQgcHJvZ3Jlc3MgdHJhY2tpbmcnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdFbmFibGUgQ29waWxvdCcpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIEFJLXBvd2VyZWQgdGV4dCBjb21wbGV0aW9uIGFuZCBzdWdnZXN0aW9ucycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29waWxvdClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29waWxvdCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdFbmFibGUgQXV0by1Db21wbGV0ZScpXG4gICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBzdWdnZXN0IGNvbXBsZXRpb25zIGFmdGVyIHNlbnRlbmNlIGVuZGluZ3MgYW5kIG5ldyBsaW5lcyAod2l0aCAxMHMgY29vbGRvd24pJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBBZ2VudCBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FnZW50IENvbmZpZ3VyYXRpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBBZ2VudCcpXG4gICAgICAuc2V0RGVzYygnRGVmYXVsdCBhZ2VudCB0byB1c2UgZm9yIGNoYXQgYW5kIHdvcmtmbG93cyAobGVhdmUgZW1wdHkgZm9yIGF1dG8tc2VsZWN0aW9uKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0FnZW50IElEIG9yIG5hbWUuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0QWdlbnQgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IENoYXQgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRGVmYXVsdCBtb2RlIGZvciBuZXcgY2hhdCBzZXNzaW9uczogQXNrIGZvciBzaW1wbGUgUSZBLCBBZ2VudCBmb3IgY29tcGxleCB3b3JrZmxvd3MnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbignYXNrJywgJ0FzayBNb2RlIC0gU2ltcGxlIFEmQScpXG4gICAgICAgICAgLmFkZE9wdGlvbignYWdlbnQnLCAnQWdlbnQgTW9kZSAtIENvbXBsZXggV29ya2Zsb3dzJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRNb2RlID0gdmFsdWUgYXMgJ2FzaycgfCAnYWdlbnQnO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdDaGF0IEhpc3RvcnkgTGltaXQnKVxuICAgICAgLnNldERlc2MoJ01heGltdW0gbnVtYmVyIG9mIGNoYXQgbWVzc2FnZXMgdG8ga2VlcCBpbiBoaXN0b3J5JylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+XG4gICAgICAgIHNsaWRlclxuICAgICAgICAgIC5zZXRMaW1pdHMoMTAsIDUwMCwgMTApXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5TGltaXQpXG4gICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBBZHZhbmNlZCBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkdmFuY2VkJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlYnVnIE1vZGUnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBkZWJ1ZyBsb2dnaW5nIGFuZCBhZGRpdGlvbmFsIGRldmVsb3BlciBmZWF0dXJlcycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnU2hvdyBJbnRlbnQgRGVidWcgT3ZlcmxheScpXG4gICAgICAuc2V0RGVzYygnRGlzcGxheSBhdXRvbWF0aWMgaW50ZW50IGRldGVjdGlvbiBpbiBjaGF0IChBc2sgdnMgQWdlbnQgbW9kZSknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1ZylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIFZhdWx0IE1hbmFnZW1lbnQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdWYXVsdCBNYW5hZ2VtZW50JyB9KTtcbiAgICBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4pO1xuXG4gICAgLy8gTW9kZWwgU2VsZWN0aW9uIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnTW9kZWwgU2VsZWN0aW9uJyB9KTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdFbmFibGUgTW9kZWwgU2VsZWN0aW9uJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgaW50ZWxsaWdlbnQgQUkgbW9kZWwgc2VsZWN0aW9uIGJhc2VkIG9uIHRhc2sgdHlwZSBhbmQgcmVxdWlyZW1lbnRzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCA/PyB0cnVlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uID0gREVGQVVMVF9TRVRUSU5HUy5tb2RlbFNlbGVjdGlvbiE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5lbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgbW9kZWwgc2VsZWN0aW9uIHNlcnZpY2UgaWYgZW5hYmxlZFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5pbml0aWFsaXplTW9kZWxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIERpc2Nvbm5lY3QgbW9kZWwgc2VsZWN0aW9uIHNlcnZpY2UgaWYgZGlzYWJsZWRcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGlzY29ubmVjdE1vZGVsU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZXZQaXBlIFBhdGgnKVxuICAgICAgLnNldERlc2MoJ1BhdGggdG8gdGhlIERldlBpcGUgY29tbXVuaWNhdGlvbiBkaXJlY3RvcnknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcuLi9kZXYtcGlwZScpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5kZXZwaXBlUGF0aCA/PyAnLi4vZGV2LXBpcGUnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uID0gREVGQVVMVF9TRVRUSU5HUy5tb2RlbFNlbGVjdGlvbiE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5kZXZwaXBlUGF0aCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdQcmlvcml0eSBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdIb3cgdG8gcHJpb3JpdGl6ZSBtb2RlbCBzZWxlY3Rpb246IHBlcmZvcm1hbmNlLCBjb3N0LCBvciBiYWxhbmNlZCcpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdwZXJmb3JtYW5jZScsICdQZXJmb3JtYW5jZSAtIEJlc3QgcXVhbGl0eSBtb2RlbHMnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2Nvc3QnLCAnQ29zdCAtIE1vc3QgZWNvbm9taWNhbCBtb2RlbHMnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2JhbGFuY2VkJywgJ0JhbGFuY2VkIC0gT3B0aW1hbCBxdWFsaXR5L2Nvc3QgcmF0aW8nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8udXNlclByZWZlcmVuY2VzLnByaW9yaXR5ID8/ICdiYWxhbmNlZCcpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24gPSBERUZBVUxUX1NFVFRJTkdTLm1vZGVsU2VsZWN0aW9uITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnVzZXJQcmVmZXJlbmNlcy5wcmlvcml0eSA9IHZhbHVlIGFzICdwZXJmb3JtYW5jZScgfCAnY29zdCcgfCAnYmFsYW5jZWQnO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdNYXggQ29zdCBQZXIgUmVxdWVzdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBjb3N0IHBlciBBSSByZXF1ZXN0IChpbiBVU0QpJylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+XG4gICAgICAgIHNsaWRlclxuICAgICAgICAgIC5zZXRMaW1pdHMoMC4wMSwgMi4wMCwgMC4wMSlcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LnVzZXJQcmVmZXJlbmNlcy5tYXhDb3N0UGVyUmVxdWVzdCA/PyAwLjUwKVxuICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24gPSBERUZBVUxUX1NFVFRJTkdTLm1vZGVsU2VsZWN0aW9uITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnVzZXJQcmVmZXJlbmNlcy5tYXhDb3N0UGVyUmVxdWVzdCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdNb2RlbCBTZWxlY3Rpb24gRGVidWcnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBkZWJ1ZyBsb2dnaW5nIGZvciBtb2RlbCBzZWxlY3Rpb24gZGVjaXNpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZGVidWdNb2RlID8/IGZhbHNlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uID0gREVGQVVMVF9TRVRUSU5HUy5tb2RlbFNlbGVjdGlvbiE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5kZWJ1Z01vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gSGVscCBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSGVscCAmIERvY3VtZW50YXRpb24nIH0pO1xuXG4gICAgLy8gSW5mb3JtYXRpb24gc2VjdGlvblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0luZm9ybWF0aW9uJyB9KTtcbiAgICBjb25zdCBpbmZvRWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuICAgIGluZm9FbC5pbm5lckhUTUwgPSBgXG4gICAgICA8cD48c3Ryb25nPlZhdWx0UGlsb3QgdjEuMC4wPC9zdHJvbmc+PC9wPlxuICAgICAgPHA+Q29tcHJlaGVuc2l2ZSBFdm9BZ2VudFggaW50ZWdyYXRpb24gZm9yIE9ic2lkaWFuPC9wPlxuICAgICAgPHA+RmVhdHVyZXM6IEFJIENoYXQsIENvcGlsb3QsIFdvcmtmbG93cywgVmF1bHQgQW5hbHlzaXMsIFRhc2sgUGxhbm5pbmc8L3A+XG4gICAgICA8cD5Gb3IgaGVscCBhbmQgZG9jdW1lbnRhdGlvbiwgdmlzaXQgdGhlIEdpdEh1YiByZXBvc2l0b3J5LjwvcD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdUZXN0aW5nIGNvbm5lY3Rpb24uLi4nLCAwKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KchSBDb25uZWN0aW9uIHN1Y2Nlc3NmdWwhJywgMzAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGDinYwgQ29ubmVjdGlvbiBmYWlsZWQ6ICR7cmVzcG9uc2UuZXJyb3J9YCwgNTAwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGDinYwgQ29ubmVjdGlvbiBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLCA1MDAwKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldywgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9WQVVMVFBJTE9UID0gJ3ZhdWx0cGlsb3Qtdmlldyc7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIHN0YXR1c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcXVpY2tBY3Rpb25zRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB2YXVsdFN0YXRzRWwhOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9WQVVMVFBJTE9UO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1ZhdWx0UGlsb3QnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYm90JztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygndmF1bHRwaWxvdC12aWV3Jyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90JyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnWW91ciBBSSBhc3Npc3RhbnQgZm9yIE9ic2lkaWFuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3VidGl0bGUnXG4gICAgfSk7XG5cbiAgICAvLyBTdGF0dXMgc2VjdGlvblxuICAgIHRoaXMuc3RhdHVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG5cbiAgICAvLyBRdWljayBhY3Rpb25zXG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMnIH0pO1xuICAgIHRoaXMuY3JlYXRlUXVpY2tBY3Rpb25zKCk7XG5cbiAgICAvLyBWYXVsdCBzdGF0c1xuICAgIHRoaXMudmF1bHRTdGF0c0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RhdHMnIH0pO1xuICAgIHRoaXMudXBkYXRlVmF1bHRTdGF0cygpO1xuXG4gICAgLy8gUmVjZW50IGFjdGl2aXRpZXMgKHBsYWNlaG9sZGVyIGZvciBmdXR1cmUgaW1wbGVtZW50YXRpb24pXG4gICAgY29uc3QgYWN0aXZpdGllc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aXZpdGllcycgfSk7XG4gICAgYWN0aXZpdGllc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlY2VudCBBY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0FjdGl2aXR5IHRyYWNraW5nIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0dXMoKSB7XG4gICAgdGhpcy5zdGF0dXNFbC5lbXB0eSgpO1xuICAgIHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29ubmVjdGlvbiBTdGF0dXMnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gQmFja2VuZCBzdGF0dXNcbiAgICBjb25zdCBiYWNrZW5kU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdCYWNrZW5kOiAnIH0pO1xuICAgIGNvbnN0IGJhY2tlbmRJbmRpY2F0b3IgPSBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiAnQ2hlY2tpbmcuLi4nXG4gICAgfSk7XG5cbiAgICAvLyBXZWJTb2NrZXQgc3RhdHVzXG4gICAgY29uc3Qgd3NTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdXZWJTb2NrZXQ6ICcgfSk7XG4gICAgY29uc3Qgd3NJbmRpY2F0b3IgPSB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogdGhpcy5wbHVnaW4uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSA/ICfwn5+iIENvbm5lY3RlZCcgOiAn8J+UtCBEaXNjb25uZWN0ZWQnXG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayBiYWNrZW5kIHN0YXR1c1xuICAgIHRoaXMuY2hlY2tCYWNrZW5kU3RhdHVzKGJhY2tlbmRJbmRpY2F0b3IpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja0JhY2tlbmRTdGF0dXMoaW5kaWNhdG9yOiBIVE1MRWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/Cfn6IgQ29ubmVjdGVkJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IEVycm9yJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtZXJyb3InO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBPZmZsaW5lJztcbiAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVpY2tBY3Rpb25zKCkge1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuZW1wdHkoKTtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1aWNrIEFjdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgYWN0aW9uc0dyaWQgPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkJyB9KTtcblxuICAgIC8vIENoYXQgYWN0aW9uXG4gICAgY29uc3QgY2hhdEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+SrCBPcGVuIENoYXQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNoYXRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLm9wZW5DaGF0TW9kYWwoKTtcblxuICAgIC8vIERhc2hib2FyZCBhY3Rpb24gKG5ldylcbiAgICBjb25zdCBkYXNoYm9hcmRCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/Cfk4ogT3BlbiBEYXNoYm9hcmQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGRhc2hib2FyZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4uYWN0aXZhdGVGdWxsVGFiVmlldygpO1xuXG4gICAgLy8gV29ya2Zsb3cgYWN0aW9uXG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcblxuICAgIC8vIEFuYWx5emUgdmF1bHQgYWN0aW9uXG4gICAgY29uc3QgYW5hbHl6ZUJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UjSBBbmFseXplIFZhdWx0JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBhbmFseXplQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hbmFseXplVmF1bHQoKTtcblxuICAgIC8vIENvcGlsb3QgYWN0aW9uXG4gICAgY29uc3QgY29waWxvdEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pyoIEdldCBDb21wbGV0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjb3BpbG90QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmdldENvcGlsb3RDb21wbGV0aW9uKGFjdGl2ZVZpZXcuZWRpdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBlZGl0b3IgZm91bmQnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CflIQgUmVmcmVzaCBTdGF0dXMnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhZ2VudCBpbmZvIGlmIGF2YWlsYWJsZVxuICAgIHRoaXMubG9hZEFnZW50SW5mbygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTG9hZGluZyBhZ2VudHMgaW4gdmlldy4uLicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogZ2V0QWdlbnRzIHJlc3BvbnNlIGluIHZpZXc6JywgcmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGxldCBhZ2VudHM6IGFueVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YSkpIHtcbiAgICAgICAgICAvLyBEaXJlY3QgYXJyYXkgcmVzcG9uc2VcbiAgICAgICAgICBhZ2VudHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgJiYgdHlwZW9mIHJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIHdyYXBwZWQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICAgIGNvbnN0IGRhdGFPYmogPSByZXNwb25zZS5kYXRhIGFzIGFueTtcbiAgICAgICAgICBpZiAoZGF0YU9iai5hZ2VudHMgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmFnZW50cykpIHtcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZvcm1hdDoge2FnZW50czogWy4uLl19XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmFnZW50cztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBhZ2VudHMgYXJyYXkgaW4gdmlldywgdXNpbmcgcmVzcG9uc2UuZGF0YS5hZ2VudHMnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFPYmouZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouZGF0YSkpIHtcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZvcm1hdDoge2RhdGE6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5kYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kIG5lc3RlZCBkYXRhIGluIHZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuZGF0YScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1ZhdWx0UGlsb3Q6IFVuZXhwZWN0ZWQgcmVzcG9uc2UgZm9ybWF0OicsIHR5cGVvZiByZXNwb25zZS5kYXRhLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BsYXkgYWdlbnQgaW5mb3JtYXRpb25cbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IGFnZW50cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUFnZW50cyA9IGFnZW50cy5maWx0ZXIoKGFnZW50OiBhbnkpID0+IGFnZW50LmFjdGl2ZSkubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRTdGF0c0VsID0gdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zdGF0cycgfSk7XG4gICAgICAgIGFnZW50U3RhdHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBdmFpbGFibGUgQWdlbnRzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50SW5mbyA9IGFnZW50U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWluZm8nIH0pO1xuICAgICAgICBhZ2VudEluZm8uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAke2FjdGl2ZUFnZW50c30vJHthZ2VudENvdW50fSBhY3RpdmVgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHMgaW4gdmlldzonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC12aWV3LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC12aWV3LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC12aWV3IHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWhlYWRlciB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdWJ0aXRsZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMgaDMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtZXJyb3IsXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7XG4gICAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtaXRlbSB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtbGFiZWwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIGg0IHtcbiAgICAgICAgICBtYXJnaW46IDAgMCA4cHggMDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtaW5mbyB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wbGFjZWhvbGRlciB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzXG4gIH1cbn1cbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldywgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCID0gJ3ZhdWx0cGlsb3QtZnVsbC10YWItdmlldyc7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90RnVsbFRhYlZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBzdGF0dXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHF1aWNrQWN0aW9uc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdmF1bHRTdGF0c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgY2hhdEVsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgd29ya2Zsb3dFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUI7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCBEYXNoYm9hcmQnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnbGF5b3V0LWRhc2hib2FyZCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtZnVsbC10YWItdmlldycpO1xuXG4gICAgLy8gRm9yY2UgdGhlIGNvbnRhaW5lciB0byB0YWtlIGZ1bGwgaGVpZ2h0XG4gICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICBjb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgIC8vIENyZWF0ZSBtYWluIGxheW91dFxuICAgIGNvbnN0IG1haW5MYXlvdXQgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1tYWluLWxheW91dCcgfSk7XG5cbiAgICAvLyBMZWZ0IHNpZGViYXJcbiAgICBjb25zdCBsZWZ0U2lkZWJhciA9IG1haW5MYXlvdXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1sZWZ0LXNpZGViYXInIH0pO1xuICAgIHRoaXMuY3JlYXRlTGVmdFNpZGViYXIobGVmdFNpZGViYXIpO1xuXG4gICAgLy8gTWFpbiBjb250ZW50IGFyZWFcbiAgICBjb25zdCBtYWluQ29udGVudCA9IG1haW5MYXlvdXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1tYWluLWNvbnRlbnQnIH0pO1xuICAgIHRoaXMuY3JlYXRlTWFpbkNvbnRlbnQobWFpbkNvbnRlbnQpO1xuXG4gICAgLy8gUmlnaHQgc2lkZWJhclxuICAgIGNvbnN0IHJpZ2h0U2lkZWJhciA9IG1haW5MYXlvdXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yaWdodC1zaWRlYmFyJyB9KTtcbiAgICB0aGlzLmNyZWF0ZVJpZ2h0U2lkZWJhcihyaWdodFNpZGViYXIpO1xuXG4gICAgdGhpcy5hZGRGdWxsVGFiU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUxlZnRTaWRlYmFyKHNpZGViYXI6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc2lkZWJhci1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0FJIEFzc2lzdGFudCBEYXNoYm9hcmQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG5cbiAgICAvLyBRdWljayBhY3Rpb25zXG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1xdWljay1hY3Rpb25zJyB9KTtcbiAgICB0aGlzLmNyZWF0ZVF1aWNrQWN0aW9ucygpO1xuXG4gICAgLy8gVmF1bHQgc3RhdHNcbiAgICB0aGlzLnZhdWx0U3RhdHNFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU1haW5Db250ZW50KGNvbnRlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gVGFiIG5hdmlnYXRpb25cbiAgICBjb25zdCB0YWJOYXYgPSBjb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdGFiLW5hdicgfSk7XG4gICAgY29uc3QgY2hhdFRhYiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfwn5KsIENoYXQnLCBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtdGFiLWJ1dHRvbiBhY3RpdmUnXG4gICAgfSk7XG4gICAgY29uc3Qgd29ya2Zsb3dUYWIgPSB0YWJOYXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAn4pqZ77iPIFdvcmtmbG93cycsIFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC10YWItYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvbnN0IGFuYWx5dGljc1RhYiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfwn5OKIEFuYWx5dGljcycsIFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC10YWItYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgLy8gVGFiIGNvbnRlbnRcbiAgICBjb25zdCB0YWJDb250ZW50ID0gY29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXRhYi1jb250ZW50JyB9KTtcblxuICAgIC8vIENoYXQgc2VjdGlvblxuICAgIHRoaXMuY2hhdEVsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtc2VjdGlvbiBhY3RpdmUnIH0pO1xuICAgIHRoaXMuY3JlYXRlQ2hhdFNlY3Rpb24odGhpcy5jaGF0RWwpO1xuXG4gICAgLy8gV29ya2Zsb3cgc2VjdGlvblxuICAgIHRoaXMud29ya2Zsb3dFbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uJyB9KTtcbiAgICB0aGlzLmNyZWF0ZVdvcmtmbG93U2VjdGlvbih0aGlzLndvcmtmbG93RWwpO1xuXG4gICAgLy8gQW5hbHl0aWNzIHNlY3Rpb25cbiAgICBjb25zdCBhbmFseXRpY3NFbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbicgfSk7XG4gICAgdGhpcy5jcmVhdGVBbmFseXRpY3NTZWN0aW9uKGFuYWx5dGljc0VsKTtcblxuICAgIC8vIFRhYiBzd2l0Y2hpbmdcbiAgICBjaGF0VGFiLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN3aXRjaFRhYignY2hhdCcsIGNoYXRUYWIpO1xuICAgIHdvcmtmbG93VGFiLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN3aXRjaFRhYignd29ya2Zsb3cnLCB3b3JrZmxvd1RhYik7XG4gICAgYW5hbHl0aWNzVGFiLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN3aXRjaFRhYignYW5hbHl0aWNzJywgYW5hbHl0aWNzVGFiKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUmlnaHRTaWRlYmFyKHNpZGViYXI6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gUmVjZW50IGZpbGVzXG4gICAgY29uc3QgcmVjZW50RmlsZXNFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZWNlbnQtZmlsZXMnIH0pO1xuICAgIHJlY2VudEZpbGVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEZpbGVzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVJlY2VudEZpbGVzKHJlY2VudEZpbGVzRWwpO1xuXG4gICAgLy8gQWdlbnQgc3RhdHVzXG4gICAgY29uc3QgYWdlbnRTdGF0dXNFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zdGF0dXMnIH0pO1xuICAgIGFnZW50U3RhdHVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgU3RhdHVzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZUFnZW50U3RhdHVzKGFnZW50U3RhdHVzRWwpO1xuXG4gICAgLy8gQWN0aXZpdHkgZmVlZFxuICAgIGNvbnN0IGFjdGl2aXR5RWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aXZpdHktZmVlZCcgfSk7XG4gICAgYWN0aXZpdHlFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBY3Rpdml0eSBGZWVkJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUFjdGl2aXR5RmVlZChhY3Rpdml0eUVsKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ2hhdFNlY3Rpb24oY2hhdEVsOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIENoYXQgY29udGVudCBjb250YWluZXIgd2l0aCBwYWRkaW5nIGFuZCBzY3JvbGxpbmdcbiAgICBjb25zdCBjaGF0Q29udGVudCA9IGNoYXRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtY29udGVudCcgfSk7XG5cbiAgICAvLyBDaGF0IGhlYWRlciAobm93IGluc2lkZSBjb250ZW50KVxuICAgIGNvbnN0IGNoYXRIZWFkZXIgPSBjaGF0Q29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaGVhZGVyJyB9KTtcbiAgICBjaGF0SGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FJIENoYXQgSW50ZXJmYWNlJyB9KTtcblxuICAgIC8vIENoYXQgaGlzdG9yeVxuICAgIGNvbnN0IGNoYXRIaXN0b3J5ID0gY2hhdENvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhpc3RvcnknIH0pO1xuICAgIGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1dlbGNvbWUhIFN0YXJ0IGEgY29udmVyc2F0aW9uIHdpdGggeW91ciBBSSBhc3Npc3RhbnQuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC13ZWxjb21lJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hhdCBpbnB1dFxuICAgIGNvbnN0IGNoYXRJbnB1dCA9IGNoYXRDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1pbnB1dCcgfSk7XG4gICAgY29uc3QgdGV4dGFyZWEgPSBjaGF0SW5wdXQuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyBcbiAgICAgIHBsYWNlaG9sZGVyOiAnVHlwZSB5b3VyIG1lc3NhZ2UgaGVyZS4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdGV4dGFyZWEnXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGNoYXRJbnB1dC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTZW5kJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1zZW5kLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIHNlbmRCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZXh0YXJlYS52YWx1ZS50cmltKCk7XG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICB0aGlzLnNlbmRDaGF0TWVzc2FnZShtZXNzYWdlLCBjaGF0SGlzdG9yeSk7XG4gICAgICAgIHRleHRhcmVhLnZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBFbnRlciBrZXlcbiAgICB0ZXh0YXJlYS5vbmtleWRvd24gPSAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2VuZEJ1dHRvbi5jbGljaygpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVdvcmtmbG93U2VjdGlvbih3b3JrZmxvd0VsOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIFdvcmtmbG93IGNvbnRlbnQgY29udGFpbmVyIHdpdGggcGFkZGluZyBhbmQgc2Nyb2xsaW5nXG4gICAgY29uc3Qgd29ya2Zsb3dDb250ZW50ID0gd29ya2Zsb3dFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWNvbnRlbnQnIH0pO1xuICAgIFxuICAgIC8vIFdvcmtmbG93IGhlYWRlciAobm93IGluc2lkZSBjb250ZW50KVxuICAgIGNvbnN0IHdvcmtmbG93SGVhZGVyID0gd29ya2Zsb3dDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyJyB9KTtcbiAgICB3b3JrZmxvd0hlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdXb3JrZmxvdyBNYW5hZ2VtZW50JyB9KTtcblxuICAgIGNvbnN0IHdvcmtmbG93R3JpZCA9IHdvcmtmbG93Q29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWdyaWQnIH0pO1xuXG4gICAgLy8gUHJlZGVmaW5lZCB3b3JrZmxvd3NcbiAgICBjb25zdCB3b3JrZmxvd3MgPSBbXG4gICAgICB7IG5hbWU6ICdBbmFseXplIFZhdWx0JywgaWNvbjogJ/CflI0nLCBkZXNjcmlwdGlvbjogJ0FuYWx5emUgeW91ciB2YXVsdCBzdHJ1Y3R1cmUgYW5kIGNvbnRlbnQnIH0sXG4gICAgICB7IG5hbWU6ICdHZW5lcmF0ZSBTdW1tYXJ5JywgaWNvbjogJ/Cfk50nLCBkZXNjcmlwdGlvbjogJ0NyZWF0ZSBzdW1tYXJpZXMgb2YgeW91ciBub3RlcycgfSxcbiAgICAgIHsgbmFtZTogJ0xpbmsgQW5hbHlzaXMnLCBpY29uOiAn8J+UlycsIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSBub3RlIGNvbm5lY3Rpb25zIGFuZCByZWxhdGlvbnNoaXBzJyB9LFxuICAgICAgeyBuYW1lOiAnVGFnIE1hbmFnZW1lbnQnLCBpY29uOiAn8J+Pt++4jycsIGRlc2NyaXB0aW9uOiAnT3JnYW5pemUgYW5kIG1hbmFnZSB5b3VyIHRhZ3MnIH0sXG4gICAgICB7IG5hbWU6ICdEYWlseSBQbGFubmluZycsIGljb246ICfwn5OFJywgZGVzY3JpcHRpb246ICdQbGFuIHlvdXIgZGF5IGJhc2VkIG9uIHlvdXIgbm90ZXMnIH0sXG4gICAgICB7IG5hbWU6ICdLbm93bGVkZ2UgR3JhcGgnLCBpY29uOiAn8J+VuO+4jycsIGRlc2NyaXB0aW9uOiAnVmlzdWFsaXplIHlvdXIga25vd2xlZGdlIGNvbm5lY3Rpb25zJyB9LFxuICAgICAgeyBuYW1lOiAnQ29udGVudCBTZWFyY2gnLCBpY29uOiAn8J+UjicsIGRlc2NyaXB0aW9uOiAnQWR2YW5jZWQgc2VhcmNoIGFjcm9zcyB5b3VyIHZhdWx0JyB9LFxuICAgICAgeyBuYW1lOiAnTm90ZSBUZW1wbGF0ZXMnLCBpY29uOiAn8J+ThCcsIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIGFuZCBtYW5hZ2Ugbm90ZSB0ZW1wbGF0ZXMnIH0sXG4gICAgICB7IG5hbWU6ICdMaW5rIEFzc2lzdGFudCcsIGljb246ICfwn5SXJywgZGVzY3JpcHRpb246ICdJbnRlbGxpZ2VudCBsaW5rIHN1Z2dlc3Rpb25zIGFuZCBtYW5hZ2VtZW50JyB9XG4gICAgXTtcblxuICAgIHdvcmtmbG93cy5mb3JFYWNoKHdvcmtmbG93ID0+IHtcbiAgICAgIGNvbnN0IHdvcmtmbG93Q2FyZCA9IHdvcmtmbG93R3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWNhcmQnIH0pO1xuICAgICAgd29ya2Zsb3dDYXJkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHdvcmtmbG93Lmljb24sIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctaWNvbicgfSk7XG4gICAgICB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiB3b3JrZmxvdy5uYW1lIH0pO1xuICAgICAgd29ya2Zsb3dDYXJkLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB3b3JrZmxvdy5kZXNjcmlwdGlvbiB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcnVuQnV0dG9uID0gd29ya2Zsb3dDYXJkLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICB0ZXh0OiAnUnVuJyxcbiAgICAgICAgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1ydW4tYnV0dG9uJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJ1bkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5ydW5Xb3JrZmxvdyh3b3JrZmxvdy5uYW1lKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQW5hbHl0aWNzU2VjdGlvbihhbmFseXRpY3NFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBBbmFseXRpY3MgY29udGVudCBjb250YWluZXIgd2l0aCBwYWRkaW5nIGFuZCBzY3JvbGxpbmdcbiAgICBjb25zdCBhbmFseXRpY3NDb250ZW50ID0gYW5hbHl0aWNzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hbmFseXRpY3MtY29udGVudCcgfSk7XG4gICAgXG4gICAgLy8gQW5hbHl0aWNzIGhlYWRlciAobm93IGluc2lkZSBjb250ZW50KVxuICAgIGNvbnN0IGFuYWx5dGljc0hlYWRlciA9IGFuYWx5dGljc0NvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hbmFseXRpY3MtaGVhZGVyJyB9KTtcbiAgICBhbmFseXRpY3NIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgQW5hbHl0aWNzJyB9KTtcblxuICAgIGNvbnN0IGNoYXJ0c0NvbnRhaW5lciA9IGFuYWx5dGljc0NvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydHMtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBGaWxlIHR5cGUgZGlzdHJpYnV0aW9uXG4gICAgY29uc3QgZmlsZVR5cGVDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIGZpbGVUeXBlQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRmlsZSBUeXBlIERpc3RyaWJ1dGlvbicgfSk7XG4gICAgZmlsZVR5cGVDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdDaGFydCB2aXN1YWxpemF0aW9uIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBOb3RlIGNyZWF0aW9uIHRpbWVsaW5lXG4gICAgY29uc3QgdGltZWxpbmVDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIHRpbWVsaW5lQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnTm90ZSBDcmVhdGlvbiBUaW1lbGluZScgfSk7XG4gICAgdGltZWxpbmVDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdUaW1lbGluZSB2aXN1YWxpemF0aW9uIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBUYWcgdXNhZ2VcbiAgICBjb25zdCB0YWdDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIHRhZ0NoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1RhZyBVc2FnZScgfSk7XG4gICAgdGFnQ2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnVGFnIGFuYWx5dGljcyBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gV29yZCBjb3VudCBhbmFseXNpc1xuICAgIGNvbnN0IHdvcmRDb3VudENoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgd29yZENvdW50Q2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnV29yZCBDb3VudCBBbmFseXNpcycgfSk7XG4gICAgd29yZENvdW50Q2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnV29yZCBjb3VudCB2aXN1YWxpemF0aW9uIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBMaW5rIGRlbnNpdHlcbiAgICBjb25zdCBsaW5rQ2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICBsaW5rQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnTGluayBEZW5zaXR5JyB9KTtcbiAgICBsaW5rQ2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnTGluayBhbmFseXNpcyBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gQWN0aXZpdHkgaGVhdG1hcFxuICAgIGNvbnN0IGFjdGl2aXR5Q2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICBhY3Rpdml0eUNoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0FjdGl2aXR5IEhlYXRtYXAnIH0pO1xuICAgIGFjdGl2aXR5Q2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgaGVhdG1hcCBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzd2l0Y2hUYWIodGFiTmFtZTogc3RyaW5nLCBidXR0b246IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbCB0YWJzXG4gICAgdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcudmF1bHRwaWxvdC10YWItYnV0dG9uJykuZm9yRWFjaChidG4gPT4ge1xuICAgICAgYnRuLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52YXVsdHBpbG90LWNoYXQtc2VjdGlvbiwgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbiwgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24nKS5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgc2VjdGlvbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGNsaWNrZWQgdGFiXG4gICAgYnV0dG9uLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgIC8vIFNob3cgY29ycmVzcG9uZGluZyBjb250ZW50XG4gICAgaWYgKHRhYk5hbWUgPT09ICdjaGF0Jykge1xuICAgICAgdGhpcy5jaGF0RWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ3dvcmtmbG93Jykge1xuICAgICAgdGhpcy53b3JrZmxvd0VsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9IGVsc2UgaWYgKHRhYk5hbWUgPT09ICdhbmFseXRpY3MnKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJyk/LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRDaGF0TWVzc2FnZShtZXNzYWdlOiBzdHJpbmcsIGNoYXRIaXN0b3J5OiBIVE1MRWxlbWVudCkge1xuICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2VcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIHVzZXInIH0pO1xuICAgIHVzZXJNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IG1lc3NhZ2UgfSk7XG5cbiAgICAvLyBBZGQgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgY29uc3QgdGhpbmtpbmdNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgYXNzaXN0YW50IHRoaW5raW5nJyB9KTtcbiAgICB0aGlua2luZ01lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1RoaW5raW5nLi4uJyB9KTtcblxuICAgIC8vIFNjcm9sbCB0byBib3R0b21cbiAgICBjaGF0SGlzdG9yeS5zY3JvbGxUb3AgPSBjaGF0SGlzdG9yeS5zY3JvbGxIZWlnaHQ7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2VuZENoYXQoeyBtZXNzYWdlLCBjb250ZXh0OiBudWxsIH0pO1xuICAgICAgXG4gICAgICAvLyBSZW1vdmUgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgICB0aGlua2luZ01lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGFzc2lzdGFudCcgfSk7XG4gICAgICAgIGFzc2lzdGFudE1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGVycm9yJyB9KTtcbiAgICAgICAgZXJyb3JNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdFcnJvcjogQ291bGQgbm90IGdldCByZXNwb25zZSBmcm9tIEFJJyB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gUmVtb3ZlIHRoaW5raW5nIGluZGljYXRvclxuICAgICAgdGhpbmtpbmdNZXNzYWdlLnJlbW92ZSgpO1xuICAgICAgXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBlcnJvcicgfSk7XG4gICAgICBlcnJvck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yOiBDb25uZWN0aW9uIGZhaWxlZCcgfSk7XG4gICAgfVxuXG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbVxuICAgIGNoYXRIaXN0b3J5LnNjcm9sbFRvcCA9IGNoYXRIaXN0b3J5LnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuV29ya2Zsb3cod29ya2Zsb3dOYW1lOiBzdHJpbmcpIHtcbiAgICBuZXcgTm90aWNlKGBSdW5uaW5nIHdvcmtmbG93OiAke3dvcmtmbG93TmFtZX1gKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gTWFwIHdvcmtmbG93IG5hbWVzIHRvIGFwcHJvcHJpYXRlIGFjdGlvbnNcbiAgICAgIHN3aXRjaCAod29ya2Zsb3dOYW1lKSB7XG4gICAgICAgIGNhc2UgJ0FuYWx5emUgVmF1bHQnOlxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdEYWlseSBQbGFubmluZyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ucGxhbk15RGF5KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gRm9yIG5vdywgc2hvdyBhIHBsYWNlaG9sZGVyXG4gICAgICAgICAgbmV3IE5vdGljZShgJHt3b3JrZmxvd05hbWV9IHdvcmtmbG93IGlzIGNvbWluZyBzb29uIWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBFcnJvciBydW5uaW5nIHdvcmtmbG93OiAke3dvcmtmbG93TmFtZX1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/Cfn6IgQ29ubmVjdGVkJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IEVycm9yJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtZXJyb3InO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBPZmZsaW5lJztcbiAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVpY2tBY3Rpb25zKCkge1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuZW1wdHkoKTtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1aWNrIEFjdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgYWN0aW9uc0dyaWQgPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkJyB9KTtcblxuICAgIC8vIFJlZnJlc2ggYnV0dG9uXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcblxuICAgIC8vIE9wZW4gc2lkZWJhciB2aWV3XG4gICAgY29uc3Qgc2lkZWJhckJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiyBTaWRlYmFyIFZpZXcnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHNpZGViYXJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldygpO1xuXG4gICAgLy8gT3BlbiBtb2RhbCBjaGF0XG4gICAgY29uc3QgbW9kYWxDaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE1vZGFsIENoYXQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIG1vZGFsQ2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgIGNvbnN0IHdvcmtmbG93QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUmVjZW50RmlsZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlY2VudEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lKVxuICAgICAgLnNsaWNlKDAsIDUpO1xuXG4gICAgcmVjZW50RmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlJyB9KTtcbiAgICAgIGZpbGVFbC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgIGZpbGVFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUFnZW50U3RhdHVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLmxvYWRBZ2VudEluZm8oY29udGFpbmVyKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50SW5mbyhjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTG9hZGluZyBhZ2VudHMgaW4gZnVsbC10YWItdmlldy4uLicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogZ2V0QWdlbnRzIHJlc3BvbnNlIGluIGZ1bGwtdGFiLXZpZXc6JywgcmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIGNvbnRhaW5lcikge1xuICAgICAgICBsZXQgYWdlbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgLy8gRGlyZWN0IGFycmF5IHJlc3BvbnNlXG4gICAgICAgICAgYWdlbnRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIC8vIENoZWNrIGZvciB3cmFwcGVkIHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgICBjb25zdCBkYXRhT2JqID0gcmVzcG9uc2UuZGF0YSBhcyBhbnk7XG4gICAgICAgICAgaWYgKGRhdGFPYmouYWdlbnRzICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5hZ2VudHMpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHthZ2VudHM6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5hZ2VudHM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgYWdlbnRzIGFycmF5IGluIGZ1bGwtdGFiLXZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuYWdlbnRzJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhT2JqLmRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHtkYXRhOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouZGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBuZXN0ZWQgZGF0YSBpbiBmdWxsLXRhYi12aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmRhdGEnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdWYXVsdFBpbG90OiBVbmV4cGVjdGVkIHJlc3BvbnNlIGZvcm1hdDonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwbGF5IGFnZW50IGluZm9ybWF0aW9uXG4gICAgICAgIGNvbnN0IGFnZW50Q291bnQgPSBhZ2VudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSBhZ2VudHMuZmlsdGVyKChhZ2VudDogYW55KSA9PiBhZ2VudC5hY3RpdmUpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50SW5mbyA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWluZm8nIH0pO1xuICAgICAgICBhZ2VudEluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICAgIFxuICAgICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGFnZW50RWwgPSBhZ2VudEluZm8uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pdGVtJyB9KTtcbiAgICAgICAgICBhZ2VudEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBhZ2VudC5uYW1lIH0pO1xuICAgICAgICAgIGFnZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgdGV4dDogYWdlbnQuYWN0aXZlID8gJ/Cfn6InIDogJ/CflLQnLFxuICAgICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zdGF0dXMnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHMgaW4gZnVsbCB0YWIgdmlldzonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBY3Rpdml0eUZlZWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGFjdGl2aXRpZXMgPSBbXG4gICAgICB7IHRpbWU6ICdKdXN0IG5vdycsIGFjdGl2aXR5OiAnVmF1bHRQaWxvdCBzdGFydGVkJyB9LFxuICAgICAgeyB0aW1lOiAnNSBtaW4gYWdvJywgYWN0aXZpdHk6ICdDb25uZWN0aW9uIGVzdGFibGlzaGVkJyB9LFxuICAgICAgeyB0aW1lOiAnMSBob3VyIGFnbycsIGFjdGl2aXR5OiAnTGFzdCB2YXVsdCBhbmFseXNpcycgfVxuICAgIF07XG5cbiAgICBhY3Rpdml0aWVzLmZvckVhY2goYWN0aXZpdHkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZpdHlFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXR5LWl0ZW0nIH0pO1xuICAgICAgYWN0aXZpdHlFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhY3Rpdml0eS5hY3Rpdml0eSB9KTtcbiAgICAgIGFjdGl2aXR5RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYWN0aXZpdHkudGltZSwgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS10aW1lJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRnVsbFRhYlN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LWZ1bGwtdGFiLXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1mdWxsLXRhYi1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLyogRW5zdXJlIHRoZSBmdWxsIHRhYiB2aWV3IGZpbGxzIGF2YWlsYWJsZSBzcGFjZSAqL1xuICAgICAgICAud29ya3NwYWNlLWxlYWYtY29udGVudFtkYXRhLXR5cGU9XCJ2YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXdcIl0ge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3IHtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1haW4tbGF5b3V0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZ2FwOiAxcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbGVmdC1zaWRlYmFyIHtcbiAgICAgICAgICB3aWR0aDogMjUwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWFpbi1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmlnaHQtc2lkZWJhciB7XG4gICAgICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNpZGViYXItaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXRhYi1uYXYge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbiB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbi5hY3RpdmUge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItY29udGVudCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLyogU2VjdGlvbnMganVzdCBmbGV4LWdyb3cgYW5kIGhvbGQgdGhlaXIgY2hpbGRyZW4gKi9cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbiB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTsgICAgICAgICAgIC8qIGhpZGRlbiBieSBkZWZhdWx0ICovXG4gICAgICAgICAgZmxleDogMSAxIDA7ICAgICAgICAgICAgIC8qIGZsZXgtZ3JvdywgZmxleC1zaHJpbmssIGJhc2UgMCAqL1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDsgICAgICAgICAgIC8qIGFsbG93IGNoaWxkcmVuIHRvIHNocmluay9zY3JvbGwgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEFjdGl2ZSBzZWN0aW9uIHNob3dzIGFuZCBmbGV4ZXMgKi9cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLmFjdGl2ZSxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbi5hY3RpdmUsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uLmFjdGl2ZSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDsgICAgICAgICAgIC8qIHNob3cgJiBmbGV4IHdoZW4gYWN0aXZlICovXG4gICAgICAgIH1cblxuICAgICAgICAvKiBDb250ZW50IHBhbmVscyBoYW5kbGUgdGhlIHNjcm9sbGluZyAqL1xuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWNvbnRlbnQsXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNvbnRlbnQsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxIDEgMDsgICAgICAgICAgICAgLyogZmlsbCByZW1haW5pbmcgc3BhY2UgKi9cbiAgICAgICAgICBtaW4taGVpZ2h0OiAwOyAgICAgICAgICAgLyogY3JpdGljYWwgdG8gYWxsb3cgb3ZlcmZsb3cgKi9cbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOyAgICAgICAgLyogbm93ICp0aGlzKiBjb250YWluZXIgc2Nyb2xscyAqL1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBrZWVwIHNwZWNpYWwgY2hhdCBnYXBzICovXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGVudCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhpc3Rvcnkge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXRleHRhcmVhIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDYwcHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZW5kLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGhlaWdodDogZml0LWNvbnRlbnQ7XG4gICAgICAgICAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXgtd2lkdGg6IDgwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UudXNlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS5hc3Npc3RhbnQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS50aGlua2luZyB7XG4gICAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UuZXJyb3Ige1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3MtaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3MtaGVhZGVyIGgzIHtcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgICBhbGlnbi1jb250ZW50OiBzdGFydDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1jYXJkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNhcmQ6aG92ZXIge1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWljb24ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbiB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMzAwcHgsIDFmcikpO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgICBhbGlnbi1jb250ZW50OiBzdGFydDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1jYXJkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhcnQtY2FyZDpob3ZlciB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVjZW50LWZpbGUge1xuICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlY2VudC1maWxlOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDRweCAwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXR5LWl0ZW0ge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiA2cHggMDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXR5LXRpbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMnB4O1xuICAgICAgICB9XG4gICAgICAgIC8qIEluaGVyaXQgc3R5bGVzIGZyb20gb3JpZ2luYWwgdmlldyAqL1xuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMgaDMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA0cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtZXJyb3IsXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDhweCA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWl0ZW0ge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtbGFiZWwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlc291cmNlc1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIEdsb2JhbCBhcHAgaW5zdGFuY2UgLSB3aWxsIGJlIHNldCBieSB0aGUgbWFpbiBwbHVnaW5cbmV4cG9ydCBsZXQgYXBwOiBBcHA7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBcHAoYXBwSW5zdGFuY2U6IEFwcCkge1xuICBhcHAgPSBhcHBJbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBjb250ZW50IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIG1hcmtkb3duIGZpbGVcbiAqIEByZXR1cm5zIFRoZSBtYXJrZG93biBjb250ZW50ICh0cnVuY2F0ZWQgdG8gODAwMCBjaGFycykgb3IgbnVsbCBpZiBubyBmaWxlIGlzIGFjdGl2ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlTWFya2Rvd24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgaWYgKCFmaWxlKSByZXR1cm4gbnVsbDtcbiAgXG4gIC8vIExhcmdlIG5vdGVzPyBTbmlwIHRvIDgwMDAgY2hhcnMgdG8ga2VlcCB0b2tlbnMgcmVhc29uYWJsZVxuICBjb25zdCB0ZXh0ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gIHJldHVybiB0ZXh0LnNsaWNlKDAsIDhfMDAwKTtcbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBJbnRlbnQgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGdldEFjdGl2ZU1hcmtkb3duIH0gZnJvbSAnLi92YXVsdC11dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBjaGF0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaW5wdXRDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBtZXNzYWdlc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaW5wdXRFbCE6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgc2VuZEJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGN1cnJlbnRDb252ZXJzYXRpb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbWVzc2FnZXM6IENoYXRNZXNzYWdlW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtY2hhdC1tb2RhbCcpO1xuXG4gICAgLy8gTW9kYWwgaGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90IENoYXQnIH0pO1xuICAgIFxuICAgIGNvbnN0IHRvb2xiYXJFbCA9IGhlYWRlckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC10b29sYmFyJyB9KTtcbiAgICBcbiAgICAvLyBBZGQgaW5mbyBhYm91dCBhdXRvbWF0aWMgbW9kZSBkZXRlY3Rpb25cbiAgICBjb25zdCBhdXRvTW9kZUluZm8gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWF1dG8tbW9kZS1pbmZvJyxcbiAgICAgIHRleHQ6ICfimqEgQXV0b21hdGljIG1vZGUgZGV0ZWN0aW9uIGVuYWJsZWQnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2xlYXIgY2hhdCBidXR0b25cbiAgICBjb25zdCBjbGVhckJ0biA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDbGVhciBDaGF0JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY2xlYXJCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xlYXJDaGF0KCk7XG5cbiAgICAvLyBBZ2VudCBzZWxlY3RvciAod2lsbCBiZSBwb3B1bGF0ZWQgd2hlbiBhZ2VudHMgYXJlIGxvYWRlZClcbiAgICBjb25zdCBhZ2VudFNlbGVjdCA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXNlbGVjdCcgfSk7XG4gICAgYWdlbnRTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0F1dG8tc2VsZWN0IEFnZW50JywgdmFsdWU6ICcnIH0pO1xuICAgIHRoaXMubG9hZEFnZW50cyhhZ2VudFNlbGVjdCk7XG5cbiAgICAvLyBDaGF0IGNvbnRhaW5lclxuICAgIHRoaXMuY2hhdENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBNZXNzYWdlcyBhcmVhXG4gICAgdGhpcy5tZXNzYWdlc0VsID0gdGhpcy5jaGF0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcycgfSk7XG4gICAgXG4gICAgLy8gSW5wdXQgY29udGFpbmVyXG4gICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICB0aGlzLmlucHV0RWwgPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQXNrIGEgcXVlc3Rpb24gb3IgZGVzY3JpYmUgd2hhdCB5b3Ugd2FudCB0byBhY2NvbXBsaXNoLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1pbnB1dCdcbiAgICB9KTtcblxuICAgIHRoaXMuc2VuZEJ1dHRvbiA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTZW5kJyxcbiAgICAgIGNsczogJ21vZC1jdGEgdmF1bHRwaWxvdC1zZW5kLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2VuZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zZW5kTWVzc2FnZSgpO1xuXG4gICAgLy8gRm9jdXMgdGhlIGlucHV0XG4gICAgdGhpcy5pbnB1dEVsLmZvY3VzKCk7XG5cbiAgICAvLyBMb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgdGhpcy5sb2FkQ29udmVyc2F0aW9uSGlzdG9yeSgpO1xuXG4gICAgLy8gQWRkIHN0eWxlc1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudHMoc2VsZWN0RWw6IEhUTUxTZWxlY3RFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cy4uLicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogZ2V0QWdlbnRzIHJlc3BvbnNlOicsIHJlc3BvbnNlKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogcmVzcG9uc2UuZGF0YSB0eXBlOicsIHR5cGVvZiByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IHJlc3BvbnNlLmRhdGEgY29udGVudDonLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhZ2VudHM6IGFueVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBkYXRhIGlzIGRpcmVjdGx5IGFuIGFycmF5XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgYWdlbnRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBcbiAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YSBoYXMgYW4gJ2FnZW50cycgcHJvcGVydHkgd2l0aCBhbiBhcnJheVxuICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNvbnN0IGRhdGFPYmogPSByZXNwb25zZS5kYXRhIGFzIGFueTtcbiAgICAgICAgICBpZiAoZGF0YU9iai5hZ2VudHMgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmFnZW50cykpIHtcbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouYWdlbnRzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YU9iai5kYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5kYXRhKSkge1xuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5kYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGFnZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kJywgYWdlbnRzLmxlbmd0aCwgJ2FnZW50cycpO1xuICAgICAgICAgIGFnZW50cy5mb3JFYWNoKGFnZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7XG4gICAgICAgICAgICAgIHRleHQ6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiBhZ2VudC5pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IE5vIGFnZW50cyBmb3VuZCBpbiByZXNwb25zZScpO1xuICAgICAgICAgIC8vIEFkZCBhIGRlZmF1bHQgb3B0aW9uIGluZGljYXRpbmcgbm8gYWdlbnRzXG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdObyBhZ2VudHMgYXZhaWxhYmxlJyxcbiAgICAgICAgICAgIHZhbHVlOiAnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG9wdGlvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50czogQVBJIHJldHVybmVkIGVycm9yIG9yIG5vIGRhdGE6JywgcmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKSB7XG4gICAgLy8gT25seSB0cnkgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeSBpZiB3ZSBoYXZlIGEgY29udmVyc2F0aW9uIElEXG4gICAgaWYgKHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb252ZXJzYXRpb25IaXN0b3J5KHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2VzO1xuICAgICAgICAgIHRoaXMucmVuZGVyTWVzc2FnZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiBubyBjb252ZXJzYXRpb24gSUQsIHN0YXJ0IGZyZXNoIChubyBoaXN0b3J5IHRvIGxvYWQpXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRNZXNzYWdlKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmlucHV0RWwudmFsdWUudHJpbSgpO1xuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgLy8gRGlzYWJsZSBpbnB1dCB3aGlsZSBwcm9jZXNzaW5nXG4gICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kaW5nLi4uJztcblxuICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2UgdG8gVUlcbiAgICB0aGlzLmFkZE1lc3NhZ2UoJ3VzZXInLCBtZXNzYWdlKTtcbiAgICB0aGlzLmlucHV0RWwudmFsdWUgPSAnJztcblxuICAgIHRyeSB7XG4gICAgICAvLyDilIDilIAgZmV0Y2ggY29udGV4dCAmIGludGVudCBpbiBwYXJhbGxlbCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbiAgICAgIGNvbnN0IFtjb250ZXh0LCBpbnRlbnRSZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBnZXRBY3RpdmVNYXJrZG93bigpLCAgICAgICAgICAvLyByZXR1cm5zIHN0cmluZyB8IG51bGxcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNsYXNzaWZ5SW50ZW50KG1lc3NhZ2UpICAvLyBQT1NUIC9pbnRlbGxpZ2VuY2UvcGFyc2VcbiAgICAgIF0pO1xuXG4gICAgICAvLyBidWlsZCBhIGdlbmVyaWMgcGF5bG9hZDsgY29udGV4dCBtYXkgYmUgbnVsbC9lbXB0eVxuICAgICAgY29uc3QgcGF5bG9hZCA9IHsgbWVzc2FnZSwgY29udGV4dCB9O1xuXG4gICAgICAvLyBTaG93IGludGVudCBkZXRlY3Rpb24gaW4gVUkgaWYgZGVidWcgbW9kZSBpcyBlbmFibGVkXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnKSB7XG4gICAgICAgIHRoaXMuc2hvd0ludGVudERlYnVnKGludGVudFJlcy5pbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICBcbiAgICAgIGlmIChpbnRlbnRSZXMuaW50ZW50ID09PSBcImFnZW50XCIpIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQucnVuV29ya2Zsb3cocGF5bG9hZCk7ICAgICAvLyBQT1NUIC93b3JrZmxvd1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYOKame+4jyBBZ2VudCBNb2RlIChhdXRvLWRldGVjdGVkKVxcblxcbiR7cmVzcG9uc2UuZGF0YS5yZXN1bHR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3IgaW4gYWdlbnQgbW9kZTogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNlbmRDaGF0KHBheWxvYWQsIHtcbiAgICAgICAgICBjb252ZXJzYXRpb25faWQ6IHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBhZ2VudF9pZDogdGhpcy5nZXRTZWxlY3RlZEFnZW50KClcbiAgICAgICAgfSk7ICAgICAgICAvLyBQT1NUIC9jaGF0XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSByZXNwb25zZS5kYXRhLmNvbnZlcnNhdGlvbl9pZDtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIHJlc3BvbnNlLmRhdGEucmVzcG9uc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yOiAke3Jlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2V0IHJlc3BvbnNlJ31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXYXJuIHVzZXIgaWYgdGhleSBoYWQgY29udGV4dCBkaXNhYmxlZFxuICAgICAgaWYgKCFjb250ZXh0Py5sZW5ndGgpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIuKaoO+4jyBObyB2YXVsdCBjb250ZW50IHdhcyBzZW50OyByZXBsaWVzIG1heSBiZSBnZW5lcmljLlwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dFxuICAgICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kJztcbiAgICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRBZ2VudCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHNlbGVjdEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcmV0dXJuIHNlbGVjdEVsPy52YWx1ZSB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5tZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpIHtcbiAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogYHZhdWx0cGlsb3QtbWVzc2FnZSB2YXVsdHBpbG90LW1lc3NhZ2UtJHttZXNzYWdlLnJvbGV9YFxuICAgIH0pO1xuXG4gICAgY29uc3Qgcm9sZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2Utcm9sZScsXG4gICAgICB0ZXh0OiBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdZb3UnIDogJ1ZhdWx0UGlsb3QnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmluZyBmb3IgYmFzaWMgZm9ybWF0dGluZ1xuICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKG1lc3NhZ2UuY29udGVudCk7XG5cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtdGltZScsXG4gICAgICAgIHRleHQ6IG5ldyBEYXRlKG1lc3NhZ2UudGltZXN0YW1wKS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyQ2hhdCgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIG5ldyBOb3RpY2UoJ0NoYXQgY2xlYXJlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC1jaGF0LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1jaGF0LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNjAwcHg7XG4gICAgICAgICAgaGVpZ2h0OiA3MDBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC10b29sYmFyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbyB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0IHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA4MHB4KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2VzIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS11c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlIHtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWNvbnRlbnQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogdGV4dDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaW50ZW50LWRlYnVnIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbiAgICAgICAgICBhbmltYXRpb246IGZhZGVJbk91dCAzcyBlYXNlLWluLW91dDtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbk91dCB7XG4gICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XG4gICAgICAgICAgMTAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4gICAgICAgICAgOTAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4gICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7IH1cbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93SW50ZW50RGVidWcoaW50ZW50OiBzdHJpbmcpIHtcbiAgICAvLyBDcmVhdGUgYSBzdWJ0bGUgbm90aWZpY2F0aW9uIHNob3dpbmcgdGhlIGRldGVjdGVkIGludGVudFxuICAgIGNvbnN0IGRlYnVnRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtaW50ZW50LWRlYnVnJyxcbiAgICAgIHRleHQ6IGDwn5SNIEludGVudCBkZXRlY3RlZDogJHtpbnRlbnQgPT09ICdhZ2VudCcgPyAn4pqZ77iPIEFnZW50IE1vZGUnIDogJ/CfkqwgQXNrIE1vZGUnfWBcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBdXRvLXJlbW92ZSBhZnRlciAzIHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRlYnVnRWwucmVtb3ZlKCk7XG4gICAgfSwgMzAwMCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgV29ya2Zsb3dSZXF1ZXN0LCBXb3JrZmxvd1Jlc3BvbnNlLCBXb3JrZmxvd1Byb2dyZXNzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBXb3JrZmxvd01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgZ29hbElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBjb250ZXh0SW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGV4ZWN1dGVCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBwcm9ncmVzc0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlc3VsdHNDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpc0V4ZWN1dGluZyA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCcpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ+Kame+4jyBXb3JrZmxvdyBFeGVjdXRpb24nIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdEZWZpbmUgYSBnb2FsIGFuZCBsZXQgVmF1bHRQaWxvdCBjcmVhdGUgYW5kIGV4ZWN1dGUgYSBjb21wcmVoZW5zaXZlIHdvcmtmbG93IHRvIGFjaGlldmUgaXQuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24nXG4gICAgfSk7XG5cbiAgICAvLyBGb3JtXG4gICAgY29uc3QgZm9ybUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZm9ybScgfSk7XG5cbiAgICAvLyBHb2FsIGlucHV0XG4gICAgY29uc3QgZ29hbENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdHb2FsIConLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuICAgIHRoaXMuZ29hbElucHV0ID0gZ29hbENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ2UuZy4sIFwiQ3JlYXRlIGEgY29tcHJlaGVuc2l2ZSBzdHVkeSBwbGFuIGZvciBtYWNoaW5lIGxlYXJuaW5nIGJhc2VkIG9uIG15IG5vdGVzXCInLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1nb2FsLWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gQ29udGV4dCBpbnB1dFxuICAgIGNvbnN0IGNvbnRleHRDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnQWRkaXRpb25hbCBDb250ZXh0IChvcHRpb25hbCknLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dElucHV0ID0gY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ1Byb3ZpZGUgYW55IGFkZGl0aW9uYWwgY29udGV4dCwgY29uc3RyYWludHMsIG9yIHJlcXVpcmVtZW50cy4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNvbnRleHQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBWYXVsdCBjb250ZW50IG9wdGlvbnNcbiAgICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ1ZhdWx0IEludGVncmF0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBY3RpdmVGaWxlID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGVDaGVja2JveCA9IGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWN0aXZlIGZpbGUgY29udGVudCcgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWxsRmlsZXMgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWxsRmlsZXNDaGVja2JveCA9IGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhbGwgdmF1bHQgZmlsZXMgKG1heSB0YWtlIGxvbmdlciknIH0pO1xuXG4gICAgLy8gRXhlY3V0ZSBidXR0b25cbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24gPSBmb3JtRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ21vZC1jdGEgdmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbidcbiAgICB9KTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZXhlY3V0ZVdvcmtmbG93KGFjdGl2ZUZpbGVDaGVja2JveC5jaGVja2VkLCBhbGxGaWxlc0NoZWNrYm94LmNoZWNrZWQpO1xuXG4gICAgLy8gUHJvZ3Jlc3MgY29udGFpbmVyXG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIFJlc3VsdHMgY29udGFpbmVyXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIEZvY3VzIHRoZSBnb2FsIGlucHV0XG4gICAgdGhpcy5nb2FsSW5wdXQuZm9jdXMoKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhpbmNsdWRlQWN0aXZlRmlsZTogYm9vbGVhbiwgaW5jbHVkZUFsbEZpbGVzOiBib29sZWFuKSB7XG4gICAgY29uc3QgZ29hbCA9IHRoaXMuZ29hbElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIWdvYWwpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIGdvYWwgZm9yIHRoZSB3b3JrZmxvdycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaXNFeGVjdXRpbmcgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGluZy4uLic7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIHRyeSB7XG4gICAgICAvLyBQcmVwYXJlIHZhdWx0IGNvbnRlbnRcbiAgICAgIGxldCB2YXVsdENvbnRlbnQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGluY2x1ZGVBY3RpdmVGaWxlKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7YWN0aXZlRmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5jbHVkZUFsbEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMjApKSB7IC8vIExpbWl0IHRvIGZpcnN0IDIwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSB3b3JrZmxvdyByZXF1ZXN0XG4gICAgICBjb25zdCByZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QgPSB7XG4gICAgICAgIGdvYWwsXG4gICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dElucHV0LnZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHZhdWx0X2NvbnRlbnQ6IHZhdWx0Q29udGVudCB8fCB1bmRlZmluZWRcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIFdlYlNvY2tldCBsaXN0ZW5lciBmb3IgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgaWYgKHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkpIHtcbiAgICAgICAgLy8gTGlzdGVuIGZvciB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIHRoaXMuc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4ZWN1dGUgd29ya2Zsb3dcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50IS5leGVjdXRlV29ya2Zsb3cocmVxdWVzdCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5UmVzdWx0cyhyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnV29ya2Zsb3cgZXhlY3V0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICBuZXcgTm90aWNlKGBXb3JrZmxvdyBlcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKGVycm9yTXNnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0V4ZWN1dGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0ZSBXb3JrZmxvdyc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFByb2dyZXNzTGlzdGVuZXIoKSB7XG4gICAgLy8gVGhpcyB3b3VsZCBiZSBjb25uZWN0ZWQgdG8gdGhlIFdlYlNvY2tldCBwcm9ncmVzcyB1cGRhdGVzXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgcHJvZ3Jlc3NcbiAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnQW5hbHl6aW5nIGdvYWwgYW5kIGNvbnRleHQuLi4nKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdQbGFubmluZyB3b3JrZmxvdyBzdGVwcy4uLicpO1xuICAgIH0sIDEwMDApO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0V4ZWN1dGluZyB3b3JrZmxvdy4uLicpO1xuICAgIH0sIDIwMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5UHJvZ3Jlc3MobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgPHNwYW4+JHttZXNzYWdlfTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRpc3BsYXlSZXN1bHRzKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIC8vIENsZWFyIHByZXZpb3VzIHJlc3VsdHNcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KchSBXb3JrZmxvdyBDb21wbGV0ZWQnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6IGBFeGVjdXRpb24gdGltZTogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zYCxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUnXG4gICAgfSk7XG5cbiAgICAvLyBNYWluIHJlc3VsdFxuICAgIGNvbnN0IHJlc3VsdEVsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQnIH0pO1xuICAgIHJlc3VsdEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1Jlc3VsdCcgfSk7XG4gICAgY29uc3QgcmVzdWx0Q29udGVudEVsID0gcmVzdWx0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtdGV4dCcgfSk7XG4gICAgcmVzdWx0Q29udGVudEVsLmlubmVySFRNTCA9IHRoaXMucmVuZGVyTWFya2Rvd24od29ya2Zsb3cucmVzdWx0KTtcblxuICAgIC8vIFN0ZXBzIHRha2VuXG4gICAgaWYgKHdvcmtmbG93LnN0ZXBzX3Rha2VuICYmIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHN0ZXBzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXInIH0pO1xuICAgICAgc3RlcHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdTdGVwcyBUYWtlbicgfSk7XG4gICAgICBjb25zdCBzdGVwc0xpc3QgPSBzdGVwc0VsLmNyZWF0ZUVsKCdvbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGVwcy1saXN0JyB9KTtcbiAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgIHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHN0ZXAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBcnRpZmFjdHNcbiAgICBpZiAod29ya2Zsb3cuYXJ0aWZhY3RzICYmIHdvcmtmbG93LmFydGlmYWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhcnRpZmFjdHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXInIH0pO1xuICAgICAgYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnR2VuZXJhdGVkIEFydGlmYWN0cycgfSk7XG4gICAgICBcbiAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKChhcnRpZmFjdCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYXJ0aWZhY3RFbCA9IGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QnIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogYXJ0aWZhY3QudGl0bGUgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgIHRleHQ6IGBUeXBlOiAke2FydGlmYWN0LnR5cGV9YCxcbiAgICAgICAgICBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0LXR5cGUnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGFydGlmYWN0RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiAnU2F2ZSBhcyBOb3RlJyxcbiAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3QsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNhdmUgYWxsIGJ1dHRvblxuICAgIGNvbnN0IGFjdGlvbnNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucycgfSk7XG4gICAgY29uc3Qgc2F2ZUFsbEJ1dHRvbiA9IGFjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1NhdmUgQ29tcGxldGUgUmVzdWx0cyBhcyBOb3RlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUFsbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0OiBhbnksIGluZGV4OiBudW1iZXIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHthcnRpZmFjdC50aXRsZS5yZXBsYWNlKC9bXmEtekEtWjAtOVxcc10vZywgJycpfS5tZGA7XG4gICAgICBjb25zdCBjb250ZW50ID0gYCMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9YDtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYEFydGlmYWN0IHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIGFydGlmYWN0OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0UGlsb3QgV29ya2Zsb3cgUmVzdWx0cyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgXG4gICAgICBsZXQgY29udGVudCA9IGAjIFZhdWx0UGlsb3QgV29ya2Zsb3cgUmVzdWx0c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkdvYWw6KiogJHt0aGlzLmdvYWxJbnB1dC52YWx1ZX1cXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipFeGVjdXRpb24gVGltZToqKiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgIyMgUmVzdWx0XFxuXFxuJHt3b3JrZmxvdy5yZXN1bHR9XFxuXFxuYDtcbiAgICAgIFxuICAgICAgaWYgKHdvcmtmbG93LnN0ZXBzX3Rha2VuICYmIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgU3RlcHMgVGFrZW5cXG5cXG5gO1xuICAgICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCR7aW5kZXggKyAxfS4gJHtzdGVwfVxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xuICAgICAgfVxuXG4gICAgICBpZiAod29ya2Zsb3cuYXJ0aWZhY3RzICYmIHdvcmtmbG93LmFydGlmYWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIEdlbmVyYXRlZCBBcnRpZmFjdHNcXG5cXG5gO1xuICAgICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaChhcnRpZmFjdCA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgIyMjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fVxcblxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQ29tcGxldGUgcmVzdWx0cyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSByZXN1bHRzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheUVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LWVycm9yXCI+XG4gICAgICAgIDxoMz7inYwgV29ya2Zsb3cgRmFpbGVkPC9oMz5cbiAgICAgICAgPHA+JHttZXNzYWdlfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+JylcbiAgICAgIC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKVxuICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNzAwcHg7XG4gICAgICAgICAgbWF4LWhlaWdodDogODB2aDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tZ3JvdXAge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1sYWJlbCB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1nb2FsLWlucHV0LFxuICAgICAgICAudmF1bHRwaWxvdC1jb250ZXh0LWlucHV0IHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCBpbnB1dCB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLXNwaW5uZXIge1xuICAgICAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC10ZXh0IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyLFxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWxpc3Qge1xuICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWVycm9yIHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBcbiAgQVBJUmVzcG9uc2UsIFxuICBDaGF0UmVxdWVzdCwgXG4gIENoYXRSZXNwb25zZSwgXG4gIENvbnZlcnNhdGlvbkhpc3RvcnksXG4gIENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0LFxuICBDb3BpbG90UmVxdWVzdCwgXG4gIENvcGlsb3RSZXNwb25zZSxcbiAgV29ya2Zsb3dSZXF1ZXN0LFxuICBXb3JrZmxvd1Jlc3BvbnNlLFxuICBBZ2VudCxcbiAgQWdlbnRDcmVhdGVSZXF1ZXN0LFxuICBBZ2VudEV4ZWN1dGVSZXF1ZXN0LFxuICBWYXVsdENvbnRleHRSZXF1ZXN0LFxuICBWYXVsdENvbnRleHRSZXNwb25zZSxcbiAgVGFza1BsYW5uaW5nUmVxdWVzdCxcbiAgVGFza1BsYW5uaW5nUmVzcG9uc2UsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVxdWVzdCxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXNwb25zZSxcbiAgTWVtb3J5VXBkYXRlUmVxdWVzdCxcbiAgV2ViU29ja2V0TWVzc2FnZSxcbiAgRXJyb3JSZXNwb25zZSxcbiAgSW50ZW50LFxuICBJbnRlbnRSZXN1bHQsXG4gIEludGVudERlYnVnXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRXZvQWdlbnRYQ2xpZW50IHtcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpS2V5Pzogc3RyaW5nO1xuICBwcml2YXRlIHdlYnNvY2tldD86IFdlYlNvY2tldDtcbiAgcHJpdmF0ZSB3c0NhbGxiYWNrczogTWFwPHN0cmluZywgKGRhdGE6IGFueSkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoYmFzZVVybDogc3RyaW5nLCBhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdDxUPihcbiAgICBlbmRwb2ludDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9XG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2U8VD4+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9JHtlbmRwb2ludH1gO1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIC4uLihvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8fCB7fSksXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBIYW5kbGUgbm9uLUpTT04gcmVzcG9uc2VzIGdyYWNlZnVsbHlcbiAgICAgIGxldCBkYXRhO1xuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgICBpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YS5lcnJvciBcbiAgICAgICAgICA/IGRhdGEuZXJyb3IgXG4gICAgICAgICAgOiBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5lcnJvcihgQVBJIEVycm9yIFske3Jlc3BvbnNlLnN0YXR1c31dOmAsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnID8geyBtZXNzYWdlOiBkYXRhIH0gYXMgVCA6IGRhdGEsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEkgUmVxdWVzdCBFcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWFsdGggY2hlY2tcbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTxBUElSZXNwb25zZTx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4+IHtcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBoZWFsdGggY2hlY2sgdG8gJHt0aGlzLmJhc2VVcmx9L3N0YXR1c2ApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+KCcvc3RhdHVzJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogSGVhbHRoIGNoZWNrIHJlc3VsdDonLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBBbHRlcm5hdGl2ZSBoZWFsdGggY2hlY2sgbWV0aG9kIGlmIHRoZSBtYWluIG9uZSBmYWlsc1xuICBhc3luYyBzaW1wbGVIZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9zdGF0dXNgO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2sgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDUpIHsgLy8gNDA1IG1lYW5zIHNlcnZlciBpcyB1cCBidXQgZG9lc24ndCBzdXBwb3J0IEhFQURcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnb2snIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Nvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGF0IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgY2hhdChyZXF1ZXN0OiBDaGF0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29udmVyc2F0aW9uSGlzdG9yeShjb252ZXJzYXRpb25JZDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gNTApOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvbnZlcnNhdGlvbkhpc3Rvcnk+PiB7XG4gICAgY29uc3QgcmVxdWVzdEJvZHk6IENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0ID0ge1xuICAgICAgY29udmVyc2F0aW9uX2lkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIGluY2x1ZGVfbWVzc2FnZXM6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbi9oaXN0b3J5Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChgL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENvcGlsb3QgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihyZXF1ZXN0OiBDb3BpbG90UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29waWxvdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvcGlsb3QvY29tcGxldGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV29ya2Zsb3cgZXhlY3V0aW9uXG4gIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gTmV3IHVuaWZpZWQgQVBJIG1ldGhvZHMgZm9yIHNpbXBsaWZpZWQgY29udGV4dCBwYWNrYWdpbmdcbiAgYXN5bmMgcnVuV29ya2Zsb3cocGF5bG9hZDogeyBtZXNzYWdlOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZyB8IG51bGwgfSk6IFByb21pc2U8QVBJUmVzcG9uc2U8V29ya2Zsb3dSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi93b3JrZmxvdycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBnb2FsOiBwYXlsb2FkLm1lc3NhZ2UsXG4gICAgICAgIGNvbnRleHQ6IHBheWxvYWQuY29udGV4dCB8fCB1bmRlZmluZWRcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2VuZENoYXQocGF5bG9hZDogeyBtZXNzYWdlOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZyB8IG51bGwgfSwgb3B0aW9ucz86IHsgY29udmVyc2F0aW9uX2lkPzogc3RyaW5nOyBhZ2VudF9pZD86IHN0cmluZyB9KTogUHJvbWlzZTxBUElSZXNwb25zZTxDaGF0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY2hhdCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IHBheWxvYWQuY29udGV4dCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNvbnZlcnNhdGlvbl9pZDogb3B0aW9ucz8uY29udmVyc2F0aW9uX2lkLFxuICAgICAgICBhZ2VudF9pZDogb3B0aW9ucz8uYWdlbnRfaWQsXG4gICAgICAgIG1vZGU6ICdhc2snXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFnZW50IG1hbmFnZW1lbnRcbiAgYXN5bmMgZ2V0QWdlbnRzKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8QWdlbnRbXT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudHMnKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUFnZW50KHJlcXVlc3Q6IEFnZW50Q3JlYXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8QWdlbnQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzL2NyZWF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBleGVjdXRlQWdlbnQocmVxdWVzdDogQWdlbnRFeGVjdXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8YW55Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50L2V4ZWN1dGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVmF1bHQgYW5hbHlzaXNcbiAgYXN5bmMgYW5hbHl6ZVZhdWx0Q29udGV4dChyZXF1ZXN0OiBWYXVsdENvbnRleHRSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxWYXVsdENvbnRleHRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9jb250ZXh0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRhc2sgcGxhbm5pbmdcbiAgYXN5bmMgcGxhblRhc2tzKHJlcXVlc3Q6IFRhc2tQbGFubmluZ1JlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFRhc2tQbGFubmluZ1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3BsYW5uaW5nL3Rhc2tzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEludGVsbGlnZW5jZSBwYXJzaW5nXG4gIGFzeW5jIHBhcnNlSW50ZWxsaWdlbmNlKHJlcXVlc3Q6IEludGVsbGlnZW5jZVBhcnNlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8SW50ZWxsaWdlbmNlUGFyc2VSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9pbnRlbGxpZ2VuY2UvcGFyc2UnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSW50ZW50IGNsYXNzaWZpY2F0aW9uXG4gIGFzeW5jIGNsYXNzaWZ5SW50ZW50KG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8SW50ZW50UmVzdWx0PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PEludGVudFJlc3VsdD4oJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvICdhc2snIG1vZGUgaWYgY2xhc3NpZmljYXRpb24gZmFpbHNcbiAgICByZXR1cm4geyBpbnRlbnQ6ICdhc2snLCBjb25maWRlbmNlOiAwLjUgfTtcbiAgfVxuXG4gIC8vIE9wdGlvbmFsOiBEZWJ1ZyBpbnRlbnQgY2xhc3NpZmljYXRpb25cbiAgYXN5bmMgZXhwbGFpbkludGVudChtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPEludGVudERlYnVnPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PEludGVudERlYnVnPignL2FwaS9vYnNpZGlhbi9pbnRlbGxpZ2VuY2UvcGFyc2UnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZSwgaW5jbHVkZV9kZWJ1ZzogdHJ1ZSB9KSxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgZGVidWcgaW5mb1xuICAgIHJldHVybiB7IFxuICAgICAgaW50ZW50OiAnYXNrJywgXG4gICAgICBjb25maWRlbmNlOiAwLjUsIFxuICAgICAgcmVhc29uaW5nOiAnQ2xhc3NpZmljYXRpb24gZmFpbGVkLCBkZWZhdWx0aW5nIHRvIGFzayBtb2RlJyBcbiAgICB9O1xuICB9XG5cbiAgLy8gTWVtb3J5IG1hbmFnZW1lbnRcbiAgYXN5bmMgdXBkYXRlTWVtb3J5KHJlcXVlc3Q6IE1lbW9yeVVwZGF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHZvaWQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vbWVtb3J5L3VwZGF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBXZWJTb2NrZXQgZnVuY3Rpb25hbGl0eVxuICBjb25uZWN0V2ViU29ja2V0KGNhbGxiYWNrczoge1xuICAgIG9uQ2hhdD86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Xb3JrZmxvd1Byb2dyZXNzPzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbkNvcGlsb3Q/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uVmF1bHRTeW5jPzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbkludGVudERlYnVnPzogKGRlYnVnOiBJbnRlbnREZWJ1ZykgPT4gdm9pZDtcbiAgICBvbkVycm9yPzogKGVycm9yOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgb25Db25uZWN0PzogKCkgPT4gdm9pZDtcbiAgICBvbkRpc2Nvbm5lY3Q/OiAoKSA9PiB2b2lkO1xuICB9KTogdm9pZCB7XG4gICAgY29uc3Qgd3NVcmwgPSB0aGlzLmJhc2VVcmwucmVwbGFjZSgnaHR0cCcsICd3cycpICsgJy93cy9vYnNpZGlhbic7XG4gICAgY29uc29sZS5sb2coYFZhdWx0UGlsb3Q6IEF0dGVtcHRpbmcgV2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gJHt3c1VybH1gKTtcbiAgICBcbiAgICB0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQod3NVcmwpO1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25vcGVuID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBjb25uZWN0ZWQgdG8gRXZvQWdlbnRYJyk7XG4gICAgICBjYWxsYmFja3Mub25Db25uZWN0Py4oKTtcbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXNzYWdlOiBXZWJTb2NrZXRNZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBtZXNzYWdlIHJlY2VpdmVkOicsIG1lc3NhZ2UudHlwZSk7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ2hhdD8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd3b3JrZmxvd19wcm9ncmVzcyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25Xb3JrZmxvd1Byb2dyZXNzPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2NvcGlsb3QnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ29waWxvdD8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd2YXVsdF9zeW5jJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vblZhdWx0U3luYz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdpbnRlbnRfZGVidWcnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uSW50ZW50RGVidWc/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IEVycm9yIHBhcnNpbmcgV2ViU29ja2V0IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdGYWlsZWQgdG8gcGFyc2UgV2ViU29ja2V0IG1lc3NhZ2UnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBkaXNjb25uZWN0ZWQgZnJvbSBFdm9BZ2VudFgnLCBldmVudC5jb2RlLCBldmVudC5yZWFzb24pO1xuICAgICAgY2FsbGJhY2tzLm9uRGlzY29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvcicpO1xuICAgIH07XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCkge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuY2xvc2UoKTtcbiAgICAgIHRoaXMud2Vic29ja2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNlbmRXZWJTb2NrZXRNZXNzYWdlKHR5cGU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZSwgZGF0YSB9KSk7XG4gICAgfVxuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Py5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTjtcbiAgfVxufVxuIiwiLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgdGhlIHBsYW5uZXIgZmVhdHVyZVxuZXhwb3J0IGludGVyZmFjZSBQbGFubmVyUmVzcG9uc2Uge1xuICBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmc7XG4gIGhlYWRsaW5lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlcXVlc3Qge1xuICBub3RlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRmV0Y2hlcyBzY2hlZHVsZSBkYXRhIGZyb20gdGhlIEV2b0FnZW50WCBBUElcbiAqIEBwYXJhbSBub3RlVGV4dCAtIFRoZSBmdWxsIHRleHQgb2YgdGhlIGFjdGl2ZSBub3RlXG4gKiBAcGFyYW0gYXBpQ2xpZW50IC0gVGhlIEV2b0FnZW50WCBBUEkgY2xpZW50IGluc3RhbmNlXG4gKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIHNjaGVkdWxlIG1hcmtkb3duIGFuZCBoZWFkbGluZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTY2hlZHVsZShub3RlVGV4dDogc3RyaW5nLCBhcGlDbGllbnQ6IGFueSk6IFByb21pc2U8UGxhbm5lclJlc3BvbnNlPiB7XG4gIGNvbnNvbGUubG9nKCfwn5SEIFtQbGFuIE15IERheV0gU3RhcnRpbmcgc2NoZWR1bGUgZmV0Y2guLi4nKTtcbiAgY29uc29sZS5sb2coJ/Cfk50gW1BsYW4gTXkgRGF5XSBOb3RlIHRleHQgbGVuZ3RoOicsIG5vdGVUZXh0Lmxlbmd0aCk7XG4gIGNvbnNvbGUubG9nKCfwn5SXIFtQbGFuIE15IERheV0gQVBJIGNsaWVudCB0eXBlOicsIHR5cGVvZiBhcGlDbGllbnQpO1xuICBcbiAgaWYgKCFhcGlDbGllbnQpIHtcbiAgICBjb25zdCBlcnJvciA9ICdBUEkgY2xpZW50IGlzIG51bGwgb3IgdW5kZWZpbmVkJztcbiAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxuXG4gIGlmICghYXBpQ2xpZW50LnBsYW5UYXNrcykge1xuICAgIGNvbnN0IGVycm9yID0gJ0FQSSBjbGllbnQgZG9lcyBub3QgaGF2ZSBwbGFuVGFza3MgbWV0aG9kJztcbiAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBBdmFpbGFibGUgbWV0aG9kczonLCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcGlDbGllbnQpKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+TpCBbUGxhbiBNeSBEYXldIFNlbmRpbmcgcmVxdWVzdCB0byBFdm9BZ2VudFguLi4nKTtcbiAgICBcbiAgICAvLyBVc2UgRXZvQWdlbnRYIHRhc2sgcGxhbm5pbmcgZW5kcG9pbnQgaW5zdGVhZCBvZiBsb2NhbCBzZXJ2ZXJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgZ29hbDogYENyZWF0ZSBhIGRhaWx5IHNjaGVkdWxlIGJhc2VkIG9uIHRoaXMgbm90ZSBjb250ZW50YCxcbiAgICAgIGNvbnRleHQ6IG5vdGVUZXh0LFxuICAgICAgdGltZWZyYW1lOiAnMSBkYXknXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpSBbUGxhbiBNeSBEYXldIFJlY2VpdmVkIHJlc3BvbnNlOicsIHtcbiAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlLnN1Y2Nlc3MsXG4gICAgICBoYXNEYXRhOiAhIXJlc3BvbnNlLmRhdGEsXG4gICAgICBlcnJvcjogcmVzcG9uc2UuZXJyb3JcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gUmF3IHJlc3BvbnNlIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSwgbnVsbCwgMikpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gUmVzcG9uc2UgZGF0YSB0eXBlOicsIHR5cGVvZiByZXNwb25zZS5kYXRhKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIFJlc3BvbnNlIGRhdGEga2V5czonLCByZXNwb25zZS5kYXRhID8gT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YSkgOiAnbm8gZGF0YScpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc2NoZWR1bGUnO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gQVBJIEVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICBjb25zdCBlcnJvciA9ICdObyBkYXRhIGluIEFQSSByZXNwb25zZSc7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEZ1bGwgcmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgRXZvQWdlbnRYIEFQSSByZXR1cm5zIGEgbmVzdGVkIHN0cnVjdHVyZTogcmVzcG9uc2UuZGF0YS5kYXRhLnBsYW5cbiAgICBjb25zdCBhY3R1YWxEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhIHx8IHJlc3BvbnNlLmRhdGE7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk4sgW1BsYW4gTXkgRGF5XSBSZXNwb25zZSBkYXRhIHN0cnVjdHVyZTonLCB7XG4gICAgICBoYXNQbGFuOiAhIWFjdHVhbERhdGEucGxhbixcbiAgICAgIHBsYW5LZXlzOiBhY3R1YWxEYXRhLnBsYW4gPyBPYmplY3Qua2V5cyhhY3R1YWxEYXRhLnBsYW4pIDogbnVsbCxcbiAgICAgIGhhc1Rhc2tzOiBhY3R1YWxEYXRhLnBsYW4/LnRhc2tzID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgdGFza0NvdW50OiBhY3R1YWxEYXRhLnBsYW4/LnRhc2tzPy5sZW5ndGggfHwgMFxuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgaWYgcGxhbiBleGlzdHMgaW4gcmVzcG9uc2VcbiAgICBpZiAoIWFjdHVhbERhdGEucGxhbikge1xuICAgICAgY29uc3QgZXJyb3IgPSAnTm8gcGxhbiBkYXRhIGluIEFQSSByZXNwb25zZSc7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEZ1bGwgcmVzcG9uc2UgZGF0YTonLCByZXNwb25zZS5kYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gQWN0dWFsIGRhdGE6JywgYWN0dWFsRGF0YSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgRXZvQWdlbnRYIHRhc2sgcGxhbm5pbmcgcmVzcG9uc2UgdG8gc2NoZWR1bGUgZm9ybWF0XG4gICAgY29uc3QgdGFza1BsYW4gPSBhY3R1YWxEYXRhLnBsYW47XG4gICAgY29uc3QgdGFza3MgPSB0YXNrUGxhbi50YXNrcyB8fCBbXTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIFByb2Nlc3NpbmcgdGFza3M6JywgdGFza3MubGVuZ3RoKTtcbiAgICBcbiAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBbUGxhbiBNeSBEYXldIE5vIHRhc2tzIGluIHJlc3BvbnNlLCBjcmVhdGluZyBmYWxsYmFjayBzY2hlZHVsZScpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NoZWR1bGVNYXJrZG93bjogJ3wgVGltZSB8IFRhc2sgfFxcbnwtLS0tLS18LS0tLS0tfFxcbnwgOTowMCBBTSB8IFBsYW4geW91ciBkYXkgfFxcbnwgMTA6MDAgQU0gfCBTdGFydCB3b3JraW5nIHxcXG58IDEyOjAwIFBNIHwgTHVuY2ggYnJlYWsgfCcsXG4gICAgICAgIGhlYWRsaW5lOiAn8J+ThSBCYXNpYyBzY2hlZHVsZSBjcmVhdGVkIChubyB0YXNrcyBmb3VuZCBpbiBub3RlKSdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYXRlIHNjaGVkdWxlIG1hcmtkb3duIGZyb20gdGFza3NcbiAgICBsZXQgc2NoZWR1bGVNYXJrZG93biA9ICd8IFRpbWUgfCBUYXNrIHxcXG58LS0tLS0tfC0tLS0tLXxcXG4nO1xuICAgIFxuICAgIC8vIEV4dHJhY3Qgc2NoZWR1bGVkIHRpbWVzIGZyb20gdGFzayBkZXNjcmlwdGlvbnMgb3IgZ2VuZXJhdGUgdGhlbVxuICAgIHRhc2tzLmZvckVhY2goKHRhc2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYPCfk4sgW1BsYW4gTXkgRGF5XSBQcm9jZXNzaW5nIHRhc2sgJHtpbmRleCArIDF9OmAsIHtcbiAgICAgICAgdGl0bGU6IHRhc2sudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrLmRlc2NyaXB0aW9uPy5zdWJzdHJpbmcoMCwgMTAwKSxcbiAgICAgICAgcHJpb3JpdHk6IHRhc2sucHJpb3JpdHksXG4gICAgICAgIGVzdGltYXRlZFRpbWU6IHRhc2suZXN0aW1hdGVkX3RpbWVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0YXNrLmRlc2NyaXB0aW9uPy5tYXRjaCgvKFxcZHsxLDJ9OlxcZHsyfSkvKTtcbiAgICAgIGNvbnN0IHRpbWUgPSB0aW1lTWF0Y2ggPyB0aW1lTWF0Y2hbMV0gOiBgJHs5ICsgTWF0aC5mbG9vcihpbmRleCAqIDEuNSl9OiR7KGluZGV4ICogMzApICUgNjAgfHwgJzAwJ31gO1xuICAgICAgc2NoZWR1bGVNYXJrZG93biArPSBgfCAke3RpbWV9IHwgJHt0YXNrLnRpdGxlfSB8XFxuYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIHNjaGVkdWxlTWFya2Rvd24sXG4gICAgICBoZWFkbGluZTogYOKcqCBTbWFydCBzY2hlZHVsZSBjcmVhdGVkIHdpdGggJHt0YXNrcy5sZW5ndGh9IHRhc2tzIWBcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHk6Jywge1xuICAgICAgbWFya2Rvd25MZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgICAgdGFza0NvdW50OiB0YXNrcy5sZW5ndGgsXG4gICAgICBoZWFkbGluZTogcmVzdWx0LmhlYWRsaW5lXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRmV0Y2ggZXJyb3I6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflI0gW1BsYW4gTXkgRGF5XSBFcnJvciBzdGFjazonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnKTtcbiAgICBcbiAgICAvLyBSZS10aHJvdyB3aXRoIG1vcmUgY29udGV4dFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNjaGVkdWxlIGZldGNoIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNjaGVkdWxlIGZldGNoIGZhaWxlZDogJHtTdHJpbmcoZXJyb3IpfWApO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEZpbmRzIGFuZCBleHRyYWN0cyB0aGUgVmF1bHRQaWxvdCBwbGFuIHNlY3Rpb24gZnJvbSBub3RlIHRleHQgdXNpbmcgY29tbWVudCB3cmFwcGVyXG4gKiBAcGFyYW0gdGV4dCAtIFRoZSBmdWxsIG5vdGUgdGV4dFxuICogQHJldHVybnMgTWF0Y2ggcmVzdWx0IHdpdGggcGxhbiBzZWN0aW9uIGRldGFpbHMgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFBsYW5TZWN0aW9uKHRleHQ6IHN0cmluZyk6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsIHtcbiAgLy8gTG9vayBmb3IgdGhlIFZhdWx0UGlsb3QgcGxhbiBjb21tZW50IHdyYXBwZXJcbiAgY29uc3QgcGxhblJlZ2V4ID0gLyg8IS0tIHZwOnBsYW46c3RhcnQgLS0+KShbXFxzXFxTXSo/KSg8IS0tIHZwOnBsYW46ZW5kIC0tPikvaTtcbiAgcmV0dXJuIHRleHQubWF0Y2gocGxhblJlZ2V4KTtcbn1cblxuLyoqXG4gKiBGaW5kcyBhbmQgZXh0cmFjdHMgdGhlIFNjaGVkdWxlIHNlY3Rpb24gZnJvbSBub3RlIHRleHRcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIGZ1bGwgbm90ZSB0ZXh0XG4gKiBAcmV0dXJucyBNYXRjaCByZXN1bHQgd2l0aCBzY2hlZHVsZSBzZWN0aW9uIGRldGFpbHMgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFNjaGVkdWxlU2VjdGlvbih0ZXh0OiBzdHJpbmcpOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCB7XG4gIC8vIEZpcnN0IHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGFyZSBleGFjdGx5IFwiIyMgU2NoZWR1bGVcIiAod2l0aCBvcHRpb25hbCBjb250ZW50IGFmdGVyKVxuICBsZXQgc2NoZWR1bGVSZWdleCA9IC8oXiMjXFxzK1NjaGVkdWxlXFxiW15cXG5dKlxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgbGV0IG1hdGNoID0gdGV4dC5tYXRjaChzY2hlZHVsZVJlZ2V4KTtcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuICBcbiAgLy8gSWYgbm8gZXhhY3QgbWF0Y2gsIHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGNvbnRhaW4gXCJTY2hlZHVsZVwiIGFzIGEgd29yZFxuICBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMqKD86LipcXHMpP1xcYlNjaGVkdWxlXFxiKD86XFxzLiopPyRcXG4pKFtcXHNcXFNdKj8pKD89XFxuIyNcXHN8JCkvaW07XG4gIHJldHVybiB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xufVxuXG4vKipcbiAqIEluamVjdHMgb3IgcmVwbGFjZXMgdGhlIHNjaGVkdWxlIHNlY3Rpb24gaW4gdGhlIG5vdGUgdGV4dFxuICogQHBhcmFtIG9yaWdpbmFsVGV4dCAtIFRoZSBvcmlnaW5hbCBub3RlIHRleHRcbiAqIEBwYXJhbSBzY2hlZHVsZU1hcmtkb3duIC0gVGhlIG5ldyBzY2hlZHVsZSBjb250ZW50IHRvIGluamVjdFxuICogQHJldHVybnMgVXBkYXRlZCBub3RlIHRleHQgd2l0aCB0aGUgbmV3IHNjaGVkdWxlIHNlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluamVjdFNjaGVkdWxlKG9yaWdpbmFsVGV4dDogc3RyaW5nLCBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIEluamVjdGluZyBzY2hlZHVsZTonLCB7XG4gICAgb3JpZ2luYWxMZW5ndGg6IG9yaWdpbmFsVGV4dC5sZW5ndGgsXG4gICAgc2NoZWR1bGVMZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgIGhhc09yaWdpbmFsQ29udGVudDogb3JpZ2luYWxUZXh0LnRyaW0oKS5sZW5ndGggPiAwXG4gIH0pO1xuICBcbiAgLy8gRmlyc3QsIGNoZWNrIGZvciBWYXVsdFBpbG90IGNvbW1lbnQgd3JhcHBlclxuICBjb25zdCBwbGFuTWF0Y2ggPSBmaW5kUGxhblNlY3Rpb24ob3JpZ2luYWxUZXh0KTtcbiAgXG4gIGlmIChwbGFuTWF0Y2gpIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBbUGxhbiBNeSBEYXldIFJlcGxhY2luZyBleGlzdGluZyBwbGFuIHNlY3Rpb24gd2l0aCBjb21tZW50IHdyYXBwZXInKTtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIEZvdW5kIHdyYXBwZWQgcGxhbiBzZWN0aW9uOicsIHtcbiAgICAgIHN0YXJ0Q29tbWVudDogcGxhbk1hdGNoWzFdLFxuICAgICAgY29udGVudExlbmd0aDogcGxhbk1hdGNoWzJdPy5sZW5ndGggfHwgMCxcbiAgICAgIGVuZENvbW1lbnQ6IHBsYW5NYXRjaFszXVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlcGxhY2UgZXZlcnl0aGluZyBpbnNpZGUgdGhlIGNvbW1lbnQgd3JhcHBlclxuICAgIGNvbnN0IFtmdWxsTWF0Y2gsIHN0YXJ0Q29tbWVudCwgLCBlbmRDb21tZW50XSA9IHBsYW5NYXRjaDtcbiAgICBjb25zdCByZXBsYWNlbWVudCA9IGAke3N0YXJ0Q29tbWVudH1cXG4ke3NjaGVkdWxlTWFya2Rvd259XFxuJHtlbmRDb21tZW50fWA7XG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxUZXh0LnJlcGxhY2UoZnVsbE1hdGNoLCByZXBsYWNlbWVudCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFBsYW4gc2VjdGlvbiByZXBsYWNlZCB3aXRoaW4gY29tbWVudCB3cmFwcGVyJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBcbiAgLy8gRmFsbCBiYWNrIHRvIGNoZWNraW5nIGZvciBTY2hlZHVsZSBzZWN0aW9uXG4gIGNvbnN0IHNjaGVkdWxlTWF0Y2ggPSBmaW5kU2NoZWR1bGVTZWN0aW9uKG9yaWdpbmFsVGV4dCk7XG4gIFxuICBpZiAoc2NoZWR1bGVNYXRjaCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFtQbGFuIE15IERheV0gUmVwbGFjaW5nIGV4aXN0aW5nIHNjaGVkdWxlIHNlY3Rpb24nKTtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIEZvdW5kIHNlY3Rpb246Jywge1xuICAgICAgaGVhZGluZ01hdGNoOiBzY2hlZHVsZU1hdGNoWzFdPy5zdWJzdHJpbmcoMCwgNTApLFxuICAgICAgY29udGVudE1hdGNoOiBzY2hlZHVsZU1hdGNoWzJdPy5zdWJzdHJpbmcoMCwgMTAwKVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlcGxhY2UgZXhpc3Rpbmcgc2NoZWR1bGUgc2VjdGlvbiAoa2VlcCBoZWFkaW5nLCByZXBsYWNlIGNvbnRlbnQpXG4gICAgY29uc3QgW2Z1bGxNYXRjaCwgaGVhZGluZ10gPSBzY2hlZHVsZU1hdGNoO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gaGVhZGluZyArIHNjaGVkdWxlTWFya2Rvd247XG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxUZXh0LnJlcGxhY2UoZnVsbE1hdGNoLCByZXBsYWNlbWVudCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIHNlY3Rpb24gcmVwbGFjZWQnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCfinpUgW1BsYW4gTXkgRGF5XSBBZGRpbmcgbmV3IHBsYW4gc2VjdGlvbiB3aXRoIGNvbW1lbnQgd3JhcHBlciBhdCB0b3AnKTtcbiAgICBcbiAgICAvLyBJbnNlcnQgbmV3IHBsYW4gc2VjdGlvbiB3aXRoIGNvbW1lbnQgd3JhcHBlciBhdCB0aGUgdG9wIG9mIHRoZSBub3RlXG4gICAgY29uc3Qgd3JhcHBlZFBsYW4gPSBgPCEtLSB2cDpwbGFuOnN0YXJ0IC0tPlxcbiR7c2NoZWR1bGVNYXJrZG93bn1cXG48IS0tIHZwOnBsYW46ZW5kIC0tPlxcblxcbmA7XG4gICAgY29uc3QgcmVzdWx0ID0gd3JhcHBlZFBsYW4gKyBvcmlnaW5hbFRleHQ7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIE5ldyBwbGFuIHNlY3Rpb24gd2l0aCB3cmFwcGVyIGFkZGVkIGF0IHRvcCcpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgdGhlIHNjaGVkdWxlIG1hcmtkb3duIGlzIHByb3Blcmx5IGZvcm1hdHRlZFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgc2NoZWR1bGUgY29udGVudCB0byB2YWxpZGF0ZVxuICogQHJldHVybnMgVHJ1ZSBpZiB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gVmFsaWRhdGluZyBzY2hlZHVsZSBtYXJrZG93bjonLCB7XG4gICAgbGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLmxlbmd0aCxcbiAgICB0cmltbWVkTGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLnRyaW0oKS5sZW5ndGgsXG4gICAgaXNTdHJpbmc6IHR5cGVvZiBzY2hlZHVsZU1hcmtkb3duID09PSAnc3RyaW5nJyxcbiAgICBwcmV2aWV3OiBzY2hlZHVsZU1hcmtkb3duLnN1YnN0cmluZygwLCAxMDApXG4gIH0pO1xuICBcbiAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIGNoZWNrIGlmIGl0J3Mgbm90IGVtcHR5IGFuZCBjb250YWlucyBzb21lIGNvbnRlbnRcbiAgY29uc3QgaXNWYWxpZCA9IHNjaGVkdWxlTWFya2Rvd24udHJpbSgpLmxlbmd0aCA+IDA7XG4gIFxuICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gVmFsaWRhdGlvbiByZXN1bHQ6JywgaXNWYWxpZCk7XG4gIFxuICByZXR1cm4gaXNWYWxpZDtcbn1cbiIsIi8vIERlYnVnIHV0aWxpdGllcyBmb3IgUGxhbiBNeSBEYXkgZmVhdHVyZVxuZXhwb3J0IGNsYXNzIFBsYW5NeURheURlYnVnZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFBsYW5NeURheURlYnVnZ2VyO1xuICBwcml2YXRlIGxvZ3M6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgbWF4TG9ncyA9IDEwMDtcblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUGxhbk15RGF5RGVidWdnZXIge1xuICAgIGlmICghUGxhbk15RGF5RGVidWdnZXIuaW5zdGFuY2UpIHtcbiAgICAgIFBsYW5NeURheURlYnVnZ2VyLmluc3RhbmNlID0gbmV3IFBsYW5NeURheURlYnVnZ2VyKCk7XG4gICAgfVxuICAgIHJldHVybiBQbGFuTXlEYXlEZWJ1Z2dlci5pbnN0YW5jZTtcbiAgfVxuXG4gIGxvZyhtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgbG9nRW50cnkgPSBgWyR7dGltZXN0YW1wfV0gJHttZXNzYWdlfSR7ZGF0YSA/IGAgfCAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWAgOiAnJ31gO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGxvZ0VudHJ5KTtcbiAgICB0aGlzLmxvZ3MucHVzaChsb2dFbnRyeSk7XG4gICAgXG4gICAgLy8gS2VlcCBvbmx5IHRoZSBtb3N0IHJlY2VudCBsb2dzXG4gICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiB0aGlzLm1heExvZ3MpIHtcbiAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5zbGljZSgtdGhpcy5tYXhMb2dzKTtcbiAgICB9XG4gIH1cblxuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogYW55KSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyB7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgbmFtZTogZXJyb3IubmFtZVxuICAgIH0gOiBlcnJvcjtcbiAgICBcbiAgICBjb25zdCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSBFUlJPUjogJHttZXNzYWdlfSR7ZXJyb3JEYXRhID8gYCB8ICR7SlNPTi5zdHJpbmdpZnkoZXJyb3JEYXRhKX1gIDogJyd9YDtcbiAgICBcbiAgICBjb25zb2xlLmVycm9yKGxvZ0VudHJ5KTtcbiAgICB0aGlzLmxvZ3MucHVzaChsb2dFbnRyeSk7XG4gICAgXG4gICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiB0aGlzLm1heExvZ3MpIHtcbiAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5zbGljZSgtdGhpcy5tYXhMb2dzKTtcbiAgICB9XG4gIH1cblxuICBnZXRMb2dzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMubG9nc107XG4gIH1cblxuICBjbGVhckxvZ3MoKSB7XG4gICAgdGhpcy5sb2dzID0gW107XG4gIH1cblxuICBleHBvcnRMb2dzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubG9ncy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIC8vIEhlbHBlciB0byBhbmFseXplIEFQSSBjbGllbnQgc3RhdGVcbiAgYW5hbHl6ZUFwaUNsaWVudChhcGlDbGllbnQ6IGFueSk6IGFueSB7XG4gICAgaWYgKCFhcGlDbGllbnQpIHtcbiAgICAgIHJldHVybiB7IHN0YXR1czogJ251bGwnLCBhdmFpbGFibGU6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2F2YWlsYWJsZScsXG4gICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICB0eXBlOiB0eXBlb2YgYXBpQ2xpZW50LFxuICAgICAgbWV0aG9kczogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFwaUNsaWVudCkpLmZpbHRlcihuYW1lID0+IHR5cGVvZiBhcGlDbGllbnRbbmFtZV0gPT09ICdmdW5jdGlvbicpLFxuICAgICAgaGFzUGxhblRhc2tzOiB0eXBlb2YgYXBpQ2xpZW50LnBsYW5UYXNrcyA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgIGhhc0hlYWx0aENoZWNrOiB0eXBlb2YgYXBpQ2xpZW50LmhlYWx0aENoZWNrID09PSAnZnVuY3Rpb24nXG4gICAgfTtcbiAgfVxuXG4gIC8vIEhlbHBlciB0byB0ZXN0IEV2b0FnZW50WCBjb25uZWN0aW9uXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKGFwaUNsaWVudDogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coJ/CflJcgVGVzdGluZyBFdm9BZ2VudFggY29ubmVjdGlvbi4uLicpO1xuICAgICAgXG4gICAgICBpZiAoIWFwaUNsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBjbGllbnQgaXMgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhcGlDbGllbnQuaGVhbHRoQ2hlY2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY2xpZW50IGRvZXMgbm90IGhhdmUgaGVhbHRoQ2hlY2sgbWV0aG9kJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgdGhpcy5sb2coJ+KchSBDb25uZWN0aW9uIHRlc3Qgc3VjY2Vzc2Z1bCcsIHJlc3VsdCk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZXN1bHQgfTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVycm9yKCfinYwgQ29ubmVjdGlvbiB0ZXN0IGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSGVscGVyIHRvIHRlc3QgdGFzayBwbGFubmluZyBzcGVjaWZpY2FsbHlcbiAgYXN5bmMgdGVzdFRhc2tQbGFubmluZyhhcGlDbGllbnQ6IGFueSwgdGVzdE5vdGU6IHN0cmluZyA9ICdUZXN0IG5vdGUgZm9yIHNjaGVkdWxlIGdlbmVyYXRpb24nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coJ/Cfk4sgVGVzdGluZyB0YXNrIHBsYW5uaW5nLi4uJyk7XG4gICAgICBcbiAgICAgIGlmICghYXBpQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGNsaWVudCBpcyBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWFwaUNsaWVudC5wbGFuVGFza3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY2xpZW50IGRvZXMgbm90IGhhdmUgcGxhblRhc2tzIG1ldGhvZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcGlDbGllbnQucGxhblRhc2tzKHtcbiAgICAgICAgZ29hbDogJ0NyZWF0ZSBhIHRlc3Qgc2NoZWR1bGUnLFxuICAgICAgICBjb250ZXh0OiB0ZXN0Tm90ZSxcbiAgICAgICAgdGltZWZyYW1lOiAnMSBkYXknXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5sb2coJ+KchSBUYXNrIHBsYW5uaW5nIHRlc3Qgc3VjY2Vzc2Z1bCcsIHtcbiAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXG4gICAgICAgIGhhc0RhdGE6ICEhcmVzdWx0LmRhdGEsXG4gICAgICAgIGhhc1BsYW46ICEhcmVzdWx0LmRhdGE/LnBsYW4sXG4gICAgICAgIHRhc2tDb3VudDogcmVzdWx0LmRhdGE/LnBsYW4/LnRhc2tzPy5sZW5ndGggfHwgMFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlc3VsdCB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IoJ+KdjCBUYXNrIHBsYW5uaW5nIHRlc3QgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IHBsYW5NeURheURlYnVnZ2VyID0gUGxhbk15RGF5RGVidWdnZXIuZ2V0SW5zdGFuY2UoKTtcbiIsIi8qKlxuICogVHlwZVNjcmlwdCB0eXBlIGRlZmluaXRpb25zIGZvciBWYXVsdFBpbG90IHZhdWx0IG1hbmFnZW1lbnQgaW50ZWdyYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vID09PSBWQVVMVCBTVFJVQ1RVUkUgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0IHtcbiAgaW5jbHVkZV9jb250ZW50PzogYm9vbGVhbjtcbiAgbWF4X2RlcHRoPzogbnVtYmVyO1xuICBmaWxlX3R5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRGaWxlSW5mbyB7XG4gIHBhdGg6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIG1vZGlmaWVkOiBzdHJpbmc7XG4gIGZpbGVfdHlwZTogc3RyaW5nO1xuICBjb250ZW50X3ByZXZpZXc/OiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbiAgbGlua3M/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEZvbGRlckluZm8ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgY2hpbGRyZW46IChWYXVsdEZpbGVJbmZvIHwgVmF1bHRGb2xkZXJJbmZvKVtdO1xuICB0eXBlOiAnZm9sZGVyJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlIHtcbiAgdmF1bHRfbmFtZTogc3RyaW5nO1xuICB0b3RhbF9maWxlczogbnVtYmVyO1xuICB0b3RhbF9mb2xkZXJzOiBudW1iZXI7XG4gIHRvdGFsX3NpemU6IG51bWJlcjtcbiAgc3RydWN0dXJlOiBWYXVsdEZvbGRlckluZm87XG4gIHJlY2VudF9maWxlczogVmF1bHRGaWxlSW5mb1tdO1xuICBvcnBoYW5lZF9maWxlczogVmF1bHRGaWxlSW5mb1tdO1xufVxuXG4vLyA9PT0gRklMRSBPUEVSQVRJT04gVFlQRVMgPT09XG5cbmV4cG9ydCB0eXBlIEZpbGVPcGVyYXRpb25UeXBlID0gJ2NyZWF0ZScgfCAndXBkYXRlJyB8ICdkZWxldGUnIHwgJ21vdmUnIHwgJ2NvcHknO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPcGVyYXRpb25SZXF1ZXN0IHtcbiAgb3BlcmF0aW9uOiBGaWxlT3BlcmF0aW9uVHlwZTtcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIG5ld19wYXRoPzogc3RyaW5nO1xuICBjb250ZW50Pzogc3RyaW5nO1xuICBiYWNrdXA/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPcGVyYXRpb25SZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIGJhY2t1cF9wYXRoPzogc3RyaW5nO1xuICBuZXdfcGF0aD86IHN0cmluZztcbn1cblxuLy8gPT09IEJBVENIIE9QRVJBVElPTlMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCB7XG4gIG9wZXJhdGlvbnM6IEZpbGVPcGVyYXRpb25SZXF1ZXN0W107XG4gIGF0b21pYz86IGJvb2xlYW47XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBjb21wbGV0ZWQ6IG51bWJlcjtcbiAgZmFpbGVkOiBudW1iZXI7XG4gIHJlc3VsdHM6IEZpbGVPcGVyYXRpb25SZXNwb25zZVtdO1xuICBlcnJvcnM/OiBzdHJpbmdbXTtcbn1cblxuLy8gPT09IFNFQVJDSCBUWVBFUyA9PT1cblxuZXhwb3J0IHR5cGUgU2VhcmNoVHlwZSA9ICdjb250ZW50JyB8ICdmaWxlbmFtZScgfCAndGFncycgfCAnbGlua3MnIHwgJ2NvbXByZWhlbnNpdmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVxdWVzdCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIHNlYXJjaF90eXBlPzogU2VhcmNoVHlwZTtcbiAgbWF4X3Jlc3VsdHM/OiBudW1iZXI7XG4gIGluY2x1ZGVfY29udGVudD86IGJvb2xlYW47XG4gIGZpbGVfdHlwZXM/OiBzdHJpbmdbXTtcbiAgZm9sZGVycz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVzdWx0IHtcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIGZpbGVfbmFtZTogc3RyaW5nO1xuICBtYXRjaF90eXBlOiAnY29udGVudCcgfCAnZmlsZW5hbWUnIHwgJ3RhZycgfCAnbGluayc7XG4gIG1hdGNoZXM6IHN0cmluZ1tdO1xuICBwcmV2aWV3OiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxpbmVfbnVtYmVycz86IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVzcG9uc2Uge1xuICByZXN1bHRzOiBWYXVsdFNlYXJjaFJlc3VsdFtdO1xuICB0b3RhbF9mb3VuZDogbnVtYmVyO1xuICBzZWFyY2hfdHlwZTogU2VhcmNoVHlwZTtcbiAgcXVlcnk6IHN0cmluZztcbiAgaW5zaWdodHM/OiBzdHJpbmc7XG4gIHN1Z2dlc3RlZF9xdWVyaWVzPzogc3RyaW5nW107XG59XG5cbi8vID09PSBPUkdBTklaQVRJT04gVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0IHtcbiAgZm9jdXNfZm9sZGVycz86IHN0cmluZ1tdO1xuICBvcmdhbml6YXRpb25fbW9kZTogJ2J5X3RvcGljJyB8ICdieV9kYXRlJyB8ICdieV90eXBlJyB8ICdjdXN0b20nO1xuICBjcmVhdGVfZm9sZGVycz86IGJvb2xlYW47XG4gIG1vdmVfZmlsZXM/OiBib29sZWFuO1xuICBjdXN0b21fcnVsZXM/OiBPcmdhbml6YXRpb25SdWxlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JnYW5pemF0aW9uUnVsZSB7XG4gIHBhdHRlcm46IHN0cmluZztcbiAgdGFyZ2V0X2ZvbGRlcjogc3RyaW5nO1xuICBydWxlX3R5cGU6ICdmaWxlbmFtZScgfCAnY29udGVudCcgfCAndGFnJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlIHtcbiAgc3VnZ2VzdGVkX21vdmVzOiBGaWxlTW92ZU9wZXJhdGlvbltdO1xuICBzdWdnZXN0ZWRfZm9sZGVyczogc3RyaW5nW107XG4gIG9yZ2FuaXphdGlvbl9pbnNpZ2h0czogc3RyaW5nO1xuICBlc3RpbWF0ZWRfaW1wcm92ZW1lbnRzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU1vdmVPcGVyYXRpb24ge1xuICBmcm9tX3BhdGg6IHN0cmluZztcbiAgdG9fcGF0aDogc3RyaW5nO1xuICByZWFzb246IHN0cmluZztcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xufVxuXG4vLyA9PT0gQkFDS1VQIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QmFja3VwUmVxdWVzdCB7XG4gIGluY2x1ZGVfc2V0dGluZ3M/OiBib29sZWFuO1xuICBjb21wcmVzc2lvbj86IGJvb2xlYW47XG4gIGJhY2t1cF9uYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QmFja3VwUmVzcG9uc2Uge1xuICBiYWNrdXBfcGF0aDogc3RyaW5nO1xuICBiYWNrdXBfc2l6ZTogbnVtYmVyO1xuICBmaWxlc19iYWNrZWRfdXA6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbi8vID09PSBFUlJPUiBIQU5ETElORyA9PT1cblxuZXhwb3J0IGNsYXNzIFZhdWx0TWFuYWdlbWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogc3RyaW5nO1xuICBwdWJsaWMgZmVhdHVyZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29kZTogc3RyaW5nLCBmZWF0dXJlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnVmF1bHRNYW5hZ2VtZW50RXJyb3InO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgdGhpcy5mZWF0dXJlID0gZmVhdHVyZTtcbiAgfVxufVxuXG4vLyA9PT0gU0VUVElOR1MgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3Mge1xuICBlbmFibGVWYXVsdE1hbmFnZW1lbnQ6IGJvb2xlYW47XG4gIGF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmU6IGJvb2xlYW47XG4gIHNlYXJjaFJlc3VsdHNMaW1pdDogbnVtYmVyO1xuICBlbmFibGVTbWFydFNlYXJjaDogYm9vbGVhbjtcbiAgYmF0Y2hPcGVyYXRpb25UaW1lb3V0OiBudW1iZXI7XG4gIHNob3dWYXVsdFN0YXRzOiBib29sZWFuO1xuICBtYXhTZWFyY2hSZXN1bHRzOiBudW1iZXI7XG4gIGRlZmF1bHRTZWFyY2hUeXBlOiBTZWFyY2hUeXBlO1xuICBlbmFibGVGaWxlT3BlcmF0aW9uczogYm9vbGVhbjtcbiAgY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9uczogYm9vbGVhbjtcbiAgYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnM6IGJvb2xlYW47XG59XG5cbi8vID09PSBBUEkgSU5URVJGQUNFID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0TWFuYWdlbWVudEFQSSB7XG4gIGdldFZhdWx0U3RydWN0dXJlKHJlcXVlc3Q6IFZhdWx0U3RydWN0dXJlUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTdHJ1Y3R1cmVSZXNwb25zZT47XG4gIHBlcmZvcm1GaWxlT3BlcmF0aW9uKHJlcXVlc3Q6IEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+O1xuICBwZXJmb3JtQmF0Y2hPcGVyYXRpb25zKHJlcXVlc3Q6IEJhdGNoRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEJhdGNoRmlsZU9wZXJhdGlvblJlc3BvbnNlPjtcbiAgc2VhcmNoVmF1bHQocmVxdWVzdDogVmF1bHRTZWFyY2hSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFNlYXJjaFJlc3BvbnNlPjtcbiAgb3JnYW5pemVWYXVsdChyZXF1ZXN0OiBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QpOiBQcm9taXNlPFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2U+O1xuICBiYWNrdXBWYXVsdChyZXF1ZXN0OiBWYXVsdEJhY2t1cFJlcXVlc3QpOiBQcm9taXNlPFZhdWx0QmFja3VwUmVzcG9uc2U+O1xufVxuXG4vLyA9PT0gVVRJTElUWSBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE1vZGFsUHJvcHMge1xuICBhcHA6IEFwcDtcbiAgcGx1Z2luOiBhbnk7XG4gIG9uQ2xvc2U/OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVUcmVlTm9kZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICB0eXBlOiAnZmlsZScgfCAnZm9sZGVyJztcbiAgY2hpbGRyZW4/OiBGaWxlVHJlZU5vZGVbXTtcbiAgc2l6ZT86IG51bWJlcjtcbiAgbW9kaWZpZWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdGF0cyB7XG4gIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgdG90YWxGb2xkZXJzOiBudW1iZXI7XG4gIHRvdGFsU2l6ZTogbnVtYmVyO1xuICBhdmVyYWdlRmlsZVNpemU6IG51bWJlcjtcbiAgbGFyZ2VzdEZpbGU6IFZhdWx0RmlsZUluZm87XG4gIG1vc3RSZWNlbnRGaWxlOiBWYXVsdEZpbGVJbmZvO1xuICBmaWxlVHlwZURpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hGaWx0ZXIge1xuICBmaWxlVHlwZXM/OiBzdHJpbmdbXTtcbiAgZm9sZGVycz86IHN0cmluZ1tdO1xuICBkYXRlUmFuZ2U/OiB7XG4gICAgc3RhcnQ6IHN0cmluZztcbiAgICBlbmQ6IHN0cmluZztcbiAgfTtcbiAgc2l6ZVJhbmdlPzoge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICB9O1xuICB0YWdzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRIZWFsdGhDaGVjayB7XG4gIHN0YXR1czogJ2hlYWx0aHknIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJztcbiAgaXNzdWVzOiBIZWFsdGhJc3N1ZVtdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBsYXN0Q2hlY2s6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWFsdGhJc3N1ZSB7XG4gIHR5cGU6ICdvcnBoYW5lZF9maWxlJyB8ICdicm9rZW5fbGluaycgfCAnZHVwbGljYXRlX25hbWUnIHwgJ2xhcmdlX2ZpbGUnIHwgJ2VtcHR5X2ZvbGRlcic7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGZpbGVzOiBzdHJpbmdbXTtcbiAgc2V2ZXJpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG59XG4iLCIvKipcbiAqIEFQSSBDbGllbnQgRXh0ZW5zaW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtcbiAgVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0LFxuICBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlLFxuICBGaWxlT3BlcmF0aW9uUmVxdWVzdCxcbiAgRmlsZU9wZXJhdGlvblJlc3BvbnNlLFxuICBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0LFxuICBCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZSxcbiAgVmF1bHRTZWFyY2hSZXF1ZXN0LFxuICBWYXVsdFNlYXJjaFJlc3BvbnNlLFxuICBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QsXG4gIFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2UsXG4gIFZhdWx0QmFja3VwUmVxdWVzdCxcbiAgVmF1bHRCYWNrdXBSZXNwb25zZSxcbiAgVmF1bHRNYW5hZ2VtZW50RXJyb3IsXG4gIFZhdWx0TWFuYWdlbWVudEFQSVxufSBmcm9tICcuL3ZhdWx0LXR5cGVzJztcblxuLyoqXG4gKiBWYXVsdCBNYW5hZ2VtZW50IEFQSSBDbGllbnRcbiAqL1xuZXhwb3J0IGNsYXNzIFZhdWx0TWFuYWdlbWVudENsaWVudCBpbXBsZW1lbnRzIFZhdWx0TWFuYWdlbWVudEFQSSB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICAvLyA9PT0gQ09SRSBBUEkgTUVUSE9EUyA9PT1cblxuICAvKipcbiAgICogR2V0IGNvbXByZWhlbnNpdmUgdmF1bHQgc3RydWN0dXJlIHdpdGggQUkgYW5hbHlzaXNcbiAgICovXG4gIGFzeW5jIGdldFZhdWx0U3RydWN0dXJlKHJlcXVlc3Q6IFZhdWx0U3RydWN0dXJlUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTdHJ1Y3R1cmVSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvc3RydWN0dXJlJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIGdldCB2YXVsdCBzdHJ1Y3R1cmU6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdTVFJVQ1RVUkVfRkVUQ0hfRkFJTEVEJyxcbiAgICAgICAgICAnc3RydWN0dXJlJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnc3RydWN0dXJlJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBpbmRpdmlkdWFsIGZpbGUgb3BlcmF0aW9uIChjcmVhdGUsIHVwZGF0ZSwgZGVsZXRlLCBtb3ZlLCBjb3B5KVxuICAgKi9cbiAgYXN5bmMgcGVyZm9ybUZpbGVPcGVyYXRpb24ocmVxdWVzdDogRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3QocmVxdWVzdCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9maWxlL29wZXJhdGlvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEZpbGUgb3BlcmF0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ0ZJTEVfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2ZpbGUtb3BlcmF0aW9ucydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICByZXN1bHQubWVzc2FnZSB8fCAnRmlsZSBvcGVyYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICAnRklMRV9PUEVSQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnZmlsZS1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnZmlsZS1vcGVyYXRpb25zJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBtdWx0aXBsZSBmaWxlIG9wZXJhdGlvbnMgZWZmaWNpZW50bHlcbiAgICovXG4gIGFzeW5jIHBlcmZvcm1CYXRjaE9wZXJhdGlvbnMocmVxdWVzdDogQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8QmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZXF1ZXN0Lm9wZXJhdGlvbnMgfHwgcmVxdWVzdC5vcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgJ05vIG9wZXJhdGlvbnMgc3BlY2lmaWVkIGZvciBiYXRjaCByZXF1ZXN0JyxcbiAgICAgICAgICAnSU5WQUxJRF9CQVRDSF9SRVFVRVNUJyxcbiAgICAgICAgICAnYmF0Y2gtb3BlcmF0aW9ucydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgZWFjaCBvcGVyYXRpb25cbiAgICAgIHJlcXVlc3Qub3BlcmF0aW9ucy5mb3JFYWNoKChvcCwgaW5kZXgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3Qob3ApO1xuICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAgIGBJbnZhbGlkIG9wZXJhdGlvbiBhdCBpbmRleCAke2luZGV4fTogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YCxcbiAgICAgICAgICAgICdJTlZBTElEX0JBVENIX09QRVJBVElPTicsXG4gICAgICAgICAgICAnYmF0Y2gtb3BlcmF0aW9ucydcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2ZpbGUvYmF0Y2gnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBCYXRjaCBvcGVyYXRpb25zIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ0JBVENIX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIHJlc3VsdC5tZXNzYWdlIHx8ICdCYXRjaCBvcGVyYXRpb25zIGZhaWxlZCcsXG4gICAgICAgICAgJ0JBVENIX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnYmF0Y2gtb3BlcmF0aW9ucycpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCB2YXVsdCB3aXRoIEFJLXBvd2VyZWQgaW5zaWdodHNcbiAgICovXG4gIGFzeW5jIHNlYXJjaFZhdWx0KHJlcXVlc3Q6IFZhdWx0U2VhcmNoUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTZWFyY2hSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcXVlc3QucXVlcnkgfHwgcmVxdWVzdC5xdWVyeS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnU2VhcmNoIHF1ZXJ5IGNhbm5vdCBiZSBlbXB0eScsXG4gICAgICAgICAgJ0lOVkFMSURfU0VBUkNIX1FVRVJZJyxcbiAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvc2VhcmNoJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgU2VhcmNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ1NFQVJDSF9GQUlMRUQnLFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdzZWFyY2gnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQUktcG93ZXJlZCB2YXVsdCBvcmdhbml6YXRpb24gc3VnZ2VzdGlvbnNcbiAgICovXG4gIGFzeW5jIG9yZ2FuaXplVmF1bHQocmVxdWVzdDogVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0KTogUHJvbWlzZTxWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9vcmdhbml6ZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYE9yZ2FuaXphdGlvbiBhbmFseXNpcyBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdPUkdBTklaQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnb3JnYW5pemF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnb3JnYW5pemF0aW9uJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHZhdWx0IGJhY2t1cFxuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHQocmVxdWVzdDogVmF1bHRCYWNrdXBSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdEJhY2t1cFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9iYWNrdXAnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBCYWNrdXAgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnQkFDS1VQX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhY2t1cCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvciwgJ2JhY2t1cCcpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09IENPTlZFTklFTkNFIE1FVEhPRFMgPT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmaWxlIHdpdGggY29udGVudFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdjcmVhdGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZXhpc3RpbmcgZmlsZSBjb250ZW50XG4gICAqL1xuICBhc3luYyB1cGRhdGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyZm9ybUZpbGVPcGVyYXRpb24oe1xuICAgICAgb3BlcmF0aW9uOiAndXBkYXRlJyxcbiAgICAgIGZpbGVfcGF0aDogZmlsZVBhdGgsXG4gICAgICBjb250ZW50LFxuICAgICAgYmFja3VwXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmlsZVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBiYWNrdXA6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdkZWxldGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmaWxlIHRvIG5ldyBsb2NhdGlvblxuICAgKi9cbiAgYXN5bmMgbW92ZUZpbGUoZnJvbVBhdGg6IHN0cmluZywgdG9QYXRoOiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ21vdmUnLFxuICAgICAgZmlsZV9wYXRoOiBmcm9tUGF0aCxcbiAgICAgIG5ld19wYXRoOiB0b1BhdGgsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IGEgZmlsZSB0byBuZXcgbG9jYXRpb25cbiAgICovXG4gIGFzeW5jIGNvcHlGaWxlKGZyb21QYXRoOiBzdHJpbmcsIHRvUGF0aDogc3RyaW5nKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdjb3B5JyxcbiAgICAgIGZpbGVfcGF0aDogZnJvbVBhdGgsXG4gICAgICBuZXdfcGF0aDogdG9QYXRoXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUXVpY2sgc2VhcmNoIHdpdGggZGVmYXVsdCBzZXR0aW5nc1xuICAgKi9cbiAgYXN5bmMgcXVpY2tTZWFyY2gocXVlcnk6IHN0cmluZywgbWF4UmVzdWx0czogbnVtYmVyID0gMjApOiBQcm9taXNlPFZhdWx0U2VhcmNoUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5zZWFyY2hWYXVsdCh7XG4gICAgICBxdWVyeSxcbiAgICAgIHNlYXJjaF90eXBlOiAnY29tcHJlaGVuc2l2ZScsXG4gICAgICBtYXhfcmVzdWx0czogbWF4UmVzdWx0cyxcbiAgICAgIGluY2x1ZGVfY29udGVudDogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09IEhFTFBFUiBNRVRIT0RTID09PVxuXG4gIC8qKlxuICAgKiBNYWtlIGF1dGhlbnRpY2F0ZWQgcmVxdWVzdCB0byB0aGUgQVBJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyl9JHtlbmRwb2ludH1gO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgLi4uKChvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPikgfHwge30pXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnNcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgYE5ldHdvcmsgcmVxdWVzdCBmYWlsZWQ6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyfWAsXG4gICAgICAgICdORVRXT1JLX0VSUk9SJyxcbiAgICAgICAgJ2FwaSdcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGZpbGUgb3BlcmF0aW9uIHJlcXVlc3RcbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChyZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IHZvaWQge1xuICAgIGlmICghcmVxdWVzdC5maWxlX3BhdGggfHwgcmVxdWVzdC5maWxlX3BhdGgudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAnRmlsZSBwYXRoIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgJ0lOVkFMSURfRklMRV9QQVRIJyxcbiAgICAgICAgJ3ZhbGlkYXRpb24nXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lm9wZXJhdGlvbiA9PT0gJ21vdmUnIHx8IHJlcXVlc3Qub3BlcmF0aW9uID09PSAnY29weScpIHtcbiAgICAgIGlmICghcmVxdWVzdC5uZXdfcGF0aCB8fCByZXF1ZXN0Lm5ld19wYXRoLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdOZXcgcGF0aCBpcyByZXF1aXJlZCBmb3IgbW92ZS9jb3B5IG9wZXJhdGlvbnMnLFxuICAgICAgICAgICdJTlZBTElEX05FV19QQVRIJyxcbiAgICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5vcGVyYXRpb24gPT09ICdjcmVhdGUnIHx8IHJlcXVlc3Qub3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgaWYgKHJlcXVlc3QuY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnQ29udGVudCBpcyByZXF1aXJlZCBmb3IgY3JlYXRlL3VwZGF0ZSBvcGVyYXRpb25zJyxcbiAgICAgICAgICAnSU5WQUxJRF9DT05URU5UJyxcbiAgICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHZhdWx0IG1hbmFnZW1lbnQgZXJyb3JzIHdpdGggdXNlciBmZWVkYmFja1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvcjogYW55LCBmZWF0dXJlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGBWYXVsdCBtYW5hZ2VtZW50IGVycm9yIGluICR7ZmVhdHVyZX06YCwgZXJyb3IpO1xuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhdWx0TWFuYWdlbWVudEVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBWYXVsdCAke2ZlYXR1cmV9IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFZhdWx0ICR7ZmVhdHVyZX0gb3BlcmF0aW9uIGZhaWxlZGAsIDMwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gdmF1bHQgbWFuYWdlbWVudCBlbmRwb2ludHNcbiAgICovXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgYSBzaW1wbGUgdmF1bHQgc3RydWN0dXJlIHJlcXVlc3Qgd2l0aCBtaW5pbWFsIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9zdHJ1Y3R1cmUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGluY2x1ZGVfY29udGVudDogZmFsc2UsIG1heF9kZXB0aDogMSB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVmF1bHQgbWFuYWdlbWVudCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgbWVzc2FnZTogYENvbm5lY3Rpb24gZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIG1lc3NhZ2U6IGBDb25uZWN0aW9uIGVycm9yOiAke2Vyci5tZXNzYWdlIHx8IGVycn1gIFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8gPT09IFVUSUxJVFkgRlVOQ1RJT05TID09PVxuXG4vKipcbiAqIEZvcm1hdCBmaWxlIHNpemUgaW4gaHVtYW4gcmVhZGFibGUgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQic7XG4gIFxuICBjb25zdCBrID0gMTAyNDtcbiAgY29uc3Qgc2l6ZXMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InXTtcbiAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpO1xuICBcbiAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV07XG59XG5cbi8qKlxuICogVmFsaWRhdGUgZmlsZSBwYXRoIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZpbGVQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAoIXBhdGggfHwgcGF0aC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgaW52YWxpZCBjaGFyYWN0ZXJzXG4gIGNvbnN0IGludmFsaWRDaGFycyA9IC9bPD46XCJ8PypdLztcbiAgaWYgKGludmFsaWRDaGFycy50ZXN0KHBhdGgpKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgcmVzZXJ2ZWQgbmFtZXMgb24gV2luZG93c1xuICBjb25zdCByZXNlcnZlZE5hbWVzID0gL14oQ09OfFBSTnxBVVh8TlVMfENPTVsxLTldfExQVFsxLTldKSQvaTtcbiAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gIGlmIChyZXNlcnZlZE5hbWVzLnRlc3QoZmlsZU5hbWUuc3BsaXQoJy4nKVswXSkpIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGZpbGUgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGaWxlUGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aFxuICAgIC5yZXBsYWNlKC9bPD46XCJ8PypdL2csICdfJylcbiAgICAucmVwbGFjZSgvXFxcXC9nLCAnLycpXG4gICAgLnJlcGxhY2UoL1xcLysvZywgJy8nKVxuICAgIC5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCAnJyk7XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEVudmlyb25tZW50SW5mbyB7XG4gIHBsYXRmb3JtOiAnbm9kZScgfCAnYnJvd3NlcicgfCAnb2JzaWRpYW4nIHwgJ3Vua25vd24nO1xuICBoYXNGaWxlU3lzdGVtOiBib29sZWFuO1xuICBoYXNXZWJTb2NrZXQ6IGJvb2xlYW47XG4gIGhhc0hUVFA6IGJvb2xlYW47XG4gIGNhcGFiaWxpdGllczogc3RyaW5nW107XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgYXBwPzogYW55O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFbnZpcm9ubWVudERldGVjdG9yIHtcbiAgc3RhdGljIGRldGVjdCgpOiBFbnZpcm9ubWVudEluZm8ge1xuICAgIGNvbnN0IGluZm86IEVudmlyb25tZW50SW5mbyA9IHtcbiAgICAgIHBsYXRmb3JtOiAndW5rbm93bicsXG4gICAgICBoYXNGaWxlU3lzdGVtOiBmYWxzZSxcbiAgICAgIGhhc1dlYlNvY2tldDogZmFsc2UsXG4gICAgICBoYXNIVFRQOiBmYWxzZSxcbiAgICAgIGNhcGFiaWxpdGllczogW11cbiAgICB9O1xuXG4gICAgLy8gRGV0ZWN0IHBsYXRmb3JtXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHAgJiYgd2luZG93LmFwcC53b3Jrc3BhY2UpIHtcbiAgICAgIGluZm8ucGxhdGZvcm0gPSAnb2JzaWRpYW4nO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGluZm8ucGxhdGZvcm0gPSAnYnJvd3Nlcic7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5wcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnByb2Nlc3MudmVyc2lvbnMgJiYgKGdsb2JhbFRoaXMgYXMgYW55KS5wcm9jZXNzLnZlcnNpb25zLm5vZGUpIHtcbiAgICAgIGluZm8ucGxhdGZvcm0gPSAnbm9kZSc7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgY2FwYWJpbGl0aWVzXG4gICAgaW5mby5oYXNIVFRQID0gdHlwZW9mIGZldGNoICE9PSAndW5kZWZpbmVkJztcbiAgICBpbmZvLmhhc1dlYlNvY2tldCA9IHR5cGVvZiBXZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnO1xuICAgIGluZm8uaGFzRmlsZVN5c3RlbSA9IHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUgIT09ICd1bmRlZmluZWQnICYmIGluZm8ucGxhdGZvcm0gPT09ICdub2RlJztcblxuICAgIC8vIEFkZCBjYXBhYmlsaXRpZXMgbGlzdFxuICAgIGlmIChpbmZvLmhhc0hUVFApIGluZm8uY2FwYWJpbGl0aWVzLnB1c2goJ2h0dHAnKTtcbiAgICBpZiAoaW5mby5oYXNXZWJTb2NrZXQpIGluZm8uY2FwYWJpbGl0aWVzLnB1c2goJ3dlYnNvY2tldCcpO1xuICAgIGlmIChpbmZvLmhhc0ZpbGVTeXN0ZW0pIGluZm8uY2FwYWJpbGl0aWVzLnB1c2goJ2ZpbGVzeXN0ZW0nKTtcblxuICAgIHJldHVybiBpbmZvO1xuICB9XG5cbiAgc3RhdGljIGlzT2JzaWRpYW4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZWN0KCkucGxhdGZvcm0gPT09ICdvYnNpZGlhbic7XG4gIH1cblxuICBzdGF0aWMgY2FuVXNlRmlsZVN5c3RlbSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXRlY3QoKS5oYXNGaWxlU3lzdGVtO1xuICB9XG5cbiAgc3RhdGljIGNhblVzZVdlYlNvY2tldCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXRlY3QoKS5oYXNXZWJTb2NrZXQ7XG4gIH1cblxuICBzdGF0aWMgZ2V0T3B0aW1hbFRyYW5zcG9ydCgpOiAnaHR0cCcgfCAnd2Vic29ja2V0JyB8ICdmaWxlc3lzdGVtJyB7XG4gICAgY29uc3QgZW52ID0gdGhpcy5kZXRlY3QoKTtcbiAgICBcbiAgICBpZiAoZW52Lmhhc1dlYlNvY2tldCkgcmV0dXJuICd3ZWJzb2NrZXQnO1xuICAgIGlmIChlbnYuaGFzSFRUUCkgcmV0dXJuICdodHRwJztcbiAgICBpZiAoZW52Lmhhc0ZpbGVTeXN0ZW0pIHJldHVybiAnZmlsZXN5c3RlbSc7XG4gICAgXG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdWl0YWJsZSB0cmFuc3BvcnQgYXZhaWxhYmxlJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IERldlBpcGVNZXNzYWdlLCBEZXZQaXBlTWVzc2FnZVR5cGUsIE1vZGVsU2VsZWN0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdHlwZXMvTW9kZWxTZWxlY3Rpb24nO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciwgRW52aXJvbm1lbnRJbmZvIH0gZnJvbSAnLi4vdXRpbHMvRW52aXJvbm1lbnREZXRlY3Rvcic7XG5cbmludGVyZmFjZSBFdmVudExpc3RlbmVyIHtcbiAgKGRhdGE6IGFueSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEZXZQaXBlQ2xpZW50IHtcbiAgcHJpdmF0ZSBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBpc0Nvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIG1lc3NhZ2VJZDogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBwZW5kaW5nUmVxdWVzdHM6IE1hcDxzdHJpbmcsIHsgcmVzb2x2ZTogRnVuY3Rpb247IHJlamVjdDogRnVuY3Rpb247IHRpbWVvdXQ6IG51bWJlciB9PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjb25maWc6IE1vZGVsU2VsZWN0aW9uQ29uZmlnO1xuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBFdmVudExpc3RlbmVyW10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGVudmlyb25tZW50OiBFbnZpcm9ubWVudEluZm87ICAvLyBBZGQgZW52aXJvbm1lbnQgcHJvcGVydHlcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IE1vZGVsU2VsZWN0aW9uQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5lbnZpcm9ubWVudCA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7ICAvLyBJbml0aWFsaXplIGVudmlyb25tZW50XG4gICAgdGhpcy5zZXJ2ZXJVcmwgPSBjb25maWcuc2VydmVyX3VybDtcbiAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ0RldlBpcGUgRW52aXJvbm1lbnQ6JywgdGhpcy5lbnZpcm9ubWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRXZlbnQgc3lzdGVtIGltcGxlbWVudGF0aW9uXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKGRhdGEpKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBlbnZpcm9ubWVudCBjb21wYXRpYmlsaXR5XG4gICAgICBpZiAoIXRoaXMuZW52aXJvbm1lbnQuaGFzSFRUUCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgdHJhbnNwb3J0IG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IGNvbm5lY3Rpb24gd2l0aCBlbnZpcm9ubWVudC1zcGVjaWZpYyBtZXRob2RcbiAgICAgIGF3YWl0IHRoaXMudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RlZCcsIHsgXG4gICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgIGVudmlyb25tZW50OiB0aGlzLmVudmlyb25tZW50LnBsYXRmb3JtLFxuICAgICAgICB0cmFuc3BvcnQ6ICdodHRwJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEZXZQaXBlIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgRGV2UGlwZSBjbGllbnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2VydmVyVXJsfS9hcGkvdjEvZGV2cGlwZS9oZWFsdGhgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoNTAwMCkgLy8gNSBzZWNvbmQgdGltZW91dFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEZXZQaXBlIHNlcnZlciBub3QgYWNjZXNzaWJsZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZW5kTWVzc2FnZTxUPih0eXBlOiBEZXZQaXBlTWVzc2FnZVR5cGUsIHBheWxvYWQ6IGFueSwgdGltZW91dDogbnVtYmVyID0gMzAwMDApOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGV2UGlwZSBjbGllbnQgbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKTtcbiAgICBjb25zdCBtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBtZXNzYWdlSWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHR5cGUsXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2VuZGVyOiAndmF1bHRwaWxvdC1wbHVnaW4nLFxuICAgICAgcmVjaXBpZW50OiAnZXZvYWdlbnR4LWJhY2tlbmQnLFxuICAgICAgcHJpb3JpdHk6ICdub3JtYWwnXG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZUlkKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGltZW91dH1tc2ApKTtcbiAgICAgIH0sIHRpbWVvdXQpO1xuXG4gICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zZXQobWVzc2FnZUlkLCB7XG4gICAgICAgIHJlc29sdmUsXG4gICAgICAgIHJlamVjdCxcbiAgICAgICAgdGltZW91dDogdGltZW91dEhhbmRsZVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2VuZE1lc3NhZ2VUb1NlcnZlcihtZXNzYWdlKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShtZXNzYWdlSWQpO1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRNZXNzYWdlVG9TZXJ2ZXIobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2VydmVyVXJsfS9hcGkvdjEvZGV2cGlwZS9tZXNzYWdlYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERldlBpcGUgc2VydmVyIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgaW1tZWRpYXRlIHJlc3BvbnNlXG4gICAgICBpZiAocmVzdWx0LnJlc3BvbnNlICYmIHJlc3VsdC5yZXNwb25zZS5pZCA9PT0gbWVzc2FnZS5pZCkge1xuICAgICAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzLmdldChtZXNzYWdlLmlkKTtcbiAgICAgICAgaWYgKHBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChwZW5kaW5nUmVxdWVzdC50aW1lb3V0KTtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZS5pZCk7XG4gICAgICAgICAgcGVuZGluZ1JlcXVlc3QucmVzb2x2ZShyZXN1bHQucmVzcG9uc2UucGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0RldlBpcGUgbWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseTonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIERldlBpcGUgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlTWVzc2FnZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBtc2dfJHtEYXRlLm5vdygpfV8ke3RoaXMubWVzc2FnZUlkKyt9YDtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUmVqZWN0IGFsbCBwZW5kaW5nIHJlcXVlc3RzXG4gICAgZm9yIChjb25zdCBbaWQsIHJlcXVlc3RdIG9mIHRoaXMucGVuZGluZ1JlcXVlc3RzKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHJlcXVlc3QudGltZW91dCk7XG4gICAgICByZXF1ZXN0LnJlamVjdChuZXcgRXJyb3IoJ0RldlBpcGUgY2xpZW50IGRpc2Nvbm5lY3RlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuY2xlYXIoKTtcblxuICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcsIHsgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyB9KTtcbiAgfVxuXG4gIGlzUmVhZHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNDb25uZWN0ZWQ7XG4gIH1cblxuICBnZXRQZW5kaW5nUmVxdWVzdENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucGVuZGluZ1JlcXVlc3RzLnNpemU7XG4gIH1cbn1cbiIsIi8vIE1vZGVsIFNlbGVjdGlvbiBUeXBlcyBmb3IgRGV2UGlwZSBGcmFtZXdvcmsgSW50ZWdyYXRpb25cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbFNlbGVjdGlvblJlcXVlc3Qge1xuICB0YXNrX3R5cGU6IFRhc2tUeXBlO1xuICBxdWFsaXR5X3JlcXVpcmVtZW50PzogUXVhbGl0eVJlcXVpcmVtZW50O1xuICBtYXhfY29zdD86IG51bWJlcjtcbiAgY29udGV4dF9sZW5ndGg/OiBudW1iZXI7XG4gIHByZWZlcnJlZF9wcm92aWRlcnM/OiBzdHJpbmdbXTtcbiAgdGltZW91dF9tcz86IG51bWJlcjtcbiAgdXNlcl9wcmVmZXJlbmNlcz86IFVzZXJQcmVmZXJlbmNlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbFNlbGVjdGlvblJlc3BvbnNlIHtcbiAgc2VsZWN0ZWRfbW9kZWw6IE1vZGVsSW5mbztcbiAgcmVhc29uaW5nOiBzdHJpbmc7XG4gIGZhbGxiYWNrX21vZGVsczogTW9kZWxJbmZvW107XG4gIGVzdGltYXRlZF9jb3N0OiBudW1iZXI7XG4gIGVzdGltYXRlZF90aW1lX21zOiBudW1iZXI7XG4gIHNlbGVjdGlvbl9tZXRhZGF0YToge1xuICAgIHNlbGVjdGlvbl90aW1lX21zOiBudW1iZXI7XG4gICAgZmFjdG9yc19jb25zaWRlcmVkOiBzdHJpbmdbXTtcbiAgICBjb25maWRlbmNlX3Njb3JlOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxJbmZvIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm92aWRlcjogc3RyaW5nO1xuICBjYXBhYmlsaXRpZXM6IE1vZGVsQ2FwYWJpbGl0eVtdO1xuICBjb3N0X3Blcl90b2tlbjogbnVtYmVyO1xuICBtYXhfdG9rZW5zOiBudW1iZXI7XG4gIHJlc3BvbnNlX3RpbWVfYXZnX21zOiBudW1iZXI7XG4gIGF2YWlsYWJpbGl0eV9zY29yZTogbnVtYmVyO1xuICBxdWFsaXR5X3Njb3JlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxDYXBhYmlsaXR5IHtcbiAgdHlwZTogVGFza1R5cGU7XG4gIHNjb3JlOiBudW1iZXI7XG4gIHNwZWNpYWxpemF0aW9ucz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsSGVhbHRoU3RhdHVzIHtcbiAgbW9kZWxfaWQ6IHN0cmluZztcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ29mZmxpbmUnO1xuICByZXNwb25zZV90aW1lOiBudW1iZXI7XG4gIGVycm9yX3JhdGU6IG51bWJlcjtcbiAgbGFzdF9jaGVjazogc3RyaW5nO1xuICBhdmFpbGFiaWxpdHlfcGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcmVmZXJlbmNlcyB7XG4gIHByaW9yaXR5OiAncGVyZm9ybWFuY2UnIHwgJ2Nvc3QnIHwgJ2JhbGFuY2VkJztcbiAgbWF4X2Nvc3RfcGVyX3JlcXVlc3Q6IG51bWJlcjtcbiAgcHJlZmVycmVkX3Byb3ZpZGVyczogc3RyaW5nW107XG4gIGZhbGxiYWNrX2VuYWJsZWQ6IGJvb2xlYW47XG4gIHF1YWxpdHlfdGhyZXNob2xkOiBudW1iZXI7XG4gIHRpbWVvdXRfcHJlZmVyZW5jZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgbW9kZWxfaWQ6IHN0cmluZztcbiAgdGFza190eXBlOiBUYXNrVHlwZTtcbiAgc3VjY2Vzc19yYXRlOiBudW1iZXI7XG4gIGF2ZXJhZ2VfcmVzcG9uc2VfdGltZTogbnVtYmVyO1xuICBhdmVyYWdlX2Nvc3Q6IG51bWJlcjtcbiAgdXNlcl9zYXRpc2ZhY3Rpb25fc2NvcmU6IG51bWJlcjtcbiAgbGFzdF91cGRhdGVkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFRhc2tUeXBlID0gXG4gIHwgJ3RleHQtZ2VuZXJhdGlvbidcbiAgfCAnY29kZS1nZW5lcmF0aW9uJ1xuICB8ICdjaGF0J1xuICB8ICdzdW1tYXJpemF0aW9uJ1xuICB8ICd0cmFuc2xhdGlvbidcbiAgfCAnZW1iZWRkaW5nJ1xuICB8ICdlZGl0aW5nJ1xuICB8ICdhbmFseXNpcydcbiAgfCAncGxhbm5pbmcnXG4gIHwgJ3dvcmtmbG93LWV4ZWN1dGlvbic7XG5cbmV4cG9ydCB0eXBlIFF1YWxpdHlSZXF1aXJlbWVudCA9ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2UGlwZU1lc3NhZ2Uge1xuICBpZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgdHlwZTogRGV2UGlwZU1lc3NhZ2VUeXBlO1xuICBwYXlsb2FkOiBhbnk7XG4gIHNlbmRlcjogc3RyaW5nO1xuICByZWNpcGllbnQ6IHN0cmluZztcbiAgcHJpb3JpdHk6ICdsb3cnIHwgJ25vcm1hbCcgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICBleHBpcmVzX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBEZXZQaXBlTWVzc2FnZVR5cGUgPSBcbiAgfCAnbW9kZWwtc2VsZWN0aW9uLXJlcXVlc3QnXG4gIHwgJ21vZGVsLXNlbGVjdGlvbi1yZXNwb25zZSdcbiAgfCAnaGVhbHRoLWNoZWNrLXJlcXVlc3QnXG4gIHwgJ2hlYWx0aC1jaGVjay1yZXNwb25zZSdcbiAgfCAncGVyZm9ybWFuY2UtbWV0cmljcy1yZXF1ZXN0J1xuICB8ICdwZXJmb3JtYW5jZS1tZXRyaWNzLXJlc3BvbnNlJ1xuICB8ICdwcmVmZXJlbmNlcy11cGRhdGUnXG4gIHwgJ3N0YXR1cy11cGRhdGUnXG4gIHwgJ2Vycm9yLXJlcG9ydCc7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbFNlbGVjdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogJ05PX0hFQUxUSFlfTU9ERUxTJyB8ICdCVURHRVRfRVhDRUVERUQnIHwgJ1RJTUVPVVQnIHwgJ0lOVkFMSURfUkVRVUVTVCcgfCAnU0VSVklDRV9VTkFWQUlMQUJMRSc7XG4gIHB1YmxpYyBkZXRhaWxzPzogYW55O1xuICBwdWJsaWMgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb2RlOiAnTk9fSEVBTFRIWV9NT0RFTFMnIHwgJ0JVREdFVF9FWENFRURFRCcgfCAnVElNRU9VVCcgfCAnSU5WQUxJRF9SRVFVRVNUJyB8ICdTRVJWSUNFX1VOQVZBSUxBQkxFJyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgZGV0YWlscz86IGFueSxcbiAgICBzdWdnZXN0aW9ucz86IHN0cmluZ1tdXG4gICkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdNb2RlbFNlbGVjdGlvbkVycm9yJztcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxTZWxlY3Rpb25FdmVudCB7XG4gIHR5cGU6ICdtb2RlbC1zZWxlY3RlZCcgfCAnaGVhbHRoLXVwZGF0ZWQnIHwgJ3BlcmZvcm1hbmNlLW1ldHJpY3MnIHwgJ3ByZWZlcmVuY2VzLXVwZGF0ZWQnIHwgJ2Nvbm5lY3RlZCcgfCAnZGlzY29ubmVjdGVkJztcbiAgZGF0YTogYW55O1xuICB0aW1lc3RhbXA6IHN0cmluZztcbn1cblxuLy8gQ29uZmlndXJhdGlvbiB0eXBlc1xuZXhwb3J0IGludGVyZmFjZSBNb2RlbFNlbGVjdGlvbkNvbmZpZyB7XG4gIGRldnBpcGVfcGF0aDogc3RyaW5nO1xuICBzZXJ2ZXJfdXJsOiBzdHJpbmc7XG4gIG1vbml0b3JpbmdfaW50ZXJ2YWw6IG51bWJlcjtcbiAgZmFsbGJhY2tfZW5hYmxlZDogYm9vbGVhbjtcbiAgY2FjaGVfZHVyYXRpb246IG51bWJlcjtcbiAgcmV0cnlfYXR0ZW1wdHM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBkZWJ1Z19tb2RlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsUHJvdmlkZXJDb25maWcge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIGFwaV9rZXk/OiBzdHJpbmc7XG4gIGJhc2VfdXJsPzogc3RyaW5nO1xuICBtYXhfdG9rZW5zPzogbnVtYmVyO1xuICBkZWZhdWx0X3RlbXBlcmF0dXJlPzogbnVtYmVyO1xuICBjdXN0b21fc2V0dGluZ3M/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuIiwiaW1wb3J0IHsgRGV2UGlwZUNsaWVudCB9IGZyb20gJy4uL2RldnBpcGUvRGV2UGlwZUNsaWVudCc7XG5pbXBvcnQgeyBcbiAgTW9kZWxTZWxlY3Rpb25SZXF1ZXN0LCBcbiAgTW9kZWxTZWxlY3Rpb25SZXNwb25zZSwgXG4gIE1vZGVsSGVhbHRoU3RhdHVzLCBcbiAgVXNlclByZWZlcmVuY2VzLCBcbiAgTW9kZWxQZXJmb3JtYW5jZU1ldHJpY3MsXG4gIE1vZGVsU2VsZWN0aW9uQ29uZmlnLFxuICBNb2RlbFNlbGVjdGlvbkVycm9yLFxuICBNb2RlbFNlbGVjdGlvbkV2ZW50IFxufSBmcm9tICcuLi90eXBlcy9Nb2RlbFNlbGVjdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbFNlbGVjdGlvblNlcnZpY2Uge1xuICBwcml2YXRlIGRldlBpcGVDbGllbnQ6IERldlBpcGVDbGllbnQ7XG4gIHByaXZhdGUgY29uZmlnOiBNb2RlbFNlbGVjdGlvbkNvbmZpZztcbiAgcHJpdmF0ZSB1c2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlcztcbiAgcHJpdmF0ZSBjYWNoZWRIZWFsdGg6IE1vZGVsSGVhbHRoU3RhdHVzW10gPSBbXTtcbiAgcHJpdmF0ZSBsYXN0SGVhbHRoVXBkYXRlOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihzZXJ2ZXJVcmw6IHN0cmluZywgZGV2UGlwZVBhdGg6IHN0cmluZyA9ICcnLCBvcHRpb25zOiBQYXJ0aWFsPE1vZGVsU2VsZWN0aW9uQ29uZmlnPiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBkZXZwaXBlX3BhdGg6IGRldlBpcGVQYXRoLFxuICAgICAgc2VydmVyX3VybDogc2VydmVyVXJsLFxuICAgICAgbW9uaXRvcmluZ19pbnRlcnZhbDogb3B0aW9ucy5tb25pdG9yaW5nX2ludGVydmFsIHx8IDMwMDAwLFxuICAgICAgZmFsbGJhY2tfZW5hYmxlZDogb3B0aW9ucy5mYWxsYmFja19lbmFibGVkICE9PSBmYWxzZSxcbiAgICAgIGNhY2hlX2R1cmF0aW9uOiBvcHRpb25zLmNhY2hlX2R1cmF0aW9uIHx8IDMwMDAwMCwgLy8gNSBtaW51dGVzXG4gICAgICByZXRyeV9hdHRlbXB0czogb3B0aW9ucy5yZXRyeV9hdHRlbXB0cyB8fCAzLFxuICAgICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0IHx8IDMwMDAwLFxuICAgICAgZGVidWdfbW9kZTogb3B0aW9ucy5kZWJ1Z19tb2RlIHx8IGZhbHNlXG4gICAgfTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudCA9IG5ldyBEZXZQaXBlQ2xpZW50KHRoaXMuY29uZmlnKTtcbiAgICBcbiAgICAvLyBEZWZhdWx0IHVzZXIgcHJlZmVyZW5jZXNcbiAgICB0aGlzLnVzZXJQcmVmZXJlbmNlcyA9IHtcbiAgICAgIHByaW9yaXR5OiAnYmFsYW5jZWQnLFxuICAgICAgbWF4X2Nvc3RfcGVyX3JlcXVlc3Q6IDAuNTAsXG4gICAgICBwcmVmZXJyZWRfcHJvdmlkZXJzOiBbXSxcbiAgICAgIGZhbGxiYWNrX2VuYWJsZWQ6IHRydWUsXG4gICAgICBxdWFsaXR5X3RocmVzaG9sZDogMC43LFxuICAgICAgdGltZW91dF9wcmVmZXJlbmNlOiAzMDAwMFxuICAgIH07XG5cbiAgICB0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICB0aGlzLmRldlBpcGVDbGllbnQub24oJ2Nvbm5lY3RlZCcsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJywgeyBzdGF0dXM6ICdjb25uZWN0ZWQnIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kZXZQaXBlQ2xpZW50Lm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcsIHsgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudC5vbignaGVhbHRoLXVwZGF0ZWQnLCAoaGVhbHRoRGF0YTogTW9kZWxIZWFsdGhTdGF0dXNbXSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZWRIZWFsdGggPSBoZWFsdGhEYXRhO1xuICAgICAgdGhpcy5sYXN0SGVhbHRoVXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMuZW1pdCgnaGVhbHRoLXVwZGF0ZWQnLCBoZWFsdGhEYXRhKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudC5vbigncGVyZm9ybWFuY2UtbWV0cmljcycsIChtZXRyaWNzOiBNb2RlbFBlcmZvcm1hbmNlTWV0cmljc1tdKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ3BlcmZvcm1hbmNlLW1ldHJpY3MnLCBtZXRyaWNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5pbml0aWFsaXplKCk7XG4gICAgICBcbiAgICAgIC8vIExvYWQgaW5pdGlhbCBoZWFsdGggc3RhdHVzXG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2hNb2RlbEhlYWx0aCgpO1xuICAgICAgXG4gICAgICAvLyBTdGFydCBoZWFsdGggbW9uaXRvcmluZ1xuICAgICAgdGhpcy5zdGFydEhlYWx0aE1vbml0b3JpbmcoKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsU2VsZWN0aW9uU2VydmljZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNb2RlbFNlbGVjdGlvblNlcnZpY2U6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2VsZWN0TW9kZWwocmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0KTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBlcmZvcm1TZWxlY3Rpb24ocmVxdWVzdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5mYWxsYmFja19lbmFibGVkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZhbGxiYWNrU2VsZWN0aW9uKHJlcXVlc3QsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybVNlbGVjdGlvbihyZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QpOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICBpZiAoIXRoaXMuZGV2UGlwZUNsaWVudC5pc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdOT19IRUFMVEhZX01PREVMUycsICdEZXZQaXBlIGNsaWVudCBub3QgY29ubmVjdGVkJywge30sIFsnQ2hlY2sgc2VydmVyIGNvbm5lY3Rpb24nLCAnUmV0cnkgaW5pdGlhbGl6YXRpb24nXSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHVzZXIgcHJlZmVyZW5jZXMgdG8gcmVxdWVzdFxuICAgIGNvbnN0IGVuaGFuY2VkUmVxdWVzdCA9IHtcbiAgICAgIC4uLnJlcXVlc3QsXG4gICAgICB1c2VyX3ByZWZlcmVuY2VzOiB0aGlzLnVzZXJQcmVmZXJlbmNlcyxcbiAgICAgIHRpbWVvdXRfbXM6IHJlcXVlc3QudGltZW91dF9tcyB8fCB0aGlzLmNvbmZpZy50aW1lb3V0XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5kZXZQaXBlQ2xpZW50LnNlbmRNZXNzYWdlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+KFxuICAgICAgJ21vZGVsLXNlbGVjdGlvbi1yZXF1ZXN0JyxcbiAgICAgIGVuaGFuY2VkUmVxdWVzdCxcbiAgICAgIHRoaXMuY29uZmlnLnRpbWVvdXRcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmYWxsYmFja1NlbGVjdGlvbihcbiAgICByZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QsIFxuICAgIG9yaWdpbmFsRXJyb3I6IGFueVxuICApOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zb2xlLndhcm4oJ01vZGVsIHNlbGVjdGlvbiBmYWlsZWQsIHVzaW5nIGZhbGxiYWNrOicsIG9yaWdpbmFsRXJyb3IpO1xuXG4gICAgLy8gVHJ5IGNhY2hlZCBzZWxlY3Rpb24gZmlyc3RcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldENhY2hlZFNlbGVjdGlvbihyZXF1ZXN0KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cblxuICAgIC8vIFVzZSBzdGF0aWMgcnVsZXMgYXMgbGFzdCByZXNvcnRcbiAgICByZXR1cm4gdGhpcy5zdGF0aWNNb2RlbFNlbGVjdGlvbihyZXF1ZXN0KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljTW9kZWxTZWxlY3Rpb24ocmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0KTogTW9kZWxTZWxlY3Rpb25SZXNwb25zZSB7XG4gICAgLy8gU2ltcGxlIHN0YXRpYyBydWxlcyBmb3IgZmFsbGJhY2tcbiAgICBjb25zdCBkZWZhdWx0TW9kZWxzOiB7IFtrZXk6IHN0cmluZ106IHsgbmFtZTogc3RyaW5nOyBjb3N0OiBudW1iZXIgfSB9ID0ge1xuICAgICAgJ3RleHQtZ2VuZXJhdGlvbic6IHsgbmFtZTogJ2dwdC0zLjUtdHVyYm8nLCBjb3N0OiAwLjAwMiB9LFxuICAgICAgJ2NvZGUtZ2VuZXJhdGlvbic6IHsgbmFtZTogJ2dwdC00JywgY29zdDogMC4wMyB9LFxuICAgICAgJ2NoYXQnOiB7IG5hbWU6ICdncHQtMy41LXR1cmJvJywgY29zdDogMC4wMDIgfSxcbiAgICAgICdzdW1tYXJpemF0aW9uJzogeyBuYW1lOiAnZ3B0LTMuNS10dXJibycsIGNvc3Q6IDAuMDAyIH0sXG4gICAgICAndHJhbnNsYXRpb24nOiB7IG5hbWU6ICdncHQtMy41LXR1cmJvJywgY29zdDogMC4wMDIgfVxuICAgIH07XG5cbiAgICBjb25zdCBkZWZhdWx0TW9kZWwgPSBkZWZhdWx0TW9kZWxzW3JlcXVlc3QudGFza190eXBlXSB8fCBkZWZhdWx0TW9kZWxzWyd0ZXh0LWdlbmVyYXRpb24nXTtcblxuICAgIHJldHVybiB7XG4gICAgICBzZWxlY3RlZF9tb2RlbDoge1xuICAgICAgICBpZDogZGVmYXVsdE1vZGVsLm5hbWUsXG4gICAgICAgIG5hbWU6IGRlZmF1bHRNb2RlbC5uYW1lLFxuICAgICAgICBwcm92aWRlcjogJ29wZW5haScsXG4gICAgICAgIGNhcGFiaWxpdGllczogW3sgdHlwZTogcmVxdWVzdC50YXNrX3R5cGUsIHNjb3JlOiAwLjggfV0sXG4gICAgICAgIGNvc3RfcGVyX3Rva2VuOiBkZWZhdWx0TW9kZWwuY29zdCxcbiAgICAgICAgbWF4X3Rva2VuczogNDAwMCxcbiAgICAgICAgcmVzcG9uc2VfdGltZV9hdmdfbXM6IDIwMDAsXG4gICAgICAgIGF2YWlsYWJpbGl0eV9zY29yZTogMC45LFxuICAgICAgICBxdWFsaXR5X3Njb3JlOiAwLjhcbiAgICAgIH0sXG4gICAgICByZWFzb25pbmc6ICdGYWxsYmFjayBzZWxlY3Rpb24gZHVlIHRvIHNlcnZpY2UgdW5hdmFpbGFiaWxpdHknLFxuICAgICAgZmFsbGJhY2tfbW9kZWxzOiBbXSxcbiAgICAgIGVzdGltYXRlZF9jb3N0OiBkZWZhdWx0TW9kZWwuY29zdCAqIDEwMCwgLy8gRXN0aW1hdGUgZm9yIDEwMCB0b2tlbnNcbiAgICAgIGVzdGltYXRlZF90aW1lX21zOiAyMDAwLFxuICAgICAgc2VsZWN0aW9uX21ldGFkYXRhOiB7XG4gICAgICAgIHNlbGVjdGlvbl90aW1lX21zOiAwLFxuICAgICAgICBmYWN0b3JzX2NvbnNpZGVyZWQ6IFsnZmFsbGJhY2snXSxcbiAgICAgICAgY29uZmlkZW5jZV9zY29yZTogMC41XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q2FjaGVkU2VsZWN0aW9uKHJlcXVlc3Q6IE1vZGVsU2VsZWN0aW9uUmVxdWVzdCk6IE1vZGVsU2VsZWN0aW9uUmVzcG9uc2UgfCBudWxsIHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBjYWNoZSBsb29rdXBcbiAgICAvLyBGb3Igbm93LCByZXR1cm4gbnVsbCAobm8gY2FjaGUpXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBPcmlnaW5hbCBzZWxlY3RNb2RlbCBtZXRob2QgcmVuYW1lZCB0byBwZXJmb3JtU2VsZWN0aW9uIChzZWUgYWJvdmUpXG4gIGFzeW5jIHNlbGVjdE1vZGVsX09MRChyZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QpOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICBpZiAoIXRoaXMuZGV2UGlwZUNsaWVudC5pc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdOT19IRUFMVEhZX01PREVMUycsICdEZXZQaXBlIGNsaWVudCBub3QgY29ubmVjdGVkJywge30sIFsnQ2hlY2sgc2VydmVyIGNvbm5lY3Rpb24nLCAnUmV0cnkgaW5pdGlhbGl6YXRpb24nXSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEFkZCB1c2VyIHByZWZlcmVuY2VzIHRvIHJlcXVlc3RcbiAgICAgIGNvbnN0IGVuaGFuY2VkUmVxdWVzdCA9IHtcbiAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgdXNlcl9wcmVmZXJlbmNlczogdGhpcy51c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgIHRpbWVvdXRfbXM6IHJlcXVlc3QudGltZW91dF9tcyB8fCB0aGlzLmNvbmZpZy50aW1lb3V0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5zZW5kTWVzc2FnZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPihcbiAgICAgICAgJ21vZGVsLXNlbGVjdGlvbi1yZXF1ZXN0JyxcbiAgICAgICAgZW5oYW5jZWRSZXF1ZXN0LFxuICAgICAgICByZXF1ZXN0LnRpbWVvdXRfbXMgfHwgdGhpcy5jb25maWcudGltZW91dFxuICAgICAgKTtcblxuICAgICAgLy8gRW1pdCBzZWxlY3Rpb24gZXZlbnRcbiAgICAgIHRoaXMuZW1pdCgnbW9kZWwtc2VsZWN0ZWQnLCByZXNwb25zZSk7XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzZWxlY3RlZDonLCByZXNwb25zZS5zZWxlY3RlZF9tb2RlbC5uYW1lLCAnZm9yIHRhc2s6JywgcmVxdWVzdC50YXNrX3R5cGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxTZWxlY3Rpb25FcnJvcignVElNRU9VVCcsICdNb2RlbCBzZWxlY3Rpb24gcmVxdWVzdCB0aW1lZCBvdXQnLCB7IG9yaWdpbmFsRXJyb3I6IGVycm9yIH0sIFsnSW5jcmVhc2UgdGltZW91dCcsICdDaGVjayBzZXJ2ZXIgcGVyZm9ybWFuY2UnXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYnVkZ2V0JykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnY29zdCcpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IE1vZGVsU2VsZWN0aW9uRXJyb3IoJ0JVREdFVF9FWENFRURFRCcsICdSZXF1ZXN0IGV4Y2VlZHMgYnVkZ2V0IGxpbWl0cycsIHsgb3JpZ2luYWxFcnJvcjogZXJyb3IgfSwgWydJbmNyZWFzZSBidWRnZXQnLCAnVXNlIGxvd2VyIGNvc3QgbW9kZWxzJ10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdTRVJWSUNFX1VOQVZBSUxBQkxFJywgJ01vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIHVuYXZhaWxhYmxlJywgeyBvcmlnaW5hbEVycm9yOiBlcnJvciB9LCBbJ0NoZWNrIHNlcnZlciBzdGF0dXMnLCAnUmV0cnkgcmVxdWVzdCddKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRNb2RlbEhlYWx0aCgpOiBQcm9taXNlPE1vZGVsSGVhbHRoU3RhdHVzW10+IHtcbiAgICAvLyBSZXR1cm4gY2FjaGVkIGhlYWx0aCBpZiByZWNlbnRcbiAgICBpZiAodGhpcy5jYWNoZWRIZWFsdGgubGVuZ3RoID4gMCAmJiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhlYWx0aFVwZGF0ZSkgPCB0aGlzLmNvbmZpZy5jYWNoZV9kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkSGVhbHRoO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlZnJlc2hNb2RlbEhlYWx0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoTW9kZWxIZWFsdGgoKTogUHJvbWlzZTxNb2RlbEhlYWx0aFN0YXR1c1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5zZW5kTWVzc2FnZTxNb2RlbEhlYWx0aFN0YXR1c1tdPihcbiAgICAgICAgJ2hlYWx0aC1jaGVjay1yZXF1ZXN0JyxcbiAgICAgICAge30sXG4gICAgICAgIDEwMDAwIC8vIFNob3J0IHRpbWVvdXQgZm9yIGhlYWx0aCBjaGVja3NcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuY2FjaGVkSGVhbHRoID0gaGVhbHRoO1xuICAgICAgdGhpcy5sYXN0SGVhbHRoVXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGhlYWx0aDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmVmcmVzaCBtb2RlbCBoZWFsdGg6JywgZXJyb3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkSGVhbHRoOyAvLyBSZXR1cm4gY2FjaGVkIGRhdGEgb24gZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVQcmVmZXJlbmNlcyhwcmVmZXJlbmNlczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy51c2VyUHJlZmVyZW5jZXMgPSB7XG4gICAgICAuLi50aGlzLnVzZXJQcmVmZXJlbmNlcyxcbiAgICAgIC4uLnByZWZlcmVuY2VzXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmRldlBpcGVDbGllbnQuc2VuZE1lc3NhZ2UoXG4gICAgICAgICdwcmVmZXJlbmNlcy11cGRhdGUnLFxuICAgICAgICB0aGlzLnVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgNTAwMFxuICAgICAgKTtcblxuICAgICAgdGhpcy5lbWl0KCdwcmVmZXJlbmNlcy11cGRhdGVkJywgdGhpcy51c2VyUHJlZmVyZW5jZXMpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBwcmVmZXJlbmNlcyB1cGRhdGVkOicsIHRoaXMudXNlclByZWZlcmVuY2VzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc3luYyBwcmVmZXJlbmNlcyB3aXRoIHNlcnZlcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgICAvLyBDb250aW51ZSB3aXRoIGxvY2FsIHByZWZlcmVuY2VzIGV2ZW4gaWYgc2VydmVyIHN5bmMgZmFpbHNcbiAgICB9XG4gIH1cblxuICBnZXRQcmVmZXJlbmNlcygpOiBVc2VyUHJlZmVyZW5jZXMge1xuICAgIHJldHVybiB7IC4uLnRoaXMudXNlclByZWZlcmVuY2VzIH07XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0SGVhbHRoTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb25maWcubW9uaXRvcmluZ19pbnRlcnZhbCA+IDApIHtcbiAgICAgIHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hNb2RlbEhlYWx0aCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlYWx0aCBtb25pdG9yaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCB0aGlzLmNvbmZpZy5tb25pdG9yaW5nX2ludGVydmFsKTtcbiAgICB9XG4gIH1cblxuICAvLyBFdmVudCBzeXN0ZW1cbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGlzdGVuZXIoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0V2ZW50IGxpc3RlbmVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFF1aWNrIHNlbGVjdGlvbiBtZXRob2RzIGZvciBjb21tb24gdXNlIGNhc2VzXG4gIGFzeW5jIHNlbGVjdEZvclRhc2sodGFza1R5cGU6IHN0cmluZywgcXVhbGl0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyA9ICdtZWRpdW0nKTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0TW9kZWwoe1xuICAgICAgdGFza190eXBlOiB0YXNrVHlwZSBhcyBhbnksXG4gICAgICBxdWFsaXR5X3JlcXVpcmVtZW50OiBxdWFsaXR5XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzZWxlY3RDb3N0T3B0aW1pemVkKHRhc2tUeXBlOiBzdHJpbmcsIG1heENvc3Q6IG51bWJlciA9IDAuMDEpOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RNb2RlbCh7XG4gICAgICB0YXNrX3R5cGU6IHRhc2tUeXBlIGFzIGFueSxcbiAgICAgIHF1YWxpdHlfcmVxdWlyZW1lbnQ6ICdtZWRpdW0nLFxuICAgICAgbWF4X2Nvc3Q6IG1heENvc3RcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbGVjdEhpZ2hQZXJmb3JtYW5jZSh0YXNrVHlwZTogc3RyaW5nKTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0TW9kZWwoe1xuICAgICAgdGFza190eXBlOiB0YXNrVHlwZSBhcyBhbnksXG4gICAgICBxdWFsaXR5X3JlcXVpcmVtZW50OiAnaGlnaCdcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgbWV0aG9kc1xuICBpc0Nvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXZQaXBlQ2xpZW50LmlzUmVhZHkoKTtcbiAgfVxuXG4gIGdldENvbmZpZygpOiBNb2RlbFNlbGVjdGlvbkNvbmZpZyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfTtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5kZXZQaXBlQ2xpZW50LmRpc2Nvbm5lY3QoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBNb2RhbCBDbGFzc2VzIGZvciBWYXVsdFBpbG90IFZhdWx0IE1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXVsdE1hbmFnZW1lbnRDbGllbnQgfSBmcm9tICcuL3ZhdWx0LWFwaS1jbGllbnQnO1xuaW1wb3J0IHsgXG4gIFZhdWx0U3RydWN0dXJlUmVzcG9uc2UsIFxuICBWYXVsdFNlYXJjaFJlc3BvbnNlLCBcbiAgRmlsZU9wZXJhdGlvblJlcXVlc3QsXG4gIFNlYXJjaFR5cGUsXG4gIFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2Vcbn0gZnJvbSAnLi92YXVsdC10eXBlcyc7XG5cbi8vID09PSBWQVVMVCBTVFJVQ1RVUkUgTU9EQUwgPT09XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFN0cnVjdHVyZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHZhdWx0Q2xpZW50OiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgZm9jdXNQYXRoPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFueSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdENsaWVudCA9IHBsdWdpbi52YXVsdENsaWVudDtcbiAgfVxuXG4gIHNldEZvY3VzUGF0aChwYXRoOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLmZvY3VzUGF0aCA9IHBhdGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdC1zdHJ1Y3R1cmUtbW9kYWwnKTtcbiAgICBcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RhbC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0IFN0cnVjdHVyZSBBbmFseXNpcycgfSk7XG4gICAgXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGhlYWRlckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/CflIQgUmVmcmVzaCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIExvYWRpbmcgc3RhdGVcbiAgICBjb25zdCBsb2FkaW5nRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtbG9hZGluZycgfSk7XG4gICAgbG9hZGluZ0VsLnNldFRleHQoJ/CflI0gQW5hbHl6aW5nIHZhdWx0IHN0cnVjdHVyZS4uLicpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cnVjdHVyZSA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuZ2V0VmF1bHRTdHJ1Y3R1cmUoe1xuICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlLFxuICAgICAgICBtYXhfZGVwdGg6IDVcbiAgICAgIH0pO1xuXG4gICAgICBsb2FkaW5nRWwucmVtb3ZlKCk7XG4gICAgICB0aGlzLnJlbmRlclN0cnVjdHVyZShjb250ZW50RWwsIHN0cnVjdHVyZSk7XG4gICAgICBcbiAgICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgbG9hZGluZ0VsLnNldFRleHQoJ+KdjCBGYWlsZWQgdG8gbG9hZCB2YXVsdCBzdHJ1Y3R1cmUnKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgXG4gICAgICBjb25zdCByZXRyeUJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ1JldHJ5JyxcbiAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgIH0pO1xuICAgICAgcmV0cnlCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMub25PcGVuKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTdHJ1Y3R1cmUoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc3RydWN0dXJlOiBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlKSB7XG4gICAgLy8gU3RhdHMgb3ZlcnZpZXdcbiAgICBjb25zdCBzdGF0c0VsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LXN0YXRzJyB9KTtcbiAgICBzdGF0c0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWdyaWRcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+TgTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5GaWxlczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3N0cnVjdHVyZS50b3RhbF9maWxlc308L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWljb25cIj7wn5OCPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPkZvbGRlcnM8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtzdHJ1Y3R1cmUudG90YWxfZm9sZGVyc308L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWljb25cIj7wn5K+PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPlNpemU8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHsoc3RydWN0dXJlLnRvdGFsX3NpemUgLyAxMDI0IC8gMTAyNCkudG9GaXhlZCgyKX0gTUI8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIEZvbGRlciB0cmVlXG4gICAgY29uc3QgdHJlZUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC10cmVlLWNvbnRhaW5lcicgfSk7XG4gICAgdHJlZUNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdGb2xkZXIgU3RydWN0dXJlJyB9KTtcbiAgICBcbiAgICBjb25zdCB0cmVlRWwgPSB0cmVlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LXRyZWUnIH0pO1xuICAgIHRoaXMucmVuZGVyRm9sZGVyKHRyZWVFbCwgc3RydWN0dXJlLnN0cnVjdHVyZSwgMCk7XG5cbiAgICAvLyBSZWNlbnQgZmlsZXNcbiAgICBpZiAoc3RydWN0dXJlLnJlY2VudF9maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByZWNlbnRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWZpbGVzLWNvbnRhaW5lcicgfSk7XG4gICAgICByZWNlbnRDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEZpbGVzJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVjZW50RWwgPSByZWNlbnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWZpbGVzJyB9KTtcbiAgICAgIHN0cnVjdHVyZS5yZWNlbnRfZmlsZXMuc2xpY2UoMCwgMTApLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVFbCA9IHJlY2VudEVsLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlJyB9KTtcbiAgICAgICAgZmlsZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaWNvblwiPvCfk4Q8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLW5hbWVcIj4ke2ZpbGUubmFtZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWRhdGVcIj4ke25ldyBEYXRlKGZpbGUubW9kaWZpZWQpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE9ycGhhbmVkIGZpbGVzXG4gICAgaWYgKHN0cnVjdHVyZS5vcnBoYW5lZF9maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBvcnBoYW5lZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdvcnBoYW5lZC1maWxlcy1jb250YWluZXInIH0pO1xuICAgICAgb3JwaGFuZWRDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn4pqg77iPIE9ycGhhbmVkIEZpbGVzJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgb3JwaGFuZWRFbCA9IG9ycGhhbmVkQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ29ycGhhbmVkLWZpbGVzJyB9KTtcbiAgICAgIHN0cnVjdHVyZS5vcnBoYW5lZF9maWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICBjb25zdCBvcnBoYW5FbCA9IG9ycGhhbmVkRWwuY3JlYXRlRGl2KHsgY2xzOiAnb3JwaGFuZWQtZmlsZScgfSk7XG4gICAgICAgIG9ycGhhbkVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaWNvblwiPvCflJc8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLXBhdGhcIj4ke2ZpbGUucGF0aH08L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZvbGRlcihjb250YWluZXI6IEhUTUxFbGVtZW50LCBmb2xkZXI6IGFueSwgbGV2ZWw6IG51bWJlcikge1xuICAgIGNvbnN0IGZvbGRlckVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiAnZm9sZGVyLWl0ZW0nLFxuICAgICAgYXR0cjogeyAnZGF0YS1sZXZlbCc6IGxldmVsLnRvU3RyaW5nKCkgfVxuICAgIH0pO1xuICAgIFxuICAgIGZvbGRlckVsLmlubmVySFRNTCA9IGBcbiAgICAgIDxzcGFuIGNsYXNzPVwiZm9sZGVyLXRvZ2dsZVwiPuKWtjwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiZm9sZGVyLWljb25cIj7wn5OBPC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJmb2xkZXItbmFtZVwiPiR7Zm9sZGVyLm5hbWV9PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJmb2xkZXItY291bnRcIj4oJHtmb2xkZXIuY2hpbGRyZW4ubGVuZ3RofSk8L3NwYW4+XG4gICAgYDtcblxuICAgIC8vIEFkZCBjaGlsZHJlbiBjb250YWluZXJcbiAgICBjb25zdCBjaGlsZHJlbkVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiAnZm9sZGVyLWNoaWxkcmVuJyxcbiAgICAgIGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBub25lOycgfVxuICAgIH0pO1xuXG4gICAgLy8gVG9nZ2xlIGZ1bmN0aW9uYWxpdHlcbiAgICBjb25zdCB0b2dnbGVFbCA9IGZvbGRlckVsLnF1ZXJ5U2VsZWN0b3IoJy5mb2xkZXItdG9nZ2xlJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgdG9nZ2xlRWwub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGlzT3BlbiA9IGNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuICAgICAgY2hpbGRyZW5FbC5zdHlsZS5kaXNwbGF5ID0gaXNPcGVuID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgIHRvZ2dsZUVsLnRleHRDb250ZW50ID0gaXNPcGVuID8gJ+KWticgOiAn4pa8JztcbiAgICB9O1xuXG4gICAgLy8gUmVuZGVyIGNoaWxkcmVuXG4gICAgZm9sZGVyLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBhbnkpID0+IHtcbiAgICAgIGlmIChjaGlsZC50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgICB0aGlzLnJlbmRlckZvbGRlcihjaGlsZHJlbkVsLCBjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZpbGVFbCA9IGNoaWxkcmVuRWwuY3JlYXRlRGl2KHsgXG4gICAgICAgICAgY2xzOiAnZmlsZS1pdGVtJyxcbiAgICAgICAgICBhdHRyOiB7ICdkYXRhLWxldmVsJzogKGxldmVsICsgMSkudG9TdHJpbmcoKSB9XG4gICAgICAgIH0pO1xuICAgICAgICBmaWxlRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+8J+ThDwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtbmFtZVwiPiR7Y2hpbGQubmFtZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLXNpemVcIj4keyhjaGlsZC5zaXplIC8gMTAyNCkudG9GaXhlZCgxKX1LQjwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLy8gPT09IFNNQVJUIFNFQVJDSCBNT0RBTCA9PT1cblxuZXhwb3J0IGNsYXNzIFNtYXJ0U2VhcmNoTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBhbnk7XG4gIHByaXZhdGUgdmF1bHRDbGllbnQ6IFZhdWx0TWFuYWdlbWVudENsaWVudDtcbiAgcHJpdmF0ZSBpbml0aWFsUXVlcnk/OiBzdHJpbmc7XG4gIHByaXZhdGUgc2VhcmNoVHlwZT86IFNlYXJjaFR5cGU7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogYW55KSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnZhdWx0Q2xpZW50ID0gcGx1Z2luLnZhdWx0Q2xpZW50O1xuICB9XG5cbiAgc2V0SW5pdGlhbFF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIHR5cGU/OiBTZWFyY2hUeXBlKTogdGhpcyB7XG4gICAgdGhpcy5pbml0aWFsUXVlcnkgPSBxdWVyeTtcbiAgICB0aGlzLnNlYXJjaFR5cGUgPSB0eXBlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnc21hcnQtc2VhcmNoLW1vZGFsJyk7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CflI0gU21hcnQgVmF1bHQgU2VhcmNoJyB9KTtcblxuICAgIC8vIFNlYXJjaCBmb3JtXG4gICAgY29uc3Qgc2VhcmNoRm9ybSA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtZm9ybScgfSk7XG4gICAgXG4gICAgY29uc3QgcXVlcnlJbnB1dCA9IHNlYXJjaEZvcm0uY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdFbnRlciBzZWFyY2ggcXVlcnkuLi4nLFxuICAgICAgY2xzOiAnc2VhcmNoLXF1ZXJ5LWlucHV0J1xuICAgIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLmluaXRpYWxRdWVyeSkge1xuICAgICAgcXVlcnlJbnB1dC52YWx1ZSA9IHRoaXMuaW5pdGlhbFF1ZXJ5O1xuICAgIH1cblxuICAgIGNvbnN0IHNlYXJjaFR5cGVTZWxlY3QgPSBzZWFyY2hGb3JtLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ3NlYXJjaC10eXBlLXNlbGVjdCcgfSk7XG4gICAgY29uc3Qgc2VhcmNoVHlwZXMgPSBbXG4gICAgICB7IHZhbHVlOiAnY29tcHJlaGVuc2l2ZScsIGxhYmVsOiAnQ29tcHJlaGVuc2l2ZScgfSxcbiAgICAgIHsgdmFsdWU6ICdjb250ZW50JywgbGFiZWw6ICdDb250ZW50JyB9LFxuICAgICAgeyB2YWx1ZTogJ2ZpbGVuYW1lJywgbGFiZWw6ICdGaWxlbmFtZScgfSxcbiAgICAgIHsgdmFsdWU6ICd0YWdzJywgbGFiZWw6ICdUYWdzJyB9LFxuICAgICAgeyB2YWx1ZTogJ2xpbmtzJywgbGFiZWw6ICdMaW5rcycgfVxuICAgIF07XG4gICAgXG4gICAgc2VhcmNoVHlwZXMuZm9yRWFjaCh0eXBlID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IHNlYXJjaFR5cGVTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6IHR5cGUudmFsdWUgfSk7XG4gICAgICBvcHRpb24udGV4dENvbnRlbnQgPSB0eXBlLmxhYmVsO1xuICAgICAgaWYgKHR5cGUudmFsdWUgPT09ICh0aGlzLnNlYXJjaFR5cGUgfHwgJ2NvbXByZWhlbnNpdmUnKSkge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qgc2VhcmNoQnV0dG9uID0gc2VhcmNoRm9ybS5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTZWFyY2gnLFxuICAgICAgY2xzOiAnbW9kLWN0YSBzZWFyY2gtYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgLy8gUmVzdWx0cyBjb250YWluZXJcbiAgICBjb25zdCByZXN1bHRzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1yZXN1bHRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBTZWFyY2ggZnVuY3Rpb25cbiAgICBjb25zdCBwZXJmb3JtU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghcXVlcnkpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgc2VhcmNoIHF1ZXJ5Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VhcmNoQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlYXJjaGluZy4uLic7XG4gICAgICBzZWFyY2hCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2FkaW5nRWwgPSByZXN1bHRzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1sb2FkaW5nJyB9KTtcbiAgICAgIGxvYWRpbmdFbC50ZXh0Q29udGVudCA9ICfwn5SNIFNlYXJjaGluZyB2YXVsdC4uLic7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnNlYXJjaFZhdWx0KHtcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICBzZWFyY2hfdHlwZTogc2VhcmNoVHlwZVNlbGVjdC52YWx1ZSBhcyBTZWFyY2hUeXBlLFxuICAgICAgICAgIG1heF9yZXN1bHRzOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LnNlYXJjaFJlc3VsdHNMaW1pdCB8fCA1MCxcbiAgICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9hZGluZ0VsLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclNlYXJjaFJlc3VsdHMocmVzdWx0c0NvbnRhaW5lciwgcmVzdWx0cyk7XG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGxvYWRpbmdFbC50ZXh0Q29udGVudCA9ICfinYwgU2VhcmNoIGZhaWxlZCc7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBlcnJvcjonLCBlcnJvcik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZWFyY2hCdXR0b24udGV4dENvbnRlbnQgPSAnU2VhcmNoJztcbiAgICAgICAgc2VhcmNoQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEV2ZW50IGxpc3RlbmVyc1xuICAgIHNlYXJjaEJ1dHRvbi5vbmNsaWNrID0gcGVyZm9ybVNlYXJjaDtcbiAgICBxdWVyeUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBwZXJmb3JtU2VhcmNoKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBdXRvLXNlYXJjaCBpZiBpbml0aWFsIHF1ZXJ5IHByb3ZpZGVkXG4gICAgaWYgKHRoaXMuaW5pdGlhbFF1ZXJ5KSB7XG4gICAgICBwZXJmb3JtU2VhcmNoKCk7XG4gICAgfVxuXG4gICAgLy8gRm9jdXMgaW5wdXRcbiAgICBxdWVyeUlucHV0LmZvY3VzKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNlYXJjaFJlc3VsdHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcmVzdWx0czogVmF1bHRTZWFyY2hSZXNwb25zZSkge1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGBTZWFyY2ggUmVzdWx0cyAoJHtyZXN1bHRzLnRvdGFsX2ZvdW5kfSlgIH0pO1xuXG4gICAgaWYgKHJlc3VsdHMuaW5zaWdodHMpIHtcbiAgICAgIGNvbnN0IGluc2lnaHRzRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWluc2lnaHRzJyB9KTtcbiAgICAgIGluc2lnaHRzRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5zaWdodHMtaGVhZGVyXCI+8J+noCBBSSBJbnNpZ2h0czwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5zaWdodHMtY29udGVudFwiPiR7cmVzdWx0cy5pbnNpZ2h0c308L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdHMucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgICAgY2xzOiAnbm8tcmVzdWx0cycsXG4gICAgICAgIHRleHQ6ICdObyByZXN1bHRzIGZvdW5kLiBUcnkgYSBkaWZmZXJlbnQgc2VhcmNoIHRlcm0gb3IgdHlwZS4nIFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0c0xpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLXJlc3VsdHMtbGlzdCcgfSk7XG4gICAgXG4gICAgcmVzdWx0cy5yZXN1bHRzLmZvckVhY2gocmVzdWx0ID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdEVsID0gcmVzdWx0c0xpc3QuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLXJlc3VsdCcgfSk7XG4gICAgICBcbiAgICAgIHJlc3VsdEVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdC1oZWFkZXJcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlc3VsdC1maWxlLW5hbWVcIj4ke3Jlc3VsdC5maWxlX25hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVzdWx0LW1hdGNoLXR5cGVcIj4ke3Jlc3VsdC5tYXRjaF90eXBlfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlc3VsdC1zY29yZVwiPiR7KHJlc3VsdC5zY29yZSAqIDEwMCkudG9GaXhlZCgwKX0lPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdC1wYXRoXCI+JHtyZXN1bHQuZmlsZV9wYXRofTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LXByZXZpZXdcIj4ke3Jlc3VsdC5wcmV2aWV3fTwvZGl2PlxuICAgICAgICAke3Jlc3VsdC5tYXRjaGVzLmxlbmd0aCA+IDAgPyBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdC1tYXRjaGVzXCI+XG4gICAgICAgICAgICA8c3Ryb25nPk1hdGNoZXM6PC9zdHJvbmc+ICR7cmVzdWx0Lm1hdGNoZXMuam9pbignLCAnKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCA6ICcnfVxuICAgICAgYDtcblxuICAgICAgLy8gQ2xpY2sgdG8gb3BlbiBmaWxlXG4gICAgICByZXN1bHRFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHJlc3VsdC5maWxlX3BhdGgsICcnKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIFN1Z2dlc3RlZCBxdWVyaWVzXG4gICAgaWYgKHJlc3VsdHMuc3VnZ2VzdGVkX3F1ZXJpZXMgJiYgcmVzdWx0cy5zdWdnZXN0ZWRfcXVlcmllcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdWdnZXN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3RlZC1xdWVyaWVzJyB9KTtcbiAgICAgIHN1Z2dlc3Rpb25zRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn8J+SoSBTdWdnZXN0ZWQgUXVlcmllcycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zTGlzdCA9IHN1Z2dlc3Rpb25zRWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbnMtbGlzdCcgfSk7XG4gICAgICByZXN1bHRzLnN1Z2dlc3RlZF9xdWVyaWVzLmZvckVhY2goc3VnZ2VzdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25FbCA9IHN1Z2dlc3Rpb25zTGlzdC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICB0ZXh0OiBzdWdnZXN0aW9uLFxuICAgICAgICAgIGNsczogJ3N1Z2dlc3Rpb24tYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgc3VnZ2VzdGlvbkVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcXVlcnlJbnB1dCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtcXVlcnktaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgIGlmIChxdWVyeUlucHV0KSB7XG4gICAgICAgICAgICBxdWVyeUlucHV0LnZhbHVlID0gc3VnZ2VzdGlvbjtcbiAgICAgICAgICAgIHF1ZXJ5SW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgS2V5Ym9hcmRFdmVudCgna2V5cHJlc3MnLCB7IGtleTogJ0VudGVyJyB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG4vLyA9PT0gRklMRSBPUEVSQVRJT05TIE1PREFMID09PVxuXG5leHBvcnQgY2xhc3MgRmlsZU9wZXJhdGlvbnNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgcHJpdmF0ZSB2YXVsdENsaWVudDogVmF1bHRNYW5hZ2VtZW50Q2xpZW50O1xuICBwcml2YXRlIGluaXRpYWxQYXRoPzogc3RyaW5nO1xuICBwcml2YXRlIG9wZXJhdGlvbj86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBwbHVnaW4udmF1bHRDbGllbnQ7XG4gIH1cblxuICBzZXRJbml0aWFsUGF0aChwYXRoOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLmluaXRpYWxQYXRoID0gcGF0aDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNldE9wZXJhdGlvbihvcGVyYXRpb246IHN0cmluZyk6IHRoaXMge1xuICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnZmlsZS1vcGVyYXRpb25zLW1vZGFsJyk7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/Cfk4EgRmlsZSBPcGVyYXRpb25zIE1hbmFnZXInIH0pO1xuXG4gICAgLy8gT3BlcmF0aW9uIHNlbGVjdGlvblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdPcGVyYXRpb24nKVxuICAgICAgLnNldERlc2MoJ1NlbGVjdCB0aGUgZmlsZSBvcGVyYXRpb24gdG8gcGVyZm9ybScpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgICAgLmFkZE9wdGlvbignY3JlYXRlJywgJ0NyZWF0ZSBGaWxlJylcbiAgICAgICAgLmFkZE9wdGlvbigndXBkYXRlJywgJ1VwZGF0ZSBGaWxlJylcbiAgICAgICAgLmFkZE9wdGlvbignZGVsZXRlJywgJ0RlbGV0ZSBGaWxlJylcbiAgICAgICAgLmFkZE9wdGlvbignbW92ZScsICdNb3ZlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCdjb3B5JywgJ0NvcHkgRmlsZScpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLm9wZXJhdGlvbiB8fCAnY3JlYXRlJylcbiAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMudXBkYXRlT3BlcmF0aW9uRm9ybSgpO1xuICAgICAgICB9KSk7XG5cbiAgICAvLyBPcGVyYXRpb24gZm9ybSBjb250YWluZXJcbiAgICBjb25zdCBmb3JtQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ29wZXJhdGlvbi1mb3JtJyB9KTtcbiAgICB0aGlzLnVwZGF0ZU9wZXJhdGlvbkZvcm0oKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlT3BlcmF0aW9uRm9ybSgpIHtcbiAgICBjb25zdCBmb3JtQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm9wZXJhdGlvbi1mb3JtJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCFmb3JtQ29udGFpbmVyKSByZXR1cm47XG4gICAgXG4gICAgZm9ybUNvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgY29uc3Qgb3BlcmF0aW9uID0gdGhpcy5vcGVyYXRpb24gfHwgJ2NyZWF0ZSc7XG4gICAgXG4gICAgLy8gRmlsZSBwYXRoIGlucHV0XG4gICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdGaWxlIFBhdGgnKVxuICAgICAgLnNldERlc2MoJ1BhdGggdG8gdGhlIGZpbGUgKGluY2x1ZGluZyBmaWxlbmFtZSknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcigncGF0aC90by9maWxlLm1kJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMuaW5pdGlhbFBhdGggfHwgJycpXG4gICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLmluaXRpYWxQYXRoID0gdmFsdWUpKTtcblxuICAgIC8vIEFkZGl0aW9uYWwgaW5wdXRzIGJhc2VkIG9uIG9wZXJhdGlvblxuICAgIGlmIChvcGVyYXRpb24gPT09ICdtb3ZlJyB8fCBvcGVyYXRpb24gPT09ICdjb3B5Jykge1xuICAgICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ05ldyBQYXRoJylcbiAgICAgICAgLnNldERlc2MoJ0Rlc3RpbmF0aW9uIHBhdGggZm9yIHRoZSBmaWxlJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCduZXcvcGF0aC90by9maWxlLm1kJykpO1xuICAgIH1cblxuICAgIGlmIChvcGVyYXRpb24gPT09ICdjcmVhdGUnIHx8IG9wZXJhdGlvbiA9PT0gJ3VwZGF0ZScpIHtcbiAgICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdDb250ZW50JylcbiAgICAgICAgLnNldERlc2MoJ0ZpbGUgY29udGVudCcpXG4gICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0YXJlYSA9PiB7XG4gICAgICAgICAgdGV4dGFyZWEuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpbGUgY29udGVudC4uLicpO1xuICAgICAgICAgIGlmIChvcGVyYXRpb24gPT09ICdjcmVhdGUnKSB7XG4gICAgICAgICAgICB0ZXh0YXJlYS5zZXRWYWx1ZSgnIyBOZXcgRmlsZVxcblxcbkNvbnRlbnQgZ29lcyBoZXJlLi4uJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBCYWNrdXAgb3B0aW9uXG4gICAgaWYgKG9wZXJhdGlvbiAhPT0gJ2NyZWF0ZScpIHtcbiAgICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdDcmVhdGUgQmFja3VwJylcbiAgICAgICAgLnNldERlc2MoJ0NyZWF0ZSBhIGJhY2t1cCBiZWZvcmUgcGVyZm9ybWluZyB0aGUgb3BlcmF0aW9uJylcbiAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRydWUpKTtcbiAgICB9XG5cbiAgICAvLyBFeGVjdXRlIGJ1dHRvblxuICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgLnNldEJ1dHRvblRleHQoYEV4ZWN1dGUgJHtvcGVyYXRpb24uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBvcGVyYXRpb24uc2xpY2UoMSl9YClcbiAgICAgICAgLnNldEN0YSgpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuZXhlY3V0ZU9wZXJhdGlvbigpKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVPcGVyYXRpb24oKSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uID0gdGhpcy5vcGVyYXRpb24gfHwgJ2NyZWF0ZSc7XG4gICAgY29uc3QgcGF0aElucHV0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignaW5wdXRbcGxhY2Vob2xkZXIqPVwicGF0aC90by9maWxlXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBuZXdQYXRoSW5wdXQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtwbGFjZWhvbGRlcio9XCJuZXcvcGF0aFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgY29udGVudFRleHRhcmVhID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgIGNvbnN0IGJhY2t1cFRvZ2dsZSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBpZiAoIXBhdGhJbnB1dD8udmFsdWUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgcGF0aCBpcyByZXF1aXJlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcXVlc3Q6IEZpbGVPcGVyYXRpb25SZXF1ZXN0ID0ge1xuICAgICAgb3BlcmF0aW9uOiBvcGVyYXRpb24gYXMgYW55LFxuICAgICAgZmlsZV9wYXRoOiBwYXRoSW5wdXQudmFsdWUsXG4gICAgICBiYWNrdXA6IGJhY2t1cFRvZ2dsZT8uY2hlY2tlZCA/PyB0cnVlXG4gICAgfTtcblxuICAgIGlmIChuZXdQYXRoSW5wdXQ/LnZhbHVlKSB7XG4gICAgICByZXF1ZXN0Lm5ld19wYXRoID0gbmV3UGF0aElucHV0LnZhbHVlO1xuICAgIH1cblxuICAgIGlmIChjb250ZW50VGV4dGFyZWE/LnZhbHVlKSB7XG4gICAgICByZXF1ZXN0LmNvbnRlbnQgPSBjb250ZW50VGV4dGFyZWEudmFsdWU7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIG5ldyBOb3RpY2UoYFBlcmZvcm1pbmcgJHtvcGVyYXRpb259Li4uYCk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnBlcmZvcm1GaWxlT3BlcmF0aW9uKHJlcXVlc3QpO1xuICAgICAgXG4gICAgICBuZXcgTm90aWNlKGDinIUgJHtvcGVyYXRpb259IHN1Y2Nlc3NmdWw6ICR7cmVzdWx0Lm1lc3NhZ2V9YCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgbmV3IE5vdGljZShg4p2MICR7b3BlcmF0aW9ufSBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgRWRpdG9yLCBNYXJrZG93blZpZXcsIFRGaWxlLCBFZGl0b3JQb3NpdGlvbiwgcmVxdWVzdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5nVGFiLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFVTFRQSUxPVCwgVmF1bHRQaWxvdFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIsIFZhdWx0UGlsb3RGdWxsVGFiVmlldyB9IGZyb20gJy4vZnVsbC10YWItdmlldyc7XG5pbXBvcnQgeyBDaGF0TW9kYWwgfSBmcm9tICcuL2NoYXQtbW9kYWwnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RhbCB9IGZyb20gJy4vd29ya2Zsb3ctbW9kYWwnO1xuaW1wb3J0IHsgRXZvQWdlbnRYQ2xpZW50IH0gZnJvbSAnLi9hcGktY2xpZW50JztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncywgQ29waWxvdFJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmZXRjaFNjaGVkdWxlLCBpbmplY3RTY2hlZHVsZSwgdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duLCBmaW5kU2NoZWR1bGVTZWN0aW9uLCBmaW5kUGxhblNlY3Rpb24gfSBmcm9tICcuL3BsYW5uZXInO1xuaW1wb3J0IHsgcGxhbk15RGF5RGVidWdnZXIgfSBmcm9tICcuL3BsYW4tbXktZGF5LWRlYnVnJztcbmltcG9ydCB7IHNldEFwcCB9IGZyb20gJy4vdmF1bHQtdXRpbHMnO1xuaW1wb3J0IHsgVmF1bHRNYW5hZ2VtZW50Q2xpZW50IH0gZnJvbSAnLi92YXVsdC1hcGktY2xpZW50JztcbmltcG9ydCB7IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzIH0gZnJvbSAnLi92YXVsdC1jb21tYW5kcyc7XG5pbXBvcnQgeyBNb2RlbFNlbGVjdGlvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL01vZGVsU2VsZWN0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudERldGVjdG9yIH0gZnJvbSAnLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcbmltcG9ydCB7IFxuICBWYXVsdFN0cnVjdHVyZU1vZGFsLCBcbiAgU21hcnRTZWFyY2hNb2RhbCwgXG4gIEZpbGVPcGVyYXRpb25zTW9kYWxcbn0gZnJvbSAnLi92YXVsdC1tb2RhbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYXVsdFBpbG90UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3MhOiBWYXVsdFBpbG90U2V0dGluZ3M7XG4gIGFwaUNsaWVudCE6IEV2b0FnZW50WENsaWVudDtcbiAgdmF1bHRDbGllbnQhOiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIG1vZGVsU2VsZWN0aW9uU2VydmljZT86IE1vZGVsU2VsZWN0aW9uU2VydmljZTtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb3BpbG90RW5hYmxlZCA9IGZhbHNlO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhcHAgaW5zdGFuY2UgZm9yIHZhdWx0LXV0aWxzXG4gICAgc2V0QXBwKHRoaXMuYXBwKTtcblxuICAgIC8vIEluaXRpYWxpemUgQVBJIGNsaWVudFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcblxuICAgIC8vIEluaXRpYWxpemUgdmF1bHQgbWFuYWdlbWVudCBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVWYXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgbW9kZWwgc2VsZWN0aW9uIGlmIGVuYWJsZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCkge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplTW9kZWxTZWxlY3Rpb24oKTtcbiAgICB9XG5cbiAgICAvLyBUZXN0IGJhY2tlbmQgY29ubmVjdGlvblxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWFpbiBoZWFsdGggY2hlY2sgZmFpbGVkIHdpdGggNDAwLCB0cnlpbmcgYWx0ZXJuYXRpdmUgbWV0aG9kJyk7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KchSBWYXVsdFBpbG90IGNvbm5lY3RlZCB0byBFdm9BZ2VudFgnLCAzMDAwKTtcbiAgICAgICAgLy8gQ29ubmVjdCBXZWJTb2NrZXQgaWYgZW5hYmxlZFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQpIHtcbiAgICAgICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGZhaWxlZDonLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBFdm9BZ2VudFggYmFja2VuZCBvZmZsaW5lIC0gc29tZSBmZWF0dXJlcyBtYXkgbm90IHdvcmsnLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSGVhbHRoIGNoZWNrIGVycm9yOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBDYW5ub3QgY29ubmVjdCB0byBFdm9BZ2VudFggYmFja2VuZCcsIDUwMDApO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdGVyIHZpZXdzXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfVkFVTFRQSUxPVCxcbiAgICAgIChsZWFmKSA9PiBuZXcgVmF1bHRQaWxvdFZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuICAgIFxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RGdWxsVGFiVmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICBjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ2JvdCcsICdWYXVsdFBpbG90JywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgaWYgKGV2dC5jdHJsS2V5IHx8IGV2dC5tZXRhS2V5KSB7XG4gICAgICAgIC8vIE9wZW4gZnVsbCB0YWIgdmlldyBvbiBDdHJsL0NtZCArIGNsaWNrXG4gICAgICAgIHRoaXMuYWN0aXZhdGVGdWxsVGFiVmlldygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGVmYXVsdCBhY3Rpb246IG9wZW4gY2hhdCBtb2RhbFxuICAgICAgICB0aGlzLm9wZW5DaGF0TW9kYWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtcmliYm9uLWNsYXNzJyk7XG4gICAgcmliYm9uSWNvbkVsLnRpdGxlID0gJ1ZhdWx0UGlsb3QgKEN0cmwrY2xpY2sgZm9yIERhc2hib2FyZCknO1xuXG4gICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLWNoYXQnLFxuICAgICAgbmFtZTogJ09wZW4gQ2hhdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuQ2hhdE1vZGFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2V4ZWN1dGUtd29ya2Zsb3cnLFxuICAgICAgbmFtZTogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlbldvcmtmbG93TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYW5hbHl6ZS12YXVsdCcsXG4gICAgICBuYW1lOiAnQW5hbHl6ZSBDdXJyZW50IFZhdWx0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFuYWx5emVWYXVsdCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdjb3BpbG90LWNvbXBsZXRlJyxcbiAgICAgIG5hbWU6ICdHZXQgQUkgQ29tcGxldGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLmdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3F1aWNrLWNoYXQnLFxuICAgICAgbmFtZTogJ1F1aWNrIENoYXQgd2l0aCBTZWxlY3Rpb24nLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5xdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tdGFza3MnLFxuICAgICAgbmFtZTogJ1BsYW4gVGFza3MgZnJvbSBOb3RlJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMucGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi1teS1kYXknLFxuICAgICAgbmFtZTogJ1BsYW4gTXkgRGF5JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnBsYW5NeURheSgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLW15LWRheS1kZWJ1ZycsXG4gICAgICBuYW1lOiAnUGxhbiBNeSBEYXkgLSBEZWJ1ZyBDb25uZWN0aW9uJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmRlYnVnUGxhbk15RGF5KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Rlc3QtbW9kZWwtc2VsZWN0aW9uJyxcbiAgICAgIG5hbWU6ICdUZXN0IFNtYXJ0IE1vZGVsIFNlbGVjdGlvbicsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy50ZXN0TW9kZWxTZWxlY3Rpb24oKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2hvdy1tb2RlbC1oZWFsdGgnLFxuICAgICAgbmFtZTogJ1Nob3cgTW9kZWwgSGVhbHRoIFN0YXR1cycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zaG93TW9kZWxIZWFsdGgoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi12YXVsdHBpbG90LXZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBWaWV3JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLXZhdWx0cGlsb3QtZnVsbC10YWInLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBEYXNoYm9hcmQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVGdWxsVGFiVmlldygpXG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gICAgdGhpcy5yZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG5cbiAgICAvLyBSZWdpc3RlciBlZGl0b3IgZXZlbnRzIGZvciBjb3BpbG90XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCAmJiB0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZhdWx0UGlsb3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gIH1cblxuICBhc3luYyBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICBhd2FpdCB0aGlzLmRpc2Nvbm5lY3RNb2RlbFNlbGVjdGlvbigpO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IE1hbmFnZW1lbnRcbiAgY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHJldHVybjtcblxuICAgIHRoaXMuYXBpQ2xpZW50LmNvbm5lY3RXZWJTb2NrZXQoe1xuICAgICAgb25DaGF0OiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgcmVhbC10aW1lIGNoYXQgdXBkYXRlc1xuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNoYXQgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uV29ya2Zsb3dQcm9ncmVzczogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3c6ICR7ZGF0YS5zdGVwfWAsIDIwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29waWxvdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGNvcGlsb3Qgc3VnZ2VzdGlvbnNcbiAgICAgICAgdGhpcy5oYW5kbGVDb3BpbG90U3VnZ2VzdGlvbihkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvblZhdWx0U3luYzogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHZhdWx0IHN5bmNocm9uaXphdGlvblxuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHQgc3luYyB1cGRhdGU6JywgZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25JbnRlbnREZWJ1ZzogKGRlYnVnKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnRlbnQgZGVidWcgaW5mbyAob25seSBpbiBkZWJ1ZyBtb2RlKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcgJiYgdGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSW50ZW50IGRlYnVnOicsIGRlYnVnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICBuZXcgTm90aWNlKGBXZWJTb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCwgNTAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGNvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25EaXNjb25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICB0aGlzLmFwaUNsaWVudC5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldENvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIE1vZGFsIE1hbmFnZW1lbnRcbiAgb3BlbkNoYXRNb2RhbCgpIHtcbiAgICBuZXcgQ2hhdE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICBvcGVuV29ya2Zsb3dNb2RhbCgpIHtcbiAgICBuZXcgV29ya2Zsb3dNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgLy8gQ29tbWFuZCBJbXBsZW1lbnRhdGlvbnNcbiAgYXN5bmMgYW5hbHl6ZVZhdWx0KCkge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ0FuYWx5emluZyB2YXVsdC4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIC8vIEluY2x1ZGUgdXAgdG8gMTAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAxMCkpIHtcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICBjb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7ZmlsZUNvbnRlbnR9XFxuXFxuYDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5hbmFseXplVmF1bHRDb250ZXh0KHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYW5hbHlzaXNfdHlwZTogJ2luc2lnaHRzJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuYWx5c2lzIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0IEFuYWx5c2lzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgYW5hbHlzaXNDb250ZW50ID0gYCMgVmF1bHQgQW5hbHlzaXMgLSAke3RpbWVzdGFtcH1cXG5cXG5gO1xuICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEFuYWx5c2lzXFxuXFxuJHtyZXNwb25zZS5kYXRhLmFuYWx5c2lzfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnNpZ2h0cyAmJiByZXNwb25zZS5kYXRhLmluc2lnaHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEtleSBJbnNpZ2h0c1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5mb3JFYWNoKGluc2lnaHQgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7aW5zaWdodH1cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSAnXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucyAmJiByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBSZWNvbW1lbmRhdGlvbnNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke3JlY31cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBhbmFseXNpc0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBWYXVsdCBhbmFseXNpcyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdBbmFseXNpcyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYEFuYWx5c2lzIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0NvcGlsb3QgaXMgZGlzYWJsZWQgaW4gc2V0dGluZ3MnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgdGV4dEJlZm9yZUN1cnNvciA9IGN1cnJlbnRMaW5lLnN1YnN0cmluZygwLCBjdXJzb3IuY2gpO1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICAvLyBDbGllbnQtc2lkZSB2YWxpZGF0aW9uIHRvIHByZXZlbnQgNDIyIGVycm9yc1xuICAgIGlmICghZnVsbFRleHQgfHwgZnVsbFRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnQ2Fubm90IGNvbXBsZXRlIGVtcHR5IHRleHQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bicsXG4gICAgICAgIGNvbnRleHQ6IHRleHRCZWZvcmVDdXJzb3JcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCBjb21wbGV0aW9uIGF0IGN1cnNvclxuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKHJlc3BvbnNlLmRhdGEuY29tcGxldGlvbiwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQ29tcGxldGlvbiBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBxdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyB0ZXh0IHNlbGVjdGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY2hhdCh7XG4gICAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgZXhwbGFpbiBvciBhbmFseXplIHRoaXMgdGV4dDogXCIke3NlbGVjdGlvbn1cImAsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgcmVzcG9uc2UgYmVsb3cgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgICAgIGNvbnN0IG5ld0xpbmUgPSBgXFxuXFxuKipWYXVsdFBpbG90IEFuYWx5c2lzOioqXFxuJHtyZXNwb25zZS5kYXRhLnJlc3BvbnNlfVxcblxcbmA7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3TGluZSwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQW5hbHlzaXMgaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gY29udGVudCB0byBhbmFseXplJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgdGFza3MuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnBsYW5UYXNrcyh7XG4gICAgICAgIGdvYWw6IGBDcmVhdGUgYSB0YXNrIHBsYW4gYmFzZWQgb24gdGhpcyBub3RlOiAke2FjdGl2ZUZpbGU/Lm5hbWUgfHwgJ1VudGl0bGVkJ31gLFxuICAgICAgICBjb250ZXh0OiBjb250ZW50LFxuICAgICAgICB0aW1lZnJhbWU6ICcxIHdlZWsnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgdGFzayBwbGFuIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFRhc2sgUGxhbiAtICR7YWN0aXZlRmlsZT8uYmFzZW5hbWUgfHwgJ1VudGl0bGVkJ30gLSAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRhc2tDb250ZW50ID0gYCMgJHtyZXNwb25zZS5kYXRhLnBsYW4udGl0bGV9XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7cmVzcG9uc2UuZGF0YS5wbGFuLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAqKkVzdGltYXRlZCBEdXJhdGlvbjoqKiAke3Jlc3BvbnNlLmRhdGEucGxhbi5lc3RpbWF0ZWRfZHVyYXRpb259XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnBsYW4udGFza3MgJiYgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgVGFza3NcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5mb3JFYWNoKCh0YXNrOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGFzay5zdGF0dXMgPT09ICdjb21wbGV0ZWQnID8gJ1t4XScgOiAnWyBdJztcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAke2NoZWNrYm94fSAqKiR7dGFzay50aXRsZX0qKiAoJHt0YXNrLnByaW9yaXR5fSBwcmlvcml0eSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgICR7dGFzay5kZXNjcmlwdGlvbn1cXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgICpFc3RpbWF0ZWQgdGltZTogJHt0YXNrLmVzdGltYXRlZF90aW1lfSpcXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcyAmJiByZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAjIyBNaWxlc3RvbmVzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMuZm9yRWFjaCgobWlsZXN0b25lOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAtICoqJHttaWxlc3RvbmUudGl0bGV9KiogKCR7bWlsZXN0b25lLnRhcmdldF9kYXRlfSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgJHttaWxlc3RvbmUuZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgdGFza0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW4gc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnVGFzayBwbGFubmluZyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFRhc2sgcGxhbm5pbmcgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhbk15RGF5KCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIFtQbGFuIE15IERheV0gQ29tbWFuZCBzdGFydGVkJyk7XG4gICAgXG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBbUGxhbiBNeSBEYXldIE5vIGFjdGl2ZSBmaWxlIGZvdW5kJyk7XG4gICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgbm90ZeKAlG9wZW4gdG9kYXlcXCdzIGRhaWx5IG5vdGUgZmlyc3QuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ/Cfk4EgW1BsYW4gTXkgRGF5XSBBY3RpdmUgZmlsZTonLCB7XG4gICAgICBuYW1lOiBhY3RpdmVGaWxlLm5hbWUsXG4gICAgICBwYXRoOiBhY3RpdmVGaWxlLnBhdGgsXG4gICAgICBleHRlbnNpb246IGFjdGl2ZUZpbGUuZXh0ZW5zaW9uXG4gICAgfSk7XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdQbGFubmluZyB5b3VyIGRheSB3aXRoIEFJLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/Cfk5YgW1BsYW4gTXkgRGF5XSBSZWFkaW5nIGZpbGUgY29udGVudC4uLicpO1xuICAgICAgXG4gICAgICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSBjb250ZW50XG4gICAgICBjb25zdCBmaWxlVGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OdIFtQbGFuIE15IERheV0gRmlsZSBjb250ZW50IHJlYWQ6Jywge1xuICAgICAgICBsZW5ndGg6IGZpbGVUZXh0Lmxlbmd0aCxcbiAgICAgICAgaGFzQ29udGVudDogZmlsZVRleHQudHJpbSgpLmxlbmd0aCA+IDAsXG4gICAgICAgIGZpcnN0TGluZTogZmlsZVRleHQuc3BsaXQoJ1xcbicpWzBdLFxuICAgICAgICBsaW5lQ291bnQ6IGZpbGVUZXh0LnNwbGl0KCdcXG4nKS5sZW5ndGhcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIENoZWNraW5nIEFQSSBjbGllbnQuLi4nKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SXIFtQbGFuIE15IERheV0gQVBJIGNsaWVudCBzdGF0dXM6Jywge1xuICAgICAgICBleGlzdHM6ICEhdGhpcy5hcGlDbGllbnQsXG4gICAgICAgIHR5cGU6IHR5cGVvZiB0aGlzLmFwaUNsaWVudCxcbiAgICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuYXBpQ2xpZW50ID8gJ2F2YWlsYWJsZScgOiAnbm90IGF2YWlsYWJsZSdcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXRoaXMuYXBpQ2xpZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gJ0FQSSBjbGllbnQgbm90IGluaXRpYWxpemVkLiBDaGVjayBWYXVsdFBpbG90IHNldHRpbmdzIGFuZCBjb25uZWN0aW9uLic7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEVycm9yOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/Cfk6QgW1BsYW4gTXkgRGF5XSBGZXRjaGluZyBzY2hlZHVsZSBmcm9tIEV2b0FnZW50WC4uLicpO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCBzY2hlZHVsZSBmcm9tIEV2b0FnZW50WCBpbnN0ZWFkIG9mIGxvY2FsaG9zdDozMDAwXG4gICAgICBjb25zdCB7IHNjaGVkdWxlTWFya2Rvd24sIGhlYWRsaW5lIH0gPSBhd2FpdCBmZXRjaFNjaGVkdWxlKGZpbGVUZXh0LCB0aGlzLmFwaUNsaWVudCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIFtQbGFuIE15IERheV0gU2NoZWR1bGUgcmVjZWl2ZWQ6Jywge1xuICAgICAgICBtYXJrZG93bkxlbmd0aDogc2NoZWR1bGVNYXJrZG93bi5sZW5ndGgsXG4gICAgICAgIGhlYWRsaW5lOiBoZWFkbGluZSxcbiAgICAgICAgZmlyc3RMaW5lOiBzY2hlZHVsZU1hcmtkb3duLnNwbGl0KCdcXG4nKVswXVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBWYWxpZGF0aW5nIHNjaGVkdWxlLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSByZXR1cm5lZCBzY2hlZHVsZVxuICAgICAgaWYgKCF2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bikpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAnSW52YWxpZCBzY2hlZHVsZSBkYXRhIHJlY2VpdmVkIGZyb20gQVBJJztcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gVmFsaWRhdGlvbiBmYWlsZWQ6Jywge1xuICAgICAgICAgIHNjaGVkdWxlTWFya2Rvd246IHNjaGVkdWxlTWFya2Rvd24uc3Vic3RyaW5nKDAsIDIwMCksXG4gICAgICAgICAgbGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLmxlbmd0aFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ/Cfk50gW1BsYW4gTXkgRGF5XSBJbmplY3Rpbmcgc2NoZWR1bGUgaW50byBub3RlLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIG5vdGUgYWxyZWFkeSBoYXMgYSBwbGFuIHNlY3Rpb24gKGNvbW1lbnQgd3JhcHBlcikgb3Igc2NoZWR1bGUgc2VjdGlvblxuICAgICAgY29uc3QgZXhpc3RpbmdQbGFuU2VjdGlvbiA9IGZpbmRQbGFuU2VjdGlvbihmaWxlVGV4dCk7XG4gICAgICBjb25zdCBleGlzdGluZ1NjaGVkdWxlU2VjdGlvbiA9IGZpbmRTY2hlZHVsZVNlY3Rpb24oZmlsZVRleHQpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEV4aXN0aW5nIHNlY3Rpb25zOicsIHtcbiAgICAgICAgaGFzUGxhbldyYXBwZXI6ICEhZXhpc3RpbmdQbGFuU2VjdGlvbixcbiAgICAgICAgaGFzU2NoZWR1bGVTZWN0aW9uOiAhIWV4aXN0aW5nU2NoZWR1bGVTZWN0aW9uLFxuICAgICAgICBwbGFuQ29udGVudDogZXhpc3RpbmdQbGFuU2VjdGlvbj8uWzJdPy5zdWJzdHJpbmcoMCwgNTApLFxuICAgICAgICBzY2hlZHVsZUhlYWRpbmc6IGV4aXN0aW5nU2NoZWR1bGVTZWN0aW9uPy5bMV0/LnN1YnN0cmluZygwLCA1MClcbiAgICAgIH0pO1xuXG4gICAgICAvLyBJbmplY3QgdGhlIHNjaGVkdWxlIGludG8gdGhlIG5vdGVcbiAgICAgIGNvbnN0IHVwZGF0ZWRUZXh0ID0gaW5qZWN0U2NoZWR1bGUoZmlsZVRleHQsIHNjaGVkdWxlTWFya2Rvd24pO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+SviBbUGxhbiBNeSBEYXldIFVwZGF0aW5nIGZpbGUuLi4nLCB7XG4gICAgICAgIG9yaWdpbmFsTGVuZ3RoOiBmaWxlVGV4dC5sZW5ndGgsXG4gICAgICAgIHVwZGF0ZWRMZW5ndGg6IHVwZGF0ZWRUZXh0Lmxlbmd0aCxcbiAgICAgICAgY2hhbmdlZDogZmlsZVRleHQgIT09IHVwZGF0ZWRUZXh0XG4gICAgICB9KTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBmaWxlXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZFRleHQpO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gRmlsZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuXG4gICAgICAvLyBIaWRlIHRoZSBwcm9ncmVzcyBub3RpY2VcbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIC8vIFNob3cgc3VjY2VzcyBub3RpY2VcbiAgICAgIGNvbnN0IHN1Y2Nlc3NNZXNzYWdlID0gaGVhZGxpbmUgPyBgJHtoZWFkbGluZX0g4pyFYCA6ICdTY2hlZHVsZSBpbnNlcnRlZCDinIUnO1xuICAgICAgY29uc29sZS5sb2coJ/CfjokgW1BsYW4gTXkgRGF5XSBTdWNjZXNzOicsIHN1Y2Nlc3NNZXNzYWdlKTtcbiAgICAgIG5ldyBOb3RpY2Uoc3VjY2Vzc01lc3NhZ2UpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIE9wZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5lcnJvcign8J+UjSBbUGxhbiBNeSBEYXldIEVycm9yIGRldGFpbHM6Jywge1xuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnLFxuICAgICAgICB0eXBlOiB0eXBlb2YgZXJyb3IsXG4gICAgICAgIG5hbWU6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5uYW1lIDogJ1Vua25vd24nXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0eXBlcyBvZiBlcnJvcnMgZnJvbSBFdm9BZ2VudFhcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gQW5hbHl6aW5nIGVycm9yIG1lc3NhZ2U6JywgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0FQSSBjbGllbnQgbm90IGluaXRpYWxpemVkJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBBUEkgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBWYXVsdFBpbG90IG5vdCBjb25uZWN0ZWQgdG8gRXZvQWdlbnRYLiBDaGVjayBzZXR0aW5ncyBhbmQgcmVzdGFydCBwbHVnaW4uJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdkb2VzIG5vdCBoYXZlIHBsYW5UYXNrcyBtZXRob2QnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEFQSSBjbGllbnQgbWlzc2luZyBwbGFuVGFza3MgbWV0aG9kJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IEV2b0FnZW50WCBBUEkgY2xpZW50IG91dGRhdGVkLiBQbGVhc2UgdXBkYXRlIFZhdWx0UGlsb3QgcGx1Z2luLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnSlNPTicpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnSW52YWxpZCBzY2hlZHVsZSBkYXRhJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdCcpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdCBmcm9tIEV2b0FnZW50WCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gTmV0d29yayBlcnJvcicpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBVbmFibGUgdG8gY29ubmVjdCB0byBFdm9BZ2VudFggc2VydmVyLiBDaGVjayB5b3VyIGNvbm5lY3Rpb24gYW5kIHNlcnZlciBzdGF0dXMuJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGYWlsZWQgdG8gZ2VuZXJhdGUgc2NoZWR1bGUnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ1NjaGVkdWxlIGZldGNoIGZhaWxlZCcpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gU2NoZWR1bGUgZ2VuZXJhdGlvbiBmYWlsZWQnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogRXZvQWdlbnRYIHRhc2sgcGxhbm5pbmcgZmFpbGVkLiBDaGVjayBzZXJ2ZXIgbG9ncyBmb3IgZGV0YWlscy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ05vIGRhdGEgaW4gQVBJIHJlc3BvbnNlJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFbXB0eSBBUEkgcmVzcG9uc2UnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogRXZvQWdlbnRYIHJldHVybmVkIGVtcHR5IHJlc3BvbnNlLiBUcnkgYWdhaW4gb3IgY2hlY2sgc2VydmVyIHN0YXR1cy4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBVbmhhbmRsZWQgZXJyb3InKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGBQbGFubmluZyBlcnJvcjogJHtlcnJvck1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDEwMCl9JHtlcnJvck1lc3NhZ2UubGVuZ3RoID4gMTAwID8gJy4uLicgOiAnJ31gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gTm9uLUVycm9yIG9iamVjdCB0aHJvd24nKTtcbiAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IFVua25vd24gZXJyb3Igb2NjdXJyZWQgd2l0aCBFdm9BZ2VudFgnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWx3YXlzIGxvZyB0aGUgZnVsbCBlcnJvciBmb3IgZGVidWdnaW5nXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEZ1bGwgZXJyb3IgbG9nIGNvbXBsZXRlZCcpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlYnVnUGxhbk15RGF5KCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheSBEZWJ1Z10gU3RhcnRpbmcgY29tcHJlaGVuc2l2ZSBkZWJ1Zy4uLicpO1xuICAgIHBsYW5NeURheURlYnVnZ2VyLmNsZWFyTG9ncygpO1xuICAgIFxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1J1bm5pbmcgUGxhbiBNeSBEYXkgZGlhZ25vc3RpY3MuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBUZXN0IDE6IENoZWNrIGFjdGl2ZSBmaWxlXG4gICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgIHBsYW5NeURheURlYnVnZ2VyLmxvZygn8J+TgSBBY3RpdmUgZmlsZSBjaGVjaycsIHtcbiAgICAgICAgaGFzQWN0aXZlRmlsZTogISFhY3RpdmVGaWxlLFxuICAgICAgICBmaWxlTmFtZTogYWN0aXZlRmlsZT8ubmFtZSxcbiAgICAgICAgZmlsZUV4dGVuc2lvbjogYWN0aXZlRmlsZT8uZXh0ZW5zaW9uXG4gICAgICB9KTtcblxuICAgICAgLy8gVGVzdCAyOiBBbmFseXplIEFQSSBjbGllbnRcbiAgICAgIGNvbnN0IGFwaUFuYWx5c2lzID0gcGxhbk15RGF5RGVidWdnZXIuYW5hbHl6ZUFwaUNsaWVudCh0aGlzLmFwaUNsaWVudCk7XG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ/CflJcgQVBJIGNsaWVudCBhbmFseXNpcycsIGFwaUFuYWx5c2lzKTtcblxuICAgICAgLy8gVGVzdCAzOiBUZXN0IEV2b0FnZW50WCBjb25uZWN0aW9uXG4gICAgICBpZiAodGhpcy5hcGlDbGllbnQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvblRlc3QgPSBhd2FpdCBwbGFuTXlEYXlEZWJ1Z2dlci50ZXN0Q29ubmVjdGlvbih0aGlzLmFwaUNsaWVudCk7XG4gICAgICAgIHBsYW5NeURheURlYnVnZ2VyLmxvZygn8J+MkCBDb25uZWN0aW9uIHRlc3QgcmVzdWx0JywgY29ubmVjdGlvblRlc3QpO1xuXG4gICAgICAgIC8vIFRlc3QgNDogVGVzdCB0YXNrIHBsYW5uaW5nIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgaWYgKGNvbm5lY3Rpb25UZXN0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zdCBwbGFubmluZ1Rlc3QgPSBhd2FpdCBwbGFuTXlEYXlEZWJ1Z2dlci50ZXN0VGFza1BsYW5uaW5nKFxuICAgICAgICAgICAgdGhpcy5hcGlDbGllbnQsIFxuICAgICAgICAgICAgJ1Rlc3Qgbm90ZSB3aXRoIHNvbWUgdGFza3M6XFxuLSBXcml0ZSBjb2RlXFxuLSBUZXN0IGZ1bmN0aW9uYWxpdHlcXG4tIFJldmlldyByZXN1bHRzJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgcGxhbk15RGF5RGVidWdnZXIubG9nKCfwn5OLIFRhc2sgcGxhbm5pbmcgdGVzdCByZXN1bHQnLCBwbGFubmluZ1Rlc3QpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRlc3QgNTogQ2hlY2sgc2V0dGluZ3NcbiAgICAgIHBsYW5NeURheURlYnVnZ2VyLmxvZygn4pqZ77iPIFBsdWdpbiBzZXR0aW5ncycsIHtcbiAgICAgICAgYmFja2VuZFVybDogdGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLFxuICAgICAgICBoYXNBcGlLZXk6ICEhdGhpcy5zZXR0aW5ncy5hcGlLZXksXG4gICAgICAgIGRlYnVnTW9kZTogdGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGVcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICAvLyBTaG93IHJlc3VsdHMgaW4gYSBtb2RhbCBvciBjb25zb2xlXG4gICAgICBjb25zdCBsb2dzID0gcGxhbk15RGF5RGVidWdnZXIuZ2V0TG9ncygpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5IERlYnVnXSBDb21wbGV0ZSBkaWFnbm9zdGljIGxvZzonLCBsb2dzKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9nU3VtbWFyeSA9IGxvZ3Muc2xpY2UoLTUpLmpvaW4oJ1xcbicpOyAvLyBMYXN0IDUgZW50cmllc1xuICAgICAgbmV3IE5vdGljZShgRGVidWcgY29tcGxldGUhIENoZWNrIGNvbnNvbGUgZm9yIGZ1bGwgbG9ncy5cXG5cXG5MYXN0IGVudHJpZXM6XFxuJHtsb2dTdW1tYXJ5fWAsIDEwMDAwKTtcblxuICAgICAgLy8gQ3JlYXRlIGEgZGVidWcgZmlsZSBpZiBhY3RpdmUgZmlsZSBleGlzdHNcbiAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgIGNvbnN0IGRlYnVnQ29udGVudCA9IGAjIFBsYW4gTXkgRGF5IERlYnVnIFJlcG9ydFxcblxcbkdlbmVyYXRlZDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XFxuXFxuIyMgRGlhZ25vc3RpYyBSZXN1bHRzXFxuXFxuXFxgXFxgXFxgXFxuJHtwbGFuTXlEYXlEZWJ1Z2dlci5leHBvcnRMb2dzKCl9XFxuXFxgXFxgXFxgYDtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGBQbGFuIE15IERheSBEZWJ1ZyAtICR7RGF0ZS5ub3coKX0ubWRgLCBkZWJ1Z0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKCdEZWJ1ZyByZXBvcnQgc2F2ZWQgYXMgbmV3IG5vdGUhJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIHBsYW5NeURheURlYnVnZ2VyLmVycm9yKCdEZWJ1ZyBwcm9jZXNzIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYERlYnVnIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgYXdhaXQgcmlnaHRMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgdHlwZTogVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWF2ZXNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlRnVsbFRhYlZpZXcoKSB7XG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQik7XG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyB0YWIgaW4gdGhlIG1haW4gd29ya3NwYWNlXG4gICAgICBjb25zdCBuZXdMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuICAgICAgaWYgKG5ld0xlYWYpIHtcbiAgICAgICAgYXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCLFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT0gVkFVTFQgTUFOQUdFTUVOVCBNRVRIT0RTID09PVxuXG4gIGluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSByZXR1cm47XG4gICAgXG4gICAgdGhpcy52YXVsdENsaWVudCA9IG5ldyBWYXVsdE1hbmFnZW1lbnRDbGllbnQoXG4gICAgICB0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsXG4gICAgICB0aGlzLnNldHRpbmdzLmFwaUtleVxuICAgICk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHQgbWFuYWdlbWVudCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGVWYXVsdE1hbmFnZW1lbnQoKSB7XG4gICAgdGhpcy52YXVsdENsaWVudCA9IG51bGwgYXMgYW55O1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IG1hbmFnZW1lbnQgZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCkge1xuICAgIGNvbnN0IGNvbW1hbmRzID0gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcbiAgICBjb21tYW5kcy5mb3JFYWNoKGNvbW1hbmQgPT4ge1xuICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgLi4uY29tbWFuZCxcbiAgICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2s/LmJpbmQodGhpcyksXG4gICAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrPy5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1vZGFsIG9wZW5pbmcgbWV0aG9kcyBmb3IgdmF1bHQgbWFuYWdlbWVudFxuICBvcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCgpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBuZXcgVmF1bHRTdHJ1Y3R1cmVNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlblNtYXJ0U2VhcmNoTW9kYWwocXVlcnk/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBTbWFydFNlYXJjaE1vZGFsKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBpZiAocXVlcnkpIG1vZGFsLnNldEluaXRpYWxRdWVyeShxdWVyeSwgdHlwZSBhcyBhbnkpO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKHBhdGg/OiBzdHJpbmcsIG9wZXJhdGlvbj86IHN0cmluZykge1xuICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVPcGVyYXRpb25zTW9kYWwodGhpcy5hcHAsIHRoaXMpO1xuICAgIGlmIChwYXRoKSBtb2RhbC5zZXRJbml0aWFsUGF0aChwYXRoKTtcbiAgICBpZiAob3BlcmF0aW9uKSBtb2RhbC5zZXRPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCgpIHtcbiAgICBuZXcgTm90aWNlKCdWYXVsdCBvcmdhbml6ZXIgbW9kYWwgbm90IHlldCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgb3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsKCkge1xuICAgIG5ldyBOb3RpY2UoJ0JhdGNoIG9wZXJhdGlvbnMgbW9kYWwgbm90IHlldCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgLy8gPT09IEVORCBWQVVMVCBNQU5BR0VNRU5UIE1FVEhPRFMgPT09XG5cbiAgLy8gQXV0by1jb21wbGV0aW9uIGhhbmRsaW5nXG4gIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbS1jb250ZW50JykpIHJldHVybjtcblxuICAgIC8vIE9ubHkgdHJpZ2dlciBvbiBzcGVjaWZpYyBrZXlzIGFuZCBjb25kaXRpb25zXG4gICAgaWYgKCF0aGlzLnNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUoZXZlbnQpKSByZXR1cm47XG5cbiAgICAvLyBEZWJvdW5jZSBhdXRvLWNvbXBsZXRpb24gcmVxdWVzdHMgd2l0aCBsb25nZXIgZGVsYXlcbiAgICBjbGVhclRpbWVvdXQoKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0KTtcbiAgICAodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckF1dG9Db21wbGV0aW9uKCk7XG4gICAgfSwgMzAwMCk7IC8vIEluY3JlYXNlZCB0byAzIHNlY29uZHNcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZShldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIC8vIERvbid0IHRyaWdnZXIgb24gbmF2aWdhdGlvbiBvciBtb2RpZmllciBrZXlzXG4gICAgY29uc3Qgbm9uVHJpZ2dlcktleXMgPSBbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ1RhYicsICdTaGlmdCcsICdDb250cm9sJywgJ0FsdCcsICdNZXRhJywgJ0VzY2FwZSddO1xuICAgIGlmIChub25UcmlnZ2VyS2V5cy5pbmRleE9mKGV2ZW50LmtleSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgXG4gICAgLy8gT25seSB0cmlnZ2VyIGF0IHRoZSBlbmQgb2YgYSBsaW5lXG4gICAgaWYgKGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHNlbnRlbmNlLWVuZGluZyB0cmlnZ2Vyc1xuICAgIGNvbnN0IHRyaWdnZXJDaGFycyA9IFsnLicsICchJywgJz8nLCAnOicsICdcXG4nXTtcbiAgICBjb25zdCBsYXN0Q2hhciA9IGN1cnJlbnRMaW5lLnNsaWNlKC0xKTtcbiAgICBcbiAgICAvLyBUcmlnZ2VyIGFmdGVyIHNlbnRlbmNlIGVuZGluZ3Mgd2l0aCBzcGFjZVxuICAgIGlmICh0cmlnZ2VyQ2hhcnMuaW5kZXhPZihsYXN0Q2hhcikgIT09IC0xICYmIGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJpZ2dlciBhZnRlciBFbnRlciBrZXkgKG5ldyBsaW5lKVxuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgY3VycmVudExpbmUudHJpbSgpLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQXV0b0NvbXBsZXRpb24oKSB7XG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm47XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBcbiAgICAvLyBNb3JlIHJlc3RyaWN0aXZlIGNvbmRpdGlvbnMgZm9yIGF1dG8tY29tcGxldGlvblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkubGVuZ3RoIDwgMTAgfHwgY3Vyc29yLmNoICE9PSBjdXJyZW50TGluZS5sZW5ndGgpIHJldHVybjtcbiAgICBcbiAgICAvLyBQcmV2ZW50IDQyMiBlcnJvcnMgZnJvbSBlbXB0eSB0ZXh0XG4gICAgaWYgKCFmdWxsVGV4dCB8fCBmdWxsVGV4dC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBBZGQgY29vbGRvd24gdG8gcHJldmVudCB0b28gZnJlcXVlbnQgcmVxdWVzdHNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGxhc3RSZXF1ZXN0ID0gKHRoaXMgYXMgYW55KS5sYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCB8fCAwO1xuICAgIGlmIChub3cgLSBsYXN0UmVxdWVzdCA8IDEwMDAwKSByZXR1cm47IC8vIDEwIHNlY29uZCBjb29sZG93blxuICAgIFxuICAgICh0aGlzIGFzIGFueSkubGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QgPSBub3c7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIChmb3Igbm93IGp1c3Qgc2hvdyBmaXJzdCBzdWdnZXN0aW9uKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBBdXRvLXN1Z2dlc3Rpb246ICR7cmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9uc1swXX1gLCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBmYWlsIGZvciBhdXRvLWNvbXBsZXRpb25cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRvLWNvbXBsZXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YTogQ29waWxvdFJlc3BvbnNlKSB7XG4gICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjb3BpbG90IHN1Z2dlc3Rpb25zIGZyb20gV2ViU29ja2V0XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBuZXcgTm90aWNlKGBMaXZlIHN1Z2dlc3Rpb246ICR7ZGF0YS5jb21wbGV0aW9ufWAsIDIwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldHRpbmdzIG1hbmFnZW1lbnRcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFQSSBjbGllbnQgaWYgVVJMIGNoYW5nZWRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG4gICAgXG4gICAgLy8gUmVpbml0aWFsaXplIHZhdWx0IG1hbmFnZW1lbnQgaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlaW5pdGlhbGl6ZSBtb2RlbCBzZWxlY3Rpb24gaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5lbmFibGVkKSB7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVNb2RlbFNlbGVjdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmRpc2Nvbm5lY3RNb2RlbFNlbGVjdGlvbigpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZWNvbm5lY3QgV2ViU29ja2V0IGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgIXRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiB0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gTW9kZWwgU2VsZWN0aW9uIE1hbmFnZW1lbnQgTWV0aG9kc1xuICBhc3luYyBpbml0aWFsaXplTW9kZWxTZWxlY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5lbmFibGVkKSB7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIHNlbGVjdGlvbiBkaXNhYmxlZCBpbiBzZXR0aW5ncycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBlbnZpcm9ubWVudFxuICAgICAgY29uc3QgZW52ID0gRW52aXJvbm1lbnREZXRlY3Rvci5kZXRlY3QoKTtcbiAgICAgIGlmICghZW52Lmhhc0hUVFApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIVFRQIHRyYW5zcG9ydCBub3QgYXZhaWxhYmxlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgc2VydmljZSB3aXRoIGVycm9yIGJvdW5kYXJ5XG4gICAgICB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSA9IG5ldyBNb2RlbFNlbGVjdGlvblNlcnZpY2UoXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCxcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5kZXZwaXBlUGF0aCxcbiAgICAgICAge1xuICAgICAgICAgIG1vbml0b3JpbmdfaW50ZXJ2YWw6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24ubW9uaXRvcmluZ0ludGVydmFsLFxuICAgICAgICAgIGZhbGxiYWNrX2VuYWJsZWQ6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZmFsbGJhY2tFbmFibGVkLFxuICAgICAgICAgIGNhY2hlX2R1cmF0aW9uOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmNhY2hlRHVyYXRpb24sXG4gICAgICAgICAgcmV0cnlfYXR0ZW1wdHM6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24ucmV0cnlBdHRlbXB0cyxcbiAgICAgICAgICB0aW1lb3V0OiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnRpbWVvdXQsXG4gICAgICAgICAgZGVidWdfbW9kZTogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5kZWJ1Z01vZGVcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UudXBkYXRlUHJlZmVyZW5jZXMoe1xuICAgICAgICBwcmlvcml0eTogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi51c2VyUHJlZmVyZW5jZXMucHJpb3JpdHksXG4gICAgICAgIG1heF9jb3N0X3Blcl9yZXF1ZXN0OiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnVzZXJQcmVmZXJlbmNlcy5tYXhDb3N0UGVyUmVxdWVzdCxcbiAgICAgICAgcHJlZmVycmVkX3Byb3ZpZGVyczogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi51c2VyUHJlZmVyZW5jZXMucHJlZmVycmVkUHJvdmlkZXJzLFxuICAgICAgICBmYWxsYmFja19lbmFibGVkOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmZhbGxiYWNrRW5hYmxlZCxcbiAgICAgICAgcXVhbGl0eV90aHJlc2hvbGQ6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udXNlclByZWZlcmVuY2VzLnF1YWxpdHlUaHJlc2hvbGQsXG4gICAgICAgIHRpbWVvdXRfcHJlZmVyZW5jZTogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi50aW1lb3V0XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UuaW5pdGlhbGl6ZSgpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsU2VsZWN0aW9uU2VydmljZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH1cblxuICAgICAgbmV3IE5vdGljZSgn8J+kliBTbWFydCBtb2RlbCBzZWxlY3Rpb24gZW5hYmxlZCcsIDMwMDApO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIE1vZGVsU2VsZWN0aW9uU2VydmljZTonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIFNob3cgdXNlci1mcmllbmRseSBlcnJvciBtZXNzYWdlXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbm90IGFjY2Vzc2libGUnKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBDYW5ub3QgY29ubmVjdCB0byBBSSBzZXJ2aWNlIC0gdXNpbmcgZGVmYXVsdCBtb2RlbHMnLCA1MDAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0cmFuc3BvcnQgbm90IGF2YWlsYWJsZScpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIE1vZGVsIHNlbGVjdGlvbiBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnLCA1MDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gTW9kZWwgc2VsZWN0aW9uIHVuYXZhaWxhYmxlIC0gdXNpbmcgZGVmYXVsdCBtb2RlbHMnLCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3RNb2RlbFNlbGVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnTW9kZWxTZWxlY3Rpb25TZXJ2aWNlIGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkaXNjb25uZWN0aW5nIE1vZGVsU2VsZWN0aW9uU2VydmljZTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdGVzdE1vZGVsU2VsZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ+KdjCBNb2RlbCBzZWxlY3Rpb24gc2VydmljZSBub3QgaW5pdGlhbGl6ZWQnLCA1MDAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCfwn6SWIFRlc3RpbmcgbW9kZWwgc2VsZWN0aW9uLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdGFza3MgPSBbXG4gICAgICAgIHsgdHlwZTogJ3RleHQtZ2VuZXJhdGlvbicsIHF1YWxpdHk6ICdtZWRpdW0nIGFzIGNvbnN0IH0sXG4gICAgICAgIHsgdHlwZTogJ2NvZGUtZ2VuZXJhdGlvbicsIHF1YWxpdHk6ICdoaWdoJyBhcyBjb25zdCB9LFxuICAgICAgICB7IHR5cGU6ICdjaGF0JywgcXVhbGl0eTogJ2xvdycgYXMgY29uc3QgfSxcbiAgICAgICAgeyB0eXBlOiAnc3VtbWFyaXphdGlvbicsIHF1YWxpdHk6ICdtZWRpdW0nIGFzIGNvbnN0IH1cbiAgICAgIF07XG5cbiAgICAgIGxldCByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5zZWxlY3RGb3JUYXNrKHRhc2sudHlwZSwgdGFzay5xdWFsaXR5KTtcbiAgICAgICAgICByZXN1bHRzLnB1c2goYOKchSAke3Rhc2sudHlwZX06ICR7c2VsZWN0aW9uLnNlbGVjdGVkX21vZGVsLm5hbWV9ICgkJHtzZWxlY3Rpb24uZXN0aW1hdGVkX2Nvc3QudG9GaXhlZCg0KX0pYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGDinYwgJHt0YXNrLnR5cGV9OiBGYWlsZWQgLSAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBjb25zdCByZXN1bHRUZXh0ID0gcmVzdWx0cy5qb2luKCdcXG4nKTtcbiAgICAgIG5ldyBOb3RpY2UoYE1vZGVsIFNlbGVjdGlvbiBUZXN0IFJlc3VsdHM6XFxuJHtyZXN1bHRUZXh0fWAsIDEwMDAwKTtcblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzZWxlY3Rpb24gdGVzdCByZXN1bHRzOicsIHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShg4p2MIE1vZGVsIHNlbGVjdGlvbiB0ZXN0IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLCA1MDAwKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzaG93TW9kZWxIZWFsdGgoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgbmV3IE5vdGljZSgn4p2MIE1vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIG5vdCBpbml0aWFsaXplZCcsIDUwMDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ/Cfj6UgQ2hlY2tpbmcgbW9kZWwgaGVhbHRoLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgaGVhbHRoID0gYXdhaXQgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UuZ2V0TW9kZWxIZWFsdGgoKTtcbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKGhlYWx0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIE5vIG1vZGVsIGhlYWx0aCBpbmZvcm1hdGlvbiBhdmFpbGFibGUnLCA1MDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBoZWFsdGhJbmZvID0gaGVhbHRoLm1hcChoID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gaC5zdGF0dXMgPT09ICdoZWFsdGh5JyA/ICfinIUnIDogaC5zdGF0dXMgPT09ICdkZWdyYWRlZCcgPyAn4pqg77iPJyA6ICfinYwnO1xuICAgICAgICByZXR1cm4gYCR7c3RhdHVzfSAke2gubW9kZWxfaWR9OiAke2guc3RhdHVzfSAoJHtoLnJlc3BvbnNlX3RpbWV9bXMsICR7aC5hdmFpbGFiaWxpdHlfcGVyY2VudGFnZX0lKWA7XG4gICAgICB9KS5qb2luKCdcXG4nKTtcblxuICAgICAgbmV3IE5vdGljZShgTW9kZWwgSGVhbHRoIFN0YXR1czpcXG4ke2hlYWx0aEluZm99YCwgMTUwMDApO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIGhlYWx0aCBzdGF0dXM6JywgaGVhbHRoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBGYWlsZWQgdG8gZ2V0IG1vZGVsIGhlYWx0aDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLCA1MDAwKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRCZXN0TW9kZWxGb3JUYXNrKHRhc2tUeXBlOiBzdHJpbmcsIHF1YWxpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgPSAnbWVkaXVtJykge1xuICAgIGlmICh0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSAmJiB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5zZWxlY3RGb3JUYXNrKHRhc2tUeXBlLCBxdWFsaXR5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTZWxlY3RlZCBtb2RlbCAke3NlbGVjdGlvbi5zZWxlY3RlZF9tb2RlbC5uYW1lfSBmb3IgJHt0YXNrVHlwZX0gdGFza2ApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdNb2RlbCBzZWxlY3Rpb24gZmFpbGVkLCB1c2luZyBkZWZhdWx0OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb21tYW5kIERlZmluaXRpb25zIGZvciBWYXVsdFBpbG90IFZhdWx0IE1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBDb21tYW5kLCBOb3RpY2UsIEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gRGVmaW5lIGEgdHlwZSBmb3IgcGx1Z2luIGluc3RhbmNlIHdpdGggdmF1bHQgbWFuYWdlbWVudCBtZXRob2RzXG5pbnRlcmZhY2UgVmF1bHRNYW5hZ2VtZW50UGx1Z2luIHtcbiAgdmF1bHRDbGllbnQ/OiBhbnk7XG4gIG9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsPzogKCkgPT4gdm9pZDtcbiAgb3BlblNtYXJ0U2VhcmNoTW9kYWw/OiAocXVlcnk/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9wZW5GaWxlT3BlcmF0aW9uc01vZGFsPzogKCkgPT4gdm9pZDtcbiAgb3BlblZhdWx0T3JnYW5pemVyTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWw/OiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIFZhdWx0IE1hbmFnZW1lbnQgQ29tbWFuZHNcbiAqIFRoZXNlIHdpbGwgYmUgcmVnaXN0ZXJlZCBpbiB0aGUgbWFpbiBwbHVnaW4gZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTogQ29tbWFuZFtdIHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJyxcbiAgICAgIG5hbWU6ICdWaWV3IFZhdWx0IFN0cnVjdHVyZScsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHZhdWx0IHN0cnVjdHVyZSBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblZhdWx0U3RydWN0dXJlTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBzdHJ1Y3R1cmUgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnLFxuICAgICAgbmFtZTogJ1NtYXJ0IFZhdWx0IFNlYXJjaCcsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHNtYXJ0IHNlYXJjaCBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdTbWFydCBzZWFyY2ggZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnLFxuICAgICAgbmFtZTogJ0ZpbGUgT3BlcmF0aW9ucyBNYW5hZ2VyJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgZmlsZSBvcGVyYXRpb25zIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuRmlsZU9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgb3BlcmF0aW9ucyBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LW9yZ2FuaXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBSSBWYXVsdCBPcmdhbml6YXRpb24nLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyB2YXVsdCBvcmdhbml6ZXIgbW9kYWwnKTtcbiAgICAgICAgaWYgKHRoaXMub3BlblZhdWx0T3JnYW5pemVyTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5WYXVsdE9yZ2FuaXplck1vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgb3JnYW5pemVyIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtYmF0Y2gtb3BlcmF0aW9ucycsXG4gICAgICBuYW1lOiAnQmF0Y2ggRmlsZSBPcGVyYXRpb25zJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgYmF0Y2ggb3BlcmF0aW9ucyBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0JhdGNoIG9wZXJhdGlvbnMgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1xdWljay1zZWFyY2gtc2VsZWN0aW9uJyxcbiAgICAgIG5hbWU6ICdRdWljayBTZWFyY2ggU2VsZWN0ZWQgVGV4dCcsXG4gICAgICBlZGl0b3JDYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luLCBlZGl0b3I6IEVkaXRvcikge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1F1aWNrIHNlYXJjaCBmb3I6Jywgc2VsZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgICAgaWYgKHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoc2VsZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIHNlbGVjdCB0ZXh0IHRvIHNlYXJjaCBmb3InKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWhlYWx0aC1jaGVjaycsXG4gICAgICBuYW1lOiAnVmF1bHQgSGVhbHRoIENoZWNrJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoJ1J1bm5pbmcgdmF1bHQgaGVhbHRoIGNoZWNrLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVzdCBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3QgY29ubmVjdGlvblRlc3QgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgaWYgKCFjb25uZWN0aW9uVGVzdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBIZWFsdGggY2hlY2sgZmFpbGVkOiAke2Nvbm5lY3Rpb25UZXN0Lm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCBiYXNpYyBzdHJ1Y3R1cmUgdG8gdGVzdCBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7IFxuICAgICAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSwgXG4gICAgICAgICAgICBtYXhfZGVwdGg6IDEgXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVzdCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgICAgICAgIGNvbnN0IHNlYXJjaFRlc3QgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnNlYXJjaFZhdWx0KHsgXG4gICAgICAgICAgICBxdWVyeTogJ3Rlc3QnLCBcbiAgICAgICAgICAgIG1heF9yZXN1bHRzOiAxIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoYOKchSBWYXVsdCBIZWFsdGggQ2hlY2sgUGFzc2VkXG7wn5OBICR7c3RydWN0dXJlLnRvdGFsX2ZpbGVzfSBmaWxlcywgJHtzdHJ1Y3R1cmUudG90YWxfZm9sZGVyc30gZm9sZGVyc1xu8J+UjSBTZWFyY2g6ICR7c2VhcmNoVGVzdC5yZXN1bHRzLmxlbmd0aH0gcmVzdWx0c1xu8J+SviBTaXplOiAkeyhzdHJ1Y3R1cmUudG90YWxfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQmAsIDgwMDApO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVmF1bHQgaGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShg4p2MIEhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWJhY2t1cCcsXG4gICAgICBuYW1lOiAnQ3JlYXRlIFZhdWx0IEJhY2t1cCcsXG4gICAgICBjYWxsYmFjazogYXN5bmMgZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKCdDcmVhdGluZyB2YXVsdCBiYWNrdXAuLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBiYWNrdXAgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmJhY2t1cFZhdWx0KHtcbiAgICAgICAgICAgIGluY2x1ZGVfc2V0dGluZ3M6IHRydWUsXG4gICAgICAgICAgICBjb21wcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgICAgIGJhY2t1cF9uYW1lOiBgdmF1bHRwaWxvdC1iYWNrdXAtJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1gXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg4pyFIEJhY2t1cCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVxu8J+TpiAke2JhY2t1cC5maWxlc19iYWNrZWRfdXB9IGZpbGVzXG7wn5K+IFNpemU6ICR7KGJhY2t1cC5iYWNrdXBfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQlxu8J+TgSBMb2NhdGlvbjogJHtiYWNrdXAuYmFja3VwX3BhdGh9YCwgODAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdCYWNrdXAgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGDinYwgQmFja3VwIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtc2VhcmNoLWNvbnRlbnQnLFxuICAgICAgbmFtZTogJ1NlYXJjaCBDb250ZW50JyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBzZWxlY3Rpb24udHJpbSgpIHx8ICdFbnRlciBzZWFyY2ggcXVlcnknO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKHF1ZXJ5LCAnY29udGVudCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXNlYXJjaC1maWxlbmFtZXMnLFxuICAgICAgbmFtZTogJ1NlYXJjaCBGaWxlbmFtZXMnLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoJycsICdmaWxlbmFtZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycsXG4gICAgICBuYW1lOiAnVmlldyBSZWNlbnQgRmlsZXMnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jIGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7IFxuICAgICAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc3RydWN0dXJlLnJlY2VudF9maWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHJlY2VudCBmaWxlcyBmb3VuZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCByZWNlbnRMaXN0ID0gc3RydWN0dXJlLnJlY2VudF9maWxlc1xuICAgICAgICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgICAgICAgLm1hcCgoZmlsZTogYW55KSA9PiBg4oCiICR7ZmlsZS5uYW1lfSAoJHtmaWxlLm1vZGlmaWVkfSlgKVxuICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoYPCfk50gUmVjZW50IEZpbGVzOlxcbiR7cmVjZW50TGlzdH1gLCAxMDAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHJlY2VudCBmaWxlczonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShg4p2MIEZhaWxlZCB0byBnZXQgcmVjZW50IGZpbGVzOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIF07XG59XG5cbi8qKlxuICogSG90a2V5IGRlZmluaXRpb25zIGZvciB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gKi9cbmV4cG9ydCBjb25zdCBWQVVMVF9NQU5BR0VNRU5UX0hPVEtFWVM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICd2YXVsdHBpbG90LXZhdWx0LXN0cnVjdHVyZSc6ICdDdHJsK1NoaWZ0K1YnLFxuICAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnOiAnQ3RybCtTaGlmdCtGJyxcbiAgJ3ZhdWx0cGlsb3QtcXVpY2stc2VhcmNoLXNlbGVjdGlvbic6ICdDdHJsK1NoaWZ0K1MnLFxuICAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnOiAnQ3RybCtTaGlmdCtPJyxcbiAgJ3ZhdWx0cGlsb3Qtb3JnYW5pemUtdmF1bHQnOiAnQ3RybCtTaGlmdCtHJyxcbiAgJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJzogJ0N0cmwrU2hpZnQrSCdcbn07XG5cbi8qKlxuICogUmliYm9uIGljb24gZGVmaW5pdGlvbnMgZm9yIGNvbW1vbmx5IHVzZWQgY29tbWFuZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfUklCQk9OX0lDT05TID0gW1xuICB7XG4gICAgaWNvbjogJ2ZvbGRlci10cmVlJyxcbiAgICB0aXRsZTogJ1ZhdWx0IFN0cnVjdHVyZScsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnXG4gIH0sXG4gIHtcbiAgICBpY29uOiAnc2VhcmNoJyxcbiAgICB0aXRsZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnXG4gIH0sXG4gIHtcbiAgICBpY29uOiAnZm9sZGVyLXBsdXMnLFxuICAgIHRpdGxlOiAnRmlsZSBPcGVyYXRpb25zJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucydcbiAgfVxuXTtcblxuLyoqXG4gKiBDb21tYW5kIG1lbnUgaXRlbXMgZm9yIGNvbnRleHQgbWVudXNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfTUVOVV9JVEVNUyA9IFtcbiAge1xuICAgIHRpdGxlOiAnQW5hbHl6ZSBTdHJ1Y3R1cmUnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtYW5hbHlzaXMnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1zZWFyY2gnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0ZpbGUgT3BlcmF0aW9ucycsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1vcGVyYXRpb25zJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdPcmdhbml6ZSBWYXVsdCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1vcmdhbml6ZS12YXVsdCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW9yZ2FuaXphdGlvbidcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnSGVhbHRoIENoZWNrJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LWhlYWx0aC1jaGVjaycsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW1haW50ZW5hbmNlJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdDcmVhdGUgQmFja3VwJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LWJhY2t1cCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW1haW50ZW5hbmNlJ1xuICB9XG5dO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZWdpc3RlciBhbGwgdmF1bHQgbWFuYWdlbWVudCBjb21tYW5kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcyhwbHVnaW46IGFueSkge1xuICBjb25zdCBjb21tYW5kcyA9IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG4gIGNvbW1hbmRzLmZvckVhY2goKGNvbW1hbmQ6IENvbW1hbmQpID0+IHtcbiAgICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAuLi5jb21tYW5kLFxuICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2s/LmJpbmQocGx1Z2luKSxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrPy5iaW5kKHBsdWdpbilcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBBZGQgaG90a2V5cyBpZiBkZWZpbmVkXG4gIE9iamVjdC5lbnRyaWVzKFZBVUxUX01BTkFHRU1FTlRfSE9US0VZUykuZm9yRWFjaCgoW2NvbW1hbmRJZCwgaG90a2V5XSkgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xuICAgIGlmIChjb21tYW5kKSB7XG4gICAgICBjb21tYW5kLmhvdGtleXMgPSBbeyBtb2RpZmllcnM6IFtdLCBrZXk6IGhvdGtleSB9XTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgdmF1bHQgbWFuYWdlbWVudCByaWJib24gaWNvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFZhdWx0TWFuYWdlbWVudFJpYmJvbkljb25zKHBsdWdpbjogYW55KSB7XG4gIFZBVUxUX01BTkFHRU1FTlRfUklCQk9OX0lDT05TLmZvckVhY2goKHsgaWNvbiwgdGl0bGUsIGNvbW1hbmRJZCB9KSA9PiB7XG4gICAgY29uc3QgcmliYm9uSWNvbiA9IHBsdWdpbi5hZGRSaWJib25JY29uKGljb24sIHRpdGxlLCAoKSA9PiB7XG4gICAgICBwbHVnaW4uYXBwLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xuICAgIH0pO1xuICAgIHJpYmJvbkljb24uYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtdmF1bHQtbWFuYWdlbWVudC1yaWJib24nKTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIiwiZW5hYmxlVmF1bHRNYW5hZ2VtZW50IiwiYXV0b1N5bmNWYXVsdFN0cnVjdHVyZSIsInNlYXJjaFJlc3VsdHNMaW1pdCIsImVuYWJsZVNtYXJ0U2VhcmNoIiwiYmF0Y2hPcGVyYXRpb25UaW1lb3V0Iiwic2hvd1ZhdWx0U3RhdHMiLCJtYXhTZWFyY2hSZXN1bHRzIiwiZGVmYXVsdFNlYXJjaFR5cGUiLCJlbmFibGVGaWxlT3BlcmF0aW9ucyIsImNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnMiLCJhdXRvQmFja3VwQmVmb3JlT3BlcmF0aW9ucyIsIkRFRkFVTFRfU0VUVElOR1MiLCJiYWNrZW5kVXJsIiwiYXBpS2V5IiwiZW5hYmxlV2ViU29ja2V0IiwiZW5hYmxlQ29waWxvdCIsImVuYWJsZUF1dG9Db21wbGV0ZSIsImRlZmF1bHRBZ2VudCIsImRlZmF1bHRNb2RlIiwiY2hhdEhpc3RvcnlMaW1pdCIsImRlYnVnTW9kZSIsInNob3dJbnRlbnREZWJ1ZyIsInZhdWx0TWFuYWdlbWVudCIsIm1vZGVsU2VsZWN0aW9uIiwiZW5hYmxlZCIsImRldnBpcGVQYXRoIiwibW9uaXRvcmluZ0ludGVydmFsIiwiZmFsbGJhY2tFbmFibGVkIiwiY2FjaGVEdXJhdGlvbiIsInJldHJ5QXR0ZW1wdHMiLCJ0aW1lb3V0IiwidXNlclByZWZlcmVuY2VzIiwicHJpb3JpdHkiLCJtYXhDb3N0UGVyUmVxdWVzdCIsInByZWZlcnJlZFByb3ZpZGVycyIsInF1YWxpdHlUaHJlc2hvbGQiLCJWYXVsdFBpbG90U2V0dGluZ1RhYiIsIlBsdWdpblNldHRpbmdUYWIiLCJjb25zdHJ1Y3RvciIsImFwcCIsInBsdWdpbiIsInN1cGVyIiwidGhpcyIsImRpc3BsYXkiLCJjb250YWluZXJFbCIsImVtcHR5IiwiY3JlYXRlRWwiLCJ0ZXh0IiwiU2V0dGluZyIsInNldE5hbWUiLCJzZXREZXNjIiwiYWRkVGV4dCIsInNldFBsYWNlaG9sZGVyIiwic2V0VmFsdWUiLCJzZXR0aW5ncyIsIm9uQ2hhbmdlIiwidmFsdWUiLCJfX2F3YWl0ZXIiLCJzYXZlU2V0dGluZ3MiLCJhZGRCdXR0b24iLCJidXR0b24iLCJzZXRCdXR0b25UZXh0Iiwib25DbGljayIsInRlc3RDb25uZWN0aW9uIiwiYWRkVG9nZ2xlIiwidG9nZ2xlIiwiY29ubmVjdFdlYlNvY2tldCIsImRpc2Nvbm5lY3RXZWJTb2NrZXQiLCJhZGREcm9wZG93biIsImRyb3Bkb3duIiwiYWRkT3B0aW9uIiwiYWRkU2xpZGVyIiwic2xpZGVyIiwic2V0TGltaXRzIiwic2V0RHluYW1pY1Rvb2x0aXAiLCJfYiIsIl9hIiwiT2JqZWN0IiwiYXNzaWduIiwiaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCIsImRpc2FibGVWYXVsdE1hbmFnZW1lbnQiLCJTdHJpbmciLCJwYXJzZUludCIsInNldEN0YSIsInZhdWx0Q2xpZW50Iiwic2V0VGltZW91dCIsInNldERpc2FibGVkIiwic3VjY2VzcyIsImVycm9yIiwic2V0V2FybmluZyIsInNldHRpbmdzVGFiIiwic2V0dGluZyIsImFjdGl2ZVRhYiIsImFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIiwiaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uIiwiZGlzY29ubmVjdE1vZGVsU2VsZWN0aW9uIiwiY2xzIiwiaW5uZXJIVE1MIiwibm90aWNlIiwiTm90aWNlIiwicmVzcG9uc2UiLCJhcGlDbGllbnQiLCJoZWFsdGhDaGVjayIsImluY2x1ZGVzIiwiY29uc29sZSIsIndhcm4iLCJzaW1wbGVSZXNwb25zZSIsInNpbXBsZUhlYWx0aENoZWNrIiwiZGF0YSIsInN0YXR1cyIsInZlcnNpb24iLCJoaWRlIiwiRXJyb3IiLCJtZXNzYWdlIiwiVklFV19UWVBFX1ZBVUxUUElMT1QiLCJWYXVsdFBpbG90VmlldyIsIkl0ZW1WaWV3IiwibGVhZiIsImdldFZpZXdUeXBlIiwiZ2V0RGlzcGxheVRleHQiLCJnZXRJY29uIiwib25PcGVuIiwiY29udGFpbmVyIiwiYWRkQ2xhc3MiLCJoZWFkZXJFbCIsInN0YXR1c0VsIiwidXBkYXRlU3RhdHVzIiwicXVpY2tBY3Rpb25zRWwiLCJjcmVhdGVRdWlja0FjdGlvbnMiLCJ2YXVsdFN0YXRzRWwiLCJ1cGRhdGVWYXVsdFN0YXRzIiwiYWN0aXZpdGllc0VsIiwiYWRkU3R5bGVzIiwic3RhdHVzQ29udGFpbmVyIiwiYmFja2VuZFN0YXR1cyIsImJhY2tlbmRJbmRpY2F0b3IiLCJ3c1N0YXR1cyIsImlzV2ViU29ja2V0Q29ubmVjdGVkIiwiY2hlY2tCYWNrZW5kU3RhdHVzIiwiaW5kaWNhdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc05hbWUiLCJhY3Rpb25zR3JpZCIsIm9uY2xpY2siLCJvcGVuQ2hhdE1vZGFsIiwiYWN0aXZhdGVGdWxsVGFiVmlldyIsIm9wZW5Xb3JrZmxvd01vZGFsIiwiYW5hbHl6ZVZhdWx0IiwiYWN0aXZlVmlldyIsIndvcmtzcGFjZSIsImdldEFjdGl2ZVZpZXdPZlR5cGUiLCJNYXJrZG93blZpZXciLCJnZXRDb3BpbG90Q29tcGxldGlvbiIsImVkaXRvciIsInN0YXRzQ29udGFpbmVyIiwiZmlsZXMiLCJ2YXVsdCIsImdldEZpbGVzIiwibWFya2Rvd25GaWxlcyIsImdldE1hcmtkb3duRmlsZXMiLCJsYWJlbCIsImxlbmd0aCIsInRvU3RyaW5nIiwiZ2V0QWxsTG9hZGVkRmlsZXMiLCJmaWx0ZXIiLCJmIiwiVEZvbGRlciIsImZvckVhY2giLCJzdGF0Iiwic3RhdEVsIiwibG9hZEFnZW50SW5mbyIsImxvZyIsImdldEFnZW50cyIsImFnZW50cyIsIkFycmF5IiwiaXNBcnJheSIsImRhdGFPYmoiLCJhZ2VudENvdW50IiwiYWN0aXZlQWdlbnRzIiwiYWdlbnQiLCJhY3RpdmUiLCJhZ2VudFN0YXRzRWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGVFbCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsIm9uQ2xvc2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQiIsIlZhdWx0UGlsb3RGdWxsVGFiVmlldyIsInN0eWxlIiwiaGVpZ2h0Iiwib3ZlcmZsb3ciLCJtYWluTGF5b3V0IiwibGVmdFNpZGViYXIiLCJjcmVhdGVMZWZ0U2lkZWJhciIsIm1haW5Db250ZW50IiwiY3JlYXRlTWFpbkNvbnRlbnQiLCJyaWdodFNpZGViYXIiLCJjcmVhdGVSaWdodFNpZGViYXIiLCJhZGRGdWxsVGFiU3R5bGVzIiwic2lkZWJhciIsImNvbnRlbnQiLCJ0YWJOYXYiLCJjaGF0VGFiIiwid29ya2Zsb3dUYWIiLCJhbmFseXRpY3NUYWIiLCJ0YWJDb250ZW50IiwiY2hhdEVsIiwiY3JlYXRlQ2hhdFNlY3Rpb24iLCJ3b3JrZmxvd0VsIiwiY3JlYXRlV29ya2Zsb3dTZWN0aW9uIiwiYW5hbHl0aWNzRWwiLCJjcmVhdGVBbmFseXRpY3NTZWN0aW9uIiwic3dpdGNoVGFiIiwicmVjZW50RmlsZXNFbCIsInVwZGF0ZVJlY2VudEZpbGVzIiwiYWdlbnRTdGF0dXNFbCIsInVwZGF0ZUFnZW50U3RhdHVzIiwiYWN0aXZpdHlFbCIsImNyZWF0ZUFjdGl2aXR5RmVlZCIsImNoYXRDb250ZW50IiwiY2hhdEhpc3RvcnkiLCJjaGF0SW5wdXQiLCJ0ZXh0YXJlYSIsInBsYWNlaG9sZGVyIiwic2VuZEJ1dHRvbiIsInRyaW0iLCJzZW5kQ2hhdE1lc3NhZ2UiLCJvbmtleWRvd24iLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImNsaWNrIiwid29ya2Zsb3dDb250ZW50Iiwid29ya2Zsb3dHcmlkIiwibmFtZSIsImljb24iLCJkZXNjcmlwdGlvbiIsIndvcmtmbG93Iiwid29ya2Zsb3dDYXJkIiwicnVuV29ya2Zsb3ciLCJhbmFseXRpY3NDb250ZW50IiwiY2hhcnRzQ29udGFpbmVyIiwiZmlsZVR5cGVDaGFydCIsInRpbWVsaW5lQ2hhcnQiLCJ0YWdDaGFydCIsIndvcmRDb3VudENoYXJ0IiwibGlua0NoYXJ0IiwiYWN0aXZpdHlDaGFydCIsInRhYk5hbWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnRuIiwicmVtb3ZlQ2xhc3MiLCJzZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsInRoaW5raW5nTWVzc2FnZSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInNlbmRDaGF0IiwiY29udGV4dCIsInJlbW92ZSIsIndvcmtmbG93TmFtZSIsInBsYW5NeURheSIsImFjdGl2YXRlVmlldyIsInNvcnQiLCJhIiwiYiIsIm10aW1lIiwic2xpY2UiLCJmaWxlIiwiZmlsZUVsIiwiYmFzZW5hbWUiLCJvcGVuTGlua1RleHQiLCJwYXRoIiwiYWdlbnRJbmZvIiwiYWdlbnRFbCIsInRpbWUiLCJhY3Rpdml0eSIsImdldEFjdGl2ZU1hcmtkb3duIiwiZ2V0QWN0aXZlRmlsZSIsInJlYWQiLCJDaGF0TW9kYWwiLCJNb2RhbCIsImN1cnJlbnRDb252ZXJzYXRpb25JZCIsIm1lc3NhZ2VzIiwiY29udGVudEVsIiwidG9vbGJhckVsIiwiY2xlYXJDaGF0IiwiYWdlbnRTZWxlY3QiLCJsb2FkQWdlbnRzIiwiY2hhdENvbnRhaW5lciIsIm1lc3NhZ2VzRWwiLCJpbnB1dENvbnRhaW5lciIsImlucHV0RWwiLCJ0eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwiZGlzYWJsZWQiLCJnZXRDb252ZXJzYXRpb25IaXN0b3J5IiwicmVuZGVyTWVzc2FnZXMiLCJhZGRNZXNzYWdlIiwiaW50ZW50UmVzIiwiUHJvbWlzZSIsImFsbCIsImNsYXNzaWZ5SW50ZW50IiwicGF5bG9hZCIsImludGVudCIsInJlc3VsdCIsImNvbnZlcnNhdGlvbl9pZCIsInVuZGVmaW5lZCIsImFnZW50X2lkIiwiZ2V0U2VsZWN0ZWRBZ2VudCIsImVycm9yTXNnIiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJyZW5kZXJNZXNzYWdlIiwic2Nyb2xsVG9Cb3R0b20iLCJtZXNzYWdlRWwiLCJyZW5kZXJNYXJrZG93biIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlcGxhY2UiLCJkZWJ1Z0VsIiwiV29ya2Zsb3dNb2RhbCIsImlzRXhlY3V0aW5nIiwiZm9ybUVsIiwiZ29hbENvbnRhaW5lciIsImdvYWxJbnB1dCIsImNvbnRleHRDb250YWluZXIiLCJjb250ZXh0SW5wdXQiLCJvcHRpb25zQ29udGFpbmVyIiwiaW5jbHVkZUFjdGl2ZUZpbGUiLCJhY3RpdmVGaWxlQ2hlY2tib3giLCJjcmVhdGVTcGFuIiwiaW5jbHVkZUFsbEZpbGVzIiwiYWxsRmlsZXNDaGVja2JveCIsImV4ZWN1dGVCdXR0b24iLCJleGVjdXRlV29ya2Zsb3ciLCJjaGVja2VkIiwicHJvZ3Jlc3NDb250YWluZXIiLCJyZXN1bHRzQ29udGFpbmVyIiwiZ29hbCIsInZhdWx0Q29udGVudCIsImFjdGl2ZUZpbGUiLCJyZXF1ZXN0IiwidmF1bHRfY29udGVudCIsInNldHVwUHJvZ3Jlc3NMaXN0ZW5lciIsImRpc3BsYXlSZXN1bHRzIiwiZGlzcGxheUVycm9yIiwiZGlzcGxheVByb2dyZXNzIiwiZXhlY3V0aW9uX3RpbWUiLCJyZXN1bHRFbCIsInN0ZXBzX3Rha2VuIiwic3RlcHNFbCIsInN0ZXBzTGlzdCIsInN0ZXAiLCJhcnRpZmFjdHMiLCJhcnRpZmFjdHNFbCIsImFydGlmYWN0IiwiaW5kZXgiLCJhcnRpZmFjdEVsIiwidGl0bGUiLCJzYXZlQXJ0aWZhY3RBc05vdGUiLCJzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlIiwiZmlsZW5hbWUiLCJjcmVhdGUiLCJzcGxpdCIsIkV2b0FnZW50WENsaWVudCIsImJhc2VVcmwiLCJ3c0NhbGxiYWNrcyIsIk1hcCIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnRfMSIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsImhlYWRlcnMiLCJBY2NlcHQiLCJmZXRjaCIsIm1vZGUiLCJjcmVkZW50aWFscyIsImNvbnRlbnRUeXBlIiwiZ2V0IiwianNvbiIsIm9rIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzVGV4dCIsIm1ldGhvZCIsImNoYXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnZlcnNhdGlvbklkXzEiLCJjb252ZXJzYXRpb25JZCIsImxpbWl0IiwicmVxdWVzdEJvZHkiLCJpbmNsdWRlX21lc3NhZ2VzIiwiZGVsZXRlQ29udmVyc2F0aW9uIiwidmF1bHRfY29udGV4dCIsImNyZWF0ZUFnZW50IiwiZXhlY3V0ZUFnZW50IiwiYW5hbHl6ZVZhdWx0Q29udGV4dCIsInBsYW5UYXNrcyIsInBhcnNlSW50ZWxsaWdlbmNlIiwiY29uZmlkZW5jZSIsImV4cGxhaW5JbnRlbnQiLCJpbmNsdWRlX2RlYnVnIiwicmVhc29uaW5nIiwidXBkYXRlTWVtb3J5IiwiY2FsbGJhY2tzIiwid3NVcmwiLCJ3ZWJzb2NrZXQiLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJvbkNvbm5lY3QiLCJjYWxsIiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJzZSIsIm9uQ2hhdCIsIm9uV29ya2Zsb3dQcm9ncmVzcyIsIl9jIiwib25Db3BpbG90IiwiX2QiLCJvblZhdWx0U3luYyIsIl9lIiwib25JbnRlbnREZWJ1ZyIsIl9mIiwib25FcnJvciIsIl9nIiwib25jbG9zZSIsImNvZGUiLCJyZWFzb24iLCJvbkRpc2Nvbm5lY3QiLCJvbmVycm9yIiwiY2xvc2UiLCJzZW5kV2ViU29ja2V0TWVzc2FnZSIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsImZpbmRQbGFuU2VjdGlvbiIsIm1hdGNoIiwiZmluZFNjaGVkdWxlU2VjdGlvbiIsInNjaGVkdWxlUmVnZXgiLCJQbGFuTXlEYXlEZWJ1Z2dlciIsImxvZ3MiLCJtYXhMb2dzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImxvZ0VudHJ5IiwiZXJyb3JEYXRhIiwic3RhY2siLCJnZXRMb2dzIiwiY2xlYXJMb2dzIiwiZXhwb3J0TG9ncyIsImpvaW4iLCJhbmFseXplQXBpQ2xpZW50IiwiYXZhaWxhYmxlIiwibWV0aG9kcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRQcm90b3R5cGVPZiIsImhhc1BsYW5UYXNrcyIsImhhc0hlYWx0aENoZWNrIiwidGVzdFRhc2tQbGFubmluZyIsImFwaUNsaWVudF8xIiwidGVzdE5vdGUiLCJ0aW1lZnJhbWUiLCJoYXNEYXRhIiwiaGFzUGxhbiIsInBsYW4iLCJ0YXNrQ291bnQiLCJ0YXNrcyIsInBsYW5NeURheURlYnVnZ2VyIiwiVmF1bHRNYW5hZ2VtZW50RXJyb3IiLCJmZWF0dXJlIiwiVmF1bHRNYW5hZ2VtZW50Q2xpZW50IiwiZ2V0VmF1bHRTdHJ1Y3R1cmUiLCJoYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvciIsInBlcmZvcm1GaWxlT3BlcmF0aW9uIiwidmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdCIsInBlcmZvcm1CYXRjaE9wZXJhdGlvbnMiLCJvcGVyYXRpb25zIiwib3AiLCJlcnIiLCJzZWFyY2hWYXVsdCIsInF1ZXJ5Iiwib3JnYW5pemVWYXVsdCIsImJhY2t1cFZhdWx0IiwiY3JlYXRlRmlsZSIsImZpbGVQYXRoXzEiLCJjb250ZW50XzEiLCJhcmd1bWVudHMiLCJmaWxlUGF0aCIsImJhY2t1cCIsIm9wZXJhdGlvbiIsImZpbGVfcGF0aCIsInVwZGF0ZUZpbGUiLCJkZWxldGVGaWxlIiwibW92ZUZpbGUiLCJmcm9tUGF0aF8xIiwidG9QYXRoXzEiLCJmcm9tUGF0aCIsInRvUGF0aCIsIm5ld19wYXRoIiwiY29weUZpbGUiLCJxdWlja1NlYXJjaCIsInF1ZXJ5XzEiLCJtYXhSZXN1bHRzIiwic2VhcmNoX3R5cGUiLCJtYXhfcmVzdWx0cyIsImluY2x1ZGVfY29udGVudCIsInJlcXVlc3RPcHRpb25zIiwibWF4X2RlcHRoIiwiRW52aXJvbm1lbnREZXRlY3RvciIsImRldGVjdCIsImluZm8iLCJwbGF0Zm9ybSIsImhhc0ZpbGVTeXN0ZW0iLCJoYXNXZWJTb2NrZXQiLCJoYXNIVFRQIiwiY2FwYWJpbGl0aWVzIiwid2luZG93IiwiZ2xvYmFsVGhpcyIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJyZXF1aXJlIiwiaXNPYnNpZGlhbiIsImNhblVzZUZpbGVTeXN0ZW0iLCJjYW5Vc2VXZWJTb2NrZXQiLCJnZXRPcHRpbWFsVHJhbnNwb3J0IiwiZW52IiwiRGV2UGlwZUNsaWVudCIsImNvbmZpZyIsImlzQ29ubmVjdGVkIiwibWVzc2FnZUlkIiwicGVuZGluZ1JlcXVlc3RzIiwiZXZlbnRMaXN0ZW5lcnMiLCJlbnZpcm9ubWVudCIsInNlcnZlclVybCIsInNlcnZlcl91cmwiLCJkZWJ1Z19tb2RlIiwib24iLCJsaXN0ZW5lciIsImhhcyIsInNldCIsIm9mZiIsImxpc3RlbmVycyIsImluZGV4T2YiLCJzcGxpY2UiLCJlbWl0IiwiaW5pdGlhbGl6ZSIsInRyYW5zcG9ydCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidHlwZV8xIiwicGF5bG9hZF8xIiwiZ2VuZXJhdGVNZXNzYWdlSWQiLCJzZW5kZXIiLCJyZWNpcGllbnQiLCJyZXNvbHZlIiwicmVqZWN0IiwidGltZW91dEhhbmRsZSIsImRlbGV0ZSIsInNlbmRNZXNzYWdlVG9TZXJ2ZXIiLCJjYXRjaCIsImNsZWFyVGltZW91dCIsInBlbmRpbmdSZXF1ZXN0Iiwibm93IiwiZGlzY29ubmVjdCIsImNsZWFyIiwiaXNSZWFkeSIsImdldFBlbmRpbmdSZXF1ZXN0Q291bnQiLCJzaXplIiwiTW9kZWxTZWxlY3Rpb25FcnJvciIsImRldGFpbHMiLCJzdWdnZXN0aW9ucyIsIk1vZGVsU2VsZWN0aW9uU2VydmljZSIsImRldlBpcGVQYXRoIiwiY2FjaGVkSGVhbHRoIiwibGFzdEhlYWx0aFVwZGF0ZSIsImRldnBpcGVfcGF0aCIsIm1vbml0b3JpbmdfaW50ZXJ2YWwiLCJmYWxsYmFja19lbmFibGVkIiwiY2FjaGVfZHVyYXRpb24iLCJyZXRyeV9hdHRlbXB0cyIsImRldlBpcGVDbGllbnQiLCJtYXhfY29zdF9wZXJfcmVxdWVzdCIsInByZWZlcnJlZF9wcm92aWRlcnMiLCJxdWFsaXR5X3RocmVzaG9sZCIsInRpbWVvdXRfcHJlZmVyZW5jZSIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJoZWFsdGhEYXRhIiwibWV0cmljcyIsInJlZnJlc2hNb2RlbEhlYWx0aCIsInN0YXJ0SGVhbHRoTW9uaXRvcmluZyIsInNlbGVjdE1vZGVsIiwicGVyZm9ybVNlbGVjdGlvbiIsImZhbGxiYWNrU2VsZWN0aW9uIiwiZW5oYW5jZWRSZXF1ZXN0IiwidXNlcl9wcmVmZXJlbmNlcyIsInRpbWVvdXRfbXMiLCJvcmlnaW5hbEVycm9yIiwiY2FjaGVkIiwiZ2V0Q2FjaGVkU2VsZWN0aW9uIiwic3RhdGljTW9kZWxTZWxlY3Rpb24iLCJkZWZhdWx0TW9kZWxzIiwiY29zdCIsInN1bW1hcml6YXRpb24iLCJ0cmFuc2xhdGlvbiIsImRlZmF1bHRNb2RlbCIsInRhc2tfdHlwZSIsInNlbGVjdGVkX21vZGVsIiwicHJvdmlkZXIiLCJzY29yZSIsImNvc3RfcGVyX3Rva2VuIiwibWF4X3Rva2VucyIsInJlc3BvbnNlX3RpbWVfYXZnX21zIiwiYXZhaWxhYmlsaXR5X3Njb3JlIiwicXVhbGl0eV9zY29yZSIsImZhbGxiYWNrX21vZGVscyIsImVzdGltYXRlZF9jb3N0IiwiZXN0aW1hdGVkX3RpbWVfbXMiLCJzZWxlY3Rpb25fbWV0YWRhdGEiLCJzZWxlY3Rpb25fdGltZV9tcyIsImZhY3RvcnNfY29uc2lkZXJlZCIsImNvbmZpZGVuY2Vfc2NvcmUiLCJzZWxlY3RNb2RlbF9PTEQiLCJnZXRNb2RlbEhlYWx0aCIsImhlYWx0aCIsInVwZGF0ZVByZWZlcmVuY2VzIiwicHJlZmVyZW5jZXMiLCJnZXRQcmVmZXJlbmNlcyIsInNldEludGVydmFsIiwic2VsZWN0Rm9yVGFzayIsInRhc2tUeXBlXzEiLCJ0YXNrVHlwZSIsInF1YWxpdHkiLCJxdWFsaXR5X3JlcXVpcmVtZW50Iiwic2VsZWN0Q29zdE9wdGltaXplZCIsIm1heENvc3QiLCJtYXhfY29zdCIsInNlbGVjdEhpZ2hQZXJmb3JtYW5jZSIsImdldENvbmZpZyIsIlZhdWx0U3RydWN0dXJlTW9kYWwiLCJzZXRGb2N1c1BhdGgiLCJmb2N1c1BhdGgiLCJyZWZyZXNoQnV0dG9uIiwibG9hZGluZ0VsIiwiY3JlYXRlRGl2Iiwic2V0VGV4dCIsInN0cnVjdHVyZSIsInJlbmRlclN0cnVjdHVyZSIsInRvdGFsX2ZpbGVzIiwidG90YWxfZm9sZGVycyIsInRvdGFsX3NpemUiLCJ0b0ZpeGVkIiwidHJlZUNvbnRhaW5lciIsInRyZWVFbCIsInJlbmRlckZvbGRlciIsInJlY2VudF9maWxlcyIsInJlY2VudENvbnRhaW5lciIsInJlY2VudEVsIiwibW9kaWZpZWQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJvcnBoYW5lZF9maWxlcyIsIm9ycGhhbmVkQ29udGFpbmVyIiwib3JwaGFuZWRFbCIsImZvbGRlciIsImxldmVsIiwiZm9sZGVyRWwiLCJhdHRyIiwiY2hpbGRyZW4iLCJjaGlsZHJlbkVsIiwidG9nZ2xlRWwiLCJpc09wZW4iLCJjaGlsZCIsIlNtYXJ0U2VhcmNoTW9kYWwiLCJzZXRJbml0aWFsUXVlcnkiLCJpbml0aWFsUXVlcnkiLCJzZWFyY2hUeXBlIiwic2VhcmNoRm9ybSIsInF1ZXJ5SW5wdXQiLCJzZWFyY2hUeXBlU2VsZWN0Iiwib3B0aW9uIiwic2VsZWN0ZWQiLCJzZWFyY2hCdXR0b24iLCJwZXJmb3JtU2VhcmNoIiwicmVzdWx0cyIsInJlbmRlclNlYXJjaFJlc3VsdHMiLCJ0b3RhbF9mb3VuZCIsImluc2lnaHRzIiwicmVzdWx0c0xpc3QiLCJmaWxlX25hbWUiLCJtYXRjaF90eXBlIiwicHJldmlldyIsIm1hdGNoZXMiLCJzdWdnZXN0ZWRfcXVlcmllcyIsInN1Z2dlc3Rpb25zRWwiLCJzdWdnZXN0aW9uc0xpc3QiLCJzdWdnZXN0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIktleWJvYXJkRXZlbnQiLCJGaWxlT3BlcmF0aW9uc01vZGFsIiwic2V0SW5pdGlhbFBhdGgiLCJpbml0aWFsUGF0aCIsInNldE9wZXJhdGlvbiIsInVwZGF0ZU9wZXJhdGlvbkZvcm0iLCJmb3JtQ29udGFpbmVyIiwiYWRkVGV4dEFyZWEiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImV4ZWN1dGVPcGVyYXRpb24iLCJwYXRoSW5wdXQiLCJuZXdQYXRoSW5wdXQiLCJjb250ZW50VGV4dGFyZWEiLCJiYWNrdXBUb2dnbGUiLCJWYXVsdFBpbG90UGx1Z2luIiwiUGx1Z2luIiwid2Vic29ja2V0Q29ubmVjdGVkIiwiY29waWxvdEVuYWJsZWQiLCJvbmxvYWQiLCJhcHBJbnN0YW5jZSIsImxvYWRTZXR0aW5ncyIsInJlZ2lzdGVyVmlldyIsInJpYmJvbkljb25FbCIsImFkZFJpYmJvbkljb24iLCJldnQiLCJjdHJsS2V5IiwibWV0YUtleSIsImFkZENvbW1hbmQiLCJjYWxsYmFjayIsImVkaXRvckNhbGxiYWNrIiwicXVpY2tDaGF0V2l0aFNlbGVjdGlvbiIsInBsYW5UYXNrc0Zyb21Ob3RlIiwiZGVidWdQbGFuTXlEYXkiLCJ0ZXN0TW9kZWxTZWxlY3Rpb24iLCJzaG93TW9kZWxIZWFsdGgiLCJyZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzIiwicmVnaXN0ZXJEb21FdmVudCIsImhhbmRsZUtleVVwIiwiYmluZCIsImFkZFNldHRpbmdUYWIiLCJvbnVubG9hZCIsImRldGFjaExlYXZlc09mVHlwZSIsImhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uIiwiZGVidWciLCJvcGVuIiwiZmlsZUNvbnRlbnQiLCJhbmFseXNpc190eXBlIiwiYW5hbHlzaXNDb250ZW50IiwiYW5hbHlzaXMiLCJpbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwicmVjIiwiY3Vyc29yIiwiZ2V0Q3Vyc29yIiwidGV4dEJlZm9yZUN1cnNvciIsImdldExpbmUiLCJsaW5lIiwic3Vic3RyaW5nIiwiY2giLCJmdWxsVGV4dCIsImdldFZhbHVlIiwiY3Vyc29yX3Bvc2l0aW9uIiwicG9zVG9PZmZzZXQiLCJmaWxlX3R5cGUiLCJyZXBsYWNlUmFuZ2UiLCJjb21wbGV0aW9uIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwibmV3TGluZSIsInRhc2tDb250ZW50IiwiZXN0aW1hdGVkX2R1cmF0aW9uIiwidGFzayIsImNoZWNrYm94IiwiZXN0aW1hdGVkX3RpbWUiLCJtaWxlc3RvbmVzIiwibWlsZXN0b25lIiwidGFyZ2V0X2RhdGUiLCJleHRlbnNpb24iLCJmaWxlVGV4dCIsImhhc0NvbnRlbnQiLCJmaXJzdExpbmUiLCJsaW5lQ291bnQiLCJleGlzdHMiLCJzY2hlZHVsZU1hcmtkb3duIiwiaGVhZGxpbmUiLCJub3RlVGV4dCIsImtleXMiLCJhY3R1YWxEYXRhIiwicGxhbktleXMiLCJoYXNUYXNrcyIsImVzdGltYXRlZFRpbWUiLCJ0aW1lTWF0Y2giLCJNYXRoIiwiZmxvb3IiLCJtYXJrZG93bkxlbmd0aCIsImZldGNoU2NoZWR1bGUiLCJ0cmltbWVkTGVuZ3RoIiwiaXNTdHJpbmciLCJpc1ZhbGlkIiwidmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIiwiZXhpc3RpbmdQbGFuU2VjdGlvbiIsImV4aXN0aW5nU2NoZWR1bGVTZWN0aW9uIiwiaGFzUGxhbldyYXBwZXIiLCJoYXNTY2hlZHVsZVNlY3Rpb24iLCJwbGFuQ29udGVudCIsInNjaGVkdWxlSGVhZGluZyIsInVwZGF0ZWRUZXh0Iiwib3JpZ2luYWxUZXh0Iiwib3JpZ2luYWxMZW5ndGgiLCJzY2hlZHVsZUxlbmd0aCIsImhhc09yaWdpbmFsQ29udGVudCIsInBsYW5NYXRjaCIsInN0YXJ0Q29tbWVudCIsImNvbnRlbnRMZW5ndGgiLCJlbmRDb21tZW50IiwiZnVsbE1hdGNoIiwicmVwbGFjZW1lbnQiLCJzY2hlZHVsZU1hdGNoIiwiaGVhZGluZ01hdGNoIiwiY29udGVudE1hdGNoIiwiaGVhZGluZyIsImluamVjdFNjaGVkdWxlIiwidXBkYXRlZExlbmd0aCIsImNoYW5nZWQiLCJtb2RpZnkiLCJzdWNjZXNzTWVzc2FnZSIsImhhc0FjdGl2ZUZpbGUiLCJmaWxlTmFtZSIsImZpbGVFeHRlbnNpb24iLCJhcGlBbmFseXNpcyIsImNvbm5lY3Rpb25UZXN0IiwicGxhbm5pbmdUZXN0IiwiaGFzQXBpS2V5IiwibG9nU3VtbWFyeSIsImRlYnVnQ29udGVudCIsImxlYXZlcyIsImdldExlYXZlc09mVHlwZSIsInJpZ2h0TGVhZiIsImdldFJpZ2h0TGVhZiIsInNldFZpZXdTdGF0ZSIsInJldmVhbExlYWYiLCJuZXdMZWFmIiwiZ2V0TGVhZiIsIm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsIiwib3BlblNtYXJ0U2VhcmNoTW9kYWwiLCJvcGVuRmlsZU9wZXJhdGlvbnNNb2RhbCIsIm9wZW5WYXVsdE9yZ2FuaXplck1vZGFsIiwib3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsIiwic2VhcmNoVGVzdCIsImluY2x1ZGVfc2V0dGluZ3MiLCJjb21wcmVzc2lvbiIsImJhY2t1cF9uYW1lIiwiZmlsZXNfYmFja2VkX3VwIiwiYmFja3VwX3NpemUiLCJiYWNrdXBfcGF0aCIsInJlY2VudExpc3QiLCJtYXAiLCJjb21tYW5kIiwibW9kYWwiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUiLCJhdXRvQ29tcGxldGVUaW1lb3V0IiwidHJpZ2dlckF1dG9Db21wbGV0aW9uIiwiY3VycmVudExpbmUiLCJsYXN0Q2hhciIsImxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0IiwibG9hZERhdGEiLCJzYXZlRGF0YSIsIm1vZGVsU2VsZWN0aW9uU2VydmljZSIsInJlc3VsdFRleHQiLCJoZWFsdGhJbmZvIiwiaCIsIm1vZGVsX2lkIiwicmVzcG9uc2VfdGltZSIsImF2YWlsYWJpbGl0eV9wZXJjZW50YWdlIiwiZ2V0QmVzdE1vZGVsRm9yVGFzayJdLCJtYXBwaW5ncyI6IjRYQU9PLE1BQU1BLEVBQTZELENBQ3hFQyx1QkFBdUIsRUFDdkJDLHdCQUF3QixFQUN4QkMsbUJBQW9CLEdBQ3BCQyxtQkFBbUIsRUFDbkJDLHNCQUF1QixJQUN2QkMsZ0JBQWdCLEVBQ2hCQyxpQkFBa0IsSUFDbEJDLGtCQUFtQixVQUNuQkMsc0JBQXNCLEVBQ3RCQyw4QkFBOEIsRUFDOUJDLDRCQUE0QixHQ2J2QixNQUFNQyxFQUF1QyxDQUNsREMsV0FBWSx3QkFDWkMsT0FBUSxHQUNSQyxpQkFBaUIsRUFDakJDLGVBQWUsRUFDZkMsb0JBQW9CLEVBQ3BCQyxhQUFjLEdBQ2RDLFlBQWEsTUFDYkMsaUJBQWtCLElBQ2xCQyxXQUFXLEVBQ1hDLGlCQUFpQixFQUNqQkMsZ0JBQWlCdkIsRUFDakJ3QixlQUFnQixDQUNkQyxTQUFTLEVBQ1RDLFlBQWEsY0FDYkMsbUJBQW9CLElBQ3BCQyxpQkFBaUIsRUFDakJDLGNBQWUsSUFDZkMsY0FBZSxFQUNmQyxRQUFTLElBQ1RWLFdBQVcsRUFDWFcsZ0JBQWlCLENBQ2ZDLFNBQVUsV0FDVkMsa0JBQW1CLEdBQ25CQyxtQkFBb0IsR0FDcEJDLGlCQUFrQixNQUtsQixNQUFPQyxVQUE2QkMsRUFBQUEsaUJBR3hDLFdBQUFDLENBQVlDLEVBQVVDLEdBQ3BCQyxNQUFNRixFQUFLQyxHQUNYRSxLQUFLRixPQUFTQSxDQUNmLENBRUQsT0FBQUcsR0FDRSxNQUFN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
