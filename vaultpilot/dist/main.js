"use strict";var t=require("obsidian");function e(t,e,n,o){return new(n||(n=Promise))(function(i,s){function a(t){try{r(o.next(t))}catch(t){s(t)}}function l(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,l)}r((o=o.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!0,defaultAgent:"",chatHistoryLimit:100,debugMode:!1};class o extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"VaultPilot Settings"}),n.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),n.createEl("h3",{text:"Connection"}),new t.Setting(n).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),n.createEl("h3",{text:"Features"}),new t.Setting(n).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(n).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Enable Auto-Complete").setDesc("Automatically suggest completions as you type").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Agent Configuration"}),new t.Setting(n).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Advanced"}),new t.Setting(n).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Information"});n.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let o=yield this.plugin.apiClient.healthCheck();if(!o.success&&(null===(e=o.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(o={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),o.success?new t.Notice("‚úÖ Connection successful!",3e3):new t.Notice(`‚ùå Connection failed: ${o.error}`,5e3)}catch(e){n.hide(),new t.Notice(`‚ùå Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const i="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return i}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ü§ñ VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),o=t.createEl("div",{cls:"vaultpilot-status-item"});o.createEl("span",{text:"WebSocket: "}),o.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"üü¢ Connected":"üî¥ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="üü¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="üî¥ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="üî¥ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"üí¨ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"‚öôÔ∏è Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"üîç Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"‚ú® Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"üîÑ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),o=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:o.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getAgents();if(t.success&&t.data){const e=t.data.length,n=t.data.filter(t=>t.active).length,o=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});o.createEl("h4",{text:"Available Agents"});o.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${n}/${e} active`})}}catch(t){}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}class a extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ü§ñ VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const o=n.createEl("select",{cls:"vaultpilot-agent-select"});o.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(o),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask me anything about your vault...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();e.success&&e.data&&e.data.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})})}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const n=this.app.workspace.getActiveFile();let o="";if(n){const t=yield this.app.vault.read(n);o=`Current file: ${n.name}\n\nContent:\n${t}`}const i=yield this.plugin.apiClient.chat({message:e,conversation_id:this.currentConversationId||void 0,vault_context:o,agent_id:this.getSelectedAgent()});i.success&&i.data?(this.currentConversationId=i.data.conversation_id,this.addMessage("assistant",i.data.response)):(this.addMessage("assistant",`Error: ${i.error||"Failed to get response"}`),new t.Notice(`Chat error: ${i.error}`))}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class l extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"‚öôÔ∏è Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=o.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const s=n.createEl("div",{cls:"vaultpilot-form-group"});s.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const a=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=a.createEl("input",{type:"checkbox"});a.createSpan({text:"Include active file content"});const r=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,o){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(o){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const s=yield this.plugin.apiClient.executeWorkflow(i);if(!s.success||!s.data)throw new Error(s.error||"Workflow execution failed");yield this.displayResults(s.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"‚úÖ Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const o=e.createEl("div",{cls:"vaultpilot-artifact"});o.createEl("h5",{text:t.title}),o.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});o.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,o){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,o=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,o),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let o="# VaultPilot Workflow Results\n\n";o+=`**Goal:** ${this.goalInput.value}\n\n`,o+=`**Execution Time:** ${n.execution_time}s\n\n`,o+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(o+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{o+=`${e+1}. ${t}\n`}),o+="\n"),n.artifacts&&n.artifacts.length>0&&(o+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{o+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,o),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>‚ùå Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class r{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,o=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(o.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:o,mode:"cors",credentials:"omit"}));let i;const s=t.headers.get("content-type");if(i=s&&s.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/api/obsidian/health`);const t=yield this.makeRequest("/api/obsidian/health",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/api/obsidian/health`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,o,i,s,a,l;try{const l=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",l.type),l.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,l.data);break;case"workflow_progress":null===(o=t.onWorkflowProgress)||void 0===o||o.call(t,l.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,l.data);break;case"vault_sync":null===(s=t.onVaultSync)||void 0===s||s.call(t,l.data);break;case"error":null===(a=t.onError)||void 0===a||a.call(t,l.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(l=t.onError)||void 0===l||l.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class c extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e;yield this.loadSettings(),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey);try{let n=yield this.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(new t.Notice("‚úÖ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",n.error),new t.Notice("‚ö†Ô∏è EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("‚ö†Ô∏è Cannot connect to EvoAgentX backend",5e3)}this.registerView(i,t=>new s(t,this));this.addRibbonIcon("bot","VaultPilot",t=>{this.openChatModal()}).addClass("vaultpilot-ribbon-class"),this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new o(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(i),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new a(this.app,this).open()}openWorkflowModal(){new l(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let o="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);o+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:o,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let o=`# Vault Analysis - ${e}\n\n`;o+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(o+="## Key Insights\n\n",i.data.insights.forEach(t=>{o+=`- ${t}\n`}),o+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(o+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{o+=`- ${t}\n`})),yield this.app.vault.create(n,o),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),o=n.getLine(e.line).substring(0,e.ch),i=n.getValue();try{const s=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:o});s.success&&s.data?(n.replaceRange(s.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${s.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const o=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(o.success&&o.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${o.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${o.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),o=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==o?void 0:o.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==o?void 0:o.basename)||"Untitled"} - ${e}.md`;let s=`# ${n.data.plan.title}\n\n`;s+=`${n.data.plan.description}\n\n`,s+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(s+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";s+=`${e} **${t.title}** (${t.priority} priority)\n`,s+=`   ${t.description}\n`,s+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(s+="## Milestones\n\n",n.data.milestones.forEach(t=>{s+=`- **${t.title}** (${t.target_date})\n`,s+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,s),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){const n=this.app.workspace.getActiveFile();if(!n)return void new t.Notice("No active note‚Äîopen today's daily note first.");const o=new t.Notice("Planning your day...",0);try{const i=yield this.app.vault.read(n),{scheduleMarkdown:s,headline:a}=yield function(n){return e(this,void 0,void 0,function*(){const e=yield t.request({url:"http://localhost:3000/planday",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:n})});return JSON.parse(e)})}(i);if(!function(t){return t.trim().length>0}(s))throw new Error("Invalid schedule data received from API");const l=function(t,e){const n=function(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im;return t.match(e)||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}(t);if(n){const[o,i]=n,s=i+e;return t.replace(o,s)}return t+`\n\n## Schedule\n${e}`}(i,s);yield this.app.vault.modify(n,l),o.hide();const r=a?`${a} ‚úÖ`:"Schedule inserted ‚úÖ";new t.Notice(r)}catch(e){o.hide(),e instanceof Error?e.message.includes("JSON")?new t.Notice("Planner API error: Invalid response format"):e.message.includes("fetch")||e.message.includes("network")?new t.Notice("Planner API error: Unable to connect to localhost:3000"):new t.Notice(`Planner API error: ${e.message}`):new t.Notice("Planner API error: Unknown error occurred")}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(i);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:i,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},1e3))}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,o=n.getCursor(),i=n.getLine(o.line);if(!(i.trim().length<3||o.ch!==i.length))try{const e=yield this.apiClient.getCopilotCompletion({text:n.getValue(),cursor_position:n.posToOffset(o),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},n,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){yield this.saveData(this.settings),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=c;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvY2hhdC1tb2RhbC50cyIsIi4uL3NyYy93b3JrZmxvdy1tb2RhbC50cyIsIi4uL3NyYy9hcGktY2xpZW50LnRzIiwiLi4vc3JjL21haW4udHMiLCIuLi9zcmMvcGxhbm5lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVmF1bHRQaWxvdFNldHRpbmdzID0ge1xuICBiYWNrZW5kVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJyxcbiAgYXBpS2V5OiAnJyxcbiAgZW5hYmxlV2ViU29ja2V0OiB0cnVlLFxuICBlbmFibGVDb3BpbG90OiB0cnVlLFxuICBlbmFibGVBdXRvQ29tcGxldGU6IHRydWUsXG4gIGRlZmF1bHRBZ2VudDogJycsXG4gIGNoYXRIaXN0b3J5TGltaXQ6IDEwMCxcbiAgZGVidWdNb2RlOiBmYWxzZVxufTtcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHRQaWxvdCBTZXR0aW5ncycgfSk7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0NvbmZpZ3VyZSB5b3VyIGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQgYW5kIEFJIGZlYXR1cmVzLicgXG4gICAgfSk7XG5cbiAgICAvLyBDb25uZWN0aW9uIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29ubmVjdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdCYWNrZW5kIFVSTCcpXG4gICAgICAuc2V0RGVzYygnVVJMIG9mIEV2b0FnZW50WCBiYWNrZW5kIHNlcnZlcicpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgICAuc2V0RGVzYygnT3B0aW9uYWwgQVBJIGtleSBmb3IgYXV0aGVudGljYXRpb24gKGlmIHJlcXVpcmVkIGJ5IGJhY2tlbmQpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgQVBJIGtleS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIFRlc3QgY29ubmVjdGlvbiBidXR0b25cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdDb25uZWN0aW9uIFRlc3QnKVxuICAgICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbiB0byBFdm9BZ2VudFggYmFja2VuZCcpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PlxuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJylcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBGZWF0dXJlIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRmVhdHVyZXMnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIFdlYlNvY2tldCcpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIHJlYWwtdGltZSBjb21tdW5pY2F0aW9uIGZvciBsaXZlIHVwZGF0ZXMgYW5kIHByb2dyZXNzIHRyYWNraW5nJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIENvcGlsb3QnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBBSS1wb3dlcmVkIHRleHQgY29tcGxldGlvbiBhbmQgc3VnZ2VzdGlvbnMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIEF1dG8tQ29tcGxldGUnKVxuICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgc3VnZ2VzdCBjb21wbGV0aW9ucyBhcyB5b3UgdHlwZScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gQWdlbnQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQWdlbnQnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgYWdlbnQgdG8gdXNlIGZvciBjaGF0IGFuZCB3b3JrZmxvd3MgKGxlYXZlIGVtcHR5IGZvciBhdXRvLXNlbGVjdGlvbiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdBZ2VudCBJRCBvciBuYW1lLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50IHx8ICcnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0QWdlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ2hhdCBIaXN0b3J5IExpbWl0JylcbiAgICAgIC5zZXREZXNjKCdNYXhpbXVtIG51bWJlciBvZiBjaGF0IG1lc3NhZ2VzIHRvIGtlZXAgaW4gaGlzdG9yeScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PlxuICAgICAgICBzbGlkZXJcbiAgICAgICAgICAuc2V0TGltaXRzKDEwLCA1MDAsIDEwKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0KVxuICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5TGltaXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gQWR2YW5jZWQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZHZhbmNlZCcgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWJ1ZyBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgZGVidWcgbG9nZ2luZyBhbmQgYWRkaXRpb25hbCBkZXZlbG9wZXIgZmVhdHVyZXMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEluZm9ybWF0aW9uIHNlY3Rpb25cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdJbmZvcm1hdGlvbicgfSk7XG4gICAgY29uc3QgaW5mb0VsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcbiAgICBpbmZvRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPHA+PHN0cm9uZz5WYXVsdFBpbG90IHYxLjAuMDwvc3Ryb25nPjwvcD5cbiAgICAgIDxwPkNvbXByZWhlbnNpdmUgRXZvQWdlbnRYIGludGVncmF0aW9uIGZvciBPYnNpZGlhbjwvcD5cbiAgICAgIDxwPkZlYXR1cmVzOiBBSSBDaGF0LCBDb3BpbG90LCBXb3JrZmxvd3MsIFZhdWx0IEFuYWx5c2lzLCBUYXNrIFBsYW5uaW5nPC9wPlxuICAgICAgPHA+Rm9yIGhlbHAgYW5kIGRvY3VtZW50YXRpb24sIHZpc2l0IHRoZSBHaXRIdWIgcmVwb3NpdG9yeS48L3A+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnVGVzdGluZyBjb25uZWN0aW9uLi4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWFpbiBoZWFsdGggY2hlY2sgZmFpbGVkIHdpdGggNDAwLCB0cnlpbmcgYWx0ZXJuYXRpdmUgbWV0aG9kJyk7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKCfinIUgQ29ubmVjdGlvbiBzdWNjZXNzZnVsIScsIDMwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShg4p2MIENvbm5lY3Rpb24gZmFpbGVkOiAke3Jlc3BvbnNlLmVycm9yfWAsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShg4p2MIENvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTm90aWNlLCBNYXJrZG93blZpZXcsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfVkFVTFRQSUxPVCA9ICd2YXVsdHBpbG90LXZpZXcnO1xuXG5leHBvcnQgY2xhc3MgVmF1bHRQaWxvdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBzdGF0dXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHF1aWNrQWN0aW9uc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdmF1bHRTdGF0c0VsITogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfVkFVTFRQSUxPVDtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdWYXVsdFBpbG90JztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2JvdCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtdmlldycpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1lvdXIgQUkgYXNzaXN0YW50IGZvciBPYnNpZGlhbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN1YnRpdGxlJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhdHVzIHNlY3Rpb25cbiAgICB0aGlzLnN0YXR1c0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuXG4gICAgLy8gUXVpY2sgYWN0aW9uc1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1xdWljay1hY3Rpb25zJyB9KTtcbiAgICB0aGlzLmNyZWF0ZVF1aWNrQWN0aW9ucygpO1xuXG4gICAgLy8gVmF1bHQgc3RhdHNcbiAgICB0aGlzLnZhdWx0U3RhdHNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXZhdWx0LXN0YXRzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcblxuICAgIC8vIFJlY2VudCBhY3Rpdml0aWVzIChwbGFjZWhvbGRlciBmb3IgZnV0dXJlIGltcGxlbWVudGF0aW9uKVxuICAgIGNvbnN0IGFjdGl2aXRpZXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgQWN0aXZpdGllcycgfSk7XG4gICAgYWN0aXZpdGllc0VsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdBY3Rpdml0eSB0cmFja2luZyBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzKCkge1xuICAgIHRoaXMuc3RhdHVzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24gU3RhdHVzJyB9KTtcblxuICAgIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEJhY2tlbmQgc3RhdHVzXG4gICAgY29uc3QgYmFja2VuZFN0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQmFja2VuZDogJyB9KTtcbiAgICBjb25zdCBiYWNrZW5kSW5kaWNhdG9yID0gYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogJ0NoZWNraW5nLi4uJ1xuICAgIH0pO1xuXG4gICAgLy8gV2ViU29ja2V0IHN0YXR1c1xuICAgIGNvbnN0IHdzU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnV2ViU29ja2V0OiAnIH0pO1xuICAgIGNvbnN0IHdzSW5kaWNhdG9yID0gd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6IHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkgPyAn8J+foiBDb25uZWN0ZWQnIDogJ/CflLQgRGlzY29ubmVjdGVkJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgYmFja2VuZCBzdGF0dXNcbiAgICB0aGlzLmNoZWNrQmFja2VuZFN0YXR1cyhiYWNrZW5kSW5kaWNhdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tCYWNrZW5kU3RhdHVzKGluZGljYXRvcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5+iIENvbm5lY3RlZCc7XG4gICAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBFcnJvcic7XG4gICAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yJztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgT2ZmbGluZSc7XG4gICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVF1aWNrQWN0aW9ucygpIHtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdRdWljayBBY3Rpb25zJyB9KTtcblxuICAgIGNvbnN0IGFjdGlvbnNHcmlkID0gdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCcgfSk7XG5cbiAgICAvLyBDaGF0IGFjdGlvblxuICAgIGNvbnN0IGNoYXRCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CfkqwgT3BlbiBDaGF0JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjaGF0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuQ2hhdE1vZGFsKCk7XG5cbiAgICAvLyBXb3JrZmxvdyBhY3Rpb25cbiAgICBjb25zdCB3b3JrZmxvd0J1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pqZ77iPIEV4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuXG4gICAgLy8gQW5hbHl6ZSB2YXVsdCBhY3Rpb25cbiAgICBjb25zdCBhbmFseXplQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SNIEFuYWx5emUgVmF1bHQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGFuYWx5emVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuXG4gICAgLy8gQ29waWxvdCBhY3Rpb25cbiAgICBjb25zdCBjb3BpbG90QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfinKggR2V0IENvbXBsZXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvcGlsb3RCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGVkaXRvciBmb3VuZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZWZyZXNoIGJ1dHRvblxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoIFN0YXR1cycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFnZW50IGluZm8gaWYgYXZhaWxhYmxlXG4gICAgdGhpcy5sb2FkQWdlbnRJbmZvKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudEluZm8oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zdCBhZ2VudENvdW50ID0gcmVzcG9uc2UuZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUFnZW50cyA9IHJlc3BvbnNlLmRhdGEuZmlsdGVyKChhZ2VudDogYW55KSA9PiBhZ2VudC5hY3RpdmUpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50U3RhdHNFbCA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtc3RhdHMnIH0pO1xuICAgICAgICBhZ2VudFN0YXRzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQXZhaWxhYmxlIEFnZW50cycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudEluZm8gPSBhZ2VudFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pbmZvJyB9KTtcbiAgICAgICAgYWdlbnRJbmZvLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgJHthY3RpdmVBZ2VudHN9LyR7YWdlbnRDb3VudH0gYWN0aXZlYCB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFpbCBpZiBhZ2VudHMgY2FuJ3QgYmUgbG9hZGVkXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC12aWV3LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC12aWV3LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC12aWV3IHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWhlYWRlciB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdWJ0aXRsZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMgaDMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtZXJyb3IsXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7XG4gICAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtaXRlbSB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtbGFiZWwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIGg0IHtcbiAgICAgICAgICBtYXJnaW46IDAgMCA4cHggMDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtaW5mbyB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wbGFjZWhvbGRlciB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzXG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IENoYXRNZXNzYWdlIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBjaGF0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaW5wdXRDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBtZXNzYWdlc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaW5wdXRFbCE6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgc2VuZEJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGN1cnJlbnRDb252ZXJzYXRpb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbWVzc2FnZXM6IENoYXRNZXNzYWdlW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtY2hhdC1tb2RhbCcpO1xuXG4gICAgLy8gTW9kYWwgaGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90IENoYXQnIH0pO1xuICAgIFxuICAgIGNvbnN0IHRvb2xiYXJFbCA9IGhlYWRlckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC10b29sYmFyJyB9KTtcbiAgICBcbiAgICAvLyBDbGVhciBjaGF0IGJ1dHRvblxuICAgIGNvbnN0IGNsZWFyQnRuID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ0NsZWFyIENoYXQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBjbGVhckJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbGVhckNoYXQoKTtcblxuICAgIC8vIEFnZW50IHNlbGVjdG9yICh3aWxsIGJlIHBvcHVsYXRlZCB3aGVuIGFnZW50cyBhcmUgbG9hZGVkKVxuICAgIGNvbnN0IGFnZW50U2VsZWN0ID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JyB9KTtcbiAgICBhZ2VudFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnQXV0by1zZWxlY3QgQWdlbnQnLCB2YWx1ZTogJycgfSk7XG4gICAgdGhpcy5sb2FkQWdlbnRzKGFnZW50U2VsZWN0KTtcblxuICAgIC8vIENoYXQgY29udGFpbmVyXG4gICAgdGhpcy5jaGF0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1jb250YWluZXInIH0pO1xuICAgIFxuICAgIC8vIE1lc3NhZ2VzIGFyZWFcbiAgICB0aGlzLm1lc3NhZ2VzRWwgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2VzJyB9KTtcbiAgICBcbiAgICAvLyBJbnB1dCBjb250YWluZXJcbiAgICB0aGlzLmlucHV0Q29udGFpbmVyID0gdGhpcy5jaGF0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1pbnB1dC1jb250YWluZXInIH0pO1xuICAgIFxuICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdBc2sgbWUgYW55dGhpbmcgYWJvdXQgeW91ciB2YXVsdC4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3Qtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKTtcblxuICAgIC8vIEZvY3VzIHRoZSBpbnB1dFxuICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuXG4gICAgLy8gTG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIHRoaXMubG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKTtcblxuICAgIC8vIEFkZCBzdHlsZXNcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRzKHNlbGVjdEVsOiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGFnZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICAgICAgdGV4dDogYWdlbnQubmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiBhZ2VudC5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCkge1xuICAgIC8vIE9ubHkgdHJ5IHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3RvcnkgaWYgd2UgaGF2ZSBhIGNvbnZlcnNhdGlvbiBJRFxuICAgIGlmICh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcztcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgbm8gY29udmVyc2F0aW9uIElELCBzdGFydCBmcmVzaCAobm8gaGlzdG9yeSB0byBsb2FkKVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZSgpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybjtcblxuICAgIC8vIERpc2FibGUgaW5wdXQgd2hpbGUgcHJvY2Vzc2luZ1xuICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZGluZy4uLic7XG5cbiAgICAvLyBBZGQgdXNlciBtZXNzYWdlIHRvIFVJXG4gICAgdGhpcy5hZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZSk7XG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG5cbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHZhdWx0IGNvbnRleHQgaWYgYXZhaWxhYmxlXG4gICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgIGxldCB2YXVsdENvbnRleHQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgIHZhdWx0Q29udGV4dCA9IGBDdXJyZW50IGZpbGU6ICR7YWN0aXZlRmlsZS5uYW1lfVxcblxcbkNvbnRlbnQ6XFxuJHtjb250ZW50fWA7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmQgdG8gQVBJXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jaGF0KHtcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgY29udmVyc2F0aW9uX2lkOiB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IHZhdWx0Q29udGV4dCxcbiAgICAgICAgYWdlbnRfaWQ6IHRoaXMuZ2V0U2VsZWN0ZWRBZ2VudCgpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCA9IHJlc3BvbnNlLmRhdGEuY29udmVyc2F0aW9uX2lkO1xuICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIHJlc3BvbnNlLmRhdGEucmVzcG9uc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7cmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UnfWApO1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBSZS1lbmFibGUgaW5wdXRcbiAgICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZCc7XG4gICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFNlbGVjdGVkQWdlbnQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBzZWxlY3RFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LWFnZW50LXNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHJldHVybiBzZWxlY3RFbD8udmFsdWUgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRNZXNzYWdlKHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIHRoaXMubWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6IGB2YXVsdHBpbG90LW1lc3NhZ2UgdmF1bHRwaWxvdC1tZXNzYWdlLSR7bWVzc2FnZS5yb2xlfWBcbiAgICB9KTtcblxuICAgIGNvbnN0IHJvbGVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUnLFxuICAgICAgdGV4dDogbWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAnWW91JyA6ICdWYXVsdFBpbG90J1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCdcbiAgICB9KTtcblxuICAgIC8vIFNpbXBsZSBtYXJrZG93biByZW5kZXJpbmcgZm9yIGJhc2ljIGZvcm1hdHRpbmdcbiAgICBjb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bihtZXNzYWdlLmNvbnRlbnQpO1xuXG4gICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wKSB7XG4gICAgICBjb25zdCB0aW1lRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUnLFxuICAgICAgICB0ZXh0OiBuZXcgRGF0ZShtZXNzYWdlLnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckNoYXQoKSB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuZW1wdHkoKTtcbiAgICBuZXcgTm90aWNlKCdDaGF0IGNsZWFyZWQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDYwMHB4O1xuICAgICAgICAgIGhlaWdodDogNzAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1oZWFkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdG9vbGJhciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zZWxlY3Qge1xuICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDgwcHgpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZSB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXVzZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtYXNzaXN0YW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdGltZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc2VuZC1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFdvcmtmbG93UmVxdWVzdCwgV29ya2Zsb3dSZXNwb25zZSwgV29ya2Zsb3dQcm9ncmVzcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV29ya2Zsb3dNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGdvYWxJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgY29udGV4dElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBleGVjdXRlQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgcHJvZ3Jlc3NDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSByZXN1bHRzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaXNFeGVjdXRpbmcgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfimpnvuI8gV29ya2Zsb3cgRXhlY3V0aW9uJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnRGVmaW5lIGEgZ29hbCBhbmQgbGV0IFZhdWx0UGlsb3QgY3JlYXRlIGFuZCBleGVjdXRlIGEgY29tcHJlaGVuc2l2ZSB3b3JrZmxvdyB0byBhY2hpZXZlIGl0LicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRm9ybVxuICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWZvcm0nIH0pO1xuXG4gICAgLy8gR29hbCBpbnB1dFxuICAgIGNvbnN0IGdvYWxDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnR29hbCAqJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmdvYWxJbnB1dCA9IGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdlLmcuLCBcIkNyZWF0ZSBhIGNvbXByZWhlbnNpdmUgc3R1ZHkgcGxhbiBmb3IgbWFjaGluZSBsZWFybmluZyBiYXNlZCBvbiBteSBub3Rlc1wiJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZ29hbC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIENvbnRleHQgaW5wdXRcbiAgICBjb25zdCBjb250ZXh0Q29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0FkZGl0aW9uYWwgQ29udGV4dCAob3B0aW9uYWwpJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHRJbnB1dCA9IGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdQcm92aWRlIGFueSBhZGRpdGlvbmFsIGNvbnRleHQsIGNvbnN0cmFpbnRzLCBvciByZXF1aXJlbWVudHMuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jb250ZXh0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gVmF1bHQgY29udGVudCBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdWYXVsdCBJbnRlZ3JhdGlvbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWN0aXZlRmlsZSA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhY3RpdmVGaWxlQ2hlY2tib3ggPSBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFjdGl2ZSBmaWxlIGNvbnRlbnQnIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFsbEZpbGVzID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFsbEZpbGVzQ2hlY2tib3ggPSBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWxsIHZhdWx0IGZpbGVzIChtYXkgdGFrZSBsb25nZXIpJyB9KTtcblxuICAgIC8vIEV4ZWN1dGUgYnV0dG9uXG4gICAgdGhpcy5leGVjdXRlQnV0dG9uID0gZm9ybUVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24nXG4gICAgfSk7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmV4ZWN1dGVXb3JrZmxvdyhhY3RpdmVGaWxlQ2hlY2tib3guY2hlY2tlZCwgYWxsRmlsZXNDaGVja2JveC5jaGVja2VkKTtcblxuICAgIC8vIFByb2dyZXNzIGNvbnRhaW5lclxuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBSZXN1bHRzIGNvbnRhaW5lclxuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBGb2N1cyB0aGUgZ29hbCBpbnB1dFxuICAgIHRoaXMuZ29hbElucHV0LmZvY3VzKCk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlV29ya2Zsb3coaW5jbHVkZUFjdGl2ZUZpbGU6IGJvb2xlYW4sIGluY2x1ZGVBbGxGaWxlczogYm9vbGVhbikge1xuICAgIGNvbnN0IGdvYWwgPSB0aGlzLmdvYWxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFnb2FsKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSBnb2FsIGZvciB0aGUgd29ya2Zsb3cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzRXhlY3V0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRpbmcuLi4nO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJlcGFyZSB2YXVsdCBjb250ZW50XG4gICAgICBsZXQgdmF1bHRDb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIGlmIChpbmNsdWRlQWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2FjdGl2ZUZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGluY2x1ZGVBbGxGaWxlcykge1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDIwKSkgeyAvLyBMaW1pdCB0byBmaXJzdCAyMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgd29ya2Zsb3cgcmVxdWVzdFxuICAgICAgY29uc3QgcmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0ID0ge1xuICAgICAgICBnb2FsLFxuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHRJbnB1dC52YWx1ZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuICAgICAgICB2YXVsdF9jb250ZW50OiB2YXVsdENvbnRlbnQgfHwgdW5kZWZpbmVkXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBXZWJTb2NrZXQgbGlzdGVuZXIgZm9yIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpKSB7XG4gICAgICAgIC8vIExpc3RlbiBmb3Igd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICB0aGlzLnNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudCEuZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3QpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGlzcGxheVJlc3VsdHMocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1dvcmtmbG93IGV4ZWN1dGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3cgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcihlcnJvck1zZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNFeGVjdXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGUgV29ya2Zsb3cnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY29ubmVjdGVkIHRvIHRoZSBXZWJTb2NrZXQgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgIC8vIEZvciBub3csIHdlJ2xsIHNpbXVsYXRlIHByb2dyZXNzXG4gICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0FuYWx5emluZyBnb2FsIGFuZCBjb250ZXh0Li4uJyk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnUGxhbm5pbmcgd29ya2Zsb3cgc3RlcHMuLi4nKTtcbiAgICB9LCAxMDAwKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdFeGVjdXRpbmcgd29ya2Zsb3cuLi4nKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheVByb2dyZXNzKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyXCI+PC9kaXY+XG4gICAgICAgIDxzcGFuPiR7bWVzc2FnZX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkaXNwbGF5UmVzdWx0cyh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyByZXN1bHRzXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfinIUgV29ya2Zsb3cgQ29tcGxldGVkJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRXhlY3V0aW9uIHRpbWU6ICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c2AsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gTWFpbiByZXN1bHRcbiAgICBjb25zdCByZXN1bHRFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC1jb250ZW50JyB9KTtcbiAgICByZXN1bHRFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdSZXN1bHQnIH0pO1xuICAgIGNvbnN0IHJlc3VsdENvbnRlbnRFbCA9IHJlc3VsdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LXRleHQnIH0pO1xuICAgIHJlc3VsdENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKHdvcmtmbG93LnJlc3VsdCk7XG5cbiAgICAvLyBTdGVwcyB0YWtlblxuICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdGVwc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyJyB9KTtcbiAgICAgIHN0ZXBzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3RlcHMgVGFrZW4nIH0pO1xuICAgICAgY29uc3Qgc3RlcHNMaXN0ID0gc3RlcHNFbC5jcmVhdGVFbCgnb2wnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtbGlzdCcgfSk7XG4gICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKHN0ZXAgPT4ge1xuICAgICAgICBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBzdGVwIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQXJ0aWZhY3RzXG4gICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYXJ0aWZhY3RzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyJyB9KTtcbiAgICAgIGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0dlbmVyYXRlZCBBcnRpZmFjdHMnIH0pO1xuICAgICAgXG4gICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaCgoYXJ0aWZhY3QsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGFydGlmYWN0RWwgPSBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0JyB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6IGFydGlmYWN0LnRpdGxlIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICB0ZXh0OiBgVHlwZTogJHthcnRpZmFjdC50eXBlfWAsXG4gICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1NhdmUgYXMgTm90ZScsXG4gICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0LCBpbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGFsbCBidXR0b25cbiAgICBjb25zdCBhY3Rpb25zRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMnIH0pO1xuICAgIGNvbnN0IHNhdmVBbGxCdXR0b24gPSBhY3Rpb25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlIENvbXBsZXRlIFJlc3VsdHMgYXMgTm90ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVBbGxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdDogYW55LCBpbmRleDogbnVtYmVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7YXJ0aWZhY3QudGl0bGUucmVwbGFjZSgvW15hLXpBLVowLTlcXHNdL2csICcnKX0ubWRgO1xuICAgICAgY29uc3QgY29udGVudCA9IGAjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fWA7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBBcnRpZmFjdCBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSBhcnRpZmFjdDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgIFxuICAgICAgbGV0IGNvbnRlbnQgPSBgIyBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipHb2FsOioqICR7dGhpcy5nb2FsSW5wdXQudmFsdWV9XFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqRXhlY3V0aW9uIFRpbWU6KiogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCMjIFJlc3VsdFxcblxcbiR7d29ya2Zsb3cucmVzdWx0fVxcblxcbmA7XG4gICAgICBcbiAgICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIFN0ZXBzIFRha2VuXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAke2luZGV4ICsgMX0uICR7c3RlcH1cXG5gO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGVudCArPSAnXFxuJztcbiAgICAgIH1cblxuICAgICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBHZW5lcmF0ZWQgQXJ0aWZhY3RzXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goYXJ0aWZhY3QgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1cXG5cXG5gO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYENvbXBsZXRlIHJlc3VsdHMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgcmVzdWx0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1lcnJvclwiPlxuICAgICAgICA8aDM+4p2MIFdvcmtmbG93IEZhaWxlZDwvaDM+XG4gICAgICAgIDxwPiR7bWVzc2FnZX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDcwMHB4O1xuICAgICAgICAgIG1heC1oZWlnaHQ6IDgwdmg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWdyb3VwIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZ29hbC1pbnB1dCxcbiAgICAgICAgLnZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwgaW5wdXQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyIHtcbiAgICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtdGV4dCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcixcbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1saXN0IHtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3Qge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0LXR5cGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1lcnJvciB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgXG4gIEFQSVJlc3BvbnNlLCBcbiAgQ2hhdFJlcXVlc3QsIFxuICBDaGF0UmVzcG9uc2UsIFxuICBDb252ZXJzYXRpb25IaXN0b3J5LFxuICBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCxcbiAgQ29waWxvdFJlcXVlc3QsIFxuICBDb3BpbG90UmVzcG9uc2UsXG4gIFdvcmtmbG93UmVxdWVzdCxcbiAgV29ya2Zsb3dSZXNwb25zZSxcbiAgQWdlbnQsXG4gIEFnZW50Q3JlYXRlUmVxdWVzdCxcbiAgQWdlbnRFeGVjdXRlUmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVzcG9uc2UsXG4gIFRhc2tQbGFubmluZ1JlcXVlc3QsXG4gIFRhc2tQbGFubmluZ1Jlc3BvbnNlLFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2UsXG4gIE1lbW9yeVVwZGF0ZVJlcXVlc3QsXG4gIFdlYlNvY2tldE1lc3NhZ2UsXG4gIEVycm9yUmVzcG9uc2Vcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBFdm9BZ2VudFhDbGllbnQge1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBhcGlLZXk/OiBzdHJpbmc7XG4gIHByaXZhdGUgd2Vic29ja2V0PzogV2ViU29ja2V0O1xuICBwcml2YXRlIHdzQ2FsbGJhY2tzOiBNYXA8c3RyaW5nLCAoZGF0YTogYW55KSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTsgLy8gUmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0PFQ+KFxuICAgIGVuZHBvaW50OiBzdHJpbmcsIFxuICAgIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge31cbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZTxUPj4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0ke2VuZHBvaW50fWA7XG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgLi4uKG9wdGlvbnMuaGVhZGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHx8IHt9KSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEhhbmRsZSBub24tSlNPTiByZXNwb25zZXMgZ3JhY2VmdWxseVxuICAgICAgbGV0IGRhdGE7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgIGlmIChjb250ZW50VHlwZSAmJiBjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhLmVycm9yIFxuICAgICAgICAgID8gZGF0YS5lcnJvciBcbiAgICAgICAgICA6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWA7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmVycm9yKGBBUEkgRXJyb3IgWyR7cmVzcG9uc2Uuc3RhdHVzfV06YCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyB7IG1lc3NhZ2U6IGRhdGEgfSBhcyBUIDogZGF0YSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBSZXF1ZXN0IEVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlYWx0aCBjaGVja1xuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmc7IHZlcnNpb246IHN0cmluZyB9Pj4ge1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIGhlYWx0aCBjaGVjayB0byAke3RoaXMuYmFzZVVybH0vYXBpL29ic2lkaWFuL2hlYWx0aGApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+KCcvYXBpL29ic2lkaWFuL2hlYWx0aCcsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEhlYWx0aCBjaGVjayByZXN1bHQ6JywgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gQWx0ZXJuYXRpdmUgaGVhbHRoIGNoZWNrIG1ldGhvZCBpZiB0aGUgbWFpbiBvbmUgZmFpbHNcbiAgYXN5bmMgc2ltcGxlSGVhbHRoQ2hlY2soKTogUHJvbWlzZTxBUElSZXNwb25zZTx7IHN0YXR1czogc3RyaW5nIH0+PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vYXBpL29ic2lkaWFuL2hlYWx0aGA7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdIRUFEJyxcbiAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vayB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQwNSkgeyAvLyA0MDUgbWVhbnMgc2VydmVyIGlzIHVwIGJ1dCBkb2Vzbid0IHN1cHBvcnQgSEVBRFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdvaycgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWBcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnQ29ubmVjdGlvbiBmYWlsZWQnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIENoYXQgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBjaGF0KHJlcXVlc3Q6IENoYXRSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDaGF0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY2hhdCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRDb252ZXJzYXRpb25IaXN0b3J5KGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsIGxpbWl0OiBudW1iZXIgPSA1MCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29udmVyc2F0aW9uSGlzdG9yeT4+IHtcbiAgICBjb25zdCByZXF1ZXN0Qm9keTogQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QgPSB7XG4gICAgICBjb252ZXJzYXRpb25faWQ6IGNvbnZlcnNhdGlvbklkLFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgaW5jbHVkZV9tZXNzYWdlczogdHJ1ZVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9uL2hpc3RvcnknLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KGAvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQ29waWxvdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKHJlcXVlc3Q6IENvcGlsb3RSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDb3BpbG90UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29waWxvdC9jb21wbGV0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBXb3JrZmxvdyBleGVjdXRpb25cbiAgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8V29ya2Zsb3dSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi93b3JrZmxvdycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gIGFzeW5jIGdldEFnZW50cygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50W10+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVBZ2VudChyZXF1ZXN0OiBBZ2VudENyZWF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cy9jcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUFnZW50KHJlcXVlc3Q6IEFnZW50RXhlY3V0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudC9leGVjdXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhdWx0IGFuYWx5c2lzXG4gIGFzeW5jIGFuYWx5emVWYXVsdENvbnRleHQocmVxdWVzdDogVmF1bHRDb250ZXh0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VmF1bHRDb250ZXh0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvY29udGV4dCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBUYXNrIHBsYW5uaW5nXG4gIGFzeW5jIHBsYW5UYXNrcyhyZXF1ZXN0OiBUYXNrUGxhbm5pbmdSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxUYXNrUGxhbm5pbmdSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9wbGFubmluZy90YXNrcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbGxpZ2VuY2UgcGFyc2luZ1xuICBhc3luYyBwYXJzZUludGVsbGlnZW5jZShyZXF1ZXN0OiBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1lbW9yeSBtYW5hZ2VtZW50XG4gIGFzeW5jIHVwZGF0ZU1lbW9yeShyZXF1ZXN0OiBNZW1vcnlVcGRhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL21lbW9yeS91cGRhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IGZ1bmN0aW9uYWxpdHlcbiAgY29ubmVjdFdlYlNvY2tldChjYWxsYmFja3M6IHtcbiAgICBvbkNoYXQ/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uV29ya2Zsb3dQcm9ncmVzcz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Db3BpbG90PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvblZhdWx0U3luYz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIG9uQ29ubmVjdD86ICgpID0+IHZvaWQ7XG4gICAgb25EaXNjb25uZWN0PzogKCkgPT4gdm9pZDtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHdzVXJsID0gdGhpcy5iYXNlVXJsLnJlcGxhY2UoJ2h0dHAnLCAnd3MnKSArICcvd3Mvb2JzaWRpYW4nO1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvICR7d3NVcmx9YCk7XG4gICAgXG4gICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcpO1xuICAgICAgY2FsbGJhY2tzLm9uQ29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNoYXQ/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd29ya2Zsb3dfcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV29ya2Zsb3dQcm9ncmVzcz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3BpbG90JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNvcGlsb3Q/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndmF1bHRfc3luYyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25WYXVsdFN5bmM/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IEVycm9yIHBhcnNpbmcgV2ViU29ja2V0IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdGYWlsZWQgdG8gcGFyc2UgV2ViU29ja2V0IG1lc3NhZ2UnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBkaXNjb25uZWN0ZWQgZnJvbSBFdm9BZ2VudFgnLCBldmVudC5jb2RlLCBldmVudC5yZWFzb24pO1xuICAgICAgY2FsbGJhY2tzLm9uRGlzY29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvcicpO1xuICAgIH07XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCkge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuY2xvc2UoKTtcbiAgICAgIHRoaXMud2Vic29ja2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNlbmRXZWJTb2NrZXRNZXNzYWdlKHR5cGU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZSwgZGF0YSB9KSk7XG4gICAgfVxuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Py5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBURmlsZSwgRWRpdG9yUG9zaXRpb24sIHJlcXVlc3QgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ1RhYiwgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVklFV19UWVBFX1ZBVUxUUElMT1QsIFZhdWx0UGlsb3RWaWV3IH0gZnJvbSAnLi92aWV3JztcbmltcG9ydCB7IENoYXRNb2RhbCB9IGZyb20gJy4vY2hhdC1tb2RhbCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGFsIH0gZnJvbSAnLi93b3JrZmxvdy1tb2RhbCc7XG5pbXBvcnQgeyBFdm9BZ2VudFhDbGllbnQgfSBmcm9tICcuL2FwaS1jbGllbnQnO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzLCBDb3BpbG90UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZldGNoU2NoZWR1bGUsIGluamVjdFNjaGVkdWxlLCB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24gfSBmcm9tICcuL3BsYW5uZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYXVsdFBpbG90UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3MhOiBWYXVsdFBpbG90U2V0dGluZ3M7XG4gIGFwaUNsaWVudCE6IEV2b0FnZW50WENsaWVudDtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb3BpbG90RW5hYmxlZCA9IGZhbHNlO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBBUEkgY2xpZW50XG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuXG4gICAgLy8gVGVzdCBiYWNrZW5kIGNvbm5lY3Rpb25cbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKCfinIUgVmF1bHRQaWxvdCBjb25uZWN0ZWQgdG8gRXZvQWdlbnRYJywgMzAwMCk7XG4gICAgICAgIC8vIENvbm5lY3QgV2ViU29ja2V0IGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KSB7XG4gICAgICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWx0aCBjaGVjayBmYWlsZWQ6JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gRXZvQWdlbnRYIGJhY2tlbmQgb2ZmbGluZSAtIHNvbWUgZmVhdHVyZXMgbWF5IG5vdCB3b3JrJywgNTAwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWx0aCBjaGVjayBlcnJvcjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCfimqDvuI8gQ2Fubm90IGNvbm5lY3QgdG8gRXZvQWdlbnRYIGJhY2tlbmQnLCA1MDAwKTtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciB2aWV3XG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfVkFVTFRQSUxPVCxcbiAgICAgIChsZWFmKSA9PiBuZXcgVmF1bHRQaWxvdFZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuXG4gICAgLy8gQWRkIHJpYmJvbiBpY29uXG4gICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdib3QnLCAnVmF1bHRQaWxvdCcsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIHRoaXMub3BlbkNoYXRNb2RhbCgpO1xuICAgIH0pO1xuICAgIHJpYmJvbkljb25FbC5hZGRDbGFzcygndmF1bHRwaWxvdC1yaWJib24tY2xhc3MnKTtcblxuICAgIC8vIFJlZ2lzdGVyIGNvbW1hbmRzXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1jaGF0JyxcbiAgICAgIG5hbWU6ICdPcGVuIENoYXQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlbkNoYXRNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdleGVjdXRlLXdvcmtmbG93JyxcbiAgICAgIG5hbWU6ICdFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5Xb3JrZmxvd01vZGFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2FuYWx5emUtdmF1bHQnLFxuICAgICAgbmFtZTogJ0FuYWx5emUgQ3VycmVudCBWYXVsdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hbmFseXplVmF1bHQoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnY29waWxvdC1jb21wbGV0ZScsXG4gICAgICBuYW1lOiAnR2V0IEFJIENvbXBsZXRpb24nLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5nZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdxdWljay1jaGF0JyxcbiAgICAgIG5hbWU6ICdRdWljayBDaGF0IHdpdGggU2VsZWN0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMucXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLXRhc2tzJyxcbiAgICAgIG5hbWU6ICdQbGFuIFRhc2tzIGZyb20gTm90ZScsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tbXktZGF5JyxcbiAgICAgIG5hbWU6ICdQbGFuIE15IERheScsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5wbGFuTXlEYXkoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi12YXVsdHBpbG90LXZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBWaWV3JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpXG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBlZGl0b3IgZXZlbnRzIGZvciBjb3BpbG90XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCAmJiB0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZhdWx0UGlsb3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBNYW5hZ2VtZW50XG4gIGNvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSByZXR1cm47XG5cbiAgICB0aGlzLmFwaUNsaWVudC5jb25uZWN0V2ViU29ja2V0KHtcbiAgICAgIG9uQ2hhdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjaGF0IHVwZGF0ZXNcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjaGF0IHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbldvcmtmbG93UHJvZ3Jlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93OiAke2RhdGEuc3RlcH1gLCAyMDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvcGlsb3Q6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBjb3BpbG90IHN1Z2dlc3Rpb25zXG4gICAgICAgIHRoaXMuaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25WYXVsdFN5bmM6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB2YXVsdCBzeW5jaHJvbml6YXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IHN5bmMgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICBuZXcgTm90aWNlKGBXZWJTb2NrZXQgZXJyb3I6ICR7ZXJyb3J9YCwgNTAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGNvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25EaXNjb25uZWN0OiAoKSA9PiB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICB0aGlzLmFwaUNsaWVudC5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldENvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIE1vZGFsIE1hbmFnZW1lbnRcbiAgb3BlbkNoYXRNb2RhbCgpIHtcbiAgICBuZXcgQ2hhdE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICBvcGVuV29ya2Zsb3dNb2RhbCgpIHtcbiAgICBuZXcgV29ya2Zsb3dNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgLy8gQ29tbWFuZCBJbXBsZW1lbnRhdGlvbnNcbiAgYXN5bmMgYW5hbHl6ZVZhdWx0KCkge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ0FuYWx5emluZyB2YXVsdC4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIC8vIEluY2x1ZGUgdXAgdG8gMTAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAxMCkpIHtcbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICBjb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7ZmlsZUNvbnRlbnR9XFxuXFxuYDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5hbmFseXplVmF1bHRDb250ZXh0KHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYW5hbHlzaXNfdHlwZTogJ2luc2lnaHRzJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuYWx5c2lzIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0IEFuYWx5c2lzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgYW5hbHlzaXNDb250ZW50ID0gYCMgVmF1bHQgQW5hbHlzaXMgLSAke3RpbWVzdGFtcH1cXG5cXG5gO1xuICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEFuYWx5c2lzXFxuXFxuJHtyZXNwb25zZS5kYXRhLmFuYWx5c2lzfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pbnNpZ2h0cyAmJiByZXNwb25zZS5kYXRhLmluc2lnaHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIEtleSBJbnNpZ2h0c1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5mb3JFYWNoKGluc2lnaHQgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7aW5zaWdodH1cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSAnXFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucyAmJiByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBSZWNvbW1lbmRhdGlvbnNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke3JlY31cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBhbmFseXNpc0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBWYXVsdCBhbmFseXNpcyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdBbmFseXNpcyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYEFuYWx5c2lzIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0NvcGlsb3QgaXMgZGlzYWJsZWQgaW4gc2V0dGluZ3MnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgdGV4dEJlZm9yZUN1cnNvciA9IGN1cnJlbnRMaW5lLnN1YnN0cmluZygwLCBjdXJzb3IuY2gpO1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gZWRpdG9yLmdldFZhbHVlKCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bicsXG4gICAgICAgIGNvbnRleHQ6IHRleHRCZWZvcmVDdXJzb3JcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCBjb21wbGV0aW9uIGF0IGN1cnNvclxuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKHJlc3BvbnNlLmRhdGEuY29tcGxldGlvbiwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQ29tcGxldGlvbiBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ29waWxvdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBxdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyB0ZXh0IHNlbGVjdGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY2hhdCh7XG4gICAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgZXhwbGFpbiBvciBhbmFseXplIHRoaXMgdGV4dDogXCIke3NlbGVjdGlvbn1cImAsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IGVkaXRvci5nZXRWYWx1ZSgpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgcmVzcG9uc2UgYmVsb3cgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XG4gICAgICAgIGNvbnN0IG5ld0xpbmUgPSBgXFxuXFxuKipWYXVsdFBpbG90IEFuYWx5c2lzOioqXFxuJHtyZXNwb25zZS5kYXRhLnJlc3BvbnNlfVxcblxcbmA7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobmV3TGluZSwgY3Vyc29yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnQW5hbHlzaXMgaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhblRhc2tzRnJvbU5vdGUoZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gY29udGVudCB0byBhbmFseXplJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgdGFza3MuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnBsYW5UYXNrcyh7XG4gICAgICAgIGdvYWw6IGBDcmVhdGUgYSB0YXNrIHBsYW4gYmFzZWQgb24gdGhpcyBub3RlOiAke2FjdGl2ZUZpbGU/Lm5hbWUgfHwgJ1VudGl0bGVkJ31gLFxuICAgICAgICBjb250ZXh0OiBjb250ZW50LFxuICAgICAgICB0aW1lZnJhbWU6ICcxIHdlZWsnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgdGFzayBwbGFuIG5vdGVcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFRhc2sgUGxhbiAtICR7YWN0aXZlRmlsZT8uYmFzZW5hbWUgfHwgJ1VudGl0bGVkJ30gLSAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRhc2tDb250ZW50ID0gYCMgJHtyZXNwb25zZS5kYXRhLnBsYW4udGl0bGV9XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7cmVzcG9uc2UuZGF0YS5wbGFuLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAqKkVzdGltYXRlZCBEdXJhdGlvbjoqKiAke3Jlc3BvbnNlLmRhdGEucGxhbi5lc3RpbWF0ZWRfZHVyYXRpb259XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnBsYW4udGFza3MgJiYgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgVGFza3NcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5mb3JFYWNoKCh0YXNrOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGFzay5zdGF0dXMgPT09ICdjb21wbGV0ZWQnID8gJ1t4XScgOiAnWyBdJztcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAke2NoZWNrYm94fSAqKiR7dGFzay50aXRsZX0qKiAoJHt0YXNrLnByaW9yaXR5fSBwcmlvcml0eSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgICR7dGFzay5kZXNjcmlwdGlvbn1cXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgICpFc3RpbWF0ZWQgdGltZTogJHt0YXNrLmVzdGltYXRlZF90aW1lfSpcXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcyAmJiByZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAjIyBNaWxlc3RvbmVzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMuZm9yRWFjaCgobWlsZXN0b25lOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAtICoqJHttaWxlc3RvbmUudGl0bGV9KiogKCR7bWlsZXN0b25lLnRhcmdldF9kYXRlfSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgJHttaWxlc3RvbmUuZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgdGFza0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW4gc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnVGFzayBwbGFubmluZyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFRhc2sgcGxhbm5pbmcgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGxhbk15RGF5KCkge1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIG5vdGXigJRvcGVuIHRvZGF5XFwncyBkYWlseSBub3RlIGZpcnN0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHlvdXIgZGF5Li4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUmVhZCB0aGUgZW50aXJlIGZpbGUgY29udGVudFxuICAgICAgY29uc3QgZmlsZVRleHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCBzY2hlZHVsZSBmcm9tIEFQSVxuICAgICAgY29uc3QgeyBzY2hlZHVsZU1hcmtkb3duLCBoZWFkbGluZSB9ID0gYXdhaXQgZmV0Y2hTY2hlZHVsZShmaWxlVGV4dCk7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHRoZSByZXR1cm5lZCBzY2hlZHVsZVxuICAgICAgaWYgKCF2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNjaGVkdWxlIGRhdGEgcmVjZWl2ZWQgZnJvbSBBUEknKTtcbiAgICAgIH1cblxuICAgICAgLy8gSW5qZWN0IHRoZSBzY2hlZHVsZSBpbnRvIHRoZSBub3RlXG4gICAgICBjb25zdCB1cGRhdGVkVGV4dCA9IGluamVjdFNjaGVkdWxlKGZpbGVUZXh0LCBzY2hlZHVsZU1hcmtkb3duKTtcblxuICAgICAgLy8gVXBkYXRlIHRoZSBmaWxlXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZFRleHQpO1xuXG4gICAgICAvLyBIaWRlIHRoZSBwcm9ncmVzcyBub3RpY2VcbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIC8vIFNob3cgc3VjY2VzcyBub3RpY2VcbiAgICAgIGNvbnN0IHN1Y2Nlc3NNZXNzYWdlID0gaGVhZGxpbmUgPyBgJHtoZWFkbGluZX0g4pyFYCA6ICdTY2hlZHVsZSBpbnNlcnRlZCDinIUnO1xuICAgICAgbmV3IE5vdGljZShzdWNjZXNzTWVzc2FnZSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0eXBlcyBvZiBlcnJvcnNcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdKU09OJykpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmVyIEFQSSBlcnJvcjogSW52YWxpZCByZXNwb25zZSBmb3JtYXQnKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmsnKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uZXIgQVBJIGVycm9yOiBVbmFibGUgdG8gY29ubmVjdCB0byBsb2NhbGhvc3Q6MzAwMCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYFBsYW5uZXIgQVBJIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uZXIgQVBJIGVycm9yOiBVbmtub3duIGVycm9yIG9jY3VycmVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgYXdhaXQgcmlnaHRMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgdHlwZTogVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWF2ZXNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEF1dG8tY29tcGxldGlvbiBoYW5kbGluZ1xuICBwcml2YXRlIGhhbmRsZUtleVVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20tY29udGVudCcpKSByZXR1cm47XG5cbiAgICAvLyBEZWJvdW5jZSBhdXRvLWNvbXBsZXRpb24gcmVxdWVzdHNcbiAgICBjbGVhclRpbWVvdXQoKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0KTtcbiAgICAodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckF1dG9Db21wbGV0aW9uKCk7XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRyaWdnZXJBdXRvQ29tcGxldGlvbigpIHtcbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcblxuICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBcbiAgICAvLyBPbmx5IHRyaWdnZXIgaWYgbGluZSBoYXMgc29tZSBjb250ZW50IGFuZCBjdXJzb3IgaXMgYXQgZW5kXG4gICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKS5sZW5ndGggPCAzIHx8IGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGVkaXRvci5nZXRWYWx1ZSgpLFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIChmb3Igbm93IGp1c3Qgc2hvdyBmaXJzdCBzdWdnZXN0aW9uKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBTdWdnZXN0aW9uOiAke3Jlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnNbMF19YCwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFpbCBmb3IgYXV0by1jb21wbGV0aW9uXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXV0by1jb21wbGV0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGE6IENvcGlsb3RSZXNwb25zZSkge1xuICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY29waWxvdCBzdWdnZXN0aW9ucyBmcm9tIFdlYlNvY2tldFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgbmV3IE5vdGljZShgTGl2ZSBzdWdnZXN0aW9uOiAke2RhdGEuY29tcGxldGlvbn1gLCAyMDAwKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXR0aW5ncyBtYW5hZ2VtZW50XG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBBUEkgY2xpZW50IGlmIFVSTCBjaGFuZ2VkXG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuICAgIFxuICAgIC8vIFJlY29ubmVjdCBXZWJTb2NrZXQgaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiAhdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBwbGFubmVyIGZlYXR1cmVcbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlc3BvbnNlIHtcbiAgc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nO1xuICBoZWFkbGluZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5uZXJSZXF1ZXN0IHtcbiAgbm90ZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZldGNoZXMgc2NoZWR1bGUgZGF0YSBmcm9tIHRoZSBwbGFubmVyIEFQSVxuICogQHBhcmFtIG5vdGVUZXh0IC0gVGhlIGZ1bGwgdGV4dCBvZiB0aGUgYWN0aXZlIG5vdGVcbiAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCB0aGUgc2NoZWR1bGUgbWFya2Rvd24gYW5kIGhlYWRsaW5lXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFNjaGVkdWxlKG5vdGVUZXh0OiBzdHJpbmcpOiBQcm9taXNlPFBsYW5uZXJSZXNwb25zZT4ge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9wbGFuZGF5JyxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5vdGU6IG5vdGVUZXh0IH0pXG4gIH0pO1xuXG4gIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbn1cblxuLyoqXG4gKiBGaW5kcyBhbmQgZXh0cmFjdHMgdGhlIFNjaGVkdWxlIHNlY3Rpb24gZnJvbSBub3RlIHRleHRcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIGZ1bGwgbm90ZSB0ZXh0XG4gKiBAcmV0dXJucyBNYXRjaCByZXN1bHQgd2l0aCBzY2hlZHVsZSBzZWN0aW9uIGRldGFpbHMgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFNjaGVkdWxlU2VjdGlvbih0ZXh0OiBzdHJpbmcpOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCB7XG4gIC8vIEZpcnN0IHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGFyZSBleGFjdGx5IFwiIyMgU2NoZWR1bGVcIiAod2l0aCBvcHRpb25hbCBjb250ZW50IGFmdGVyKVxuICBsZXQgc2NoZWR1bGVSZWdleCA9IC8oXiMjXFxzK1NjaGVkdWxlXFxiW15cXG5dKlxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgbGV0IG1hdGNoID0gdGV4dC5tYXRjaChzY2hlZHVsZVJlZ2V4KTtcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuICBcbiAgLy8gSWYgbm8gZXhhY3QgbWF0Y2gsIHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGNvbnRhaW4gXCJTY2hlZHVsZVwiIGFzIGEgd29yZFxuICBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMqKD86LipcXHMpP1xcYlNjaGVkdWxlXFxiKD86XFxzLiopPyRcXG4pKFtcXHNcXFNdKj8pKD89XFxuIyNcXHN8JCkvaW07XG4gIHJldHVybiB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xufVxuXG4vKipcbiAqIEluamVjdHMgb3IgcmVwbGFjZXMgdGhlIHNjaGVkdWxlIHNlY3Rpb24gaW4gdGhlIG5vdGUgdGV4dFxuICogQHBhcmFtIG9yaWdpbmFsVGV4dCAtIFRoZSBvcmlnaW5hbCBub3RlIHRleHRcbiAqIEBwYXJhbSBzY2hlZHVsZU1hcmtkb3duIC0gVGhlIG5ldyBzY2hlZHVsZSBjb250ZW50IHRvIGluamVjdFxuICogQHJldHVybnMgVXBkYXRlZCBub3RlIHRleHQgd2l0aCB0aGUgbmV3IHNjaGVkdWxlIHNlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluamVjdFNjaGVkdWxlKG9yaWdpbmFsVGV4dDogc3RyaW5nLCBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBtYXRjaCA9IGZpbmRTY2hlZHVsZVNlY3Rpb24ob3JpZ2luYWxUZXh0KTtcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIC8vIFJlcGxhY2UgZXhpc3Rpbmcgc2NoZWR1bGUgc2VjdGlvbiAoa2VlcCBoZWFkaW5nLCByZXBsYWNlIGNvbnRlbnQpXG4gICAgY29uc3QgW2Z1bGxNYXRjaCwgaGVhZGluZ10gPSBtYXRjaDtcbiAgICBjb25zdCByZXBsYWNlbWVudCA9IGhlYWRpbmcgKyBzY2hlZHVsZU1hcmtkb3duO1xuICAgIHJldHVybiBvcmlnaW5hbFRleHQucmVwbGFjZShmdWxsTWF0Y2gsIHJlcGxhY2VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBBcHBlbmQgbmV3IHNjaGVkdWxlIHNlY3Rpb25cbiAgICBjb25zdCBuZXdTZWN0aW9uID0gYFxcblxcbiMjIFNjaGVkdWxlXFxuJHtzY2hlZHVsZU1hcmtkb3dufWA7XG4gICAgcmV0dXJuIG9yaWdpbmFsVGV4dCArIG5ld1NlY3Rpb247XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgdGhlIHNjaGVkdWxlIG1hcmtkb3duIGlzIHByb3Blcmx5IGZvcm1hdHRlZFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgc2NoZWR1bGUgY29udGVudCB0byB2YWxpZGF0ZVxuICogQHJldHVybnMgVHJ1ZSBpZiB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIEJhc2ljIHZhbGlkYXRpb24gLSBjaGVjayBpZiBpdCdzIG5vdCBlbXB0eSBhbmQgY29udGFpbnMgc29tZSBjb250ZW50XG4gIHJldHVybiBzY2hlZHVsZU1hcmtkb3duLnRyaW0oKS5sZW5ndGggPiAwO1xufVxuIl0sIm5hbWVzIjpbIkRFRkFVTFRfU0VUVElOR1MiLCJiYWNrZW5kVXJsIiwiYXBpS2V5IiwiZW5hYmxlV2ViU29ja2V0IiwiZW5hYmxlQ29waWxvdCIsImVuYWJsZUF1dG9Db21wbGV0ZSIsImRlZmF1bHRBZ2VudCIsImNoYXRIaXN0b3J5TGltaXQiLCJkZWJ1Z01vZGUiLCJWYXVsdFBpbG90U2V0dGluZ1RhYiIsIlBsdWdpblNldHRpbmdUYWIiLCJjb25zdHJ1Y3RvciIsImFwcCIsInBsdWdpbiIsInN1cGVyIiwidGhpcyIsImRpc3BsYXkiLCJjb250YWluZXJFbCIsImVtcHR5IiwiY3JlYXRlRWwiLCJ0ZXh0IiwiU2V0dGluZyIsInNldE5hbWUiLCJzZXREZXNjIiwiYWRkVGV4dCIsInNldFBsYWNlaG9sZGVyIiwic2V0VmFsdWUiLCJzZXR0aW5ncyIsIm9uQ2hhbmdlIiwidmFsdWUiLCJfX2F3YWl0ZXIiLCJzYXZlU2V0dGluZ3MiLCJhZGRCdXR0b24iLCJidXR0b24iLCJzZXRCdXR0b25UZXh0Iiwib25DbGljayIsInRlc3RDb25uZWN0aW9uIiwiYWRkVG9nZ2xlIiwidG9nZ2xlIiwiY29ubmVjdFdlYlNvY2tldCIsImRpc2Nvbm5lY3RXZWJTb2NrZXQiLCJhZGRTbGlkZXIiLCJzbGlkZXIiLCJzZXRMaW1pdHMiLCJzZXREeW5hbWljVG9vbHRpcCIsImNscyIsImlubmVySFRNTCIsIm5vdGljZSIsIk5vdGljZSIsInJlc3BvbnNlIiwiYXBpQ2xpZW50IiwiaGVhbHRoQ2hlY2siLCJzdWNjZXNzIiwiZXJyb3IiLCJfYSIsImluY2x1ZGVzIiwiY29uc29sZSIsIndhcm4iLCJzaW1wbGVSZXNwb25zZSIsInNpbXBsZUhlYWx0aENoZWNrIiwiZGF0YSIsInN0YXR1cyIsInZlcnNpb24iLCJoaWRlIiwiRXJyb3IiLCJtZXNzYWdlIiwiVklFV19UWVBFX1ZBVUxUUElMT1QiLCJWYXVsdFBpbG90VmlldyIsIkl0ZW1WaWV3IiwibGVhZiIsImdldFZpZXdUeXBlIiwiZ2V0RGlzcGxheVRleHQiLCJnZXRJY29uIiwib25PcGVuIiwiY29udGFpbmVyIiwiYWRkQ2xhc3MiLCJoZWFkZXJFbCIsInN0YXR1c0VsIiwidXBkYXRlU3RhdHVzIiwicXVpY2tBY3Rpb25zRWwiLCJjcmVhdGVRdWlja0FjdGlvbnMiLCJ2YXVsdFN0YXRzRWwiLCJ1cGRhdGVWYXVsdFN0YXRzIiwiYWN0aXZpdGllc0VsIiwiYWRkU3R5bGVzIiwic3RhdHVzQ29udGFpbmVyIiwiYmFja2VuZFN0YXR1cyIsImJhY2tlbmRJbmRpY2F0b3IiLCJ3c1N0YXR1cyIsImlzV2ViU29ja2V0Q29ubmVjdGVkIiwiY2hlY2tCYWNrZW5kU3RhdHVzIiwiaW5kaWNhdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc05hbWUiLCJhY3Rpb25zR3JpZCIsIm9uY2xpY2siLCJvcGVuQ2hhdE1vZGFsIiwib3BlbldvcmtmbG93TW9kYWwiLCJhbmFseXplVmF1bHQiLCJhY3RpdmVWaWV3Iiwid29ya3NwYWNlIiwiZ2V0QWN0aXZlVmlld09mVHlwZSIsIk1hcmtkb3duVmlldyIsImdldENvcGlsb3RDb21wbGV0aW9uIiwiZWRpdG9yIiwic3RhdHNDb250YWluZXIiLCJmaWxlcyIsInZhdWx0IiwiZ2V0RmlsZXMiLCJtYXJrZG93bkZpbGVzIiwiZ2V0TWFya2Rvd25GaWxlcyIsImxhYmVsIiwibGVuZ3RoIiwidG9TdHJpbmciLCJnZXRBbGxMb2FkZWRGaWxlcyIsImZpbHRlciIsImYiLCJURm9sZGVyIiwiZm9yRWFjaCIsInN0YXQiLCJzdGF0RWwiLCJsb2FkQWdlbnRJbmZvIiwiZ2V0QWdlbnRzIiwiYWdlbnRDb3VudCIsImFjdGl2ZUFnZW50cyIsImFnZW50IiwiYWN0aXZlIiwiYWdlbnRTdGF0c0VsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlRWwiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJvbkNsb3NlIiwiQ2hhdE1vZGFsIiwiTW9kYWwiLCJjdXJyZW50Q29udmVyc2F0aW9uSWQiLCJtZXNzYWdlcyIsImNvbnRlbnRFbCIsInRvb2xiYXJFbCIsImNsZWFyQ2hhdCIsImFnZW50U2VsZWN0IiwibG9hZEFnZW50cyIsImNoYXRDb250YWluZXIiLCJtZXNzYWdlc0VsIiwiaW5wdXRDb250YWluZXIiLCJpbnB1dEVsIiwidHlwZSIsInBsYWNlaG9sZGVyIiwic2VuZEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwibmFtZSIsImdldENvbnZlcnNhdGlvbkhpc3RvcnkiLCJyZW5kZXJNZXNzYWdlcyIsInRyaW0iLCJkaXNhYmxlZCIsImFkZE1lc3NhZ2UiLCJhY3RpdmVGaWxlIiwiZ2V0QWN0aXZlRmlsZSIsInZhdWx0Q29udGV4dCIsImNvbnRlbnQiLCJyZWFkIiwiY2hhdCIsImNvbnZlcnNhdGlvbl9pZCIsInVuZGVmaW5lZCIsInZhdWx0X2NvbnRleHQiLCJhZ2VudF9pZCIsImdldFNlbGVjdGVkQWdlbnQiLCJlcnJvck1zZyIsInF1ZXJ5U2VsZWN0b3IiLCJyb2xlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHVzaCIsInJlbmRlck1lc3NhZ2UiLCJzY3JvbGxUb0JvdHRvbSIsIm1lc3NhZ2VFbCIsInJlbmRlck1hcmtkb3duIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwicmVwbGFjZSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsIldvcmtmbG93TW9kYWwiLCJpc0V4ZWN1dGluZyIsImZvcm1FbCIsImdvYWxDb250YWluZXIiLCJnb2FsSW5wdXQiLCJjb250ZXh0Q29udGFpbmVyIiwiY29udGV4dElucHV0Iiwib3B0aW9uc0NvbnRhaW5lciIsImluY2x1ZGVBY3RpdmVGaWxlIiwiYWN0aXZlRmlsZUNoZWNrYm94IiwiY3JlYXRlU3BhbiIsImluY2x1ZGVBbGxGaWxlcyIsImFsbEZpbGVzQ2hlY2tib3giLCJleGVjdXRlQnV0dG9uIiwiZXhlY3V0ZVdvcmtmbG93IiwiY2hlY2tlZCIsInByb2dyZXNzQ29udGFpbmVyIiwic3R5bGUiLCJyZXN1bHRzQ29udGFpbmVyIiwiZ29hbCIsInZhdWx0Q29udGVudCIsImZpbGUiLCJzbGljZSIsInJlcXVlc3QiLCJjb250ZXh0IiwidmF1bHRfY29udGVudCIsInNldHVwUHJvZ3Jlc3NMaXN0ZW5lciIsImRpc3BsYXlSZXN1bHRzIiwiZGlzcGxheUVycm9yIiwiZGlzcGxheVByb2dyZXNzIiwic2V0VGltZW91dCIsIndvcmtmbG93IiwiZXhlY3V0aW9uX3RpbWUiLCJyZXN1bHRFbCIsInJlc3VsdCIsInN0ZXBzX3Rha2VuIiwic3RlcHNFbCIsInN0ZXBzTGlzdCIsInN0ZXAiLCJhcnRpZmFjdHMiLCJhcnRpZmFjdHNFbCIsImFydGlmYWN0IiwiaW5kZXgiLCJhcnRpZmFjdEVsIiwidGl0bGUiLCJzYXZlQXJ0aWZhY3RBc05vdGUiLCJzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlIiwiZmlsZW5hbWUiLCJjcmVhdGUiLCJzcGxpdCIsIkV2b0FnZW50WENsaWVudCIsImJhc2VVcmwiLCJ3c0NhbGxiYWNrcyIsIk1hcCIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnRfMSIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsImhlYWRlcnMiLCJPYmplY3QiLCJhc3NpZ24iLCJBY2NlcHQiLCJmZXRjaCIsIm1vZGUiLCJjcmVkZW50aWFscyIsImNvbnRlbnRUeXBlIiwiZ2V0IiwianNvbiIsIm9rIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzVGV4dCIsImxvZyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udmVyc2F0aW9uSWRfMSIsImNvbnZlcnNhdGlvbklkIiwibGltaXQiLCJyZXF1ZXN0Qm9keSIsImluY2x1ZGVfbWVzc2FnZXMiLCJkZWxldGVDb252ZXJzYXRpb24iLCJjcmVhdGVBZ2VudCIsImV4ZWN1dGVBZ2VudCIsImFuYWx5emVWYXVsdENvbnRleHQiLCJwbGFuVGFza3MiLCJwYXJzZUludGVsbGlnZW5jZSIsInVwZGF0ZU1lbW9yeSIsImNhbGxiYWNrcyIsIndzVXJsIiwid2Vic29ja2V0IiwiV2ViU29ja2V0Iiwib25vcGVuIiwib25Db25uZWN0IiwiY2FsbCIsIm9ubWVzc2FnZSIsImV2ZW50IiwicGFyc2UiLCJvbkNoYXQiLCJfYiIsIm9uV29ya2Zsb3dQcm9ncmVzcyIsIl9jIiwib25Db3BpbG90IiwiX2QiLCJvblZhdWx0U3luYyIsIl9lIiwib25FcnJvciIsIl9mIiwib25jbG9zZSIsImNvZGUiLCJyZWFzb24iLCJvbkRpc2Nvbm5lY3QiLCJvbmVycm9yIiwiY2xvc2UiLCJzZW5kV2ViU29ja2V0TWVzc2FnZSIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsIlZhdWx0UGlsb3RQbHVnaW4iLCJQbHVnaW4iLCJ3ZWJzb2NrZXRDb25uZWN0ZWQiLCJjb3BpbG90RW5hYmxlZCIsIm9ubG9hZCIsImxvYWRTZXR0aW5ncyIsInJlZ2lzdGVyVmlldyIsImFkZFJpYmJvbkljb24iLCJldnQiLCJhZGRDb21tYW5kIiwiY2FsbGJhY2siLCJlZGl0b3JDYWxsYmFjayIsInF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24iLCJwbGFuVGFza3NGcm9tTm90ZSIsInBsYW5NeURheSIsImFjdGl2YXRlVmlldyIsInJlZ2lzdGVyRG9tRXZlbnQiLCJoYW5kbGVLZXlVcCIsImJpbmQiLCJhZGRTZXR0aW5nVGFiIiwib251bmxvYWQiLCJkZXRhY2hMZWF2ZXNPZlR5cGUiLCJoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbiIsIm9wZW4iLCJmaWxlQ29udGVudCIsImFuYWx5c2lzX3R5cGUiLCJhbmFseXNpc0NvbnRlbnQiLCJhbmFseXNpcyIsImluc2lnaHRzIiwiaW5zaWdodCIsInJlY29tbWVuZGF0aW9ucyIsInJlYyIsImN1cnNvciIsImdldEN1cnNvciIsInRleHRCZWZvcmVDdXJzb3IiLCJnZXRMaW5lIiwibGluZSIsInN1YnN0cmluZyIsImNoIiwiZnVsbFRleHQiLCJnZXRWYWx1ZSIsImN1cnNvcl9wb3NpdGlvbiIsInBvc1RvT2Zmc2V0IiwiZmlsZV90eXBlIiwicmVwbGFjZVJhbmdlIiwiY29tcGxldGlvbiIsInNlbGVjdGlvbiIsImdldFNlbGVjdGlvbiIsIm5ld0xpbmUiLCJ0aW1lZnJhbWUiLCJiYXNlbmFtZSIsInRhc2tDb250ZW50IiwicGxhbiIsImRlc2NyaXB0aW9uIiwiZXN0aW1hdGVkX2R1cmF0aW9uIiwidGFza3MiLCJ0YXNrIiwiY2hlY2tib3giLCJwcmlvcml0eSIsImVzdGltYXRlZF90aW1lIiwibWlsZXN0b25lcyIsIm1pbGVzdG9uZSIsInRhcmdldF9kYXRlIiwiZmlsZVRleHQiLCJzY2hlZHVsZU1hcmtkb3duIiwiaGVhZGxpbmUiLCJub3RlVGV4dCIsIm5vdGUiLCJmZXRjaFNjaGVkdWxlIiwidmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIiwidXBkYXRlZFRleHQiLCJvcmlnaW5hbFRleHQiLCJtYXRjaCIsInNjaGVkdWxlUmVnZXgiLCJmaW5kU2NoZWR1bGVTZWN0aW9uIiwiZnVsbE1hdGNoIiwiaGVhZGluZyIsInJlcGxhY2VtZW50IiwiaW5qZWN0U2NoZWR1bGUiLCJtb2RpZnkiLCJzdWNjZXNzTWVzc2FnZSIsImxlYXZlcyIsImdldExlYXZlc09mVHlwZSIsInJpZ2h0TGVhZiIsImdldFJpZ2h0TGVhZiIsInNldFZpZXdTdGF0ZSIsInJldmVhbExlYWYiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImNsZWFyVGltZW91dCIsImF1dG9Db21wbGV0ZVRpbWVvdXQiLCJ0cmlnZ2VyQXV0b0NvbXBsZXRpb24iLCJjdXJyZW50TGluZSIsInN1Z2dlc3Rpb25zIiwibG9hZERhdGEiLCJzYXZlRGF0YSJdLCJtYXBwaW5ncyI6IjRYQUlPLE1BQU1BLEVBQXVDLENBQ2xEQyxXQUFZLHdCQUNaQyxPQUFRLEdBQ1JDLGlCQUFpQixFQUNqQkMsZUFBZSxFQUNmQyxvQkFBb0IsRUFDcEJDLGFBQWMsR0FDZEMsaUJBQWtCLElBQ2xCQyxXQUFXLEdBR1AsTUFBT0MsVUFBNkJDLEVBQUFBLGlCQUd4QyxXQUFBQyxDQUFZQyxFQUFVQyxH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
