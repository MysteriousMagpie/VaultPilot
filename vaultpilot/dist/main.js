"use strict";var t=require("obsidian");function e(t,e,n,o){return new(n||(n=Promise))(function(i,a){function s(t){try{r(o.next(t))}catch(t){a(t)}}function l(t){try{r(o.throw(t))}catch(t){a(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,l)}r((o=o.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1};class o extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"VaultPilot Settings"}),n.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),n.createEl("h3",{text:"Connection"}),new t.Setting(n).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),n.createEl("h3",{text:"Features"}),new t.Setting(n).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(n).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Agent Configuration"}),new t.Setting(n).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(t=>t.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Advanced"}),new t.Setting(n).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Information"});n.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let o=yield this.plugin.apiClient.healthCheck();if(!o.success&&(null===(e=o.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(o={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),o.success?new t.Notice("✅ Connection successful!",3e3):new t.Notice(`❌ Connection failed: ${o.error}`,5e3)}catch(e){n.hide(),new t.Notice(`❌ Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const i="vaultpilot-view";class a extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return i}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"🤖 VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),o=t.createEl("div",{cls:"vaultpilot-status-item"});o.createEl("span",{text:"WebSocket: "}),o.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"🟢 Connected":"🔴 Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="🟢 Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="🔴 Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="🔴 Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"💬 Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"⚙️ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"🔍 Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"✨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"🔄 Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),o=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:o.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getAgents();if(t.success&&t.data){const e=t.data.length,n=t.data.filter(t=>t.active).length,o=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});o.createEl("h4",{text:"Available Agents"});o.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${n}/${e} active`})}}catch(t){}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}class s extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.currentMode="ask",this.plugin=e,this.currentMode=e.settings.defaultMode}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"🤖 VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});this.modeToggleContainer=n.createEl("div",{cls:"vaultpilot-mode-toggle"}),this.createModeToggle();n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const o=n.createEl("select",{cls:"vaultpilot-agent-select"});o.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(o),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:this.getPlaceholderText(),cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();e.success&&e.data&&e.data.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})})}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const n=this.app.workspace.getActiveFile();let o="";if(n){const t=yield this.app.vault.read(n);o=`Current file: ${n.name}\n\nContent:\n${t}`}const i=yield this.plugin.apiClient.chat({message:e,conversation_id:this.currentConversationId||void 0,vault_context:o,agent_id:this.getSelectedAgent(),mode:this.currentMode});i.success&&i.data?(this.currentConversationId=i.data.conversation_id,this.addMessage("assistant",i.data.response)):(this.addMessage("assistant",`Error: ${i.error||"Failed to get response"}`),new t.Notice(`Chat error: ${i.error}`))}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-mode-toggle {\n          margin-right: 15px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          padding: 8px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-mode-description {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-bottom: 6px;\n        }\n        .vaultpilot-mode-buttons {\n          display: flex;\n          gap: 4px;\n        }\n        .vaultpilot-mode-btn {\n          padding: 4px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-muted);\n          font-size: 0.85em;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-mode-btn:hover {\n          background: var(--background-primary-alt);\n          color: var(--text-normal);\n        }\n        .vaultpilot-mode-btn.active {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border-color: var(--interactive-accent);\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-mode-toggle {\n          display: flex;\n          flex-direction: column;\n          gap: 5px;\n        }\n        .vaultpilot-mode-description {\n          font-size: 0.9em;\n          color: var(--text-muted);\n        }\n        .vaultpilot-mode-buttons {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-mode-btn {\n          flex: 1;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          cursor: pointer;\n          text-align: center;\n        }\n        .vaultpilot-mode-btn.active {\n          background: var(--accent-color);\n          color: var(--background-primary);\n          font-weight: bold;\n        }\n      ",document.head.appendChild(t)}}createModeToggle(){this.modeToggleContainer.empty(),this.modeToggleContainer.createEl("div",{cls:"vaultpilot-mode-description",text:this.getModeDescription()});const t=this.modeToggleContainer.createEl("div",{cls:"vaultpilot-mode-buttons"}),e=t.createEl("button",{text:"Ask Mode",cls:"vaultpilot-mode-btn "+("ask"===this.currentMode?"active":"")}),n=t.createEl("button",{text:"Agent Mode",cls:"vaultpilot-mode-btn "+("agent"===this.currentMode?"active":"")});e.onclick=()=>this.setMode("ask"),n.onclick=()=>this.setMode("agent")}setMode(t){this.currentMode=t,this.createModeToggle(),this.inputEl&&(this.inputEl.placeholder=this.getPlaceholderText())}getPlaceholderText(){return"ask"===this.currentMode?"Ask a question...":"Describe what you want to accomplish..."}getModeDescription(){return"ask"===this.currentMode?"Simple Q&A mode for quick questions and explanations":"Complex workflow mode for structured tasks and automation"}onClose(){const{contentEl:t}=this;t.empty()}}class l extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"⚙️ Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=o.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=a.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const r=a.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,o){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(o){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const a=yield this.plugin.apiClient.executeWorkflow(i);if(!a.success||!a.data)throw new Error(a.error||"Workflow execution failed");yield this.displayResults(a.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"✅ Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const o=e.createEl("div",{cls:"vaultpilot-artifact"});o.createEl("h5",{text:t.title}),o.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});o.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,o){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,o=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,o),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let o="# VaultPilot Workflow Results\n\n";o+=`**Goal:** ${this.goalInput.value}\n\n`,o+=`**Execution Time:** ${n.execution_time}s\n\n`,o+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(o+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{o+=`${e+1}. ${t}\n`}),o+="\n"),n.artifacts&&n.artifacts.length>0&&(o+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{o+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,o),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>❌ Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class r{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,o=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(o.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:o,mode:"cors",credentials:"omit"}));let i;const a=t.headers.get("content-type");if(i=a&&a.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/api/obsidian/health`);const t=yield this.makeRequest("/api/obsidian/health",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/api/obsidian/health`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,o,i,a,s,l;try{const l=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",l.type),l.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,l.data);break;case"workflow_progress":null===(o=t.onWorkflowProgress)||void 0===o||o.call(t,l.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,l.data);break;case"vault_sync":null===(a=t.onVaultSync)||void 0===a||a.call(t,l.data);break;case"error":null===(s=t.onError)||void 0===s||s.call(t,l.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(l=t.onError)||void 0===l||l.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class c extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e;yield this.loadSettings(),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey);try{let n=yield this.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(new t.Notice("✅ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",n.error),new t.Notice("⚠️ EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("⚠️ Cannot connect to EvoAgentX backend",5e3)}this.registerView(i,t=>new a(t,this));this.addRibbonIcon("bot","VaultPilot",t=>{this.openChatModal()}).addClass("vaultpilot-ribbon-class"),this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new o(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(i),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new s(this.app,this).open()}openWorkflowModal(){new l(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let o="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);o+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:o,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let o=`# Vault Analysis - ${e}\n\n`;o+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(o+="## Key Insights\n\n",i.data.insights.forEach(t=>{o+=`- ${t}\n`}),o+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(o+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{o+=`- ${t}\n`})),yield this.app.vault.create(n,o),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),o=n.getLine(e.line).substring(0,e.ch),i=n.getValue();if(i&&0!==i.trim().length)try{const a=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:o});a.success&&a.data?(n.replaceRange(a.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${a.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const o=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(o.success&&o.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${o.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${o.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),o=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==o?void 0:o.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==o?void 0:o.basename)||"Untitled"} - ${e}.md`;let a=`# ${n.data.plan.title}\n\n`;a+=`${n.data.plan.description}\n\n`,a+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(a+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";a+=`${e} **${t.title}** (${t.priority} priority)\n`,a+=`   ${t.description}\n`,a+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(a+="## Milestones\n\n",n.data.milestones.forEach(t=>{a+=`- **${t.title}** (${t.target_date})\n`,a+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,a),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){const n=this.app.workspace.getActiveFile();if(!n)return void new t.Notice("No active note—open today's daily note first.");const o=new t.Notice("Planning your day...",0);try{const i=yield this.app.vault.read(n),{scheduleMarkdown:a,headline:s}=yield function(n){return e(this,void 0,void 0,function*(){const e=yield t.request({url:"http://localhost:3000/planday",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:n})});return JSON.parse(e)})}(i);if(!function(t){return t.trim().length>0}(a))throw new Error("Invalid schedule data received from API");const l=function(t,e){const n=function(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im;return t.match(e)||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}(t);if(n){const[o,i]=n,a=i+e;return t.replace(o,a)}return t+`\n\n## Schedule\n${e}`}(i,a);yield this.app.vault.modify(n,l),o.hide();const r=s?`${s} ✅`:"Schedule inserted ✅";new t.Notice(r)}catch(e){o.hide(),e instanceof Error?e.message.includes("JSON")?new t.Notice("Planner API error: Invalid response format"):e.message.includes("fetch")||e.message.includes("network")?new t.Notice("Planner API error: Unable to connect to localhost:3000"):new t.Notice(`Planner API error: ${e.message}`):new t.Notice("Planner API error: Unknown error occurred")}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(i);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:i,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(t)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(e){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(e.key))return!1;const n=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!n)return!1;const o=n.editor,i=o.getCursor(),a=o.getLine(i.line);if(i.ch!==a.length)return!1;const s=a.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===e.key||"Enter"===e.key&&a.trim().length>10}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,o=n.getCursor(),i=n.getLine(o.line),a=n.getValue();if(i.trim().length<10||o.ch!==i.length)return;if(!a||0===a.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const e=yield this.apiClient.getCopilotCompletion({text:a,cursor_position:n.posToOffset(o),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Auto-suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},n,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){yield this.saveData(this.settings),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=c;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvY2hhdC1tb2RhbC50cyIsIi4uL3NyYy93b3JrZmxvdy1tb2RhbC50cyIsIi4uL3NyYy9hcGktY2xpZW50LnRzIiwiLi4vc3JjL21haW4udHMiLCIuLi9zcmMvcGxhbm5lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVmF1bHRQaWxvdFNldHRpbmdzID0ge1xuICBiYWNrZW5kVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJyxcbiAgYXBpS2V5OiAnJyxcbiAgZW5hYmxlV2ViU29ja2V0OiB0cnVlLFxuICBlbmFibGVDb3BpbG90OiB0cnVlLFxuICBlbmFibGVBdXRvQ29tcGxldGU6IGZhbHNlLCAvLyBEaXNhYmxlZCBieSBkZWZhdWx0IHRvIHByZXZlbnQgZnJlcXVlbnQgcmVxdWVzdHNcbiAgZGVmYXVsdEFnZW50OiAnJyxcbiAgZGVmYXVsdE1vZGU6ICdhc2snLFxuICBjaGF0SGlzdG9yeUxpbWl0OiAxMDAsXG4gIGRlYnVnTW9kZTogZmFsc2Vcbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyBhbmQgbmV3IGxpbmVzICh3aXRoIDEwcyBjb29sZG93biknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQ2hhdCBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IG1vZGUgZm9yIG5ldyBjaGF0IHNlc3Npb25zOiBBc2sgZm9yIHNpbXBsZSBRJkEsIEFnZW50IGZvciBjb21wbGV4IHdvcmtmbG93cycpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdhc2snLCAnQXNrIE1vZGUgLSBTaW1wbGUgUSZBJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdhZ2VudCcsICdBZ2VudCBNb2RlIC0gQ29tcGxleCBXb3JrZmxvd3MnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1vZGUgPSB2YWx1ZSBhcyAnYXNrJyB8ICdhZ2VudCc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gV29ya2Zsb3cgYWN0aW9uXG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcblxuICAgIC8vIEFuYWx5emUgdmF1bHQgYWN0aW9uXG4gICAgY29uc3QgYW5hbHl6ZUJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UjSBBbmFseXplIFZhdWx0JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBhbmFseXplQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hbmFseXplVmF1bHQoKTtcblxuICAgIC8vIENvcGlsb3QgYWN0aW9uXG4gICAgY29uc3QgY29waWxvdEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pyoIEdldCBDb21wbGV0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjb3BpbG90QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmdldENvcGlsb3RDb21wbGV0aW9uKGFjdGl2ZVZpZXcuZWRpdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBlZGl0b3IgZm91bmQnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CflIQgUmVmcmVzaCBTdGF0dXMnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhZ2VudCBpbmZvIGlmIGF2YWlsYWJsZVxuICAgIHRoaXMubG9hZEFnZW50SW5mbygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IHJlc3BvbnNlLmRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSByZXNwb25zZS5kYXRhLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudFN0YXRzRWwgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXRzJyB9KTtcbiAgICAgICAgYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2YWlsYWJsZSBBZ2VudHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgaWYgYWdlbnRzIGNhbid0IGJlIGxvYWRlZFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtdmlldyB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1oZWFkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3VidGl0bGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIGgzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yLFxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVmcmVzaC1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xuICAgICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWl0ZW0ge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtdmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyBoNCB7XG4gICAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LWluZm8ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlc291cmNlc1xuICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY2hhdENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbWVzc2FnZXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0RWwhOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHNlbmRCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG4gIHByaXZhdGUgY3VycmVudE1vZGU6ICdhc2snIHwgJ2FnZW50JyA9ICdhc2snO1xuICBwcml2YXRlIG1vZGVUb2dnbGVDb250YWluZXIhOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmN1cnJlbnRNb2RlID0gcGx1Z2luLnNldHRpbmdzLmRlZmF1bHRNb2RlO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHRwaWxvdC1jaGF0LW1vZGFsJyk7XG5cbiAgICAvLyBNb2RhbCBoZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QgQ2hhdCcgfSk7XG4gICAgXG4gICAgY29uc3QgdG9vbGJhckVsID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXRvb2xiYXInIH0pO1xuICAgIFxuICAgIC8vIE1vZGUgdG9nZ2xlXG4gICAgdGhpcy5tb2RlVG9nZ2xlQ29udGFpbmVyID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtbW9kZS10b2dnbGUnIH0pO1xuICAgIHRoaXMuY3JlYXRlTW9kZVRvZ2dsZSgpO1xuICAgIFxuICAgIC8vIENsZWFyIGNoYXQgYnV0dG9uXG4gICAgY29uc3QgY2xlYXJCdG4gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsZWFyQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsZWFyQ2hhdCgpO1xuXG4gICAgLy8gQWdlbnQgc2VsZWN0b3IgKHdpbGwgYmUgcG9wdWxhdGVkIHdoZW4gYWdlbnRzIGFyZSBsb2FkZWQpXG4gICAgY29uc3QgYWdlbnRTZWxlY3QgPSB0b29sYmFyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnIH0pO1xuICAgIGFnZW50U2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdBdXRvLXNlbGVjdCBBZ2VudCcsIHZhbHVlOiAnJyB9KTtcbiAgICB0aGlzLmxvYWRBZ2VudHMoYWdlbnRTZWxlY3QpO1xuXG4gICAgLy8gQ2hhdCBjb250YWluZXJcbiAgICB0aGlzLmNoYXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gTWVzc2FnZXMgYXJlYVxuICAgIHRoaXMubWVzc2FnZXNFbCA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMnIH0pO1xuICAgIFxuICAgIC8vIElucHV0IGNvbnRhaW5lclxuICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgdGhpcy5pbnB1dEVsID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogdGhpcy5nZXRQbGFjZWhvbGRlclRleHQoKSxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1pbnB1dCdcbiAgICB9KTtcblxuICAgIHRoaXMuc2VuZEJ1dHRvbiA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTZW5kJyxcbiAgICAgIGNsczogJ21vZC1jdGEgdmF1bHRwaWxvdC1zZW5kLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2VuZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zZW5kTWVzc2FnZSgpO1xuXG4gICAgLy8gRm9jdXMgdGhlIGlucHV0XG4gICAgdGhpcy5pbnB1dEVsLmZvY3VzKCk7XG5cbiAgICAvLyBMb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgdGhpcy5sb2FkQ29udmVyc2F0aW9uSGlzdG9yeSgpO1xuXG4gICAgLy8gQWRkIHN0eWxlc1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudHMoc2VsZWN0RWw6IEhUTUxTZWxlY3RFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goYWdlbnQgPT4ge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7XG4gICAgICAgICAgICB0ZXh0OiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGFnZW50LmlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKSB7XG4gICAgLy8gT25seSB0cnkgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeSBpZiB3ZSBoYXZlIGEgY29udmVyc2F0aW9uIElEXG4gICAgaWYgKHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb252ZXJzYXRpb25IaXN0b3J5KHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2VzO1xuICAgICAgICAgIHRoaXMucmVuZGVyTWVzc2FnZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiBubyBjb252ZXJzYXRpb24gSUQsIHN0YXJ0IGZyZXNoIChubyBoaXN0b3J5IHRvIGxvYWQpXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRNZXNzYWdlKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmlucHV0RWwudmFsdWUudHJpbSgpO1xuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgLy8gRGlzYWJsZSBpbnB1dCB3aGlsZSBwcm9jZXNzaW5nXG4gICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kaW5nLi4uJztcblxuICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2UgdG8gVUlcbiAgICB0aGlzLmFkZE1lc3NhZ2UoJ3VzZXInLCBtZXNzYWdlKTtcbiAgICB0aGlzLmlucHV0RWwudmFsdWUgPSAnJztcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdmF1bHQgY29udGV4dCBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgbGV0IHZhdWx0Q29udGV4dCA9ICcnO1xuICAgICAgXG4gICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgdmF1bHRDb250ZXh0ID0gYEN1cnJlbnQgZmlsZTogJHthY3RpdmVGaWxlLm5hbWV9XFxuXFxuQ29udGVudDpcXG4ke2NvbnRlbnR9YDtcbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCB0byBBUElcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNoYXQoe1xuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBjb252ZXJzYXRpb25faWQ6IHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmF1bHRfY29udGV4dDogdmF1bHRDb250ZXh0LFxuICAgICAgICBhZ2VudF9pZDogdGhpcy5nZXRTZWxlY3RlZEFnZW50KCksXG4gICAgICAgIG1vZGU6IHRoaXMuY3VycmVudE1vZGVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gcmVzcG9uc2UuZGF0YS5jb252ZXJzYXRpb25faWQ7XG4gICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgcmVzcG9uc2UuZGF0YS5yZXNwb25zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dFxuICAgICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kJztcbiAgICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRBZ2VudCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHNlbGVjdEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcmV0dXJuIHNlbGVjdEVsPy52YWx1ZSB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5tZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpIHtcbiAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogYHZhdWx0cGlsb3QtbWVzc2FnZSB2YXVsdHBpbG90LW1lc3NhZ2UtJHttZXNzYWdlLnJvbGV9YFxuICAgIH0pO1xuXG4gICAgY29uc3Qgcm9sZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2Utcm9sZScsXG4gICAgICB0ZXh0OiBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdZb3UnIDogJ1ZhdWx0UGlsb3QnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmluZyBmb3IgYmFzaWMgZm9ybWF0dGluZ1xuICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKG1lc3NhZ2UuY29udGVudCk7XG5cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtdGltZScsXG4gICAgICAgIHRleHQ6IG5ldyBEYXRlKG1lc3NhZ2UudGltZXN0YW1wKS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyQ2hhdCgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIG5ldyBOb3RpY2UoJ0NoYXQgY2xlYXJlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC1jaGF0LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1jaGF0LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNjAwcHg7XG4gICAgICAgICAgaGVpZ2h0OiA3MDBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC10b29sYmFyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tb2RlLXRvZ2dsZSB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tb2RlLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbW9kZS1idXR0b25zIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1vZGUtYnRuIHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1vZGUtYnRuOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1vZGUtYnRuLmFjdGl2ZSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zZWxlY3Qge1xuICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDgwcHgpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZSB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXVzZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtYXNzaXN0YW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdGltZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc2VuZC1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tb2RlLXRvZ2dsZSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1vZGUtZGVzY3JpcHRpb24ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1vZGUtYnV0dG9ucyB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbW9kZS1idG4ge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbW9kZS1idG4uYWN0aXZlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQtY29sb3IpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU1vZGVUb2dnbGUoKSB7XG4gICAgdGhpcy5tb2RlVG9nZ2xlQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gTW9kZSBkZXNjcmlwdGlvblxuICAgIGNvbnN0IG1vZGVEZXNjID0gdGhpcy5tb2RlVG9nZ2xlQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tb2RlLWRlc2NyaXB0aW9uJyxcbiAgICAgIHRleHQ6IHRoaXMuZ2V0TW9kZURlc2NyaXB0aW9uKClcbiAgICB9KTtcbiAgICBcbiAgICAvLyBNb2RlIGJ1dHRvbnNcbiAgICBjb25zdCBtb2RlQnV0dG9ucyA9IHRoaXMubW9kZVRvZ2dsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1vZGUtYnV0dG9ucycgfSk7XG4gICAgXG4gICAgY29uc3QgYXNrQnRuID0gbW9kZUJ1dHRvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdBc2sgTW9kZScsXG4gICAgICBjbHM6IGB2YXVsdHBpbG90LW1vZGUtYnRuICR7dGhpcy5jdXJyZW50TW9kZSA9PT0gJ2FzaycgPyAnYWN0aXZlJyA6ICcnfWBcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBhZ2VudEJ0biA9IG1vZGVCdXR0b25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnQWdlbnQgTW9kZScsIFxuICAgICAgY2xzOiBgdmF1bHRwaWxvdC1tb2RlLWJ0biAke3RoaXMuY3VycmVudE1vZGUgPT09ICdhZ2VudCcgPyAnYWN0aXZlJyA6ICcnfWBcbiAgICB9KTtcbiAgICBcbiAgICBhc2tCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2V0TW9kZSgnYXNrJyk7XG4gICAgYWdlbnRCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2V0TW9kZSgnYWdlbnQnKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0TW9kZShtb2RlOiAnYXNrJyB8ICdhZ2VudCcpIHtcbiAgICB0aGlzLmN1cnJlbnRNb2RlID0gbW9kZTtcbiAgICB0aGlzLmNyZWF0ZU1vZGVUb2dnbGUoKTsgLy8gUmVmcmVzaCB0aGUgdG9nZ2xlIFVJXG4gICAgaWYgKHRoaXMuaW5wdXRFbCkge1xuICAgICAgdGhpcy5pbnB1dEVsLnBsYWNlaG9sZGVyID0gdGhpcy5nZXRQbGFjZWhvbGRlclRleHQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFBsYWNlaG9sZGVyVGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRNb2RlID09PSAnYXNrJyBcbiAgICAgID8gJ0FzayBhIHF1ZXN0aW9uLi4uJ1xuICAgICAgOiAnRGVzY3JpYmUgd2hhdCB5b3Ugd2FudCB0byBhY2NvbXBsaXNoLi4uJztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TW9kZURlc2NyaXB0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vZGUgPT09ICdhc2snXG4gICAgICA/ICdTaW1wbGUgUSZBIG1vZGUgZm9yIHF1aWNrIHF1ZXN0aW9ucyBhbmQgZXhwbGFuYXRpb25zJ1xuICAgICAgOiAnQ29tcGxleCB3b3JrZmxvdyBtb2RlIGZvciBzdHJ1Y3R1cmVkIHRhc2tzIGFuZCBhdXRvbWF0aW9uJztcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBXb3JrZmxvd1JlcXVlc3QsIFdvcmtmbG93UmVzcG9uc2UsIFdvcmtmbG93UHJvZ3Jlc3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFdvcmtmbG93TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBnb2FsSW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGNvbnRleHRJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgZXhlY3V0ZUJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIHByb2dyZXNzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcmVzdWx0c0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlzRXhlY3V0aW5nID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsJyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn4pqZ77iPIFdvcmtmbG93IEV4ZWN1dGlvbicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0RlZmluZSBhIGdvYWwgYW5kIGxldCBWYXVsdFBpbG90IGNyZWF0ZSBhbmQgZXhlY3V0ZSBhIGNvbXByZWhlbnNpdmUgd29ya2Zsb3cgdG8gYWNoaWV2ZSBpdC4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbidcbiAgICB9KTtcblxuICAgIC8vIEZvcm1cbiAgICBjb25zdCBmb3JtRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1mb3JtJyB9KTtcblxuICAgIC8vIEdvYWwgaW5wdXRcbiAgICBjb25zdCBnb2FsQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgZ29hbENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0dvYWwgKicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5nb2FsSW5wdXQgPSBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnZS5nLiwgXCJDcmVhdGUgYSBjb21wcmVoZW5zaXZlIHN0dWR5IHBsYW4gZm9yIG1hY2hpbmUgbGVhcm5pbmcgYmFzZWQgb24gbXkgbm90ZXNcIicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWdvYWwtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBDb250ZXh0IGlucHV0XG4gICAgY29uc3QgY29udGV4dENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdBZGRpdGlvbmFsIENvbnRleHQgKG9wdGlvbmFsKScsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0SW5wdXQgPSBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnUHJvdmlkZSBhbnkgYWRkaXRpb25hbCBjb250ZXh0LCBjb25zdHJhaW50cywgb3IgcmVxdWlyZW1lbnRzLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIFZhdWx0IGNvbnRlbnQgb3B0aW9uc1xuICAgIGNvbnN0IG9wdGlvbnNDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnVmF1bHQgSW50ZWdyYXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFjdGl2ZUZpbGUgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWN0aXZlRmlsZUNoZWNrYm94ID0gaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhY3RpdmUgZmlsZSBjb250ZW50JyB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBbGxGaWxlcyA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhbGxGaWxlc0NoZWNrYm94ID0gaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFsbCB2YXVsdCBmaWxlcyAobWF5IHRha2UgbG9uZ2VyKScgfSk7XG5cbiAgICAvLyBFeGVjdXRlIGJ1dHRvblxuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbiA9IGZvcm1FbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5leGVjdXRlV29ya2Zsb3coYWN0aXZlRmlsZUNoZWNrYm94LmNoZWNrZWQsIGFsbEZpbGVzQ2hlY2tib3guY2hlY2tlZCk7XG5cbiAgICAvLyBQcm9ncmVzcyBjb250YWluZXJcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gUmVzdWx0cyBjb250YWluZXJcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gRm9jdXMgdGhlIGdvYWwgaW5wdXRcbiAgICB0aGlzLmdvYWxJbnB1dC5mb2N1cygpO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KGluY2x1ZGVBY3RpdmVGaWxlOiBib29sZWFuLCBpbmNsdWRlQWxsRmlsZXM6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBnb2FsID0gdGhpcy5nb2FsSW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGlmICghZ29hbCkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgZ29hbCBmb3IgdGhlIHdvcmtmbG93Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0V4ZWN1dGluZyA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0aW5nLi4uJztcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFByZXBhcmUgdmF1bHQgY29udGVudFxuICAgICAgbGV0IHZhdWx0Q29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICBpZiAoaW5jbHVkZUFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHthY3RpdmVGaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmNsdWRlQWxsRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAyMCkpIHsgLy8gTGltaXQgdG8gZmlyc3QgMjAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHdvcmtmbG93IHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCA9IHtcbiAgICAgICAgZ29hbCxcbiAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0SW5wdXQudmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmF1bHRfY29udGVudDogdmF1bHRDb250ZW50IHx8IHVuZGVmaW5lZFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgV2ViU29ja2V0IGxpc3RlbmVyIGZvciBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICBpZiAodGhpcy5wbHVnaW4uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSkge1xuICAgICAgICAvLyBMaXN0ZW4gZm9yIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgdGhpcy5zZXR1cFByb2dyZXNzTGlzdGVuZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQhLmV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRpc3BsYXlSZXN1bHRzKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdXb3JrZmxvdyBleGVjdXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoZXJyb3JNc2cpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzRXhlY3V0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRlIFdvcmtmbG93JztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNvbm5lY3RlZCB0byB0aGUgV2ViU29ja2V0IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBzaW11bGF0ZSBwcm9ncmVzc1xuICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdBbmFseXppbmcgZ29hbCBhbmQgY29udGV4dC4uLicpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ1BsYW5uaW5nIHdvcmtmbG93IHN0ZXBzLi4uJyk7XG4gICAgfSwgMTAwMCk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnRXhlY3V0aW5nIHdvcmtmbG93Li4uJyk7XG4gICAgfSwgMjAwMCk7XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlQcm9ncmVzcyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLWl0ZW1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICA8c3Bhbj4ke21lc3NhZ2V9PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGlzcGxheVJlc3VsdHMod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcmVzdWx0c1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn4pyFIFdvcmtmbG93IENvbXBsZXRlZCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYEV4ZWN1dGlvbiB0aW1lOiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNgLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSdcbiAgICB9KTtcblxuICAgIC8vIE1haW4gcmVzdWx0XG4gICAgY29uc3QgcmVzdWx0RWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCcgfSk7XG4gICAgcmVzdWx0RWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmVzdWx0JyB9KTtcbiAgICBjb25zdCByZXN1bHRDb250ZW50RWwgPSByZXN1bHRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC10ZXh0JyB9KTtcbiAgICByZXN1bHRDb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bih3b3JrZmxvdy5yZXN1bHQpO1xuXG4gICAgLy8gU3RlcHMgdGFrZW5cbiAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RlcHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcicgfSk7XG4gICAgICBzdGVwc0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1N0ZXBzIFRha2VuJyB9KTtcbiAgICAgIGNvbnN0IHN0ZXBzTGlzdCA9IHN0ZXBzRWwuY3JlYXRlRWwoJ29sJywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWxpc3QnIH0pO1xuICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaChzdGVwID0+IHtcbiAgICAgICAgc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogc3RlcCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFydGlmYWN0c1xuICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFydGlmYWN0c0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lcicgfSk7XG4gICAgICBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdHZW5lcmF0ZWQgQXJ0aWZhY3RzJyB9KTtcbiAgICAgIFxuICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goKGFydGlmYWN0LCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhcnRpZmFjdEVsID0gYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdCcgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiBhcnRpZmFjdC50aXRsZSB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgdGV4dDogYFR5cGU6ICR7YXJ0aWZhY3QudHlwZX1gLFxuICAgICAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYXJ0aWZhY3RFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdTYXZlIGFzIE5vdGUnLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBhbGwgYnV0dG9uXG4gICAgY29uc3QgYWN0aW9uc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zJyB9KTtcbiAgICBjb25zdCBzYXZlQWxsQnV0dG9uID0gYWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2F2ZSBDb21wbGV0ZSBSZXN1bHRzIGFzIE5vdGUnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQWxsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3cpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3Q6IGFueSwgaW5kZXg6IG51bWJlcikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGAke2FydGlmYWN0LnRpdGxlLnJlcGxhY2UoL1teYS16QS1aMC05XFxzXS9nLCAnJyl9Lm1kYDtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1gO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQXJ0aWZhY3Qgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgYXJ0aWZhY3Q6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICBcbiAgICAgIGxldCBjb250ZW50ID0gYCMgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqR29hbDoqKiAke3RoaXMuZ29hbElucHV0LnZhbHVlfVxcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkV4ZWN1dGlvbiBUaW1lOioqICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAjIyBSZXN1bHRcXG5cXG4ke3dvcmtmbG93LnJlc3VsdH1cXG5cXG5gO1xuICAgICAgXG4gICAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBTdGVwcyBUYWtlblxcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgJHtpbmRleCArIDF9LiAke3N0ZXB9XFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XG4gICAgICB9XG5cbiAgICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgR2VuZXJhdGVkIEFydGlmYWN0c1xcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKGFydGlmYWN0ID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAjIyMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBDb21wbGV0ZSByZXN1bHRzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIHJlc3VsdHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5RXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtZXJyb3JcIj5cbiAgICAgICAgPGgzPuKdjCBXb3JrZmxvdyBGYWlsZWQ8L2gzPlxuICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwge1xuICAgICAgICAgIHdpZHRoOiA3MDBweDtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiA4MHZoO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24ge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1ncm91cCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWdvYWwtaW5wdXQsXG4gICAgICAgIC52YXVsdHBpbG90LWNvbnRleHQtaW5wdXQge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIGlucHV0IHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lciB7XG4gICAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICB9XG4gICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC1jb250ZW50IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LXRleHQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtbGlzdCB7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXJyb3Ige1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFxuICBBUElSZXNwb25zZSwgXG4gIENoYXRSZXF1ZXN0LCBcbiAgQ2hhdFJlc3BvbnNlLCBcbiAgQ29udmVyc2F0aW9uSGlzdG9yeSxcbiAgQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QsXG4gIENvcGlsb3RSZXF1ZXN0LCBcbiAgQ29waWxvdFJlc3BvbnNlLFxuICBXb3JrZmxvd1JlcXVlc3QsXG4gIFdvcmtmbG93UmVzcG9uc2UsXG4gIEFnZW50LFxuICBBZ2VudENyZWF0ZVJlcXVlc3QsXG4gIEFnZW50RXhlY3V0ZVJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlc3BvbnNlLFxuICBUYXNrUGxhbm5pbmdSZXF1ZXN0LFxuICBUYXNrUGxhbm5pbmdSZXNwb25zZSxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0LFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlLFxuICBNZW1vcnlVcGRhdGVSZXF1ZXN0LFxuICBXZWJTb2NrZXRNZXNzYWdlLFxuICBFcnJvclJlc3BvbnNlXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRXZvQWdlbnRYQ2xpZW50IHtcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpS2V5Pzogc3RyaW5nO1xuICBwcml2YXRlIHdlYnNvY2tldD86IFdlYlNvY2tldDtcbiAgcHJpdmF0ZSB3c0NhbGxiYWNrczogTWFwPHN0cmluZywgKGRhdGE6IGFueSkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoYmFzZVVybDogc3RyaW5nLCBhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdDxUPihcbiAgICBlbmRwb2ludDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9XG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2U8VD4+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9JHtlbmRwb2ludH1gO1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIC4uLihvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8fCB7fSksXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBIYW5kbGUgbm9uLUpTT04gcmVzcG9uc2VzIGdyYWNlZnVsbHlcbiAgICAgIGxldCBkYXRhO1xuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgICBpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YS5lcnJvciBcbiAgICAgICAgICA/IGRhdGEuZXJyb3IgXG4gICAgICAgICAgOiBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5lcnJvcihgQVBJIEVycm9yIFske3Jlc3BvbnNlLnN0YXR1c31dOmAsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnID8geyBtZXNzYWdlOiBkYXRhIH0gYXMgVCA6IGRhdGEsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEkgUmVxdWVzdCBFcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWFsdGggY2hlY2tcbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTxBUElSZXNwb25zZTx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4+IHtcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBoZWFsdGggY2hlY2sgdG8gJHt0aGlzLmJhc2VVcmx9L2FwaS9vYnNpZGlhbi9oZWFsdGhgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PHsgc3RhdHVzOiBzdHJpbmc7IHZlcnNpb246IHN0cmluZyB9PignL2FwaS9vYnNpZGlhbi9oZWFsdGgnLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBIZWFsdGggY2hlY2sgcmVzdWx0OicsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIEFsdGVybmF0aXZlIGhlYWx0aCBjaGVjayBtZXRob2QgaWYgdGhlIG1haW4gb25lIGZhaWxzXG4gIGFzeW5jIHNpbXBsZUhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L2FwaS9vYnNpZGlhbi9oZWFsdGhgO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2sgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDUpIHsgLy8gNDA1IG1lYW5zIHNlcnZlciBpcyB1cCBidXQgZG9lc24ndCBzdXBwb3J0IEhFQURcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnb2snIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Nvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGF0IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgY2hhdChyZXF1ZXN0OiBDaGF0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29udmVyc2F0aW9uSGlzdG9yeShjb252ZXJzYXRpb25JZDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gNTApOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvbnZlcnNhdGlvbkhpc3Rvcnk+PiB7XG4gICAgY29uc3QgcmVxdWVzdEJvZHk6IENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0ID0ge1xuICAgICAgY29udmVyc2F0aW9uX2lkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIGluY2x1ZGVfbWVzc2FnZXM6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbi9oaXN0b3J5Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChgL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENvcGlsb3QgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihyZXF1ZXN0OiBDb3BpbG90UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29waWxvdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvcGlsb3QvY29tcGxldGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV29ya2Zsb3cgZXhlY3V0aW9uXG4gIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQWdlbnQgbWFuYWdlbWVudFxuICBhc3luYyBnZXRBZ2VudHMoKTogUHJvbWlzZTxBUElSZXNwb25zZTxBZ2VudFtdPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cycpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQWdlbnQocmVxdWVzdDogQWdlbnRDcmVhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxBZ2VudD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudHMvY3JlYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVBZ2VudChyZXF1ZXN0OiBBZ2VudEV4ZWN1dGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxhbnk+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnQvZXhlY3V0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBWYXVsdCBhbmFseXNpc1xuICBhc3luYyBhbmFseXplVmF1bHRDb250ZXh0KHJlcXVlc3Q6IFZhdWx0Q29udGV4dFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFZhdWx0Q29udGV4dFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2NvbnRleHQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVGFzayBwbGFubmluZ1xuICBhc3luYyBwbGFuVGFza3MocmVxdWVzdDogVGFza1BsYW5uaW5nUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VGFza1BsYW5uaW5nUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vcGxhbm5pbmcvdGFza3MnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSW50ZWxsaWdlbmNlIHBhcnNpbmdcbiAgYXN5bmMgcGFyc2VJbnRlbGxpZ2VuY2UocmVxdWVzdDogSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBNZW1vcnkgbWFuYWdlbWVudFxuICBhc3luYyB1cGRhdGVNZW1vcnkocmVxdWVzdDogTWVtb3J5VXBkYXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9tZW1vcnkvdXBkYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBmdW5jdGlvbmFsaXR5XG4gIGNvbm5lY3RXZWJTb2NrZXQoY2FsbGJhY2tzOiB7XG4gICAgb25DaGF0PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbldvcmtmbG93UHJvZ3Jlc3M/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uQ29waWxvdD86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25WYXVsdFN5bmM/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uRXJyb3I/OiAoZXJyb3I6IHN0cmluZykgPT4gdm9pZDtcbiAgICBvbkNvbm5lY3Q/OiAoKSA9PiB2b2lkO1xuICAgIG9uRGlzY29ubmVjdD86ICgpID0+IHZvaWQ7XG4gIH0pOiB2b2lkIHtcbiAgICBjb25zdCB3c1VybCA9IHRoaXMuYmFzZVVybC5yZXBsYWNlKCdodHRwJywgJ3dzJykgKyAnL3dzL29ic2lkaWFuJztcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBXZWJTb2NrZXQgY29ubmVjdGlvbiB0byAke3dzVXJsfWApO1xuICAgIFxuICAgIHRoaXMud2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCh3c1VybCk7XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IGNvbm5lY3RlZCB0byBFdm9BZ2VudFgnKTtcbiAgICAgIGNhbGxiYWNrcy5vbkNvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFdlYlNvY2tldE1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IG1lc3NhZ2UgcmVjZWl2ZWQ6JywgbWVzc2FnZS50eXBlKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY2hhdCc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25DaGF0Py4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dvcmtmbG93X3Byb2dyZXNzJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbldvcmtmbG93UHJvZ3Jlc3M/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY29waWxvdCc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25Db3BpbG90Py4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3ZhdWx0X3N5bmMnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uVmF1bHRTeW5jPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignRmFpbGVkIHRvIHBhcnNlIFdlYlNvY2tldCBtZXNzYWdlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZyb20gRXZvQWdlbnRYJywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgIGNhbGxiYWNrcy5vbkRpc2Nvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3InKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQpIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LmNsb3NlKCk7XG4gICAgICB0aGlzLndlYnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZW5kV2ViU29ja2V0TWVzc2FnZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCAmJiB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGUsIGRhdGEgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU47XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldywgVEZpbGUsIEVkaXRvclBvc2l0aW9uLCByZXF1ZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9ULCBWYXVsdFBpbG90VmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBDaGF0TW9kYWwgfSBmcm9tICcuL2NoYXQtbW9kYWwnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RhbCB9IGZyb20gJy4vd29ya2Zsb3ctbW9kYWwnO1xuaW1wb3J0IHsgRXZvQWdlbnRYQ2xpZW50IH0gZnJvbSAnLi9hcGktY2xpZW50JztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncywgQ29waWxvdFJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmZXRjaFNjaGVkdWxlLCBpbmplY3RTY2hlZHVsZSwgdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIH0gZnJvbSAnLi9wbGFubmVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmF1bHRQaWxvdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzITogVmF1bHRQaWxvdFNldHRpbmdzO1xuICBhcGlDbGllbnQhOiBFdm9BZ2VudFhDbGllbnQ7XG4gIHByaXZhdGUgd2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIHByaXZhdGUgY29waWxvdEVuYWJsZWQgPSBmYWxzZTtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIEluaXRpYWxpemUgQVBJIGNsaWVudFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcblxuICAgIC8vIFRlc3QgYmFja2VuZCBjb25uZWN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIFZhdWx0UGlsb3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcsIDMwMDApO1xuICAgICAgICAvLyBDb25uZWN0IFdlYlNvY2tldCBpZiBlbmFibGVkXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCkge1xuICAgICAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkOicsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIEV2b0FnZW50WCBiYWNrZW5kIG9mZmxpbmUgLSBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yaycsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4pqg77iPIENhbm5vdCBjb25uZWN0IHRvIEV2b0FnZW50WCBiYWNrZW5kJywgNTAwMCk7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgdmlld1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignYm90JywgJ1ZhdWx0UGlsb3QnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLm9wZW5DaGF0TW9kYWwoKTtcbiAgICB9KTtcbiAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtcmliYm9uLWNsYXNzJyk7XG5cbiAgICAvLyBSZWdpc3RlciBjb21tYW5kc1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tY2hhdCcsXG4gICAgICBuYW1lOiAnT3BlbiBDaGF0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5DaGF0TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnZXhlY3V0ZS13b3JrZmxvdycsXG4gICAgICBuYW1lOiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuV29ya2Zsb3dNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhbmFseXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBbmFseXplIEN1cnJlbnQgVmF1bHQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYW5hbHl6ZVZhdWx0KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NvcGlsb3QtY29tcGxldGUnLFxuICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMuZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncXVpY2stY2hhdCcsXG4gICAgICBuYW1lOiAnUXVpY2sgQ2hhdCB3aXRoIFNlbGVjdGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi10YXNrcycsXG4gICAgICBuYW1lOiAnUGxhbiBUYXNrcyBmcm9tIE5vdGUnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5wbGFuVGFza3NGcm9tTm90ZShlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLW15LWRheScsXG4gICAgICBuYW1lOiAnUGxhbiBNeSBEYXknLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucGxhbk15RGF5KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tdmF1bHRwaWxvdC12aWV3JyxcbiAgICAgIG5hbWU6ICdPcGVuIFZhdWx0UGlsb3QgVmlldycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZVZpZXcoKVxuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIgZWRpdG9yIGV2ZW50cyBmb3IgY29waWxvdFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBWYXVsdFBpbG90U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVCk7XG4gICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gIH1cblxuICAvLyBXZWJTb2NrZXQgTWFuYWdlbWVudFxuICBjb25uZWN0V2ViU29ja2V0KCkge1xuICAgIGlmICh0aGlzLndlYnNvY2tldENvbm5lY3RlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5hcGlDbGllbnQuY29ubmVjdFdlYlNvY2tldCh7XG4gICAgICBvbkNoYXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY2hhdCB1cGRhdGVzXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2hhdCB1cGRhdGU6JywgZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25Xb3JrZmxvd1Byb2dyZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICBuZXcgTm90aWNlKGBXb3JrZmxvdzogJHtkYXRhLnN0ZXB9YCwgMjAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db3BpbG90OiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgY29waWxvdCBzdWdnZXN0aW9uc1xuICAgICAgICB0aGlzLmhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uVmF1bHRTeW5jOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgdmF1bHQgc3luY2hyb25pemF0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdCBzeW5jIHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgbmV3IE5vdGljZShgV2ViU29ja2V0IGVycm9yOiAke2Vycm9yfWAsIDUwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRGlzY29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgZGlzY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgdGhpcy5hcGlDbGllbnQuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBpc1dlYlNvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBNb2RhbCBNYW5hZ2VtZW50XG4gIG9wZW5DaGF0TW9kYWwoKSB7XG4gICAgbmV3IENoYXRNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlbldvcmtmbG93TW9kYWwoKSB7XG4gICAgbmV3IFdvcmtmbG93TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIC8vIENvbW1hbmQgSW1wbGVtZW50YXRpb25zXG4gIGFzeW5jIGFuYWx5emVWYXVsdCgpIHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdBbmFseXppbmcgdmF1bHQuLi4nLCAwKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlc1xuICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICAvLyBJbmNsdWRlIHVwIHRvIDEwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMTApKSB7XG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgY29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2ZpbGVDb250ZW50fVxcblxcbmA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuYW5hbHl6ZVZhdWx0Q29udGV4dCh7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGFuYWx5c2lzX3R5cGU6ICdpbnNpZ2h0cydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhbmFseXNpcyBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdCBBbmFseXNpcyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IGFuYWx5c2lzQ29udGVudCA9IGAjIFZhdWx0IEFuYWx5c2lzIC0gJHt0aW1lc3RhbXB9XFxuXFxuYDtcbiAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBBbmFseXNpc1xcblxcbiR7cmVzcG9uc2UuZGF0YS5hbmFseXNpc31cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5zaWdodHMgJiYgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBLZXkgSW5zaWdodHNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMuZm9yRWFjaChpbnNpZ2h0ID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke2luc2lnaHR9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMgJiYgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgUmVjb21tZW5kYXRpb25zXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtyZWN9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgYW5hbHlzaXNDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVmF1bHQgYW5hbHlzaXMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBBbmFseXNpcyBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSB7XG4gICAgICBuZXcgTm90aWNlKCdDb3BpbG90IGlzIGRpc2FibGVkIGluIHNldHRpbmdzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSBjdXJyZW50TGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcbiAgICBjb25zdCBmdWxsVGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gICAgLy8gQ2xpZW50LXNpZGUgdmFsaWRhdGlvbiB0byBwcmV2ZW50IDQyMiBlcnJvcnNcbiAgICBpZiAoIWZ1bGxUZXh0IHx8IGZ1bGxUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBjb21wbGV0ZSBlbXB0eSB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBmdWxsVGV4dCxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nLFxuICAgICAgICBjb250ZXh0OiB0ZXh0QmVmb3JlQ3Vyc29yXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgY29tcGxldGlvbiBhdCBjdXJzb3JcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShyZXNwb25zZS5kYXRhLmNvbXBsZXRpb24sIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0NvbXBsZXRpb24gaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgbmV3IE5vdGljZSgnTm8gdGV4dCBzZWxlY3RlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNoYXQoe1xuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGV4cGxhaW4gb3IgYW5hbHl6ZSB0aGlzIHRleHQ6IFwiJHtzZWxlY3Rpb259XCJgLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBlZGl0b3IuZ2V0VmFsdWUoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IHJlc3BvbnNlIGJlbG93IHNlbGVjdGlvblxuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCd0bycpO1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gYFxcblxcbioqVmF1bHRQaWxvdCBBbmFseXNpczoqKlxcbiR7cmVzcG9uc2UuZGF0YS5yZXNwb25zZX1cXG5cXG5gO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0FuYWx5c2lzIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghY29udGVudC50cmltKCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGNvbnRlbnQgdG8gYW5hbHl6ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHRhc2tzLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgICBnb2FsOiBgQ3JlYXRlIGEgdGFzayBwbGFuIGJhc2VkIG9uIHRoaXMgbm90ZTogJHthY3RpdmVGaWxlPy5uYW1lIHx8ICdVbnRpdGxlZCd9YCxcbiAgICAgICAgY29udGV4dDogY29udGVudCxcbiAgICAgICAgdGltZWZyYW1lOiAnMSB3ZWVrJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRhc2sgcGxhbiBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBUYXNrIFBsYW4gLSAke2FjdGl2ZUZpbGU/LmJhc2VuYW1lIHx8ICdVbnRpdGxlZCd9IC0gJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXNrQ29udGVudCA9IGAjICR7cmVzcG9uc2UuZGF0YS5wbGFuLnRpdGxlfVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAke3Jlc3BvbnNlLmRhdGEucGxhbi5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgKipFc3RpbWF0ZWQgRHVyYXRpb246KiogJHtyZXNwb25zZS5kYXRhLnBsYW4uZXN0aW1hdGVkX2R1cmF0aW9ufVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzICYmIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIFRhc2tzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnBsYW4udGFza3MuZm9yRWFjaCgodGFzazogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2suc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICdbeF0nIDogJ1sgXSc7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgJHtjaGVja2JveH0gKioke3Rhc2sudGl0bGV9KiogKCR7dGFzay5wcmlvcml0eX0gcHJpb3JpdHkpXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAke3Rhc2suZGVzY3JpcHRpb259XFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAqRXN0aW1hdGVkIHRpbWU6ICR7dGFzay5lc3RpbWF0ZWRfdGltZX0qXFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMgJiYgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgTWlsZXN0b25lc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmZvckVhY2goKG1pbGVzdG9uZTogYW55KSA9PiB7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgLSAqKiR7bWlsZXN0b25lLnRpdGxlfSoqICgke21pbGVzdG9uZS50YXJnZXRfZGF0ZX0pXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICR7bWlsZXN0b25lLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIHRhc2tDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFuIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1Rhc2sgcGxhbm5pbmcgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW5uaW5nIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5NeURheSgpIHtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBub3Rl4oCUb3BlbiB0b2RheVxcJ3MgZGFpbHkgbm90ZSBmaXJzdC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdQbGFubmluZyB5b3VyIGRheS4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlYWQgdGhlIGVudGlyZSBmaWxlIGNvbnRlbnRcbiAgICAgIGNvbnN0IGZpbGVUZXh0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggc2NoZWR1bGUgZnJvbSBBUElcbiAgICAgIGNvbnN0IHsgc2NoZWR1bGVNYXJrZG93biwgaGVhZGxpbmUgfSA9IGF3YWl0IGZldGNoU2NoZWR1bGUoZmlsZVRleHQpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgcmV0dXJuZWQgc2NoZWR1bGVcbiAgICAgIGlmICghdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duKHNjaGVkdWxlTWFya2Rvd24pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzY2hlZHVsZSBkYXRhIHJlY2VpdmVkIGZyb20gQVBJJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEluamVjdCB0aGUgc2NoZWR1bGUgaW50byB0aGUgbm90ZVxuICAgICAgY29uc3QgdXBkYXRlZFRleHQgPSBpbmplY3RTY2hlZHVsZShmaWxlVGV4dCwgc2NoZWR1bGVNYXJrZG93bik7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHVwZGF0ZWRUZXh0KTtcblxuICAgICAgLy8gSGlkZSB0aGUgcHJvZ3Jlc3Mgbm90aWNlXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICAvLyBTaG93IHN1Y2Nlc3Mgbm90aWNlXG4gICAgICBjb25zdCBzdWNjZXNzTWVzc2FnZSA9IGhlYWRsaW5lID8gYCR7aGVhZGxpbmV9IOKchWAgOiAnU2NoZWR1bGUgaW5zZXJ0ZWQg4pyFJztcbiAgICAgIG5ldyBOb3RpY2Uoc3VjY2Vzc01lc3NhZ2UpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdHlwZXMgb2YgZXJyb3JzXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnSlNPTicpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5lciBBUEkgZXJyb3I6IEludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmVyIEFQSSBlcnJvcjogVW5hYmxlIHRvIGNvbm5lY3QgdG8gbG9jYWxob3N0OjMwMDAnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBQbGFubmVyIEFQSSBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdQbGFubmVyIEFQSSBlcnJvcjogVW5rbm93biBlcnJvciBvY2N1cnJlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgIGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICAvLyBBdXRvLWNvbXBsZXRpb24gaGFuZGxpbmdcbiAgcHJpdmF0ZSBoYW5kbGVLZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUgfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NtLWNvbnRlbnQnKSkgcmV0dXJuO1xuXG4gICAgLy8gT25seSB0cmlnZ2VyIG9uIHNwZWNpZmljIGtleXMgYW5kIGNvbmRpdGlvbnNcbiAgICBpZiAoIXRoaXMuc2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZShldmVudCkpIHJldHVybjtcblxuICAgIC8vIERlYm91bmNlIGF1dG8tY29tcGxldGlvbiByZXF1ZXN0cyB3aXRoIGxvbmdlciBkZWxheVxuICAgIGNsZWFyVGltZW91dCgodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQpO1xuICAgICh0aGlzIGFzIGFueSkuYXV0b0NvbXBsZXRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyQXV0b0NvbXBsZXRpb24oKTtcbiAgICB9LCAzMDAwKTsgLy8gSW5jcmVhc2VkIHRvIDMgc2Vjb25kc1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRUcmlnZ2VyQXV0b0NvbXBsZXRlKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciBvbiBuYXZpZ2F0aW9uIG9yIG1vZGlmaWVyIGtleXNcbiAgICBjb25zdCBub25UcmlnZ2VyS2V5cyA9IFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnLCAnVGFiJywgJ1NoaWZ0JywgJ0NvbnRyb2wnLCAnQWx0JywgJ01ldGEnLCAnRXNjYXBlJ107XG4gICAgaWYgKG5vblRyaWdnZXJLZXlzLmluZGV4T2YoZXZlbnQua2V5KSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBcbiAgICAvLyBPbmx5IHRyaWdnZXIgYXQgdGhlIGVuZCBvZiBhIGxpbmVcbiAgICBpZiAoY3Vyc29yLmNoICE9PSBjdXJyZW50TGluZS5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3Igc2VudGVuY2UtZW5kaW5nIHRyaWdnZXJzXG4gICAgY29uc3QgdHJpZ2dlckNoYXJzID0gWycuJywgJyEnLCAnPycsICc6JywgJ1xcbiddO1xuICAgIGNvbnN0IGxhc3RDaGFyID0gY3VycmVudExpbmUuc2xpY2UoLTEpO1xuICAgIFxuICAgIC8vIFRyaWdnZXIgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyB3aXRoIHNwYWNlXG4gICAgaWYgKHRyaWdnZXJDaGFycy5pbmRleE9mKGxhc3RDaGFyKSAhPT0gLTEgJiYgZXZlbnQua2V5ID09PSAnICcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcmlnZ2VyIGFmdGVyIEVudGVyIGtleSAobmV3IGxpbmUpXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBjdXJyZW50TGluZS50cmltKCkubGVuZ3RoID4gMTApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRyaWdnZXJBdXRvQ29tcGxldGlvbigpIHtcbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcblxuICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCBmdWxsVGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIFxuICAgIC8vIE1vcmUgcmVzdHJpY3RpdmUgY29uZGl0aW9ucyBmb3IgYXV0by1jb21wbGV0aW9uXG4gICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKS5sZW5ndGggPCAxMCB8fCBjdXJzb3IuY2ggIT09IGN1cnJlbnRMaW5lLmxlbmd0aCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFByZXZlbnQgNDIyIGVycm9ycyBmcm9tIGVtcHR5IHRleHRcbiAgICBpZiAoIWZ1bGxUZXh0IHx8IGZ1bGxUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIC8vIEFkZCBjb29sZG93biB0byBwcmV2ZW50IHRvbyBmcmVxdWVudCByZXF1ZXN0c1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgbGFzdFJlcXVlc3QgPSAodGhpcyBhcyBhbnkpLmxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0IHx8IDA7XG4gICAgaWYgKG5vdyAtIGxhc3RSZXF1ZXN0IDwgMTAwMDApIHJldHVybjsgLy8gMTAgc2Vjb25kIGNvb2xkb3duXG4gICAgXG4gICAgKHRoaXMgYXMgYW55KS5sYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCA9IG5vdztcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvcGlsb3RDb21wbGV0aW9uKHtcbiAgICAgICAgdGV4dDogZnVsbFRleHQsXG4gICAgICAgIGN1cnNvcl9wb3NpdGlvbjogZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnNvciksXG4gICAgICAgIGZpbGVfdHlwZTogJ21hcmtkb3duJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNob3cgc3VnZ2VzdGlvbnMgKGZvciBub3cganVzdCBzaG93IGZpcnN0IHN1Z2dlc3Rpb24pXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYEF1dG8tc3VnZ2VzdGlvbjogJHtyZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zWzBdfWAsIDMwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgZm9yIGF1dG8tY29tcGxldGlvblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dG8tY29tcGxldGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbihkYXRhOiBDb3BpbG90UmVzcG9uc2UpIHtcbiAgICAvLyBIYW5kbGUgcmVhbC10aW1lIGNvcGlsb3Qgc3VnZ2VzdGlvbnMgZnJvbSBXZWJTb2NrZXRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoYExpdmUgc3VnZ2VzdGlvbjogJHtkYXRhLmNvbXBsZXRpb259YCwgMjAwMCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0dGluZ3MgbWFuYWdlbWVudFxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgQVBJIGNsaWVudCBpZiBVUkwgY2hhbmdlZFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcbiAgICBcbiAgICAvLyBSZWNvbm5lY3QgV2ViU29ja2V0IGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgIXRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiB0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyByZXF1ZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBUeXBlIGRlZmluaXRpb25zIGZvciB0aGUgcGxhbm5lciBmZWF0dXJlXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5uZXJSZXNwb25zZSB7XG4gIHNjaGVkdWxlTWFya2Rvd246IHN0cmluZztcbiAgaGVhZGxpbmU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQbGFubmVyUmVxdWVzdCB7XG4gIG5vdGU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBGZXRjaGVzIHNjaGVkdWxlIGRhdGEgZnJvbSB0aGUgcGxhbm5lciBBUElcbiAqIEBwYXJhbSBub3RlVGV4dCAtIFRoZSBmdWxsIHRleHQgb2YgdGhlIGFjdGl2ZSBub3RlXG4gKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIHNjaGVkdWxlIG1hcmtkb3duIGFuZCBoZWFkbGluZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTY2hlZHVsZShub3RlVGV4dDogc3RyaW5nKTogUHJvbWlzZTxQbGFubmVyUmVzcG9uc2U+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvcGxhbmRheScsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBub3RlOiBub3RlVGV4dCB9KVxuICB9KTtcblxuICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZSk7XG59XG5cbi8qKlxuICogRmluZHMgYW5kIGV4dHJhY3RzIHRoZSBTY2hlZHVsZSBzZWN0aW9uIGZyb20gbm90ZSB0ZXh0XG4gKiBAcGFyYW0gdGV4dCAtIFRoZSBmdWxsIG5vdGUgdGV4dFxuICogQHJldHVybnMgTWF0Y2ggcmVzdWx0IHdpdGggc2NoZWR1bGUgc2VjdGlvbiBkZXRhaWxzIG9yIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTY2hlZHVsZVNlY3Rpb24odGV4dDogc3RyaW5nKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwge1xuICAvLyBGaXJzdCB0cnkgdG8gbWF0Y2ggaGVhZGluZ3MgdGhhdCBhcmUgZXhhY3RseSBcIiMjIFNjaGVkdWxlXCIgKHdpdGggb3B0aW9uYWwgY29udGVudCBhZnRlcilcbiAgbGV0IHNjaGVkdWxlUmVnZXggPSAvKF4jI1xccytTY2hlZHVsZVxcYlteXFxuXSpcXG4pKFtcXHNcXFNdKj8pKD89XFxuIyNcXHN8JCkvaW07XG4gIGxldCBtYXRjaCA9IHRleHQubWF0Y2goc2NoZWR1bGVSZWdleCk7XG4gIFxuICBpZiAobWF0Y2gpIHtcbiAgICByZXR1cm4gbWF0Y2g7XG4gIH1cbiAgXG4gIC8vIElmIG5vIGV4YWN0IG1hdGNoLCB0cnkgdG8gbWF0Y2ggaGVhZGluZ3MgdGhhdCBjb250YWluIFwiU2NoZWR1bGVcIiBhcyBhIHdvcmRcbiAgc2NoZWR1bGVSZWdleCA9IC8oXiMjXFxzKig/Oi4qXFxzKT9cXGJTY2hlZHVsZVxcYig/Olxccy4qKT8kXFxuKShbXFxzXFxTXSo/KSg/PVxcbiMjXFxzfCQpL2ltO1xuICByZXR1cm4gdGV4dC5tYXRjaChzY2hlZHVsZVJlZ2V4KTtcbn1cblxuLyoqXG4gKiBJbmplY3RzIG9yIHJlcGxhY2VzIHRoZSBzY2hlZHVsZSBzZWN0aW9uIGluIHRoZSBub3RlIHRleHRcbiAqIEBwYXJhbSBvcmlnaW5hbFRleHQgLSBUaGUgb3JpZ2luYWwgbm90ZSB0ZXh0XG4gKiBAcGFyYW0gc2NoZWR1bGVNYXJrZG93biAtIFRoZSBuZXcgc2NoZWR1bGUgY29udGVudCB0byBpbmplY3RcbiAqIEByZXR1cm5zIFVwZGF0ZWQgbm90ZSB0ZXh0IHdpdGggdGhlIG5ldyBzY2hlZHVsZSBzZWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RTY2hlZHVsZShvcmlnaW5hbFRleHQ6IHN0cmluZywgc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbWF0Y2ggPSBmaW5kU2NoZWR1bGVTZWN0aW9uKG9yaWdpbmFsVGV4dCk7XG4gIFxuICBpZiAobWF0Y2gpIHtcbiAgICAvLyBSZXBsYWNlIGV4aXN0aW5nIHNjaGVkdWxlIHNlY3Rpb24gKGtlZXAgaGVhZGluZywgcmVwbGFjZSBjb250ZW50KVxuICAgIGNvbnN0IFtmdWxsTWF0Y2gsIGhlYWRpbmddID0gbWF0Y2g7XG4gICAgY29uc3QgcmVwbGFjZW1lbnQgPSBoZWFkaW5nICsgc2NoZWR1bGVNYXJrZG93bjtcbiAgICByZXR1cm4gb3JpZ2luYWxUZXh0LnJlcGxhY2UoZnVsbE1hdGNoLCByZXBsYWNlbWVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQXBwZW5kIG5ldyBzY2hlZHVsZSBzZWN0aW9uXG4gICAgY29uc3QgbmV3U2VjdGlvbiA9IGBcXG5cXG4jIyBTY2hlZHVsZVxcbiR7c2NoZWR1bGVNYXJrZG93bn1gO1xuICAgIHJldHVybiBvcmlnaW5hbFRleHQgKyBuZXdTZWN0aW9uO1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIHRoZSBzY2hlZHVsZSBtYXJrZG93biBpcyBwcm9wZXJseSBmb3JtYXR0ZWRcbiAqIEBwYXJhbSBzY2hlZHVsZU1hcmtkb3duIC0gVGhlIHNjaGVkdWxlIGNvbnRlbnQgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIFRydWUgaWYgdmFsaWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duKHNjaGVkdWxlTWFya2Rvd246IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBCYXNpYyB2YWxpZGF0aW9uIC0gY2hlY2sgaWYgaXQncyBub3QgZW1wdHkgYW5kIGNvbnRhaW5zIHNvbWUgY29udGVudFxuICByZXR1cm4gc2NoZWR1bGVNYXJrZG93bi50cmltKCkubGVuZ3RoID4gMDtcbn1cbiJdLCJuYW1lcyI6WyJERUZBVUxUX1NFVFRJTkdTIiwiYmFja2VuZFVybCIsImFwaUtleSIsImVuYWJsZVdlYlNvY2tldCIsImVuYWJsZUNvcGlsb3QiLCJlbmFibGVBdXRvQ29tcGxldGUiLCJkZWZhdWx0QWdlbnQiLCJkZWZhdWx0TW9kZSIsImNoYXRIaXN0b3J5TGltaXQiLCJkZWJ1Z01vZGUiLCJWYXVsdFBpbG90U2V0dGluZ1RhYiIsIlBsdWdpblNldHRpbmdUYWIiLCJjb25zdHJ1Y3RvciIsImFwcCIsInBsdWdpbiIsInN1cGVyIiwidGhpcyIsImRpc3BsYXkiLCJjb250YWluZXJFbCIsImVtcHR5IiwiY3JlYXRlRWwiLCJ0ZXh0IiwiU2V0dGluZyIsInNldE5hbWUiLCJzZXREZXNjIiwiYWRkVGV4dCIsInNldFBsYWNlaG9sZGVyIiwic2V0VmFsdWUiLCJzZXR0aW5ncyIsIm9uQ2hhbmdlIiwidmFsdWUiLCJfX2F3YWl0ZXIiLCJzYXZlU2V0dGluZ3MiLCJhZGRCdXR0b24iLCJidXR0b24iLCJzZXRCdXR0b25UZXh0Iiwib25DbGljayIsInRlc3RDb25uZWN0aW9uIiwiYWRkVG9nZ2xlIiwidG9nZ2xlIiwiY29ubmVjdFdlYlNvY2tldCIsImRpc2Nvbm5lY3RXZWJTb2NrZXQiLCJhZGREcm9wZG93biIsImRyb3Bkb3duIiwiYWRkT3B0aW9uIiwiYWRkU2xpZGVyIiwic2xpZGVyIiwic2V0TGltaXRzIiwic2V0RHluYW1pY1Rvb2x0aXAiLCJjbHMiLCJpbm5lckhUTUwiLCJub3RpY2UiLCJOb3RpY2UiLCJyZXNwb25zZSIsImFwaUNsaWVudCIsImhlYWx0aENoZWNrIiwic3VjY2VzcyIsImVycm9yIiwiX2EiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJ3YXJuIiwic2ltcGxlUmVzcG9uc2UiLCJzaW1wbGVIZWFsdGhDaGVjayIsImRhdGEiLCJzdGF0dXMiLCJ2ZXJzaW9uIiwiaGlkZSIsIkVycm9yIiwibWVzc2FnZSIsIlZJRVdfVFlQRV9WQVVMVFBJTE9UIiwiVmF1bHRQaWxvdFZpZXciLCJJdGVtVmlldyIsImxlYWYiLCJnZXRWaWV3VHlwZSIsImdldERpc3BsYXlUZXh0IiwiZ2V0SWNvbiIsIm9uT3BlbiIsImNvbnRhaW5lciIsImFkZENsYXNzIiwiaGVhZGVyRWwiLCJzdGF0dXNFbCIsInVwZGF0ZVN0YXR1cyIsInF1aWNrQWN0aW9uc0VsIiwiY3JlYXRlUXVpY2tBY3Rpb25zIiwidmF1bHRTdGF0c0VsIiwidXBkYXRlVmF1bHRTdGF0cyIsImFjdGl2aXRpZXNFbCIsImFkZFN0eWxlcyIsInN0YXR1c0NvbnRhaW5lciIsImJhY2tlbmRTdGF0dXMiLCJiYWNrZW5kSW5kaWNhdG9yIiwid3NTdGF0dXMiLCJpc1dlYlNvY2tldENvbm5lY3RlZCIsImNoZWNrQmFja2VuZFN0YXR1cyIsImluZGljYXRvciIsInRleHRDb250ZW50IiwiY2xhc3NOYW1lIiwiYWN0aW9uc0dyaWQiLCJvbmNsaWNrIiwib3BlbkNoYXRNb2RhbCIsIm9wZW5Xb3JrZmxvd01vZGFsIiwiYW5hbHl6ZVZhdWx0IiwiYWN0aXZlVmlldyIsIndvcmtzcGFjZSIsImdldEFjdGl2ZVZpZXdPZlR5cGUiLCJNYXJrZG93blZpZXciLCJnZXRDb3BpbG90Q29tcGxldGlvbiIsImVkaXRvciIsInN0YXRzQ29udGFpbmVyIiwiZmlsZXMiLCJ2YXVsdCIsImdldEZpbGVzIiwibWFya2Rvd25GaWxlcyIsImdldE1hcmtkb3duRmlsZXMiLCJsYWJlbCIsImxlbmd0aCIsInRvU3RyaW5nIiwiZ2V0QWxsTG9hZGVkRmlsZXMiLCJmaWx0ZXIiLCJmIiwiVEZvbGRlciIsImZvckVhY2giLCJzdGF0Iiwic3RhdEVsIiwibG9hZEFnZW50SW5mbyIsImdldEFnZW50cyIsImFnZW50Q291bnQiLCJhY3RpdmVBZ2VudHMiLCJhZ2VudCIsImFjdGl2ZSIsImFnZW50U3RhdHNFbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZUVsIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiaGVhZCIsImFwcGVuZENoaWxkIiwib25DbG9zZSIsIkNoYXRNb2RhbCIsIk1vZGFsIiwiY3VycmVudENvbnZlcnNhdGlvbklkIiwibWVzc2FnZXMiLCJjdXJyZW50TW9kZSIsImNvbnRlbnRFbCIsInRvb2xiYXJFbCIsIm1vZGVUb2dnbGVDb250YWluZXIiLCJjcmVhdGVNb2RlVG9nZ2xlIiwiY2xlYXJDaGF0IiwiYWdlbnRTZWxlY3QiLCJsb2FkQWdlbnRzIiwiY2hhdENvbnRhaW5lciIsIm1lc3NhZ2VzRWwiLCJpbnB1dENvbnRhaW5lciIsImlucHV0RWwiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJnZXRQbGFjZWhvbGRlclRleHQiLCJzZW5kQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0Iiwic2VuZE1lc3NhZ2UiLCJmb2N1cyIsImxvYWRDb252ZXJzYXRpb25IaXN0b3J5Iiwic2VsZWN0RWwiLCJuYW1lIiwiZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSIsInJlbmRlck1lc3NhZ2VzIiwidHJpbSIsImRpc2FibGVkIiwiYWRkTWVzc2FnZSIsImFjdGl2ZUZpbGUiLCJnZXRBY3RpdmVGaWxlIiwidmF1bHRDb250ZXh0IiwiY29udGVudCIsInJlYWQiLCJjaGF0IiwiY29udmVyc2F0aW9uX2lkIiwidW5kZWZpbmVkIiwidmF1bHRfY29udGV4dCIsImFnZW50X2lkIiwiZ2V0U2VsZWN0ZWRBZ2VudCIsIm1vZGUiLCJlcnJvck1zZyIsInF1ZXJ5U2VsZWN0b3IiLCJyb2xlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHVzaCIsInJlbmRlck1lc3NhZ2UiLCJzY3JvbGxUb0JvdHRvbSIsIm1lc3NhZ2VFbCIsInJlbmRlck1hcmtkb3duIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwicmVwbGFjZSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsImdldE1vZGVEZXNjcmlwdGlvbiIsIm1vZGVCdXR0b25zIiwiYXNrQnRuIiwiYWdlbnRCdG4iLCJzZXRNb2RlIiwiV29ya2Zsb3dNb2RhbCIsImlzRXhlY3V0aW5nIiwiZm9ybUVsIiwiZ29hbENvbnRhaW5lciIsImdvYWxJbnB1dCIsImNvbnRleHRDb250YWluZXIiLCJjb250ZXh0SW5wdXQiLCJvcHRpb25zQ29udGFpbmVyIiwiaW5jbHVkZUFjdGl2ZUZpbGUiLCJhY3RpdmVGaWxlQ2hlY2tib3giLCJjcmVhdGVTcGFuIiwiaW5jbHVkZUFsbEZpbGVzIiwiYWxsRmlsZXNDaGVja2JveCIsImV4ZWN1dGVCdXR0b24iLCJleGVjdXRlV29ya2Zsb3ciLCJjaGVja2VkIiwicHJvZ3Jlc3NDb250YWluZXIiLCJzdHlsZSIsInJlc3VsdHNDb250YWluZXIiLCJnb2FsIiwidmF1bHRDb250ZW50IiwiZmlsZSIsInNsaWNlIiwicmVxdWVzdCIsImNvbnRleHQiLCJ2YXVsdF9jb250ZW50Iiwic2V0dXBQcm9ncmVzc0xpc3RlbmVyIiwiZGlzcGxheVJlc3VsdHMiLCJkaXNwbGF5RXJyb3IiLCJkaXNwbGF5UHJvZ3Jlc3MiLCJzZXRUaW1lb3V0Iiwid29ya2Zsb3ciLCJleGVjdXRpb25fdGltZSIsInJlc3VsdEVsIiwicmVzdWx0Iiwic3RlcHNfdGFrZW4iLCJzdGVwc0VsIiwic3RlcHNMaXN0Iiwic3RlcCIsImFydGlmYWN0cyIsImFydGlmYWN0c0VsIiwiYXJ0aWZhY3QiLCJpbmRleCIsImFydGlmYWN0RWwiLCJ0aXRsZSIsInNhdmVBcnRpZmFjdEFzTm90ZSIsInNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUiLCJmaWxlbmFtZSIsImNyZWF0ZSIsInNwbGl0IiwiRXZvQWdlbnRYQ2xpZW50IiwiYmFzZVVybCIsIndzQ2FsbGJhY2tzIiwiTWFwIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludF8xIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsIk9iamVjdCIsImFzc2lnbiIsIkFjY2VwdCIsImZldGNoIiwiY3JlZGVudGlhbHMiLCJjb250ZW50VHlwZSIsImdldCIsImpzb24iLCJvayIsImVycm9yTWVzc2FnZSIsInN0YXR1c1RleHQiLCJsb2ciLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnZlcnNhdGlvbklkXzEiLCJjb252ZXJzYXRpb25JZCIsImxpbWl0IiwicmVxdWVzdEJvZHkiLCJpbmNsdWRlX21lc3NhZ2VzIiwiZGVsZXRlQ29udmVyc2F0aW9uIiwiY3JlYXRlQWdlbnQiLCJleGVjdXRlQWdlbnQiLCJhbmFseXplVmF1bHRDb250ZXh0IiwicGxhblRhc2tzIiwicGFyc2VJbnRlbGxpZ2VuY2UiLCJ1cGRhdGVNZW1vcnkiLCJjYWxsYmFja3MiLCJ3c1VybCIsIndlYnNvY2tldCIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uQ29ubmVjdCIsImNhbGwiLCJvbm1lc3NhZ2UiLCJldmVudCIsInBhcnNlIiwib25DaGF0IiwiX2IiLCJvbldvcmtmbG93UHJvZ3Jlc3MiLCJfYyIsIm9uQ29waWxvdCIsIl9kIiwib25WYXVsdFN5bmMiLCJfZSIsIm9uRXJyb3IiLCJfZiIsIm9uY2xvc2UiLCJjb2RlIiwicmVhc29uIiwib25EaXNjb25uZWN0Iiwib25lcnJvciIsImNsb3NlIiwic2VuZFdlYlNvY2tldE1lc3NhZ2UiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJWYXVsdFBpbG90UGx1Z2luIiwiUGx1Z2luIiwid2Vic29ja2V0Q29ubmVjdGVkIiwiY29waWxvdEVuYWJsZWQiLCJvbmxvYWQiLCJsb2FkU2V0dGluZ3MiLCJyZWdpc3RlclZpZXciLCJhZGRSaWJib25JY29uIiwiZXZ0IiwiYWRkQ29tbWFuZCIsImNhbGxiYWNrIiwiZWRpdG9yQ2FsbGJhY2siLCJxdWlja0NoYXRXaXRoU2VsZWN0aW9uIiwicGxhblRhc2tzRnJvbU5vdGUiLCJwbGFuTXlEYXkiLCJhY3RpdmF0ZVZpZXciLCJyZWdpc3RlckRvbUV2ZW50IiwiaGFuZGxlS2V5VXAiLCJiaW5kIiwiYWRkU2V0dGluZ1RhYiIsIm9udW5sb2FkIiwiZGV0YWNoTGVhdmVzT2ZUeXBlIiwiaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24iLCJvcGVuIiwiZmlsZUNvbnRlbnQiLCJhbmFseXNpc190eXBlIiwiYW5hbHlzaXNDb250ZW50IiwiYW5hbHlzaXMiLCJpbnNpZ2h0cyIsImluc2lnaHQiLCJyZWNvbW1lbmRhdGlvbnMiLCJyZWMiLCJjdXJzb3IiLCJnZXRDdXJzb3IiLCJ0ZXh0QmVmb3JlQ3Vyc29yIiwiZ2V0TGluZSIsImxpbmUiLCJzdWJzdHJpbmciLCJjaCIsImZ1bGxUZXh0IiwiZ2V0VmFsdWUiLCJjdXJzb3JfcG9zaXRpb24iLCJwb3NUb09mZnNldCIsImZpbGVfdHlwZSIsInJlcGxhY2VSYW5nZSIsImNvbXBsZXRpb24iLCJzZWxlY3Rpb24iLCJnZXRTZWxlY3Rpb24iLCJuZXdMaW5lIiwidGltZWZyYW1lIiwiYmFzZW5hbWUiLCJ0YXNrQ29udGVudCIsInBsYW4iLCJkZXNjcmlwdGlvbiIsImVzdGltYXRlZF9kdXJhdGlvbiIsInRhc2tzIiwidGFzayIsImNoZWNrYm94IiwicHJpb3JpdHkiLCJlc3RpbWF0ZWRfdGltZSIsIm1pbGVzdG9uZXMiLCJtaWxlc3RvbmUiLCJ0YXJnZXRfZGF0ZSIsImZpbGVUZXh0Iiwic2NoZWR1bGVNYXJrZG93biIsImhlYWRsaW5lIiwibm90ZVRleHQiLCJub3RlIiwiZmV0Y2hTY2hlZHVsZSIsInZhbGlkYXRlU2NoZWR1bGVNYXJrZG93biIsInVwZGF0ZWRUZXh0Iiwib3JpZ2luYWxUZXh0IiwibWF0Y2giLCJzY2hlZHVsZVJlZ2V4IiwiZmluZFNjaGVkdWxlU2VjdGlvbiIsImZ1bGxNYXRjaCIsImhlYWRpbmciLCJyZXBsYWNlbWVudCIsImluamVjdFNjaGVkdWxlIiwibW9kaWZ5Iiwic3VjY2Vzc01lc3NhZ2UiLCJsZWF2ZXMiLCJnZXRMZWF2ZXNPZlR5cGUiLCJyaWdodExlYWYiLCJnZXRSaWdodExlYWYiLCJzZXRWaWV3U3RhdGUiLCJyZXZlYWxMZWFmIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzaG91bGRUcmlnZ2VyQXV0b0NvbXBsZXRlIiwiY2xlYXJUaW1lb3V0IiwiYXV0b0NvbXBsZXRlVGltZW91dCIsInRyaWdnZXJBdXRvQ29tcGxldGlvbiIsImluZGV4T2YiLCJjdXJyZW50TGluZSIsImxhc3RDaGFyIiwibm93IiwibGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QiLCJzdWdnZXN0aW9ucyIsImxvYWREYXRhIiwic2F2ZURhdGEiXSwibWFwcGluZ3MiOiI0WEFJTyxNQUFNQSxFQUF1QyxDQUNsREMsV0FBWSx3QkFDWkMsT0FBUSxHQUNSQyxpQkFBaUIsRUFDakJDLGVBQWUsRUFDZkMsb0JBQW9CLEVBQ3BCQyxhQUFjLEdBQ2RDLFlBQWEsTUFDYkMsaUJBQWtCLElBQ2xCQyxXQUFXLEdBR1AsTUFBT0MsVUFBNkJDLEVBQUFBLGlCQUd4QyxXQUFBQyxDQUFZQyxFQUFVQyxHQUNwQkMsTUFBTUYsRUFBS0MsR0FDWEUsS0FBS0YsT0FBU0EsQ0FDZixDQUVELE9BQUFHLEdBQ0UsTUFBTUMsWUFBRUEsR0FBZ0JGLEtBQ3hCRSxFQUFZQyxRQUVaRCxFQUFZRSxTQUFTLEtBQU0sQ0FBRUMsS0FBTSx3QkFDbkNILEVBQVlFLFNBQVMsSUFBSyxDQUN4QkMsS0FBTSxvRUFJUkgsRUFBWUUsU0FBUyxLQUFNLENBQUVDLEtBQU0sZUFFbkMsSUFBSUMsRUFBQUEsUUFBUUosR0FDVEssUUFBUSxlQUNSQyxRQUFRLG1DQUNSQyxRQUFRSixHQUNQQSxFQUNHSyxlQUFlLHlCQUNmQyxTQUFTWCxLQUFLRixPQUFPYyxTQUFTM0IsWUFDOUI0QixTQUFlQyxHQUFRQyxFQUFBZixVQUFBLE9BQUEsRUFBQSxZQUN0QkEsS0FBS0YsT0FBT2MsU0FBUzNCLFdBQWE2QixRQUM1QmQsS0FBS0YsT0FBT2tCLGNBQ25CLEtBR1AsSUFBSVYsRUFBQUEsUUFBUUosR0FDVEssUUFBUSxXQUNSQyxRQUFRLGdFQUNSQyxRQUFR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
