"use strict";var e=require("obsidian");function t(e,t,n,i){return new(n||(n=Promise))(function(a,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function r(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,r)}l((i=i.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={enableVaultManagement:!0,autoSyncVaultStructure:!1,searchResultsLimit:50,enableSmartSearch:!0,batchOperationTimeout:3e4,showVaultStats:!0,maxSearchResults:100,defaultSearchType:"content",enableFileOperations:!0,confirmDestructiveOperations:!0,autoBackupBeforeOperations:!1};const i={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1,vaultManagement:n,modelSelection:{enabled:!0,devpipePath:"../dev-pipe",monitoringInterval:3e4,fallbackEnabled:!0,cacheDuration:3e5,retryAttempts:3,timeout:3e4,debugMode:!1,userPreferences:{priority:"balanced",maxCostPerRequest:.5,preferredProviders:[],qualityThreshold:.7}}};class a extends e.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){const{containerEl:a}=this;a.empty(),a.createEl("h2",{text:"VaultPilot Settings"}),a.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),a.createEl("h3",{text:"Connection"}),new e.Setting(a).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(e=>e.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=e,yield this.plugin.saveSettings()}))),new e.Setting(a).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(e=>e.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.apiKey=e,yield this.plugin.saveSettings()}))),new e.Setting(a).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(e=>e.setButtonText("Test Connection").onClick(()=>t(this,void 0,void 0,function*(){yield this.testConnection()}))),a.createEl("h3",{text:"Features"}),new e.Setting(a).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(e=>e.setValue(this.plugin.settings.enableWebSocket).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=e,yield this.plugin.saveSettings(),e?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new e.Setting(a).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(e=>e.setValue(this.plugin.settings.enableCopilot).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=e,yield this.plugin.saveSettings()}))),new e.Setting(a).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(e=>e.setValue(this.plugin.settings.enableAutoComplete).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=e,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Agent Configuration"}),new e.Setting(a).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(e=>e.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=e,yield this.plugin.saveSettings()}))),new e.Setting(a).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(e=>e.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=e,yield this.plugin.saveSettings()}))),new e.Setting(a).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(e=>e.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=e,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Advanced"}),new e.Setting(a).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(e=>e.setValue(this.plugin.settings.debugMode).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.debugMode=e,yield this.plugin.saveSettings()}))),new e.Setting(a).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(e=>e.setValue(this.plugin.settings.showIntentDebug).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=e,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Vault Management"}),function(i,a){i.createEl("h2",{text:"Vault Management"}),i.createEl("p",{text:"Configure AI-powered vault structure analysis and file operations."}),new e.Setting(i).setName("Enable Vault Management").setDesc("Enable AI-powered vault structure analysis and file operations").addToggle(e=>{var i,o;return e.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.enableVaultManagement)||void 0===o||o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.enableVaultManagement=e,yield a.saveSettings(),e?a.initializeVaultManagement():a.disableVaultManagement()}))}),new e.Setting(i).setName("Auto Sync Vault Structure").setDesc("Automatically update vault structure analysis when files change").addToggle(e=>{var i,o;return e.setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.autoSyncVaultStructure)&&void 0!==o&&o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.autoSyncVaultStructure=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Enable Smart Search").setDesc("Use AI-powered search with context and insights").addToggle(e=>{var i,o;return e.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.enableSmartSearch)||void 0===o||o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.enableSmartSearch=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Search Results Limit").setDesc("Maximum number of search results to display").addSlider(e=>{var i,o;return e.setLimits(10,200,10).setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.searchResultsLimit)&&void 0!==o?o:50).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.searchResultsLimit=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Default Search Type").setDesc("Default search mode for smart search").addDropdown(e=>{var i,o;return e.addOption("content","Content Search").addOption("filename","Filename Search").addOption("tags","Tag Search").addOption("links","Link Search").addOption("comprehensive","Comprehensive Search").setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.defaultSearchType)&&void 0!==o?o:"content").onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.defaultSearchType=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Enable File Operations").setDesc("Allow file creation, deletion, and modification through the interface").addToggle(e=>{var i,o;return e.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.enableFileOperations)||void 0===o||o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.enableFileOperations=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Confirm Destructive Operations").setDesc("Show confirmation dialog for file deletion and destructive operations").addToggle(e=>{var i,o;return e.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.confirmDestructiveOperations)||void 0===o||o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.confirmDestructiveOperations=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Auto Backup Before Operations").setDesc("Automatically create backups before destructive file operations").addToggle(e=>{var i,o;return e.setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.autoBackupBeforeOperations)&&void 0!==o&&o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.autoBackupBeforeOperations=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Batch Operation Timeout").setDesc("Timeout for batch operations in milliseconds").addText(e=>{var i,o;return e.setPlaceholder("30000").setValue(String(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.batchOperationTimeout)&&void 0!==o?o:3e4)).onChange(e=>t(this,void 0,void 0,function*(){const t=parseInt(e)||3e4;a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.batchOperationTimeout=t,yield a.saveSettings()}))}),new e.Setting(i).setName("Show Vault Statistics").setDesc("Display vault statistics in modals and interfaces").addToggle(e=>{var i,o;return e.setValue(null===(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.showVaultStats)||void 0===o||o).onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.showVaultStats=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Test Vault Management Connection").setDesc("Test connection to vault management endpoints").addButton(e=>e.setButtonText("Test Connection").setCta().onClick(()=>t(this,void 0,void 0,function*(){if(!a.vaultClient)return e.setButtonText("Not Available"),void setTimeout(()=>e.setButtonText("Test Connection"),2e3);e.setButtonText("Testing..."),e.setDisabled(!0);try{(yield a.vaultClient.testConnection()).success?e.setButtonText("âœ… Connected"):e.setButtonText("âŒ Failed")}catch(t){e.setButtonText("âŒ Error")}e.setDisabled(!1),setTimeout(()=>e.setButtonText("Test Connection"),3e3)}))),i.createEl("h3",{text:"Advanced Vault Management"}),new e.Setting(i).setName("Maximum Search Results").setDesc("Absolute maximum number of search results to fetch from backend").addSlider(e=>{var i,o;return e.setLimits(50,500,25).setValue(null!==(o=null===(i=a.settings.vaultManagement)||void 0===i?void 0:i.maxSearchResults)&&void 0!==o?o:100).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){a.settings.vaultManagement||(a.settings.vaultManagement=Object.assign({},n)),a.settings.vaultManagement.maxSearchResults=e,yield a.saveSettings()}))}),new e.Setting(i).setName("Reset Vault Management Settings").setDesc("Reset all vault management settings to their default values").addButton(e=>e.setButtonText("Reset to Defaults").setWarning().onClick(()=>t(this,void 0,void 0,function*(){a.settings.vaultManagement=Object.assign({},n),yield a.saveSettings();const e=a.app.setting.activeTab;e&&e.display&&e.display()})))}(a,this.plugin),a.createEl("h3",{text:"Model Selection"}),new e.Setting(a).setName("Enable Model Selection").setDesc("Enable intelligent AI model selection based on task type and requirements").addToggle(e=>{var n,a;return e.setValue(null===(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.enabled)||void 0===a||a).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.enabled=e,yield this.plugin.saveSettings(),e?yield this.plugin.initializeModelSelection():yield this.plugin.disconnectModelSelection()}))}),new e.Setting(a).setName("DevPipe Path").setDesc("Path to the DevPipe communication directory").addText(e=>{var n,a;return e.setPlaceholder("../dev-pipe").setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.devpipePath)&&void 0!==a?a:"../dev-pipe").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.devpipePath=e,yield this.plugin.saveSettings()}))}),new e.Setting(a).setName("Priority Mode").setDesc("How to prioritize model selection: performance, cost, or balanced").addDropdown(e=>{var n,a;return e.addOption("performance","Performance - Best quality models").addOption("cost","Cost - Most economical models").addOption("balanced","Balanced - Optimal quality/cost ratio").setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.userPreferences.priority)&&void 0!==a?a:"balanced").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.userPreferences.priority=e,yield this.plugin.saveSettings()}))}),new e.Setting(a).setName("Max Cost Per Request").setDesc("Maximum cost per AI request (in USD)").addSlider(e=>{var n,a;return e.setLimits(.01,2,.01).setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.userPreferences.maxCostPerRequest)&&void 0!==a?a:.5).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.userPreferences.maxCostPerRequest=e,yield this.plugin.saveSettings()}))}),new e.Setting(a).setName("Model Selection Debug").setDesc("Enable debug logging for model selection decisions").addToggle(e=>{var n,a;return e.setValue(null!==(a=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.debugMode)&&void 0!==a&&a).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.debugMode=e,yield this.plugin.saveSettings()}))}),a.createEl("h2",{text:"Help & Documentation"}),a.createEl("h3",{text:"Information"});a.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return t(this,void 0,void 0,function*(){var t;const n=new e.Notice("Testing connection...",0);try{let i=yield this.plugin.apiClient.healthCheck();if(!i.success&&(null===(t=i.error)||void 0===t?void 0:t.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const e=yield this.plugin.apiClient.simpleHealthCheck();e.success&&e.data&&(i={success:!0,data:{status:e.data.status,version:"unknown"}})}n.hide(),i.success?new e.Notice("âœ… Connection successful!",3e3):new e.Notice(`âŒ Connection failed: ${i.error}`,5e3)}catch(t){n.hide(),new e.Notice(`âŒ Connection error: ${t instanceof Error?t.message:"Unknown error"}`,5e3)}})}}const o="vaultpilot-view";class s extends e.ItemView{constructor(e,t){super(e),this.plugin=t}getViewType(){return o}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return t(this,void 0,void 0,function*(){const e=this.containerEl;e.empty(),e.addClass("vaultpilot-view");const t=e.createEl("div",{cls:"vaultpilot-header"});t.createEl("h2",{text:"ðŸ¤– VaultPilot"}),t.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=e.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=e.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=e.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=e.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const e=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),t=e.createEl("div",{cls:"vaultpilot-status-item"});t.createEl("span",{text:"Backend: "});const n=t.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=e.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(e){return t(this,void 0,void 0,function*(){var t;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(t=n.error)||void 0===t?void 0:t.includes("400"))){const e=yield this.plugin.apiClient.simpleHealthCheck();e.success&&e.data&&(n={success:!0,data:{status:e.data.status,version:"unknown"}})}n.success?(e.textContent="ðŸŸ¢ Connected",e.className="vaultpilot-status-indicator vaultpilot-status-connected"):(e.textContent="ðŸ”´ Error",e.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(t){e.textContent="ðŸ”´ Offline",e.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const t=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});t.createEl("button",{text:"ðŸ’¬ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();t.createEl("button",{text:"ðŸ“Š Open Dashboard",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateFullTabView();t.createEl("button",{text:"âš™ï¸ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();t.createEl("button",{text:"ðŸ” Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();t.createEl("button",{text:"âœ¨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const t=this.app.workspace.getActiveViewOfType(e.MarkdownView);t?this.plugin.getCopilotCompletion(t.editor):new e.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"ðŸ”„ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const t=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(t=>t instanceof e.TFolder).length.toString()}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:e.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:e.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return t(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in view...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in view:",e),e.success&&e.data){let t=[];if(Array.isArray(e.data))t=e.data;else if(e.data&&"object"==typeof e.data){const n=e.data;n.agents&&Array.isArray(n.agents)?(t=n.agents,console.log("VaultPilot: Found agents array in view, using response.data.agents")):n.data&&Array.isArray(n.data)?(t=n.data,console.log("VaultPilot: Found nested data in view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof e.data,e.data)}const n=t.length,i=t.filter(e=>e.active).length,a=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});a.createEl("h4",{text:"Available Agents"});a.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${i}/${n} active`})}}catch(e){console.error("Failed to load agents in view:",e)}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const e=document.createElement("style");e.id="vaultpilot-view-styles",e.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(e)}}onClose(){return t(this,void 0,void 0,function*(){})}}const r="vaultpilot-full-tab-view";class l extends e.ItemView{constructor(e,t){super(e),this.plugin=t}getViewType(){return r}getDisplayText(){return"VaultPilot Dashboard"}getIcon(){return"layout-dashboard"}onOpen(){return t(this,void 0,void 0,function*(){const e=this.containerEl;e.empty(),e.addClass("vaultpilot-full-tab-view"),e.style.height="100%",e.style.overflow="hidden";const t=e.createEl("div",{cls:"vaultpilot-main-layout"}),n=t.createEl("div",{cls:"vaultpilot-left-sidebar"});this.createLeftSidebar(n);const i=t.createEl("div",{cls:"vaultpilot-main-content"});this.createMainContent(i);const a=t.createEl("div",{cls:"vaultpilot-right-sidebar"});this.createRightSidebar(a),this.addFullTabStyles()})}createLeftSidebar(e){const t=e.createEl("div",{cls:"vaultpilot-sidebar-header"});t.createEl("h2",{text:"ðŸ¤– VaultPilot"}),t.createEl("p",{text:"AI Assistant Dashboard",cls:"vaultpilot-subtitle"}),this.statusEl=e.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=e.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=e.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats()}createMainContent(e){const t=e.createEl("div",{cls:"vaultpilot-tab-nav"}),n=t.createEl("button",{text:"ðŸ’¬ Chat",cls:"vaultpilot-tab-button active"}),i=t.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-tab-button"}),a=t.createEl("button",{text:"ðŸ“Š Analytics",cls:"vaultpilot-tab-button"}),o=e.createEl("div",{cls:"vaultpilot-tab-content"});this.chatEl=o.createEl("div",{cls:"vaultpilot-chat-section active"}),this.createChatSection(this.chatEl),this.workflowEl=o.createEl("div",{cls:"vaultpilot-workflow-section"}),this.createWorkflowSection(this.workflowEl);const s=o.createEl("div",{cls:"vaultpilot-analytics-section"});this.createAnalyticsSection(s),n.onclick=()=>this.switchTab("chat",n),i.onclick=()=>this.switchTab("workflow",i),a.onclick=()=>this.switchTab("analytics",a)}createRightSidebar(e){const t=e.createEl("div",{cls:"vaultpilot-recent-files"});t.createEl("h3",{text:"Recent Files"}),this.updateRecentFiles(t);const n=e.createEl("div",{cls:"vaultpilot-agent-status"});n.createEl("h3",{text:"Agent Status"}),this.updateAgentStatus(n);const i=e.createEl("div",{cls:"vaultpilot-activity-feed"});i.createEl("h3",{text:"Activity Feed"}),this.createActivityFeed(i)}createChatSection(e){const t=e.createEl("div",{cls:"vaultpilot-chat-content"});t.createEl("div",{cls:"vaultpilot-chat-header"}).createEl("h3",{text:"AI Chat Interface"});const n=t.createEl("div",{cls:"vaultpilot-chat-history"});n.createEl("div",{text:"Welcome! Start a conversation with your AI assistant.",cls:"vaultpilot-chat-welcome"});const i=t.createEl("div",{cls:"vaultpilot-chat-input"}),a=i.createEl("textarea",{placeholder:"Type your message here...",cls:"vaultpilot-chat-textarea"}),o=i.createEl("button",{text:"Send",cls:"vaultpilot-chat-send-button"});o.onclick=()=>{const e=a.value.trim();e&&(this.sendChatMessage(e,n),a.value="")},a.onkeydown=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o.click())}}createWorkflowSection(e){const t=e.createEl("div",{cls:"vaultpilot-workflow-content"});t.createEl("div",{cls:"vaultpilot-workflow-header"}).createEl("h3",{text:"Workflow Management"});const n=t.createEl("div",{cls:"vaultpilot-workflow-grid"});[{name:"Analyze Vault",icon:"ðŸ”",description:"Analyze your vault structure and content"},{name:"Generate Summary",icon:"ðŸ“",description:"Create summaries of your notes"},{name:"Link Analysis",icon:"ðŸ”—",description:"Analyze note connections and relationships"},{name:"Tag Management",icon:"ðŸ·ï¸",description:"Organize and manage your tags"},{name:"Daily Planning",icon:"ðŸ“…",description:"Plan your day based on your notes"},{name:"Knowledge Graph",icon:"ðŸ•¸ï¸",description:"Visualize your knowledge connections"},{name:"Content Search",icon:"ðŸ”Ž",description:"Advanced search across your vault"},{name:"Note Templates",icon:"ðŸ“„",description:"Create and manage note templates"},{name:"Link Assistant",icon:"ðŸ”—",description:"Intelligent link suggestions and management"}].forEach(e=>{const t=n.createEl("div",{cls:"vaultpilot-workflow-card"});t.createEl("div",{text:e.icon,cls:"vaultpilot-workflow-icon"}),t.createEl("h4",{text:e.name}),t.createEl("p",{text:e.description});t.createEl("button",{text:"Run",cls:"vaultpilot-workflow-run-button"}).onclick=()=>this.runWorkflow(e.name)})}createAnalyticsSection(e){const t=e.createEl("div",{cls:"vaultpilot-analytics-content"});t.createEl("div",{cls:"vaultpilot-analytics-header"}).createEl("h3",{text:"Vault Analytics"});const n=t.createEl("div",{cls:"vaultpilot-charts-container"}),i=n.createEl("div",{cls:"vaultpilot-chart-card"});i.createEl("h4",{text:"File Type Distribution"}),i.createEl("div",{text:"Chart visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const a=n.createEl("div",{cls:"vaultpilot-chart-card"});a.createEl("h4",{text:"Note Creation Timeline"}),a.createEl("div",{text:"Timeline visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const o=n.createEl("div",{cls:"vaultpilot-chart-card"});o.createEl("h4",{text:"Tag Usage"}),o.createEl("div",{text:"Tag analytics coming soon...",cls:"vaultpilot-chart-placeholder"});const s=n.createEl("div",{cls:"vaultpilot-chart-card"});s.createEl("h4",{text:"Word Count Analysis"}),s.createEl("div",{text:"Word count visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const r=n.createEl("div",{cls:"vaultpilot-chart-card"});r.createEl("h4",{text:"Link Density"}),r.createEl("div",{text:"Link analysis coming soon...",cls:"vaultpilot-chart-placeholder"});const l=n.createEl("div",{cls:"vaultpilot-chart-card"});l.createEl("h4",{text:"Activity Heatmap"}),l.createEl("div",{text:"Activity heatmap coming soon...",cls:"vaultpilot-chart-placeholder"})}switchTab(e,t){var n;this.containerEl.querySelectorAll(".vaultpilot-tab-button").forEach(e=>{e.removeClass("active")}),this.containerEl.querySelectorAll(".vaultpilot-chat-section, .vaultpilot-workflow-section, .vaultpilot-analytics-section").forEach(e=>{e.removeClass("active")}),t.addClass("active"),"chat"===e?this.chatEl.addClass("active"):"workflow"===e?this.workflowEl.addClass("active"):"analytics"===e&&(null===(n=this.containerEl.querySelector(".vaultpilot-analytics-section"))||void 0===n||n.addClass("active"))}sendChatMessage(e,n){return t(this,void 0,void 0,function*(){n.createEl("div",{cls:"vaultpilot-chat-message user"}).createEl("div",{text:e});const t=n.createEl("div",{cls:"vaultpilot-chat-message assistant thinking"});t.createEl("div",{text:"Thinking..."}),n.scrollTop=n.scrollHeight;try{const i=yield this.plugin.apiClient.sendChat({message:e,context:null});if(t.remove(),i.success&&i.data){n.createEl("div",{cls:"vaultpilot-chat-message assistant"}).createEl("div",{text:i.data.response})}else{n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Could not get response from AI"})}}catch(e){t.remove();n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Connection failed"})}n.scrollTop=n.scrollHeight})}runWorkflow(n){return t(this,void 0,void 0,function*(){var t,i;new e.Notice(`Running workflow: ${n}`);try{switch(n){case"Analyze Vault":yield this.runAnalyzeVaultWorkflow();break;case"Daily Planning":yield this.plugin.planMyDay();break;case"Generate Summary":yield this.runSummaryWorkflow();break;case"Link Analysis":yield this.runLinkAnalysisWorkflow();break;case"Content Search":yield this.runContentSearchWorkflow();break;default:yield this.runGenericWorkflow(n)}}catch(a){console.error(`Error running workflow: ${n}:`,a),(null===(t=a.message)||void 0===t?void 0:t.includes("Not Found"))||(null===(i=a.message)||void 0===i?void 0:i.includes("404"))?new e.Notice(`${n} workflow requires server-side implementation. Please check server configuration.`):new e.Notice(`Error running workflow: ${n} - ${a.message}`)}})}runAnalyzeVaultWorkflow(){return t(this,void 0,void 0,function*(){var t;if(this.plugin.vaultClient)try{const t=yield this.plugin.vaultClient.getVaultStructure({include_content:!1,max_depth:3});new e.Notice(`Vault analysis complete! Found ${t.total_files} files in ${t.total_folders} folders.`)}catch(e){if(!(null===(t=e.message)||void 0===t?void 0:t.includes("Not Found")))throw e;yield this.runLocalVaultAnalysis()}else yield this.runLocalVaultAnalysis()})}runLocalVaultAnalysis(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getFiles(),n=this.app.vault.getMarkdownFiles(),i=this.app.vault.getAllLoadedFiles().filter(t=>t instanceof e.TFolder).length;new e.Notice(`Local vault analysis: ${n.length} markdown files, ${t.length} total files, ${i} folders.`)})}runSummaryWorkflow(){return t(this,void 0,void 0,function*(){try{const t=this.app.workspace.getActiveFile();if(!t)return void new e.Notice("Please open a file to summarize");const n=yield this.app.vault.read(t),i=yield this.plugin.apiClient.runWorkflow({message:"Please create a comprehensive summary of this content",context:n});if(!i.success||!i.data)throw new Error(i.error||"Summary generation failed");new e.Notice("Summary generated successfully!")}catch(e){throw new Error(`Summary workflow failed: ${e.message}`)}})}runLinkAnalysisWorkflow(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getMarkdownFiles();let n=0,i=new Set;for(const e of t){const t=(yield this.app.vault.read(e)).match(/\[\[([^\]]+)\]\]/g);t&&(n+=t.length,t.forEach(e=>{const t=e.slice(2,-2);i.add(t)}))}const a=t.length-i.size;new e.Notice(`Link analysis: ${n} total links, ${i.size} linked files, ${a} orphaned files.`)})}runContentSearchWorkflow(){return t(this,void 0,void 0,function*(){this.plugin.vaultClient&&this.plugin.openSmartSearchModal?this.plugin.openSmartSearchModal("","comprehensive"):new e.Notice("Content search requires vault management features. Please enable in settings.")})}runGenericWorkflow(n){return t(this,void 0,void 0,function*(){var t,i;try{const t=yield this.plugin.apiClient.runWorkflow({message:`Execute workflow: ${n}`,context:null});if(!t.success||!t.data)throw new Error(t.error||"Workflow execution failed");new e.Notice(`${n} completed successfully!`)}catch(a){if(!(null===(t=a.message)||void 0===t?void 0:t.includes("Not Found"))&&!(null===(i=a.message)||void 0===i?void 0:i.includes("404")))throw a;new e.Notice(`${n} workflow is not yet implemented on the server. Coming soon!`)}})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const e=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),t=e.createEl("div",{cls:"vaultpilot-status-item"});t.createEl("span",{text:"Backend: "});const n=t.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=e.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(e){return t(this,void 0,void 0,function*(){var t;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(t=n.error)||void 0===t?void 0:t.includes("400"))){const e=yield this.plugin.apiClient.simpleHealthCheck();e.success&&e.data&&(n={success:!0,data:{status:e.data.status,version:"unknown"}})}n.success?(e.textContent="ðŸŸ¢ Connected",e.className="vaultpilot-status-indicator vaultpilot-status-connected"):(e.textContent="ðŸ”´ Error",e.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(t){e.textContent="ðŸ”´ Offline",e.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"ðŸ”„ Refresh",cls:"vaultpilot-action-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()};e.createEl("button",{text:"ðŸ“‹ Sidebar View",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateView();e.createEl("button",{text:"ðŸ’¬ Modal Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal()}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const t=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(t=>t instanceof e.TFolder).length.toString()}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:e.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:e.label,cls:"vaultpilot-stat-label"})})}updateRecentFiles(e){this.app.vault.getMarkdownFiles().sort((e,t)=>t.stat.mtime-e.stat.mtime).slice(0,5).forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-recent-file"});n.createEl("span",{text:t.basename}),n.onclick=()=>{this.app.workspace.openLinkText(t.path,"",!1)}})}updateAgentStatus(e){this.loadAgentInfo(e)}loadAgentInfo(e){return t(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in full-tab-view...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in full-tab-view:",t),t.success&&t.data&&e){let n=[];if(Array.isArray(t.data))n=t.data;else if(t.data&&"object"==typeof t.data){const e=t.data;e.agents&&Array.isArray(e.agents)?(n=e.agents,console.log("VaultPilot: Found agents array in full-tab-view, using response.data.agents")):e.data&&Array.isArray(e.data)?(n=e.data,console.log("VaultPilot: Found nested data in full-tab-view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof t.data,t.data)}const i=n.length,a=n.filter(e=>e.active).length,o=e.createEl("div",{cls:"vaultpilot-agent-info"});o.createEl("div",{text:`${a}/${i} active`}),n.forEach(e=>{const t=o.createEl("div",{cls:"vaultpilot-agent-item"});t.createEl("span",{text:e.name}),t.createEl("span",{text:e.active?"ðŸŸ¢":"ðŸ”´",cls:"vaultpilot-agent-status"})})}}catch(e){console.error("Failed to load agents in full tab view:",e)}})}createActivityFeed(e){[{time:"Just now",activity:"VaultPilot started"},{time:"5 min ago",activity:"Connection established"},{time:"1 hour ago",activity:"Last vault analysis"}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-activity-item"});n.createEl("div",{text:t.activity}),n.createEl("div",{text:t.time,cls:"vaultpilot-activity-time"})})}addFullTabStyles(){if(!document.getElementById("vaultpilot-full-tab-styles")){const e=document.createElement("style");e.id="vaultpilot-full-tab-styles",e.textContent='\n        /* Ensure the full tab view fills available space */\n        .workspace-leaf-content[data-type="vaultpilot-full-tab-view"] {\n          height: 100%;\n        }\n        .vaultpilot-full-tab-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-main-layout {\n          display: flex;\n          flex: 1;\n          gap: 1px;\n          background: var(--background-modifier-border);\n          min-height: 0;\n        }\n        .vaultpilot-left-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-main-content {\n          flex: 1;\n          background: var(--background-primary);\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n        }\n        .vaultpilot-right-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-sidebar-header {\n          text-align: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-nav {\n          display: flex;\n          background: var(--background-secondary);\n          border-bottom: 1px solid var(--background-modifier-border);\n          flex-shrink: 0;\n        }\n        .vaultpilot-tab-button {\n          flex: 1;\n          padding: 12px 16px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .vaultpilot-tab-button:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-tab-button.active {\n          background: var(--background-primary);\n          color: var(--text-normal);\n          border-bottom: 2px solid var(--interactive-accent);\n        }\n        .vaultpilot-tab-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n          height: 100%;\n        }\n        /* Sections just flex-grow and hold their children */\n        .vaultpilot-chat-section,\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          display: none;           /* hidden by default */\n          flex: 1 1 0;             /* flex-grow, flex-shrink, base 0 */\n          flex-direction: column;\n          min-height: 0;           /* allow children to shrink/scroll */\n        }\n\n        /* Active section shows and flexes */\n        .vaultpilot-chat-section.active,\n        .vaultpilot-workflow-section.active,\n        .vaultpilot-analytics-section.active {\n          display: flex;           /* show & flex when active */\n        }\n\n        /* Content panels handle the scrolling */\n        .vaultpilot-chat-content,\n        .vaultpilot-workflow-content,\n        .vaultpilot-analytics-content {\n          flex: 1 1 0;             /* fill remaining space */\n          min-height: 0;           /* critical to allow overflow */\n          overflow-y: auto;        /* now *this* container scrolls */\n          padding: 16px;\n        }\n\n        /* keep special chat gaps */\n        .vaultpilot-chat-content {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        .vaultpilot-chat-history {\n          flex: 1;\n          overflow-y: auto;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          background: var(--background-secondary);\n          min-height: 0;\n        }\n        .vaultpilot-chat-input {\n          display: flex;\n          gap: 8px;\n        }\n        .vaultpilot-chat-textarea {\n          flex: 1;\n          min-height: 60px;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-chat-send-button {\n          padding: 8px 16px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          height: fit-content;\n          align-self: flex-end;\n        }\n        .vaultpilot-chat-message {\n          margin-bottom: 12px;\n          padding: 8px 12px;\n          border-radius: 8px;\n          max-width: 80%;\n        }\n        .vaultpilot-chat-message.user {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          margin-left: auto;\n        }\n        .vaultpilot-chat-message.assistant {\n          background: var(--background-primary);\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-message.thinking {\n          opacity: 0.7;\n          font-style: italic;\n        }\n        .vaultpilot-chat-message.error {\n          background: var(--background-modifier-error);\n          color: var(--text-error);\n        }\n        .vaultpilot-chat-header,\n        .vaultpilot-workflow-header,\n        .vaultpilot-analytics-header {\n          margin-bottom: 16px;\n          padding-bottom: 8px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-header h3,\n        .vaultpilot-workflow-header h3,\n        .vaultpilot-analytics-header h3 {\n          margin: 0;\n          color: var(--text-normal);\n        }\n        .vaultpilot-workflow-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-workflow-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          text-align: center;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-workflow-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-workflow-icon {\n          font-size: 32px;\n          margin-bottom: 8px;\n        }\n        .vaultpilot-workflow-run-button {\n          margin-top: 8px;\n          padding: 6px 12px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .vaultpilot-charts-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-chart-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-chart-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-chart-placeholder {\n          text-align: center;\n          color: var(--text-muted);\n          font-style: italic;\n          padding: 20px;\n        }\n        .vaultpilot-recent-file {\n          padding: 4px 8px;\n          margin-bottom: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-recent-file:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-agent-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px 0;\n        }\n        .vaultpilot-activity-item {\n          margin-bottom: 8px;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-activity-time {\n          font-size: 11px;\n          color: var(--text-muted);\n          margin-top: 2px;\n        }\n        /* Inherit styles from original view */\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3 {\n          margin-bottom: 12px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 4px;\n          font-size: 14px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n          font-size: 11px;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-action-button {\n          padding: 8px 6px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 11px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 8px;\n          background: var(--background-secondary);\n          border-radius: 4px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 2px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 10px;\n          color: var(--text-muted);\n        }\n      ',document.head.appendChild(e)}}onClose(){return t(this,void 0,void 0,function*(){})}}let c;function d(){return t(this,void 0,void 0,function*(){const e=c.workspace.getActiveFile();if(!e)return null;return(yield c.vault.read(e)).slice(0,8e3)})}class u{constructor(e,t){this.contextCache=new Map,this.cacheTimeout=3e4,this.app=e,this.plugin=t}getFullContext(){return t(this,void 0,void 0,function*(){const e="full_context",t=this.getCachedResult(e);if(t)return t;const n={workspace:yield this.getWorkspaceContext(),activeFile:yield this.getActiveFileContext(),selection:yield this.getSelectionContext(),project:yield this.getProjectContext(),git:yield this.getGitContext(),timestamp:Date.now()};return this.setCachedResult(e,n),n})}getWorkspaceContext(){return t(this,void 0,void 0,function*(){var e,t;const n="workspace_context",i=this.getCachedResult(n);if(i)return i;const a=this.app.vault,o=a.getMarkdownFiles(),s=this.getRecentFiles(10),r={};o.forEach(e=>{const t=e.extension||"md";r[t]=(r[t]||0)+1});const l=this.extractAllTags(),c=this.buildFolderStructure(),d={totalFiles:o.length,recentFiles:s,tags:l,folders:c,fileTypes:r,vaultPath:a.adapter.basePath||(null===(t=(e=a.adapter).getName)||void 0===t?void 0:t.call(e))||""};return this.setCachedResult(n,d,6e4),d})}getActiveFileContext(){return t(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveFile();if(!e)return null;const t=`file_context_${e.path}_${e.stat.mtime}`,n=this.getCachedResult(t);if(n)return n;const i=yield this.app.vault.read(e),a=this.app.metadataCache.getFileCache(e),o={path:e.path,name:e.name,content:i,language:this.detectLanguage(e.extension),extension:e.extension,size:e.stat.size,lastModified:e.stat.mtime,metadata:{frontmatter:(null==a?void 0:a.frontmatter)||{},tags:this.extractTags(a),links:this.extractLinks(a),backlinks:this.getBacklinks(e),headings:this.extractHeadings(a),wordCount:i.split(/\s+/).length},symbols:yield this.extractCodeSymbols(i,e.extension),dependencies:yield this.extractDependencies(i,e.extension)};return this.setCachedResult(t,o),o})}getSelectionContext(){return t(this,void 0,void 0,function*(){const e=this.app.workspace.activeLeaf;if(!(null==e?void 0:e.view))return null;const t=e.view;if(!t.editor)return null;const n=t.editor,i=n.getSelection();if(!i)return null;const a=n.listSelections()[0],o=a.anchor,s=a.head,r=o.line<s.line||o.line===s.line&&o.ch<s.ch?o:s,l=o.line>s.line||o.line===s.line&&o.ch>s.ch?o:s,c=n.getLine(r.line),d=Math.max(0,r.line-5),u=Math.min(n.lineCount()-1,l.line+5),h=[];for(let e=d;e<=u;e++)h.push(n.getLine(e));return{text:i,startLine:r.line,endLine:l.line,startCol:r.ch,endCol:l.ch,surroundingContext:h.join("\n"),lineContext:c}})}getProjectContext(){return t(this,void 0,void 0,function*(){const e="project_context",t=this.getCachedResult(e);if(t)return t;const n={type:yield this.detectProjectType(),structure:yield this.analyzeProjectStructure(),dependencies:yield this.analyzeDependencies(),buildSystem:yield this.detectBuildSystem(),testFramework:yield this.detectTestFramework(),documentation:yield this.findDocumentation()};return this.setCachedResult(e,n,12e4),n})}getGitContext(){return t(this,void 0,void 0,function*(){return this.app.vault.getAbstractFileByPath(".git")?{isRepository:!0,currentBranch:"main",uncommittedChanges:0,lastCommit:null,remoteUrl:void 0}:null})}getCachedResult(e){const t=this.contextCache.get(e);return t?Date.now()-t.timestamp>t.timeout?(this.contextCache.delete(e),null):t.data:null}setCachedResult(e,t,n=this.cacheTimeout){this.contextCache.set(e,{data:t,timestamp:Date.now(),timeout:n})}getRecentFiles(e){var t,n;const i=[],a=this.app.workspace;a.iterateAllLeaves(e=>{if(e.view&&"file"in e.view&&e.view.file){const t=e.view.file.path;i.includes(t)||i.push(t)}});try{((null===(n=(t=a).getLastOpenFiles)||void 0===n?void 0:n.call(t))||[]).forEach(e=>{i.includes(e)||i.push(e)})}catch(e){}return i.slice(0,e)}extractAllTags(){const e=new Set,t=this.app.metadataCache;return this.app.vault.getMarkdownFiles().forEach(n=>{var i;const a=t.getFileCache(n);if((null==a?void 0:a.tags)&&a.tags.forEach(t=>e.add(t.tag)),null===(i=null==a?void 0:a.frontmatter)||void 0===i?void 0:i.tags){(Array.isArray(a.frontmatter.tags)?a.frontmatter.tags:[a.frontmatter.tags]).forEach(t=>e.add(t))}}),Array.from(e)}buildFolderStructure(){const e=[],t=this.app.vault,n=new Map;return t.getAllLoadedFiles().forEach(e=>{const t=e.path.split("/");if(t.length>1)for(let e=1;e<t.length;e++){const i=t.slice(0,e).join("/");t[e-1],n.has(i)||n.set(i,{fileCount:0,subfolders:new Set});const a=n.get(i);e===t.length-1&&a.fileCount++,e<t.length-1&&a.subfolders.add(t[e])}}),n.forEach((t,n)=>{const i=n.split("/").pop()||n;e.push({name:i,path:n,fileCount:t.fileCount,subfolders:Array.from(t.subfolders)})}),e.sort((e,t)=>e.path.localeCompare(t.path))}detectLanguage(e){return{ts:"typescript",js:"javascript",tsx:"typescript-react",jsx:"javascript-react",py:"python",java:"java",cpp:"cpp",c:"c",cs:"csharp",php:"php",rb:"ruby",go:"go",rs:"rust",kt:"kotlin",swift:"swift",md:"markdown",json:"json",yaml:"yaml",yml:"yaml",xml:"xml",html:"html",css:"css",scss:"scss",less:"less"}[e]||"text"}extractTags(e){return(null==e?void 0:e.tags)?e.tags.map(e=>e.tag||e):[]}extractLinks(e){return(null==e?void 0:e.links)?e.links.map(e=>e.link):[]}getBacklinks(e){const t=[],n=this.app.metadataCache;return this.app.vault.getMarkdownFiles().forEach(i=>{if(i.path===e.path)return;const a=n.getFileCache(i);(null==a?void 0:a.links)&&a.links.forEach(n=>{n.link!==e.basename&&n.link!==e.path||t.push(i.path)})}),t}extractHeadings(e){return(null==e?void 0:e.headings)?e.headings.map(e=>{var t,n;return{level:e.level,text:e.heading,line:(null===(n=null===(t=e.position)||void 0===t?void 0:t.start)||void 0===n?void 0:n.line)||0}}):[]}extractCodeSymbols(e,n){return t(this,void 0,void 0,function*(){const t=[],i=e.split("\n");return"ts"!==n&&"js"!==n||i.forEach((e,n)=>{const i=e.match(/(function|const|let|var)\s+(\w+)/);i&&t.push({name:i[2],type:"function",line:n+1,scope:"global",signature:e.trim()});const a=e.match(/class\s+(\w+)/);a&&t.push({name:a[1],type:"class",line:n+1,scope:"global",signature:e.trim()})}),t})}extractDependencies(e,n){return t(this,void 0,void 0,function*(){const t=[];return e.split("\n").forEach(e=>{const n=e.match(/import.*from\s+['"]([^'"]+)['"]/);n&&t.push(n[1]);const i=e.match(/require\(['"]([^'"]+)['"]\)/);i&&t.push(i[1]);const a=e.match(/(?:from\s+(\w+)|import\s+(\w+))/);a&&t.push(a[1]||a[2])}),t})}detectProjectType(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getAllLoadedFiles(),n=t.some(e=>"package.json"===e.name),i=t.some(e=>"manifest.json"===e.name),a=t.some(e=>"tsconfig.json"===e.name),o=t.some(e=>"pyproject.toml"===e.name||"setup.py"===e.name);if(i&&n)return"obsidian-plugin";if(n&&a)return"typescript-library";if(n)return"javascript-library";if(o)return"python-package";if(t.some(t=>t instanceof e.TFile&&(t.name.includes(".jsx")||t.name.includes(".tsx"))))return"react-app";return t.some(t=>t instanceof e.TFile&&"md"===t.extension)?"documentation":"unknown"})}analyzeProjectStructure(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getAllLoadedFiles(),n=[],i=[],a=[],o=[],s=[];return t.forEach(t=>{1===t.path.split("/").length&&n.push(t.name),t.path.includes("/src/")&&i.push(t.path),(t.path.includes("/test/")||t.path.includes("/__tests__/"))&&a.push(t.path),(t.name.includes("config")||t.name.includes(".json")||t.name.includes(".yml"))&&o.push(t.path),t instanceof e.TFile&&("md"===t.extension||t.name.toLowerCase().includes("readme"))&&s.push(t.path)}),{rootFiles:n,sourceDirectories:i,testDirectories:a,configFiles:o,documentationFiles:s,depth:Math.max(...t.map(e=>e.path.split("/").length)),estimatedSize:t.length<50?"small":t.length<200?"medium":"large"}})}analyzeDependencies(){return t(this,void 0,void 0,function*(){const t=[],n=this.app.vault;try{const i=n.getAbstractFileByPath("package.json");if(i instanceof e.TFile){const e=yield n.read(i),a=JSON.parse(e);Object.entries(a.dependencies||{}).forEach(([e,n])=>{t.push({name:e,version:n,type:"runtime",source:"package.json"})}),Object.entries(a.devDependencies||{}).forEach(([e,n])=>{t.push({name:e,version:n,type:"dev",source:"package.json"})}),Object.entries(a.peerDependencies||{}).forEach(([e,n])=>{t.push({name:e,version:n,type:"peer",source:"package.json"})})}}catch(e){}return t})}detectBuildSystem(){return t(this,void 0,void 0,function*(){const t=this.app.vault,n=t.getAbstractFileByPath("package.json");if(n instanceof e.TFile)try{const e=yield t.read(n),i=JSON.parse(e);return{type:"npm",configFile:"package.json",scripts:Object.keys(i.scripts||{})}}catch(e){}return t.getAbstractFileByPath("pom.xml")?{type:"maven",configFile:"pom.xml",scripts:["compile","test","package"]}:t.getAbstractFileByPath("build.gradle")?{type:"gradle",configFile:"build.gradle",scripts:["build","test","clean"]}:t.getAbstractFileByPath("CMakeLists.txt")?{type:"cmake",configFile:"CMakeLists.txt",scripts:["build","install"]}:t.getAbstractFileByPath("Makefile")?{type:"make",configFile:"Makefile",scripts:["all","clean","install"]}:null})}detectTestFramework(){return t(this,void 0,void 0,function*(){const t=this.app.vault,n=t.getAllLoadedFiles();if(t.getAbstractFileByPath("jest.config.js")||t.getAbstractFileByPath("jest.config.json"))return{type:"jest",configFile:t.getAbstractFileByPath("jest.config.js")?"jest.config.js":"jest.config.json",testPatterns:["**/__tests__/**/*.test.js","**/*.test.js","**/*.spec.js"]};const i=t.getAbstractFileByPath("package.json");if(i instanceof e.TFile)try{const e=yield t.read(i),n=JSON.parse(e),a=Object.assign(Object.assign({},n.dependencies),n.devDependencies);if(a.jest)return{type:"jest",testPatterns:["**/__tests__/**/*.test.js","**/*.test.js","**/*.spec.js"]};if(a.mocha)return{type:"mocha",testPatterns:["test/**/*.js","test/**/*.spec.js"]};if(a.pytest)return{type:"pytest",testPatterns:["test_*.py","*_test.py","tests/**/*.py"]}}catch(e){}if(n.some(t=>t instanceof e.TFile&&(t.name.startsWith("test_")||t.name.endsWith("_test.py"))))return{type:"pytest",testPatterns:["test_*.py","*_test.py","tests/**/*.py"]};return n.some(t=>t instanceof e.TFile&&t.name.includes("Test.java"))?{type:"junit",testPatterns:["**/*Test.java","**/Test*.java"]}:null})}findDocumentation(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getAllLoadedFiles(),n=[];return t.forEach(t=>{t instanceof e.TFile&&(t.name.toLowerCase().includes("readme")&&n.push({type:"readme",path:t.path,lastUpdated:t.stat.mtime}),t.name.toLowerCase().includes("changelog")&&n.push({type:"changelog",path:t.path,lastUpdated:t.stat.mtime}),t.name.toLowerCase().includes("license")&&n.push({type:"license",path:t.path,lastUpdated:t.stat.mtime}))}),n})}clearCache(){this.contextCache.clear()}getContextSummary(){return t(this,void 0,void 0,function*(){const e=yield this.getFullContext();let t="## Development Context\n\n";return t+=`**Workspace**: ${e.workspace.totalFiles} files, ${e.workspace.folders.length} folders\n`,e.activeFile&&(t+=`**Active File**: ${e.activeFile.name} (${e.activeFile.language})\n`,t+=`**File Size**: ${Math.round(e.activeFile.size/1024)}KB, ${e.activeFile.metadata.wordCount} words\n`,e.activeFile.symbols.length>0&&(t+=`**Code Symbols**: ${e.activeFile.symbols.length} found\n`)),t+=`**Project Type**: ${e.project.type}\n`,t+=`**Project Size**: ${e.project.structure.estimatedSize}\n`,e.selection&&(t+=`**Current Selection**: "${e.selection.text.substring(0,50)}${e.selection.text.length>50?"...":""}"\n`),t})}}class h extends e.Modal{constructor(e,t){super(e),this.currentConversationId=null,this.messages=[],this.plugin=t,this.contextService=new u(e,t)}onOpen(){const{contentEl:e}=this;e.empty(),e.addClass("vaultpilot-chat-modal");const t=e.createEl("div",{cls:"vaultpilot-chat-header"});t.createEl("h2",{text:"ðŸ¤– VaultPilot Chat"});const n=t.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"âš¡ Automatic mode detection enabled"}),n.createEl("div",{cls:"vaultpilot-context-info",text:"ðŸ§  Smart context enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const i=n.createEl("select",{cls:"vaultpilot-agent-select"});i.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(i),this.chatContainer=e.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(e){return t(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response:",t),t.success&&t.data){console.log("VaultPilot: response.data type:",typeof t.data),console.log("VaultPilot: response.data content:",t.data);let n=[];if(Array.isArray(t.data))n=t.data;else if(t.data&&"object"==typeof t.data){const e=t.data;e.agents&&Array.isArray(e.agents)?n=e.agents:e.data&&Array.isArray(e.data)&&(n=e.data)}if(n.length>0)console.log("VaultPilot: Found",n.length,"agents"),n.forEach(t=>{e.createEl("option",{text:t.name,value:t.id})});else{console.log("VaultPilot: No agents found in response");e.createEl("option",{text:"No agents available",value:""}).disabled=!0}}else console.error("Failed to load agents: API returned error or no data:",t)}catch(e){console.error("Failed to load agents:",e)}})}loadConversationHistory(){return t(this,void 0,void 0,function*(){if(this.currentConversationId)try{const e=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);e.success&&e.data&&(this.messages=e.data.messages,this.renderMessages())}catch(e){console.error("Failed to load conversation history:",e)}})}sendMessage(){return t(this,void 0,void 0,function*(){const t=this.inputEl.value.trim();if(t){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",t),this.inputEl.value="";try{const[n,i,a]=yield Promise.all([d(),this.plugin.apiClient.classifyIntent(t),this.contextService.getFullContext()]),o=yield this.contextService.getContextSummary();let s="";n&&(s+=`## Active File Content\n${n}\n\n`),s+=o;const r={message:t,context:s,development_context:a};let l;if(this.plugin.settings.showIntentDebug&&this.showIntentDebug(i.intent),"agent"===i.intent?(l=yield this.plugin.apiClient.runWorkflow(r),l.success&&l.data?this.addMessage("assistant",`âš™ï¸ Agent Mode (auto-detected)\n\n${l.data.result}`):this.addMessage("assistant",`Error in agent mode: ${l.error||"Failed to get response"}`),l.success||new e.Notice(`Chat error: ${l.error}`)):yield this.handleStreamingResponse(r),s.length>0){let t=`ðŸ“Š Context included: ${a.project.type} project, ${a.workspace.totalFiles} files`;a.activeFile&&(t+=`, active file: ${a.activeFile.name}`),new e.Notice(t,3e3)}else new e.Notice("âš ï¸ No vault content was sent; replies may be generic.")}catch(t){const n=t instanceof Error?t.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new e.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}handleStreamingResponse(n){return t(this,void 0,void 0,function*(){try{const e=this.addStreamingMessage("assistant"),t=yield this.plugin.apiClient.streamChat({message:n.message,context:n.context,conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent(),development_context:n.development_context});yield this.processStreamingResponse(t,e)}catch(t){const n=t instanceof Error?t.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new e.Notice(`Streaming error: ${n}`)}})}addStreamingMessage(e){const t=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${e} vaultpilot-message-streaming`});t.createEl("div",{cls:"vaultpilot-message-role",text:"user"===e?"You":"VaultPilot"});return t.createEl("div",{cls:"vaultpilot-message-content"}).createEl("div",{cls:"vaultpilot-typing-indicator",text:"typing..."}),t.createEl("div",{cls:"vaultpilot-message-time",text:(new Date).toLocaleTimeString()}),this.scrollToBottom(),t}processStreamingResponse(e,n){return t(this,void 0,void 0,function*(){const t=e.getReader(),i=new TextDecoder,a=n.querySelector(".vaultpilot-message-content"),o=a.querySelector(".vaultpilot-typing-indicator");o&&o.remove();let s="";try{for(;;){const{done:e,value:o}=yield t.read();if(e)break;const r=i.decode(o,{stream:!0}).split("\n");for(const e of r)if(e.startsWith("data: "))try{const t=JSON.parse(e.substring(6));if("chunk"===t.type&&t.content)s+=t.content,a.innerHTML=this.renderMarkdown(s),this.scrollToBottom();else{if("complete"===t.type){t.conversation_id&&(this.currentConversationId=t.conversation_id),n.removeClass("vaultpilot-message-streaming");break}if("error"===t.type){s+=`\n\nError: ${t.error}`,a.innerHTML=this.renderMarkdown(s),n.removeClass("vaultpilot-message-streaming");break}}}catch(e){console.warn("Failed to parse streaming chunk:",e)}}const e={role:"assistant",content:s,timestamp:(new Date).toISOString()};this.messages.push(e)}catch(e){console.error("Streaming error:",e),a.innerHTML=this.renderMarkdown(`Error during streaming: ${e instanceof Error?e.message:"Unknown error"}`)}finally{t.releaseLock(),n.removeClass("vaultpilot-message-streaming")}})}getSelectedAgent(){const e=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==e?void 0:e.value)||void 0}addMessage(e,t){const n={role:e,content:t,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(e=>this.renderMessage(e)),this.scrollToBottom()}renderMessage(e){const t=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${e.role}`});t.createEl("div",{cls:"vaultpilot-message-role",text:"user"===e.role?"You":"VaultPilot"});t.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(e.content),e.timestamp&&t.createEl("div",{cls:"vaultpilot-message-time",text:new Date(e.timestamp).toLocaleTimeString()})}renderMarkdown(e){return e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new e.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const e=document.createElement("style");e.id="vaultpilot-chat-styles",e.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-message-streaming {\n          border-left: 3px solid var(--color-accent);\n          animation: pulse 2s infinite;\n        }\n        .vaultpilot-typing-indicator {\n          color: var(--text-muted);\n          font-style: italic;\n          animation: pulse 1.5s infinite;\n        }\n        @keyframes pulse {\n          0% { opacity: 1; }\n          50% { opacity: 0.5; }\n          100% { opacity: 1; }\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(e)}}showIntentDebug(e){const t=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"ðŸ” Intent detected: "+("agent"===e?"âš™ï¸ Agent Mode":"ðŸ’¬ Ask Mode")});setTimeout(()=>{t.remove()},3e3)}showContextDetails(){return t(this,void 0,void 0,function*(){try{const t=yield this.contextService.getFullContext(),n=yield this.contextService.getContextSummary(),i=new e.Modal(this.app);i.titleEl.setText("Development Context Details");const{contentEl:a}=i;a.empty(),a.addClass("vaultpilot-context-details");a.createEl("div",{cls:"context-summary"}).createEl("pre",{text:n});const o=a.createEl("details");o.createEl("summary",{text:"Full Context Data (JSON)"});o.createEl("pre",{cls:"context-json"}).textContent=JSON.stringify(t,null,2),i.open()}catch(t){const n=t instanceof Error?t.message:"Unknown error";new e.Notice(`Error loading context: ${n}`)}})}onClose(){const{contentEl:e}=this;e.empty()}}class p extends e.Modal{constructor(e,t){super(e),this.isExecuting=!1,this.plugin=t}onOpen(){const{contentEl:e}=this;e.empty(),e.addClass("vaultpilot-workflow-modal");const t=e.createEl("div",{cls:"vaultpilot-workflow-header"});t.createEl("h2",{text:"âš™ï¸ Workflow Execution"}),t.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=e.createEl("div",{cls:"vaultpilot-workflow-form"}),i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=i.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=a.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),r=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const l=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=l.createEl("input",{type:"checkbox"});l.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(r.checked,c.checked),this.progressContainer=e.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=e.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,i){return t(this,void 0,void 0,function*(){const t=this.goalInput.value.trim();if(t){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let e="";if(n){const t=this.app.workspace.getActiveFile();if(t){const n=yield this.app.vault.read(t);e+=`=== ${t.name} ===\n${n}\n\n`}}if(i){const t=this.app.vault.getMarkdownFiles();for(const n of t.slice(0,20)){const t=yield this.app.vault.read(n);e+=`=== ${n.name} ===\n${t}\n\n`}}const a={goal:t,context:this.contextInput.value.trim()||void 0,vault_content:e||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const o=yield this.plugin.apiClient.executeWorkflow(a);if(!o.success||!o.data)throw new Error(o.error||"Workflow execution failed");yield this.displayResults(o.data)}catch(t){const n=t instanceof Error?t.message:"Unknown error";new e.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new e.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(e){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${e}</span>\n      </div>\n    `}displayResults(e){return t(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const t=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});t.createEl("h3",{text:"âœ… Workflow Completed"}),t.createEl("p",{text:`Execution time: ${e.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(e.result),e.steps_taken&&e.steps_taken.length>0){const t=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});t.createEl("h4",{text:"Steps Taken"});const n=t.createEl("ol",{cls:"vaultpilot-steps-list"});e.steps_taken.forEach(e=>{n.createEl("li",{text:e})})}if(e.artifacts&&e.artifacts.length>0){const t=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});t.createEl("h4",{text:"Generated Artifacts"}),e.artifacts.forEach((e,n)=>{const i=t.createEl("div",{cls:"vaultpilot-artifact"});i.createEl("h5",{text:e.title}),i.createEl("p",{text:`Type: ${e.type}`,cls:"vaultpilot-artifact-type"});i.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(e,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(e)})}saveArtifactAsNote(n,i){return t(this,void 0,void 0,function*(){try{const t=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,i=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(t,i),new e.Notice(`Artifact saved as ${t}`)}catch(t){new e.Notice(`Failed to save artifact: ${t instanceof Error?t.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return t(this,void 0,void 0,function*(){try{const t=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let i="# VaultPilot Workflow Results\n\n";i+=`**Goal:** ${this.goalInput.value}\n\n`,i+=`**Execution Time:** ${n.execution_time}s\n\n`,i+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(i+="## Steps Taken\n\n",n.steps_taken.forEach((e,t)=>{i+=`${t+1}. ${e}\n`}),i+="\n"),n.artifacts&&n.artifacts.length>0&&(i+="## Generated Artifacts\n\n",n.artifacts.forEach(e=>{i+=`### ${e.title}\n\n${e.content}\n\n`})),yield this.app.vault.create(t,i),new e.Notice(`Complete results saved as ${t}`)}catch(t){new e.Notice(`Failed to save results: ${t instanceof Error?t.message:"Unknown error"}`)}})}displayError(e){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>âŒ Workflow Failed</h3>\n        <p>${e}</p>\n      </div>\n    `}renderMarkdown(e){return e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const e=document.createElement("style");e.id="vaultpilot-workflow-styles",e.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(e)}}onClose(){const{contentEl:e}=this;e.empty()}}class g{constructor(e,t){this.wsCallbacks=new Map,this.baseUrl=e.replace(/\/$/,""),this.apiKey=t}makeRequest(e){return t(this,arguments,void 0,function*(e,t={}){const n=`${this.baseUrl}${e}`,i=Object.assign({"Content-Type":"application/json",Accept:"application/json"},t.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);try{const e=yield fetch(n,Object.assign(Object.assign({},t),{headers:i,mode:"cors",credentials:"omit"}));let a;const o=e.headers.get("content-type");if(a=o&&o.includes("application/json")?yield e.json():yield e.text(),!e.ok){const t="object"==typeof a&&a.error?a.error:`HTTP ${e.status}: ${e.statusText}`;return console.error(`API Error [${e.status}]:`,t),{success:!1,error:t}}return{success:!0,data:"string"==typeof a?{message:a}:a}}catch(e){return console.error("API Request Error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}})}healthCheck(){return t(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/status`);const e=yield this.makeRequest("/status",{method:"GET"});return console.log("VaultPilot: Health check result:",e),e})}simpleHealthCheck(){return t(this,void 0,void 0,function*(){try{const e=`${this.baseUrl}/status`,t=yield fetch(e,{method:"HEAD",mode:"cors",credentials:"omit"});return t.ok||405===t.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${t.status}`}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Connection failed"}}})}chat(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(e)})})}getConversationHistory(e){return t(this,arguments,void 0,function*(e,t=50){const n={conversation_id:e,limit:t,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(e){return t(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${e}`,{method:"DELETE"})})}getCopilotCompletion(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(e)})})}executeWorkflow(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(e)})})}runWorkflow(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:e.message,context:e.context?{content:e.context}:{content:"No specific context provided"}})})})}sendChat(e,n){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:e.message,vault_context:e.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}streamChat(e){return t(this,void 0,void 0,function*(){const t=`${this.baseUrl}/api/obsidian/chat/stream`,n={"Content-Type":"application/json",Accept:"text/plain"};this.apiKey&&(n.Authorization=`Bearer ${this.apiKey}`);const i=yield fetch(t,{method:"POST",headers:n,body:JSON.stringify({message:e.message,vault_context:e.context||void 0,conversation_id:e.conversation_id,agent_id:e.agent_id,development_context:e.development_context,stream:!0}),mode:"cors",credentials:"omit"});if(!i.ok)throw new Error(`Stream request failed: ${i.status} ${i.statusText}`);if(!i.body)throw new Error("Response body is null");return i.body})}getAgents(){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(e)})})}executeAgent(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(e)})})}analyzeVaultContext(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(e)})})}planTasks(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(e)})})}parseIntelligence(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(e)})})}classifyIntent(e){return t(this,void 0,void 0,function*(){const t=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:e})});return t.success&&t.data?t.data:{intent:"ask",confidence:.5}})}explainIntent(e){return t(this,void 0,void 0,function*(){const t=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:e,include_debug:!0})});return t.success&&t.data?t.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(e)})})}connectWebSocket(e){const t=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${t}`),this.websocket=new WebSocket(t),this.websocket.onopen=()=>{var t;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(t=e.onConnect)||void 0===t||t.call(e)},this.websocket.onmessage=t=>{var n,i,a,o,s,r,l;try{const l=JSON.parse(t.data);switch(console.log("VaultPilot: WebSocket message received:",l.type),l.type){case"chat":null===(n=e.onChat)||void 0===n||n.call(e,l.data);break;case"workflow_progress":null===(i=e.onWorkflowProgress)||void 0===i||i.call(e,l.data);break;case"copilot":null===(a=e.onCopilot)||void 0===a||a.call(e,l.data);break;case"vault_sync":null===(o=e.onVaultSync)||void 0===o||o.call(e,l.data);break;case"intent_debug":null===(s=e.onIntentDebug)||void 0===s||s.call(e,l.data);break;case"error":null===(r=e.onError)||void 0===r||r.call(e,l.data)}}catch(t){console.error("VaultPilot: Error parsing WebSocket message:",t),null===(l=e.onError)||void 0===l||l.call(e,"Failed to parse WebSocket message")}},this.websocket.onclose=t=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",t.code,t.reason),null===(n=e.onDisconnect)||void 0===n||n.call(e)},this.websocket.onerror=t=>{var n;console.error("VaultPilot: WebSocket error:",t),null===(n=e.onError)||void 0===n||n.call(e,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(e,t){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:e,data:t}))}isWebSocketConnected(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}}function m(e){return e.match(/(<!-- vp:plan:start -->)([\s\S]*?)(<!-- vp:plan:end -->)/i)}function v(e){let t=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im,n=e.match(t);return n||(t=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,e.match(t))}class f{constructor(){this.logs=[],this.maxLogs=100}static getInstance(){return f.instance||(f.instance=new f),f.instance}log(e,t){const n=`[${(new Date).toISOString()}] ${e}${t?` | ${JSON.stringify(t)}`:""}`;console.log(n),this.logs.push(n),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}error(e,t){const n=(new Date).toISOString(),i=t instanceof Error?{message:t.message,stack:t.stack,name:t.name}:t,a=`[${n}] ERROR: ${e}${i?` | ${JSON.stringify(i)}`:""}`;console.error(a),this.logs.push(a),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return this.logs.join("\n")}analyzeApiClient(e){return e?{status:"available",available:!0,type:typeof e,methods:Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(t=>"function"==typeof e[t]),hasPlanTasks:"function"==typeof e.planTasks,hasHealthCheck:"function"==typeof e.healthCheck}:{status:"null",available:!1}}testConnection(e){return t(this,void 0,void 0,function*(){try{if(this.log("ðŸ”— Testing EvoAgentX connection..."),!e)throw new Error("API client is null or undefined");if(!e.healthCheck)throw new Error("API client does not have healthCheck method");const t=yield e.healthCheck();return this.log("âœ… Connection test successful",t),{success:!0,result:t}}catch(e){return this.error("âŒ Connection test failed",e),{success:!1,error:e instanceof Error?e.message:String(e)}}})}testTaskPlanning(e){return t(this,arguments,void 0,function*(e,t="Test note for schedule generation"){var n,i,a,o;try{if(this.log("ðŸ“‹ Testing task planning..."),!e)throw new Error("API client is null or undefined");if(!e.planTasks)throw new Error("API client does not have planTasks method");const s=yield e.planTasks({goal:"Create a test schedule",context:t,timeframe:"1 day"});return this.log("âœ… Task planning test successful",{success:s.success,hasData:!!s.data,hasPlan:!!(null===(n=s.data)||void 0===n?void 0:n.plan),taskCount:(null===(o=null===(a=null===(i=s.data)||void 0===i?void 0:i.plan)||void 0===a?void 0:a.tasks)||void 0===o?void 0:o.length)||0}),{success:!0,result:s}}catch(e){return this.error("âŒ Task planning test failed",e),{success:!1,error:e instanceof Error?e.message:String(e)}}})}}const y=f.getInstance();class b extends Error{constructor(e,t,n){super(e),this.name="VaultManagementError",this.code=t,this.feature=n}}class w{constructor(e,t){this.baseUrl=e,this.apiKey=t}getVaultStructure(e){return t(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify(e)});if(404===t.status)return{vault_name:"Vault",total_files:0,total_folders:0,total_size:0,structure:{name:"vault",type:"folder",path:"/",children:[]},recent_files:[],orphaned_files:[]};if(!t.ok)throw new b(`Failed to get vault structure: ${t.statusText}`,"STRUCTURE_FETCH_FAILED","structure");return yield t.json()}catch(e){if(e instanceof b)throw e;throw this.handleVaultManagementError(e,"structure"),e}})}performFileOperation(e){return t(this,void 0,void 0,function*(){try{this.validateFileOperationRequest(e);const t=yield this.makeRequest("/api/obsidian/vault/file/operation",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new b(`File operation failed: ${t.statusText}`,"FILE_OPERATION_FAILED","file-operations");const n=yield t.json();if(!n.success)throw new b(n.message||"File operation failed","FILE_OPERATION_FAILED","file-operations");return n}catch(e){throw this.handleVaultManagementError(e,"file-operations"),e}})}performBatchOperations(e){return t(this,void 0,void 0,function*(){try{if(!e.operations||0===e.operations.length)throw new b("No operations specified for batch request","INVALID_BATCH_REQUEST","batch-operations");e.operations.forEach((e,t)=>{try{this.validateFileOperationRequest(e)}catch(e){throw new b(`Invalid operation at index ${t}: ${e.message||e}`,"INVALID_BATCH_OPERATION","batch-operations")}});const t=yield this.makeRequest("/api/obsidian/vault/file/batch",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new b(`Batch operations failed: ${t.statusText}`,"BATCH_OPERATION_FAILED","batch-operations");const n=yield t.json();if(!n.success)throw new b(n.message||"Batch operations failed","BATCH_OPERATION_FAILED","batch-operations");return n}catch(e){throw this.handleVaultManagementError(e,"batch-operations"),e}})}searchVault(e){return t(this,void 0,void 0,function*(){try{if(!e.query||0===e.query.trim().length)throw new b("Search query cannot be empty","INVALID_SEARCH_QUERY","search");const t=yield this.makeRequest("/api/obsidian/vault/search",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new b(`Search failed: ${t.statusText}`,"SEARCH_FAILED","search");return yield t.json()}catch(e){throw this.handleVaultManagementError(e,"search"),e}})}organizeVault(e){return t(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/organize",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new b(`Organization analysis failed: ${t.statusText}`,"ORGANIZATION_FAILED","organization");return yield t.json()}catch(e){throw this.handleVaultManagementError(e,"organization"),e}})}backupVault(e){return t(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/backup",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new b(`Backup failed: ${t.statusText}`,"BACKUP_FAILED","backup");return yield t.json()}catch(e){throw this.handleVaultManagementError(e,"backup"),e}})}createFile(e,n){return t(this,arguments,void 0,function*(e,t,n=!1){return this.performFileOperation({operation:"create",file_path:e,content:t,backup:n})})}updateFile(e,n){return t(this,arguments,void 0,function*(e,t,n=!0){return this.performFileOperation({operation:"update",file_path:e,content:t,backup:n})})}deleteFile(e){return t(this,arguments,void 0,function*(e,t=!0){return this.performFileOperation({operation:"delete",file_path:e,backup:t})})}moveFile(e,n){return t(this,arguments,void 0,function*(e,t,n=!0){return this.performFileOperation({operation:"move",file_path:e,new_path:t,backup:n})})}copyFile(e,n){return t(this,void 0,void 0,function*(){return this.performFileOperation({operation:"copy",file_path:e,new_path:n})})}quickSearch(e){return t(this,arguments,void 0,function*(e,t=20){return this.searchVault({query:e,search_type:"comprehensive",max_results:t,include_content:!0})})}makeRequest(e){return t(this,arguments,void 0,function*(e,t={}){const n=`${this.baseUrl.replace(/\/$/,"")}${e}`,i=Object.assign({"Content-Type":"application/json"},t.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);const a=Object.assign(Object.assign({},t),{headers:i});try{return yield fetch(n,a)}catch(e){throw new b(`Network request failed: ${e.message||e}`,"NETWORK_ERROR","api")}})}validateFileOperationRequest(e){if(!e.file_path||0===e.file_path.trim().length)throw new b("File path is required","INVALID_FILE_PATH","validation");if(!("move"!==e.operation&&"copy"!==e.operation||e.new_path&&0!==e.new_path.trim().length))throw new b("New path is required for move/copy operations","INVALID_NEW_PATH","validation");if(("create"===e.operation||"update"===e.operation)&&void 0===e.content)throw new b("Content is required for create/update operations","INVALID_CONTENT","validation")}handleVaultManagementError(t,n){console.error(`Vault management error in ${n}:`,t),t instanceof b?new e.Notice(`Vault ${n} error: ${t.message}`,5e3):new e.Notice(`Vault ${n} operation failed`,3e3)}testConnection(){return t(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify({include_content:!1,max_depth:1})});return e.ok?{success:!0,message:"Vault management connection successful"}:{success:!1,message:`Connection failed: ${e.status} ${e.statusText}`}}catch(e){return{success:!1,message:`Connection error: ${e.message||e}`}}})}}class C{static detect(){const e={platform:"unknown",hasFileSystem:!1,hasWebSocket:!1,hasHTTP:!1,capabilities:[]};return"undefined"!=typeof window&&window.app&&window.app.workspace?e.platform="obsidian":"undefined"!=typeof window?e.platform="browser":void 0!==globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node&&(e.platform="node"),e.hasHTTP="undefined"!=typeof fetch,e.hasWebSocket="undefined"!=typeof WebSocket,e.hasFileSystem=void 0!==globalThis.require&&"node"===e.platform,e.hasHTTP&&e.capabilities.push("http"),e.hasWebSocket&&e.capabilities.push("websocket"),e.hasFileSystem&&e.capabilities.push("filesystem"),e}static isObsidian(){return"obsidian"===this.detect().platform}static canUseFileSystem(){return this.detect().hasFileSystem}static canUseWebSocket(){return this.detect().hasWebSocket}static getOptimalTransport(){const e=this.detect();if(e.hasWebSocket)return"websocket";if(e.hasHTTP)return"http";if(e.hasFileSystem)return"filesystem";throw new Error("No suitable transport available")}}class x{constructor(e){this.isConnected=!1,this.messageId=1,this.pendingRequests=new Map,this.eventListeners=new Map,this.config=e,this.environment=C.detect(),this.serverUrl=e.server_url,this.config.debug_mode&&console.log("DevPipe Environment:",this.environment)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(e=>e(t))}initialize(){return t(this,void 0,void 0,function*(){try{if(!this.environment.hasHTTP)throw new Error("HTTP transport not available in this environment");yield this.testConnection(),this.isConnected=!0,this.emit("connected",{status:"connected",environment:this.environment.platform,transport:"http"}),this.config.debug_mode&&console.log("DevPipe client initialized successfully")}catch(e){throw this.emit("error",e),new Error(`Failed to initialize DevPipe client: ${e instanceof Error?e.message:"Unknown error"}`)}})}testConnection(){return t(this,void 0,void 0,function*(){try{const e=yield fetch(`${this.serverUrl}/api/v1/devpipe/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error(`DevPipe server not accessible: ${e.status} ${e.statusText}`)}catch(e){if(e instanceof Error&&"TypeError"===e.name&&e.message.includes("Failed to fetch"))try{if((yield fetch(`${this.serverUrl}/status`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)return void console.warn("DevPipe endpoint not available, but backend is accessible")}catch(t){throw new Error(`DevPipe server not accessible and fallback failed: ${e.message}`)}throw e}})}sendMessage(e,n){return t(this,arguments,void 0,function*(e,t,n=3e4){if(!this.isConnected)throw new Error("DevPipe client not connected");const i=this.generateMessageId(),a={id:i,timestamp:(new Date).toISOString(),type:e,payload:t,sender:"vaultpilot-plugin",recipient:"evoagentx-backend",priority:"normal"};return new Promise((e,t)=>{const o=window.setTimeout(()=>{this.pendingRequests.delete(i),t(new Error(`Request timeout after ${n}ms`))},n);this.pendingRequests.set(i,{resolve:e,reject:t,timeout:o}),this.sendMessageToServer(a).catch(e=>{this.pendingRequests.delete(i),window.clearTimeout(o),t(e)})})})}sendMessageToServer(e){return t(this,void 0,void 0,function*(){try{const t=yield fetch(`${this.serverUrl}/api/v1/devpipe/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`DevPipe server error: ${t.status}`);const n=yield t.json();if(n.response&&n.response.id===e.id){const t=this.pendingRequests.get(e.id);t&&(window.clearTimeout(t.timeout),this.pendingRequests.delete(e.id),t.resolve(n.response.payload))}return this.config.debug_mode&&console.log("DevPipe message sent successfully:",e.type),n}catch(e){throw this.config.debug_mode&&console.error("Error sending DevPipe message:",e),e}})}generateMessageId(){return`msg_${Date.now()}_${this.messageId++}`}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.pendingRequests.entries());for(const[t,n]of e)window.clearTimeout(n.timeout),n.reject(new Error("DevPipe client disconnected"));this.pendingRequests.clear(),this.isConnected=!1,this.emit("disconnected",{status:"disconnected"})})}isReady(){return this.isConnected}getPendingRequestCount(){return this.pendingRequests.size}}class k extends Error{constructor(e,t,n,i){super(t),this.name="ModelSelectionError",this.code=e,this.details=n,this.suggestions=i}}class S{constructor(e,t="",n={}){this.cachedHealth=[],this.lastHealthUpdate=0,this.eventListeners=new Map,this.config={devpipe_path:t,server_url:e,monitoring_interval:n.monitoring_interval||3e4,fallback_enabled:!1!==n.fallback_enabled,cache_duration:n.cache_duration||3e5,retry_attempts:n.retry_attempts||3,timeout:n.timeout||3e4,debug_mode:n.debug_mode||!1},this.devPipeClient=new x(this.config),this.userPreferences={priority:"balanced",max_cost_per_request:.5,preferred_providers:[],fallback_enabled:!0,quality_threshold:.7,timeout_preference:3e4},this.setupEventListeners()}setupEventListeners(){this.devPipeClient.on("connected",()=>{this.emit("connected",{status:"connected"})}),this.devPipeClient.on("disconnected",()=>{this.emit("disconnected",{status:"disconnected"})}),this.devPipeClient.on("health-updated",e=>{this.cachedHealth=e,this.lastHealthUpdate=Date.now(),this.emit("health-updated",e)}),this.devPipeClient.on("performance-metrics",e=>{this.emit("performance-metrics",e)})}initialize(){return t(this,void 0,void 0,function*(){try{yield this.devPipeClient.initialize(),yield this.refreshModelHealth(),this.startHealthMonitoring(),this.config.debug_mode&&console.log("ModelSelectionService initialized successfully")}catch(e){throw new Error(`Failed to initialize ModelSelectionService: ${e instanceof Error?e.message:"Unknown error"}`)}})}selectModel(e){return t(this,void 0,void 0,function*(){try{return yield this.performSelection(e)}catch(t){if(this.config.fallback_enabled)return yield this.fallbackSelection(e,t);throw t}})}performSelection(e){return t(this,void 0,void 0,function*(){if(!this.devPipeClient.isReady())throw new k("NO_HEALTHY_MODELS","DevPipe client not connected",{},["Check server connection","Retry initialization"]);const t=Object.assign(Object.assign({},e),{user_preferences:this.userPreferences,timeout_ms:e.timeout_ms||this.config.timeout});return yield this.devPipeClient.sendMessage("model-selection-request",t,this.config.timeout)})}fallbackSelection(e,n){return t(this,void 0,void 0,function*(){console.warn("Model selection failed, using fallback:",n);const t=this.getCachedSelection(e);return t||this.staticModelSelection(e)})}staticModelSelection(e){const t={"text-generation":{name:"gpt-3.5-turbo",cost:.002},"code-generation":{name:"gpt-4",cost:.03},chat:{name:"gpt-3.5-turbo",cost:.002},summarization:{name:"gpt-3.5-turbo",cost:.002},translation:{name:"gpt-3.5-turbo",cost:.002}},n=t[e.task_type]||t["text-generation"];return{selected_model:{id:n.name,name:n.name,provider:"openai",capabilities:[{type:e.task_type,score:.8}],cost_per_token:n.cost,max_tokens:4e3,response_time_avg_ms:2e3,availability_score:.9,quality_score:.8},reasoning:"Fallback selection due to service unavailability",fallback_models:[],estimated_cost:100*n.cost,estimated_time_ms:2e3,selection_metadata:{selection_time_ms:0,factors_considered:["fallback"],confidence_score:.5}}}getCachedSelection(e){return null}selectModel_OLD(e){return t(this,void 0,void 0,function*(){if(!this.devPipeClient.isReady())throw new k("NO_HEALTHY_MODELS","DevPipe client not connected",{},["Check server connection","Retry initialization"]);try{const t=Object.assign(Object.assign({},e),{user_preferences:this.userPreferences,timeout_ms:e.timeout_ms||this.config.timeout}),n=yield this.devPipeClient.sendMessage("model-selection-request",t,e.timeout_ms||this.config.timeout);return this.emit("model-selected",n),this.config.debug_mode&&console.log("Model selected:",n.selected_model.name,"for task:",e.task_type),n}catch(e){if(e instanceof Error){if(e.message.includes("timeout"))throw new k("TIMEOUT","Model selection request timed out",{originalError:e},["Increase timeout","Check server performance"]);if(e.message.includes("budget")||e.message.includes("cost"))throw new k("BUDGET_EXCEEDED","Request exceeds budget limits",{originalError:e},["Increase budget","Use lower cost models"])}throw new k("SERVICE_UNAVAILABLE","Model selection service unavailable",{originalError:e},["Check server status","Retry request"])}})}getModelHealth(){return t(this,void 0,void 0,function*(){return this.cachedHealth.length>0&&Date.now()-this.lastHealthUpdate<this.config.cache_duration?this.cachedHealth:yield this.refreshModelHealth()})}refreshModelHealth(){return t(this,void 0,void 0,function*(){try{const e=yield this.devPipeClient.sendMessage("health-check-request",{},1e4);return this.cachedHealth=e,this.lastHealthUpdate=Date.now(),e}catch(e){return this.config.debug_mode&&console.warn("Failed to refresh model health:",e),this.cachedHealth}})}updatePreferences(e){return t(this,void 0,void 0,function*(){this.userPreferences=Object.assign(Object.assign({},this.userPreferences),e);try{yield this.devPipeClient.sendMessage("preferences-update",this.userPreferences,5e3),this.emit("preferences-updated",this.userPreferences),this.config.debug_mode&&console.log("User preferences updated:",this.userPreferences)}catch(e){this.config.debug_mode&&console.warn("Failed to sync preferences with server:",e)}})}getPreferences(){return Object.assign({},this.userPreferences)}startHealthMonitoring(){this.config.monitoring_interval>0&&setInterval(()=>t(this,void 0,void 0,function*(){try{yield this.refreshModelHealth()}catch(e){this.config.debug_mode&&console.warn("Health monitoring failed:",e)}}),this.config.monitoring_interval)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(e=>{try{e(t)}catch(e){this.config.debug_mode&&console.error("Event listener error:",e)}})}selectForTask(e){return t(this,arguments,void 0,function*(e,t="medium"){return this.selectModel({task_type:e,quality_requirement:t})})}selectCostOptimized(e){return t(this,arguments,void 0,function*(e,t=.01){return this.selectModel({task_type:e,quality_requirement:"medium",max_cost:t})})}selectHighPerformance(e){return t(this,void 0,void 0,function*(){return this.selectModel({task_type:e,quality_requirement:"high"})})}isConnected(){return this.devPipeClient.isReady()}getConfig(){return Object.assign({},this.config)}disconnect(){return t(this,void 0,void 0,function*(){yield this.devPipeClient.disconnect()})}}class E extends e.Modal{constructor(e,t){super(e),this.plugin=t,this.vaultClient=t.vaultClient}setFocusPath(e){return this.focusPath=e,this}onOpen(){return t(this,void 0,void 0,function*(){var e,t;const{contentEl:n}=this;n.empty(),n.addClass("vault-structure-modal");const i=n.createEl("div",{cls:"modal-header"});i.createEl("h2",{text:"Vault Structure Analysis"});const a=i.createEl("button",{text:"ðŸ”„ Refresh",cls:"mod-cta"}),o=n.createDiv({cls:"vault-loading"});o.setText("ðŸ” Analyzing vault structure...");try{const e=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:5});o.remove(),this.renderStructure(n,e),a.onclick=()=>{this.onOpen()}}catch(i){if(o.remove(),console.error("Vault structure error:",i),(null===(e=i.message)||void 0===e?void 0:e.includes("Not Found"))||(null===(t=i.message)||void 0===t?void 0:t.includes("404")))this.renderFallbackStructure(n);else{n.createDiv({cls:"vault-error"}).setText("âŒ Failed to load vault structure");n.createEl("button",{text:"Retry",cls:"mod-cta"}).onclick=()=>this.onOpen()}a.onclick=()=>{this.onOpen()}}})}renderStructure(e,t){e.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“</span>\n          <span class="stat-label">Files</span>\n          <span class="stat-value">${t.total_files}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“‚</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${t.total_folders}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ’¾</span>\n          <span class="stat-label">Size</span>\n          <span class="stat-value">${(t.total_size/1024/1024).toFixed(2)} MB</span>\n        </div>\n      </div>\n    `;const n=e.createDiv({cls:"vault-tree-container"});n.createEl("h3",{text:"Folder Structure"});const i=n.createDiv({cls:"vault-tree"});if(this.renderFolder(i,t.structure,0),t.recent_files.length>0){const n=e.createDiv({cls:"recent-files-container"});n.createEl("h3",{text:"Recent Files"});const i=n.createDiv({cls:"recent-files"});t.recent_files.slice(0,10).forEach(e=>{i.createDiv({cls:"recent-file"}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${e.name}</span>\n          <span class="file-date">${new Date(e.modified).toLocaleDateString()}</span>\n        `})}if(t.orphaned_files.length>0){const n=e.createDiv({cls:"orphaned-files-container"});n.createEl("h3",{text:"âš ï¸ Orphaned Files"});const i=n.createDiv({cls:"orphaned-files"});t.orphaned_files.forEach(e=>{i.createDiv({cls:"orphaned-file"}).innerHTML=`\n          <span class="file-icon">ðŸ”—</span>\n          <span class="file-path">${e.path}</span>\n        `})}}renderFolder(e,t,n){const i=e.createDiv({cls:"folder-item",attr:{"data-level":n.toString()}});i.innerHTML=`\n      <span class="folder-toggle">â–¶</span>\n      <span class="folder-icon">ðŸ“</span>\n      <span class="folder-name">${t.name}</span>\n      <span class="folder-count">(${t.children.length})</span>\n    `;const a=e.createDiv({cls:"folder-children",attr:{style:"display: none;"}}),o=i.querySelector(".folder-toggle");o.onclick=()=>{const e="none"!==a.style.display;a.style.display=e?"none":"block",o.textContent=e?"â–¶":"â–¼"},t.children.forEach(e=>{if("folder"===e.type)this.renderFolder(a,e,n+1);else{a.createDiv({cls:"file-item",attr:{"data-level":(n+1).toString()}}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${e.name}</span>\n          <span class="file-size">${(e.size/1024).toFixed(1)}KB</span>\n        `}})}renderFallbackStructure(e){const t=e.createDiv({cls:"vault-fallback"});t.createEl("h3",{text:"ðŸ“ Local Vault Analysis"}),t.createEl("p",{text:"Server-side vault management not available. Showing local analysis.",cls:"vault-fallback-message"});const n=this.plugin.app.vault.getFiles(),i=this.plugin.app.vault.getMarkdownFiles(),a=this.plugin.app.vault.getAllLoadedFiles().filter(e=>e.children).length;t.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${a}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“„</span>\n          <span class="stat-label">Total Files</span>\n          <span class="stat-value">${n.length}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“</span>\n          <span class="stat-label">Markdown</span>\n          <span class="stat-value">${i.length}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ’¾</span>\n          <span class="stat-label">Status</span>\n          <span class="stat-value">Local Only</span>\n        </div>\n      </div>\n    `;const o=t.createDiv({cls:"recent-files-container"});o.createEl("h3",{text:"Recent Files"});const s=i.sort((e,t)=>t.stat.mtime-e.stat.mtime).slice(0,10),r=o.createDiv({cls:"recent-files"});s.forEach(e=>{const t=r.createDiv({cls:"recent-file"});t.innerHTML=`\n        <span class="file-icon">ðŸ“„</span>\n        <span class="file-name">${e.basename}</span>\n        <span class="file-date">${new Date(e.stat.mtime).toLocaleDateString()}</span>\n      `,t.onclick=()=>{this.plugin.app.workspace.openLinkText(e.path,"",!1),this.close()}});t.createDiv({cls:"vault-config-note"}).innerHTML="\n      <p><strong>ðŸ’¡ Enable Full Features:</strong> Configure vault management endpoints on your server to access advanced features like structure analysis, smart search, and file operations.</p>\n      <p>See the dev-pipe documentation for implementation details.</p>\n    "}onClose(){const{contentEl:e}=this;e.empty()}}class T extends e.Modal{constructor(e,t){super(e),this.plugin=t,this.vaultClient=t.vaultClient}setInitialQuery(e,t){return this.initialQuery=e,this.searchType=t,this}onOpen(){return t(this,void 0,void 0,function*(){const{contentEl:n}=this;n.empty(),n.addClass("smart-search-modal"),n.createEl("h2",{text:"ðŸ” Smart Vault Search"});const i=n.createDiv({cls:"search-form"}),a=i.createEl("input",{type:"text",placeholder:"Enter search query...",cls:"search-query-input"});this.initialQuery&&(a.value=this.initialQuery);const o=i.createEl("select",{cls:"search-type-select"});[{value:"comprehensive",label:"Comprehensive"},{value:"content",label:"Content"},{value:"filename",label:"Filename"},{value:"tags",label:"Tags"},{value:"links",label:"Links"}].forEach(e=>{const t=o.createEl("option",{value:e.value});t.textContent=e.label,e.value===(this.searchType||"comprehensive")&&(t.selected=!0)});const s=i.createEl("button",{text:"Search",cls:"mod-cta search-button"}),r=n.createDiv({cls:"search-results-container"}),l=()=>t(this,void 0,void 0,function*(){var t;const n=a.value.trim();if(!n)return void new e.Notice("Please enter a search query");s.textContent="Searching...",s.disabled=!0,r.empty();const i=r.createDiv({cls:"search-loading"});i.textContent="ðŸ” Searching vault...";try{const e=yield this.vaultClient.searchVault({query:n,search_type:o.value,max_results:(null===(t=this.plugin.settings.vaultManagement)||void 0===t?void 0:t.searchResultsLimit)||50,include_content:!0});i.remove(),this.renderSearchResults(r,e)}catch(e){i.textContent="âŒ Search failed",console.error("Search error:",e)}finally{s.textContent="Search",s.disabled=!1}});s.onclick=l,a.addEventListener("keypress",e=>{"Enter"===e.key&&l()}),this.initialQuery&&l(),a.focus()})}renderSearchResults(e,t){if(e.createEl("h3",{text:`Search Results (${t.total_found})`}),t.insights){e.createDiv({cls:"search-insights"}).innerHTML=`\n        <div class="insights-header">ðŸ§  AI Insights</div>\n        <div class="insights-content">${t.insights}</div>\n      `}if(0===t.results.length)return void e.createDiv({cls:"no-results",text:"No results found. Try a different search term or type."});const n=e.createDiv({cls:"search-results-list"});if(t.results.forEach(e=>{const t=n.createDiv({cls:"search-result"});t.innerHTML=`\n        <div class="result-header">\n          <span class="result-file-name">${e.file_name}</span>\n          <span class="result-match-type">${e.match_type}</span>\n          <span class="result-score">${(100*e.score).toFixed(0)}%</span>\n        </div>\n        <div class="result-path">${e.file_path}</div>\n        <div class="result-preview">${e.preview}</div>\n        ${e.matches.length>0?`\n          <div class="result-matches">\n            <strong>Matches:</strong> ${e.matches.join(", ")}\n          </div>\n        `:""}\n      `,t.onclick=()=>{this.app.workspace.openLinkText(e.file_path,""),this.close()}}),t.suggested_queries&&t.suggested_queries.length>0){const n=e.createDiv({cls:"suggested-queries"});n.createEl("h4",{text:"ðŸ’¡ Suggested Queries"});const i=n.createDiv({cls:"suggestions-list"});t.suggested_queries.forEach(e=>{i.createEl("button",{text:e,cls:"suggestion-button"}).onclick=()=>{const t=this.contentEl.querySelector(".search-query-input");t&&(t.value=e,t.dispatchEvent(new KeyboardEvent("keypress",{key:"Enter"})))}})}}onClose(){const{contentEl:e}=this;e.empty()}}class M extends e.Modal{constructor(e,t){super(e),this.plugin=t,this.vaultClient=t.vaultClient}setInitialPath(e){return this.initialPath=e,this}setOperation(e){return this.operation=e,this}onOpen(){return t(this,void 0,void 0,function*(){const{contentEl:t}=this;t.empty(),t.addClass("file-operations-modal"),t.createEl("h2",{text:"ðŸ“ File Operations Manager"}),new e.Setting(t).setName("Operation").setDesc("Select the file operation to perform").addDropdown(e=>e.addOption("create","Create File").addOption("update","Update File").addOption("delete","Delete File").addOption("move","Move File").addOption("copy","Copy File").setValue(this.operation||"create").onChange(e=>{this.operation=e,this.updateOperationForm()})),t.createDiv({cls:"operation-form"}),this.updateOperationForm()})}updateOperationForm(){const t=this.contentEl.querySelector(".operation-form");if(!t)return;t.empty();const n=this.operation||"create";new e.Setting(t).setName("File Path").setDesc("Path to the file (including filename)").addText(e=>e.setPlaceholder("path/to/file.md").setValue(this.initialPath||"").onChange(e=>this.initialPath=e)),"move"!==n&&"copy"!==n||new e.Setting(t).setName("New Path").setDesc("Destination path for the file").addText(e=>e.setPlaceholder("new/path/to/file.md")),"create"!==n&&"update"!==n||new e.Setting(t).setName("Content").setDesc("File content").addTextArea(e=>{e.setPlaceholder("Enter file content..."),"create"===n&&e.setValue("# New File\n\nContent goes here...")}),"create"!==n&&new e.Setting(t).setName("Create Backup").setDesc("Create a backup before performing the operation").addToggle(e=>e.setValue(!0)),new e.Setting(t).addButton(e=>e.setButtonText(`Execute ${n.charAt(0).toUpperCase()+n.slice(1)}`).setCta().onClick(()=>this.executeOperation()))}executeOperation(){return t(this,void 0,void 0,function*(){var t;const n=this.operation||"create",i=this.contentEl.querySelector('input[placeholder*="path/to/file"]'),a=this.contentEl.querySelector('input[placeholder*="new/path"]'),o=this.contentEl.querySelector("textarea"),s=this.contentEl.querySelector('input[type="checkbox"]');if(!(null==i?void 0:i.value))return void new e.Notice("File path is required");const r={operation:n,file_path:i.value,backup:null===(t=null==s?void 0:s.checked)||void 0===t||t};(null==a?void 0:a.value)&&(r.new_path=a.value),(null==o?void 0:o.value)&&(r.content=o.value);try{new e.Notice(`Performing ${n}...`);const t=yield this.vaultClient.performFileOperation(r);new e.Notice(`âœ… ${n} successful: ${t.message}`),this.close()}catch(t){new e.Notice(`âŒ ${n} failed: ${t.message}`)}})}onClose(){const{contentEl:e}=this;e.empty()}}var P,D,A,R;!function(e){e.HTTP="http",e.WEBSOCKET="websocket",e.FILESYSTEM="filesystem"}(P||(P={})),function(e){e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.MESSAGE="message",e.ERROR="error",e.HEALTH_CHECK="health_check",e.RECONNECTING="reconnecting"}(D||(D={}));class N{constructor(e){this.state="closed",this.failureCount=0,this.lastFailureTime=0,this.nextAttempt=0,this.config=e}execute(e){return t(this,void 0,void 0,function*(){if("open"===this.state){if(Date.now()<this.nextAttempt)throw new Error("Circuit breaker is OPEN");this.state="half-open"}try{const t=yield e();return this.onSuccess(),t}catch(e){throw this.onFailure(),e}})}onSuccess(){this.failureCount=0,this.state="closed"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.config.failureThreshold&&(this.state="open",this.nextAttempt=Date.now()+this.config.resetTimeout)}getState(){return this.state}}class O{constructor(e,t){this.eventListeners=new Map,this.connected=!1,this.initialized=!1,this.type=e,this.id=`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,this.config=t,this.healthStatus={status:"disconnected",lastCheck:Date.now(),latency:0,errorRate:0,consecutiveFailures:0,uptime:0},this.circuitBreaker=new N({failureThreshold:5,resetTimeout:3e4,monitoringPeriod:1e4}),this.metrics={messagesSent:0,messagesReceived:0,errors:0,totalLatency:0,lastActivity:Date.now()},this.debug(`Transport ${this.id} created`)}on(e,t){const n=e.toString();this.eventListeners.has(n)||this.eventListeners.set(n,[]),this.eventListeners.get(n).push(t)}off(e,t){const n=e.toString(),i=this.eventListeners.get(n);if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1)}}emit(e,t){const n=e.toString(),i=this.eventListeners.get(n);i&&i.forEach(e=>{try{e(t)}catch(e){this.debug(`Error in event listener for ${n}:`,e)}})}performHealthCheck(){return t(this,void 0,void 0,function*(){const e=Date.now();try{yield this.doHealthCheck();const t=Date.now()-e;return this.healthStatus.status="healthy",this.healthStatus.latency=t,this.healthStatus.consecutiveFailures=0,this.healthStatus.lastCheck=Date.now(),this.emit(D.HEALTH_CHECK,{success:!0,latency:t}),{success:!0,latency:t,timestamp:Date.now()}}catch(t){this.healthStatus.status="failing",this.healthStatus.consecutiveFailures++,this.healthStatus.lastCheck=Date.now();const n=t instanceof Error?t.message:"Unknown error";return this.emit(D.HEALTH_CHECK,{success:!1,error:n}),{success:!1,error:n,latency:Date.now()-e,timestamp:Date.now()}}})}executeWithCircuitBreaker(e,n){return t(this,void 0,void 0,function*(){const t=Date.now();try{const n=yield this.circuitBreaker.execute(e),i=Date.now()-t;return this.updateMetrics(!0,i),n}catch(e){const i=Date.now()-t;throw this.updateMetrics(!1,i),this.debug(`Operation ${n} failed:`,e),e}})}updateMetrics(e,t){e?(this.metrics.messagesSent++,this.metrics.totalLatency+=t):this.metrics.errors++,this.metrics.lastActivity=Date.now()}generateMessageId(){return`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}debug(e,...t){this.config.debug&&console.log(`[${this.type}:${this.id}] ${e}`,...t)}calculateReliability(){const e=this.metrics.messagesSent+this.metrics.errors;return 0===e?1:this.metrics.messagesSent/e}isAvailable(){return this.initialized&&"open"!==this.circuitBreaker.getState()}isConnected(){return this.connected&&this.isAvailable()}getHealthStatus(){return Object.assign({},this.healthStatus)}initialize(e){return t(this,void 0,void 0,function*(){this.config=Object.assign(Object.assign({},this.config),e),yield this.doInitialize(),this.initialized=!0,this.debug("Transport initialized")})}destroy(){return t(this,void 0,void 0,function*(){yield this.disconnect(),this.eventListeners.clear(),this.initialized=!1,this.debug("Transport destroyed")})}}class F{constructor(e){this.activeConnections=0,this.queue=[],this.maxConnections=e.maxConnections}acquire(e){return t(this,void 0,void 0,function*(){return new Promise((n,i)=>{const a=()=>t(this,void 0,void 0,function*(){this.activeConnections++;try{const t=yield e();n(t)}catch(e){i(e)}finally{if(this.activeConnections--,this.queue.length>0){const e=this.queue.shift();e&&e()}}});this.activeConnections<this.maxConnections?a():this.queue.push(a)})})}}class $ extends O{constructor(e){super(P.HTTP,e),this.pendingRequests=new Map,this.messageQueue=[],this.processingQueue=!1,this.httpConfig=e.http||{enableSSE:!0,maxConnections:10,keepAlive:!0,compression:!0},this.connectionPool=new F({maxConnections:this.httpConfig.maxConnections||10,keepAlive:!1!==this.httpConfig.keepAlive,timeout:e.timeout})}doInitialize(){return t(this,void 0,void 0,function*(){if(!C.detect().hasHTTP)throw new Error("HTTP transport not supported in this environment");this.debug("HTTP transport initialized")})}connect(){return t(this,void 0,void 0,function*(){try{yield this.doHealthCheck(),this.httpConfig.enableSSE&&this.config.serverUrl&&(yield this.setupSSE()),this.connected=!0,this.healthStatus.status="healthy",this.emit(D.CONNECTED,{transport:this.type}),this.debug("HTTP transport connected")}catch(e){throw this.emit(D.ERROR,e),e}})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.pendingRequests.values());for(const t of e)clearTimeout(t.timeout),t.reject(new Error("Transport disconnected"));this.pendingRequests.clear(),this.sseConnection&&(this.sseConnection.close(),this.sseConnection=void 0),this.connected=!1,this.healthStatus.status="disconnected",this.emit(D.DISCONNECTED,{transport:this.type}),this.debug("HTTP transport disconnected")})}send(e){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("HTTP transport not connected");return e.id||(e.id=this.generateMessageId()),e.timestamp=Date.now(),this.executeWithCircuitBreaker(()=>t(this,void 0,void 0,function*(){return this.sendHttpRequest(e)}),"http_send")})}sendHttpRequest(e){return t(this,void 0,void 0,function*(){return new Promise((t,n)=>{const i=setTimeout(()=>{this.pendingRequests.delete(e.id),n(new Error(`Request timeout after ${this.config.timeout}ms`))},this.config.timeout),a={id:e.id,message:e,resolve:n=>{clearTimeout(i),this.pendingRequests.delete(e.id),t(n)},reject:t=>{clearTimeout(i),this.pendingRequests.delete(e.id),n(t)},timeout:i,timestamp:Date.now()};this.pendingRequests.set(e.id,a),this.performHttpRequest(e,a)})})}performHttpRequest(e,n){return t(this,void 0,void 0,function*(){try{const i=yield this.connectionPool.acquire(()=>t(this,void 0,void 0,function*(){const t=yield fetch(`${this.config.serverUrl}/api/v1/devpipe/message`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},this.httpConfig.compression&&{"Accept-Encoding":"gzip, deflate"}),body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return t.json()}));if(i&&i.id===e.id){const e={id:i.id,success:!0,payload:i.payload||i,timestamp:Date.now()};n.resolve(e)}else this.debug(`Waiting for async response for message ${e.id}`)}catch(e){n.reject(e instanceof Error?e:new Error("HTTP request failed"))}})}setupSSE(){return t(this,void 0,void 0,function*(){if(!this.config.serverUrl)throw new Error("Server URL required for SSE");return new Promise((e,t)=>{const n=`${this.config.serverUrl}/api/v1/devpipe/stream`;this.sseConnection=new EventSource(n),this.sseConnection.onopen=()=>{this.debug("SSE connection established"),e()},this.sseConnection.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleSSEMessage(t)}catch(e){this.debug("Failed to parse SSE message:",e)}},this.sseConnection.onerror=e=>{var n;this.debug("SSE connection error:",e),(null===(n=this.sseConnection)||void 0===n?void 0:n.readyState)===EventSource.CONNECTING?this.emit(D.RECONNECTING,{transport:this.type}):(this.emit(D.ERROR,e),t(e))}})})}handleSSEMessage(e){if("response"===e.type&&e.id){const t=this.pendingRequests.get(e.id);if(t){const n={id:e.id,success:!1!==e.success,payload:e.payload,error:e.error,timestamp:Date.now()};t.resolve(n)}}else this.emit(D.MESSAGE,e)}doHealthCheck(){return t(this,void 0,void 0,function*(){if(!this.config.serverUrl)throw new Error("No server URL configured");const e=yield fetch(`${this.config.serverUrl}/api/v1/devpipe/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error(`Health check failed: ${e.status} ${e.statusText}`)})}getCapabilities(){return{supportsRealtime:!!this.httpConfig.enableSSE,supportsBidirectional:!!this.httpConfig.enableSSE,supportsFileSystem:!1,supportsStreaming:!0,maxMessageSize:10485760,averageLatency:this.healthStatus.latency,maxConcurrentConnections:this.httpConfig.maxConnections||10,reliability:this.calculateReliability(),supportedEnvironments:["browser","node","obsidian"]}}}class I{constructor(e,t=[],n={}){this.reconnectAttempts=0,this.shouldReconnect=!0,this.url=e,this.protocols=t,this.options=n,this.maxReconnectAttempts=n.maxReconnectAttempts||10,this.reconnectDelay=n.reconnectDelay||1e3,this.connect()}connect(){try{this.ws=new WebSocket(this.url,this.protocols),this.ws.onopen=e=>{this.reconnectAttempts=0,this.onopen&&this.onopen(e)},this.ws.onclose=e=>{this.onclose&&this.onclose(e),this.shouldReconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.reconnect(),this.reconnectDelay*Math.pow(2,this.reconnectAttempts))},this.ws.onmessage=e=>{this.onmessage&&this.onmessage(e)},this.ws.onerror=e=>{this.onerror&&this.onerror(e)}}catch(e){this.onerror&&this.onerror(new Event("error"))}}reconnect(){this.shouldReconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,this.connect())}send(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected");this.ws.send(e)}close(){this.shouldReconnect=!1,this.ws&&this.ws.close()}get readyState(){return this.ws?this.ws.readyState:WebSocket.CLOSED}}class V extends O{constructor(e){super(P.WEBSOCKET,e),this.responseHandlers=new Map,this.wsConfig=e.websocket||{heartbeatInterval:3e4,reconnectDelay:1e3,maxReconnectAttempts:10,persistMessages:!1},this.messageQueue={messages:[],maxSize:1e3,persistToDisk:this.wsConfig.persistMessages||!1}}doInitialize(){return t(this,void 0,void 0,function*(){if(!C.detect().hasWebSocket)throw new Error("WebSocket transport not supported in this environment");this.debug("WebSocket transport initialized")})}connect(){return t(this,void 0,void 0,function*(){if(!this.config.serverUrl)throw new Error("Server URL required for WebSocket transport");return new Promise((e,t)=>{const n=this.config.serverUrl.replace(/^http/,"ws")+"/api/v1/devpipe/ws";this.websocket=new I(n,[],{connectionTimeout:this.config.timeout,debug:this.config.debug,maxReconnectAttempts:this.wsConfig.maxReconnectAttempts,reconnectDelay:this.wsConfig.reconnectDelay}),this.websocket.onopen=()=>{this.connected=!0,this.healthStatus.status="healthy",this.startHeartbeat(),this.emit(D.CONNECTED,{transport:this.type}),this.debug("WebSocket connected"),e()},this.websocket.onerror=e=>{this.debug("WebSocket error:",e),this.emit(D.ERROR,e),this.connected||t(new Error("Failed to connect WebSocket"))},this.websocket.onmessage=e=>{this.handleMessage(e.data)},this.websocket.onclose=()=>{this.connected=!1,this.healthStatus.status="disconnected",this.stopHeartbeat(),this.emit(D.DISCONNECTED,{transport:this.type}),this.debug("WebSocket disconnected")}})})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.responseHandlers.values());for(const t of e)clearTimeout(t.timeout),t.reject(new Error("Transport disconnected"));this.responseHandlers.clear(),this.stopHeartbeat(),this.websocket&&(this.websocket.close(),this.websocket=void 0),this.connected=!1,this.healthStatus.status="disconnected",this.emit(D.DISCONNECTED,{transport:this.type}),this.debug("WebSocket transport disconnected")})}send(e){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("WebSocket transport not connected");return e.id||(e.id=this.generateMessageId()),e.timestamp=Date.now(),this.executeWithCircuitBreaker(()=>t(this,void 0,void 0,function*(){return this.sendWebSocketMessage(e)}),"websocket_send")})}sendWebSocketMessage(e){return t(this,void 0,void 0,function*(){return new Promise((t,n)=>{const i=setTimeout(()=>{this.responseHandlers.delete(e.id),n(new Error(`WebSocket request timeout after ${this.config.timeout}ms`))},this.config.timeout),a={resolve:n=>{clearTimeout(i),this.responseHandlers.delete(e.id),t(n)},reject:t=>{clearTimeout(i),this.responseHandlers.delete(e.id),n(t)},timeout:i,timestamp:Date.now()};this.responseHandlers.set(e.id,a);try{this.websocket.send(JSON.stringify(e))}catch(t){clearTimeout(i),this.responseHandlers.delete(e.id),n(t)}})})}handleMessage(e){try{const t=JSON.parse(e);if("pong"===t.type)return void this.debug("Received heartbeat pong");if("response"===t.type&&t.replyTo){const e=this.responseHandlers.get(t.replyTo);if(e){const n={id:t.id,success:!1!==t.success,payload:t.payload,error:t.error,timestamp:Date.now()};e.resolve(n)}}else if("health_pong"===t.type&&t.id){const e=this.responseHandlers.get(t.id);if(e){const n={id:t.id,success:!0,payload:{status:"healthy"},timestamp:Date.now()};e.resolve(n)}}else this.emit(D.MESSAGE,t)}catch(e){this.debug("Failed to handle WebSocket message:",e),this.emit(D.ERROR,e)}}startHeartbeat(){this.heartbeatInterval||(this.heartbeatInterval=setInterval(()=>{if(this.isConnected())try{this.websocket.send(JSON.stringify({type:"ping",timestamp:Date.now()}))}catch(e){this.debug("Failed to send heartbeat:",e)}},this.wsConfig.heartbeatInterval||3e4))}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=void 0)}doHealthCheck(){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("WebSocket not connected");return new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Health check timeout"))},5e3),i=this.generateMessageId(),a={resolve:()=>{clearTimeout(n),e()},reject:e=>{clearTimeout(n),t(e)},timeout:n,timestamp:Date.now()};this.responseHandlers.set(i,a);try{this.websocket.send(JSON.stringify({type:"health_ping",id:i,timestamp:Date.now()}))}catch(e){clearTimeout(n),this.responseHandlers.delete(i),t(e)}})})}getCapabilities(){return{supportsRealtime:!0,supportsBidirectional:!0,supportsFileSystem:!1,supportsStreaming:!0,maxMessageSize:1048576,averageLatency:this.healthStatus.latency,maxConcurrentConnections:1,reliability:this.calculateReliability(),supportedEnvironments:["browser","node","obsidian"]}}}class L{constructor(e=5e3){this.locks=new Set,this.lockTimeout=e}acquireLock(e){return t(this,void 0,void 0,function*(){return new Promise((t,n)=>{const i=()=>{this.locks.has(e)?setTimeout(i,100):(this.locks.add(e),t())};setTimeout(()=>{n(new Error(`Failed to acquire lock for ${e} within ${this.lockTimeout}ms`))},this.lockTimeout),i()})})}releaseLock(e){this.locks.delete(e)}}class _{constructor(){this.watchers=new Map,this.callbacks=new Map}watch(e,n){this.callbacks.set(e,n);const i=setInterval(()=>t(this,void 0,void 0,function*(){try{if(yield this.fileExists(e)){const t=yield this.readFile(e);n(t),this.unwatch(e)}}catch(e){}}),500);this.watchers.set(e,i)}unwatch(e){const t=this.watchers.get(e);t&&(clearInterval(t),this.watchers.delete(e)),this.callbacks.delete(e)}fileExists(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.exists))return window.app.vault.adapter.exists(e);if(void 0!==globalThis.require)try{const t=globalThis.require("fs").promises;return yield t.access(e),!0}catch(e){return!1}return!1})}readFile(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.read))return window.app.vault.adapter.read(e);if(void 0!==globalThis.require){return globalThis.require("fs").promises.readFile(e,"utf-8")}throw new Error("File reading not supported in this environment")})}}class z extends O{constructor(e){super(P.FILESYSTEM,e),this.pendingRequests=new Map,this.messageQueue=[],this.fsConfig=e.filesystem||{watchInterval:500,lockTimeout:5e3,maxQueueSize:100},this.devPipePath=e.devPipePath||"./devpipe",this.fileWatcher=new _,this.lockManager=new L(this.fsConfig.lockTimeout)}doInitialize(){return t(this,void 0,void 0,function*(){if(!C.detect().hasFileSystem)throw new Error("FileSystem transport not supported in this environment");yield this.ensureDirectoryExists(this.devPipePath),this.debug("FileSystem transport initialized")})}connect(){return t(this,void 0,void 0,function*(){try{yield this.doHealthCheck(),this.setupIncomingMessageWatcher(),this.connected=!0,this.healthStatus.status="healthy",this.emit(D.CONNECTED,{transport:this.type}),this.debug("FileSystem transport connected")}catch(e){throw this.emit(D.ERROR,e),e}})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.pendingRequests.values());for(const t of e)clearTimeout(t.timeout),this.fileWatcher.unwatch(t.responseFile),t.reject(new Error("Transport disconnected"));this.pendingRequests.clear(),this.connected=!1,this.healthStatus.status="disconnected",this.emit(D.DISCONNECTED,{transport:this.type}),this.debug("FileSystem transport disconnected")})}send(e){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("FileSystem transport not connected");return e.id||(e.id=this.generateMessageId()),e.timestamp=Date.now(),this.executeWithCircuitBreaker(()=>t(this,void 0,void 0,function*(){return this.sendFileMessage(e)}),"filesystem_send")})}sendFileMessage(e){return t(this,void 0,void 0,function*(){const t=`${this.devPipePath}/request_${e.id}.json`,n=`${this.devPipePath}/response_${e.id}.json`;return new Promise((i,a)=>{const o=setTimeout(()=>{this.pendingRequests.delete(e.id),this.fileWatcher.unwatch(n),a(new Error(`FileSystem request timeout after ${this.config.timeout}ms`))},this.config.timeout),s={id:e.id,message:e,resolve:t=>{clearTimeout(o),this.pendingRequests.delete(e.id),this.fileWatcher.unwatch(n),i(t)},reject:t=>{clearTimeout(o),this.pendingRequests.delete(e.id),this.fileWatcher.unwatch(n),a(t)},timeout:o,timestamp:Date.now(),requestFile:t,responseFile:n};this.pendingRequests.set(e.id,s),this.fileWatcher.watch(n,e=>{try{const t=JSON.parse(e),n={id:t.id,success:!1!==t.success,payload:t.payload,error:t.error,timestamp:Date.now()};s.resolve(n)}catch(e){s.reject(new Error("Failed to parse response file"))}}),this.writeRequestFile(t,e,s)})})}writeRequestFile(e,n,i){return t(this,void 0,void 0,function*(){try{yield this.lockManager.acquireLock(e),yield this.writeFile(e,JSON.stringify(n,null,2)),this.lockManager.releaseLock(e)}catch(t){this.lockManager.releaseLock(e),i.reject(t instanceof Error?t:new Error("Failed to write request file"))}})}setupIncomingMessageWatcher(){this.debug("Incoming message watcher setup completed")}ensureDirectoryExists(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.mkdir))try{yield window.app.vault.adapter.mkdir(e)}catch(e){}else if(void 0!==globalThis.require)try{const t=globalThis.require("fs").promises;yield t.mkdir(e,{recursive:!0})}catch(e){}})}writeFile(e,n){return t(this,void 0,void 0,function*(){var t,i,a;if("undefined"!=typeof window&&(null===(a=null===(i=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===i?void 0:i.adapter)||void 0===a?void 0:a.write))return window.app.vault.adapter.write(e,n);if(void 0!==globalThis.require){return globalThis.require("fs").promises.writeFile(e,n,"utf-8")}throw new Error("File writing not supported in this environment")})}readFile(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.read))return window.app.vault.adapter.read(e);if(void 0!==globalThis.require){return globalThis.require("fs").promises.readFile(e,"utf-8")}throw new Error("File reading not supported in this environment")})}doHealthCheck(){return t(this,void 0,void 0,function*(){const e=`${this.devPipePath}/health_check_${Date.now()}.tmp`;try{yield this.writeFile(e,"health_check");if("health_check"!==(yield this.readFile(e)))throw new Error("File content mismatch during health check");yield this.deleteFile(e)}catch(e){throw new Error(`FileSystem health check failed: ${e instanceof Error?e.message:"Unknown error"}`)}})}deleteFile(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.remove))try{yield window.app.vault.adapter.remove(e)}catch(e){}else if(void 0!==globalThis.require)try{const t=globalThis.require("fs").promises;yield t.unlink(e)}catch(e){}})}getCapabilities(){return{supportsRealtime:!1,supportsBidirectional:!0,supportsFileSystem:!0,supportsStreaming:!1,maxMessageSize:10485760,averageLatency:this.healthStatus.latency,maxConcurrentConnections:1,reliability:this.calculateReliability(),supportedEnvironments:["node","obsidian"]}}}class q{constructor(){this.metrics=new Map,this.latencyHistory=new Map,this.MAX_HISTORY_SIZE=100}recordLatency(e,t){const n=this.getOrCreateMetrics(e),i=this.getOrCreateHistory(e);i.push(t),i.length>this.MAX_HISTORY_SIZE&&i.shift(),n.averageLatency=i.reduce((e,t)=>e+t,0)/i.length,n.minLatency=Math.min(n.minLatency,t),n.maxLatency=Math.max(n.maxLatency,t),n.lastActivity=Date.now()}recordSuccess(e){const t=this.getOrCreateMetrics(e);t.totalRequests++,t.successfulRequests++,t.lastActivity=Date.now()}recordFailure(e,t){const n=this.getOrCreateMetrics(e);n.totalRequests++,n.failedRequests++,n.lastActivity=Date.now()}getMetrics(e){return this.getOrCreateMetrics(e)}getOrCreateMetrics(e){return this.metrics.has(e)||this.metrics.set(e,{totalRequests:0,successfulRequests:0,failedRequests:0,averageLatency:0,minLatency:1/0,maxLatency:0,uptime:0,lastActivity:Date.now()}),this.metrics.get(e)}getOrCreateHistory(e){return this.latencyHistory.has(e)||this.latencyHistory.set(e,[]),this.latencyHistory.get(e)}}class H{constructor(e){this.schedules=new Map,this.eventListeners=new Map,this.metricsCollector=e||new q}startMonitoring(e,t=3e4){const n={transport:e,interval:t,lastCheck:0,consecutiveFailures:0};this.schedules.set(e.id,n),e.on(D.HEALTH_CHECK,t=>{t.success?(this.metricsCollector.recordLatency(e.type,t.latency),this.metricsCollector.recordSuccess(e.type),n.consecutiveFailures=0):(this.metricsCollector.recordFailure(e.type,new Error(t.error||"Health check failed")),n.consecutiveFailures++),this.emit("health-updated",this.assessTransportHealth(e))}),this.monitoringInterval||this.startPeriodicChecks()}stopMonitoring(e){this.schedules.delete(e.id),0===this.schedules.size&&this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=void 0)}assessTransportHealth(e){const t=this.metricsCollector.getMetrics(e.type),n=e.getHealthStatus();e.getCapabilities();const i=this.calculateAvailabilityScore(e),a=this.calculateLatencyScore(n.latency),o=this.calculateReliabilityScore(t),s=this.calculateErrorRateScore(t),r=.3*i+.25*a+.3*o+.15*s;let l,c;return l=r>=.9?"excellent":r>=.7?"good":r>=.5?"fair":r>=.3?"poor":"failing",c=r>=.7?"use":r>=.4?"monitor":"avoid",{transport:e.type,score:r,status:l,metrics:{availability:i,latency:a,reliability:o,errorRate:1-s},recommendation:c}}calculateAvailabilityScore(e){if(!e.isAvailable())return 0;if(!e.isConnected())return.3;const t=this.schedules.get(e.id);if(!t)return.8;const n=Math.min(.1*t.consecutiveFailures,.5);return Math.max(1-n,0)}calculateLatencyScore(e){return e<=50?1:e<=200?.8:e<=1e3?.6:Math.max(.2,1-e/5e3)}calculateReliabilityScore(e){if(0===e.totalRequests)return.5;return e.successfulRequests/e.totalRequests}calculateErrorRateScore(e){if(0===e.totalRequests)return 1;const t=e.failedRequests/e.totalRequests;return Math.max(0,1-t)}startPeriodicChecks(){this.monitoringInterval=setInterval(()=>{const e=Date.now(),t=Array.from(this.schedules.values());for(const n of t)e-n.lastCheck>=n.interval&&(n.lastCheck=e,n.transport.performHealthCheck().catch(e=>{}))},5e3)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(n=>{try{n(t)}catch(t){console.error(`Error in health monitor event listener for ${e}:`,t)}})}getMetricsCollector(){return this.metricsCollector}}class W{constructor(e){this.criteria=e}calculateScore(e,n){return t(this,void 0,void 0,function*(){const t=e.getCapabilities(),i=e.getHealthStatus();let a=.5;(null==n?void 0:n.requiresRealtime)&&t.supportsRealtime&&(a+=.3),(null==n?void 0:n.maxLatency)&&t.averageLatency<=n.maxLatency&&(a+=.2),a=Math.min(a,1);const o=Math.max(0,1-t.averageLatency/5e3),s=t.reliability;let r=1;e.type===P.HTTP?r=.8:e.type===P.WEBSOCKET?r=.9:e.type===P.FILESYSTEM&&(r=1);let l=1;e.isAvailable()?e.isConnected()?"failing"===i.status?l=.1:"degraded"===i.status&&(l=.5):l=.3:l=0;const c=(o*this.criteria.latencyWeight+s*this.criteria.reliabilityWeight+a*this.criteria.capabilityWeight+r*this.criteria.costWeight)*l;return Math.max(0,Math.min(1,c))})}selectBest(e,n){return new Promise(i=>t(this,void 0,void 0,function*(){if(0===e.length)return void i(null);const a=yield Promise.all(e.map(e=>t(this,void 0,void 0,function*(){return{transport:e,score:yield this.calculateScore(e,n)}})));a.sort((e,t)=>t.score-e.score),i(a[0].transport)}))}}class j{constructor(e){this.transports=new Map,this.eventListeners=new Map,this.failoverInProgress=!1,this.config=e,this.fallbackChain=e.fallbackChain||[P.WEBSOCKET,P.HTTP,P.FILESYSTEM],this.healthMonitor=new H,this.selector=new W(e.selectionCriteria),this.initializeTransports(),this.setupHealthMonitoring()}initializeTransports(){return t(this,void 0,void 0,function*(){const e=C.detect(),t=new $(this.config.transportConfigs.http);if(yield t.initialize(this.config.transportConfigs.http),this.transports.set(P.HTTP,t),e.hasWebSocket&&this.config.transportConfigs.websocket){const e=new V(this.config.transportConfigs.websocket);yield e.initialize(this.config.transportConfigs.websocket),this.transports.set(P.WEBSOCKET,e)}if(e.hasFileSystem&&this.config.transportConfigs.filesystem){const e=new z(this.config.transportConfigs.filesystem);yield e.initialize(this.config.transportConfigs.filesystem),this.transports.set(P.FILESYSTEM,e)}const n=Array.from(this.transports.values());for(const e of n)this.setupTransportEventHandlers(e);this.debug(`Initialized ${this.transports.size} transports`)})}setupTransportEventHandlers(e){e.on(D.CONNECTED,()=>{this.debug(`Transport ${e.type} connected`),this.emit("transport_connected",{transport:e.type})}),e.on(D.DISCONNECTED,()=>{this.debug(`Transport ${e.type} disconnected`),this.emit("transport_disconnected",{transport:e.type}),this.activeTransport===e&&!1!==this.config.autoFailover&&this.handleTransportFailure(e)}),e.on(D.ERROR,t=>{this.debug(`Transport ${e.type} error:`,t),this.emit("transport_error",{transport:e.type,error:t})}),e.on(D.MESSAGE,e=>{this.emit("message",e)})}setupHealthMonitoring(){const e=Array.from(this.transports.values());for(const t of e)this.healthMonitor.startMonitoring(t,this.config.healthCheckInterval||3e4);this.healthMonitor.on("health-updated",e=>{var t;this.emit("health_updated",e),(null===(t=this.activeTransport)||void 0===t?void 0:t.type)!==e.transport||"avoid"!==e.recommendation||this.failoverInProgress||this.selectOptimalTransport()})}selectOptimalTransport(e){return t(this,void 0,void 0,function*(){const t=Array.from(this.transports.values()).filter(e=>e.isAvailable());if(0===t.length)throw new Error("No available transports");const n=yield this.selector.selectBest(t,e);if(!n)throw new Error("No suitable transport found");return this.activeTransport!==n&&(yield this.switchTransport(n,"optimization")),n})}switchTransport(e,n){return t(this,void 0,void 0,function*(){const t=this.activeTransport;try{this.debug(`Switching transport from ${(null==t?void 0:t.type)||"none"} to ${e.type} (${n})`),e.isConnected()||(yield e.connect()),this.activeTransport=e,t&&t!==e&&t.disconnect().catch(e=>{this.debug(`Error disconnecting old transport ${t.type}:`,e)}),this.emit("transport_switched",{from:null==t?void 0:t.type,to:e.type,reason:n})}catch(e){throw t&&t.isConnected()&&(this.activeTransport=t),e}})}handleTransportFailure(e){return t(this,void 0,void 0,function*(){if(!this.failoverInProgress){this.failoverInProgress=!0;try{this.debug(`Handling failure of transport ${e.type}`),this.emit("transport_failed",{transport:e.type,timestamp:Date.now()});for(const t of this.fallbackChain){if(t===e.type)continue;const n=this.transports.get(t);if(n&&n.isAvailable())try{return yield this.switchTransport(n,"failover"),void this.debug(`Successfully failed over to ${t}`)}catch(e){this.debug(`Failover to ${t} failed:`,e);continue}}throw new Error("All transports failed")}finally{this.failoverInProgress=!1}}})}send(e,n){return t(this,void 0,void 0,function*(){if(this.activeTransport||(yield this.selectOptimalTransport(n)),!this.activeTransport)throw new Error("No active transport available");try{return yield this.activeTransport.send(e)}catch(t){if(this.debug(`Send failed on ${this.activeTransport.type}, attempting failover`),yield this.handleTransportFailure(this.activeTransport),this.activeTransport)return yield this.activeTransport.send(e);throw t}})}connect(){return t(this,void 0,void 0,function*(){yield this.selectOptimalTransport()})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.transports.values()).map(e=>e.disconnect().catch(t=>{this.debug(`Error disconnecting transport ${e.type}:`,t)}));yield Promise.all(e),this.activeTransport=void 0})}getActiveTransport(){return this.activeTransport}getAvailableTransports(){return Array.from(this.transports.values()).filter(e=>e.isAvailable())}getTransportHealth(){const e=new Map,t=Array.from(this.transports.values());for(const n of t)e.set(n.type,this.healthMonitor.assessTransportHealth(n));return e}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(n=>{try{n(t)}catch(t){this.debug(`Error in transport manager event listener for ${e}:`,t)}})}debug(e,...t){this.config.debug&&console.log(`[TransportManager] ${e}`,...t)}}!function(e){e[e.WELCOME=0]="WELCOME",e[e.ENVIRONMENT_DETECTION=1]="ENVIRONMENT_DETECTION",e[e.PREFERENCES=2]="PREFERENCES",e[e.VALIDATION=3]="VALIDATION",e[e.COMPLETION=4]="COMPLETION"}(A||(A={}));class U extends e.Modal{constructor(e,t,n={}){super(e),this.currentStep=0,this.totalSteps=5,this.stepElements=[],this.plugin=t,this.config=n;const i={selectionCriteria:{latencyWeight:.3,reliabilityWeight:.4,capabilityWeight:.2,costWeight:.1},fallbackChain:[P.HTTP,P.WEBSOCKET,P.FILESYSTEM],transportConfigs:{http:{serverUrl:t.settings.backendUrl,timeout:3e4,retryAttempts:3,debug:t.settings.debugMode}}};this.transportManager=new j(i),this.progress={currentStep:0,totalSteps:this.totalSteps,completedSteps:new Array(this.totalSteps).fill(!1),userPreferences:{enableRealTimeUpdates:!0,performanceMode:"balanced",enableAnalytics:!0}},this.modalEl.addClass("vaultpilot-onboarding")}onOpen(){return t(this,void 0,void 0,function*(){const{contentEl:e}=this;e.empty(),this.modalEl.addClass("vaultpilot-onboarding-modal"),this.createHeader(),this.createProgressBar(),e.createDiv("onboarding-step-container"),this.createNavigation(),yield this.renderCurrentStep()})}createHeader(){const{contentEl:e}=this,t=e.createDiv("onboarding-header");t.createEl("h2",{text:"Welcome to VaultPilot"}),t.createEl("p",{text:"Let's set up your optimal configuration for the best experience",cls:"onboarding-subtitle"})}createProgressBar(){const{contentEl:e}=this,t=e.createDiv("onboarding-progress"),n=t.createDiv("progress-steps");for(let e=0;e<this.totalSteps;e++){const t=n.createDiv("progress-step");t.addClass(0===e?"active":"inactive"),t.createSpan({text:(e+1).toString()}),this.stepElements.push(t)}this.progressBar=t.createDiv("progress-bar");this.progressBar.createDiv("progress-fill").style.width=1/this.totalSteps*100+"%"}createNavigation(){const{contentEl:t}=this,n=t.createDiv("onboarding-navigation");this.previousButton=new e.ButtonComponent(n).setButtonText("Previous").setClass("mod-muted").onClick(()=>this.previousStep()),this.skipButton=new e.ButtonComponent(n).setButtonText("Skip Setup").setClass("mod-muted").onClick(()=>this.skipOnboarding()),this.nextButton=new e.ButtonComponent(n).setButtonText("Next").setCta().onClick(()=>this.nextStep()),this.updateNavigationState()}renderCurrentStep(){return t(this,void 0,void 0,function*(){const{contentEl:e}=this,t=e.querySelector(".onboarding-step-container");switch(t.empty(),this.updateProgressIndicators(),this.currentStep){case A.WELCOME:yield this.renderWelcomeStep(t);break;case A.ENVIRONMENT_DETECTION:yield this.renderEnvironmentStep(t);break;case A.PREFERENCES:yield this.renderPreferencesStep(t);break;case A.VALIDATION:yield this.renderValidationStep(t);break;case A.COMPLETION:yield this.renderCompletionStep(t)}this.updateNavigationState()})}renderWelcomeStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step welcome-step");t.createEl("h3",{text:"Welcome to VaultPilot"}),t.createEl("p",{text:"VaultPilot provides intelligent transport management and optimization for your Obsidian experience. This wizard will help you configure the optimal settings for your environment."});const n=t.createDiv("welcome-features");n.createEl("h4",{text:"What you'll get:"});const i=n.createEl("ul");i.createEl("li",{text:"ðŸš€ Intelligent transport selection and failover"}),i.createEl("li",{text:"ðŸ“Š Real-time performance monitoring"}),i.createEl("li",{text:"ðŸ’¡ AI-powered optimization suggestions"}),i.createEl("li",{text:"ðŸ”§ Advanced configuration options"}),i.createEl("li",{text:"ðŸ“ˆ Usage analytics and insights"});t.createDiv("estimated-time").createEl("p",{text:"â±ï¸ Estimated setup time: 2-3 minutes",cls:"muted"})})}renderEnvironmentStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step environment-step");if(t.createEl("h3",{text:"Environment Detection"}),t.createEl("p",{text:"Analyzing your environment to recommend optimal transport configuration..."}),this.config.skipEnvironmentDetection||this.progress.detectedCapabilities)this.progress.detectedCapabilities&&this.renderEnvironmentResults(t);else{t.createDiv("detection-status").createEl("p",{text:"ðŸ” Detecting capabilities...",cls:"detection-loading"});try{this.progress.detectedCapabilities=yield this.detectEnvironment(),this.renderEnvironmentResults(t)}catch(e){this.renderEnvironmentError(t,e)}}})}detectEnvironment(){return t(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,1e3));const e=C.detect();let t="obsidian";"browser"!==e.platform&&"node"!==e.platform&&"obsidian"!==e.platform||(t=e.platform);const n={platform:t,webSocketSupported:e.hasWebSocket,fileSystemAccess:e.hasFileSystem,httpCapabilities:e.hasHTTP,recommendedTransport:"http",performanceEstimate:"good"};return n.webSocketSupported&&n.httpCapabilities?(n.recommendedTransport="websocket",n.performanceEstimate="excellent"):n.httpCapabilities?(n.recommendedTransport="http",n.performanceEstimate="good"):n.fileSystemAccess&&(n.recommendedTransport="filesystem",n.performanceEstimate="fair"),n})}renderEnvironmentResults(e){const t=e.createDiv("environment-results"),n=this.progress.detectedCapabilities;t.createEl("h4",{text:"âœ… Detection Complete"});const i=t.createDiv("capabilities-list"),a=i.createDiv("capability-item");a.createSpan({text:n.webSocketSupported?"âœ…":"âŒ",cls:"capability-icon"}),a.createSpan({text:"WebSocket Support"});const o=i.createDiv("capability-item");o.createSpan({text:n.httpCapabilities?"âœ…":"âŒ",cls:"capability-icon"}),o.createSpan({text:"HTTP Transport"});const s=i.createDiv("capability-item");s.createSpan({text:n.fileSystemAccess?"âœ…":"âŒ",cls:"capability-icon"}),s.createSpan({text:"FileSystem Access"});const r=t.createDiv("environment-recommendation");r.createEl("h4",{text:"Recommendation"}),r.createEl("p",{text:`Based on your environment, we recommend using ${n.recommendedTransport} transport for ${n.performanceEstimate} performance.`})}renderEnvironmentError(e,t){const n=e.createDiv("environment-error");n.createEl("h4",{text:"âš ï¸ Detection Failed"}),n.createEl("p",{text:"Unable to automatically detect your environment capabilities. You can proceed with default settings or manually configure later."}),this.plugin.settings.debugMode&&n.createEl("p",{text:`Error: ${t.message}`,cls:"error-details"})}renderPreferencesStep(n){return t(this,void 0,void 0,function*(){const t=n.createDiv("onboarding-step preferences-step");t.createEl("h3",{text:"Performance Preferences"}),t.createEl("p",{text:"Configure your preferences for optimal performance:"});const i=t.createDiv("preferences-container");new e.Setting(i).setName("Performance Mode").setDesc("Choose your preferred balance between speed and reliability").addDropdown(e=>{e.addOption("performance","Performance (Prioritize Speed)"),e.addOption("balanced","Balanced (Recommended)"),e.addOption("reliability","Reliability (Prioritize Stability)"),e.setValue(this.progress.userPreferences.performanceMode),e.onChange(e=>{this.progress.userPreferences.performanceMode=e})}),new e.Setting(i).setName("Real-time Updates").setDesc("Enable real-time dashboard updates and live monitoring").addToggle(e=>{e.setValue(this.progress.userPreferences.enableRealTimeUpdates),e.onChange(e=>{this.progress.userPreferences.enableRealTimeUpdates=e})}),new e.Setting(i).setName("Usage Analytics").setDesc("Enable anonymous usage analytics to improve recommendations").addToggle(e=>{e.setValue(this.progress.userPreferences.enableAnalytics),e.onChange(e=>{this.progress.userPreferences.enableAnalytics=e})})})}renderValidationStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step validation-step");if(t.createEl("h3",{text:"Configuration Validation"}),t.createEl("p",{text:"Testing your configuration and establishing performance baseline..."}),this.config.skipValidation||this.progress.validationResults)this.progress.validationResults&&this.renderValidationResults(t);else{t.createDiv("validation-status").createEl("p",{text:"ðŸ§ª Running validation tests...",cls:"validation-loading"});try{this.progress.validationResults=yield this.validateConfiguration(),this.renderValidationResults(t)}catch(e){this.renderValidationError(t,e)}}})}validateConfiguration(){return t(this,void 0,void 0,function*(){var e,t;yield new Promise(e=>setTimeout(e,2e3));const n={transportsWorking:["http"],transportsFailing:[],recommendedConfiguration:{},performanceBaseline:{avgResponseTime:150,reliability:.98,throughput:1e3}};return(null===(e=this.progress.detectedCapabilities)||void 0===e?void 0:e.webSocketSupported)&&n.transportsWorking.push("websocket"),(null===(t=this.progress.detectedCapabilities)||void 0===t?void 0:t.fileSystemAccess)&&n.transportsWorking.push("filesystem"),n})}renderValidationResults(e){const t=e.createDiv("validation-results"),n=this.progress.validationResults;t.createEl("h4",{text:"âœ… Validation Complete"});const i=t.createDiv("working-transports");i.createEl("h5",{text:"Working Transports:"});const a=i.createEl("ul");n.transportsWorking.forEach(e=>{a.createEl("li",{text:`âœ… ${e.toUpperCase()}`})});const o=t.createDiv("performance-baseline");o.createEl("h5",{text:"Performance Baseline:"});const s=o.createEl("ul");s.createEl("li",{text:`Average Response Time: ${n.performanceBaseline.avgResponseTime}ms`}),s.createEl("li",{text:`Reliability: ${(100*n.performanceBaseline.reliability).toFixed(1)}%`}),s.createEl("li",{text:`Throughput: ${n.performanceBaseline.throughput} requests/min`})}renderValidationError(e,t){const n=e.createDiv("validation-error");n.createEl("h4",{text:"âš ï¸ Validation Issues"}),n.createEl("p",{text:"Some validation tests failed, but you can still proceed. You can adjust settings later if needed."}),this.plugin.settings.debugMode&&n.createEl("p",{text:`Error: ${t.message}`,cls:"error-details"})}renderCompletionStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step completion-step");t.createEl("h3",{text:"ðŸŽ‰ Setup Complete!"}),t.createEl("p",{text:"VaultPilot has been configured with your optimal settings."});const n=t.createDiv("setup-summary");n.createEl("h4",{text:"Configuration Summary:"});const i=n.createEl("ul");i.createEl("li",{text:`Performance Mode: ${this.progress.userPreferences.performanceMode}`}),i.createEl("li",{text:"Real-time Updates: "+(this.progress.userPreferences.enableRealTimeUpdates?"Enabled":"Disabled")}),i.createEl("li",{text:"Analytics: "+(this.progress.userPreferences.enableAnalytics?"Enabled":"Disabled")}),this.progress.detectedCapabilities&&i.createEl("li",{text:`Recommended Transport: ${this.progress.detectedCapabilities.recommendedTransport}`});const a=t.createDiv("next-steps");a.createEl("h4",{text:"What's Next:"});const o=a.createEl("ul");o.createEl("li",{text:"ðŸ“Š Check the dashboard for real-time status"}),o.createEl("li",{text:"âš™ï¸ Adjust advanced settings as needed"}),o.createEl("li",{text:"ðŸ’¡ Review AI-powered recommendations"}),o.createEl("li",{text:"ðŸ“ˆ Monitor performance analytics"})})}updateProgressIndicators(){this.stepElements.forEach((e,t)=>{e.removeClass("active","completed","inactive"),t<this.currentStep?e.addClass("completed"):t===this.currentStep?e.addClass("active"):e.addClass("inactive")});const e=this.progressBar.querySelector(".progress-fill");if(e){const t=(this.currentStep+1)/this.totalSteps*100;e.style.width=`${t}%`}}updateNavigationState(){this.previousButton.setDisabled(0===this.currentStep),this.currentStep===this.totalSteps-1?this.nextButton.setButtonText("Finish"):this.nextButton.setButtonText("Next"),this.currentStep===this.totalSteps-1?this.skipButton.buttonEl.style.display="none":this.skipButton.buttonEl.style.display=""}nextStep(){return t(this,void 0,void 0,function*(){this.currentStep<this.totalSteps-1?(this.progress.completedSteps[this.currentStep]=!0,this.currentStep++,yield this.renderCurrentStep()):yield this.finishOnboarding()})}previousStep(){return t(this,void 0,void 0,function*(){this.currentStep>0&&(this.currentStep--,yield this.renderCurrentStep())})}skipOnboarding(){return t(this,void 0,void 0,function*(){confirm("Are you sure you want to skip the setup wizard? You can access these settings later in the plugin settings.")&&(yield this.finishOnboarding(!0))})}finishOnboarding(){return t(this,arguments,void 0,function*(t=!1){try{t?new e.Notice("âš ï¸ Onboarding skipped - using default settings"):(yield this.applyConfiguration(),new e.Notice("âœ… VaultPilot configuration applied successfully!")),this.plugin.settings.onboardingComplete=!0,yield this.plugin.saveSettings(),this.close()}catch(t){console.error("Failed to apply onboarding configuration:",t),new e.Notice("âŒ Failed to apply configuration. Please check settings manually.")}})}applyConfiguration(){return t(this,void 0,void 0,function*(){const e=this.progress.userPreferences;if(this.plugin.settings.performanceMode=e.performanceMode,this.plugin.settings.enableRealTimeUpdates=e.enableRealTimeUpdates,this.plugin.settings.enableAnalytics=e.enableAnalytics,this.progress.detectedCapabilities){const t=this.progress.detectedCapabilities,n={selectionCriteria:this.getSelectionCriteriaForMode(e.performanceMode),fallbackChain:this.buildFallbackChain(t),transportConfigs:{http:{baseUrl:this.plugin.settings.backendUrl},websocket:t.webSocketSupported?{url:this.plugin.settings.webSocketUrl}:void 0,filesystem:t.fileSystemAccess?{basePath:".vaultpilot"}:void 0},autoFailover:!0,debug:this.plugin.settings.debugMode};this.plugin.settings.transportConfig=n}yield this.plugin.saveSettings()})}getSelectionCriteriaForMode(e){switch(e){case"performance":return{latencyWeight:.6,reliabilityWeight:.2,capabilityWeight:.1,costWeight:.1};case"reliability":return{latencyWeight:.1,reliabilityWeight:.6,capabilityWeight:.2,costWeight:.1};default:return{latencyWeight:.3,reliabilityWeight:.3,capabilityWeight:.2,costWeight:.2}}}buildFallbackChain(e){const t=[];return e.webSocketSupported&&t.push("websocket"),e.httpCapabilities&&t.push("http"),e.fileSystemAccess&&t.push("filesystem"),t}onClose(){const{contentEl:e}=this;e.empty()}}class B extends e.Component{constructor(e,t,n={updateInterval:2e3,showAdvancedMetrics:!0,enableRealTimeUpdates:!0}){super(),this.statusCards=new Map,this.isRealTimeEnabled=!0,this.containerEl=e,this.plugin=t,this.config=n,this.isRealTimeEnabled=n.enableRealTimeUpdates}onload(){return t(this,void 0,void 0,function*(){this.initializeDashboard(),this.isRealTimeEnabled&&(this.startRealTimeUpdates(),this.setupEventListeners()),yield this.updateDashboard()})}onunload(){this.stopRealTimeUpdates(),this.removeEventListeners()}initializeDashboard(){this.containerEl.empty(),this.containerEl.addClass("transport-dashboard"),this.createHeader(),this.createSystemHealthSection(),this.createTransportStatusSection(),this.createPerformanceMetricsSection(),this.createChartsSection(),this.createControlsSection()}createHeader(){const e=this.containerEl.createDiv("dashboard-header");e.createEl("h2",{text:"Transport Dashboard"});const t=e.createDiv("last-update");t.createSpan({text:"Last updated: ",cls:"label"});t.createSpan({cls:"timestamp"}).textContent=(new Date).toLocaleTimeString();const n=e.createDiv("realtime-indicator");this.isRealTimeEnabled?n.createSpan({text:"ðŸŸ¢ Real-time",cls:"realtime-active"}):n.createSpan({text:"âšª Manual refresh",cls:"realtime-inactive"})}createSystemHealthSection(){const e=this.containerEl.createDiv("system-health-section");e.createEl("h3",{text:"System Health"}),this.systemHealthContainer=e.createDiv("system-health-container"),this.renderSystemHealthPlaceholder()}createTransportStatusSection(){const e=this.containerEl.createDiv("transport-status-section");e.createEl("h3",{text:"Transport Status"});const t=e.createDiv("transport-cards-container");[P.HTTP,P.WEBSOCKET,P.FILESYSTEM].forEach(e=>{const n=this.createTransportCard(t,e);this.statusCards.set(e,n)})}createTransportCard(e,t){const n=e.createDiv("transport-status-card");n.addClass(`transport-${t}`),n.addClass("status-unknown");const i=n.createDiv("card-header");i.createEl("h4",{text:t.toUpperCase()});i.createDiv("status-badge").textContent="Unknown";const a=n.createDiv("card-metrics"),o=a.createDiv("metric");o.createSpan({text:"Response Time",cls:"metric-label"}),o.createSpan({text:"--",cls:"metric-value response-time"});const s=a.createDiv("metric");s.createSpan({text:"Success Rate",cls:"metric-label"}),s.createSpan({text:"--",cls:"metric-value success-rate"});const r=a.createDiv("metric");r.createSpan({text:"Errors",cls:"metric-label"}),r.createSpan({text:"--",cls:"metric-value error-count"});n.createDiv("connection-state").createSpan({text:"Disconnected",cls:"connection-status"});const l=n.createDiv("card-actions");l.createEl("button",{text:"Test",cls:"mod-muted"}).onclick=()=>this.testTransport(t);return l.createEl("button",{text:"Switch To",cls:"mod-cta"}).onclick=()=>this.switchToTransport(t),n}createPerformanceMetricsSection(){const e=this.containerEl.createDiv("performance-metrics-section");e.createEl("h3",{text:"Performance Metrics"}),this.metricsContainer=e.createDiv("metrics-container"),this.renderPerformanceMetricsPlaceholder()}createChartsSection(){const e=this.containerEl.createDiv("charts-section");e.createEl("h3",{text:"Performance Trends"}),this.chartsContainer=e.createDiv("charts-container"),this.renderChartsPlaceholder()}createControlsSection(){const e=this.containerEl.createDiv("controls-section").createDiv("dashboard-controls");e.createEl("button",{text:"ðŸ”„ Refresh",cls:"mod-cta"}).onclick=()=>this.manualRefresh();e.createEl("button",{text:"ðŸ“Š Export Data",cls:"mod-muted"}).onclick=()=>this.exportData();e.createEl("button",{text:"âš™ï¸ Settings",cls:"mod-muted"}).onclick=()=>this.openDashboardSettings();const t=e.createDiv("realtime-toggle");t.createSpan({text:"Real-time updates: "});const n=t.createEl("input",{type:"checkbox"});n.checked=this.isRealTimeEnabled,n.onchange=()=>this.toggleRealTimeUpdates(n.checked)}updateDashboard(){return t(this,void 0,void 0,function*(){try{this.currentHealth=yield this.getSystemHealth(),this.renderSystemHealth(this.currentHealth),yield this.updateTransportStatuses(),this.currentMetrics=yield this.getPerformanceMetrics(),this.renderPerformanceMetrics(this.currentMetrics),this.updateTimestamp()}catch(e){console.error("Failed to update dashboard:",e),this.renderError("Failed to update dashboard data")}})}getSystemHealth(){return t(this,void 0,void 0,function*(){this.transportManager;const e={overall:"good",activeTransport:"http",availableTransports:["http","websocket"],lastHealthCheck:new Date,uptime:Date.now()-this.plugin.app.vault.adapter.started||0,totalRequests:Math.floor(1e4*Math.random()),totalErrors:Math.floor(100*Math.random())},t=e.totalErrors/e.totalRequests;return e.overall=t<.01?"excellent":t<.05?"good":t<.1?"fair":t<.2?"poor":"critical",e})}getPerformanceMetrics(){return t(this,void 0,void 0,function*(){return{averageResponseTime:150+100*Math.random(),p95ResponseTime:300+200*Math.random(),requestsPerMinute:100+50*Math.random(),errorRate:.05*Math.random(),transportDistribution:{http:.7,websocket:.25,filesystem:.05},trends:{responseTime:this.generateTrendData(150,20),errorRate:this.generateTrendData(.02,.01),throughput:this.generateTrendData(100,20),timestamps:this.generateTimestamps(20)}}})}generateTrendData(e,t,n=20){const i=[];for(let a=0;a<n;a++)i.push(e+(Math.random()-.5)*t*2);return i}generateTimestamps(e){const t=[],n=new Date;for(let i=e-1;i>=0;i--)t.push(new Date(n.getTime()-6e4*i));return t}updateTransportStatuses(){return t(this,void 0,void 0,function*(){const e=[P.HTTP,P.WEBSOCKET,P.FILESYSTEM];for(const t of e){const e=yield this.getTransportStatus(t);this.updateTransportCard(t,e)}})}getTransportStatus(e){return t(this,void 0,void 0,function*(){const t=Math.random()>.2,n=100+200*Math.random(),i=.9+.1*Math.random(),a={type:e,status:t?i>.95?"healthy":"degraded":"disconnected",lastResponseTime:n,successRate:i,errorCount:Math.floor(10*Math.random()),capabilities:this.getTransportCapabilities(e),connectionState:t?"connected":"disconnected"};return t||(a.lastError="Connection timeout"),a})}getTransportCapabilities(e){switch(e){case P.HTTP:return["RESTful API","Connection Pooling","Retry Logic"];case P.WEBSOCKET:return["Real-time","Bidirectional","Auto-reconnect"];case P.FILESYSTEM:return["Local Storage","File Locking","Offline Support"];default:return[]}}updateTransportCard(e,t){const n=this.statusCards.get(e);if(!n)return;n.className=`transport-status-card transport-${e} status-${t.status}`;n.querySelector(".status-badge").textContent=t.status.charAt(0).toUpperCase()+t.status.slice(1);n.querySelector(".response-time").textContent=`${t.lastResponseTime.toFixed(0)}ms`;n.querySelector(".success-rate").textContent=`${(100*t.successRate).toFixed(1)}%`;n.querySelector(".error-count").textContent=t.errorCount.toString();const i=n.querySelector(".connection-status");i.textContent=t.connectionState.charAt(0).toUpperCase()+t.connectionState.slice(1),i.className=`connection-status state-${t.connectionState}`;n.querySelector(".mod-cta").disabled="failing"===t.status||"disconnected"===t.connectionState}renderSystemHealth(e){this.systemHealthContainer.empty();const t=this.systemHealthContainer.createDiv("health-grid"),n=t.createDiv("health-item overall-health");n.addClass(`health-${e.overall}`),n.createEl("h4",{text:"Overall Health"}),n.createEl("span",{text:e.overall.charAt(0).toUpperCase()+e.overall.slice(1),cls:"health-value"});const i=t.createDiv("health-item");i.createEl("h4",{text:"Active Transport"}),i.createEl("span",{text:e.activeTransport.toUpperCase(),cls:"health-value"});const a=t.createDiv("health-item");a.createEl("h4",{text:"Uptime"}),a.createEl("span",{text:this.formatUptime(e.uptime),cls:"health-value"});const o=t.createDiv("health-item");o.createEl("h4",{text:"Total Requests"}),o.createEl("span",{text:e.totalRequests.toLocaleString(),cls:"health-value"});const s=t.createDiv("health-item");s.createEl("h4",{text:"Error Rate"});const r=e.totalErrors/e.totalRequests*100;s.createEl("span",{text:`${r.toFixed(2)}%`,cls:"health-value"})}renderPerformanceMetrics(e){this.metricsContainer.empty();const t=this.metricsContainer.createDiv("metrics-grid"),n=t.createDiv("metric-item");n.createEl("h4",{text:"Avg Response Time"}),n.createEl("span",{text:`${e.averageResponseTime.toFixed(0)}ms`,cls:"metric-value"});const i=t.createDiv("metric-item");i.createEl("h4",{text:"P95 Response Time"}),i.createEl("span",{text:`${e.p95ResponseTime.toFixed(0)}ms`,cls:"metric-value"});const a=t.createDiv("metric-item");a.createEl("h4",{text:"Requests/Min"}),a.createEl("span",{text:e.requestsPerMinute.toFixed(0),cls:"metric-value"});const o=t.createDiv("metric-item");o.createEl("h4",{text:"Error Rate"}),o.createEl("span",{text:`${(100*e.errorRate).toFixed(2)}%`,cls:"metric-value"});const s=this.metricsContainer.createDiv("transport-distribution");s.createEl("h4",{text:"Transport Usage Distribution"});const r=s.createDiv("distribution-bars");Object.entries(e.transportDistribution).forEach(([e,t])=>{const n=r.createDiv("distribution-bar");n.createSpan({text:e.toUpperCase(),cls:"transport-label"});n.createDiv("bar-container").createDiv("bar-fill").style.width=100*t+"%",n.createSpan({text:`${(100*t).toFixed(1)}%`,cls:"percentage-label"})})}renderSystemHealthPlaceholder(){this.systemHealthContainer.createEl("p",{text:"Loading system health data...",cls:"placeholder-text"})}renderPerformanceMetricsPlaceholder(){this.metricsContainer.createEl("p",{text:"Loading performance metrics...",cls:"placeholder-text"})}renderChartsPlaceholder(){this.chartsContainer.createEl("p",{text:"Performance charts will be displayed here",cls:"placeholder-text"})}renderError(e){this.containerEl.createDiv("dashboard-error").createEl("p",{text:`Error: ${e}`,cls:"error-message"})}formatUptime(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),i=Math.floor(n/60),a=Math.floor(i/24);return a>0?`${a}d ${i%24}h`:i>0?`${i}h ${n%60}m`:`${n}m ${t%60}s`}updateTimestamp(){const e=this.containerEl.querySelector(".timestamp");e&&(e.textContent=(new Date).toLocaleTimeString())}startRealTimeUpdates(){this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=window.setInterval(()=>{this.updateDashboard()},this.config.updateInterval)}stopRealTimeUpdates(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=void 0)}setupEventListeners(){this.transportManager&&console.log("Setting up transport event listeners")}removeEventListeners(){this.transportManager&&console.log("Removing transport event listeners")}onTransportSwitched(t){var n;new e.Notice(`Transport switched to ${(null===(n=t.transport)||void 0===n?void 0:n.toUpperCase())||"unknown"}`),this.updateDashboard()}onHealthChanged(e){console.log("Health changed:",e),this.updateDashboard()}onErrorOccurred(e){console.warn("Transport error occurred:",e),this.updateDashboard()}toggleRealTimeUpdates(t){this.isRealTimeEnabled=t,this.config.enableRealTimeUpdates=t,t?(this.startRealTimeUpdates(),new e.Notice("Real-time updates enabled")):(this.stopRealTimeUpdates(),new e.Notice("Real-time updates disabled"));const n=this.containerEl.querySelector(".realtime-indicator");n&&(n.empty(),t?n.createSpan({text:"ðŸŸ¢ Real-time",cls:"realtime-active"}):n.createSpan({text:"âšª Manual refresh",cls:"realtime-inactive"}))}manualRefresh(){return t(this,void 0,void 0,function*(){const t=this.containerEl.querySelector(".mod-cta");t&&(t.disabled=!0,t.textContent="ðŸ”„ Refreshing...");try{yield this.updateDashboard(),new e.Notice("Dashboard refreshed successfully")}catch(t){new e.Notice("Failed to refresh dashboard"),console.error("Manual refresh failed:",t)}finally{t&&(t.disabled=!1,t.textContent="ðŸ”„ Refresh")}})}testTransport(n){return t(this,void 0,void 0,function*(){new e.Notice(`Testing ${n} transport...`);try{const t=yield this.performTransportTest(n);t.success?new e.Notice(`âœ… ${n} transport test successful`):new e.Notice(`âŒ ${n} transport test failed: ${t.error}`);const i=yield this.getTransportStatus(n);this.updateTransportCard(n,i)}catch(t){new e.Notice(`âŒ ${n} transport test failed`),console.error(`Transport test failed for ${n}:`,t)}})}performTransportTest(e){return t(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,1e3));const e=Math.random()>.2;return{success:e,error:e?void 0:"Connection timeout"}})}switchToTransport(n){return t(this,void 0,void 0,function*(){if(confirm(`Switch to ${n} transport as primary?`))try{new e.Notice(`âœ… Switched to ${n} transport`),yield this.updateDashboard()}catch(t){new e.Notice(`âŒ Failed to switch to ${n} transport`),console.error("Transport switch failed:",t)}})}exportData(){const t={timestamp:(new Date).toISOString(),systemHealth:this.currentHealth,performanceMetrics:this.currentMetrics,exportedBy:"VaultPilot Transport Dashboard"},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=`vaultpilot-dashboard-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(i),new e.Notice("Dashboard data exported successfully")}openDashboardSettings(){new e.Notice("Dashboard settings will open in a future update")}}class K extends e.Component{constructor(e,t,n={showExpertOptions:!1,enableRealTimeValidation:!0,allowImportExport:!0}){super(),this.profiles=[],this.hasUnsavedChanges=!1,this.containerEl=e,this.plugin=t,this.config=n,this.currentConfiguration=this.getDefaultConfiguration(),this.loadProfiles()}onload(){return t(this,void 0,void 0,function*(){this.initializeInterface(),yield this.loadCurrentConfiguration(),this.renderSettings(),this.config.enableRealTimeValidation&&this.startRealTimeValidation()})}onunload(){if(this.validationTimeout&&clearTimeout(this.validationTimeout),this.hasUnsavedChanges){confirm("You have unsaved changes. Would you like to save them?")&&this.saveConfiguration()}}initializeInterface(){this.containerEl.empty(),this.containerEl.addClass("advanced-settings"),this.createHeader(),this.createProfileManagement(),this.createValidationSection(),this.createConfigurationSections(),this.createPreviewSection(),this.createActionButtons()}createHeader(){const e=this.containerEl.createDiv("settings-header");e.createEl("h2",{text:"Advanced Settings"}),e.createEl("p",{text:"Fine-tune VaultPilot configuration for optimal performance",cls:"settings-subtitle"});const t=e.createDiv("expert-toggle").createEl("label");t.createSpan({text:"Expert Mode"});const n=t.createEl("input",{type:"checkbox"});n.checked=this.config.showExpertOptions,n.addEventListener("change",()=>{this.config.showExpertOptions=n.checked,this.updateExpertOptionsVisibility()})}createProfileManagement(){const e=this.containerEl.createDiv("profile-management-section");e.createEl("h3",{text:"Configuration Profiles"});const t=e.createDiv("profile-controls"),n=t.createDiv("profile-selector-container");n.createSpan({text:"Current Profile:",cls:"profile-label"}),this.profileSelector=n.createEl("select",{cls:"profile-selector"}),this.updateProfileSelector(),this.profileSelector.addEventListener("change",()=>{this.loadProfile(this.profileSelector.value)});const i=t.createDiv("profile-actions");i.createEl("button",{text:"Save as New Profile",cls:"mod-muted"}).addEventListener("click",()=>this.showSaveProfileModal());if(i.createEl("button",{text:"Delete Profile",cls:"mod-warning"}).addEventListener("click",()=>this.deleteCurrentProfile()),this.config.allowImportExport){i.createEl("button",{text:"Import",cls:"mod-muted"}).addEventListener("click",()=>this.importConfiguration());i.createEl("button",{text:"Export",cls:"mod-muted"}).addEventListener("click",()=>this.exportConfiguration())}}createValidationSection(){const e=this.containerEl.createDiv("validation-section");e.createEl("h3",{text:"Configuration Status"}),this.validationContainer=e.createDiv("validation-container"),this.renderValidationPlaceholder()}createConfigurationSections(){this.configurationContainer=this.containerEl.createDiv("configuration-sections"),this.createTransportSettings(),this.createPerformanceSettings(),this.createMonitoringSettings(),this.createUISettings(),this.createPrivacySettings()}createTransportSettings(){const t=this.configurationContainer.createDiv("config-section transport-section");t.createEl("h4",{text:"ðŸš€ Transport Configuration"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Primary Transport").setDesc("Choose the preferred transport method").addDropdown(e=>{e.addOption(P.HTTP,"HTTP (Reliable)"),e.addOption(P.WEBSOCKET,"WebSocket (Real-time)"),e.addOption(P.FILESYSTEM,"FileSystem (Offline)"),e.setValue(this.currentConfiguration.transport.primaryTransport),e.onChange(e=>{this.currentConfiguration.transport.primaryTransport=e,this.onConfigurationChange()})}),this.createFallbackChainConfig(n),this.createSelectionCriteriaConfig(n),this.createTimeoutConfig(n),this.createRetryPolicyConfig(n)}createFallbackChainConfig(t){const n=new e.Setting(t).setName("Fallback Chain").setDesc("Configure transport fallback order").controlEl.createDiv("fallback-chain-config"),i=n.createDiv("chain-display");this.updateFallbackChainDisplay(i);const a=n.createDiv("add-transport-buttons");[P.HTTP,P.WEBSOCKET,P.FILESYSTEM].forEach(e=>{a.createEl("button",{text:`Add ${e.toUpperCase()}`,cls:"mod-muted add-transport-btn"}).addEventListener("click",()=>{this.currentConfiguration.transport.fallbackChain.includes(e)||(this.currentConfiguration.transport.fallbackChain.push(e),this.updateFallbackChainDisplay(i),this.onConfigurationChange())})})}updateFallbackChainDisplay(e){e.empty();const t=this.currentConfiguration.transport.fallbackChain;t.forEach((n,i)=>{const a=e.createDiv("chain-item");a.createSpan({text:`${i+1}. ${n.toUpperCase()}`,cls:"chain-label"});const o=a.createDiv("chain-actions");if(i>0){o.createEl("button",{text:"â†‘",cls:"mod-muted chain-btn"}).addEventListener("click",()=>{[t[i],t[i-1]]=[t[i-1],t[i]],this.updateFallbackChainDisplay(e),this.onConfigurationChange()})}if(i<t.length-1){o.createEl("button",{text:"â†“",cls:"mod-muted chain-btn"}).addEventListener("click",()=>{[t[i],t[i+1]]=[t[i+1],t[i]],this.updateFallbackChainDisplay(e),this.onConfigurationChange()})}o.createEl("button",{text:"âœ•",cls:"mod-warning chain-btn"}).addEventListener("click",()=>{t.splice(i,1),this.updateFallbackChainDisplay(e),this.onConfigurationChange()})})}createSelectionCriteriaConfig(t){const n=t.createDiv("selection-criteria-container");n.createEl("h5",{text:"Transport Selection Criteria"});const i=this.currentConfiguration.transport.selectionCriteria;new e.Setting(n).setName("Latency Priority").setDesc("How much to prioritize low latency (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.latencyWeight),e.onChange(e=>{i.latencyWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Reliability Priority").setDesc("How much to prioritize reliability (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.reliabilityWeight),e.onChange(e=>{i.reliabilityWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Feature Priority").setDesc("How much to prioritize advanced features (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.capabilityWeight),e.onChange(e=>{i.capabilityWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Efficiency Priority").setDesc("How much to prioritize resource efficiency (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.costWeight),e.onChange(e=>{i.costWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()})}createTimeoutConfig(t){if(!this.config.showExpertOptions)return;const n=t.createDiv("timeout-config-container expert-option");n.createEl("h5",{text:"Timeout Configuration"});const i=this.currentConfiguration.transport.timeouts;new e.Setting(n).setName("Connection Timeout").setDesc("Maximum time to wait for initial connection (ms)").addText(e=>{e.setValue(i.connection.toString()),e.onChange(e=>{const t=parseInt(e,10);!isNaN(t)&&t>0&&(i.connection=t,this.onConfigurationChange())})}),new e.Setting(n).setName("Request Timeout").setDesc("Maximum time to wait for request completion (ms)").addText(e=>{e.setValue(i.request.toString()),e.onChange(e=>{const t=parseInt(e,10);!isNaN(t)&&t>0&&(i.request=t,this.onConfigurationChange())})})}createRetryPolicyConfig(t){if(!this.config.showExpertOptions)return;const n=t.createDiv("retry-policy-container expert-option");n.createEl("h5",{text:"Retry Policy"});const i=this.currentConfiguration.transport.retryPolicy;new e.Setting(n).setName("Max Retry Attempts").setDesc("Maximum number of retry attempts for failed requests").addSlider(e=>{e.setLimits(0,10,1),e.setValue(i.maxAttempts),e.onChange(e=>{i.maxAttempts=e,this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Backoff Multiplier").setDesc("Exponential backoff multiplier for retry delays").addSlider(e=>{e.setLimits(1,5,.1),e.setValue(i.backoffMultiplier),e.onChange(e=>{i.backoffMultiplier=e,this.onConfigurationChange()}),e.setDynamicTooltip()})}createPerformanceSettings(){const t=this.configurationContainer.createDiv("config-section performance-section");t.createEl("h4",{text:"âš¡ Performance Configuration"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Performance Mode").setDesc("Balance between speed, reliability, and resource usage").addDropdown(e=>{e.addOption("performance","Performance (Prioritize Speed)"),e.addOption("balanced","Balanced (Recommended)"),e.addOption("reliability","Reliability (Prioritize Stability)"),e.setValue(this.currentConfiguration.performance.mode),e.onChange(e=>{this.currentConfiguration.performance.mode=e,this.applyPerformanceModePreset(e),this.onConfigurationChange()})}),new e.Setting(n).setName("Connection Pooling").setDesc("Reuse connections to improve performance").addToggle(e=>{e.setValue(this.currentConfiguration.performance.enableConnectionPooling),e.onChange(e=>{this.currentConfiguration.performance.enableConnectionPooling=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Compression").setDesc("Enable data compression to reduce bandwidth usage").addToggle(e=>{e.setValue(this.currentConfiguration.performance.enableCompression),e.onChange(e=>{this.currentConfiguration.performance.enableCompression=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Response Caching").setDesc("Cache responses to improve performance").addToggle(e=>{e.setValue(this.currentConfiguration.performance.enableCaching),e.onChange(e=>{this.currentConfiguration.performance.enableCaching=e,this.onConfigurationChange()})}),this.config.showExpertOptions&&(new e.Setting(n).setName("Max Concurrent Requests").setDesc("Maximum number of simultaneous requests").setClass("expert-option").addSlider(e=>{e.setLimits(1,20,1),e.setValue(this.currentConfiguration.performance.maxConcurrentRequests),e.onChange(e=>{this.currentConfiguration.performance.maxConcurrentRequests=e,this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Cache Size (MB)").setDesc("Maximum cache size in megabytes").setClass("expert-option").addSlider(e=>{e.setLimits(1,100,5),e.setValue(this.currentConfiguration.performance.cacheSize),e.onChange(e=>{this.currentConfiguration.performance.cacheSize=e,this.onConfigurationChange()}),e.setDynamicTooltip()}))}createMonitoringSettings(){const t=this.configurationContainer.createDiv("config-section monitoring-section");t.createEl("h4",{text:"ðŸ“Š Monitoring Configuration"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Health Checks").setDesc("Monitor transport health automatically").addToggle(e=>{e.setValue(this.currentConfiguration.monitoring.enableHealthChecks),e.onChange(e=>{this.currentConfiguration.monitoring.enableHealthChecks=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Performance Metrics").setDesc("Collect detailed performance metrics").addToggle(e=>{e.setValue(this.currentConfiguration.monitoring.enableMetrics),e.onChange(e=>{this.currentConfiguration.monitoring.enableMetrics=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Predictive Alerts").setDesc("Get early warnings about potential issues").addToggle(e=>{e.setValue(this.currentConfiguration.monitoring.enablePredictiveAlerts),e.onChange(e=>{this.currentConfiguration.monitoring.enablePredictiveAlerts=e,this.onConfigurationChange()})})}createUISettings(){const t=this.configurationContainer.createDiv("config-section ui-section");t.createEl("h4",{text:"ðŸŽ¨ User Interface"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Theme").setDesc("Choose the interface theme").addDropdown(e=>{e.addOption("auto","Auto (Follow Obsidian)"),e.addOption("light","Light"),e.addOption("dark","Dark"),e.setValue(this.currentConfiguration.ui.theme),e.onChange(e=>{this.currentConfiguration.ui.theme=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Animations").setDesc("Enable UI animations and transitions").addToggle(e=>{e.setValue(this.currentConfiguration.ui.enableAnimations),e.onChange(e=>{this.currentConfiguration.ui.enableAnimations=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Advanced Metrics").setDesc("Show detailed metrics in dashboard").addToggle(e=>{e.setValue(this.currentConfiguration.ui.showAdvancedMetrics),e.onChange(e=>{this.currentConfiguration.ui.showAdvancedMetrics=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Dashboard Refresh Rate").setDesc("How often to update the dashboard (seconds)").addSlider(e=>{e.setLimits(1,60,1),e.setValue(this.currentConfiguration.ui.dashboardRefreshRate),e.onChange(e=>{this.currentConfiguration.ui.dashboardRefreshRate=e,this.onConfigurationChange()}),e.setDynamicTooltip()})}createPrivacySettings(){const t=this.configurationContainer.createDiv("config-section privacy-section");t.createEl("h4",{text:"ðŸ”’ Privacy & Data"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Usage Analytics").setDesc("Help improve VaultPilot by sharing anonymous usage data").addToggle(e=>{e.setValue(this.currentConfiguration.privacy.enableAnalytics),e.onChange(e=>{this.currentConfiguration.privacy.enableAnalytics=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Data Retention").setDesc("How long to keep performance and usage data (days)").addSlider(e=>{e.setLimits(1,90,1),e.setValue(this.currentConfiguration.privacy.dataRetentionDays),e.onChange(e=>{this.currentConfiguration.privacy.dataRetentionDays=e,this.onConfigurationChange()}),e.setDynamicTooltip()})}createPreviewSection(){const e=this.containerEl.createDiv("preview-section");e.createEl("h3",{text:"Configuration Preview"}),this.previewContainer=e.createDiv("preview-container"),this.updatePreview()}createActionButtons(){const e=this.containerEl.createDiv("settings-actions");e.createEl("button",{text:"Save Configuration",cls:"mod-cta"}).addEventListener("click",()=>this.saveConfiguration());e.createEl("button",{text:"Reset to Defaults",cls:"mod-warning"}).addEventListener("click",()=>this.resetToDefaults());e.createEl("button",{text:"Test Configuration",cls:"mod-muted"}).addEventListener("click",()=>this.testConfiguration())}renderSettings(){this.onConfigurationChange()}loadCurrentConfiguration(){return t(this,void 0,void 0,function*(){try{this.plugin.settings.advancedConfiguration&&(this.currentConfiguration=Object.assign({},this.plugin.settings.advancedConfiguration))}catch(t){console.error("Failed to load current configuration:",t),new e.Notice("Failed to load configuration, using defaults")}})}getDefaultConfiguration(){return{transport:{primaryTransport:P.HTTP,fallbackChain:[P.HTTP,P.WEBSOCKET],selectionCriteria:{latencyWeight:.3,reliabilityWeight:.3,capabilityWeight:.2,costWeight:.2},timeouts:{connection:5e3,request:3e4,retry:1e3},retryPolicy:{maxAttempts:3,backoffMultiplier:2,maxBackoffTime:1e4}},performance:{mode:"balanced",enableConnectionPooling:!0,maxConcurrentRequests:5,enableCompression:!0,enableCaching:!0,cacheSize:10},monitoring:{enableHealthChecks:!0,healthCheckInterval:3e4,enableMetrics:!0,metricsRetention:7,enablePredictiveAlerts:!0},ui:{theme:"auto",enableAnimations:!0,showAdvancedMetrics:!1,dashboardRefreshRate:2,enableNotifications:!0},privacy:{enableAnalytics:!0,shareUsageData:!1,dataRetentionDays:30}}}onConfigurationChange(){this.hasUnsavedChanges=!0,this.config.enableRealTimeValidation&&this.scheduleValidation(),this.updatePreview()}scheduleValidation(){this.validationTimeout&&clearTimeout(this.validationTimeout),this.validationTimeout=window.setTimeout(()=>{this.validateConfiguration()},500)}validateConfiguration(){return t(this,void 0,void 0,function*(){const e=[],t=[];0===this.currentConfiguration.transport.fallbackChain.length&&e.push({field:"transport.fallbackChain",message:"At least one transport must be configured in the fallback chain",severity:"error",suggestion:"Add at least one transport to the fallback chain"});const n=this.currentConfiguration.transport.selectionCriteria,i=n.latencyWeight+n.reliabilityWeight+n.capabilityWeight+n.costWeight;Math.abs(i-1)>.01&&t.push({field:"transport.selectionCriteria",message:"Selection criteria weights should sum to 100%",impact:"medium",recommendation:"Adjust the weights so they total 100%"});const a=this.currentConfiguration.transport.timeouts;a.connection>=a.request&&t.push({field:"transport.timeouts",message:"Connection timeout should be less than request timeout",impact:"low",recommendation:"Set connection timeout to be less than request timeout"}),this.currentConfiguration.performance.maxConcurrentRequests>10&&t.push({field:"performance.maxConcurrentRequests",message:"High concurrent request limit may impact performance",impact:"medium",recommendation:"Consider reducing to 5-10 for optimal performance"});const o=this.estimateConfigurationImpact(),s={isValid:0===e.length,errors:e,warnings:t,estimatedImpact:o};return this.validationResult=s,this.renderValidationResult(s),s})}estimateConfigurationImpact(){let e=0,t=0,n=0;const i=this.currentConfiguration;switch(i.performance.mode){case"performance":e+=20,t-=5,n+=15;break;case"reliability":e-=5,t+=20,n+=5}return i.performance.enableConnectionPooling&&(e+=15,n+=10),i.performance.enableCompression&&(e+=5,n+=5),i.performance.enableCaching&&(e+=10,n+=i.performance.cacheSize),{performanceChange:Math.max(-50,Math.min(50,e)),reliabilityChange:Math.max(-50,Math.min(50,t)),resourceUsage:Math.max(0,Math.min(100,n))}}renderValidationResult(e){if(this.validationContainer.empty(),e.isValid&&0===e.warnings.length){this.validationContainer.createDiv("validation-success").createSpan({text:"âœ… Configuration is valid",cls:"validation-message"})}else e.errors.forEach(e=>{const t=this.validationContainer.createDiv("validation-error");t.createSpan({text:"âŒ",cls:"validation-icon"}),t.createSpan({text:e.message,cls:"validation-message"}),e.suggestion&&t.createSpan({text:e.suggestion,cls:"validation-suggestion"})}),e.warnings.forEach(e=>{const t=this.validationContainer.createDiv("validation-warning");t.createSpan({text:"âš ï¸",cls:"validation-icon"}),t.createSpan({text:e.message,cls:"validation-message"}),e.recommendation&&t.createSpan({text:e.recommendation,cls:"validation-suggestion"})});const t=e.estimatedImpact,n=this.validationContainer.createDiv("validation-impact");n.createEl("h5",{text:"Estimated Impact:"});const i=n.createDiv("impact-grid"),a=i.createDiv("impact-item");a.createSpan({text:"Performance:",cls:"impact-label"}),a.createSpan({text:`${t.performanceChange>0?"+":""}${t.performanceChange}%`,cls:"impact-value "+(t.performanceChange>0?"positive":t.performanceChange<0?"negative":"neutral")});const o=i.createDiv("impact-item");o.createSpan({text:"Reliability:",cls:"impact-label"}),o.createSpan({text:`${t.reliabilityChange>0?"+":""}${t.reliabilityChange}%`,cls:"impact-value "+(t.reliabilityChange>0?"positive":t.reliabilityChange<0?"negative":"neutral")});const s=i.createDiv("impact-item");s.createSpan({text:"Resource Usage:",cls:"impact-label"}),s.createSpan({text:`${t.resourceUsage}%`,cls:"impact-value "+(t.resourceUsage>70?"high":t.resourceUsage>30?"medium":"low")})}renderValidationPlaceholder(){this.validationContainer.createEl("p",{text:"Configuration validation will appear here...",cls:"validation-placeholder"})}updatePreview(){this.previewContainer.empty();this.previewContainer.createEl("pre",{cls:"config-preview"}).textContent=JSON.stringify(this.currentConfiguration,null,2)}normalizeSelectionCriteria(){const e=this.currentConfiguration.transport.selectionCriteria,t=e.latencyWeight+e.reliabilityWeight+e.capabilityWeight+e.costWeight;t>0&&(e.latencyWeight/=t,e.reliabilityWeight/=t,e.capabilityWeight/=t,e.costWeight/=t)}applyPerformanceModePreset(e){const t=this.currentConfiguration.performance;switch(e){case"performance":t.enableConnectionPooling=!0,t.maxConcurrentRequests=10,t.enableCompression=!1,t.enableCaching=!0;break;case"reliability":t.enableConnectionPooling=!0,t.maxConcurrentRequests=3,t.enableCompression=!0,t.enableCaching=!1;break;default:t.enableConnectionPooling=!0,t.maxConcurrentRequests=5,t.enableCompression=!0,t.enableCaching=!0}}updateExpertOptionsVisibility(){this.containerEl.querySelectorAll(".expert-option").forEach(e=>{this.config.showExpertOptions?e.removeClass("hidden"):e.addClass("hidden")})}updateProfileSelector(){this.profileSelector.empty();this.profileSelector.createEl("option",{value:"default"}).textContent="Default Configuration",this.profiles.forEach(e=>{this.profileSelector.createEl("option",{value:e.id}).textContent=e.name})}loadProfiles(){try{const e=this.plugin.settings.configurationProfiles||[];this.profiles=e.map(e=>Object.assign(Object.assign({},e),{created:new Date(e.created),lastModified:new Date(e.lastModified)}))}catch(e){console.error("Failed to load configuration profiles:",e),this.profiles=[]}}loadProfile(e){if("default"===e)this.currentConfiguration=this.getDefaultConfiguration();else{const t=this.profiles.find(t=>t.id===e);t&&(this.currentConfiguration=Object.assign({},t.config))}this.renderSettings(),this.onConfigurationChange()}showSaveProfileModal(){const e=prompt("Enter profile name:");if(!e)return;const t=prompt("Enter profile description (optional):")||"";this.saveAsProfile(e,t)}saveAsProfile(t,n){const i={id:`profile-${Date.now()}`,name:t,description:n,config:Object.assign({},this.currentConfiguration),created:new Date,lastModified:new Date,isDefault:!1};this.profiles.push(i),this.updateProfileSelector(),this.saveProfiles(),new e.Notice(`Profile "${t}" saved successfully`)}deleteCurrentProfile(){const t=this.profileSelector.value;if("default"===t)return void new e.Notice("Cannot delete the default profile");const n=this.profiles.find(e=>e.id===t);if(!n)return;confirm(`Delete profile "${n.name}"?`)&&(this.profiles=this.profiles.filter(e=>e.id!==t),this.updateProfileSelector(),this.saveProfiles(),this.loadProfile("default"),new e.Notice(`Profile "${n.name}" deleted`))}saveConfiguration(){return t(this,void 0,void 0,function*(){try{if(!(yield this.validateConfiguration()).isValid){if(!confirm("Configuration has errors. Save anyway?"))return}this.plugin.settings.advancedConfiguration=Object.assign({},this.currentConfiguration),yield this.plugin.saveSettings(),this.hasUnsavedChanges=!1,new e.Notice("âœ… Configuration saved successfully")}catch(t){console.error("Failed to save configuration:",t),new e.Notice("âŒ Failed to save configuration")}})}resetToDefaults(){confirm("Reset all settings to default values? This cannot be undone.")&&(this.currentConfiguration=this.getDefaultConfiguration(),this.renderSettings(),this.onConfigurationChange(),new e.Notice("Configuration reset to defaults"))}testConfiguration(){return t(this,void 0,void 0,function*(){new e.Notice("Testing configuration...");try{yield new Promise(e=>setTimeout(e,2e3));const t={success:Math.random()>.2,latency:200*Math.random()+50,errors:Math.random()>.8?["Connection timeout"]:[]};t.success?new e.Notice(`âœ… Configuration test passed (${t.latency.toFixed(0)}ms average)`):new e.Notice(`âŒ Configuration test failed: ${t.errors.join(", ")}`)}catch(t){console.error("Configuration test failed:",t),new e.Notice("âŒ Configuration test failed")}})}exportConfiguration(){const t={version:"1.0",timestamp:(new Date).toISOString(),configuration:this.currentConfiguration,profiles:this.profiles},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=`vaultpilot-config-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(i),new e.Notice("Configuration exported successfully")}importConfiguration(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=t=>{var n;const i=null===(n=t.target.files)||void 0===n?void 0:n[0];if(!i)return;const a=new FileReader;a.onload=t=>{var n;try{const i=JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result);i.configuration&&(this.currentConfiguration=i.configuration,this.renderSettings(),this.onConfigurationChange(),new e.Notice("Configuration imported successfully")),i.profiles&&(this.profiles=i.profiles.map(e=>Object.assign(Object.assign({},e),{created:new Date(e.created),lastModified:new Date(e.lastModified)})),this.updateProfileSelector(),this.saveProfiles())}catch(t){console.error("Failed to import configuration:",t),new e.Notice("âŒ Failed to import configuration: Invalid file format")}},a.readAsText(i)},t.click()}saveProfiles(){try{this.plugin.settings.configurationProfiles=this.profiles,this.plugin.saveSettings()}catch(e){console.error("Failed to save profiles:",e)}}startRealTimeValidation(){console.log("Real-time validation enabled")}}!function(e){e.TRANSPORT_OPTIMIZATION="transport_optimization",e.PERFORMANCE_TUNING="performance_tuning",e.ERROR_REDUCTION="error_reduction",e.COST_OPTIMIZATION="cost_optimization",e.FEATURE_ADOPTION="feature_adoption",e.CONFIGURATION_IMPROVEMENT="configuration_improvement",e.PROACTIVE_MAINTENANCE="proactive_maintenance"}(R||(R={}));class J{constructor(){this.performanceHistory=[],this.behaviorPatterns=new Map,this.appliedRecommendations=new Map,this.insightCache=new Map,this.predictionModels=new Map,this.ANALYSIS_WINDOW=6048e5,this.MIN_DATA_POINTS=10,this.CONFIDENCE_THRESHOLD=.7,this.initializePredictionModels()}generateRecommendations(e){return t(this,void 0,void 0,function*(){const t=[];try{const n=yield this.analyzeOptimizationOpportunities(e),i=yield this.generateTransportRecommendations(e,n);t.push(...i);const a=yield this.generatePerformanceRecommendations(e,n);t.push(...a);const o=yield this.generateConfigurationRecommendations(e);t.push(...o);const s=yield this.generateMaintenanceRecommendations(e);t.push(...s);const r=this.prioritizeRecommendations(t);return r.forEach(e=>{this.appliedRecommendations.set(e.id,e)}),r}catch(e){return console.error("Failed to generate recommendations:",e),[]}})}analyzeOptimizationOpportunities(e){return t(this,void 0,void 0,function*(){const t=[];e.performanceMetrics.errorRate>.05&&t.push({area:"transport",impact:"high",effort:"medium",description:"High error rate detected, transport optimization recommended",metrics:{currentValue:e.performanceMetrics.errorRate,potentialValue:.01,improvement:(e.performanceMetrics.errorRate-.01)/e.performanceMetrics.errorRate}}),e.performanceMetrics.averageLatency>500&&t.push({area:"configuration",impact:"medium",effort:"low",description:"High latency detected, configuration tuning recommended",metrics:{currentValue:e.performanceMetrics.averageLatency,potentialValue:200,improvement:(e.performanceMetrics.averageLatency-200)/e.performanceMetrics.averageLatency}});const n=Object.values(e.performanceMetrics.transportUsage),i=Math.max(...n),a=Math.min(...n);return i/(a||.001)>10&&t.push({area:"usage",impact:"medium",effort:"low",description:"Unbalanced transport usage detected, load balancing recommended",metrics:{currentValue:i/(a||.001),potentialValue:3,improvement:.3}}),t})}generateTransportRecommendations(e,n){return t(this,void 0,void 0,function*(){const t=[],n=yield this.determineOptimalTransport(e);return n!==e.currentTransport&&t.push({id:`transport-switch-${Date.now()}`,type:R.TRANSPORT_OPTIMIZATION,priority:"high",title:`Switch to ${n} Transport`,description:`Based on your usage patterns and environment, ${n} transport would provide better performance.`,rationale:this.generateTransportSwitchRationale(e,n),expectedImpact:{performanceImprovement:25,errorReduction:40,reliabilityImprovement:30,confidenceScore:.85},implementation:{difficulty:"easy",estimatedTime:"1 minute",steps:[{id:"switch-transport",title:"Switch Primary Transport",description:`Change primary transport to ${n}`,action:"automatic"}],reversible:!0,riskLevel:"low"},category:"Transport",tags:["performance","optimization","transport"],created:new Date}),e.performanceMetrics.errorRate>.02&&t.push({id:`fallback-optimization-${Date.now()}`,type:R.TRANSPORT_OPTIMIZATION,priority:"medium",title:"Optimize Transport Fallback Chain",description:"Configure intelligent fallback to reduce error impact.",rationale:"Current error rate suggests fallback mechanisms could be improved.",expectedImpact:{performanceImprovement:15,errorReduction:60,reliabilityImprovement:45,confidenceScore:.75},implementation:{difficulty:"medium",estimatedTime:"5 minutes",steps:[{id:"configure-fallback",title:"Configure Fallback Chain",description:"Set up intelligent transport fallback",action:"manual"}],reversible:!0,riskLevel:"low"},category:"Reliability",tags:["fallback","reliability","error-reduction"],created:new Date}),t})}generatePerformanceRecommendations(e,n){return t(this,void 0,void 0,function*(){const t=[];return e.performanceMetrics.averageLatency>1e3&&t.push({id:`timeout-optimization-${Date.now()}`,type:R.PERFORMANCE_TUNING,priority:"medium",title:"Optimize Request Timeouts",description:"Adjust timeout settings to reduce wait times for failed requests.",rationale:"High average latency indicates timeout settings may need adjustment.",expectedImpact:{performanceImprovement:20,errorReduction:10,reliabilityImprovement:15,confidenceScore:.8},implementation:{difficulty:"easy",estimatedTime:"2 minutes",steps:[{id:"adjust-timeouts",title:"Adjust Timeout Settings",description:"Optimize request timeout values",action:"manual"}],reversible:!0,riskLevel:"low"},category:"Performance",tags:["timeout","latency","performance"],created:new Date}),e.performanceMetrics.throughput<100&&t.push({id:`connection-pooling-${Date.now()}`,type:R.PERFORMANCE_TUNING,priority:"high",title:"Enable Connection Pooling",description:"Enable connection pooling to improve throughput and reduce connection overhead.",rationale:"Low throughput suggests connection pooling could provide significant benefits.",expectedImpact:{performanceImprovement:40,errorReduction:20,reliabilityImprovement:25,confidenceScore:.9},implementation:{difficulty:"medium",estimatedTime:"3 minutes",steps:[{id:"enable-pooling",title:"Enable Connection Pooling",description:"Configure HTTP connection pooling",action:"automatic"}],reversible:!0,riskLevel:"low"},category:"Performance",tags:["connection-pooling","throughput","performance"],created:new Date}),t})}generateConfigurationRecommendations(e){return t(this,void 0,void 0,function*(){const t=[];return e.performanceMetrics.errorRate>.03&&t.push({id:`retry-config-${Date.now()}`,type:R.CONFIGURATION_IMPROVEMENT,priority:"medium",title:"Optimize Retry Configuration",description:"Fine-tune retry attempts and backoff strategy to handle transient errors better.",rationale:"Error rate suggests retry configuration could be optimized.",expectedImpact:{performanceImprovement:10,errorReduction:35,reliabilityImprovement:40,confidenceScore:.75},implementation:{difficulty:"medium",estimatedTime:"5 minutes",steps:[{id:"configure-retry",title:"Configure Retry Strategy",description:"Set up exponential backoff retry strategy",action:"manual"}],reversible:!0,riskLevel:"low"},category:"Configuration",tags:["retry","error-handling","reliability"],created:new Date}),t})}generateMaintenanceRecommendations(e){return t(this,void 0,void 0,function*(){const e=[],t={id:`health-monitoring-${Date.now()}`,type:R.PROACTIVE_MAINTENANCE,priority:"low",title:"Enhance Health Monitoring",description:"Set up comprehensive health monitoring to detect issues early.",rationale:"Proactive monitoring can prevent issues before they impact users.",expectedImpact:{performanceImprovement:5,errorReduction:25,reliabilityImprovement:35,confidenceScore:.8},implementation:{difficulty:"easy",estimatedTime:"2 minutes",steps:[{id:"enable-monitoring",title:"Enable Enhanced Monitoring",description:"Turn on comprehensive health monitoring",action:"automatic"}],reversible:!0,riskLevel:"low"},category:"Maintenance",tags:["monitoring","proactive","health"],created:new Date};return e.push(t),e})}determineOptimalTransport(e){return t(this,void 0,void 0,function*(){const t=e.environmentContext,n=e.userBehavior,i={};for(const a of e.availableTransports){let e=0;switch(a){case P.WEBSOCKET:e+="excellent"===t.connectivity?40:20,e+=t.latency<50?30:10,e+="high"===n.performanceSensitivity?20:10,e+="high"===n.usageFrequency?10:0;break;case P.HTTP:e+=30,e+="poor"===t.connectivity?20:10,e+="low"===n.errorTolerance?20:10,e+=15;break;case P.FILESYSTEM:e+="poor"===t.connectivity?40:5,e+="low"===n.usageFrequency?20:0,e+=10}i[a]=e}return Object.entries(i).reduce((e,t)=>i[e[0]]>i[t[0]]?e:t)[0]})}generateTransportSwitchRationale(e,t){const n=e.currentTransport,i=e.environmentContext;let a=`Switching from ${n} to ${t} is recommended because: `;switch(t){case P.WEBSOCKET:a+="WebSocket provides real-time communication with lower latency, ","excellent"===i.connectivity?a+="and your excellent connectivity supports stable WebSocket connections.":a+="which would benefit your usage patterns.";break;case P.HTTP:a+="HTTP offers superior reliability and error handling, ",e.performanceMetrics.errorRate>.05?a+="which is especially important given your current error rate.":a+="providing a more stable foundation for your usage.";break;case P.FILESYSTEM:a+="FileSystem transport provides offline capability and local storage benefits, ","poor"===i.connectivity?a+="which is ideal for your current connectivity situation.":a+="offering better performance for your usage patterns."}return a}prioritizeRecommendations(e){return e.sort((e,t)=>{const n={critical:4,high:3,medium:2,low:1},i=n[t.priority]-n[e.priority];if(0!==i)return i;const a=e.expectedImpact.performanceImprovement*e.expectedImpact.confidenceScore;return t.expectedImpact.performanceImprovement*t.expectedImpact.confidenceScore-a})}generateInsights(e){return t(this,void 0,void 0,function*(){var t,n,i;const a=this.generateInsightCacheKey(e);if(this.insightCache.has(a)){const e=this.insightCache.get(a);if(Date.now()-(null===(i=null===(n=null===(t=e[0])||void 0===t?void 0:t.insights[0])||void 0===n?void 0:n.data)||void 0===i?void 0:i.timestamp)<6e5)return e}const o=[],s=yield this.generatePerformanceInsights(e);o.push({name:"Performance",description:"Current performance analysis and trends",priority:1,insights:s});const r=yield this.generateUsageInsights(e);o.push({name:"Usage Patterns",description:"Analysis of your usage patterns and behavior",priority:2,insights:r});const l=yield this.generateTransportInsights(e);return o.push({name:"Transport Analysis",description:"Transport performance and optimization opportunities",priority:3,insights:l}),this.insightCache.set(a,o),o})}generatePerformanceInsights(e){return t(this,void 0,void 0,function*(){const t=[],n=e.performanceMetrics;return n.averageLatency<200?t.push({id:"low-latency",title:"Excellent Response Time",description:`Your average response time of ${n.averageLatency}ms is excellent.`,type:"positive",confidence:.9,data:{latency:n.averageLatency,timestamp:Date.now()},actionable:!1,related:[]}):n.averageLatency>500&&t.push({id:"high-latency",title:"High Response Time Detected",description:`Your average response time of ${n.averageLatency}ms could be improved.`,type:"warning",confidence:.85,data:{latency:n.averageLatency,timestamp:Date.now()},actionable:!0,related:[]}),n.errorRate<.01?t.push({id:"low-error-rate",title:"Low Error Rate",description:`Your error rate of ${(100*n.errorRate).toFixed(2)}% is very good.`,type:"positive",confidence:.9,data:{errorRate:n.errorRate,timestamp:Date.now()},actionable:!1,related:[]}):n.errorRate>.05&&t.push({id:"high-error-rate",title:"High Error Rate",description:`Your error rate of ${(100*n.errorRate).toFixed(2)}% needs attention.`,type:"critical",confidence:.95,data:{errorRate:n.errorRate,timestamp:Date.now()},actionable:!0,related:[]}),t})}generateUsageInsights(e){return t(this,void 0,void 0,function*(){const t=[],n=e.userBehavior;return t.push({id:"usage-frequency",title:"Usage Pattern Analysis",description:`Your usage frequency is ${n.usageFrequency}. ${this.getUsageFrequencyAdvice(n.usageFrequency)}`,type:"neutral",confidence:.8,data:{frequency:n.usageFrequency,timestamp:Date.now()},actionable:"medium"!==n.usageFrequency,related:[]}),n.peakUsageHours.length>0&&t.push({id:"peak-usage",title:"Peak Usage Hours",description:`Your peak usage occurs during hours: ${n.peakUsageHours.join(", ")}. Consider optimizing for these times.`,type:"neutral",confidence:.7,data:{peakHours:n.peakUsageHours,timestamp:Date.now()},actionable:!0,related:[]}),t})}generateTransportInsights(e){return t(this,void 0,void 0,function*(){const t=[],n=e.performanceMetrics.transportUsage,i=Object.values(n).reduce((e,t)=>e+t,0),a=Object.entries(n).reduce((e,t)=>n[e[0]]>n[t[0]]?e:t);if(i>0){const e=n[a[0]]/i*100;e>80?t.push({id:"transport-concentration",title:"Heavy Reliance on Single Transport",description:`You're using ${a[0]} for ${e.toFixed(1)}% of requests. Consider load balancing.`,type:"warning",confidence:.8,data:{distribution:n,dominant:a[0],timestamp:Date.now()},actionable:!0,related:[]}):t.push({id:"balanced-transport-usage",title:"Good Transport Distribution",description:"Your transport usage is well balanced across available options.",type:"positive",confidence:.75,data:{distribution:n,timestamp:Date.now()},actionable:!1,related:[]})}return t})}generatePredictiveAlerts(e){return t(this,void 0,void 0,function*(){const t=[],n=this.analyzePerformanceTrend(e);return n.declining&&n.severity>.7&&t.push({id:`perf-degradation-${Date.now()}`,type:"performance_degradation",severity:"warning",probability:n.severity,timeframe:"24h",description:"Performance degradation trend detected. Response times may increase significantly.",preventiveActions:[],triggers:["increasing_latency","error_rate_rise"]}),e.performanceMetrics.errorRate>.1&&t.push({id:`transport-failure-${Date.now()}`,type:"transport_failure",severity:"error",probability:Math.min(2*e.performanceMetrics.errorRate,.9),timeframe:"1h",description:`${e.currentTransport} transport showing high error rate. Failure risk is elevated.`,preventiveActions:[],triggers:["high_error_rate","connection_instability"]}),t})}analyzePerformanceTrend(e){const t=e.performanceMetrics.averageLatency,n=e.performanceMetrics.errorRate,i=(Math.min(t/1e3,1)+Math.min(10*n,1))/2;return{declining:i>.5,severity:i}}getUsageFrequencyAdvice(e){switch(e){case"low":return"Consider using FileSystem transport for better offline capability.";case"high":return"WebSocket transport might provide better performance for your intensive usage.";default:return"Your current configuration should work well for your usage patterns."}}generateInsightCacheKey(e){return`insights-${e.sessionId}-${e.currentTransport}-${Math.floor(Date.now()/6e5)}`}initializePredictionModels(){this.predictionModels.set("performance_trend",{type:"linear_regression",features:["latency","error_rate","throughput"],trained:!1}),this.predictionModels.set("failure_prediction",{type:"classification",features:["error_rate","latency_variance","connection_failures"],trained:!1})}trackRecommendationEffectiveness(e,t){const n=this.appliedRecommendations.get(e);n&&(n.effectiveness=t,n.appliedAt=new Date,console.log(`Recommendation ${e} effectiveness: ${t}`))}getRecommendationStats(){const e=Array.from(this.appliedRecommendations.values()).filter(e=>e.appliedAt),t=e.filter(e=>void 0!==e.effectiveness),n={};return e.forEach(e=>{n[e.type]=(n[e.type]||0)+1}),{total:this.appliedRecommendations.size,applied:e.length,averageEffectiveness:t.length>0?t.reduce((e,t)=>e+(t.effectiveness||0),0)/t.length:0,byType:n}}}class Q extends e.Component{constructor(e,t={}){super(),this.plugin=e,this.config=Object.assign({enableOnboarding:!0,enableDashboard:!0,enableRecommendations:!0,enableAdvancedSettings:!0,autoShowOnboarding:!e.settings.onboardingComplete},t),this.recommendationEngine=new J}onload(){return t(this,void 0,void 0,function*(){console.log("Phase 3 Integration loading..."),this.registerCommands(),yield this.setupComponents(),this.config.autoShowOnboarding&&this.showOnboarding(),this.config.enableRecommendations&&this.startRecommendationEngine(),console.log("Phase 3 Integration loaded successfully")})}onunload(){console.log("Phase 3 Integration unloading..."),this.cleanup()}registerCommands(){this.config.enableOnboarding&&this.plugin.addCommand({id:"show-onboarding",name:"Show Setup Wizard",callback:()=>this.showOnboarding()}),this.config.enableDashboard&&this.plugin.addCommand({id:"show-dashboard",name:"Show Transport Dashboard",callback:()=>this.showDashboard()}),this.config.enableAdvancedSettings&&this.plugin.addCommand({id:"show-advanced-settings",name:"Show Advanced Settings",callback:()=>this.showAdvancedSettings()}),this.config.enableRecommendations&&this.plugin.addCommand({id:"show-recommendations",name:"Show AI Recommendations",callback:()=>this.showRecommendations()}),this.plugin.addCommand({id:"quick-optimize",name:"Quick Performance Optimization",callback:()=>this.quickOptimize()})}setupComponents(){return t(this,void 0,void 0,function*(){this.loadPhase3Styles(),this.config.enableDashboard&&this.setupDashboard(),this.config.enableAdvancedSettings&&this.setupAdvancedSettings()})}loadPhase3Styles(){if(document.getElementById("vaultpilot-phase3-styles"))return;const e=document.createElement("style");e.id="vaultpilot-phase3-styles",e.textContent="\n/* VaultPilot Phase 3 Component Styles */\n\n/* Onboarding Wizard Styles */\n.vaultpilot-onboarding-modal {\n  width: 600px;\n  max-width: 90vw;\n}\n\n.vaultpilot-onboarding {\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.onboarding-header {\n  text-align: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.onboarding-subtitle {\n  color: var(--text-muted);\n  margin-top: 5px;\n}\n\n.onboarding-progress {\n  margin-bottom: 25px;\n}\n\n.progress-steps {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-bottom: 15px;\n}\n\n.progress-step {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.progress-step.active {\n  background-color: var(--interactive-accent);\n  color: var(--text-on-accent);\n}\n\n.progress-step.completed {\n  background-color: var(--color-green);\n  color: white;\n}\n\n.progress-step.inactive {\n  background-color: var(--background-modifier-border);\n  color: var(--text-muted);\n}\n\n.progress-bar {\n  height: 4px;\n  background-color: var(--background-modifier-border);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background-color: var(--interactive-accent);\n  transition: width 0.3s ease;\n}\n\n.onboarding-step-container {\n  min-height: 300px;\n  margin-bottom: 20px;\n}\n\n.onboarding-step {\n  padding: 20px 0;\n}\n\n.onboarding-navigation {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n  padding-top: 20px;\n  border-top: 1px solid var(--background-modifier-border);\n}\n\n/* Transport Dashboard Styles */\n.transport-dashboard {\n  padding: 20px;\n  max-width: 100%;\n  overflow-x: auto;\n}\n\n.dashboard-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 25px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.status-card {\n  background: var(--background-secondary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 8px;\n  padding: 16px;\n  margin: 8px 0;\n}\n\n.status-card.healthy {\n  border-left: 4px solid var(--color-green);\n}\n\n.status-card.warning {\n  border-left: 4px solid var(--color-orange);\n}\n\n.status-card.error {\n  border-left: 4px solid var(--color-red);\n}\n\n.metrics-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 15px;\n  margin: 20px 0;\n}\n\n.metric-card {\n  background: var(--background-primary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 6px;\n  padding: 15px;\n  text-align: center;\n}\n\n.metric-value {\n  font-size: 24px;\n  font-weight: bold;\n  color: var(--interactive-accent);\n}\n\n.metric-label {\n  font-size: 12px;\n  color: var(--text-muted);\n  margin-top: 5px;\n}\n\n/* Advanced Settings Styles */\n.advanced-settings {\n  padding: 20px;\n}\n\n.settings-section {\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.settings-section:last-child {\n  border-bottom: none;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.section-title {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-normal);\n}\n\n.profile-manager {\n  background: var(--background-secondary);\n  border-radius: 8px;\n  padding: 15px;\n  margin: 15px 0;\n}\n\n.profiles-list {\n  margin: 15px 0;\n}\n\n.profile-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  margin: 5px 0;\n  background: var(--background-primary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 4px;\n}\n\n.profile-item.active {\n  border-color: var(--interactive-accent);\n  background: var(--background-modifier-hover);\n}\n\n.config-group {\n  background: var(--background-secondary);\n  border-radius: 6px;\n  padding: 15px;\n  margin: 10px 0;\n}\n\n.config-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 10px 0;\n}\n\n.validation-status {\n  font-size: 12px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  margin-left: 10px;\n}\n\n.validation-status.valid {\n  background: var(--background-modifier-success);\n  color: var(--color-green);\n}\n\n.validation-status.invalid {\n  background: var(--background-modifier-error);\n  color: var(--color-red);\n}\n\n/* Modal Styles */\n.vaultpilot-phase3-modal {\n  width: 700px;\n  max-width: 95vw;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.modal-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid var(--background-modifier-border);\n}\n\n/* Recommendation Engine Styles */\n.recommendations-container {\n  margin: 20px 0;\n}\n\n.recommendation-card {\n  background: var(--background-secondary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 8px;\n  padding: 16px;\n  margin: 12px 0;\n}\n\n.recommendation-card.high-priority {\n  border-left: 4px solid var(--color-red);\n}\n\n.recommendation-card.medium-priority {\n  border-left: 4px solid var(--color-orange);\n}\n\n.recommendation-card.low-priority {\n  border-left: 4px solid var(--color-green);\n}\n\n.recommendation-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.recommendation-title {\n  font-weight: 600;\n  color: var(--text-normal);\n}\n\n.recommendation-actions {\n  display: flex;\n  gap: 8px;\n  margin-top: 15px;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .vaultpilot-onboarding-modal,\n  .vaultpilot-phase3-modal {\n    width: 95vw;\n  }\n  \n  .metrics-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .dashboard-header,\n  .modal-header {\n    flex-direction: column;\n    gap: 10px;\n    text-align: center;\n  }\n  \n  .config-row {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n}\n",document.head.appendChild(e)}setupDashboard(){console.log("Dashboard setup ready")}setupAdvancedSettings(){console.log("Advanced settings setup ready")}showOnboarding(){this.config.enableOnboarding?(this.onboardingWizard&&this.onboardingWizard.close(),this.onboardingWizard=new U(this.plugin.app,this.plugin),this.onboardingWizard.open()):new e.Notice("Onboarding is disabled")}showDashboard(){if(!this.config.enableDashboard)return void new e.Notice("Dashboard is disabled");new G(this.plugin).open()}showAdvancedSettings(){if(!this.config.enableAdvancedSettings)return void new e.Notice("Advanced settings are disabled");new Y(this.plugin).open()}showRecommendations(){return t(this,void 0,void 0,function*(){if(this.config.enableRecommendations){new e.Notice("Generating AI recommendations...");try{const t=yield this.buildRecommendationContext(),n=yield this.recommendationEngine.generateRecommendations(t);if(n.length>0){new X(this.plugin,n,this.recommendationEngine).open()}else new e.Notice("No recommendations available at this time")}catch(t){console.error("Failed to generate recommendations:",t),new e.Notice("Failed to generate recommendations")}}else new e.Notice("Recommendations are disabled")})}quickOptimize(){return t(this,void 0,void 0,function*(){new e.Notice("Running quick optimization...");try{const t=yield this.buildRecommendationContext(),n=(yield this.recommendationEngine.generateRecommendations(t)).filter(e=>"easy"===e.implementation.difficulty&&e.implementation.steps.some(e=>"automatic"===e.action));if(n.length>0){const t=n[0];yield this.applyRecommendation(t),new e.Notice(`âœ… Applied: ${t.title}`)}else new e.Notice('No quick optimizations available. Use "Show AI Recommendations" for manual optimizations.')}catch(t){console.error("Quick optimization failed:",t),new e.Notice("Quick optimization failed")}})}buildRecommendationContext(){return t(this,void 0,void 0,function*(){return{sessionId:`session-${Date.now()}`,timestamp:new Date,currentTransport:P.HTTP,availableTransports:[P.HTTP,P.WEBSOCKET,P.FILESYSTEM],performanceMetrics:{averageLatency:150+100*Math.random(),errorRate:.05*Math.random(),throughput:100+50*Math.random(),reliability:.95+.05*Math.random(),transportUsage:{[P.HTTP]:.7,[P.WEBSOCKET]:.25,[P.FILESYSTEM]:.05},timeWindow:"1h"},userBehavior:{usageFrequency:"medium",peakUsageHours:[9,10,11,14,15,16],preferredFeatures:["dashboard","recommendations"],errorTolerance:"medium",performanceSensitivity:"medium"},environmentContext:{platform:"obsidian",connectivity:"good",bandwidth:50,latency:30,stability:.95}}})}applyRecommendation(e){return t(this,void 0,void 0,function*(){try{console.log(`Applying recommendation: ${e.title}`);const t=e.implementation.steps.filter(e=>"automatic"===e.action);for(const e of t)switch(e.id){case"switch-transport":console.log("Switching transport as recommended");break;case"enable-pooling":console.log("Enabling connection pooling");break;case"enable-monitoring":console.log("Enabling enhanced monitoring");break;default:console.log(`Unknown automatic step: ${e.id}`)}return this.recommendationEngine.trackRecommendationEffectiveness(e.id,.8),!0}catch(e){return console.error("Failed to apply recommendation:",e),!1}})}startRecommendationEngine(){console.log("Starting recommendation engine..."),this.generateBackgroundRecommendations(),setInterval(()=>{this.generateBackgroundRecommendations()},18e5)}generateBackgroundRecommendations(){return t(this,void 0,void 0,function*(){try{const t=yield this.buildRecommendationContext(),n=yield this.recommendationEngine.generateRecommendations(t),i=n.filter(e=>"critical"===e.priority);i.length>0&&new e.Notice(`âš ï¸ ${i.length} critical optimization(s) available. Use Command Palette > "Show AI Recommendations"`),console.log(`Generated ${n.length} recommendations (${i.length} critical)`)}catch(e){console.error("Background recommendation generation failed:",e)}})}cleanup(){this.onboardingWizard&&this.onboardingWizard.close(),this.transportDashboard&&this.transportDashboard.unload(),this.advancedSettings&&this.advancedSettings.unload()}showOnboardingIfNeeded(){return t(this,void 0,void 0,function*(){return!(this.plugin.settings.onboardingComplete||!this.config.enableOnboarding)&&(this.showOnboarding(),!0)})}getRecommendationEngine(){return this.recommendationEngine}refreshDashboard(){return t(this,void 0,void 0,function*(){this.transportDashboard&&console.log("Refreshing dashboard...")})}}class G extends e.Modal{constructor(e){super(e.app),this.plugin=e,this.modalEl.addClass("dashboard-modal")}onOpen(){const{contentEl:e}=this;e.empty(),this.dashboard=new B(e,this.plugin),this.dashboard.load()}onClose(){this.dashboard&&this.dashboard.unload();const{contentEl:e}=this;e.empty()}}class Y extends e.Modal{constructor(e){super(e.app),this.plugin=e,this.modalEl.addClass("advanced-settings-modal")}onOpen(){const{contentEl:e}=this;e.empty(),this.settings=new K(e,this.plugin),this.settings.load()}onClose(){this.settings&&this.settings.unload();const{contentEl:e}=this;e.empty()}}class X extends e.Modal{constructor(e,t,n){super(e.app),this.plugin=e,this.recommendations=t,this.engine=n,this.modalEl.addClass("recommendations-modal")}onOpen(){const{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"ðŸ¤– AI-Powered Recommendations"}),e.createEl("p",{text:"Here are personalized recommendations to optimize your VaultPilot experience:",cls:"recommendations-subtitle"});const t=e.createDiv("recommendations-list");this.recommendations.forEach((e,n)=>{this.renderRecommendation(t,e,n)});const n=e.createDiv("recommendations-footer");n.createEl("p",{text:`Generated ${this.recommendations.length} recommendations based on your usage patterns`,cls:"recommendations-stats"});n.createEl("button",{text:"Close",cls:"mod-cta"}).addEventListener("click",()=>this.close())}renderRecommendation(e,n,i){const a=e.createDiv("recommendation-item");a.addClass(`priority-${n.priority}`);a.createDiv("rec-header").createEl("h3",{text:n.title}).createEl("span",{text:n.priority.toUpperCase(),cls:`priority-badge ${n.priority}`}),a.createEl("p",{text:n.description,cls:"rec-description"});const o=a.createDiv("rec-impact");o.createEl("h4",{text:"Expected Impact:"});const s=o.createEl("ul");s.createEl("li",{text:`Performance: +${n.expectedImpact.performanceImprovement}%`}),s.createEl("li",{text:`Error Reduction: ${n.expectedImpact.errorReduction}%`}),s.createEl("li",{text:`Reliability: +${n.expectedImpact.reliabilityImprovement}%`}),s.createEl("li",{text:`Confidence: ${(100*n.expectedImpact.confidenceScore).toFixed(0)}%`});const r=a.createDiv("rec-implementation");if(r.createEl("h4",{text:"Implementation:"}),r.createEl("p",{text:`Difficulty: ${n.implementation.difficulty} | Time: ${n.implementation.estimatedTime}`}),n.implementation.steps.length>0){const e=r.createEl("ol");n.implementation.steps.forEach(t=>{const n=e.createEl("li");n.createEl("strong",{text:t.title}),n.createSpan({text:` - ${t.description}`}),"automatic"===t.action&&n.createSpan({text:" (Automatic)",cls:"step-automatic"})})}const l=a.createDiv("rec-actions");if(n.implementation.steps.some(e=>"automatic"===e.action)){const e=l.createEl("button",{text:"Apply Automatically",cls:"mod-cta"});e.addEventListener("click",()=>t(this,void 0,void 0,function*(){e.disabled=!0,e.textContent="Applying...";try{(yield this.applyRecommendation(n))?(e.textContent="âœ… Applied",e.removeClass("mod-cta"),e.addClass("mod-success")):(e.textContent="âŒ Failed",e.disabled=!1)}catch(t){e.textContent="âŒ Error",e.disabled=!1}}))}l.createEl("button",{text:"Dismiss",cls:"mod-muted"}).addEventListener("click",()=>{a.style.display="none"});const c=a.createDiv("rec-rationale"),d=c.createEl("button",{text:"Show Rationale",cls:"rationale-toggle"}),u=c.createDiv("rationale-content");u.style.display="none",u.createEl("p",{text:n.rationale}),d.addEventListener("click",()=>{"none"===u.style.display?(u.style.display="block",d.textContent="Hide Rationale"):(u.style.display="none",d.textContent="Show Rationale")})}applyRecommendation(n){return t(this,void 0,void 0,function*(){try{return yield new Promise(e=>setTimeout(e,1e3)),this.engine.trackRecommendationEffectiveness(n.id,.8),new e.Notice(`âœ… Applied recommendation: ${n.title}`),!0}catch(t){return console.error("Failed to apply recommendation:",t),new e.Notice(`âŒ Failed to apply recommendation: ${n.title}`),!1}})}onClose(){const{contentEl:e}=this;e.empty()}}class Z extends e.Component{constructor(e){super(),this.activeProgress=new Map,this.progressContainer=null,this.updateInterval=null,this.plugin=e,this.app=e.app,this.initializeContainer()}initializeContainer(){this.progressContainer=document.createElement("div"),this.progressContainer.className="vaultpilot-progress-container",this.progressContainer.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            pointer-events: none;\n            max-width: 400px;\n        ",document.body.appendChild(this.progressContainer)}showProgress(e){this.activeProgress.set(e.id,e),this.renderProgress(e),e.timeout&&setTimeout(()=>{this.hideProgress(e.id)},e.timeout)}updateProgress(e,t){const n=this.activeProgress.get(e);if(n){const i=Object.assign(Object.assign({},n),t);this.activeProgress.set(e,i),this.renderProgress(i)}}hideProgress(e){this.activeProgress.delete(e);const t=document.getElementById(`progress-${e}`);t&&(t.style.animation="slideOutRight 0.3s ease-in",setTimeout(()=>{t.remove()},300))}renderProgress(e){var t;let n=document.getElementById(`progress-${e.id}`);n?this.updateProgressElement(n,e):(n=this.createProgressElement(e),null===(t=this.progressContainer)||void 0===t||t.appendChild(n))}createProgressElement(e){const t=document.createElement("div");return t.id=`progress-${e.id}`,t.className="vaultpilot-progress-item",t.style.cssText="\n            background: var(--background-primary);\n            border: 1px solid var(--background-modifier-border);\n            border-radius: 8px;\n            padding: 12px 16px;\n            margin-bottom: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            animation: slideInRight 0.3s ease-out;\n            pointer-events: auto;\n            min-width: 300px;\n        ",this.updateProgressElement(t,e),t}updateProgressElement(e,t){const n=t.percentage||0,i=t.eta?this.formatETA(t.eta):"";if(e.innerHTML=`\n            <div class="progress-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n                <div class="progress-title" style="font-weight: 600; color: var(--text-normal);">\n                    ${t.title}\n                </div>\n                ${t.cancelable?'<button class="progress-cancel" style="background: none; border: none; color: var(--text-muted); cursor: pointer;">Ã—</button>':""}\n            </div>\n            ${t.message?`<div class="progress-message" style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 8px;">${t.message}</div>`:""}\n            <div class="progress-bar-container" style="background: var(--background-modifier-border); border-radius: 4px; height: 6px; overflow: hidden;">\n                <div class="progress-bar" style="\n                    background: var(--interactive-accent);\n                    height: 100%;\n                    width: ${n}%;\n                    transition: width 0.3s ease;\n                    border-radius: 4px;\n                "></div>\n            </div>\n            <div class="progress-info" style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8em; color: var(--text-muted);">\n                <span>${Math.round(n)}%</span>\n                ${i?`<span>ETA: ${i}</span>`:""}\n            </div>\n        `,t.cancelable){const n=e.querySelector(".progress-cancel");null==n||n.addEventListener("click",()=>{this.hideProgress(t.id),this.plugin.app.workspace.trigger("vaultpilot:progress-cancelled",t.id)})}}formatETA(e){if(e<60)return`${Math.round(e)}s`;if(e<3600){return`${Math.floor(e/60)}m ${Math.round(e%60)}s`}return`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`}getActiveProgress(){return Array.from(this.activeProgress.values())}clearAllProgress(){for(const e of this.activeProgress.keys())this.hideProgress(e)}onunload(){this.progressContainer&&this.progressContainer.remove(),this.updateInterval&&clearInterval(this.updateInterval)}}class ee extends e.Component{constructor(e){super(),this.cache=new Map,this.requestQueue=new Map,this.maxCacheSize=100,this.defaultTTL=3e5,this.plugin=e,this.initializeMetrics(),this.startCleanupInterval()}initializeMetrics(){this.metrics={totalRequests:0,cacheHits:0,cacheMisses:0,averageResponseTime:0,slowestResponse:0,fastestResponse:1/0,currentCacheSize:0,memoryUsage:0}}optimizedRequest(e,n){return t(this,arguments,void 0,function*(e,t,n={}){const i=performance.now();if(this.metrics.totalRequests++,!n.skipCache){const t=this.getFromCache(e);if(t)return this.metrics.cacheHits++,this.updateResponseTimeMetrics(performance.now()-i),t}this.metrics.cacheMisses++;const a=this.requestQueue.get(e);if(a)return a;const o=this.executeRequest(t,e,n.ttl||this.defaultTTL);this.requestQueue.set(e,o);try{const e=yield o;return this.updateResponseTimeMetrics(performance.now()-i),e}finally{this.requestQueue.delete(e)}})}executeRequest(e,n,i){return t(this,void 0,void 0,function*(){try{const t=yield e();return this.setCache(n,t,i),t}catch(e){throw e}})}getFromCache(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):(t.hitCount++,t.data):null}setCache(e,t,n){this.cache.size>=this.maxCacheSize&&this.evictLeastUsed();const i={data:t,timestamp:Date.now(),ttl:n,hitCount:0,size:this.estimateSize(t)};this.cache.set(e,i),this.updateCacheMetrics()}evictLeastUsed(){let e="",t=1/0;for(const[n,i]of this.cache.entries())i.hitCount<t&&(t=i.hitCount,e=n);e&&this.cache.delete(e)}estimateSize(e){return 2*JSON.stringify(e).length}updateResponseTimeMetrics(e){const t=this.metrics.averageResponseTime,n=this.metrics.totalRequests;this.metrics.averageResponseTime=(t*(n-1)+e)/n,e>this.metrics.slowestResponse&&(this.metrics.slowestResponse=e),e<this.metrics.fastestResponse&&(this.metrics.fastestResponse=e)}updateCacheMetrics(){this.metrics.currentCacheSize=this.cache.size,this.metrics.memoryUsage=Array.from(this.cache.values()).reduce((e,t)=>e+t.size,0)}startCleanupInterval(){setInterval(()=>{this.cleanupExpiredEntries()},6e4)}cleanupExpiredEntries(){const e=Date.now();for(const[t,n]of this.cache.entries())e-n.timestamp>n.ttl&&this.cache.delete(t);this.updateCacheMetrics()}getMetrics(){return Object.assign({},this.metrics)}getCacheHitRate(){const e=this.metrics.cacheHits+this.metrics.cacheMisses;return e>0?this.metrics.cacheHits/e*100:0}clearCache(){this.cache.clear(),this.updateCacheMetrics()}setCacheConfig(e,t){this.maxCacheSize=e,this.defaultTTL=t}onunload(){this.clearCache()}}class te extends e.Component{constructor(e){super(),this.ws=null,this.reconnectInterval=null,this.isConnected=!1,this.messageHandlers=new Map,this.plugin=e,this.setupMessageHandlers()}setupMessageHandlers(){this.messageHandlers.set("progress_update",e=>{const t=this.plugin.enhancementManager;(null==t?void 0:t.progressIndicator)&&t.progressIndicator.updateProgress(e.id,{percentage:e.percentage,message:e.message,eta:e.eta})}),this.messageHandlers.set("performance_stats",e=>{console.log("Performance stats:",e)}),this.messageHandlers.set("ping",()=>{this.send({type:"pong",data:{},timestamp:Date.now()})})}connect(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)try{this.ws=new WebSocket(e),this.ws.onopen=()=>{this.isConnected=!0,console.log("VaultPilot WebSocket connected"),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null)},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("Failed to parse WebSocket message:",e)}},this.ws.onclose=()=>{this.isConnected=!1,console.log("VaultPilot WebSocket disconnected"),this.startReconnect(e)},this.ws.onerror=e=>{console.error("VaultPilot WebSocket error:",e)}}catch(t){console.error("Failed to connect WebSocket:",t),this.startReconnect(e)}}handleMessage(e){const t=this.messageHandlers.get(e.type);t&&t(e.data)}startReconnect(e){this.reconnectInterval||(this.reconnectInterval=window.setInterval(()=>{console.log("Attempting to reconnect VaultPilot WebSocket..."),this.connect(e)},5e3))}send(e){return!(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&(this.ws.send(JSON.stringify(e)),!0)}disconnect(){this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1}isSocketConnected(){return this.isConnected}onunload(){this.disconnect()}}class ne extends e.Component{constructor(e){super(),this.isInitialized=!1,this.plugin=e,this.progressIndicator=new Z(e),this.responseOptimizer=new ee(e),this.webSocketHandler=new te(e)}initialize(){return t(this,void 0,void 0,function*(){if(!this.isInitialized)try{this.addChild(this.progressIndicator),this.addChild(this.responseOptimizer),this.addChild(this.webSocketHandler);const e=this.plugin.settings.backendUrl.replace(/^http/,"ws")+"/api/obsidian/ws/enhanced";this.webSocketHandler.connect(e),this.isInitialized=!0,console.log("VaultPilot Enhancement Manager initialized")}catch(e){console.error("Failed to initialize Enhancement Manager:",e)}})}showProgress(e){this.progressIndicator.showProgress(e)}optimizedAPICall(e,n,i){return t(this,void 0,void 0,function*(){return this.responseOptimizer.optimizedRequest(e,n,i)})}getPerformanceMetrics(){return this.responseOptimizer.getMetrics()}getCacheHitRate(){return this.responseOptimizer.getCacheHitRate()}clearCache(){this.responseOptimizer.clearCache()}isWebSocketConnected(){return this.webSocketHandler.isSocketConnected()}onunload(){this.isInitialized=!1,super.onunload()}}class ie{constructor(e){this.shortcuts=new Map,this.contextMenuEnabled=!0,this.plugin=e,this.app=e.app,this.initializeDefaultShortcuts()}initializeDefaultShortcuts(){[{key:"Enter",modifiers:["Ctrl","Shift"],command:"vaultpilot:open-chat",description:"Open VaultPilot Chat",context:"global"},{key:"KeyS",modifiers:["Ctrl","Shift"],command:"vaultpilot:smart-search",description:"Smart Search",context:"global"},{key:"KeyC",modifiers:["Ctrl","Shift"],command:"vaultpilot:quick-chat",description:"Quick Chat with Selection",context:"editor"},{key:"Space",modifiers:["Ctrl"],command:"vaultpilot:copilot-complete",description:"Get AI Completion",context:"editor"},{key:"KeyW",modifiers:["Ctrl","Shift"],command:"vaultpilot:execute-workflow",description:"Execute Workflow",context:"global"},{key:"KeyA",modifiers:["Ctrl","Shift"],command:"vaultpilot:analyze-vault",description:"Analyze Current Vault",context:"global"},{key:"KeyD",modifiers:["Ctrl","Shift"],command:"vaultpilot:open-dashboard",description:"Open VaultPilot Dashboard",context:"global"},{key:"KeyP",modifiers:["Ctrl","Shift"],command:"vaultpilot:plan-my-day",description:"Plan My Day",context:"global"},{key:"KeyV",modifiers:["Ctrl","Shift"],command:"vaultpilot:vault-structure",description:"View Vault Structure",context:"global"},{key:"KeyF",modifiers:["Ctrl","Shift"],command:"vaultpilot:file-operations",description:"File Operations",context:"global"},{key:"KeyO",modifiers:["Ctrl","Shift"],command:"vaultpilot:vault-organizer",description:"Vault Organizer",context:"global"},{key:"KeyB",modifiers:["Ctrl","Shift"],command:"vaultpilot:batch-operations",description:"Batch Operations",context:"global"},{key:"KeyH",modifiers:["Ctrl","Shift"],command:"vaultpilot:show-shortcuts",description:"Show Keyboard Shortcuts",context:"global"},{key:"KeyR",modifiers:["Ctrl","Shift"],command:"vaultpilot:refresh-cache",description:"Refresh Cache",context:"global"},{key:"KeyM",modifiers:["Ctrl","Shift"],command:"vaultpilot:performance-metrics",description:"Show Performance Metrics",context:"global"},{key:"KeyG",modifiers:["Ctrl","Shift"],command:"vaultpilot:agent-marketplace",description:"Agent Marketplace",context:"global"},{key:"KeyE",modifiers:["Ctrl","Shift"],command:"vaultpilot:agent-evolution",description:"Agent Evolution Status",context:"global"},{key:"KeyQ",modifiers:["Alt"],command:"vaultpilot:quick-note",description:"Quick Note Creation",context:"global"},{key:"KeyI",modifiers:["Ctrl","Alt"],command:"vaultpilot:insert-template",description:"Insert Template",context:"editor"},{key:"KeyL",modifiers:["Ctrl","Shift"],command:"vaultpilot:link-analyzer",description:"Analyze Links",context:"editor"},{key:"KeyT",modifiers:["Ctrl","Shift"],command:"vaultpilot:tag-manager",description:"Tag Manager",context:"global"},{key:"KeyZ",modifiers:["Ctrl","Shift"],command:"vaultpilot:enhancement-demo",description:"Enhancement Features Demo",context:"global"}].forEach(e=>{this.addShortcut(e)})}addShortcut(e){const t=this.getShortcutKey(e);this.shortcuts.set(t,e)}removeShortcut(e){const t=this.getShortcutKey(e);this.shortcuts.delete(t)}getShortcutKey(e){return`${e.modifiers.sort().join("+")}_${e.key}`}handleKeyDown(e){const t=[];e.ctrlKey&&t.push("Ctrl"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),e.metaKey&&t.push("Meta");const n=e.code,i=`${t.sort().join("+")}_${n}`,a=this.shortcuts.get(i);if(a&&!1!==a.enabled){const t=this.getCurrentContext();if(this.isShortcutValidForContext(a,t))return e.preventDefault(),e.stopPropagation(),this.executeCommand(a.command),!0}return!1}getCurrentContext(){if(this.app.workspace.getActiveViewOfType(e.MarkdownView))return"editor";return document.querySelectorAll(".modal").length>0?"modal":"global"}isShortcutValidForContext(e,t){return!e.context||(e.context===t||"global"===e.context)}executeCommand(t){var n,i;const a=t.replace("vaultpilot:","");switch(a){case"open-chat":this.plugin.openChatModal();break;case"smart-search":this.plugin.openSmartSearchModal();break;case"quick-chat":const t=null===(n=this.app.workspace.getActiveViewOfType(e.MarkdownView))||void 0===n?void 0:n.editor;t&&this.plugin.quickChatWithSelection(t);break;case"copilot-complete":const o=null===(i=this.app.workspace.getActiveViewOfType(e.MarkdownView))||void 0===i?void 0:i.editor;o&&this.plugin.getCopilotCompletion(o);break;case"execute-workflow":this.plugin.openWorkflowModal();break;case"analyze-vault":this.plugin.analyzeVault();break;case"open-dashboard":this.plugin.activateFullTabView();break;case"plan-my-day":this.plugin.planMyDay();break;case"vault-structure":this.plugin.openVaultStructureModal();break;case"file-operations":this.plugin.openFileOperationsModal();break;case"vault-organizer":this.plugin.openVaultOrganizerModal();break;case"batch-operations":this.plugin.openBatchOperationsModal();break;case"show-shortcuts":this.showShortcutsHelp();break;case"refresh-cache":this.refreshCache();break;case"performance-metrics":this.showPerformanceMetrics();break;case"agent-marketplace":this.openAgentMarketplace();break;case"agent-evolution":this.showAgentEvolution();break;case"quick-note":this.createQuickNote();break;case"insert-template":this.insertTemplate();break;case"link-analyzer":this.analyzeLinks();break;case"tag-manager":this.openTagManager();break;case"enhancement-demo":this.openEnhancementDemo();break;default:new e.Notice(`Unknown command: ${a}`)}}showShortcutsHelp(){const t=Array.from(this.shortcuts.values()),n=this.generateShortcutsHelpContent(t),i=new e.Modal(this.app);i.titleEl.textContent="VaultPilot Keyboard Shortcuts",i.contentEl.innerHTML=n,i.open()}generateShortcutsHelpContent(e){const t=this.categorizeShortcuts(e);let n='<div class="vaultpilot-shortcuts-help">';for(const[e,i]of Object.entries(t))n+='<div class="shortcut-category">',n+=`<h3>${e}</h3>`,n+='<div class="shortcut-list">',i.forEach(e=>{const t=`${e.modifiers.join(" + ")} + ${e.key.replace("Key","")}`;n+='<div class="shortcut-item">',n+=`<span class="shortcut-keys">${t}</span>`,n+=`<span class="shortcut-desc">${e.description}</span>`,n+="</div>"}),n+="</div></div>";return n+="</div>",n}categorizeShortcuts(e){const t={"Core Features":[],"Vault Management":[],"Agent Features":[],"Quick Actions":[],System:[]};return e.forEach(e=>{const n=e.command.replace("vaultpilot:","");["open-chat","copilot-complete","execute-workflow","analyze-vault"].includes(n)?t["Core Features"].push(e):["vault-structure","file-operations","vault-organizer","batch-operations"].includes(n)?t["Vault Management"].push(e):["agent-marketplace","agent-evolution"].includes(n)?t["Agent Features"].push(e):["quick-note","insert-template","link-analyzer","tag-manager"].includes(n)?t["Quick Actions"].push(e):t.System.push(e)}),t}refreshCache(){new e.Notice("Cache refreshed successfully")}showPerformanceMetrics(){new e.Notice("Performance metrics feature coming soon")}openAgentMarketplace(){new e.Notice("Agent marketplace feature coming soon")}showAgentEvolution(){new e.Notice("Agent evolution status feature coming soon")}createQuickNote(){this.app.vault.create(`Quick Note ${(new Date).toISOString().slice(0,19)}.md`,"# Quick Note\n\n").then(e=>{this.app.workspace.getLeaf().openFile(e)})}insertTemplate(){new e.Notice("Template insertion feature coming soon")}analyzeLinks(){new e.Notice("Link analyzer feature coming soon")}openTagManager(){new e.Notice("Tag manager feature coming soon")}openEnhancementDemo(){Promise.resolve().then(function(){return le}).then(({VaultPilotEnhancementDemo:e})=>{new e(this.app,this.plugin).open()}).catch(t=>{console.error("Failed to load enhancement demo:",t),new e.Notice("Enhancement demo failed to load")})}getShortcuts(){return Array.from(this.shortcuts.values())}isEnabled(){return this.contextMenuEnabled}setEnabled(e){this.contextMenuEnabled=e}}class ae{static createEnhancedCommands(t){return[{id:"vaultpilot-enhanced-chat",name:"Enhanced AI Chat",description:"Open enhanced AI chat with real-time progress",callback:()=>t.openChatModal(),category:"AI Features",priority:1},{id:"vaultpilot-smart-search",name:"Smart Search",description:"AI-powered search with context awareness",callback:()=>t.openSmartSearchModal(),category:"Search",priority:2},{id:"vaultpilot-quick-completion",name:"Quick AI Completion",description:"Get AI completion for current context",editorCallback:e=>t.getCopilotCompletion(e),category:"AI Features",priority:3},{id:"vaultpilot-workflow-enhanced",name:"Enhanced Workflow Execution",description:"Execute workflows with progress tracking",callback:()=>t.openWorkflowModal(),category:"Automation",priority:4},{id:"vaultpilot-vault-analysis",name:"Enhanced Vault Analysis",description:"Comprehensive vault analysis with optimization",callback:()=>t.analyzeVault(),category:"Analytics",priority:5},{id:"vaultpilot-enhancement-demo",name:"Enhancement Features Demo",description:"Demonstrate keyboard shortcuts, progress indicators, and performance features",callback:()=>{Promise.resolve().then(function(){return le}).then(({VaultPilotEnhancementDemo:e})=>{new e(t.app,t).open()}).catch(t=>{console.error("Failed to load enhancement demo:",t),new e.Notice("Enhancement demo failed to load")})},category:"Demo",priority:10}]}}class oe extends e.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return t(this,void 0,void 0,function*(){var t,n,i,d;yield this.loadSettings(),this.loadEnhancedUIStyles(),d=this.app,c=d,this.apiClient=new g(this.settings.backendUrl,this.settings.apiKey),(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)&&this.initializeVaultManagement(),(null===(n=this.settings.modelSelection)||void 0===n?void 0:n.enabled)&&this.initializeModelSelection().catch(e=>{this.settings.debugMode&&console.warn("Model selection initialization failed during plugin load:",e)});try{let t=yield this.apiClient.healthCheck();if(!t.success&&(null===(i=t.error)||void 0===i?void 0:i.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const e=yield this.apiClient.simpleHealthCheck();e.success&&e.data&&(t={success:!0,data:{status:e.data.status,version:"unknown"}})}t.success?(new e.Notice("âœ… VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",t.error),new e.Notice("âš ï¸ EvoAgentX backend offline - some features may not work",5e3))}catch(t){console.error("Health check error:",t),new e.Notice("âš ï¸ Cannot connect to EvoAgentX backend",5e3)}this.registerView(o,e=>new s(e,this)),this.registerView(r,e=>new l(e,this));const u=this.addRibbonIcon("bot","VaultPilot",e=>{e.ctrlKey||e.metaKey?this.activateFullTabView():this.openChatModal()});u.addClass("vaultpilot-ribbon-class"),u.title="VaultPilot (Ctrl+click for Dashboard)",this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:e=>this.getCopilotCompletion(e)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:e=>this.quickChatWithSelection(e)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:e=>this.planTasksFromNote(e)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"plan-my-day-debug",name:"Plan My Day - Debug Connection",callback:()=>this.debugPlanMyDay()}),this.addCommand({id:"test-model-selection",name:"Test Smart Model Selection",callback:()=>this.testModelSelection()}),this.addCommand({id:"show-model-health",name:"Show Model Health Status",callback:()=>this.showModelHealth()}),this.addCommand({id:"retry-model-selection",name:"Retry Model Selection Initialization",callback:()=>this.retryModelSelectionManual()}),this.addCommand({id:"check-service-status",name:"Check VaultPilot Service Status",callback:()=>this.checkServiceStatus()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.addCommand({id:"open-vaultpilot-full-tab",name:"Open VaultPilot Dashboard",callback:()=>this.activateFullTabView()}),this.registerVaultManagementCommands(),this.initializePhase3(),this.initializeEnhancementManager(),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new a(this.app,this))})}onunload(){return t(this,void 0,void 0,function*(){this.app.workspace.detachLeavesOfType(o),this.app.workspace.detachLeavesOfType(r),this.disconnectWebSocket(),yield this.disconnectModelSelection(),this.disablePhase3(),this.disableEnhancementManager()})}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:e=>{console.log("WebSocket chat update:",e)},onWorkflowProgress:t=>{new e.Notice(`Workflow: ${t.step}`,2e3)},onCopilot:e=>{this.handleCopilotSuggestion(e)},onVaultSync:e=>{console.log("Vault sync update:",e)},onIntentDebug:e=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",e)},onError:t=>{new e.Notice(`WebSocket error: ${t}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new e.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new e.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new h(this.app,this).open()}openWorkflowModal(){new p(this.app,this).open()}analyzeVault(){return t(this,void 0,void 0,function*(){const t=new e.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let i="";for(const e of n.slice(0,10)){const t=yield this.app.vault.read(e);i+=`=== ${e.name} ===\n${t}\n\n`}const a=yield this.apiClient.analyzeVaultContext({content:i,analysis_type:"insights"});if(t.hide(),!a.success||!a.data)throw new Error(a.error||"Analysis failed");{const t=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${t}.md`;let i=`# Vault Analysis - ${t}\n\n`;i+=`## Analysis\n\n${a.data.analysis}\n\n`,a.data.insights&&a.data.insights.length>0&&(i+="## Key Insights\n\n",a.data.insights.forEach(e=>{i+=`- ${e}\n`}),i+="\n"),a.data.recommendations&&a.data.recommendations.length>0&&(i+="## Recommendations\n\n",a.data.recommendations.forEach(e=>{i+=`- ${e}\n`})),yield this.app.vault.create(n,i),new e.Notice(`Vault analysis saved as ${n}`)}}catch(n){t.hide(),new e.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return t(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new e.Notice("Copilot is disabled in settings");const t=n.getCursor(),i=n.getLine(t.line).substring(0,t.ch),a=n.getValue();if(a&&0!==a.trim().length)try{const o=yield this.apiClient.getCopilotCompletion({text:a,cursor_position:n.posToOffset(t),file_type:"markdown",context:i});o.success&&o.data?(n.replaceRange(o.data.completion,t),new e.Notice("Completion inserted",2e3)):new e.Notice(`Copilot error: ${o.error}`)}catch(t){new e.Notice(`Copilot error: ${t instanceof Error?t.message:"Unknown error"}`)}else new e.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return t(this,void 0,void 0,function*(){const t=n.getSelection();if(t)try{const i=yield this.apiClient.chat({message:`Please explain or analyze this text: "${t}"`,vault_context:n.getValue()});if(i.success&&i.data){const t=n.getCursor("to"),a=`\n\n**VaultPilot Analysis:**\n${i.data.response}\n\n`;n.replaceRange(a,t),new e.Notice("Analysis inserted",2e3)}else new e.Notice(`Chat error: ${i.error}`)}catch(t){new e.Notice(`Chat error: ${t instanceof Error?t.message:"Unknown error"}`)}else new e.Notice("No text selected")})}planTasksFromNote(n){return t(this,void 0,void 0,function*(){const t=n.getValue(),i=this.app.workspace.getActiveFile();if(!t.trim())return void new e.Notice("No content to analyze");const a=new e.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==i?void 0:i.name)||"Untitled"}`,context:t,timeframe:"1 week"});if(a.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const t=(new Date).toISOString().split("T")[0],a=`Task Plan - ${(null==i?void 0:i.basename)||"Untitled"} - ${t}.md`;let o=`# ${n.data.plan.title}\n\n`;o+=`${n.data.plan.description}\n\n`,o+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(o+="## Tasks\n\n",n.data.plan.tasks.forEach(e=>{const t="completed"===e.status?"[x]":"[ ]";o+=`${t} **${e.title}** (${e.priority} priority)\n`,o+=`   ${e.description}\n`,o+=`   *Estimated time: ${e.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(o+="## Milestones\n\n",n.data.milestones.forEach(e=>{o+=`- **${e.title}** (${e.target_date})\n`,o+=`  ${e.description}\n\n`})),yield this.app.vault.create(a,o),new e.Notice(`Task plan saved as ${a}`)}}catch(t){a.hide(),new e.Notice(`Task planning error: ${t instanceof Error?t.message:"Unknown error"}`)}})}planMyDay(){return t(this,void 0,void 0,function*(){var n,i;console.log("ðŸš€ [Plan My Day] Command started");const a=this.app.workspace.getActiveFile();if(!a)return console.warn("âš ï¸ [Plan My Day] No active file found"),void new e.Notice("No active noteâ€”open today's daily note first.");console.log("ðŸ“ [Plan My Day] Active file:",{name:a.name,path:a.path,extension:a.extension});const o=new e.Notice("Planning your day with AI...",0);try{console.log("ðŸ“– [Plan My Day] Reading file content...");const s=yield this.app.vault.read(a);if(console.log("ðŸ“ [Plan My Day] File content read:",{length:s.length,hasContent:s.trim().length>0,firstLine:s.split("\n")[0],lineCount:s.split("\n").length}),console.log("ðŸ” [Plan My Day] Checking API client..."),console.log("ðŸ”— [Plan My Day] API client status:",{exists:!!this.apiClient,type:typeof this.apiClient,isConnected:this.apiClient?"available":"not available"}),!this.apiClient){const e="API client not initialized. Check VaultPilot settings and connection.";throw console.error("âŒ [Plan My Day] Error:",e),new Error(e)}console.log("ðŸ“¤ [Plan My Day] Fetching schedule from EvoAgentX...");const{scheduleMarkdown:r,headline:l}=yield function(e,n){return t(this,void 0,void 0,function*(){var t,i,a;if(console.log("ðŸ”„ [Plan My Day] Starting schedule fetch..."),console.log("ðŸ“ [Plan My Day] Note text length:",e.length),console.log("ðŸ”— [Plan My Day] API client type:",typeof n),!n){const e="API client is null or undefined";throw console.error("âŒ [Plan My Day] Error:",e),new Error(e)}if(!n.planTasks){const e="API client does not have planTasks method";throw console.error("âŒ [Plan My Day] Error:",e),console.log("ðŸ” [Plan My Day] Available methods:",Object.getOwnPropertyNames(n)),new Error(e)}try{console.log("ðŸ“¤ [Plan My Day] Sending request to EvoAgentX...");const o=yield n.planTasks({goal:"Create a daily schedule based on this note content",context:e,timeframe:"1 day"});if(console.log("ðŸ“¥ [Plan My Day] Received response:",{success:o.success,hasData:!!o.data,error:o.error}),console.log("ðŸ” [Plan My Day] Raw response data:",JSON.stringify(o.data,null,2)),console.log("ðŸ” [Plan My Day] Response data type:",typeof o.data),console.log("ðŸ” [Plan My Day] Response data keys:",o.data?Object.keys(o.data):"no data"),!o.success){const e=o.error||"Failed to generate schedule";throw console.error("âŒ [Plan My Day] API Error:",e),new Error(e)}if(!o.data){const e="No data in API response";throw console.error("âŒ [Plan My Day] Error:",e),console.log("ðŸ” [Plan My Day] Full response:",o),new Error(e)}const s=o.data.data||o.data;if(console.log("ðŸ“‹ [Plan My Day] Response data structure:",{hasPlan:!!s.plan,planKeys:s.plan?Object.keys(s.plan):null,hasTasks:!!(null===(t=s.plan)||void 0===t?void 0:t.tasks),taskCount:(null===(a=null===(i=s.plan)||void 0===i?void 0:i.tasks)||void 0===a?void 0:a.length)||0}),!s.plan){const e="No plan data in API response";throw console.error("âŒ [Plan My Day] Error:",e),console.log("ðŸ” [Plan My Day] Full response data:",o.data),console.log("ðŸ” [Plan My Day] Actual data:",s),new Error(e)}const r=s.plan.tasks||[];if(console.log("ðŸ“ [Plan My Day] Processing tasks:",r.length),0===r.length)return console.warn("âš ï¸ [Plan My Day] No tasks in response, creating fallback schedule"),{scheduleMarkdown:"| Time | Task |\n|------|------|\n| 9:00 AM | Plan your day |\n| 10:00 AM | Start working |\n| 12:00 PM | Lunch break |",headline:"ðŸ“… Basic schedule created (no tasks found in note)"};let l="| Time | Task |\n|------|------|\n";r.forEach((e,t)=>{var n,i;console.log(`ðŸ“‹ [Plan My Day] Processing task ${t+1}:`,{title:e.title,description:null===(n=e.description)||void 0===n?void 0:n.substring(0,100),priority:e.priority,estimatedTime:e.estimated_time});const a=null===(i=e.description)||void 0===i?void 0:i.match(/(\d{1,2}:\d{2})/),o=a?a[1]:`${9+Math.floor(1.5*t)}:${30*t%60||"00"}`;l+=`| ${o} | ${e.title} |\n`});const c={scheduleMarkdown:l,headline:`âœ¨ Smart schedule created with ${r.length} tasks!`};return console.log("âœ… [Plan My Day] Schedule generated successfully:",{markdownLength:l.length,taskCount:r.length,headline:c.headline}),c}catch(e){throw console.error("âŒ [Plan My Day] Fetch error:",e),console.error("ðŸ” [Plan My Day] Error stack:",e instanceof Error?e.stack:"No stack trace"),e instanceof Error?new Error(`Schedule fetch failed: ${e.message}`):new Error(`Schedule fetch failed: ${String(e)}`)}})}(s,this.apiClient);if(console.log("ðŸ“‹ [Plan My Day] Schedule received:",{markdownLength:r.length,headline:l,firstLine:r.split("\n")[0]}),console.log("âœ… [Plan My Day] Validating schedule..."),!function(e){console.log("ðŸ” [Plan My Day] Validating schedule markdown:",{length:e.length,trimmedLength:e.trim().length,isString:"string"==typeof e,preview:e.substring(0,100)});const t=e.trim().length>0;return console.log("âœ… [Plan My Day] Validation result:",t),t}(r)){const e="Invalid schedule data received from API";throw console.error("âŒ [Plan My Day] Validation failed:",{scheduleMarkdown:r.substring(0,200),length:r.length}),new Error(e)}console.log("ðŸ“ [Plan My Day] Injecting schedule into note...");const c=m(s),d=v(s);console.log("ðŸ” [Plan My Day] Existing sections:",{hasPlanWrapper:!!c,hasScheduleSection:!!d,planContent:null===(n=null==c?void 0:c[2])||void 0===n?void 0:n.substring(0,50),scheduleHeading:null===(i=null==d?void 0:d[1])||void 0===i?void 0:i.substring(0,50)});const u=function(e,t){var n,i,a;console.log("ðŸ“ [Plan My Day] Injecting schedule:",{originalLength:e.length,scheduleLength:t.length,hasOriginalContent:e.trim().length>0});const o=m(e);if(o){console.log("ðŸ”„ [Plan My Day] Replacing existing plan section with comment wrapper"),console.log("ðŸ“‹ [Plan My Day] Found wrapped plan section:",{startComment:o[1],contentLength:(null===(n=o[2])||void 0===n?void 0:n.length)||0,endComment:o[3]});const[i,a,,s]=o,r=`${a}\n${t}\n${s}`,l=e.replace(i,r);return console.log("âœ… [Plan My Day] Plan section replaced within comment wrapper"),l}const s=v(e);if(s){console.log("ðŸ”„ [Plan My Day] Replacing existing schedule section"),console.log("ðŸ“‹ [Plan My Day] Found section:",{headingMatch:null===(i=s[1])||void 0===i?void 0:i.substring(0,50),contentMatch:null===(a=s[2])||void 0===a?void 0:a.substring(0,100)});const[n,o]=s,r=o+t,l=e.replace(n,r);return console.log("âœ… [Plan My Day] Schedule section replaced"),l}{console.log("âž• [Plan My Day] Adding new plan section with comment wrapper at top");const n=`\x3c!-- vp:plan:start --\x3e\n${t}\n\x3c!-- vp:plan:end --\x3e\n\n`+e;return console.log("âœ… [Plan My Day] New plan section with wrapper added at top"),n}}(s,r);console.log("ðŸ’¾ [Plan My Day] Updating file...",{originalLength:s.length,updatedLength:u.length,changed:s!==u}),yield this.app.vault.modify(a,u),console.log("âœ… [Plan My Day] File updated successfully"),o.hide();const h=l?`${l} âœ…`:"Schedule inserted âœ…";console.log("ðŸŽ‰ [Plan My Day] Success:",h),new e.Notice(h)}catch(t){if(console.error("âŒ [Plan My Day] Operation failed:",t),console.error("ðŸ” [Plan My Day] Error details:",{message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:"No stack trace",type:typeof t,name:t instanceof Error?t.name:"Unknown"}),o.hide(),t instanceof Error){const n=t.message;console.log("ðŸ” [Plan My Day] Analyzing error message:",n),n.includes("API client not initialized")?(console.error("âŒ [Plan My Day] API client not initialized"),new e.Notice("Planning error: VaultPilot not connected to EvoAgentX. Check settings and restart plugin.")):n.includes("does not have planTasks method")?(console.error("âŒ [Plan My Day] API client missing planTasks method"),new e.Notice("Planning error: EvoAgentX API client outdated. Please update VaultPilot plugin.")):n.includes("JSON")||n.includes("Invalid schedule data")?(console.error("âŒ [Plan My Day] Invalid response format"),new e.Notice("Planning error: Invalid response format from EvoAgentX")):n.includes("fetch")||n.includes("network")||n.includes("Failed to fetch")?(console.error("âŒ [Plan My Day] Network error"),new e.Notice("Planning error: Unable to connect to EvoAgentX server. Check your connection and server status.")):n.includes("Failed to generate schedule")||n.includes("Schedule fetch failed")?(console.error("âŒ [Plan My Day] Schedule generation failed"),new e.Notice("Planning error: EvoAgentX task planning failed. Check server logs for details.")):n.includes("No data in API response")?(console.error("âŒ [Plan My Day] Empty API response"),new e.Notice("Planning error: EvoAgentX returned empty response. Try again or check server status.")):(console.error("âŒ [Plan My Day] Unhandled error"),new e.Notice(`Planning error: ${n.substring(0,100)}${n.length>100?"...":""}`))}else console.error("âŒ [Plan My Day] Non-Error object thrown"),new e.Notice("Planning error: Unknown error occurred with EvoAgentX");console.log("ðŸ” [Plan My Day] Full error log completed")}})}debugPlanMyDay(){return t(this,void 0,void 0,function*(){console.log("ðŸ” [Plan My Day Debug] Starting comprehensive debug..."),y.clearLogs();const t=new e.Notice("Running Plan My Day diagnostics...",0);try{const n=this.app.workspace.getActiveFile();y.log("ðŸ“ Active file check",{hasActiveFile:!!n,fileName:null==n?void 0:n.name,fileExtension:null==n?void 0:n.extension});const i=y.analyzeApiClient(this.apiClient);if(y.log("ðŸ”— API client analysis",i),this.apiClient){const e=yield y.testConnection(this.apiClient);if(y.log("ðŸŒ Connection test result",e),e.success){const e=yield y.testTaskPlanning(this.apiClient,"Test note with some tasks:\n- Write code\n- Test functionality\n- Review results");y.log("ðŸ“‹ Task planning test result",e)}}y.log("âš™ï¸ Plugin settings",{backendUrl:this.settings.backendUrl,hasApiKey:!!this.settings.apiKey,debugMode:this.settings.debugMode}),t.hide();const a=y.getLogs();console.log("ðŸ” [Plan My Day Debug] Complete diagnostic log:",a);const o=a.slice(-5).join("\n");if(new e.Notice(`Debug complete! Check console for full logs.\n\nLast entries:\n${o}`,1e4),n){const t=`# Plan My Day Debug Report\n\nGenerated: ${(new Date).toISOString()}\n\n## Diagnostic Results\n\n\`\`\`\n${y.exportLogs()}\n\`\`\``;yield this.app.vault.create(`Plan My Day Debug - ${Date.now()}.md`,t),new e.Notice("Debug report saved as new note!")}}catch(n){t.hide(),y.error("Debug process failed",n),new e.Notice(`Debug failed: ${n instanceof Error?n.message:String(n)}`)}})}activateView(){return t(this,void 0,void 0,function*(){const e=this.app.workspace.getLeavesOfType(o);if(0===e.length){const e=this.app.workspace.getRightLeaf(!1);e&&(yield e.setViewState({type:o,active:!0}))}else this.app.workspace.revealLeaf(e[0])})}activateFullTabView(){return t(this,void 0,void 0,function*(){const e=this.app.workspace.getLeavesOfType(r);if(0===e.length){const e=this.app.workspace.getLeaf("tab");e&&(yield e.setViewState({type:r,active:!0}))}else this.app.workspace.revealLeaf(e[0])})}initializeVaultManagement(){var e;(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)&&(this.vaultClient=new w(this.settings.backendUrl,this.settings.apiKey),this.checkVaultManagementAvailability(),this.settings.debugMode&&console.log("Vault management initialized"))}checkVaultManagementAvailability(){return t(this,void 0,void 0,function*(){try{if(404===(yield fetch(`${this.settings.backendUrl}/api/obsidian/vault/structure`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},this.settings.apiKey&&{Authorization:`Bearer ${this.settings.apiKey}`}),body:JSON.stringify({include_content:!1,max_depth:1})})).status)return this.disableVaultManagement(),this.settings.debugMode&&console.log("VaultPilot: Vault management endpoints not available, disabling features"),!1}catch(e){this.settings.debugMode&&console.log("VaultPilot: Could not check vault management availability:",e)}return!0})}disableVaultManagement(){this.vaultClient=null,this.settings.debugMode&&console.log("Vault management disabled")}registerVaultManagementCommands(){[{id:"vaultpilot-vault-structure",name:"View Vault Structure",callback:function(){console.log("Opening vault structure modal"),this.openVaultStructureModal?this.openVaultStructureModal():new e.Notice("Vault structure feature not available")}},{id:"vaultpilot-smart-search",name:"Smart Vault Search",callback:function(){console.log("Opening smart search modal"),this.openSmartSearchModal?this.openSmartSearchModal():new e.Notice("Smart search feature not available")}},{id:"vaultpilot-file-operations",name:"File Operations Manager",callback:function(){console.log("Opening file operations modal"),this.openFileOperationsModal?this.openFileOperationsModal():new e.Notice("File operations feature not available")}},{id:"vaultpilot-organize-vault",name:"AI Vault Organization",callback:function(){console.log("Opening vault organizer modal"),this.openVaultOrganizerModal?this.openVaultOrganizerModal():new e.Notice("Vault organizer feature not available")}},{id:"vaultpilot-batch-operations",name:"Batch File Operations",callback:function(){console.log("Opening batch operations modal"),this.openBatchOperationsModal?this.openBatchOperationsModal():new e.Notice("Batch operations feature not available")}},{id:"vaultpilot-quick-search-selection",name:"Quick Search Selected Text",editorCallback:function(t){const n=t.getSelection();n.trim()?(console.log("Quick search for:",n.trim()),this.openSmartSearchModal?this.openSmartSearchModal(n.trim()):new e.Notice("Smart search feature not available")):new e.Notice("Please select text to search for")}},{id:"vaultpilot-vault-health-check",name:"Vault Health Check",callback:function(){return t(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new e.Notice("Vault management not initialized");new e.Notice("Running vault health check...");const t=yield this.vaultClient.testConnection();if(!t.success)return void new e.Notice(`Health check failed: ${t.message}`,5e3);const n=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:1}),i=yield this.vaultClient.searchVault({query:"test",max_results:1});new e.Notice(`âœ… Vault Health Check Passed\nðŸ“ ${n.total_files} files, ${n.total_folders} folders\nðŸ” Search: ${i.results.length} results\nðŸ’¾ Size: ${(n.total_size/1024/1024).toFixed(2)} MB`,8e3)}catch(t){console.error("Vault health check failed:",t),new e.Notice(`âŒ Health check failed: ${t.message}`,5e3)}})}},{id:"vaultpilot-vault-backup",name:"Create Vault Backup",callback:function(){return t(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new e.Notice("Vault management not initialized");new e.Notice("Creating vault backup...");const t=yield this.vaultClient.backupVault({include_settings:!0,compression:!0,backup_name:`vaultpilot-backup-${(new Date).toISOString().split("T")[0]}`});new e.Notice(`âœ… Backup created successfully\nðŸ“¦ ${t.files_backed_up} files\nðŸ’¾ Size: ${(t.backup_size/1024/1024).toFixed(2)} MB\nðŸ“ Location: ${t.backup_path}`,8e3)}catch(t){console.error("Backup failed:",t),new e.Notice(`âŒ Backup failed: ${t.message}`,5e3)}})}},{id:"vaultpilot-search-content",name:"Search Content",editorCallback:function(t){const n=t.getSelection().trim()||"Enter search query";this.openSmartSearchModal?this.openSmartSearchModal(n,"content"):new e.Notice("Smart search feature not available")}},{id:"vaultpilot-search-filenames",name:"Search Filenames",callback:function(){this.openSmartSearchModal?this.openSmartSearchModal("","filename"):new e.Notice("Smart search feature not available")}},{id:"vaultpilot-recent-files",name:"View Recent Files",callback:function(){return t(this,void 0,void 0,function*(){var t,n;try{if(!this.vaultClient)return void new e.Notice("Vault management not initialized");const t=yield this.vaultClient.getVaultStructure({include_content:!1});if(0===t.recent_files.length)return void new e.Notice("No recent files found");const n=t.recent_files.slice(0,10).map(e=>`â€¢ ${e.name} (${e.modified})`).join("\n");new e.Notice(`ðŸ“ Recent Files:\n${n}`,1e4)}catch(i){if(console.error("Failed to get recent files:",i),(null===(t=i.message)||void 0===t?void 0:t.includes("Not Found"))||(null===(n=i.message)||void 0===n?void 0:n.includes("404"))){const t=this.app.vault.getMarkdownFiles().sort((e,t)=>t.stat.mtime-e.stat.mtime).slice(0,10);if(0===t.length)return void new e.Notice("No recent files found");const n=t.map(e=>`â€¢ ${e.basename} (${new Date(e.stat.mtime).toLocaleDateString()})`).join("\n");new e.Notice(`ðŸ“ Recent Files (Local):\n${n}`,1e4)}else new e.Notice(`âŒ Failed to get recent files: ${i.message}`,5e3)}})}}].forEach(e=>{var t,n;this.addCommand(Object.assign(Object.assign({},e),{callback:null===(t=e.callback)||void 0===t?void 0:t.bind(this),editorCallback:null===(n=e.editorCallback)||void 0===n?void 0:n.bind(this)}))})}openVaultStructureModal(){this.vaultClient?new E(this.app,this).open():new e.Notice("Vault management not available")}openSmartSearchModal(t,n){if(!this.vaultClient)return void new e.Notice("Vault management not available");const i=new T(this.app,this);t&&i.setInitialQuery(t,n),i.open()}openFileOperationsModal(t,n){if(!this.vaultClient)return void new e.Notice("Vault management not available");const i=new M(this.app,this);t&&i.setInitialPath(t),n&&i.setOperation(n),i.open()}openVaultOrganizerModal(){new e.Notice("Vault organizer modal not yet implemented")}openBatchOperationsModal(){new e.Notice("Batch operations modal not yet implemented")}initializePhase3(){try{this.phase3Integration=new Q(this,{autoShowOnboarding:!this.settings.onboardingComplete}),this.phase3Integration.onload(),this.settings.debugMode&&console.log("Phase 3 features initialized successfully"),this.settings.onboardingComplete||setTimeout(()=>{var e;null===(e=this.phase3Integration)||void 0===e||e.showOnboardingIfNeeded()},1e3)}catch(t){console.error("Failed to initialize Phase 3 features:",t),this.settings.debugMode&&new e.Notice("Phase 3 features failed to initialize - check console for details",5e3)}}disablePhase3(){this.phase3Integration&&(this.phase3Integration.onunload(),this.phase3Integration=void 0),this.settings.debugMode&&console.log("Phase 3 features disabled")}initializeEnhancementManager(){try{this.enhancementManager=new ne(this),this.enhancementManager.initialize().then(()=>{this.settings.debugMode&&console.log("VaultPilot Enhancement Manager initialized successfully")}).catch(e=>{console.error("Failed to initialize Enhancement Manager:",e)}),this.keyboardHandler=new ie(this),this.registerDomEvent(document,"keydown",e=>{var t;null===(t=this.keyboardHandler)||void 0===t||t.handleKeyDown(e)});ae.createEnhancedCommands(this).forEach(e=>{this.addCommand({id:e.id,name:e.name,callback:e.callback,editorCallback:e.editorCallback,checkCallback:e.checkCallback})}),this.settings.debugMode&&console.log("Keyboard shortcuts and enhanced commands initialized")}catch(t){console.error("Failed to initialize Enhancement Manager:",t),this.settings.debugMode&&new e.Notice("Enhancement features failed to initialize - check console for details",5e3)}}disableEnhancementManager(){this.enhancementManager&&(this.enhancementManager.unload(),this.enhancementManager=void 0),this.keyboardHandler&&(this.keyboardHandler=void 0),this.settings.debugMode&&console.log("Enhancement Manager disabled")}handleKeyUp(e){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;e.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(e)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(t){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(t.key))return!1;const n=this.app.workspace.getActiveViewOfType(e.MarkdownView);if(!n)return!1;const i=n.editor,a=i.getCursor(),o=i.getLine(a.line);if(a.ch!==o.length)return!1;const s=o.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===t.key||"Enter"===t.key&&o.trim().length>10}triggerAutoCompletion(){return t(this,void 0,void 0,function*(){const t=this.app.workspace.getActiveViewOfType(e.MarkdownView);if(!t)return;const n=t.editor,i=n.getCursor(),a=n.getLine(i.line),o=n.getValue();if(a.trim().length<10||i.ch!==a.length)return;if(!o||0===o.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const t=yield this.apiClient.getCopilotCompletion({text:o,cursor_position:n.posToOffset(i),file_type:"markdown"});t.success&&t.data&&t.data.suggestions.length>0&&this.settings.debugMode&&new e.Notice(`Auto-suggestion: ${t.data.suggestions[0]}`,3e3)}catch(e){this.settings.debugMode&&console.error("Auto-completion error:",e)}}})}handleCopilotSuggestion(t){this.settings.debugMode&&new e.Notice(`Live suggestion: ${t.completion}`,2e3)}loadSettings(){return t(this,void 0,void 0,function*(){this.settings=Object.assign({},i,yield this.loadData())})}saveSettings(){return t(this,void 0,void 0,function*(){var e,t;yield this.saveData(this.settings),this.apiClient=new g(this.settings.backendUrl,this.settings.apiKey),(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)?this.initializeVaultManagement():this.disableVaultManagement(),(null===(t=this.settings.modelSelection)||void 0===t?void 0:t.enabled)?yield this.initializeModelSelection():yield this.disconnectModelSelection(),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}initializeModelSelection(){return t(this,void 0,void 0,function*(){var t;if(null===(t=this.settings.modelSelection)||void 0===t?void 0:t.enabled)try{if(!C.detect().hasHTTP)throw new Error("HTTP transport not available");this.modelSelectionService=new S(this.settings.backendUrl,this.settings.modelSelection.devpipePath,{monitoring_interval:this.settings.modelSelection.monitoringInterval,fallback_enabled:this.settings.modelSelection.fallbackEnabled,cache_duration:this.settings.modelSelection.cacheDuration,retry_attempts:this.settings.modelSelection.retryAttempts,timeout:this.settings.modelSelection.timeout,debug_mode:this.settings.modelSelection.debugMode}),yield this.modelSelectionService.updatePreferences({priority:this.settings.modelSelection.userPreferences.priority,max_cost_per_request:this.settings.modelSelection.userPreferences.maxCostPerRequest,preferred_providers:this.settings.modelSelection.userPreferences.preferredProviders,fallback_enabled:this.settings.modelSelection.fallbackEnabled,quality_threshold:this.settings.modelSelection.userPreferences.qualityThreshold,timeout_preference:this.settings.modelSelection.timeout}),yield this.modelSelectionService.initialize(),this.settings.debugMode&&console.log("ModelSelectionService initialized successfully"),new e.Notice("ðŸ¤– Smart model selection enabled",3e3)}catch(t){console.error("Failed to initialize ModelSelectionService:",t),t instanceof Error&&(t.message.includes("not accessible")||t.message.includes("Failed to fetch")?this.settings.debugMode&&new e.Notice("âš ï¸ Model selection service unavailable - using fallback mode",4e3):t.message.includes("transport not available")?new e.Notice("âš ï¸ Model selection not supported in this environment",5e3):this.settings.debugMode&&new e.Notice("âš ï¸ Model selection initialization failed",3e3)),this.settings.modelSelection.retryAttempts>0&&setTimeout(()=>{this.retryModelSelectionInit(1)},1e4)}else this.settings.debugMode&&console.log("Model selection disabled in settings")})}retryModelSelectionInit(e){return t(this,void 0,void 0,function*(){var t;if(e>((null===(t=this.settings.modelSelection)||void 0===t?void 0:t.retryAttempts)||3))this.settings.debugMode&&console.log("Model selection initialization retry limit reached");else try{this.settings.debugMode&&console.log(`Retrying model selection initialization (attempt ${e})`),yield this.initializeModelSelection()}catch(t){const n=Math.min(3e4,5e3*Math.pow(2,e-1));setTimeout(()=>{this.retryModelSelectionInit(e+1)},n)}})}checkServiceStatus(){return t(this,void 0,void 0,function*(){var t,n;const i=new e.Notice("Checking VaultPilot service status...",0);try{let a="ðŸ” VaultPilot Service Status:\n\n";try{const e=yield this.apiClient.healthCheck();e.success?(a+="âœ… Main Backend: Connected\n",a+=`   Server: ${this.settings.backendUrl}\n`):(a+="âŒ Main Backend: Failed\n",a+=`   Error: ${e.error}\n`)}catch(e){a+="âŒ Main Backend: Connection Error\n"}this.isWebSocketConnected()?a+="âœ… WebSocket: Connected\n":a+="âŒ WebSocket: Disconnected\n",(null===(t=this.settings.modelSelection)||void 0===t?void 0:t.enabled)?this.modelSelectionService&&this.modelSelectionService.isConnected()?a+="âœ… Model Selection: Connected\n":(a+="âŒ Model Selection: Not Available\n",this.modelSelectionService?a+="   Reason: Service disconnected\n":a+="   Reason: Service not initialized\n"):a+="âš ï¸ Model Selection: Disabled in settings\n",(null===(n=this.settings.vaultManagement)||void 0===n?void 0:n.enableVaultManagement)?this.vaultClient?a+="âœ… Vault Management: Enabled\n":a+="âŒ Vault Management: Failed to initialize\n":a+="âš ï¸ Vault Management: Disabled in settings\n",i.hide(),new e.Notice(a,15e3),this.settings.debugMode&&console.log("VaultPilot Service Status:",a)}catch(t){i.hide(),new e.Notice(`âŒ Failed to check service status: ${t instanceof Error?t.message:"Unknown error"}`,5e3)}})}retryModelSelectionManual(){return t(this,void 0,void 0,function*(){if(this.modelSelectionService&&this.modelSelectionService.isConnected())return void new e.Notice("Model selection already connected",3e3);const t=new e.Notice("Retrying model selection initialization...",0);try{yield this.initializeModelSelection(),t.hide(),new e.Notice("âœ… Model selection connected successfully",3e3)}catch(n){t.hide(),new e.Notice(`âŒ Model selection retry failed: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}disconnectModelSelection(){return t(this,void 0,void 0,function*(){if(this.modelSelectionService)try{yield this.modelSelectionService.disconnect(),this.modelSelectionService=void 0,this.settings.debugMode&&console.log("ModelSelectionService disconnected")}catch(e){console.error("Error disconnecting ModelSelectionService:",e)}})}testModelSelection(){return t(this,void 0,void 0,function*(){if(!this.modelSelectionService)return void new e.Notice("âŒ Model selection service not initialized",5e3);const t=new e.Notice("ðŸ¤– Testing model selection...",0);try{const n=[{type:"text-generation",quality:"medium"},{type:"code-generation",quality:"high"},{type:"chat",quality:"low"},{type:"summarization",quality:"medium"}];let i=[];for(const e of n)try{const t=yield this.modelSelectionService.selectForTask(e.type,e.quality);i.push(`âœ… ${e.type}: ${t.selected_model.name} ($${t.estimated_cost.toFixed(4)})`)}catch(t){i.push(`âŒ ${e.type}: Failed - ${t instanceof Error?t.message:"Unknown error"}`)}t.hide();const a=i.join("\n");new e.Notice(`Model Selection Test Results:\n${a}`,1e4),this.settings.debugMode&&console.log("Model selection test results:",i)}catch(n){t.hide(),new e.Notice(`âŒ Model selection test failed: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}showModelHealth(){return t(this,void 0,void 0,function*(){if(!this.modelSelectionService)return void new e.Notice("âŒ Model selection service not initialized",5e3);const t=new e.Notice("ðŸ¥ Checking model health...",0);try{const n=yield this.modelSelectionService.getModelHealth();if(t.hide(),0===n.length)return void new e.Notice("âš ï¸ No model health information available",5e3);const i=n.map(e=>`${"healthy"===e.status?"âœ…":"degraded"===e.status?"âš ï¸":"âŒ"} ${e.model_id}: ${e.status} (${e.response_time}ms, ${e.availability_percentage}%)`).join("\n");new e.Notice(`Model Health Status:\n${i}`,15e3),this.settings.debugMode&&console.log("Model health status:",n)}catch(n){t.hide(),new e.Notice(`âŒ Failed to get model health: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}getBestModelForTask(e){return t(this,arguments,void 0,function*(e,t="medium"){var n,i;if(this.modelSelectionService&&this.modelSelectionService.isConnected())try{const n=yield this.modelSelectionService.selectForTask(e,t);return this.settings.debugMode&&console.log(`Selected model ${n.selected_model.name} for ${e} task`),n}catch(e){this.settings.debugMode&&console.warn("Model selection failed, using default:",e),(null===(n=this.settings.modelSelection)||void 0===n?void 0:n.enabled)&&!this.modelSelectionService.isConnected()&&this.retryModelSelectionInit(1).catch(()=>{})}else(null===(i=this.settings.modelSelection)||void 0===i?void 0:i.enabled)&&!this.modelSelectionService&&(this.settings.debugMode&&console.log("Model selection service not initialized, attempting initialization..."),this.initializeModelSelection().catch(()=>{}));return null})}loadEnhancedUIStyles(){const e="vaultpilot-enhanced-ui-styles",t=document.getElementById(e);t&&t.remove();const n=document.createElement("style");n.id=e,n.textContent='\n      /* VaultPilot Enhanced UI Styles */\n      @import url("app://obsidian.md/vault-management/enhanced-ui-styles.css");\n      \n      /* Fallback styles in case import fails */\n      .vaultpilot-progress-container {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        z-index: 10000;\n        pointer-events: none;\n        max-width: 400px;\n        font-family: var(--font-interface);\n      }\n      \n      .vaultpilot-progress-item {\n        background: var(--background-primary);\n        border: 1px solid var(--background-modifier-border);\n        border-radius: 8px;\n        padding: 12px 16px;\n        margin-bottom: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        min-width: 300px;\n        pointer-events: auto;\n        animation: slideInRight 0.3s ease-out;\n      }\n      \n      @keyframes slideInRight {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n      \n      @keyframes slideOutRight {\n        from { transform: translateX(0); opacity: 1; }\n        to { transform: translateX(100%); opacity: 0; }\n      }\n    ',document.head.appendChild(n),this.settings.debugMode&&console.log("Enhanced UI styles loaded")}}class se extends e.Modal{constructor(e,t){super(e),this.plugin=t}onOpen(){const{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"VaultPilot Enhancement Features Demo"}),this.createKeyboardShortcutsDemo(e),this.createProgressIndicatorDemo(e),this.createPerformanceDemo(e),this.createWebSocketDemo(e)}createKeyboardShortcutsDemo(t){const n=t.createDiv({cls:"enhancement-demo-section"});n.createEl("h3",{text:"âŒ¨ï¸ Keyboard Shortcuts"});n.createEl("p").innerHTML="\n            <strong>20+ keyboard shortcuts are now available!</strong><br>\n            Try these shortcuts:\n            <ul>\n                <li><code>Ctrl+Shift+Enter</code> - Open VaultPilot Chat</li>\n                <li><code>Ctrl+Shift+S</code> - Smart Search</li>\n                <li><code>Ctrl+Space</code> - AI Completion</li>\n                <li><code>Ctrl+Shift+H</code> - Show All Shortcuts</li>\n            </ul>\n        ";n.createEl("button",{text:"Show All Keyboard Shortcuts"}).onclick=()=>{if(this.plugin.keyboardHandler){this.plugin.keyboardHandler.getShortcuts();const t=this.plugin.keyboardHandler.getShortcuts(),n=new e.Modal(this.app);n.titleEl.textContent="VaultPilot Keyboard Shortcuts";const i=n.contentEl;i.style.maxHeight="70vh",i.style.overflowY="auto",t.forEach(e=>{const t=i.createDiv({cls:"shortcut-item"});t.style.cssText="\n                        display: flex; \n                        justify-content: space-between; \n                        padding: 8px; \n                        margin: 4px 0; \n                        background: var(--background-secondary); \n                        border-radius: 4px;\n                    ";const n=t.createSpan({cls:"shortcut-keys"});n.textContent=`${e.modifiers.join(" + ")} + ${e.key.replace("Key","")}`,n.style.cssText="\n                        font-family: monospace; \n                        background: var(--background-primary-alt); \n                        padding: 2px 6px; \n                        border-radius: 3px;\n                    ";t.createSpan({cls:"shortcut-desc"}).textContent=e.description}),n.open()}}}createProgressIndicatorDemo(e){const t=e.createDiv({cls:"enhancement-demo-section"});t.createEl("h3",{text:"ðŸ“Š Progress Indicators"}),t.createEl("p",{text:"Real-time progress bars with animations, ETA calculation, and WebSocket updates."});const n=t.createDiv({cls:"demo-buttons"});n.style.cssText="display: flex; gap: 10px; flex-wrap: wrap;";n.createEl("button",{text:"Quick Progress (3s)"}).onclick=()=>{this.demoQuickProgress()};n.createEl("button",{text:"Long Progress (10s)"}).onclick=()=>{this.demoLongProgress()};n.createEl("button",{text:"Multiple Progress"}).onclick=()=>{this.demoMultipleProgress()}}createPerformanceDemo(t){const n=t.createDiv({cls:"enhancement-demo-section"});n.createEl("h3",{text:"âš¡ Performance Optimization"}),n.createEl("p",{text:"Intelligent caching, request deduplication, and performance metrics."});const i=n.createDiv({cls:"demo-buttons"});i.style.cssText="display: flex; gap: 10px; flex-wrap: wrap;";i.createEl("button",{text:"Test Caching"}).onclick=()=>{this.demoCaching()};i.createEl("button",{text:"Show Metrics"}).onclick=()=>{this.showPerformanceMetrics()};i.createEl("button",{text:"Clear Cache"}).onclick=()=>{this.plugin.enhancementManager&&(this.plugin.enhancementManager.clearCache(),new e.Notice("Cache cleared successfully"))}}createWebSocketDemo(t){var n;const i=t.createDiv({cls:"enhancement-demo-section"});i.createEl("h3",{text:"ðŸ”— WebSocket Features"});const a=i.createDiv(),o=(null===(n=this.plugin.enhancementManager)||void 0===n?void 0:n.isWebSocketConnected())||!1;a.innerHTML=`\n            <p>WebSocket Status: \n                <span style="color: ${o?"var(--color-green)":"var(--color-red)"};">\n                    ${o?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}\n                </span>\n            </p>\n            <p>Real-time features: Progress updates, Performance metrics, Dynamic shortcuts</p>\n        `;i.createEl("button",{text:"Test WebSocket Connection"}).onclick=()=>{var t;const n=null===(t=this.plugin.enhancementManager)||void 0===t?void 0:t.isWebSocketConnected();new e.Notice("WebSocket is "+(n?"connected":"disconnected"),3e3)}}demoQuickProgress(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t="demo-quick-"+Date.now();this.plugin.enhancementManager.showProgress({id:t,title:"Quick Demo Task",message:"Processing...",percentage:0,eta:3,cancelable:!0});let n=0;const i=setInterval(()=>{var e;n+=33.33,n>=100&&(n=100,clearInterval(i),setTimeout(()=>{var e;null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.hideProgress(t)},500)),null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.updateProgress(t,{percentage:n,message:n<100?"Processing...":"Complete!",eta:n<100?(100-n)/33.33:0})},1e3)}demoLongProgress(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t="demo-long-"+Date.now();this.plugin.enhancementManager.showProgress({id:t,title:"Long Running Task",message:"Analyzing vault structure...",percentage:0,eta:10,cancelable:!0});const n=[{msg:"Analyzing vault structure...",duration:2e3},{msg:"Processing files...",duration:3e3},{msg:"Generating insights...",duration:2e3},{msg:"Optimizing performance...",duration:2e3},{msg:"Finalizing results...",duration:1e3}];let i=0,a=0;const o=()=>{var e,s;if(i>=n.length)return null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.updateProgress(t,{percentage:100,message:"Complete!",eta:0}),void setTimeout(()=>{var e;null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.hideProgress(t)},1e3);const r=n[i],l=100/n.length;null===(s=this.plugin.enhancementManager)||void 0===s||s.progressIndicator.updateProgress(t,{percentage:a,message:r.msg,eta:2*(n.length-i)}),setTimeout(()=>{a+=l,i++,o()},r.duration)};o()}demoMultipleProgress(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");[{id:"task1",title:"Backup Creation",duration:5e3},{id:"task2",title:"File Analysis",duration:7e3},{id:"task3",title:"Index Update",duration:3e3}].forEach((e,t)=>{setTimeout(()=>{var t;const n=`demo-multi-${e.id}-${Date.now()}`;null===(t=this.plugin.enhancementManager)||void 0===t||t.showProgress({id:n,title:e.title,message:"Starting...",percentage:0,eta:e.duration/1e3,cancelable:!0});let i=0;const a=setInterval(()=>{var t;i+=10,i>=100&&(i=100,clearInterval(a),setTimeout(()=>{var e;null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.hideProgress(n)},500)),null===(t=this.plugin.enhancementManager)||void 0===t||t.progressIndicator.updateProgress(n,{percentage:i,message:i<100?"Processing...":"Complete!",eta:i<100?(100-i)/10*(e.duration/1e4):0})},e.duration/10)},1e3*t)})}demoCaching(){return t(this,void 0,void 0,function*(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t="demo-cache-test",n=performance.now();try{yield this.plugin.enhancementManager.optimizedAPICall(t,()=>new Promise(e=>setTimeout(()=>e({data:"test response"}),1e3)));const i=performance.now()-n,a=performance.now();yield this.plugin.enhancementManager.optimizedAPICall(t,()=>new Promise(e=>setTimeout(()=>e({data:"test response"}),1e3)));const o=performance.now()-a;new e.Notice(`First request: ${Math.round(i)}ms (cache miss)\nSecond request: ${Math.round(o)}ms (cache hit)`,5e3)}catch(t){new e.Notice("Cache test failed: "+t)}})}showPerformanceMetrics(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t=this.plugin.enhancementManager.getPerformanceMetrics(),n=this.plugin.enhancementManager.getCacheHitRate(),i=new e.Modal(this.app);i.titleEl.textContent="Performance Metrics";i.contentEl.innerHTML=`\n            <div class="vaultpilot-metrics-container">\n                <div class="metrics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Total Requests</div>\n                        <div class="metric-value">${t.totalRequests}</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Cache Hit Rate</div>\n                        <div class="metric-value">${Math.round(n)}%</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Avg Response Time</div>\n                        <div class="metric-value">${Math.round(t.averageResponseTime)}ms</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Cache Size</div>\n                        <div class="metric-value">${t.currentCacheSize} items</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Memory Usage</div>\n                        <div class="metric-value">${Math.round(t.memoryUsage/1024)} KB</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Fastest Response</div>\n                        <div class="metric-value">${Math.round(t.fastestResponse)}ms</div>\n                    </div>\n                </div>\n            </div>\n        `,i.open()}onClose(){const{contentEl:e}=this;e.empty()}}const re="vaultpilot-demo-styles";if(!document.getElementById(re)){const e=document.createElement("style");e.id=re,e.textContent="\n.enhancement-demo-section {\n    margin: 20px 0;\n    padding: 15px;\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    background: var(--background-secondary);\n}\n\n.enhancement-demo-section h3 {\n    margin-top: 0;\n    color: var(--text-accent);\n}\n\n.demo-buttons {\n    margin-top: 10px;\n}\n\n.demo-buttons button {\n    padding: 8px 16px;\n    margin: 4px;\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 4px;\n    background: var(--interactive-normal);\n    color: var(--text-normal);\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n.demo-buttons button:hover {\n    background: var(--interactive-hover);\n}\n\n.shortcut-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px;\n    margin: 4px 0;\n    background: var(--background-secondary);\n    border-radius: 4px;\n}\n\n.metric-label {\n    color: var(--text-muted);\n    font-size: 0.85em;\n    margin-bottom: 4px;\n    text-transform: uppercase;\n}\n\n.metric-value {\n    color: var(--text-normal);\n    font-size: 1.2em;\n    font-weight: 600;\n}\n",document.head.appendChild(e)}var le=Object.freeze({__proto__:null,VaultPilotEnhancementDemo:se});module.exports=oe;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3ZhdWx0LXNldHRpbmdzLnRzIiwiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvZnVsbC10YWItdmlldy50cyIsIi4uL3NyYy92YXVsdC11dGlscy50cyIsIi4uL3NyYy9zZXJ2aWNlcy9EZXZlbG9wbWVudENvbnRleHRTZXJ2aWNlLnRzIiwiLi4vc3JjL2NoYXQtbW9kYWwudHMiLCIuLi9zcmMvd29ya2Zsb3ctbW9kYWwudHMiLCIuLi9zcmMvYXBpLWNsaWVudC50cyIsIi4uL3NyYy9wbGFubmVyLnRzIiwiLi4vc3JjL3BsYW4tbXktZGF5LWRlYnVnLnRzIiwiLi4vc3JjL3ZhdWx0LXR5cGVzLnRzIiwiLi4vc3JjL3ZhdWx0LWFwaS1jbGllbnQudHMiLCIuLi9zcmMvdXRpbHMvRW52aXJvbm1lbnREZXRlY3Rvci50cyIsIi4uL3NyYy9kZXZwaXBlL0RldlBpcGVDbGllbnQudHMiLCIuLi9zcmMvdHlwZXMvTW9kZWxTZWxlY3Rpb24udHMiLCIuLi9zcmMvc2VydmljZXMvTW9kZWxTZWxlY3Rpb25TZXJ2aWNlLnRzIiwiLi4vc3JjL3ZhdWx0LW1vZGFscy50cyIsIi4uL3NyYy9kZXZwaXBlL3RyYW5zcG9ydHMvRGV2UGlwZVRyYW5zcG9ydC50cyIsIi4uL3NyYy9jb21wb25lbnRzL09uYm9hcmRpbmdXaXphcmQudHMiLCIuLi9zcmMvc2VydmljZXMvUmVjb21tZW5kYXRpb25FbmdpbmUudHMiLCIuLi9zcmMvZGV2cGlwZS90cmFuc3BvcnRzL0Jhc2VUcmFuc3BvcnQudHMiLCIuLi9zcmMvZGV2cGlwZS90cmFuc3BvcnRzL0hUVFBUcmFuc3BvcnQudHMiLCIuLi9zcmMvZGV2cGlwZS90cmFuc3BvcnRzL1dlYlNvY2tldFRyYW5zcG9ydC50cyIsIi4uL3NyYy9kZXZwaXBlL3RyYW5zcG9ydHMvRmlsZVN5c3RlbVRyYW5zcG9ydC50cyIsIi4uL3NyYy9kZXZwaXBlL21vbml0b3JpbmcvVHJhbnNwb3J0SGVhbHRoTW9uaXRvci50cyIsIi4uL3NyYy9kZXZwaXBlL1RyYW5zcG9ydE1hbmFnZXIudHMiLCIuLi9zcmMvY29tcG9uZW50cy9UcmFuc3BvcnREYXNoYm9hcmQudHMiLCIuLi9zcmMvY29tcG9uZW50cy9BZHZhbmNlZFNldHRpbmdzLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvUGhhc2UzSW50ZWdyYXRpb24udHMiLCIuLi9zcmMvdmF1bHQtbWFuYWdlbWVudC9lbmhhbmNlZC11aS1jb21wb25lbnRzLnRzIiwiLi4vc3JjL3ZhdWx0LW1hbmFnZW1lbnQvZW5oYW5jZWQtY29tbWFuZHMudHMiLCIuLi9zcmMvbWFpbi50cyIsIi4uL3NyYy92YXVsdC1jb21tYW5kcy50cyIsIi4uL3NyYy92YXVsdC1tYW5hZ2VtZW50L2VuaGFuY2VtZW50LWRlbW8udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTZXR0aW5ncyBFeHRlbnNpb25zIGZvciBWYXVsdFBpbG90IFZhdWx0IE1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MgfSBmcm9tICcuL3ZhdWx0LXR5cGVzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUzogVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MgPSB7XG4gIGVuYWJsZVZhdWx0TWFuYWdlbWVudDogdHJ1ZSxcbiAgYXV0b1N5bmNWYXVsdFN0cnVjdHVyZTogZmFsc2UsXG4gIHNlYXJjaFJlc3VsdHNMaW1pdDogNTAsXG4gIGVuYWJsZVNtYXJ0U2VhcmNoOiB0cnVlLFxuICBiYXRjaE9wZXJhdGlvblRpbWVvdXQ6IDMwMDAwLFxuICBzaG93VmF1bHRTdGF0czogdHJ1ZSxcbiAgbWF4U2VhcmNoUmVzdWx0czogMTAwLFxuICBkZWZhdWx0U2VhcmNoVHlwZTogJ2NvbnRlbnQnLFxuICBlbmFibGVGaWxlT3BlcmF0aW9uczogdHJ1ZSxcbiAgY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9uczogdHJ1ZSxcbiAgYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnM6IGZhbHNlXG59O1xuXG4vKipcbiAqIEFkZCB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzIHRvIHRoZSBzZXR0aW5ncyB0YWJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBhbnkpIHtcbiAgLy8gVmF1bHQgTWFuYWdlbWVudCBTZWN0aW9uIEhlYWRlclxuICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdWYXVsdCBNYW5hZ2VtZW50JyB9KTtcbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgIHRleHQ6ICdDb25maWd1cmUgQUktcG93ZXJlZCB2YXVsdCBzdHJ1Y3R1cmUgYW5hbHlzaXMgYW5kIGZpbGUgb3BlcmF0aW9ucy4nIFxuICB9KTtcblxuICAvLyBFbmFibGUgVmF1bHQgTWFuYWdlbWVudFxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnRW5hYmxlIFZhdWx0IE1hbmFnZW1lbnQnKVxuICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB2YXVsdCBzdHJ1Y3R1cmUgYW5hbHlzaXMgYW5kIGZpbGUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50ID8/IHRydWUpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuZW5hYmxlVmF1bHRNYW5hZ2VtZW50ID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHBsdWdpbi5pbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGx1Z2luLmRpc2FibGVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuXG4gIC8vIEF1dG8gU3luYyBWYXVsdCBTdHJ1Y3R1cmVcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0F1dG8gU3luYyBWYXVsdCBTdHJ1Y3R1cmUnKVxuICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHVwZGF0ZSB2YXVsdCBzdHJ1Y3R1cmUgYW5hbHlzaXMgd2hlbiBmaWxlcyBjaGFuZ2UnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmUgPz8gZmFsc2UpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuYXV0b1N5bmNWYXVsdFN0cnVjdHVyZSA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gRW5hYmxlIFNtYXJ0IFNlYXJjaFxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnRW5hYmxlIFNtYXJ0IFNlYXJjaCcpXG4gICAgLnNldERlc2MoJ1VzZSBBSS1wb3dlcmVkIHNlYXJjaCB3aXRoIGNvbnRleHQgYW5kIGluc2lnaHRzJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVTbWFydFNlYXJjaCA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZVNtYXJ0U2VhcmNoID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBTZWFyY2ggUmVzdWx0cyBMaW1pdFxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnU2VhcmNoIFJlc3VsdHMgTGltaXQnKVxuICAgIC5zZXREZXNjKCdNYXhpbXVtIG51bWJlciBvZiBzZWFyY2ggcmVzdWx0cyB0byBkaXNwbGF5JylcbiAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgIC5zZXRMaW1pdHMoMTAsIDIwMCwgMTApXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uc2VhcmNoUmVzdWx0c0xpbWl0ID8/IDUwKVxuICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5zZWFyY2hSZXN1bHRzTGltaXQgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIERlZmF1bHQgU2VhcmNoIFR5cGVcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0RlZmF1bHQgU2VhcmNoIFR5cGUnKVxuICAgIC5zZXREZXNjKCdEZWZhdWx0IHNlYXJjaCBtb2RlIGZvciBzbWFydCBzZWFyY2gnKVxuICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgLmFkZE9wdGlvbignY29udGVudCcsICdDb250ZW50IFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdmaWxlbmFtZScsICdGaWxlbmFtZSBTZWFyY2gnKVxuICAgICAgLmFkZE9wdGlvbigndGFncycsICdUYWcgU2VhcmNoJylcbiAgICAgIC5hZGRPcHRpb24oJ2xpbmtzJywgJ0xpbmsgU2VhcmNoJylcbiAgICAgIC5hZGRPcHRpb24oJ2NvbXByZWhlbnNpdmUnLCAnQ29tcHJlaGVuc2l2ZSBTZWFyY2gnKVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmRlZmF1bHRTZWFyY2hUeXBlID8/ICdjb250ZW50JylcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5kZWZhdWx0U2VhcmNoVHlwZSA9IHZhbHVlIGFzIGFueTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEVuYWJsZSBGaWxlIE9wZXJhdGlvbnNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBGaWxlIE9wZXJhdGlvbnMnKVxuICAgIC5zZXREZXNjKCdBbGxvdyBmaWxlIGNyZWF0aW9uLCBkZWxldGlvbiwgYW5kIG1vZGlmaWNhdGlvbiB0aHJvdWdoIHRoZSBpbnRlcmZhY2UnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZUZpbGVPcGVyYXRpb25zID8/IHRydWUpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuZW5hYmxlRmlsZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIENvbmZpcm0gRGVzdHJ1Y3RpdmUgT3BlcmF0aW9uc1xuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnQ29uZmlybSBEZXN0cnVjdGl2ZSBPcGVyYXRpb25zJylcbiAgICAuc2V0RGVzYygnU2hvdyBjb25maXJtYXRpb24gZGlhbG9nIGZvciBmaWxlIGRlbGV0aW9uIGFuZCBkZXN0cnVjdGl2ZSBvcGVyYXRpb25zJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5jb25maXJtRGVzdHJ1Y3RpdmVPcGVyYXRpb25zID8/IHRydWUpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9ucyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gQXV0byBCYWNrdXAgQmVmb3JlIE9wZXJhdGlvbnNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0F1dG8gQmFja3VwIEJlZm9yZSBPcGVyYXRpb25zJylcbiAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBjcmVhdGUgYmFja3VwcyBiZWZvcmUgZGVzdHJ1Y3RpdmUgZmlsZSBvcGVyYXRpb25zJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5hdXRvQmFja3VwQmVmb3JlT3BlcmF0aW9ucyA/PyBmYWxzZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5hdXRvQmFja3VwQmVmb3JlT3BlcmF0aW9ucyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gQmF0Y2ggT3BlcmF0aW9uIFRpbWVvdXRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0JhdGNoIE9wZXJhdGlvbiBUaW1lb3V0JylcbiAgICAuc2V0RGVzYygnVGltZW91dCBmb3IgYmF0Y2ggb3BlcmF0aW9ucyBpbiBtaWxsaXNlY29uZHMnKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgLnNldFBsYWNlaG9sZGVyKCczMDAwMCcpXG4gICAgICAuc2V0VmFsdWUoU3RyaW5nKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmJhdGNoT3BlcmF0aW9uVGltZW91dCA/PyAzMDAwMCkpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBwYXJzZUludCh2YWx1ZSkgfHwgMzAwMDA7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuYmF0Y2hPcGVyYXRpb25UaW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIFNob3cgVmF1bHQgU3RhdHNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ1Nob3cgVmF1bHQgU3RhdGlzdGljcycpXG4gICAgLnNldERlc2MoJ0Rpc3BsYXkgdmF1bHQgc3RhdGlzdGljcyBpbiBtb2RhbHMgYW5kIGludGVyZmFjZXMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LnNob3dWYXVsdFN0YXRzID8/IHRydWUpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuc2hvd1ZhdWx0U3RhdHMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIFRlc3QgQ29ubmVjdGlvbiBCdXR0b25cbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ1Rlc3QgVmF1bHQgTWFuYWdlbWVudCBDb25uZWN0aW9uJylcbiAgICAuc2V0RGVzYygnVGVzdCBjb25uZWN0aW9uIHRvIHZhdWx0IG1hbmFnZW1lbnQgZW5kcG9pbnRzJylcbiAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgIC5zZXRCdXR0b25UZXh0KCdUZXN0IENvbm5lY3Rpb24nKVxuICAgICAgLnNldEN0YSgpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ05vdCBBdmFpbGFibGUnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0IENvbm5lY3Rpb24nKSwgMjAwMCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3RpbmcuLi4nKTtcbiAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGx1Z2luLnZhdWx0Q2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgn4pyFIENvbm5lY3RlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgn4p2MIEZhaWxlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgn4p2MIEVycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0IENvbm5lY3Rpb24nKSwgMzAwMCk7XG4gICAgICB9KSk7XG5cbiAgLy8gQWR2YW5jZWQgU2V0dGluZ3MgU2VjdGlvblxuICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZHZhbmNlZCBWYXVsdCBNYW5hZ2VtZW50JyB9KTtcblxuICAvLyBNYXggU2VhcmNoIFJlc3VsdHNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ01heGltdW0gU2VhcmNoIFJlc3VsdHMnKVxuICAgIC5zZXREZXNjKCdBYnNvbHV0ZSBtYXhpbXVtIG51bWJlciBvZiBzZWFyY2ggcmVzdWx0cyB0byBmZXRjaCBmcm9tIGJhY2tlbmQnKVxuICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuICAgICAgLnNldExpbWl0cyg1MCwgNTAwLCAyNSlcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5tYXhTZWFyY2hSZXN1bHRzID8/IDEwMClcbiAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQubWF4U2VhcmNoUmVzdWx0cyA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gUmVzZXQgdG8gRGVmYXVsdHMgQnV0dG9uXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdSZXNldCBWYXVsdCBNYW5hZ2VtZW50IFNldHRpbmdzJylcbiAgICAuc2V0RGVzYygnUmVzZXQgYWxsIHZhdWx0IG1hbmFnZW1lbnQgc2V0dGluZ3MgdG8gdGhlaXIgZGVmYXVsdCB2YWx1ZXMnKVxuICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc2V0IHRvIERlZmF1bHRzJylcbiAgICAgIC5zZXRXYXJuaW5nKClcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZnJlc2ggdGhlIHNldHRpbmdzIGRpc3BsYXlcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NUYWIgPSBwbHVnaW4uYXBwLnNldHRpbmcuYWN0aXZlVGFiO1xuICAgICAgICBpZiAoc2V0dGluZ3NUYWIgJiYgc2V0dGluZ3NUYWIuZGlzcGxheSkge1xuICAgICAgICAgIHNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIHZhdWx0IG1hbmFnZW1lbnQgc2V0dGluZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3Moc2V0dGluZ3M6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzKTogc3RyaW5nW10ge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKHNldHRpbmdzLnNlYXJjaFJlc3VsdHNMaW1pdCA8IDEgfHwgc2V0dGluZ3Muc2VhcmNoUmVzdWx0c0xpbWl0ID4gMTAwMCkge1xuICAgIGVycm9ycy5wdXNoKCdTZWFyY2ggcmVzdWx0cyBsaW1pdCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAwMCcpO1xuICB9XG5cbiAgaWYgKHNldHRpbmdzLm1heFNlYXJjaFJlc3VsdHMgPCBzZXR0aW5ncy5zZWFyY2hSZXN1bHRzTGltaXQpIHtcbiAgICBlcnJvcnMucHVzaCgnTWF4aW11bSBzZWFyY2ggcmVzdWx0cyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBzZWFyY2ggcmVzdWx0cyBsaW1pdCcpO1xuICB9XG5cbiAgaWYgKHNldHRpbmdzLmJhdGNoT3BlcmF0aW9uVGltZW91dCA8IDEwMDAgfHwgc2V0dGluZ3MuYmF0Y2hPcGVyYXRpb25UaW1lb3V0ID4gMzAwMDAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ0JhdGNoIG9wZXJhdGlvbiB0aW1lb3V0IG11c3QgYmUgYmV0d2VlbiAxIHNlY29uZCBhbmQgNSBtaW51dGVzJyk7XG4gIH1cblxuICBjb25zdCB2YWxpZFNlYXJjaFR5cGVzID0gWydjb250ZW50JywgJ2ZpbGVuYW1lJywgJ3RhZ3MnLCAnbGlua3MnLCAnY29tcHJlaGVuc2l2ZSddO1xuICBpZiAoIXZhbGlkU2VhcmNoVHlwZXMuaW5jbHVkZXMoc2V0dGluZ3MuZGVmYXVsdFNlYXJjaFR5cGUpKSB7XG4gICAgZXJyb3JzLnB1c2goJ0ludmFsaWQgZGVmYXVsdCBzZWFyY2ggdHlwZScpO1xuICB9XG5cbiAgcmV0dXJuIGVycm9ycztcbn1cblxuLyoqXG4gKiBHZXQgdmF1bHQgbWFuYWdlbWVudCBzZXR0aW5ncyB3aXRoIGRlZmF1bHRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyhwbHVnaW5TZXR0aW5nczogYW55KTogVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3Mge1xuICByZXR1cm4ge1xuICAgIC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyxcbiAgICAuLi4ocGx1Z2luU2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50IHx8IHt9KVxuICB9O1xufVxuIiwiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ3MsIE1vZGVsU2VsZWN0aW9uU2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzLCBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfSBmcm9tICcuL3ZhdWx0LXNldHRpbmdzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFZhdWx0UGlsb3RTZXR0aW5ncyA9IHtcbiAgYmFja2VuZFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsXG4gIGFwaUtleTogJycsXG4gIGVuYWJsZVdlYlNvY2tldDogdHJ1ZSxcbiAgZW5hYmxlQ29waWxvdDogdHJ1ZSxcbiAgZW5hYmxlQXV0b0NvbXBsZXRlOiBmYWxzZSwgLy8gRGlzYWJsZWQgYnkgZGVmYXVsdCB0byBwcmV2ZW50IGZyZXF1ZW50IHJlcXVlc3RzXG4gIGRlZmF1bHRBZ2VudDogJycsXG4gIGRlZmF1bHRNb2RlOiAnYXNrJyxcbiAgY2hhdEhpc3RvcnlMaW1pdDogMTAwLFxuICBkZWJ1Z01vZGU6IGZhbHNlLFxuICBzaG93SW50ZW50RGVidWc6IGZhbHNlLFxuICB2YXVsdE1hbmFnZW1lbnQ6IERFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyxcbiAgbW9kZWxTZWxlY3Rpb246IHtcbiAgICBlbmFibGVkOiB0cnVlLFxuICAgIGRldnBpcGVQYXRoOiAnLi4vZGV2LXBpcGUnLFxuICAgIG1vbml0b3JpbmdJbnRlcnZhbDogMzAwMDAsXG4gICAgZmFsbGJhY2tFbmFibGVkOiB0cnVlLFxuICAgIGNhY2hlRHVyYXRpb246IDMwMDAwMCxcbiAgICByZXRyeUF0dGVtcHRzOiAzLFxuICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgIGRlYnVnTW9kZTogZmFsc2UsXG4gICAgdXNlclByZWZlcmVuY2VzOiB7XG4gICAgICBwcmlvcml0eTogJ2JhbGFuY2VkJyxcbiAgICAgIG1heENvc3RQZXJSZXF1ZXN0OiAwLjUwLFxuICAgICAgcHJlZmVycmVkUHJvdmlkZXJzOiBbXSxcbiAgICAgIHF1YWxpdHlUaHJlc2hvbGQ6IDAuN1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHRQaWxvdCBTZXR0aW5ncycgfSk7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0NvbmZpZ3VyZSB5b3VyIGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQgYW5kIEFJIGZlYXR1cmVzLicgXG4gICAgfSk7XG5cbiAgICAvLyBDb25uZWN0aW9uIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29ubmVjdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdCYWNrZW5kIFVSTCcpXG4gICAgICAuc2V0RGVzYygnVVJMIG9mIEV2b0FnZW50WCBiYWNrZW5kIHNlcnZlcicpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgICAuc2V0RGVzYygnT3B0aW9uYWwgQVBJIGtleSBmb3IgYXV0aGVudGljYXRpb24gKGlmIHJlcXVpcmVkIGJ5IGJhY2tlbmQpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgQVBJIGtleS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIFRlc3QgY29ubmVjdGlvbiBidXR0b25cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdDb25uZWN0aW9uIFRlc3QnKVxuICAgICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbiB0byBFdm9BZ2VudFggYmFja2VuZCcpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PlxuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJylcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBGZWF0dXJlIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRmVhdHVyZXMnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIFdlYlNvY2tldCcpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIHJlYWwtdGltZSBjb21tdW5pY2F0aW9uIGZvciBsaXZlIHVwZGF0ZXMgYW5kIHByb2dyZXNzIHRyYWNraW5nJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIENvcGlsb3QnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBBSS1wb3dlcmVkIHRleHQgY29tcGxldGlvbiBhbmQgc3VnZ2VzdGlvbnMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIEF1dG8tQ29tcGxldGUnKVxuICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgc3VnZ2VzdCBjb21wbGV0aW9ucyBhZnRlciBzZW50ZW5jZSBlbmRpbmdzIGFuZCBuZXcgbGluZXMgKHdpdGggMTBzIGNvb2xkb3duKScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gQWdlbnQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQWdlbnQnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgYWdlbnQgdG8gdXNlIGZvciBjaGF0IGFuZCB3b3JrZmxvd3MgKGxlYXZlIGVtcHR5IGZvciBhdXRvLXNlbGVjdGlvbiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdBZ2VudCBJRCBvciBuYW1lLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50IHx8ICcnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0QWdlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBDaGF0IE1vZGUnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgbW9kZSBmb3IgbmV3IGNoYXQgc2Vzc2lvbnM6IEFzayBmb3Igc2ltcGxlIFEmQSwgQWdlbnQgZm9yIGNvbXBsZXggd29ya2Zsb3dzJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PlxuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5hZGRPcHRpb24oJ2FzaycsICdBc2sgTW9kZSAtIFNpbXBsZSBRJkEnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2FnZW50JywgJ0FnZW50IE1vZGUgLSBDb21wbGV4IFdvcmtmbG93cycpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRNb2RlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSA9IHZhbHVlIGFzICdhc2snIHwgJ2FnZW50JztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ2hhdCBIaXN0b3J5IExpbWl0JylcbiAgICAgIC5zZXREZXNjKCdNYXhpbXVtIG51bWJlciBvZiBjaGF0IG1lc3NhZ2VzIHRvIGtlZXAgaW4gaGlzdG9yeScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PlxuICAgICAgICBzbGlkZXJcbiAgICAgICAgICAuc2V0TGltaXRzKDEwLCA1MDAsIDEwKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0KVxuICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5TGltaXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gQWR2YW5jZWQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZHZhbmNlZCcgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWJ1ZyBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgZGVidWcgbG9nZ2luZyBhbmQgYWRkaXRpb25hbCBkZXZlbG9wZXIgZmVhdHVyZXMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1Nob3cgSW50ZW50IERlYnVnIE92ZXJsYXknKVxuICAgICAgLnNldERlc2MoJ0Rpc3BsYXkgYXV0b21hdGljIGludGVudCBkZXRlY3Rpb24gaW4gY2hhdCAoQXNrIHZzIEFnZW50IG1vZGUpJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1ZyA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBWYXVsdCBNYW5hZ2VtZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgTWFuYWdlbWVudCcgfSk7XG4gICAgYWRkVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MoY29udGFpbmVyRWwsIHRoaXMucGx1Z2luKTtcblxuICAgIC8vIE1vZGVsIFNlbGVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ01vZGVsIFNlbGVjdGlvbicgfSk7XG4gICAgXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIE1vZGVsIFNlbGVjdGlvbicpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGludGVsbGlnZW50IEFJIG1vZGVsIHNlbGVjdGlvbiBiYXNlZCBvbiB0YXNrIHR5cGUgYW5kIHJlcXVpcmVtZW50cycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmVuYWJsZWQgPz8gdHJ1ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbiA9IERFRkFVTFRfU0VUVElOR1MubW9kZWxTZWxlY3Rpb24hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIG1vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIGlmIGVuYWJsZWRcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBEaXNjb25uZWN0IG1vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIGlmIGRpc2FibGVkXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RNb2RlbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGV2UGlwZSBQYXRoJylcbiAgICAgIC5zZXREZXNjKCdQYXRoIHRvIHRoZSBEZXZQaXBlIGNvbW11bmljYXRpb24gZGlyZWN0b3J5JylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignLi4vZGV2LXBpcGUnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZGV2cGlwZVBhdGggPz8gJy4uL2Rldi1waXBlJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbiA9IERFRkFVTFRfU0VUVElOR1MubW9kZWxTZWxlY3Rpb24hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZGV2cGlwZVBhdGggPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnUHJpb3JpdHkgTW9kZScpXG4gICAgICAuc2V0RGVzYygnSG93IHRvIHByaW9yaXRpemUgbW9kZWwgc2VsZWN0aW9uOiBwZXJmb3JtYW5jZSwgY29zdCwgb3IgYmFsYW5jZWQnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbigncGVyZm9ybWFuY2UnLCAnUGVyZm9ybWFuY2UgLSBCZXN0IHF1YWxpdHkgbW9kZWxzJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdjb3N0JywgJ0Nvc3QgLSBNb3N0IGVjb25vbWljYWwgbW9kZWxzJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdiYWxhbmNlZCcsICdCYWxhbmNlZCAtIE9wdGltYWwgcXVhbGl0eS9jb3N0IHJhdGlvJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LnVzZXJQcmVmZXJlbmNlcy5wcmlvcml0eSA/PyAnYmFsYW5jZWQnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uID0gREVGQVVMVF9TRVRUSU5HUy5tb2RlbFNlbGVjdGlvbiE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi51c2VyUHJlZmVyZW5jZXMucHJpb3JpdHkgPSB2YWx1ZSBhcyAncGVyZm9ybWFuY2UnIHwgJ2Nvc3QnIHwgJ2JhbGFuY2VkJztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnTWF4IENvc3QgUGVyIFJlcXVlc3QnKVxuICAgICAgLnNldERlc2MoJ01heGltdW0gY29zdCBwZXIgQUkgcmVxdWVzdCAoaW4gVVNEKScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PlxuICAgICAgICBzbGlkZXJcbiAgICAgICAgICAuc2V0TGltaXRzKDAuMDEsIDIuMDAsIDAuMDEpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy51c2VyUHJlZmVyZW5jZXMubWF4Q29zdFBlclJlcXVlc3QgPz8gMC41MClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uID0gREVGQVVMVF9TRVRUSU5HUy5tb2RlbFNlbGVjdGlvbiE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi51c2VyUHJlZmVyZW5jZXMubWF4Q29zdFBlclJlcXVlc3QgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnTW9kZWwgU2VsZWN0aW9uIERlYnVnJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgZGVidWcgbG9nZ2luZyBmb3IgbW9kZWwgc2VsZWN0aW9uIGRlY2lzaW9ucycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmRlYnVnTW9kZSA/PyBmYWxzZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbiA9IERFRkFVTFRfU0VUVElOR1MubW9kZWxTZWxlY3Rpb24hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZGVidWdNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEhlbHAgc2VjdGlvblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0hlbHAgJiBEb2N1bWVudGF0aW9uJyB9KTtcblxuICAgIC8vIEluZm9ybWF0aW9uIHNlY3Rpb25cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdJbmZvcm1hdGlvbicgfSk7XG4gICAgY29uc3QgaW5mb0VsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcbiAgICBpbmZvRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPHA+PHN0cm9uZz5WYXVsdFBpbG90IHYxLjAuMDwvc3Ryb25nPjwvcD5cbiAgICAgIDxwPkNvbXByZWhlbnNpdmUgRXZvQWdlbnRYIGludGVncmF0aW9uIGZvciBPYnNpZGlhbjwvcD5cbiAgICAgIDxwPkZlYXR1cmVzOiBBSSBDaGF0LCBDb3BpbG90LCBXb3JrZmxvd3MsIFZhdWx0IEFuYWx5c2lzLCBUYXNrIFBsYW5uaW5nPC9wPlxuICAgICAgPHA+Rm9yIGhlbHAgYW5kIGRvY3VtZW50YXRpb24sIHZpc2l0IHRoZSBHaXRIdWIgcmVwb3NpdG9yeS48L3A+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnVGVzdGluZyBjb25uZWN0aW9uLi4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWFpbiBoZWFsdGggY2hlY2sgZmFpbGVkIHdpdGggNDAwLCB0cnlpbmcgYWx0ZXJuYXRpdmUgbWV0aG9kJyk7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKCfinIUgQ29ubmVjdGlvbiBzdWNjZXNzZnVsIScsIDMwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShg4p2MIENvbm5lY3Rpb24gZmFpbGVkOiAke3Jlc3BvbnNlLmVycm9yfWAsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShg4p2MIENvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTm90aWNlLCBNYXJrZG93blZpZXcsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfVkFVTFRQSUxPVCA9ICd2YXVsdHBpbG90LXZpZXcnO1xuXG5leHBvcnQgY2xhc3MgVmF1bHRQaWxvdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBzdGF0dXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHF1aWNrQWN0aW9uc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdmF1bHRTdGF0c0VsITogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfVkFVTFRQSUxPVDtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdWYXVsdFBpbG90JztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2JvdCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtdmlldycpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1lvdXIgQUkgYXNzaXN0YW50IGZvciBPYnNpZGlhbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN1YnRpdGxlJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhdHVzIHNlY3Rpb25cbiAgICB0aGlzLnN0YXR1c0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuXG4gICAgLy8gUXVpY2sgYWN0aW9uc1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1xdWljay1hY3Rpb25zJyB9KTtcbiAgICB0aGlzLmNyZWF0ZVF1aWNrQWN0aW9ucygpO1xuXG4gICAgLy8gVmF1bHQgc3RhdHNcbiAgICB0aGlzLnZhdWx0U3RhdHNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXZhdWx0LXN0YXRzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcblxuICAgIC8vIFJlY2VudCBhY3Rpdml0aWVzIChwbGFjZWhvbGRlciBmb3IgZnV0dXJlIGltcGxlbWVudGF0aW9uKVxuICAgIGNvbnN0IGFjdGl2aXRpZXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgQWN0aXZpdGllcycgfSk7XG4gICAgYWN0aXZpdGllc0VsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdBY3Rpdml0eSB0cmFja2luZyBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzKCkge1xuICAgIHRoaXMuc3RhdHVzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24gU3RhdHVzJyB9KTtcblxuICAgIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEJhY2tlbmQgc3RhdHVzXG4gICAgY29uc3QgYmFja2VuZFN0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQmFja2VuZDogJyB9KTtcbiAgICBjb25zdCBiYWNrZW5kSW5kaWNhdG9yID0gYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogJ0NoZWNraW5nLi4uJ1xuICAgIH0pO1xuXG4gICAgLy8gV2ViU29ja2V0IHN0YXR1c1xuICAgIGNvbnN0IHdzU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnV2ViU29ja2V0OiAnIH0pO1xuICAgIGNvbnN0IHdzSW5kaWNhdG9yID0gd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6IHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkgPyAn8J+foiBDb25uZWN0ZWQnIDogJ/CflLQgRGlzY29ubmVjdGVkJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgYmFja2VuZCBzdGF0dXNcbiAgICB0aGlzLmNoZWNrQmFja2VuZFN0YXR1cyhiYWNrZW5kSW5kaWNhdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tCYWNrZW5kU3RhdHVzKGluZGljYXRvcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5+iIENvbm5lY3RlZCc7XG4gICAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBFcnJvcic7XG4gICAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yJztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgT2ZmbGluZSc7XG4gICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVF1aWNrQWN0aW9ucygpIHtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdRdWljayBBY3Rpb25zJyB9KTtcblxuICAgIGNvbnN0IGFjdGlvbnNHcmlkID0gdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCcgfSk7XG5cbiAgICAvLyBDaGF0IGFjdGlvblxuICAgIGNvbnN0IGNoYXRCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CfkqwgT3BlbiBDaGF0JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjaGF0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuQ2hhdE1vZGFsKCk7XG5cbiAgICAvLyBEYXNoYm9hcmQgYWN0aW9uIChuZXcpXG4gICAgY29uc3QgZGFzaGJvYXJkQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5OKIE9wZW4gRGFzaGJvYXJkJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBkYXNoYm9hcmRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFjdGl2YXRlRnVsbFRhYlZpZXcoKTtcblxuICAgIC8vIFdvcmtmbG93IGFjdGlvblxuICAgIGNvbnN0IHdvcmtmbG93QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfimpnvuI8gRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgd29ya2Zsb3dCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLm9wZW5Xb3JrZmxvd01vZGFsKCk7XG5cbiAgICAvLyBBbmFseXplIHZhdWx0IGFjdGlvblxuICAgIGNvbnN0IGFuYWx5emVCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CflI0gQW5hbHl6ZSBWYXVsdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgYW5hbHl6ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4uYW5hbHl6ZVZhdWx0KCk7XG5cbiAgICAvLyBDb3BpbG90IGFjdGlvblxuICAgIGNvbnN0IGNvcGlsb3RCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+KcqCBHZXQgQ29tcGxldGlvbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY29waWxvdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICB0aGlzLnBsdWdpbi5nZXRDb3BpbG90Q29tcGxldGlvbihhY3RpdmVWaWV3LmVkaXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZWRpdG9yIGZvdW5kJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFJlZnJlc2ggYnV0dG9uXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2ggU3RhdHVzJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcmVmcmVzaC1idXR0b24nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcbiAgICAgIHRoaXMudXBkYXRlVmF1bHRTdGF0cygpO1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVZhdWx0U3RhdHMoKSB7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdWYXVsdCBTdGF0aXN0aWNzJyB9KTtcblxuICAgIGNvbnN0IHN0YXRzQ29udGFpbmVyID0gdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gR2V0IHZhdWx0IHN0YXRpc3RpY3NcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgY29uc3QgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBcbiAgICBjb25zdCBzdGF0cyA9IFtcbiAgICAgIHsgbGFiZWw6ICdUb3RhbCBGaWxlcycsIHZhbHVlOiBmaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ01hcmtkb3duIEZpbGVzJywgdmFsdWU6IG1hcmtkb3duRmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdGb2xkZXJzJywgdmFsdWU6IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpLmxlbmd0aC50b1N0cmluZygpIH1cbiAgICBdO1xuXG4gICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGNvbnN0IHN0YXRFbCA9IHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC1pdGVtJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LnZhbHVlLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtdmFsdWUnIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQubGFiZWwsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC1sYWJlbCcgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYWdlbnQgaW5mbyBpZiBhdmFpbGFibGVcbiAgICB0aGlzLmxvYWRBZ2VudEluZm8oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50SW5mbygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IExvYWRpbmcgYWdlbnRzIGluIHZpZXcuLi4nKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IGdldEFnZW50cyByZXNwb25zZSBpbiB2aWV3OicsIHJlc3BvbnNlKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBsZXQgYWdlbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgLy8gRGlyZWN0IGFycmF5IHJlc3BvbnNlXG4gICAgICAgICAgYWdlbnRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIC8vIENoZWNrIGZvciB3cmFwcGVkIHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgICBjb25zdCBkYXRhT2JqID0gcmVzcG9uc2UuZGF0YSBhcyBhbnk7XG4gICAgICAgICAgaWYgKGRhdGFPYmouYWdlbnRzICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5hZ2VudHMpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHthZ2VudHM6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5hZ2VudHM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgYWdlbnRzIGFycmF5IGluIHZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuYWdlbnRzJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhT2JqLmRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHtkYXRhOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouZGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBuZXN0ZWQgZGF0YSBpbiB2aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmRhdGEnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdWYXVsdFBpbG90OiBVbmV4cGVjdGVkIHJlc3BvbnNlIGZvcm1hdDonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwbGF5IGFnZW50IGluZm9ybWF0aW9uXG4gICAgICAgIGNvbnN0IGFnZW50Q291bnQgPSBhZ2VudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSBhZ2VudHMuZmlsdGVyKChhZ2VudDogYW55KSA9PiBhZ2VudC5hY3RpdmUpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50U3RhdHNFbCA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtc3RhdHMnIH0pO1xuICAgICAgICBhZ2VudFN0YXRzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQXZhaWxhYmxlIEFnZW50cycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudEluZm8gPSBhZ2VudFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pbmZvJyB9KTtcbiAgICAgICAgYWdlbnRJbmZvLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgJHthY3RpdmVBZ2VudHN9LyR7YWdlbnRDb3VudH0gYWN0aXZlYCB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzIGluIHZpZXc6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtdmlldyB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1oZWFkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3VidGl0bGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIGgzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yLFxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVmcmVzaC1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xuICAgICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWl0ZW0ge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtdmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyBoNCB7XG4gICAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LWluZm8ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlc291cmNlc1xuICB9XG59XG4iLCJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTm90aWNlLCBNYXJrZG93blZpZXcsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQiA9ICd2YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXcnO1xuXG5leHBvcnQgY2xhc3MgVmF1bHRQaWxvdEZ1bGxUYWJWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGNoYXRFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHdvcmtmbG93RWwhOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1ZhdWx0UGlsb3QgRGFzaGJvYXJkJztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2xheW91dC1kYXNoYm9hcmQnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXcnKTtcblxuICAgIC8vIEZvcmNlIHRoZSBjb250YWluZXIgdG8gdGFrZSBmdWxsIGhlaWdodFxuICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICAvLyBDcmVhdGUgbWFpbiBsYXlvdXRcbiAgICBjb25zdCBtYWluTGF5b3V0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtbWFpbi1sYXlvdXQnIH0pO1xuXG4gICAgLy8gTGVmdCBzaWRlYmFyXG4gICAgY29uc3QgbGVmdFNpZGViYXIgPSBtYWluTGF5b3V0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtbGVmdC1zaWRlYmFyJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUxlZnRTaWRlYmFyKGxlZnRTaWRlYmFyKTtcblxuICAgIC8vIE1haW4gY29udGVudCBhcmVhXG4gICAgY29uc3QgbWFpbkNvbnRlbnQgPSBtYWluTGF5b3V0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtbWFpbi1jb250ZW50JyB9KTtcbiAgICB0aGlzLmNyZWF0ZU1haW5Db250ZW50KG1haW5Db250ZW50KTtcblxuICAgIC8vIFJpZ2h0IHNpZGViYXJcbiAgICBjb25zdCByaWdodFNpZGViYXIgPSBtYWluTGF5b3V0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmlnaHQtc2lkZWJhcicgfSk7XG4gICAgdGhpcy5jcmVhdGVSaWdodFNpZGViYXIocmlnaHRTaWRlYmFyKTtcblxuICAgIHRoaXMuYWRkRnVsbFRhYlN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVMZWZ0U2lkZWJhcihzaWRlYmFyOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXNpZGViYXItaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdBSSBBc3Npc3RhbnQgRGFzaGJvYXJkJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3VidGl0bGUnXG4gICAgfSk7XG5cbiAgICAvLyBTdGF0dXMgc2VjdGlvblxuICAgIHRoaXMuc3RhdHVzRWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuXG4gICAgLy8gUXVpY2sgYWN0aW9uc1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RhdHMnIH0pO1xuICAgIHRoaXMudXBkYXRlVmF1bHRTdGF0cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVNYWluQ29udGVudChjb250ZW50OiBIVE1MRWxlbWVudCkge1xuICAgIC8vIFRhYiBuYXZpZ2F0aW9uXG4gICAgY29uc3QgdGFiTmF2ID0gY29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXRhYi1uYXYnIH0pO1xuICAgIGNvbnN0IGNoYXRUYWIgPSB0YWJOYXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAn8J+SrCBDaGF0JywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24gYWN0aXZlJ1xuICAgIH0pO1xuICAgIGNvbnN0IHdvcmtmbG93VGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ+Kame+4jyBXb3JrZmxvd3MnLCBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtdGFiLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjb25zdCBhbmFseXRpY3NUYWIgPSB0YWJOYXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAn8J+TiiBBbmFseXRpY3MnLCBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtdGFiLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIC8vIFRhYiBjb250ZW50XG4gICAgY29uc3QgdGFiQ29udGVudCA9IGNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC10YWItY29udGVudCcgfSk7XG5cbiAgICAvLyBDaGF0IHNlY3Rpb25cbiAgICB0aGlzLmNoYXRFbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXNlY3Rpb24gYWN0aXZlJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUNoYXRTZWN0aW9uKHRoaXMuY2hhdEVsKTtcblxuICAgIC8vIFdvcmtmbG93IHNlY3Rpb25cbiAgICB0aGlzLndvcmtmbG93RWwgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbicgfSk7XG4gICAgdGhpcy5jcmVhdGVXb3JrZmxvd1NlY3Rpb24odGhpcy53b3JrZmxvd0VsKTtcblxuICAgIC8vIEFuYWx5dGljcyBzZWN0aW9uXG4gICAgY29uc3QgYW5hbHl0aWNzRWwgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24nIH0pO1xuICAgIHRoaXMuY3JlYXRlQW5hbHl0aWNzU2VjdGlvbihhbmFseXRpY3NFbCk7XG5cbiAgICAvLyBUYWIgc3dpdGNoaW5nXG4gICAgY2hhdFRhYi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zd2l0Y2hUYWIoJ2NoYXQnLCBjaGF0VGFiKTtcbiAgICB3b3JrZmxvd1RhYi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zd2l0Y2hUYWIoJ3dvcmtmbG93Jywgd29ya2Zsb3dUYWIpO1xuICAgIGFuYWx5dGljc1RhYi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zd2l0Y2hUYWIoJ2FuYWx5dGljcycsIGFuYWx5dGljc1RhYik7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVJpZ2h0U2lkZWJhcihzaWRlYmFyOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIFJlY2VudCBmaWxlc1xuICAgIGNvbnN0IHJlY2VudEZpbGVzRWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVjZW50LWZpbGVzJyB9KTtcbiAgICByZWNlbnRGaWxlc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlY2VudCBGaWxlcycgfSk7XG4gICAgdGhpcy51cGRhdGVSZWNlbnRGaWxlcyhyZWNlbnRGaWxlc0VsKTtcblxuICAgIC8vIEFnZW50IHN0YXR1c1xuICAgIGNvbnN0IGFnZW50U3RhdHVzRWwgPSBzaWRlYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtc3RhdHVzJyB9KTtcbiAgICBhZ2VudFN0YXR1c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FnZW50IFN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVBZ2VudFN0YXR1cyhhZ2VudFN0YXR1c0VsKTtcblxuICAgIC8vIEFjdGl2aXR5IGZlZWRcbiAgICBjb25zdCBhY3Rpdml0eUVsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXR5LWZlZWQnIH0pO1xuICAgIGFjdGl2aXR5RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWN0aXZpdHkgRmVlZCcgfSk7XG4gICAgdGhpcy5jcmVhdGVBY3Rpdml0eUZlZWQoYWN0aXZpdHlFbCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNoYXRTZWN0aW9uKGNoYXRFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBDaGF0IGNvbnRlbnQgY29udGFpbmVyIHdpdGggcGFkZGluZyBhbmQgc2Nyb2xsaW5nXG4gICAgY29uc3QgY2hhdENvbnRlbnQgPSBjaGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWNvbnRlbnQnIH0pO1xuXG4gICAgLy8gQ2hhdCBoZWFkZXIgKG5vdyBpbnNpZGUgY29udGVudClcbiAgICBjb25zdCBjaGF0SGVhZGVyID0gY2hhdENvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhlYWRlcicgfSk7XG4gICAgY2hhdEhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBSSBDaGF0IEludGVyZmFjZScgfSk7XG5cbiAgICAvLyBDaGF0IGhpc3RvcnlcbiAgICBjb25zdCBjaGF0SGlzdG9yeSA9IGNoYXRDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oaXN0b3J5JyB9KTtcbiAgICBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdXZWxjb21lISBTdGFydCBhIGNvbnZlcnNhdGlvbiB3aXRoIHlvdXIgQUkgYXNzaXN0YW50LicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtd2VsY29tZSdcbiAgICB9KTtcblxuICAgIC8vIENoYXQgaW5wdXRcbiAgICBjb25zdCBjaGF0SW5wdXQgPSBjaGF0Q29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnIH0pO1xuICAgIGNvbnN0IHRleHRhcmVhID0gY2hhdElucHV0LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgXG4gICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBtZXNzYWdlIGhlcmUuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXRleHRhcmVhJ1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHNlbmRCdXR0b24gPSBjaGF0SW5wdXQuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICBzZW5kQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5zZW5kQ2hhdE1lc3NhZ2UobWVzc2FnZSwgY2hhdEhpc3RvcnkpO1xuICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgRW50ZXIga2V5XG4gICAgdGV4dGFyZWEub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNlbmRCdXR0b24uY2xpY2soKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVXb3JrZmxvd1NlY3Rpb24od29ya2Zsb3dFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBXb3JrZmxvdyBjb250ZW50IGNvbnRhaW5lciB3aXRoIHBhZGRpbmcgYW5kIHNjcm9sbGluZ1xuICAgIGNvbnN0IHdvcmtmbG93Q29udGVudCA9IHdvcmtmbG93RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1jb250ZW50JyB9KTtcbiAgICBcbiAgICAvLyBXb3JrZmxvdyBoZWFkZXIgKG5vdyBpbnNpZGUgY29udGVudClcbiAgICBjb25zdCB3b3JrZmxvd0hlYWRlciA9IHdvcmtmbG93Q29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlcicgfSk7XG4gICAgd29ya2Zsb3dIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnV29ya2Zsb3cgTWFuYWdlbWVudCcgfSk7XG5cbiAgICBjb25zdCB3b3JrZmxvd0dyaWQgPSB3b3JrZmxvd0NvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1ncmlkJyB9KTtcblxuICAgIC8vIFByZWRlZmluZWQgd29ya2Zsb3dzXG4gICAgY29uc3Qgd29ya2Zsb3dzID0gW1xuICAgICAgeyBuYW1lOiAnQW5hbHl6ZSBWYXVsdCcsIGljb246ICfwn5SNJywgZGVzY3JpcHRpb246ICdBbmFseXplIHlvdXIgdmF1bHQgc3RydWN0dXJlIGFuZCBjb250ZW50JyB9LFxuICAgICAgeyBuYW1lOiAnR2VuZXJhdGUgU3VtbWFyeScsIGljb246ICfwn5OdJywgZGVzY3JpcHRpb246ICdDcmVhdGUgc3VtbWFyaWVzIG9mIHlvdXIgbm90ZXMnIH0sXG4gICAgICB7IG5hbWU6ICdMaW5rIEFuYWx5c2lzJywgaWNvbjogJ/CflJcnLCBkZXNjcmlwdGlvbjogJ0FuYWx5emUgbm90ZSBjb25uZWN0aW9ucyBhbmQgcmVsYXRpb25zaGlwcycgfSxcbiAgICAgIHsgbmFtZTogJ1RhZyBNYW5hZ2VtZW50JywgaWNvbjogJ/Cfj7fvuI8nLCBkZXNjcmlwdGlvbjogJ09yZ2FuaXplIGFuZCBtYW5hZ2UgeW91ciB0YWdzJyB9LFxuICAgICAgeyBuYW1lOiAnRGFpbHkgUGxhbm5pbmcnLCBpY29uOiAn8J+ThScsIGRlc2NyaXB0aW9uOiAnUGxhbiB5b3VyIGRheSBiYXNlZCBvbiB5b3VyIG5vdGVzJyB9LFxuICAgICAgeyBuYW1lOiAnS25vd2xlZGdlIEdyYXBoJywgaWNvbjogJ/CflbjvuI8nLCBkZXNjcmlwdGlvbjogJ1Zpc3VhbGl6ZSB5b3VyIGtub3dsZWRnZSBjb25uZWN0aW9ucycgfSxcbiAgICAgIHsgbmFtZTogJ0NvbnRlbnQgU2VhcmNoJywgaWNvbjogJ/CflI4nLCBkZXNjcmlwdGlvbjogJ0FkdmFuY2VkIHNlYXJjaCBhY3Jvc3MgeW91ciB2YXVsdCcgfSxcbiAgICAgIHsgbmFtZTogJ05vdGUgVGVtcGxhdGVzJywgaWNvbjogJ/Cfk4QnLCBkZXNjcmlwdGlvbjogJ0NyZWF0ZSBhbmQgbWFuYWdlIG5vdGUgdGVtcGxhdGVzJyB9LFxuICAgICAgeyBuYW1lOiAnTGluayBBc3Npc3RhbnQnLCBpY29uOiAn8J+UlycsIGRlc2NyaXB0aW9uOiAnSW50ZWxsaWdlbnQgbGluayBzdWdnZXN0aW9ucyBhbmQgbWFuYWdlbWVudCcgfVxuICAgIF07XG5cbiAgICB3b3JrZmxvd3MuZm9yRWFjaCh3b3JrZmxvdyA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd0NhcmQgPSB3b3JrZmxvd0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1jYXJkJyB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB3b3JrZmxvdy5pY29uLCBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWljb24nIH0pO1xuICAgICAgd29ya2Zsb3dDYXJkLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogd29ya2Zsb3cubmFtZSB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgncCcsIHsgdGV4dDogd29ya2Zsb3cuZGVzY3JpcHRpb24gfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJ1bkJ1dHRvbiA9IHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ1J1bicsXG4gICAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBydW5CdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucnVuV29ya2Zsb3cod29ya2Zsb3cubmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQW5hbHl0aWNzIGNvbnRlbnQgY29udGFpbmVyIHdpdGggcGFkZGluZyBhbmQgc2Nyb2xsaW5nXG4gICAgY29uc3QgYW5hbHl0aWNzQ29udGVudCA9IGFuYWx5dGljc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYW5hbHl0aWNzLWNvbnRlbnQnIH0pO1xuICAgIFxuICAgIC8vIEFuYWx5dGljcyBoZWFkZXIgKG5vdyBpbnNpZGUgY29udGVudClcbiAgICBjb25zdCBhbmFseXRpY3NIZWFkZXIgPSBhbmFseXRpY3NDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYW5hbHl0aWNzLWhlYWRlcicgfSk7XG4gICAgYW5hbHl0aWNzSGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IEFuYWx5dGljcycgfSk7XG5cbiAgICBjb25zdCBjaGFydHNDb250YWluZXIgPSBhbmFseXRpY3NDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnRzLWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gRmlsZSB0eXBlIGRpc3RyaWJ1dGlvblxuICAgIGNvbnN0IGZpbGVUeXBlQ2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICBmaWxlVHlwZUNoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0ZpbGUgVHlwZSBEaXN0cmlidXRpb24nIH0pO1xuICAgIGZpbGVUeXBlQ2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnQ2hhcnQgdmlzdWFsaXphdGlvbiBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gTm90ZSBjcmVhdGlvbiB0aW1lbGluZVxuICAgIGNvbnN0IHRpbWVsaW5lQ2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICB0aW1lbGluZUNoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ05vdGUgQ3JlYXRpb24gVGltZWxpbmUnIH0pO1xuICAgIHRpbWVsaW5lQ2hhcnQuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnVGltZWxpbmUgdmlzdWFsaXphdGlvbiBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gVGFnIHVzYWdlXG4gICAgY29uc3QgdGFnQ2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICB0YWdDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdUYWcgVXNhZ2UnIH0pO1xuICAgIHRhZ0NoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1RhZyBhbmFseXRpY3MgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIFdvcmQgY291bnQgYW5hbHlzaXNcbiAgICBjb25zdCB3b3JkQ291bnRDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIHdvcmRDb3VudENoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1dvcmQgQ291bnQgQW5hbHlzaXMnIH0pO1xuICAgIHdvcmRDb3VudENoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1dvcmQgY291bnQgdmlzdWFsaXphdGlvbiBjb21pbmcgc29vbi4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyJ1xuICAgIH0pO1xuXG4gICAgLy8gTGluayBkZW5zaXR5XG4gICAgY29uc3QgbGlua0NoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgbGlua0NoYXJ0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0xpbmsgRGVuc2l0eScgfSk7XG4gICAgbGlua0NoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ0xpbmsgYW5hbHlzaXMgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIEFjdGl2aXR5IGhlYXRtYXBcbiAgICBjb25zdCBhY3Rpdml0eUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgYWN0aXZpdHlDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBY3Rpdml0eSBIZWF0bWFwJyB9KTtcbiAgICBhY3Rpdml0eUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ0FjdGl2aXR5IGhlYXRtYXAgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc3dpdGNoVGFiKHRhYk5hbWU6IHN0cmluZywgYnV0dG9uOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbGwgdGFic1xuICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcudmF1bHRwaWxvdC1jaGF0LXNlY3Rpb24sIC52YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24sIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJykuZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgIHNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFjdGl2ZSBjbGFzcyB0byBjbGlja2VkIHRhYlxuICAgIGJ1dHRvbi5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAvLyBTaG93IGNvcnJlc3BvbmRpbmcgY29udGVudFxuICAgIGlmICh0YWJOYW1lID09PSAnY2hhdCcpIHtcbiAgICAgIHRoaXMuY2hhdEVsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9IGVsc2UgaWYgKHRhYk5hbWUgPT09ICd3b3JrZmxvdycpIHtcbiAgICAgIHRoaXMud29ya2Zsb3dFbC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfSBlbHNlIGlmICh0YWJOYW1lID09PSAnYW5hbHl0aWNzJykge1xuICAgICAgdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbicpPy5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kQ2hhdE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nLCBjaGF0SGlzdG9yeTogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBBZGQgdXNlciBtZXNzYWdlXG4gICAgY29uc3QgdXNlck1lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSB1c2VyJyB9KTtcbiAgICB1c2VyTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBtZXNzYWdlIH0pO1xuXG4gICAgLy8gQWRkIHRoaW5raW5nIGluZGljYXRvclxuICAgIGNvbnN0IHRoaW5raW5nTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGFzc2lzdGFudCB0aGlua2luZycgfSk7XG4gICAgdGhpbmtpbmdNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdUaGlua2luZy4uLicgfSk7XG5cbiAgICAvLyBTY3JvbGwgdG8gYm90dG9tXG4gICAgY2hhdEhpc3Rvcnkuc2Nyb2xsVG9wID0gY2hhdEhpc3Rvcnkuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNlbmRDaGF0KHsgbWVzc2FnZSwgY29udGV4dDogbnVsbCB9KTtcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIHRoaW5raW5nIGluZGljYXRvclxuICAgICAgdGhpbmtpbmdNZXNzYWdlLnJlbW92ZSgpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBhc3Npc3RhbnQnIH0pO1xuICAgICAgICBhc3Npc3RhbnRNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBlcnJvcicgfSk7XG4gICAgICAgIGVycm9yTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnRXJyb3I6IENvdWxkIG5vdCBnZXQgcmVzcG9uc2UgZnJvbSBBSScgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFJlbW92ZSB0aGlua2luZyBpbmRpY2F0b3JcbiAgICAgIHRoaW5raW5nTWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgZXJyb3InIH0pO1xuICAgICAgZXJyb3JNZXNzYWdlLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdFcnJvcjogQ29ubmVjdGlvbiBmYWlsZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIFNjcm9sbCB0byBib3R0b21cbiAgICBjaGF0SGlzdG9yeS5zY3JvbGxUb3AgPSBjaGF0SGlzdG9yeS5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bldvcmtmbG93KHdvcmtmbG93TmFtZTogc3RyaW5nKSB7XG4gICAgbmV3IE5vdGljZShgUnVubmluZyB3b3JrZmxvdzogJHt3b3JrZmxvd05hbWV9YCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIE1hcCB3b3JrZmxvdyBuYW1lcyB0byBhcHByb3ByaWF0ZSBhY3Rpb25zXG4gICAgICBzd2l0Y2ggKHdvcmtmbG93TmFtZSkge1xuICAgICAgICBjYXNlICdBbmFseXplIFZhdWx0JzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnJ1bkFuYWx5emVWYXVsdFdvcmtmbG93KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0RhaWx5IFBsYW5uaW5nJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5wbGFuTXlEYXkoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnR2VuZXJhdGUgU3VtbWFyeSc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5ydW5TdW1tYXJ5V29ya2Zsb3coKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTGluayBBbmFseXNpcyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5ydW5MaW5rQW5hbHlzaXNXb3JrZmxvdygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdDb250ZW50IFNlYXJjaCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5ydW5Db250ZW50U2VhcmNoV29ya2Zsb3coKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBGb3Igd29ya2Zsb3dzIHRoYXQgbmVlZCBzZXJ2ZXItc2lkZSB0ZW1wbGF0ZXNcbiAgICAgICAgICBhd2FpdCB0aGlzLnJ1bkdlbmVyaWNXb3JrZmxvdyh3b3JrZmxvd05hbWUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfTpgLCBlcnJvcik7XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ05vdCBGb3VuZCcpIHx8IGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDQnKSkge1xuICAgICAgICBuZXcgTm90aWNlKGAke3dvcmtmbG93TmFtZX0gd29ya2Zsb3cgcmVxdWlyZXMgc2VydmVyLXNpZGUgaW1wbGVtZW50YXRpb24uIFBsZWFzZSBjaGVjayBzZXJ2ZXIgY29uZmlndXJhdGlvbi5gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfSAtICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bkFuYWx5emVWYXVsdFdvcmtmbG93KCkge1xuICAgIGlmICh0aGlzLnBsdWdpbi52YXVsdENsaWVudCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy5wbHVnaW4udmF1bHRDbGllbnQuZ2V0VmF1bHRTdHJ1Y3R1cmUoe1xuICAgICAgICAgIGluY2x1ZGVfY29udGVudDogZmFsc2UsXG4gICAgICAgICAgbWF4X2RlcHRoOiAzXG4gICAgICAgIH0pO1xuICAgICAgICBuZXcgTm90aWNlKGBWYXVsdCBhbmFseXNpcyBjb21wbGV0ZSEgRm91bmQgJHtzdHJ1Y3R1cmUudG90YWxfZmlsZXN9IGZpbGVzIGluICR7c3RydWN0dXJlLnRvdGFsX2ZvbGRlcnN9IGZvbGRlcnMuYCk7XG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnTm90IEZvdW5kJykpIHtcbiAgICAgICAgICAvLyBGYWxsYmFjayB0byBsb2NhbCBhbmFseXNpc1xuICAgICAgICAgIGF3YWl0IHRoaXMucnVuTG9jYWxWYXVsdEFuYWx5c2lzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5ydW5Mb2NhbFZhdWx0QW5hbHlzaXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bkxvY2FsVmF1bHRBbmFseXNpcygpIHtcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgY29uc3QgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCBmb2xkZXJzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoO1xuICAgIFxuICAgIG5ldyBOb3RpY2UoYExvY2FsIHZhdWx0IGFuYWx5c2lzOiAke21hcmtkb3duRmlsZXMubGVuZ3RofSBtYXJrZG93biBmaWxlcywgJHtmaWxlcy5sZW5ndGh9IHRvdGFsIGZpbGVzLCAke2ZvbGRlcnN9IGZvbGRlcnMuYCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1blN1bW1hcnlXb3JrZmxvdygpIHtcbiAgICAvLyBUcnkgdG8gdXNlIGV4aXN0aW5nIHdvcmtmbG93IGVuZHBvaW50XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBvcGVuIGEgZmlsZSB0byBzdW1tYXJpemUnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJ1bldvcmtmbG93KHtcbiAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjcmVhdGUgYSBjb21wcmVoZW5zaXZlIHN1bW1hcnkgb2YgdGhpcyBjb250ZW50JyxcbiAgICAgICAgY29udGV4dDogY29udGVudFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnU3VtbWFyeSBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdTdW1tYXJ5IGdlbmVyYXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTdW1tYXJ5IHdvcmtmbG93IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuTGlua0FuYWx5c2lzV29ya2Zsb3coKSB7XG4gICAgY29uc3QgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgdG90YWxMaW5rcyA9IDA7XG4gICAgbGV0IGxpbmtlZEZpbGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIG1hcmtkb3duRmlsZXMpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgbGlua01hdGNoZXMgPSBjb250ZW50Lm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZyk7XG4gICAgICBpZiAobGlua01hdGNoZXMpIHtcbiAgICAgICAgdG90YWxMaW5rcyArPSBsaW5rTWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIGxpbmtNYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xuICAgICAgICAgIGNvbnN0IGxpbmtUYXJnZXQgPSBtYXRjaC5zbGljZSgyLCAtMik7XG4gICAgICAgICAgbGlua2VkRmlsZXMuYWRkKGxpbmtUYXJnZXQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3Qgb3JwaGFuZWRGaWxlcyA9IG1hcmtkb3duRmlsZXMubGVuZ3RoIC0gbGlua2VkRmlsZXMuc2l6ZTtcbiAgICBuZXcgTm90aWNlKGBMaW5rIGFuYWx5c2lzOiAke3RvdGFsTGlua3N9IHRvdGFsIGxpbmtzLCAke2xpbmtlZEZpbGVzLnNpemV9IGxpbmtlZCBmaWxlcywgJHtvcnBoYW5lZEZpbGVzfSBvcnBoYW5lZCBmaWxlcy5gKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuQ29udGVudFNlYXJjaFdvcmtmbG93KCkge1xuICAgIC8vIE9wZW4gdGhlIHNtYXJ0IHNlYXJjaCBtb2RhbCBpZiB2YXVsdCBtYW5hZ2VtZW50IGlzIGF2YWlsYWJsZVxuICAgIGlmICh0aGlzLnBsdWdpbi52YXVsdENsaWVudCAmJiB0aGlzLnBsdWdpbi5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgdGhpcy5wbHVnaW4ub3BlblNtYXJ0U2VhcmNoTW9kYWwoJycsICdjb21wcmVoZW5zaXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0NvbnRlbnQgc2VhcmNoIHJlcXVpcmVzIHZhdWx0IG1hbmFnZW1lbnQgZmVhdHVyZXMuIFBsZWFzZSBlbmFibGUgaW4gc2V0dGluZ3MuJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5HZW5lcmljV29ya2Zsb3cod29ya2Zsb3dOYW1lOiBzdHJpbmcpIHtcbiAgICAvLyBGb3Igd29ya2Zsb3dzIHRoYXQgbWlnaHQgbmVlZCBzZXJ2ZXItc2lkZSB0ZW1wbGF0ZXNcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQucnVuV29ya2Zsb3coe1xuICAgICAgICBtZXNzYWdlOiBgRXhlY3V0ZSB3b3JrZmxvdzogJHt3b3JrZmxvd05hbWV9YCxcbiAgICAgICAgY29udGV4dDogbnVsbFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgbmV3IE5vdGljZShgJHt3b3JrZmxvd05hbWV9IGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1dvcmtmbG93IGV4ZWN1dGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ05vdCBGb3VuZCcpIHx8IGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDQnKSkge1xuICAgICAgICBuZXcgTm90aWNlKGAke3dvcmtmbG93TmFtZX0gd29ya2Zsb3cgaXMgbm90IHlldCBpbXBsZW1lbnRlZCBvbiB0aGUgc2VydmVyLiBDb21pbmcgc29vbiFgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzKCkge1xuICAgIHRoaXMuc3RhdHVzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24gU3RhdHVzJyB9KTtcblxuICAgIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEJhY2tlbmQgc3RhdHVzXG4gICAgY29uc3QgYmFja2VuZFN0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQmFja2VuZDogJyB9KTtcbiAgICBjb25zdCBiYWNrZW5kSW5kaWNhdG9yID0gYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogJ0NoZWNraW5nLi4uJ1xuICAgIH0pO1xuXG4gICAgLy8gV2ViU29ja2V0IHN0YXR1c1xuICAgIGNvbnN0IHdzU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnV2ViU29ja2V0OiAnIH0pO1xuICAgIGNvbnN0IHdzSW5kaWNhdG9yID0gd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6IHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkgPyAn8J+foiBDb25uZWN0ZWQnIDogJ/CflLQgRGlzY29ubmVjdGVkJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgYmFja2VuZCBzdGF0dXNcbiAgICB0aGlzLmNoZWNrQmFja2VuZFN0YXR1cyhiYWNrZW5kSW5kaWNhdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tCYWNrZW5kU3RhdHVzKGluZGljYXRvcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2gnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuXG4gICAgLy8gT3BlbiBzaWRlYmFyIHZpZXdcbiAgICBjb25zdCBzaWRlYmFyQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5OLIFNpZGViYXIgVmlldycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgc2lkZWJhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cbiAgICAvLyBPcGVuIG1vZGFsIGNoYXRcbiAgICBjb25zdCBtb2RhbENoYXRCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CfkqwgTW9kYWwgQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgbW9kYWxDaGF0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuQ2hhdE1vZGFsKCk7XG5cbiAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBXb3JrZmxvd3MnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVSZWNlbnRGaWxlcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcmVjZW50RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpXG4gICAgICAuc2xpY2UoMCwgNSk7XG5cbiAgICByZWNlbnRGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgY29uc3QgZmlsZUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVjZW50LWZpbGUnIH0pO1xuICAgICAgZmlsZUVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBmaWxlLmJhc2VuYW1lIH0pO1xuICAgICAgZmlsZUVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgZmFsc2UpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQWdlbnRTdGF0dXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMubG9hZEFnZW50SW5mbyhjb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKGNvbnRhaW5lcj86IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cyBpbiBmdWxsLXRhYi12aWV3Li4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBnZXRBZ2VudHMgcmVzcG9uc2UgaW4gZnVsbC10YWItdmlldzonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEgJiYgY29udGFpbmVyKSB7XG4gICAgICAgIGxldCBhZ2VudHM6IGFueVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YSkpIHtcbiAgICAgICAgICAvLyBEaXJlY3QgYXJyYXkgcmVzcG9uc2VcbiAgICAgICAgICBhZ2VudHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgJiYgdHlwZW9mIHJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIHdyYXBwZWQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICAgIGNvbnN0IGRhdGFPYmogPSByZXNwb25zZS5kYXRhIGFzIGFueTtcbiAgICAgICAgICBpZiAoZGF0YU9iai5hZ2VudHMgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmFnZW50cykpIHtcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZvcm1hdDoge2FnZW50czogWy4uLl19XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmFnZW50cztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBhZ2VudHMgYXJyYXkgaW4gZnVsbC10YWItdmlldywgdXNpbmcgcmVzcG9uc2UuZGF0YS5hZ2VudHMnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFPYmouZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouZGF0YSkpIHtcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZvcm1hdDoge2RhdGE6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5kYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kIG5lc3RlZCBkYXRhIGluIGZ1bGwtdGFiLXZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuZGF0YScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1ZhdWx0UGlsb3Q6IFVuZXhwZWN0ZWQgcmVzcG9uc2UgZm9ybWF0OicsIHR5cGVvZiByZXNwb25zZS5kYXRhLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BsYXkgYWdlbnQgaW5mb3JtYXRpb25cbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IGFnZW50cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUFnZW50cyA9IGFnZW50cy5maWx0ZXIoKGFnZW50OiBhbnkpID0+IGFnZW50LmFjdGl2ZSkubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgJHthY3RpdmVBZ2VudHN9LyR7YWdlbnRDb3VudH0gYWN0aXZlYCB9KTtcbiAgICAgICAgXG4gICAgICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgYWdlbnRFbCA9IGFnZW50SW5mby5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWl0ZW0nIH0pO1xuICAgICAgICAgIGFnZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGFnZW50Lm5hbWUgfSk7XG4gICAgICAgICAgYWdlbnRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBhZ2VudC5hY3RpdmUgPyAn8J+foicgOiAn8J+UtCcsXG4gICAgICAgICAgICBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50cyBpbiBmdWxsIHRhYiB2aWV3OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFjdGl2aXR5RmVlZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgYWN0aXZpdGllcyA9IFtcbiAgICAgIHsgdGltZTogJ0p1c3Qgbm93JywgYWN0aXZpdHk6ICdWYXVsdFBpbG90IHN0YXJ0ZWQnIH0sXG4gICAgICB7IHRpbWU6ICc1IG1pbiBhZ28nLCBhY3Rpdml0eTogJ0Nvbm5lY3Rpb24gZXN0YWJsaXNoZWQnIH0sXG4gICAgICB7IHRpbWU6ICcxIGhvdXIgYWdvJywgYWN0aXZpdHk6ICdMYXN0IHZhdWx0IGFuYWx5c2lzJyB9XG4gICAgXTtcblxuICAgIGFjdGl2aXRpZXMuZm9yRWFjaChhY3Rpdml0eSA9PiB7XG4gICAgICBjb25zdCBhY3Rpdml0eUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aXZpdHktaXRlbScgfSk7XG4gICAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGFjdGl2aXR5LmFjdGl2aXR5IH0pO1xuICAgICAgYWN0aXZpdHlFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhY3Rpdml0eS50aW1lLCBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXR5LXRpbWUnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRGdWxsVGFiU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtZnVsbC10YWItc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LWZ1bGwtdGFiLXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAvKiBFbnN1cmUgdGhlIGZ1bGwgdGFiIHZpZXcgZmlsbHMgYXZhaWxhYmxlIHNwYWNlICovXG4gICAgICAgIC53b3Jrc3BhY2UtbGVhZi1jb250ZW50W2RhdGEtdHlwZT1cInZhdWx0cGlsb3QtZnVsbC10YWItdmlld1wiXSB7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXcge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWFpbi1sYXlvdXQge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBnYXA6IDFweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1sZWZ0LXNpZGViYXIge1xuICAgICAgICAgIHdpZHRoOiAyNTBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tYWluLWNvbnRlbnQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yaWdodC1zaWRlYmFyIHtcbiAgICAgICAgICB3aWR0aDogMjUwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc2lkZWJhci1oZWFkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLW5hdiB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItYnV0dG9uIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItYnV0dG9uLmFjdGl2ZSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXRhYi1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAvKiBTZWN0aW9ucyBqdXN0IGZsZXgtZ3JvdyBhbmQgaG9sZCB0aGVpciBjaGlsZHJlbiAqL1xuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlY3Rpb24sXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24sXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lOyAgICAgICAgICAgLyogaGlkZGVuIGJ5IGRlZmF1bHQgKi9cbiAgICAgICAgICBmbGV4OiAxIDEgMDsgICAgICAgICAgICAgLyogZmxleC1ncm93LCBmbGV4LXNocmluaywgYmFzZSAwICovXG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAwOyAgICAgICAgICAgLyogYWxsb3cgY2hpbGRyZW4gdG8gc2hyaW5rL3Njcm9sbCAqL1xuICAgICAgICB9XG5cbiAgICAgICAgLyogQWN0aXZlIHNlY3Rpb24gc2hvd3MgYW5kIGZsZXhlcyAqL1xuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlY3Rpb24uYWN0aXZlLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLmFjdGl2ZSxcbiAgICAgICAgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24uYWN0aXZlIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4OyAgICAgICAgICAgLyogc2hvdyAmIGZsZXggd2hlbiBhY3RpdmUgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENvbnRlbnQgcGFuZWxzIGhhbmRsZSB0aGUgc2Nyb2xsaW5nICovXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGVudCxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctY29udGVudCxcbiAgICAgICAgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLWNvbnRlbnQge1xuICAgICAgICAgIGZsZXg6IDEgMSAwOyAgICAgICAgICAgICAvKiBmaWxsIHJlbWFpbmluZyBzcGFjZSAqL1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7ICAgICAgICAgICAvKiBjcml0aWNhbCB0byBhbGxvdyBvdmVyZmxvdyAqL1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87ICAgICAgICAvKiBub3cgKnRoaXMqIGNvbnRhaW5lciBzY3JvbGxzICovXG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGtlZXAgc3BlY2lhbCBjaGF0IGdhcHMgKi9cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1jb250ZW50IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGlzdG9yeSB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdGV4dGFyZWEge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1heC13aWR0aDogODAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS51c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLmFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLnRoaW5raW5nIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS5lcnJvciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGVhZGVyLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGVhZGVyIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1oZWFkZXIgaDMge1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctY2FyZDpob3ZlciB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaWNvbiB7XG4gICAgICAgICAgZm9udC1zaXplOiAzMnB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1ydW4tYnV0dG9uIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0LWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1jYXJkOmhvdmVyIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlciB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWNlbnQtZmlsZSB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVjZW50LWZpbGU6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdHktaXRlbSB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDZweCAwO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdHktdGltZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgICAgIH1cbiAgICAgICAgLyogSW5oZXJpdCBzdHlsZXMgZnJvbSBvcmlnaW5hbCB2aWV3ICovXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyBoMyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDRweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1lcnJvcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtaXRlbSB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LXZhbHVlIHtcbiAgICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzXG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gR2xvYmFsIGFwcCBpbnN0YW5jZSAtIHdpbGwgYmUgc2V0IGJ5IHRoZSBtYWluIHBsdWdpblxuZXhwb3J0IGxldCBhcHA6IEFwcDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldEFwcChhcHBJbnN0YW5jZTogQXBwKSB7XG4gIGFwcCA9IGFwcEluc3RhbmNlO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGNvbnRlbnQgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgbWFya2Rvd24gZmlsZVxuICogQHJldHVybnMgVGhlIG1hcmtkb3duIGNvbnRlbnQgKHRydW5jYXRlZCB0byA4MDAwIGNoYXJzKSBvciBudWxsIGlmIG5vIGZpbGUgaXMgYWN0aXZlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVNYXJrZG93bigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICBpZiAoIWZpbGUpIHJldHVybiBudWxsO1xuICBcbiAgLy8gTGFyZ2Ugbm90ZXM/IFNuaXAgdG8gODAwMCBjaGFycyB0byBrZWVwIHRva2VucyByZWFzb25hYmxlXG4gIGNvbnN0IHRleHQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgcmV0dXJuIHRleHQuc2xpY2UoMCwgOF8wMDApO1xufVxuIiwiLyoqXG4gKiBEZXZlbG9wbWVudCBDb250ZXh0IFNlcnZpY2UgZm9yIFZhdWx0UGlsb3RcbiAqIFxuICogUHJvdmlkZXMgY29tcHJlaGVuc2l2ZSBkZXZlbG9wbWVudCBjb250ZXh0IGZvciBBSSBjb252ZXJzYXRpb25zIGluY2x1ZGluZzpcbiAqIC0gV29ya3NwYWNlIHN0cnVjdHVyZSBhbmQgZmlsZSBhbmFseXNpc1xuICogLSBBY3RpdmUgZmlsZSBjb250ZW50IGFuZCBtZXRhZGF0YVxuICogLSBVc2VyIHNlbGVjdGlvbiBhbmQgY3Vyc29yIGNvbnRleHRcbiAqIC0gUHJvamVjdCB0eXBlIGFuZCBkZXBlbmRlbmN5IGRldGVjdGlvblxuICogLSBHaXQgcmVwb3NpdG9yeSBpbmZvcm1hdGlvblxuICovXG5cbmltcG9ydCB7IEFwcCwgVEZpbGUsIFZhdWx0LCBNZXRhZGF0YUNhY2hlLCBXb3Jrc3BhY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG4vLyBDb250ZXh0IEludGVyZmFjZXNcbmV4cG9ydCBpbnRlcmZhY2UgRGV2ZWxvcG1lbnRDb250ZXh0IHtcbiAgd29ya3NwYWNlOiBXb3Jrc3BhY2VDb250ZXh0O1xuICBhY3RpdmVGaWxlOiBGaWxlQ29udGV4dCB8IG51bGw7XG4gIHNlbGVjdGlvbjogU2VsZWN0aW9uQ29udGV4dCB8IG51bGw7XG4gIHByb2plY3Q6IFByb2plY3RDb250ZXh0O1xuICBnaXQ6IEdpdENvbnRleHQgfCBudWxsO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3Jrc3BhY2VDb250ZXh0IHtcbiAgdG90YWxGaWxlczogbnVtYmVyO1xuICByZWNlbnRGaWxlczogc3RyaW5nW107XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBmb2xkZXJzOiBGb2xkZXJTdHJ1Y3R1cmVbXTtcbiAgZmlsZVR5cGVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICB2YXVsdFBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlQ29udGV4dCB7XG4gIHBhdGg6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGxhbmd1YWdlOiBzdHJpbmc7XG4gIGV4dGVuc2lvbjogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIG1ldGFkYXRhOiBGaWxlTWV0YWRhdGE7XG4gIHN5bWJvbHM6IENvZGVTeW1ib2xbXTtcbiAgZGVwZW5kZW5jaWVzOiBzdHJpbmdbXTtcbiAgbGFzdE1vZGlmaWVkOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU1ldGFkYXRhIHtcbiAgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBsaW5rczogc3RyaW5nW107XG4gIGJhY2tsaW5rczogc3RyaW5nW107XG4gIGhlYWRpbmdzOiBIZWFkaW5nSW5mb1tdO1xuICB3b3JkQ291bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWFkaW5nSW5mbyB7XG4gIGxldmVsOiBudW1iZXI7XG4gIHRleHQ6IHN0cmluZztcbiAgbGluZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbkNvbnRleHQge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHN0YXJ0TGluZTogbnVtYmVyO1xuICBlbmRMaW5lOiBudW1iZXI7XG4gIHN0YXJ0Q29sOiBudW1iZXI7XG4gIGVuZENvbDogbnVtYmVyO1xuICBzdXJyb3VuZGluZ0NvbnRleHQ6IHN0cmluZztcbiAgbGluZUNvbnRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2RlU3ltYm9sIHtcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiAnZnVuY3Rpb24nIHwgJ2NsYXNzJyB8ICd2YXJpYWJsZScgfCAnaW50ZXJmYWNlJyB8ICd0eXBlJyB8ICdjb25zdGFudCc7XG4gIGxpbmU6IG51bWJlcjtcbiAgc2NvcGU6IHN0cmluZztcbiAgc2lnbmF0dXJlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3RDb250ZXh0IHtcbiAgdHlwZTogUHJvamVjdFR5cGU7XG4gIHN0cnVjdHVyZTogUHJvamVjdFN0cnVjdHVyZTtcbiAgZGVwZW5kZW5jaWVzOiBEZXBlbmRlbmN5SW5mb1tdO1xuICBidWlsZFN5c3RlbTogQnVpbGRTeXN0ZW1JbmZvIHwgbnVsbDtcbiAgdGVzdEZyYW1ld29yazogVGVzdEZyYW1ld29ya0luZm8gfCBudWxsO1xuICBkb2N1bWVudGF0aW9uOiBEb2N1bWVudGF0aW9uSW5mb1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3RTdHJ1Y3R1cmUge1xuICByb290RmlsZXM6IHN0cmluZ1tdO1xuICBzb3VyY2VEaXJlY3Rvcmllczogc3RyaW5nW107XG4gIHRlc3REaXJlY3Rvcmllczogc3RyaW5nW107XG4gIGNvbmZpZ0ZpbGVzOiBzdHJpbmdbXTtcbiAgZG9jdW1lbnRhdGlvbkZpbGVzOiBzdHJpbmdbXTtcbiAgZGVwdGg6IG51bWJlcjtcbiAgZXN0aW1hdGVkU2l6ZTogJ3NtYWxsJyB8ICdtZWRpdW0nIHwgJ2xhcmdlJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXBlbmRlbmN5SW5mbyB7XG4gIG5hbWU6IHN0cmluZztcbiAgdmVyc2lvbj86IHN0cmluZztcbiAgdHlwZTogJ2RldicgfCAncnVudGltZScgfCAncGVlcic7XG4gIHNvdXJjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ1aWxkU3lzdGVtSW5mbyB7XG4gIHR5cGU6ICducG0nIHwgJ3lhcm4nIHwgJ21hdmVuJyB8ICdncmFkbGUnIHwgJ2NtYWtlJyB8ICdtYWtlJyB8ICdvdGhlcic7XG4gIGNvbmZpZ0ZpbGU6IHN0cmluZztcbiAgc2NyaXB0czogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVzdEZyYW1ld29ya0luZm8ge1xuICB0eXBlOiAnamVzdCcgfCAnbW9jaGEnIHwgJ3B5dGVzdCcgfCAnanVuaXQnIHwgJ290aGVyJztcbiAgY29uZmlnRmlsZT86IHN0cmluZztcbiAgdGVzdFBhdHRlcm5zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudGF0aW9uSW5mbyB7XG4gIHR5cGU6ICdyZWFkbWUnIHwgJ2FwaScgfCAnZ3VpZGUnIHwgJ2NoYW5nZWxvZycgfCAnbGljZW5zZSc7XG4gIHBhdGg6IHN0cmluZztcbiAgbGFzdFVwZGF0ZWQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb2xkZXJTdHJ1Y3R1cmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgZmlsZUNvdW50OiBudW1iZXI7XG4gIHN1YmZvbGRlcnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdpdENvbnRleHQge1xuICBpc1JlcG9zaXRvcnk6IGJvb2xlYW47XG4gIGN1cnJlbnRCcmFuY2g6IHN0cmluZztcbiAgdW5jb21taXR0ZWRDaGFuZ2VzOiBudW1iZXI7XG4gIGxhc3RDb21taXQ6IHtcbiAgICBoYXNoOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIGF1dGhvcjogc3RyaW5nO1xuICAgIGRhdGU6IG51bWJlcjtcbiAgfSB8IG51bGw7XG4gIHJlbW90ZVVybD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgUHJvamVjdFR5cGUgPSBcbiAgfCAnb2JzaWRpYW4tcGx1Z2luJ1xuICB8ICd0eXBlc2NyaXB0LWxpYnJhcnknXG4gIHwgJ2phdmFzY3JpcHQtbGlicmFyeSdcbiAgfCAncmVhY3QtYXBwJ1xuICB8ICd2dWUtYXBwJ1xuICB8ICdub2RlLWFwcCdcbiAgfCAncHl0aG9uLXBhY2thZ2UnXG4gIHwgJ2RvY3VtZW50YXRpb24nXG4gIHwgJ25vdGVzJ1xuICB8ICd1bmtub3duJztcblxuLyoqXG4gKiBNYWluIERldmVsb3BtZW50IENvbnRleHQgU2VydmljZVxuICovXG5leHBvcnQgY2xhc3MgRGV2ZWxvcG1lbnRDb250ZXh0U2VydmljZSB7XG4gIHByaXZhdGUgYXBwOiBBcHA7XG4gIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGNvbnRleHRDYWNoZTogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjYWNoZVRpbWVvdXQgPSAzMDAwMDsgLy8gMzAgc2Vjb25kc1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY29tcHJlaGVuc2l2ZSBkZXZlbG9wbWVudCBjb250ZXh0XG4gICAqL1xuICBhc3luYyBnZXRGdWxsQ29udGV4dCgpOiBQcm9taXNlPERldmVsb3BtZW50Q29udGV4dD4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gJ2Z1bGxfY29udGV4dCc7XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXkpO1xuICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgICBjb25zdCBjb250ZXh0OiBEZXZlbG9wbWVudENvbnRleHQgPSB7XG4gICAgICB3b3Jrc3BhY2U6IGF3YWl0IHRoaXMuZ2V0V29ya3NwYWNlQ29udGV4dCgpLFxuICAgICAgYWN0aXZlRmlsZTogYXdhaXQgdGhpcy5nZXRBY3RpdmVGaWxlQ29udGV4dCgpLFxuICAgICAgc2VsZWN0aW9uOiBhd2FpdCB0aGlzLmdldFNlbGVjdGlvbkNvbnRleHQoKSxcbiAgICAgIHByb2plY3Q6IGF3YWl0IHRoaXMuZ2V0UHJvamVjdENvbnRleHQoKSxcbiAgICAgIGdpdDogYXdhaXQgdGhpcy5nZXRHaXRDb250ZXh0KCksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXksIGNvbnRleHQpO1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB3b3Jrc3BhY2UtbGV2ZWwgY29udGV4dFxuICAgKi9cbiAgYXN5bmMgZ2V0V29ya3NwYWNlQ29udGV4dCgpOiBQcm9taXNlPFdvcmtzcGFjZUNvbnRleHQ+IHtcbiAgICBjb25zdCBjYWNoZUtleSA9ICd3b3Jrc3BhY2VfY29udGV4dCc7XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXkpO1xuICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgICBjb25zdCB2YXVsdCA9IHRoaXMuYXBwLnZhdWx0O1xuICAgIGNvbnN0IGFsbEZpbGVzID0gdmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIC8vIEdldCByZWNlbnQgZmlsZXMgKGxhc3QgMTAgYWNjZXNzZWQpXG4gICAgY29uc3QgcmVjZW50RmlsZXMgPSB0aGlzLmdldFJlY2VudEZpbGVzKDEwKTtcbiAgICBcbiAgICAvLyBBbmFseXplIGZpbGUgdHlwZXNcbiAgICBjb25zdCBmaWxlVHlwZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICBhbGxGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgY29uc3QgZXh0ID0gZmlsZS5leHRlbnNpb24gfHwgJ21kJztcbiAgICAgIGZpbGVUeXBlc1tleHRdID0gKGZpbGVUeXBlc1tleHRdIHx8IDApICsgMTtcbiAgICB9KTtcblxuICAgIC8vIEdldCBhbGwgdGFnc1xuICAgIGNvbnN0IHRhZ3MgPSB0aGlzLmV4dHJhY3RBbGxUYWdzKCk7XG5cbiAgICAvLyBCdWlsZCBmb2xkZXIgc3RydWN0dXJlXG4gICAgY29uc3QgZm9sZGVycyA9IHRoaXMuYnVpbGRGb2xkZXJTdHJ1Y3R1cmUoKTtcblxuICAgIGNvbnN0IGNvbnRleHQ6IFdvcmtzcGFjZUNvbnRleHQgPSB7XG4gICAgICB0b3RhbEZpbGVzOiBhbGxGaWxlcy5sZW5ndGgsXG4gICAgICByZWNlbnRGaWxlcyxcbiAgICAgIHRhZ3MsXG4gICAgICBmb2xkZXJzLFxuICAgICAgZmlsZVR5cGVzLFxuICAgICAgdmF1bHRQYXRoOiAodmF1bHQuYWRhcHRlciBhcyBhbnkpLmJhc2VQYXRoIHx8IHZhdWx0LmFkYXB0ZXIuZ2V0TmFtZT8uKCkgfHwgJydcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXksIGNvbnRleHQsIDYwMDAwKTsgLy8gQ2FjaGUgZm9yIDEgbWludXRlXG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFjdGl2ZSBmaWxlIGNvbnRleHRcbiAgICovXG4gIGFzeW5jIGdldEFjdGl2ZUZpbGVDb250ZXh0KCk6IFByb21pc2U8RmlsZUNvbnRleHQgfCBudWxsPiB7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGNhY2hlS2V5ID0gYGZpbGVfY29udGV4dF8ke2FjdGl2ZUZpbGUucGF0aH1fJHthY3RpdmVGaWxlLnN0YXQubXRpbWV9YDtcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldENhY2hlZFJlc3VsdChjYWNoZUtleSk7XG4gICAgaWYgKGNhY2hlZCkgcmV0dXJuIGNhY2hlZDtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XG5cbiAgICBjb25zdCBjb250ZXh0OiBGaWxlQ29udGV4dCA9IHtcbiAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcbiAgICAgIG5hbWU6IGFjdGl2ZUZpbGUubmFtZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBsYW5ndWFnZTogdGhpcy5kZXRlY3RMYW5ndWFnZShhY3RpdmVGaWxlLmV4dGVuc2lvbiksXG4gICAgICBleHRlbnNpb246IGFjdGl2ZUZpbGUuZXh0ZW5zaW9uLFxuICAgICAgc2l6ZTogYWN0aXZlRmlsZS5zdGF0LnNpemUsXG4gICAgICBsYXN0TW9kaWZpZWQ6IGFjdGl2ZUZpbGUuc3RhdC5tdGltZSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGZyb250bWF0dGVyOiBtZXRhZGF0YT8uZnJvbnRtYXR0ZXIgfHwge30sXG4gICAgICAgIHRhZ3M6IHRoaXMuZXh0cmFjdFRhZ3MobWV0YWRhdGEpLFxuICAgICAgICBsaW5rczogdGhpcy5leHRyYWN0TGlua3MobWV0YWRhdGEpLFxuICAgICAgICBiYWNrbGlua3M6IHRoaXMuZ2V0QmFja2xpbmtzKGFjdGl2ZUZpbGUpLFxuICAgICAgICBoZWFkaW5nczogdGhpcy5leHRyYWN0SGVhZGluZ3MobWV0YWRhdGEpLFxuICAgICAgICB3b3JkQ291bnQ6IGNvbnRlbnQuc3BsaXQoL1xccysvKS5sZW5ndGhcbiAgICAgIH0sXG4gICAgICBzeW1ib2xzOiBhd2FpdCB0aGlzLmV4dHJhY3RDb2RlU3ltYm9scyhjb250ZW50LCBhY3RpdmVGaWxlLmV4dGVuc2lvbiksXG4gICAgICBkZXBlbmRlbmNpZXM6IGF3YWl0IHRoaXMuZXh0cmFjdERlcGVuZGVuY2llcyhjb250ZW50LCBhY3RpdmVGaWxlLmV4dGVuc2lvbilcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXksIGNvbnRleHQpO1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHNlbGVjdGlvbiBjb250ZXh0XG4gICAqL1xuICBhc3luYyBnZXRTZWxlY3Rpb25Db250ZXh0KCk6IFByb21pc2U8U2VsZWN0aW9uQ29udGV4dCB8IG51bGw+IHtcbiAgICBjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgaWYgKCFhY3RpdmVMZWFmPy52aWV3KSByZXR1cm4gbnVsbDtcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBtYXJrZG93biB2aWV3IHdpdGggYW4gZWRpdG9yXG4gICAgY29uc3QgdmlldyA9IGFjdGl2ZUxlYWYudmlldyBhcyBhbnk7XG4gICAgaWYgKCF2aWV3LmVkaXRvcikgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBlZGl0b3IgPSB2aWV3LmVkaXRvcjtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgXG4gICAgaWYgKCFzZWxlY3Rpb24pIHJldHVybiBudWxsO1xuXG4gICAgY29uc3Qgc2VsZWN0aW9uUmFuZ2UgPSBlZGl0b3IubGlzdFNlbGVjdGlvbnMoKVswXTtcbiAgICBjb25zdCBzdGFydFBvcyA9IHNlbGVjdGlvblJhbmdlLmFuY2hvcjtcbiAgICBjb25zdCBlbmRQb3MgPSBzZWxlY3Rpb25SYW5nZS5oZWFkO1xuICAgIFxuICAgIC8vIEVuc3VyZSBzdGFydCBpcyBiZWZvcmUgZW5kXG4gICAgY29uc3QgYWN0dWFsU3RhcnQgPSBzdGFydFBvcy5saW5lIDwgZW5kUG9zLmxpbmUgfHwgKHN0YXJ0UG9zLmxpbmUgPT09IGVuZFBvcy5saW5lICYmIHN0YXJ0UG9zLmNoIDwgZW5kUG9zLmNoKSA/IHN0YXJ0UG9zIDogZW5kUG9zO1xuICAgIGNvbnN0IGFjdHVhbEVuZCA9IHN0YXJ0UG9zLmxpbmUgPiBlbmRQb3MubGluZSB8fCAoc3RhcnRQb3MubGluZSA9PT0gZW5kUG9zLmxpbmUgJiYgc3RhcnRQb3MuY2ggPiBlbmRQb3MuY2gpID8gc3RhcnRQb3MgOiBlbmRQb3M7XG4gICAgXG4gICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGFjdHVhbFN0YXJ0LmxpbmUpO1xuICAgIFxuICAgIC8vIEdldCBzdXJyb3VuZGluZyBjb250ZXh0ICg1IGxpbmVzIGJlZm9yZSBhbmQgYWZ0ZXIpXG4gICAgY29uc3QgY29udGV4dFN0YXJ0TGluZSA9IE1hdGgubWF4KDAsIGFjdHVhbFN0YXJ0LmxpbmUgLSA1KTtcbiAgICBjb25zdCBjb250ZXh0RW5kTGluZSA9IE1hdGgubWluKGVkaXRvci5saW5lQ291bnQoKSAtIDEsIGFjdHVhbEVuZC5saW5lICsgNSk7XG4gICAgY29uc3Qgc3Vycm91bmRpbmdMaW5lcyA9IFtdO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSBjb250ZXh0U3RhcnRMaW5lOyBpIDw9IGNvbnRleHRFbmRMaW5lOyBpKyspIHtcbiAgICAgIHN1cnJvdW5kaW5nTGluZXMucHVzaChlZGl0b3IuZ2V0TGluZShpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IHNlbGVjdGlvbixcbiAgICAgIHN0YXJ0TGluZTogYWN0dWFsU3RhcnQubGluZSxcbiAgICAgIGVuZExpbmU6IGFjdHVhbEVuZC5saW5lLFxuICAgICAgc3RhcnRDb2w6IGFjdHVhbFN0YXJ0LmNoLFxuICAgICAgZW5kQ29sOiBhY3R1YWxFbmQuY2gsXG4gICAgICBzdXJyb3VuZGluZ0NvbnRleHQ6IHN1cnJvdW5kaW5nTGluZXMuam9pbignXFxuJyksXG4gICAgICBsaW5lQ29udGV4dDogbGluZVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHByb2plY3QgY29udGV4dFxuICAgKi9cbiAgYXN5bmMgZ2V0UHJvamVjdENvbnRleHQoKTogUHJvbWlzZTxQcm9qZWN0Q29udGV4dD4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gJ3Byb2plY3RfY29udGV4dCc7XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXkpO1xuICAgIGlmIChjYWNoZWQpIHJldHVybiBjYWNoZWQ7XG5cbiAgICBjb25zdCBwcm9qZWN0VHlwZSA9IGF3YWl0IHRoaXMuZGV0ZWN0UHJvamVjdFR5cGUoKTtcbiAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLmFuYWx5emVQcm9qZWN0U3RydWN0dXJlKCk7XG4gICAgY29uc3QgZGVwZW5kZW5jaWVzID0gYXdhaXQgdGhpcy5hbmFseXplRGVwZW5kZW5jaWVzKCk7XG4gICAgY29uc3QgYnVpbGRTeXN0ZW0gPSBhd2FpdCB0aGlzLmRldGVjdEJ1aWxkU3lzdGVtKCk7XG4gICAgY29uc3QgdGVzdEZyYW1ld29yayA9IGF3YWl0IHRoaXMuZGV0ZWN0VGVzdEZyYW1ld29yaygpO1xuICAgIGNvbnN0IGRvY3VtZW50YXRpb24gPSBhd2FpdCB0aGlzLmZpbmREb2N1bWVudGF0aW9uKCk7XG5cbiAgICBjb25zdCBjb250ZXh0OiBQcm9qZWN0Q29udGV4dCA9IHtcbiAgICAgIHR5cGU6IHByb2plY3RUeXBlLFxuICAgICAgc3RydWN0dXJlLFxuICAgICAgZGVwZW5kZW5jaWVzLFxuICAgICAgYnVpbGRTeXN0ZW0sXG4gICAgICB0ZXN0RnJhbWV3b3JrLFxuICAgICAgZG9jdW1lbnRhdGlvblxuICAgIH07XG5cbiAgICB0aGlzLnNldENhY2hlZFJlc3VsdChjYWNoZUtleSwgY29udGV4dCwgMTIwMDAwKTsgLy8gQ2FjaGUgZm9yIDIgbWludXRlc1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBHaXQgY29udGV4dFxuICAgKi9cbiAgYXN5bmMgZ2V0R2l0Q29udGV4dCgpOiBQcm9taXNlPEdpdENvbnRleHQgfCBudWxsPiB7XG4gICAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcbiAgICBcbiAgICAvLyBDaGVjayBpZiAuZ2l0IGRpcmVjdG9yeSBleGlzdHNcbiAgICBjb25zdCBnaXREaXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJy5naXQnKTtcbiAgICBpZiAoIWdpdERpcikgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgLy8gQmFzaWMgR2l0IGNvbnRleHQgLSBmb3IgZnVsbCBpbXBsZW1lbnRhdGlvbiwgd2UnZCBuZWVkIHRvIHJlYWQgR2l0IGZpbGVzXG4gICAgLy8gRm9yIG5vdywganVzdCBpbmRpY2F0ZSBpdCdzIGEgR2l0IHJlcG9zaXRvcnlcbiAgICByZXR1cm4ge1xuICAgICAgaXNSZXBvc2l0b3J5OiB0cnVlLFxuICAgICAgY3VycmVudEJyYW5jaDogJ21haW4nLCAvLyBEZWZhdWx0IGFzc3VtcHRpb25cbiAgICAgIHVuY29tbWl0dGVkQ2hhbmdlczogMCwgLy8gV291bGQgbmVlZCB0byBjaGVjayBnaXQgc3RhdHVzXG4gICAgICBsYXN0Q29tbWl0OiBudWxsLCAvLyBXb3VsZCBuZWVkIHRvIHBhcnNlIGdpdCBsb2dcbiAgICAgIHJlbW90ZVVybDogdW5kZWZpbmVkIC8vIFdvdWxkIG5lZWQgdG8gcGFyc2UgZ2l0IGNvbmZpZ1xuICAgIH07XG4gIH1cblxuICAvLyBDYWNoaW5nIG1ldGhvZHNcbiAgcHJpdmF0ZSBnZXRDYWNoZWRSZXN1bHQoa2V5OiBzdHJpbmcpOiBhbnkge1xuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuY29udGV4dENhY2hlLmdldChrZXkpO1xuICAgIGlmICghY2FjaGVkKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBpZiAoRGF0ZS5ub3coKSAtIGNhY2hlZC50aW1lc3RhbXAgPiBjYWNoZWQudGltZW91dCkge1xuICAgICAgdGhpcy5jb250ZXh0Q2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNhY2hlZC5kYXRhO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRDYWNoZWRSZXN1bHQoa2V5OiBzdHJpbmcsIGRhdGE6IGFueSwgdGltZW91dCA9IHRoaXMuY2FjaGVUaW1lb3V0KTogdm9pZCB7XG4gICAgdGhpcy5jb250ZXh0Q2FjaGUuc2V0KGtleSwge1xuICAgICAgZGF0YSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIHRpbWVvdXRcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzIGZvciB3b3Jrc3BhY2UgYW5hbHlzaXNcbiAgcHJpdmF0ZSBnZXRSZWNlbnRGaWxlcyhsaW1pdDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY2VudEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuYXBwLndvcmtzcGFjZTtcbiAgICBcbiAgICAvLyBHZXQgcmVjZW50IGZpbGVzIGZyb20gd29ya3NwYWNlIGxlYWYgaGlzdG9yeVxuICAgIHdvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4ge1xuICAgICAgaWYgKGxlYWYudmlldyAmJiAnZmlsZScgaW4gbGVhZi52aWV3ICYmIGxlYWYudmlldy5maWxlKSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBsZWFmLnZpZXcuZmlsZSBhcyBURmlsZTtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgIGlmICghcmVjZW50RmlsZXMuaW5jbHVkZXMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgcmVjZW50RmlsZXMucHVzaChmaWxlUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBBbHNvIGNoZWNrIHJlY2VudGx5IG9wZW5lZCBmaWxlcyBmcm9tIHdvcmtzcGFjZSBpZiBhdmFpbGFibGVcbiAgICB0cnkge1xuICAgICAgY29uc3QgbGFzdE9wZW5GaWxlcyA9ICh3b3Jrc3BhY2UgYXMgYW55KS5nZXRMYXN0T3BlbkZpbGVzPy4oKSB8fCBbXTtcbiAgICAgIGxhc3RPcGVuRmlsZXMuZm9yRWFjaCgoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIXJlY2VudEZpbGVzLmluY2x1ZGVzKGZpbGVQYXRoKSkge1xuICAgICAgICAgIHJlY2VudEZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBGYWxsYmFjayBpZiBtZXRob2QgZG9lc24ndCBleGlzdFxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVjZW50RmlsZXMuc2xpY2UoMCwgbGltaXQpO1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0QWxsVGFncygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgdGFncyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IG1ldGFkYXRhQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlO1xuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XG4gICAgXG4gICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlcyBhbmQgZXh0cmFjdCB0YWdzIGZyb20gdGhlaXIgbWV0YWRhdGFcbiAgICB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGNvbnN0IGNhY2hlID0gbWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICBpZiAoY2FjaGU/LnRhZ3MpIHtcbiAgICAgICAgY2FjaGUudGFncy5mb3JFYWNoKHRhZyA9PiB0YWdzLmFkZCh0YWcudGFnKSk7XG4gICAgICB9XG4gICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyPy50YWdzKSB7XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyVGFncyA9IEFycmF5LmlzQXJyYXkoY2FjaGUuZnJvbnRtYXR0ZXIudGFncykgXG4gICAgICAgICAgPyBjYWNoZS5mcm9udG1hdHRlci50YWdzIFxuICAgICAgICAgIDogW2NhY2hlLmZyb250bWF0dGVyLnRhZ3NdO1xuICAgICAgICBmcm9udG1hdHRlclRhZ3MuZm9yRWFjaCh0YWcgPT4gdGFncy5hZGQodGFnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGFncyk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkRm9sZGVyU3RydWN0dXJlKCk6IEZvbGRlclN0cnVjdHVyZVtdIHtcbiAgICBjb25zdCBmb2xkZXJzOiBGb2xkZXJTdHJ1Y3R1cmVbXSA9IFtdO1xuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XG4gICAgY29uc3QgZm9sZGVyTWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgZmlsZUNvdW50OiBudW1iZXI7IHN1YmZvbGRlcnM6IFNldDxzdHJpbmc+IH0+KCk7XG4gICAgXG4gICAgLy8gQW5hbHl6ZSBhbGwgZmlsZXMgdG8gYnVpbGQgZm9sZGVyIHN0cnVjdHVyZVxuICAgIHZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGZpbGUucGF0aC5zcGxpdCgnLycpO1xuICAgICAgaWYgKHBhdGhQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIEJ1aWxkIGFsbCBmb2xkZXIgcGF0aHMgaW4gdGhlIGhpZXJhcmNoeVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBhdGhQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBwYXRoUGFydHMuc2xpY2UoMCwgaSkuam9pbignLycpO1xuICAgICAgICAgIGNvbnN0IGZvbGRlck5hbWUgPSBwYXRoUGFydHNbaSAtIDFdO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghZm9sZGVyTWFwLmhhcyhmb2xkZXJQYXRoKSkge1xuICAgICAgICAgICAgZm9sZGVyTWFwLnNldChmb2xkZXJQYXRoLCB7IGZpbGVDb3VudDogMCwgc3ViZm9sZGVyczogbmV3IFNldCgpIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBmb2xkZXJJbmZvID0gZm9sZGVyTWFwLmdldChmb2xkZXJQYXRoKSE7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlsZSdzIGRpcmVjdCBwYXJlbnQgZm9sZGVyLCBjb3VudCBpdFxuICAgICAgICAgIGlmIChpID09PSBwYXRoUGFydHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgZm9sZGVySW5mby5maWxlQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWRkIHN1YmZvbGRlciBpZiB0aGVyZSBhcmUgbW9yZSBwYXRoIHBhcnRzXG4gICAgICAgICAgaWYgKGkgPCBwYXRoUGFydHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgZm9sZGVySW5mby5zdWJmb2xkZXJzLmFkZChwYXRoUGFydHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENvbnZlcnQgbWFwIHRvIGZvbGRlciBzdHJ1Y3R1cmVzXG4gICAgZm9sZGVyTWFwLmZvckVhY2goKGluZm8sIHBhdGgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgcGF0aDtcbiAgICAgIGZvbGRlcnMucHVzaCh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHBhdGgsXG4gICAgICAgIGZpbGVDb3VudDogaW5mby5maWxlQ291bnQsXG4gICAgICAgIHN1YmZvbGRlcnM6IEFycmF5LmZyb20oaW5mby5zdWJmb2xkZXJzKVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGZvbGRlcnMuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kcyBmb3IgZmlsZSBhbmFseXNpc1xuICBwcml2YXRlIGRldGVjdExhbmd1YWdlKGV4dGVuc2lvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsYW5ndWFnZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICd0cyc6ICd0eXBlc2NyaXB0JyxcbiAgICAgICdqcyc6ICdqYXZhc2NyaXB0JyxcbiAgICAgICd0c3gnOiAndHlwZXNjcmlwdC1yZWFjdCcsXG4gICAgICAnanN4JzogJ2phdmFzY3JpcHQtcmVhY3QnLFxuICAgICAgJ3B5JzogJ3B5dGhvbicsXG4gICAgICAnamF2YSc6ICdqYXZhJyxcbiAgICAgICdjcHAnOiAnY3BwJyxcbiAgICAgICdjJzogJ2MnLFxuICAgICAgJ2NzJzogJ2NzaGFycCcsXG4gICAgICAncGhwJzogJ3BocCcsXG4gICAgICAncmInOiAncnVieScsXG4gICAgICAnZ28nOiAnZ28nLFxuICAgICAgJ3JzJzogJ3J1c3QnLFxuICAgICAgJ2t0JzogJ2tvdGxpbicsXG4gICAgICAnc3dpZnQnOiAnc3dpZnQnLFxuICAgICAgJ21kJzogJ21hcmtkb3duJyxcbiAgICAgICdqc29uJzogJ2pzb24nLFxuICAgICAgJ3lhbWwnOiAneWFtbCcsXG4gICAgICAneW1sJzogJ3lhbWwnLFxuICAgICAgJ3htbCc6ICd4bWwnLFxuICAgICAgJ2h0bWwnOiAnaHRtbCcsXG4gICAgICAnY3NzJzogJ2NzcycsXG4gICAgICAnc2Nzcyc6ICdzY3NzJyxcbiAgICAgICdsZXNzJzogJ2xlc3MnXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gbGFuZ3VhZ2VNYXBbZXh0ZW5zaW9uXSB8fCAndGV4dCc7XG4gIH1cblxuICBwcml2YXRlIGV4dHJhY3RUYWdzKG1ldGFkYXRhOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCFtZXRhZGF0YT8udGFncykgcmV0dXJuIFtdO1xuICAgIHJldHVybiBtZXRhZGF0YS50YWdzLm1hcCgodGFnOiBhbnkpID0+IHRhZy50YWcgfHwgdGFnKTtcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFjdExpbmtzKG1ldGFkYXRhOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCFtZXRhZGF0YT8ubGlua3MpIHJldHVybiBbXTtcbiAgICByZXR1cm4gbWV0YWRhdGEubGlua3MubWFwKChsaW5rOiBhbnkpID0+IGxpbmsubGluayk7XG4gIH1cblxuICBwcml2YXRlIGdldEJhY2tsaW5rcyhmaWxlOiBURmlsZSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBiYWNrbGlua3M6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbWV0YWRhdGFDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGU7XG4gICAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcbiAgICBcbiAgICAvLyBDaGVjayBhbGwgbWFya2Rvd24gZmlsZXMgZm9yIGxpbmtzIHRvIHRoZSB0YXJnZXQgZmlsZVxuICAgIHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5mb3JFYWNoKG90aGVyRmlsZSA9PiB7XG4gICAgICBpZiAob3RoZXJGaWxlLnBhdGggPT09IGZpbGUucGF0aCkgcmV0dXJuOyAvLyBTa2lwIHNlbGZcbiAgICAgIFxuICAgICAgY29uc3QgY2FjaGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShvdGhlckZpbGUpO1xuICAgICAgaWYgKGNhY2hlPy5saW5rcykge1xuICAgICAgICBjYWNoZS5saW5rcy5mb3JFYWNoKChsaW5rOiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAobGluay5saW5rID09PSBmaWxlLmJhc2VuYW1lIHx8IGxpbmsubGluayA9PT0gZmlsZS5wYXRoKSB7XG4gICAgICAgICAgICBiYWNrbGlua3MucHVzaChvdGhlckZpbGUucGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gYmFja2xpbmtzO1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0SGVhZGluZ3MobWV0YWRhdGE6IGFueSk6IEhlYWRpbmdJbmZvW10ge1xuICAgIGlmICghbWV0YWRhdGE/LmhlYWRpbmdzKSByZXR1cm4gW107XG4gICAgXG4gICAgcmV0dXJuIG1ldGFkYXRhLmhlYWRpbmdzLm1hcCgoaGVhZGluZzogYW55KSA9PiAoe1xuICAgICAgbGV2ZWw6IGhlYWRpbmcubGV2ZWwsXG4gICAgICB0ZXh0OiBoZWFkaW5nLmhlYWRpbmcsXG4gICAgICBsaW5lOiBoZWFkaW5nLnBvc2l0aW9uPy5zdGFydD8ubGluZSB8fCAwXG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleHRyYWN0Q29kZVN5bWJvbHMoY29udGVudDogc3RyaW5nLCBleHRlbnNpb246IHN0cmluZyk6IFByb21pc2U8Q29kZVN5bWJvbFtdPiB7XG4gICAgY29uc3Qgc3ltYm9sczogQ29kZVN5bWJvbFtdID0gW107XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBcbiAgICAvLyBTaW1wbGUgc3ltYm9sIGV4dHJhY3Rpb24gZm9yIGNvbW1vbiBsYW5ndWFnZXNcbiAgICBpZiAoZXh0ZW5zaW9uID09PSAndHMnIHx8IGV4dGVuc2lvbiA9PT0gJ2pzJykge1xuICAgICAgbGluZXMuZm9yRWFjaCgobGluZSwgaW5kZXgpID0+IHtcbiAgICAgICAgLy8gRXh0cmFjdCBmdW5jdGlvbnNcbiAgICAgICAgY29uc3QgZnVuY3Rpb25NYXRjaCA9IGxpbmUubWF0Y2goLyhmdW5jdGlvbnxjb25zdHxsZXR8dmFyKVxccysoXFx3KykvKTtcbiAgICAgICAgaWYgKGZ1bmN0aW9uTWF0Y2gpIHtcbiAgICAgICAgICBzeW1ib2xzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25NYXRjaFsyXSxcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBsaW5lOiBpbmRleCArIDEsXG4gICAgICAgICAgICBzY29wZTogJ2dsb2JhbCcsIC8vIFRPRE86IEltcGxlbWVudCBwcm9wZXIgc2NvcGUgZGV0ZWN0aW9uXG4gICAgICAgICAgICBzaWduYXR1cmU6IGxpbmUudHJpbSgpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4dHJhY3QgY2xhc3Nlc1xuICAgICAgICBjb25zdCBjbGFzc01hdGNoID0gbGluZS5tYXRjaCgvY2xhc3NcXHMrKFxcdyspLyk7XG4gICAgICAgIGlmIChjbGFzc01hdGNoKSB7XG4gICAgICAgICAgc3ltYm9scy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGNsYXNzTWF0Y2hbMV0sXG4gICAgICAgICAgICB0eXBlOiAnY2xhc3MnLFxuICAgICAgICAgICAgbGluZTogaW5kZXggKyAxLFxuICAgICAgICAgICAgc2NvcGU6ICdnbG9iYWwnLFxuICAgICAgICAgICAgc2lnbmF0dXJlOiBsaW5lLnRyaW0oKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHN5bWJvbHM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4dHJhY3REZXBlbmRlbmNpZXMoY29udGVudDogc3RyaW5nLCBleHRlbnNpb246IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBkZXBlbmRlbmNpZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBcbiAgICAvLyBFeHRyYWN0IGltcG9ydHMvcmVxdWlyZXNcbiAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgLy8gVHlwZVNjcmlwdC9KYXZhU2NyaXB0IGltcG9ydHNcbiAgICAgIGNvbnN0IGltcG9ydE1hdGNoID0gbGluZS5tYXRjaCgvaW1wb3J0Lipmcm9tXFxzK1snXCJdKFteJ1wiXSspWydcIl0vKTtcbiAgICAgIGlmIChpbXBvcnRNYXRjaCkge1xuICAgICAgICBkZXBlbmRlbmNpZXMucHVzaChpbXBvcnRNYXRjaFsxXSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJlcXVpcmUgc3RhdGVtZW50c1xuICAgICAgY29uc3QgcmVxdWlyZU1hdGNoID0gbGluZS5tYXRjaCgvcmVxdWlyZVxcKFsnXCJdKFteJ1wiXSspWydcIl1cXCkvKTtcbiAgICAgIGlmIChyZXF1aXJlTWF0Y2gpIHtcbiAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2gocmVxdWlyZU1hdGNoWzFdKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHl0aG9uIGltcG9ydHNcbiAgICAgIGNvbnN0IHB5dGhvbk1hdGNoID0gbGluZS5tYXRjaCgvKD86ZnJvbVxccysoXFx3Kyl8aW1wb3J0XFxzKyhcXHcrKSkvKTtcbiAgICAgIGlmIChweXRob25NYXRjaCkge1xuICAgICAgICBkZXBlbmRlbmNpZXMucHVzaChweXRob25NYXRjaFsxXSB8fCBweXRob25NYXRjaFsyXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGRlcGVuZGVuY2llcztcbiAgfVxuXG4gIC8vIFByb2plY3QgYW5hbHlzaXMgbWV0aG9kc1xuICBwcml2YXRlIGFzeW5jIGRldGVjdFByb2plY3RUeXBlKCk6IFByb21pc2U8UHJvamVjdFR5cGU+IHtcbiAgICBjb25zdCB2YXVsdCA9IHRoaXMuYXBwLnZhdWx0O1xuICAgIGNvbnN0IGZpbGVzID0gdmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3Igc3BlY2lmaWMgcHJvamVjdCBpbmRpY2F0b3JzXG4gICAgY29uc3QgaGFzUGFja2FnZUpzb24gPSBmaWxlcy5zb21lKGYgPT4gZi5uYW1lID09PSAncGFja2FnZS5qc29uJyk7XG4gICAgY29uc3QgaGFzTWFuaWZlc3RKc29uID0gZmlsZXMuc29tZShmID0+IGYubmFtZSA9PT0gJ21hbmlmZXN0Lmpzb24nKTtcbiAgICBjb25zdCBoYXNUc0NvbmZpZyA9IGZpbGVzLnNvbWUoZiA9PiBmLm5hbWUgPT09ICd0c2NvbmZpZy5qc29uJyk7XG4gICAgY29uc3QgaGFzUHlQcm9qZWN0ID0gZmlsZXMuc29tZShmID0+IGYubmFtZSA9PT0gJ3B5cHJvamVjdC50b21sJyB8fCBmLm5hbWUgPT09ICdzZXR1cC5weScpO1xuICAgIFxuICAgIGlmIChoYXNNYW5pZmVzdEpzb24gJiYgaGFzUGFja2FnZUpzb24pIHJldHVybiAnb2JzaWRpYW4tcGx1Z2luJztcbiAgICBpZiAoaGFzUGFja2FnZUpzb24gJiYgaGFzVHNDb25maWcpIHJldHVybiAndHlwZXNjcmlwdC1saWJyYXJ5JztcbiAgICBpZiAoaGFzUGFja2FnZUpzb24pIHJldHVybiAnamF2YXNjcmlwdC1saWJyYXJ5JztcbiAgICBpZiAoaGFzUHlQcm9qZWN0KSByZXR1cm4gJ3B5dGhvbi1wYWNrYWdlJztcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZnJhbWV3b3JrLXNwZWNpZmljIGZpbGVzXG4gICAgY29uc3QgaGFzUmVhY3RGaWxlcyA9IGZpbGVzLnNvbWUoZiA9PiBcbiAgICAgIGYgaW5zdGFuY2VvZiBURmlsZSAmJiAoZi5uYW1lLmluY2x1ZGVzKCcuanN4JykgfHwgZi5uYW1lLmluY2x1ZGVzKCcudHN4JykpXG4gICAgKTtcbiAgICBpZiAoaGFzUmVhY3RGaWxlcykgcmV0dXJuICdyZWFjdC1hcHAnO1xuICAgIFxuICAgIC8vIERlZmF1bHQgY2xhc3NpZmljYXRpb25zXG4gICAgY29uc3QgaGFzTWFya2Rvd25GaWxlcyA9IGZpbGVzLnNvbWUoZiA9PiBmIGluc3RhbmNlb2YgVEZpbGUgJiYgZi5leHRlbnNpb24gPT09ICdtZCcpO1xuICAgIGlmIChoYXNNYXJrZG93bkZpbGVzKSByZXR1cm4gJ2RvY3VtZW50YXRpb24nO1xuICAgIFxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFuYWx5emVQcm9qZWN0U3RydWN0dXJlKCk6IFByb21pc2U8UHJvamVjdFN0cnVjdHVyZT4ge1xuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XG4gICAgY29uc3QgZmlsZXMgPSB2YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHJvb3RGaWxlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBzb3VyY2VEaXJlY3Rvcmllczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0ZXN0RGlyZWN0b3JpZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgY29uZmlnRmlsZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgZG9jdW1lbnRhdGlvbkZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnNwbGl0KCcvJykubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJvb3RGaWxlcy5wdXNoKGZpbGUubmFtZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChmaWxlLnBhdGguaW5jbHVkZXMoJy9zcmMvJykpIHtcbiAgICAgICAgc291cmNlRGlyZWN0b3JpZXMucHVzaChmaWxlLnBhdGgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZmlsZS5wYXRoLmluY2x1ZGVzKCcvdGVzdC8nKSB8fCBmaWxlLnBhdGguaW5jbHVkZXMoJy9fX3Rlc3RzX18vJykpIHtcbiAgICAgICAgdGVzdERpcmVjdG9yaWVzLnB1c2goZmlsZS5wYXRoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGZpbGUubmFtZS5pbmNsdWRlcygnY29uZmlnJykgfHwgZmlsZS5uYW1lLmluY2x1ZGVzKCcuanNvbicpIHx8IGZpbGUubmFtZS5pbmNsdWRlcygnLnltbCcpKSB7XG4gICAgICAgIGNvbmZpZ0ZpbGVzLnB1c2goZmlsZS5wYXRoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiAoZmlsZS5leHRlbnNpb24gPT09ICdtZCcgfHwgZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JlYWRtZScpKSkge1xuICAgICAgICBkb2N1bWVudGF0aW9uRmlsZXMucHVzaChmaWxlLnBhdGgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICByb290RmlsZXMsXG4gICAgICBzb3VyY2VEaXJlY3RvcmllcyxcbiAgICAgIHRlc3REaXJlY3RvcmllcyxcbiAgICAgIGNvbmZpZ0ZpbGVzLFxuICAgICAgZG9jdW1lbnRhdGlvbkZpbGVzLFxuICAgICAgZGVwdGg6IE1hdGgubWF4KC4uLmZpbGVzLm1hcChmID0+IGYucGF0aC5zcGxpdCgnLycpLmxlbmd0aCkpLFxuICAgICAgZXN0aW1hdGVkU2l6ZTogZmlsZXMubGVuZ3RoIDwgNTAgPyAnc21hbGwnIDogZmlsZXMubGVuZ3RoIDwgMjAwID8gJ21lZGl1bScgOiAnbGFyZ2UnXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZURlcGVuZGVuY2llcygpOiBQcm9taXNlPERlcGVuZGVuY3lJbmZvW10+IHtcbiAgICBjb25zdCBkZXBlbmRlbmNpZXM6IERlcGVuZGVuY3lJbmZvW10gPSBbXTtcbiAgICBjb25zdCB2YXVsdCA9IHRoaXMuYXBwLnZhdWx0O1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgdG8gcmVhZCBwYWNrYWdlLmpzb25cbiAgICAgIGNvbnN0IHBhY2thZ2VKc29uRmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCgncGFja2FnZS5qc29uJyk7XG4gICAgICBpZiAocGFja2FnZUpzb25GaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHZhdWx0LnJlYWQocGFja2FnZUpzb25GaWxlKTtcbiAgICAgICAgY29uc3QgcGFja2FnZURhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgICBcbiAgICAgICAgLy8gUGFyc2UgZGVwZW5kZW5jaWVzXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBhY2thZ2VEYXRhLmRlcGVuZGVuY2llcyB8fCB7fSkuZm9yRWFjaCgoW25hbWUsIHZlcnNpb25dKSA9PiB7XG4gICAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb24gYXMgc3RyaW5nLFxuICAgICAgICAgICAgdHlwZTogJ3J1bnRpbWUnLFxuICAgICAgICAgICAgc291cmNlOiAncGFja2FnZS5qc29uJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFBhcnNlIGRldkRlcGVuZGVuY2llc1xuICAgICAgICBPYmplY3QuZW50cmllcyhwYWNrYWdlRGF0YS5kZXZEZXBlbmRlbmNpZXMgfHwge30pLmZvckVhY2goKFtuYW1lLCB2ZXJzaW9uXSkgPT4ge1xuICAgICAgICAgIGRlcGVuZGVuY2llcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB2ZXJzaW9uOiB2ZXJzaW9uIGFzIHN0cmluZyxcbiAgICAgICAgICAgIHR5cGU6ICdkZXYnLFxuICAgICAgICAgICAgc291cmNlOiAncGFja2FnZS5qc29uJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFBhcnNlIHBlZXJEZXBlbmRlbmNpZXNcbiAgICAgICAgT2JqZWN0LmVudHJpZXMocGFja2FnZURhdGEucGVlckRlcGVuZGVuY2llcyB8fCB7fSkuZm9yRWFjaCgoW25hbWUsIHZlcnNpb25dKSA9PiB7XG4gICAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb24gYXMgc3RyaW5nLFxuICAgICAgICAgICAgdHlwZTogJ3BlZXInLFxuICAgICAgICAgICAgc291cmNlOiAncGFja2FnZS5qc29uJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBQYWNrYWdlLmpzb24gbm90IGZvdW5kIG9yIGludmFsaWQsIHRyeSBvdGhlciBkZXBlbmRlbmN5IGZpbGVzXG4gICAgfVxuICAgIFxuICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciByZXF1aXJlbWVudHMudHh0LCBDYXJnby50b21sLCBldGMuXG4gICAgXG4gICAgcmV0dXJuIGRlcGVuZGVuY2llcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGV0ZWN0QnVpbGRTeXN0ZW0oKTogUHJvbWlzZTxCdWlsZFN5c3RlbUluZm8gfCBudWxsPiB7XG4gICAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcGFja2FnZS5qc29uIChucG0veWFybilcbiAgICBjb25zdCBwYWNrYWdlSnNvbkZpbGUgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJ3BhY2thZ2UuanNvbicpO1xuICAgIGlmIChwYWNrYWdlSnNvbkZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHZhdWx0LnJlYWQocGFja2FnZUpzb25GaWxlKTtcbiAgICAgICAgY29uc3QgcGFja2FnZURhdGEgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgICBjb25zdCBzY3JpcHRzID0gT2JqZWN0LmtleXMocGFja2FnZURhdGEuc2NyaXB0cyB8fCB7fSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6ICducG0nLFxuICAgICAgICAgIGNvbmZpZ0ZpbGU6ICdwYWNrYWdlLmpzb24nLFxuICAgICAgICAgIHNjcmlwdHNcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSW52YWxpZCBwYWNrYWdlLmpzb25cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIG90aGVyIGJ1aWxkIHN5c3RlbXNcbiAgICBpZiAodmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKCdwb20ueG1sJykpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdtYXZlbicsXG4gICAgICAgIGNvbmZpZ0ZpbGU6ICdwb20ueG1sJyxcbiAgICAgICAgc2NyaXB0czogWydjb21waWxlJywgJ3Rlc3QnLCAncGFja2FnZSddXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBpZiAodmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKCdidWlsZC5ncmFkbGUnKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2dyYWRsZScsXG4gICAgICAgIGNvbmZpZ0ZpbGU6ICdidWlsZC5ncmFkbGUnLFxuICAgICAgICBzY3JpcHRzOiBbJ2J1aWxkJywgJ3Rlc3QnLCAnY2xlYW4nXVxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCgnQ01ha2VMaXN0cy50eHQnKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NtYWtlJyxcbiAgICAgICAgY29uZmlnRmlsZTogJ0NNYWtlTGlzdHMudHh0JyxcbiAgICAgICAgc2NyaXB0czogWydidWlsZCcsICdpbnN0YWxsJ11cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGlmICh2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJ01ha2VmaWxlJykpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdtYWtlJyxcbiAgICAgICAgY29uZmlnRmlsZTogJ01ha2VmaWxlJyxcbiAgICAgICAgc2NyaXB0czogWydhbGwnLCAnY2xlYW4nLCAnaW5zdGFsbCddXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGV0ZWN0VGVzdEZyYW1ld29yaygpOiBQcm9taXNlPFRlc3RGcmFtZXdvcmtJbmZvIHwgbnVsbD4ge1xuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XG4gICAgY29uc3QgZmlsZXMgPSB2YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBKZXN0XG4gICAgaWYgKHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCgnamVzdC5jb25maWcuanMnKSB8fCB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJ2plc3QuY29uZmlnLmpzb24nKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2plc3QnLFxuICAgICAgICBjb25maWdGaWxlOiB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoJ2plc3QuY29uZmlnLmpzJykgPyAnamVzdC5jb25maWcuanMnIDogJ2plc3QuY29uZmlnLmpzb24nLFxuICAgICAgICB0ZXN0UGF0dGVybnM6IFsnKiovX190ZXN0c19fLyoqLyoudGVzdC5qcycsICcqKi8qLnRlc3QuanMnLCAnKiovKi5zcGVjLmpzJ11cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIHBhY2thZ2UuanNvbiBmb3IgdGVzdCBmcmFtZXdvcmtzXG4gICAgY29uc3QgcGFja2FnZUpzb25GaWxlID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKCdwYWNrYWdlLmpzb24nKTtcbiAgICBpZiAocGFja2FnZUpzb25GaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5yZWFkKHBhY2thZ2VKc29uRmlsZSk7XG4gICAgICAgIGNvbnN0IHBhY2thZ2VEYXRhID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgICAgY29uc3QgYWxsRGVwcyA9IHtcbiAgICAgICAgICAuLi5wYWNrYWdlRGF0YS5kZXBlbmRlbmNpZXMsXG4gICAgICAgICAgLi4ucGFja2FnZURhdGEuZGV2RGVwZW5kZW5jaWVzXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBpZiAoYWxsRGVwcy5qZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdqZXN0JyxcbiAgICAgICAgICAgIHRlc3RQYXR0ZXJuczogWycqKi9fX3Rlc3RzX18vKiovKi50ZXN0LmpzJywgJyoqLyoudGVzdC5qcycsICcqKi8qLnNwZWMuanMnXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChhbGxEZXBzLm1vY2hhKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdtb2NoYScsXG4gICAgICAgICAgICB0ZXN0UGF0dGVybnM6IFsndGVzdC8qKi8qLmpzJywgJ3Rlc3QvKiovKi5zcGVjLmpzJ11cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoYWxsRGVwcy5weXRlc3QpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3B5dGVzdCcsXG4gICAgICAgICAgICB0ZXN0UGF0dGVybnM6IFsndGVzdF8qLnB5JywgJypfdGVzdC5weScsICd0ZXN0cy8qKi8qLnB5J11cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEludmFsaWQgcGFja2FnZS5qc29uXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBQeXRob24gdGVzdCBmaWxlc1xuICAgIGNvbnN0IGhhc1B5dGVzdEZpbGVzID0gZmlsZXMuc29tZShmID0+IFxuICAgICAgZiBpbnN0YW5jZW9mIFRGaWxlICYmIFxuICAgICAgKGYubmFtZS5zdGFydHNXaXRoKCd0ZXN0XycpIHx8IGYubmFtZS5lbmRzV2l0aCgnX3Rlc3QucHknKSlcbiAgICApO1xuICAgIGlmIChoYXNQeXRlc3RGaWxlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3B5dGVzdCcsXG4gICAgICAgIHRlc3RQYXR0ZXJuczogWyd0ZXN0XyoucHknLCAnKl90ZXN0LnB5JywgJ3Rlc3RzLyoqLyoucHknXVxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIEpVbml0XG4gICAgY29uc3QgaGFzSnVuaXRGaWxlcyA9IGZpbGVzLnNvbWUoZiA9PiBcbiAgICAgIGYgaW5zdGFuY2VvZiBURmlsZSAmJiBcbiAgICAgIGYubmFtZS5pbmNsdWRlcygnVGVzdC5qYXZhJylcbiAgICApO1xuICAgIGlmIChoYXNKdW5pdEZpbGVzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnanVuaXQnLFxuICAgICAgICB0ZXN0UGF0dGVybnM6IFsnKiovKlRlc3QuamF2YScsICcqKi9UZXN0Ki5qYXZhJ11cbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmaW5kRG9jdW1lbnRhdGlvbigpOiBQcm9taXNlPERvY3VtZW50YXRpb25JbmZvW10+IHtcbiAgICBjb25zdCB2YXVsdCA9IHRoaXMuYXBwLnZhdWx0O1xuICAgIGNvbnN0IGZpbGVzID0gdmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKTtcbiAgICBjb25zdCBkb2NzOiBEb2N1bWVudGF0aW9uSW5mb1tdID0gW107XG4gICAgXG4gICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAgIFxuICAgICAgaWYgKGZpbGUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyZWFkbWUnKSkge1xuICAgICAgICBkb2NzLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdyZWFkbWUnLFxuICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogZmlsZS5zdGF0Lm10aW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NoYW5nZWxvZycpKSB7XG4gICAgICAgIGRvY3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ2NoYW5nZWxvZycsXG4gICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgIGxhc3RVcGRhdGVkOiBmaWxlLnN0YXQubXRpbWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChmaWxlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbGljZW5zZScpKSB7XG4gICAgICAgIGRvY3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ2xpY2Vuc2UnLFxuICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogZmlsZS5zdGF0Lm10aW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBkb2NzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBjYWNoZWQgY29udGV4dCBkYXRhXG4gICAqL1xuICBwdWJsaWMgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRleHRDYWNoZS5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb250ZXh0IHN1bW1hcnkgZm9yIGNoYXRcbiAgICovXG4gIGFzeW5jIGdldENvbnRleHRTdW1tYXJ5KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IHRoaXMuZ2V0RnVsbENvbnRleHQoKTtcbiAgICBcbiAgICBsZXQgc3VtbWFyeSA9IGAjIyBEZXZlbG9wbWVudCBDb250ZXh0XFxuXFxuYDtcbiAgICBcbiAgICAvLyBXb3Jrc3BhY2UgaW5mb1xuICAgIHN1bW1hcnkgKz0gYCoqV29ya3NwYWNlKio6ICR7Y29udGV4dC53b3Jrc3BhY2UudG90YWxGaWxlc30gZmlsZXMsICR7Y29udGV4dC53b3Jrc3BhY2UuZm9sZGVycy5sZW5ndGh9IGZvbGRlcnNcXG5gO1xuICAgIFxuICAgIC8vIEFjdGl2ZSBmaWxlIGluZm9cbiAgICBpZiAoY29udGV4dC5hY3RpdmVGaWxlKSB7XG4gICAgICBzdW1tYXJ5ICs9IGAqKkFjdGl2ZSBGaWxlKio6ICR7Y29udGV4dC5hY3RpdmVGaWxlLm5hbWV9ICgke2NvbnRleHQuYWN0aXZlRmlsZS5sYW5ndWFnZX0pXFxuYDtcbiAgICAgIHN1bW1hcnkgKz0gYCoqRmlsZSBTaXplKio6ICR7TWF0aC5yb3VuZChjb250ZXh0LmFjdGl2ZUZpbGUuc2l6ZSAvIDEwMjQpfUtCLCAke2NvbnRleHQuYWN0aXZlRmlsZS5tZXRhZGF0YS53b3JkQ291bnR9IHdvcmRzXFxuYDtcbiAgICAgIFxuICAgICAgaWYgKGNvbnRleHQuYWN0aXZlRmlsZS5zeW1ib2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3VtbWFyeSArPSBgKipDb2RlIFN5bWJvbHMqKjogJHtjb250ZXh0LmFjdGl2ZUZpbGUuc3ltYm9scy5sZW5ndGh9IGZvdW5kXFxuYDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gUHJvamVjdCBpbmZvXG4gICAgc3VtbWFyeSArPSBgKipQcm9qZWN0IFR5cGUqKjogJHtjb250ZXh0LnByb2plY3QudHlwZX1cXG5gO1xuICAgIHN1bW1hcnkgKz0gYCoqUHJvamVjdCBTaXplKio6ICR7Y29udGV4dC5wcm9qZWN0LnN0cnVjdHVyZS5lc3RpbWF0ZWRTaXplfVxcbmA7XG4gICAgXG4gICAgLy8gU2VsZWN0aW9uIGluZm9cbiAgICBpZiAoY29udGV4dC5zZWxlY3Rpb24pIHtcbiAgICAgIHN1bW1hcnkgKz0gYCoqQ3VycmVudCBTZWxlY3Rpb24qKjogXCIke2NvbnRleHQuc2VsZWN0aW9uLnRleHQuc3Vic3RyaW5nKDAsIDUwKX0ke2NvbnRleHQuc2VsZWN0aW9uLnRleHQubGVuZ3RoID4gNTAgPyAnLi4uJyA6ICcnfVwiXFxuYDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHN1bW1hcnk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBJbnRlbnQsIFN0cmVhbU1lc3NhZ2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGdldEFjdGl2ZU1hcmtkb3duIH0gZnJvbSAnLi92YXVsdC11dGlscyc7XG5pbXBvcnQgeyBEZXZlbG9wbWVudENvbnRleHRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9EZXZlbG9wbWVudENvbnRleHRTZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIENoYXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGNoYXRDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpbnB1dENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIG1lc3NhZ2VzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpbnB1dEVsITogSFRNTElucHV0RWxlbWVudDtcbiAgcHJpdmF0ZSBzZW5kQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgY3VycmVudENvbnZlcnNhdGlvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xuICBwcml2YXRlIGNvbnRleHRTZXJ2aWNlOiBEZXZlbG9wbWVudENvbnRleHRTZXJ2aWNlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuY29udGV4dFNlcnZpY2UgPSBuZXcgRGV2ZWxvcG1lbnRDb250ZXh0U2VydmljZShhcHAsIHBsdWdpbik7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNoYXQtbW9kYWwnKTtcblxuICAgIC8vIE1vZGFsIGhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCBDaGF0JyB9KTtcbiAgICBcbiAgICBjb25zdCB0b29sYmFyRWwgPSBoZWFkZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdG9vbGJhcicgfSk7XG4gICAgXG4gICAgLy8gQWRkIGluZm8gYWJvdXQgYXV0b21hdGljIG1vZGUgZGV0ZWN0aW9uXG4gICAgY29uc3QgYXV0b01vZGVJbmZvID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbycsXG4gICAgICB0ZXh0OiAn4pqhIEF1dG9tYXRpYyBtb2RlIGRldGVjdGlvbiBlbmFibGVkJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFkZCBjb250ZXh0IGluZGljYXRvclxuICAgIGNvbnN0IGNvbnRleHRJbmZvID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jb250ZXh0LWluZm8nLFxuICAgICAgdGV4dDogJ/Cfp6AgU21hcnQgY29udGV4dCBlbmFibGVkJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFyIGNoYXQgYnV0dG9uXG4gICAgY29uc3QgY2xlYXJCdG4gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsZWFyQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsZWFyQ2hhdCgpO1xuXG4gICAgLy8gQWdlbnQgc2VsZWN0b3IgKHdpbGwgYmUgcG9wdWxhdGVkIHdoZW4gYWdlbnRzIGFyZSBsb2FkZWQpXG4gICAgY29uc3QgYWdlbnRTZWxlY3QgPSB0b29sYmFyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnIH0pO1xuICAgIGFnZW50U2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdBdXRvLXNlbGVjdCBBZ2VudCcsIHZhbHVlOiAnJyB9KTtcbiAgICB0aGlzLmxvYWRBZ2VudHMoYWdlbnRTZWxlY3QpO1xuXG4gICAgLy8gQ2hhdCBjb250YWluZXJcbiAgICB0aGlzLmNoYXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gTWVzc2FnZXMgYXJlYVxuICAgIHRoaXMubWVzc2FnZXNFbCA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMnIH0pO1xuICAgIFxuICAgIC8vIElucHV0IGNvbnRhaW5lclxuICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgdGhpcy5pbnB1dEVsID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FzayBhIHF1ZXN0aW9uIG9yIGRlc2NyaWJlIHdoYXQgeW91IHdhbnQgdG8gYWNjb21wbGlzaC4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3Qtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKTtcblxuICAgIC8vIEZvY3VzIHRoZSBpbnB1dFxuICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuXG4gICAgLy8gTG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIHRoaXMubG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKTtcblxuICAgIC8vIEFkZCBzdHlsZXNcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRzKHNlbGVjdEVsOiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTG9hZGluZyBhZ2VudHMuLi4nKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IGdldEFnZW50cyByZXNwb25zZTonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IHJlc3BvbnNlLmRhdGEgdHlwZTonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiByZXNwb25zZS5kYXRhIGNvbnRlbnQ6JywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgYWdlbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YSBpcyBkaXJlY3RseSBhbiBhcnJheVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkge1xuICAgICAgICAgIGFnZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gXG4gICAgICAgIC8vIENoZWNrIGlmIGRhdGEgaGFzIGFuICdhZ2VudHMnIHByb3BlcnR5IHdpdGggYW4gYXJyYXlcbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjb25zdCBkYXRhT2JqID0gcmVzcG9uc2UuZGF0YSBhcyBhbnk7XG4gICAgICAgICAgaWYgKGRhdGFPYmouYWdlbnRzICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5hZ2VudHMpKSB7XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmFnZW50cztcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFPYmouZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouZGF0YSkpIHtcbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouZGF0YTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChhZ2VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCcsIGFnZW50cy5sZW5ndGgsICdhZ2VudHMnKTtcbiAgICAgICAgICBhZ2VudHMuZm9yRWFjaChhZ2VudCA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICAgICAgICB0ZXh0OiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICB2YWx1ZTogYWdlbnQuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBObyBhZ2VudHMgZm91bmQgaW4gcmVzcG9uc2UnKTtcbiAgICAgICAgICAvLyBBZGQgYSBkZWZhdWx0IG9wdGlvbiBpbmRpY2F0aW5nIG5vIGFnZW50c1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnTm8gYWdlbnRzIGF2YWlsYWJsZScsXG4gICAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvcHRpb24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHM6IEFQSSByZXR1cm5lZCBlcnJvciBvciBubyBkYXRhOicsIHJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCkge1xuICAgIC8vIE9ubHkgdHJ5IHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3RvcnkgaWYgd2UgaGF2ZSBhIGNvbnZlcnNhdGlvbiBJRFxuICAgIGlmICh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcztcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgbm8gY29udmVyc2F0aW9uIElELCBzdGFydCBmcmVzaCAobm8gaGlzdG9yeSB0byBsb2FkKVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZSgpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybjtcblxuICAgIC8vIERpc2FibGUgaW5wdXQgd2hpbGUgcHJvY2Vzc2luZ1xuICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZGluZy4uLic7XG5cbiAgICAvLyBBZGQgdXNlciBtZXNzYWdlIHRvIFVJXG4gICAgdGhpcy5hZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZSk7XG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG5cbiAgICB0cnkge1xuICAgICAgLy8g4pSA4pSAIGZldGNoIGNvbnRleHQgJiBpbnRlbnQgaW4gcGFyYWxsZWwg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICBjb25zdCBbbWFya2Rvd25Db250ZXh0LCBpbnRlbnRSZXMsIGRldkNvbnRleHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBnZXRBY3RpdmVNYXJrZG93bigpLCAgICAgICAgICAvLyByZXR1cm5zIHN0cmluZyB8IG51bGxcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNsYXNzaWZ5SW50ZW50KG1lc3NhZ2UpLCAgLy8gUE9TVCAvaW50ZWxsaWdlbmNlL3BhcnNlXG4gICAgICAgIHRoaXMuY29udGV4dFNlcnZpY2UuZ2V0RnVsbENvbnRleHQoKSAvLyBHZXQgY29tcHJlaGVuc2l2ZSBkZXZlbG9wbWVudCBjb250ZXh0XG4gICAgICBdKTtcblxuICAgICAgLy8gQnVpbGQgY29udGV4dCBzdW1tYXJ5IGluY2x1ZGluZyBib3RoIG1hcmtkb3duIGFuZCBkZXZlbG9wbWVudCBjb250ZXh0XG4gICAgICBjb25zdCBjb250ZXh0U3VtbWFyeSA9IGF3YWl0IHRoaXMuY29udGV4dFNlcnZpY2UuZ2V0Q29udGV4dFN1bW1hcnkoKTtcbiAgICAgIFxuICAgICAgLy8gQ29tYmluZSBjb250ZXh0cyBmb3IgZW5oYW5jZWQgQUkgdW5kZXJzdGFuZGluZ1xuICAgICAgbGV0IGZ1bGxDb250ZXh0ID0gJyc7XG4gICAgICBpZiAobWFya2Rvd25Db250ZXh0KSB7XG4gICAgICAgIGZ1bGxDb250ZXh0ICs9IGAjIyBBY3RpdmUgRmlsZSBDb250ZW50XFxuJHttYXJrZG93bkNvbnRleHR9XFxuXFxuYDtcbiAgICAgIH1cbiAgICAgIGZ1bGxDb250ZXh0ICs9IGNvbnRleHRTdW1tYXJ5O1xuXG4gICAgICAvLyBidWlsZCBhIGdlbmVyaWMgcGF5bG9hZCB3aXRoIGVuaGFuY2VkIGNvbnRleHRcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IFxuICAgICAgICBtZXNzYWdlLCBcbiAgICAgICAgY29udGV4dDogZnVsbENvbnRleHQsXG4gICAgICAgIGRldmVsb3BtZW50X2NvbnRleHQ6IGRldkNvbnRleHQgLy8gQWRkIHN0cnVjdHVyZWQgY29udGV4dCBmb3IgYWR2YW5jZWQgcHJvY2Vzc2luZ1xuICAgICAgfTtcblxuICAgICAgLy8gU2hvdyBpbnRlbnQgZGV0ZWN0aW9uIGluIFVJIGlmIGRlYnVnIG1vZGUgaXMgZW5hYmxlZFxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1Zykge1xuICAgICAgICB0aGlzLnNob3dJbnRlbnREZWJ1ZyhpbnRlbnRSZXMuaW50ZW50KTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgXG4gICAgICBpZiAoaW50ZW50UmVzLmludGVudCA9PT0gXCJhZ2VudFwiKSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJ1bldvcmtmbG93KHBheWxvYWQpOyAgICAgLy8gUE9TVCAvd29ya2Zsb3dcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGDimpnvuI8gQWdlbnQgTW9kZSAoYXV0by1kZXRlY3RlZClcXG5cXG4ke3Jlc3BvbnNlLmRhdGEucmVzdWx0fWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yIGluIGFnZW50IG1vZGU6ICR7cmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UnfWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVc2Ugc3RyZWFtaW5nIGZvciBjaGF0IHJlc3BvbnNlc1xuICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVN0cmVhbWluZ1Jlc3BvbnNlKHBheWxvYWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBTaG93IGNvbnRleHQgaW5mbyB0byB1c2VyXG4gICAgICBpZiAoZnVsbENvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgY29udGV4dEluZm8gPSBg8J+TiiBDb250ZXh0IGluY2x1ZGVkOiAke2RldkNvbnRleHQucHJvamVjdC50eXBlfSBwcm9qZWN0LCAke2RldkNvbnRleHQud29ya3NwYWNlLnRvdGFsRmlsZXN9IGZpbGVzYDtcbiAgICAgICAgaWYgKGRldkNvbnRleHQuYWN0aXZlRmlsZSkge1xuICAgICAgICAgIGNvbnRleHRJbmZvICs9IGAsIGFjdGl2ZSBmaWxlOiAke2RldkNvbnRleHQuYWN0aXZlRmlsZS5uYW1lfWA7XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZShjb250ZXh0SW5mbywgMzAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKFwi4pqg77iPIE5vIHZhdWx0IGNvbnRlbnQgd2FzIHNlbnQ7IHJlcGxpZXMgbWF5IGJlIGdlbmVyaWMuXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBSZS1lbmFibGUgaW5wdXRcbiAgICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZCc7XG4gICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVN0cmVhbWluZ1Jlc3BvbnNlKHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmc7IGRldmVsb3BtZW50X2NvbnRleHQ/OiBhbnkgfSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYSBzdHJlYW1pbmcgbWVzc2FnZSBwbGFjZWhvbGRlclxuICAgICAgY29uc3Qgc3RyZWFtaW5nTWVzc2FnZUVsID0gdGhpcy5hZGRTdHJlYW1pbmdNZXNzYWdlKCdhc3Npc3RhbnQnKTtcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgdGhlIHN0cmVhbVxuICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnN0cmVhbUNoYXQoe1xuICAgICAgICBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UsXG4gICAgICAgIGNvbnRleHQ6IHBheWxvYWQuY29udGV4dCxcbiAgICAgICAgY29udmVyc2F0aW9uX2lkOiB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGFnZW50X2lkOiB0aGlzLmdldFNlbGVjdGVkQWdlbnQoKSxcbiAgICAgICAgZGV2ZWxvcG1lbnRfY29udGV4dDogcGF5bG9hZC5kZXZlbG9wbWVudF9jb250ZXh0XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzU3RyZWFtaW5nUmVzcG9uc2Uoc3RyZWFtLCBzdHJlYW1pbmdNZXNzYWdlRWwpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICBuZXcgTm90aWNlKGBTdHJlYW1pbmcgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHJlYW1pbmdNZXNzYWdlKHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMubWVzc2FnZXNFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiBgdmF1bHRwaWxvdC1tZXNzYWdlIHZhdWx0cGlsb3QtbWVzc2FnZS0ke3JvbGV9IHZhdWx0cGlsb3QtbWVzc2FnZS1zdHJlYW1pbmdgXG4gICAgfSk7XG5cbiAgICBjb25zdCByb2xlRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlJyxcbiAgICAgIHRleHQ6IHJvbGUgPT09ICd1c2VyJyA/ICdZb3UnIDogJ1ZhdWx0UGlsb3QnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIHR5cGluZyBpbmRpY2F0b3JcbiAgICBjb25zdCB0eXBpbmdFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC10eXBpbmctaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICd0eXBpbmcuLi4nXG4gICAgfSk7XG5cbiAgICBjb25zdCB0aW1lRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS10aW1lJyxcbiAgICAgIHRleHQ6IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICB9KTtcblxuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICByZXR1cm4gbWVzc2FnZUVsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzU3RyZWFtaW5nUmVzcG9uc2Uoc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSwgbWVzc2FnZUVsOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIC8vIFJlbW92ZSB0eXBpbmcgaW5kaWNhdG9yXG4gICAgY29uc3QgdHlwaW5nRWwgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtdHlwaW5nLWluZGljYXRvcicpO1xuICAgIGlmICh0eXBpbmdFbCkge1xuICAgICAgdHlwaW5nRWwucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgbGV0IGFjY3VtdWxhdGVkQ29udGVudCA9ICcnO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNodW5rID0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBsaW5lcyA9IGNodW5rLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShsaW5lLnN1YnN0cmluZyg2KSkgYXMgU3RyZWFtTWVzc2FnZTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaHVuaycgJiYgZGF0YS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZWRDb250ZW50ICs9IGRhdGEuY29udGVudDtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bihhY2N1bXVsYXRlZENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29udmVyc2F0aW9uIElEIGlmIHByb3ZpZGVkXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY29udmVyc2F0aW9uX2lkKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCA9IGRhdGEuY29udmVyc2F0aW9uX2lkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBNYXJrIG1lc3NhZ2UgYXMgY29tcGxldGVcbiAgICAgICAgICAgICAgICBtZXNzYWdlRWwucmVtb3ZlQ2xhc3MoJ3ZhdWx0cGlsb3QtbWVzc2FnZS1zdHJlYW1pbmcnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZENvbnRlbnQgKz0gYFxcblxcbkVycm9yOiAke2RhdGEuZXJyb3J9YDtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bihhY2N1bXVsYXRlZENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5yZW1vdmVDbGFzcygndmF1bHRwaWxvdC1tZXNzYWdlLXN0cmVhbWluZycpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHBhcnNlIHN0cmVhbWluZyBjaHVuazonLCBwYXJzZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIHRvIG1lc3NhZ2VzIGFycmF5XG4gICAgICBjb25zdCBtZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6IGFjY3VtdWxhdGVkQ29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG4gICAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3RyZWFtaW5nIGVycm9yOicsIGVycm9yKTtcbiAgICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKGBFcnJvciBkdXJpbmcgc3RyZWFtaW5nOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgIG1lc3NhZ2VFbC5yZW1vdmVDbGFzcygndmF1bHRwaWxvdC1tZXNzYWdlLXN0cmVhbWluZycpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRBZ2VudCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHNlbGVjdEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcmV0dXJuIHNlbGVjdEVsPy52YWx1ZSB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5tZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpIHtcbiAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogYHZhdWx0cGlsb3QtbWVzc2FnZSB2YXVsdHBpbG90LW1lc3NhZ2UtJHttZXNzYWdlLnJvbGV9YFxuICAgIH0pO1xuXG4gICAgY29uc3Qgcm9sZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2Utcm9sZScsXG4gICAgICB0ZXh0OiBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdZb3UnIDogJ1ZhdWx0UGlsb3QnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmluZyBmb3IgYmFzaWMgZm9ybWF0dGluZ1xuICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKG1lc3NhZ2UuY29udGVudCk7XG5cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtdGltZScsXG4gICAgICAgIHRleHQ6IG5ldyBEYXRlKG1lc3NhZ2UudGltZXN0YW1wKS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyQ2hhdCgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIG5ldyBOb3RpY2UoJ0NoYXQgY2xlYXJlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC1jaGF0LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1jaGF0LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNjAwcHg7XG4gICAgICAgICAgaGVpZ2h0OiA3MDBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC10b29sYmFyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbyB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0IHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA4MHB4KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2VzIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS11c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlIHtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWNvbnRlbnQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogdGV4dDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXN0cmVhbWluZyB7XG4gICAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1jb2xvci1hY2NlbnQpO1xuICAgICAgICAgIGFuaW1hdGlvbjogcHVsc2UgMnMgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdHlwaW5nLWluZGljYXRvciB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICBhbmltYXRpb246IHB1bHNlIDEuNXMgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBwdWxzZSB7XG4gICAgICAgICAgMCUgeyBvcGFjaXR5OiAxOyB9XG4gICAgICAgICAgNTAlIHsgb3BhY2l0eTogMC41OyB9XG4gICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDE7IH1cbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaW50ZW50LWRlYnVnIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbiAgICAgICAgICBhbmltYXRpb246IGZhZGVJbk91dCAzcyBlYXNlLWluLW91dDtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbk91dCB7XG4gICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XG4gICAgICAgICAgMTAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4gICAgICAgICAgOTAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4gICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7IH1cbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93SW50ZW50RGVidWcoaW50ZW50OiBzdHJpbmcpIHtcbiAgICAvLyBDcmVhdGUgYSBzdWJ0bGUgbm90aWZpY2F0aW9uIHNob3dpbmcgdGhlIGRldGVjdGVkIGludGVudFxuICAgIGNvbnN0IGRlYnVnRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtaW50ZW50LWRlYnVnJyxcbiAgICAgIHRleHQ6IGDwn5SNIEludGVudCBkZXRlY3RlZDogJHtpbnRlbnQgPT09ICdhZ2VudCcgPyAn4pqZ77iPIEFnZW50IE1vZGUnIDogJ/CfkqwgQXNrIE1vZGUnfWBcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBdXRvLXJlbW92ZSBhZnRlciAzIHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRlYnVnRWwucmVtb3ZlKCk7XG4gICAgfSwgMzAwMCk7XG4gIH1cblxuICAvLyBBZGQgYSBtZXRob2QgdG8gc2hvdyBjb250ZXh0IGRldGFpbHNcbiAgcHJpdmF0ZSBhc3luYyBzaG93Q29udGV4dERldGFpbHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCB0aGlzLmNvbnRleHRTZXJ2aWNlLmdldEZ1bGxDb250ZXh0KCk7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5jb250ZXh0U2VydmljZS5nZXRDb250ZXh0U3VtbWFyeSgpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBtb2RhbCBvciBub3RpY2Ugd2l0aCBjb250ZXh0IGRldGFpbHNcbiAgICAgIGNvbnN0IGNvbnRleHRNb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICBjb250ZXh0TW9kYWwudGl0bGVFbC5zZXRUZXh0KCdEZXZlbG9wbWVudCBDb250ZXh0IERldGFpbHMnKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IGNvbnRleHRNb2RhbDtcbiAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNvbnRleHQtZGV0YWlscycpO1xuICAgICAgXG4gICAgICAvLyBBZGQgY29udGV4dCBzdW1tYXJ5XG4gICAgICBjb25zdCBzdW1tYXJ5RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY29udGV4dC1zdW1tYXJ5JyB9KTtcbiAgICAgIHN1bW1hcnlFbC5jcmVhdGVFbCgncHJlJywgeyB0ZXh0OiBzdW1tYXJ5IH0pO1xuICAgICAgXG4gICAgICAvLyBBZGQgZGV0YWlsZWQgY29udGV4dCAoY29sbGFwc2VkIGJ5IGRlZmF1bHQpXG4gICAgICBjb25zdCBkZXRhaWxzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnKTtcbiAgICAgIGRldGFpbHNFbC5jcmVhdGVFbCgnc3VtbWFyeScsIHsgdGV4dDogJ0Z1bGwgQ29udGV4dCBEYXRhIChKU09OKScgfSk7XG4gICAgICBjb25zdCBqc29uRWwgPSBkZXRhaWxzRWwuY3JlYXRlRWwoJ3ByZScsIHsgY2xzOiAnY29udGV4dC1qc29uJyB9KTtcbiAgICAgIGpzb25FbC50ZXh0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KGNvbnRleHQsIG51bGwsIDIpO1xuICAgICAgXG4gICAgICBjb250ZXh0TW9kYWwub3BlbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgbmV3IE5vdGljZShgRXJyb3IgbG9hZGluZyBjb250ZXh0OiAke2Vycm9yTXNnfWApO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBXb3JrZmxvd1JlcXVlc3QsIFdvcmtmbG93UmVzcG9uc2UsIFdvcmtmbG93UHJvZ3Jlc3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFdvcmtmbG93TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBnb2FsSW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGNvbnRleHRJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgZXhlY3V0ZUJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIHByb2dyZXNzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcmVzdWx0c0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlzRXhlY3V0aW5nID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsJyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn4pqZ77iPIFdvcmtmbG93IEV4ZWN1dGlvbicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0RlZmluZSBhIGdvYWwgYW5kIGxldCBWYXVsdFBpbG90IGNyZWF0ZSBhbmQgZXhlY3V0ZSBhIGNvbXByZWhlbnNpdmUgd29ya2Zsb3cgdG8gYWNoaWV2ZSBpdC4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbidcbiAgICB9KTtcblxuICAgIC8vIEZvcm1cbiAgICBjb25zdCBmb3JtRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1mb3JtJyB9KTtcblxuICAgIC8vIEdvYWwgaW5wdXRcbiAgICBjb25zdCBnb2FsQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgZ29hbENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0dvYWwgKicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5nb2FsSW5wdXQgPSBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnZS5nLiwgXCJDcmVhdGUgYSBjb21wcmVoZW5zaXZlIHN0dWR5IHBsYW4gZm9yIG1hY2hpbmUgbGVhcm5pbmcgYmFzZWQgb24gbXkgbm90ZXNcIicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWdvYWwtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBDb250ZXh0IGlucHV0XG4gICAgY29uc3QgY29udGV4dENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdBZGRpdGlvbmFsIENvbnRleHQgKG9wdGlvbmFsKScsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0SW5wdXQgPSBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnUHJvdmlkZSBhbnkgYWRkaXRpb25hbCBjb250ZXh0LCBjb25zdHJhaW50cywgb3IgcmVxdWlyZW1lbnRzLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIFZhdWx0IGNvbnRlbnQgb3B0aW9uc1xuICAgIGNvbnN0IG9wdGlvbnNDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnVmF1bHQgSW50ZWdyYXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFjdGl2ZUZpbGUgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWN0aXZlRmlsZUNoZWNrYm94ID0gaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhY3RpdmUgZmlsZSBjb250ZW50JyB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBbGxGaWxlcyA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhbGxGaWxlc0NoZWNrYm94ID0gaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFsbCB2YXVsdCBmaWxlcyAobWF5IHRha2UgbG9uZ2VyKScgfSk7XG5cbiAgICAvLyBFeGVjdXRlIGJ1dHRvblxuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbiA9IGZvcm1FbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5leGVjdXRlV29ya2Zsb3coYWN0aXZlRmlsZUNoZWNrYm94LmNoZWNrZWQsIGFsbEZpbGVzQ2hlY2tib3guY2hlY2tlZCk7XG5cbiAgICAvLyBQcm9ncmVzcyBjb250YWluZXJcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gUmVzdWx0cyBjb250YWluZXJcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gRm9jdXMgdGhlIGdvYWwgaW5wdXRcbiAgICB0aGlzLmdvYWxJbnB1dC5mb2N1cygpO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KGluY2x1ZGVBY3RpdmVGaWxlOiBib29sZWFuLCBpbmNsdWRlQWxsRmlsZXM6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBnb2FsID0gdGhpcy5nb2FsSW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGlmICghZ29hbCkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgZ29hbCBmb3IgdGhlIHdvcmtmbG93Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0V4ZWN1dGluZyA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0aW5nLi4uJztcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFByZXBhcmUgdmF1bHQgY29udGVudFxuICAgICAgbGV0IHZhdWx0Q29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICBpZiAoaW5jbHVkZUFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHthY3RpdmVGaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmNsdWRlQWxsRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAyMCkpIHsgLy8gTGltaXQgdG8gZmlyc3QgMjAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHdvcmtmbG93IHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCA9IHtcbiAgICAgICAgZ29hbCxcbiAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0SW5wdXQudmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmF1bHRfY29udGVudDogdmF1bHRDb250ZW50IHx8IHVuZGVmaW5lZFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgV2ViU29ja2V0IGxpc3RlbmVyIGZvciBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICBpZiAodGhpcy5wbHVnaW4uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSkge1xuICAgICAgICAvLyBMaXN0ZW4gZm9yIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgdGhpcy5zZXR1cFByb2dyZXNzTGlzdGVuZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQhLmV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRpc3BsYXlSZXN1bHRzKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdXb3JrZmxvdyBleGVjdXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoZXJyb3JNc2cpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzRXhlY3V0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRlIFdvcmtmbG93JztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNvbm5lY3RlZCB0byB0aGUgV2ViU29ja2V0IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBzaW11bGF0ZSBwcm9ncmVzc1xuICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdBbmFseXppbmcgZ29hbCBhbmQgY29udGV4dC4uLicpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ1BsYW5uaW5nIHdvcmtmbG93IHN0ZXBzLi4uJyk7XG4gICAgfSwgMTAwMCk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnRXhlY3V0aW5nIHdvcmtmbG93Li4uJyk7XG4gICAgfSwgMjAwMCk7XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlQcm9ncmVzcyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLWl0ZW1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICA8c3Bhbj4ke21lc3NhZ2V9PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGlzcGxheVJlc3VsdHMod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcmVzdWx0c1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn4pyFIFdvcmtmbG93IENvbXBsZXRlZCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYEV4ZWN1dGlvbiB0aW1lOiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNgLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSdcbiAgICB9KTtcblxuICAgIC8vIE1haW4gcmVzdWx0XG4gICAgY29uc3QgcmVzdWx0RWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCcgfSk7XG4gICAgcmVzdWx0RWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmVzdWx0JyB9KTtcbiAgICBjb25zdCByZXN1bHRDb250ZW50RWwgPSByZXN1bHRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC10ZXh0JyB9KTtcbiAgICByZXN1bHRDb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bih3b3JrZmxvdy5yZXN1bHQpO1xuXG4gICAgLy8gU3RlcHMgdGFrZW5cbiAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RlcHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcicgfSk7XG4gICAgICBzdGVwc0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1N0ZXBzIFRha2VuJyB9KTtcbiAgICAgIGNvbnN0IHN0ZXBzTGlzdCA9IHN0ZXBzRWwuY3JlYXRlRWwoJ29sJywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWxpc3QnIH0pO1xuICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaChzdGVwID0+IHtcbiAgICAgICAgc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogc3RlcCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFydGlmYWN0c1xuICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFydGlmYWN0c0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lcicgfSk7XG4gICAgICBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdHZW5lcmF0ZWQgQXJ0aWZhY3RzJyB9KTtcbiAgICAgIFxuICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goKGFydGlmYWN0LCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhcnRpZmFjdEVsID0gYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdCcgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiBhcnRpZmFjdC50aXRsZSB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgdGV4dDogYFR5cGU6ICR7YXJ0aWZhY3QudHlwZX1gLFxuICAgICAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYXJ0aWZhY3RFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdTYXZlIGFzIE5vdGUnLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBhbGwgYnV0dG9uXG4gICAgY29uc3QgYWN0aW9uc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zJyB9KTtcbiAgICBjb25zdCBzYXZlQWxsQnV0dG9uID0gYWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2F2ZSBDb21wbGV0ZSBSZXN1bHRzIGFzIE5vdGUnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQWxsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3cpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3Q6IGFueSwgaW5kZXg6IG51bWJlcikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGAke2FydGlmYWN0LnRpdGxlLnJlcGxhY2UoL1teYS16QS1aMC05XFxzXS9nLCAnJyl9Lm1kYDtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1gO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQXJ0aWZhY3Qgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgYXJ0aWZhY3Q6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICBcbiAgICAgIGxldCBjb250ZW50ID0gYCMgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqR29hbDoqKiAke3RoaXMuZ29hbElucHV0LnZhbHVlfVxcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkV4ZWN1dGlvbiBUaW1lOioqICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAjIyBSZXN1bHRcXG5cXG4ke3dvcmtmbG93LnJlc3VsdH1cXG5cXG5gO1xuICAgICAgXG4gICAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBTdGVwcyBUYWtlblxcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgJHtpbmRleCArIDF9LiAke3N0ZXB9XFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XG4gICAgICB9XG5cbiAgICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgR2VuZXJhdGVkIEFydGlmYWN0c1xcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKGFydGlmYWN0ID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAjIyMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBDb21wbGV0ZSByZXN1bHRzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIHJlc3VsdHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5RXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtZXJyb3JcIj5cbiAgICAgICAgPGgzPuKdjCBXb3JrZmxvdyBGYWlsZWQ8L2gzPlxuICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwge1xuICAgICAgICAgIHdpZHRoOiA3MDBweDtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiA4MHZoO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24ge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1ncm91cCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWdvYWwtaW5wdXQsXG4gICAgICAgIC52YXVsdHBpbG90LWNvbnRleHQtaW5wdXQge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIGlucHV0IHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lciB7XG4gICAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICB9XG4gICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC1jb250ZW50IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LXRleHQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtbGlzdCB7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXJyb3Ige1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFxuICBBUElSZXNwb25zZSwgXG4gIENoYXRSZXF1ZXN0LCBcbiAgQ2hhdFJlc3BvbnNlLCBcbiAgQ29udmVyc2F0aW9uSGlzdG9yeSxcbiAgQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QsXG4gIENvcGlsb3RSZXF1ZXN0LCBcbiAgQ29waWxvdFJlc3BvbnNlLFxuICBXb3JrZmxvd1JlcXVlc3QsXG4gIFdvcmtmbG93UmVzcG9uc2UsXG4gIEFnZW50LFxuICBBZ2VudENyZWF0ZVJlcXVlc3QsXG4gIEFnZW50RXhlY3V0ZVJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlc3BvbnNlLFxuICBUYXNrUGxhbm5pbmdSZXF1ZXN0LFxuICBUYXNrUGxhbm5pbmdSZXNwb25zZSxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0LFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlLFxuICBNZW1vcnlVcGRhdGVSZXF1ZXN0LFxuICBXZWJTb2NrZXRNZXNzYWdlLFxuICBFcnJvclJlc3BvbnNlLFxuICBJbnRlbnQsXG4gIEludGVudFJlc3VsdCxcbiAgSW50ZW50RGVidWdcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBFdm9BZ2VudFhDbGllbnQge1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBhcGlLZXk/OiBzdHJpbmc7XG4gIHByaXZhdGUgd2Vic29ja2V0PzogV2ViU29ja2V0O1xuICBwcml2YXRlIHdzQ2FsbGJhY2tzOiBNYXA8c3RyaW5nLCAoZGF0YTogYW55KSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTsgLy8gUmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0PFQ+KFxuICAgIGVuZHBvaW50OiBzdHJpbmcsIFxuICAgIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge31cbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZTxUPj4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0ke2VuZHBvaW50fWA7XG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgLi4uKG9wdGlvbnMuaGVhZGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHx8IHt9KSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEhhbmRsZSBub24tSlNPTiByZXNwb25zZXMgZ3JhY2VmdWxseVxuICAgICAgbGV0IGRhdGE7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgIGlmIChjb250ZW50VHlwZSAmJiBjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhLmVycm9yIFxuICAgICAgICAgID8gZGF0YS5lcnJvciBcbiAgICAgICAgICA6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWA7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmVycm9yKGBBUEkgRXJyb3IgWyR7cmVzcG9uc2Uuc3RhdHVzfV06YCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyB7IG1lc3NhZ2U6IGRhdGEgfSBhcyBUIDogZGF0YSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBSZXF1ZXN0IEVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlYWx0aCBjaGVja1xuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmc7IHZlcnNpb246IHN0cmluZyB9Pj4ge1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIGhlYWx0aCBjaGVjayB0byAke3RoaXMuYmFzZVVybH0vc3RhdHVzYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4oJy9zdGF0dXMnLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBIZWFsdGggY2hlY2sgcmVzdWx0OicsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIEFsdGVybmF0aXZlIGhlYWx0aCBjaGVjayBtZXRob2QgaWYgdGhlIG1haW4gb25lIGZhaWxzXG4gIGFzeW5jIHNpbXBsZUhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L3N0YXR1c2A7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdIRUFEJyxcbiAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vayB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQwNSkgeyAvLyA0MDUgbWVhbnMgc2VydmVyIGlzIHVwIGJ1dCBkb2Vzbid0IHN1cHBvcnQgSEVBRFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdvaycgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWBcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnQ29ubmVjdGlvbiBmYWlsZWQnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIENoYXQgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBjaGF0KHJlcXVlc3Q6IENoYXRSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDaGF0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY2hhdCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRDb252ZXJzYXRpb25IaXN0b3J5KGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsIGxpbWl0OiBudW1iZXIgPSA1MCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29udmVyc2F0aW9uSGlzdG9yeT4+IHtcbiAgICBjb25zdCByZXF1ZXN0Qm9keTogQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QgPSB7XG4gICAgICBjb252ZXJzYXRpb25faWQ6IGNvbnZlcnNhdGlvbklkLFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgaW5jbHVkZV9tZXNzYWdlczogdHJ1ZVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9uL2hpc3RvcnknLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KGAvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQ29waWxvdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKHJlcXVlc3Q6IENvcGlsb3RSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDb3BpbG90UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29waWxvdC9jb21wbGV0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBXb3JrZmxvdyBleGVjdXRpb25cbiAgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8V29ya2Zsb3dSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi93b3JrZmxvdycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBOZXcgdW5pZmllZCBBUEkgbWV0aG9kcyBmb3Igc2ltcGxpZmllZCBjb250ZXh0IHBhY2thZ2luZ1xuICBhc3luYyBydW5Xb3JrZmxvdyhwYXlsb2FkOiB7IG1lc3NhZ2U6IHN0cmluZzsgY29udGV4dDogc3RyaW5nIHwgbnVsbCB9KTogUHJvbWlzZTxBUElSZXNwb25zZTxXb3JrZmxvd1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3dvcmtmbG93Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGdvYWw6IHBheWxvYWQubWVzc2FnZSxcbiAgICAgICAgY29udGV4dDogcGF5bG9hZC5jb250ZXh0ID8geyBjb250ZW50OiBwYXlsb2FkLmNvbnRleHQgfSA6IHsgY29udGVudDogXCJObyBzcGVjaWZpYyBjb250ZXh0IHByb3ZpZGVkXCIgfVxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzZW5kQ2hhdChwYXlsb2FkOiB7IG1lc3NhZ2U6IHN0cmluZzsgY29udGV4dDogc3RyaW5nIHwgbnVsbCB9LCBvcHRpb25zPzogeyBjb252ZXJzYXRpb25faWQ/OiBzdHJpbmc7IGFnZW50X2lkPzogc3RyaW5nIH0pOiBQcm9taXNlPEFQSVJlc3BvbnNlPENoYXRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jaGF0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1lc3NhZ2U6IHBheWxvYWQubWVzc2FnZSxcbiAgICAgICAgdmF1bHRfY29udGV4dDogcGF5bG9hZC5jb250ZXh0IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgY29udmVyc2F0aW9uX2lkOiBvcHRpb25zPy5jb252ZXJzYXRpb25faWQsXG4gICAgICAgIGFnZW50X2lkOiBvcHRpb25zPy5hZ2VudF9pZCxcbiAgICAgICAgbW9kZTogJ2FzaydcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gU3RyZWFtaW5nIENoYXQgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBzdHJlYW1DaGF0KHBheWxvYWQ6IHsgXG4gICAgbWVzc2FnZTogc3RyaW5nOyBcbiAgICBjb250ZXh0OiBzdHJpbmcgfCBudWxsOyBcbiAgICBjb252ZXJzYXRpb25faWQ/OiBzdHJpbmc7IFxuICAgIGFnZW50X2lkPzogc3RyaW5nO1xuICAgIGRldmVsb3BtZW50X2NvbnRleHQ/OiBhbnk7XG4gIH0pOiBQcm9taXNlPFJlYWRhYmxlU3RyZWFtPiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vY2hhdC9zdHJlYW1gO1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2VwdCc6ICd0ZXh0L3BsYWluJyxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YDtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IHBheWxvYWQuY29udGV4dCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNvbnZlcnNhdGlvbl9pZDogcGF5bG9hZC5jb252ZXJzYXRpb25faWQsXG4gICAgICAgIGFnZW50X2lkOiBwYXlsb2FkLmFnZW50X2lkLFxuICAgICAgICBkZXZlbG9wbWVudF9jb250ZXh0OiBwYXlsb2FkLmRldmVsb3BtZW50X2NvbnRleHQsXG4gICAgICAgIHN0cmVhbTogdHJ1ZVxuICAgICAgfSksXG4gICAgICBtb2RlOiAnY29ycycsXG4gICAgICBjcmVkZW50aWFsczogJ29taXQnXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFN0cmVhbSByZXF1ZXN0IGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVzcG9uc2UgYm9keSBpcyBudWxsJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlLmJvZHk7XG4gIH1cblxuICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gIGFzeW5jIGdldEFnZW50cygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50W10+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVBZ2VudChyZXF1ZXN0OiBBZ2VudENyZWF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cy9jcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUFnZW50KHJlcXVlc3Q6IEFnZW50RXhlY3V0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudC9leGVjdXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhdWx0IGFuYWx5c2lzXG4gIGFzeW5jIGFuYWx5emVWYXVsdENvbnRleHQocmVxdWVzdDogVmF1bHRDb250ZXh0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VmF1bHRDb250ZXh0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvY29udGV4dCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBUYXNrIHBsYW5uaW5nXG4gIGFzeW5jIHBsYW5UYXNrcyhyZXF1ZXN0OiBUYXNrUGxhbm5pbmdSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxUYXNrUGxhbm5pbmdSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9wbGFubmluZy90YXNrcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbGxpZ2VuY2UgcGFyc2luZ1xuICBhc3luYyBwYXJzZUludGVsbGlnZW5jZShyZXF1ZXN0OiBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEludGVudCBjbGFzc2lmaWNhdGlvblxuICBhc3luYyBjbGFzc2lmeUludGVudChtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPEludGVudFJlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnRSZXN1bHQ+KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pLFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byAnYXNrJyBtb2RlIGlmIGNsYXNzaWZpY2F0aW9uIGZhaWxzXG4gICAgcmV0dXJuIHsgaW50ZW50OiAnYXNrJywgY29uZmlkZW5jZTogMC41IH07XG4gIH1cblxuICAvLyBPcHRpb25hbDogRGVidWcgaW50ZW50IGNsYXNzaWZpY2F0aW9uXG4gIGFzeW5jIGV4cGxhaW5JbnRlbnQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxJbnRlbnREZWJ1Zz4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnREZWJ1Zz4oJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UsIGluY2x1ZGVfZGVidWc6IHRydWUgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIGRlYnVnIGluZm9cbiAgICByZXR1cm4geyBcbiAgICAgIGludGVudDogJ2FzaycsIFxuICAgICAgY29uZmlkZW5jZTogMC41LCBcbiAgICAgIHJlYXNvbmluZzogJ0NsYXNzaWZpY2F0aW9uIGZhaWxlZCwgZGVmYXVsdGluZyB0byBhc2sgbW9kZScgXG4gICAgfTtcbiAgfVxuXG4gIC8vIE1lbW9yeSBtYW5hZ2VtZW50XG4gIGFzeW5jIHVwZGF0ZU1lbW9yeShyZXF1ZXN0OiBNZW1vcnlVcGRhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL21lbW9yeS91cGRhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IGZ1bmN0aW9uYWxpdHlcbiAgY29ubmVjdFdlYlNvY2tldChjYWxsYmFja3M6IHtcbiAgICBvbkNoYXQ/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uV29ya2Zsb3dQcm9ncmVzcz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Db3BpbG90PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvblZhdWx0U3luYz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25JbnRlbnREZWJ1Zz86IChkZWJ1ZzogSW50ZW50RGVidWcpID0+IHZvaWQ7XG4gICAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIG9uQ29ubmVjdD86ICgpID0+IHZvaWQ7XG4gICAgb25EaXNjb25uZWN0PzogKCkgPT4gdm9pZDtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHdzVXJsID0gdGhpcy5iYXNlVXJsLnJlcGxhY2UoJ2h0dHAnLCAnd3MnKSArICcvd3Mvb2JzaWRpYW4nO1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvICR7d3NVcmx9YCk7XG4gICAgXG4gICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcpO1xuICAgICAgY2FsbGJhY2tzLm9uQ29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNoYXQ/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd29ya2Zsb3dfcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV29ya2Zsb3dQcm9ncmVzcz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3BpbG90JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNvcGlsb3Q/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndmF1bHRfc3luYyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25WYXVsdFN5bmM/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaW50ZW50X2RlYnVnJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkludGVudERlYnVnPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignRmFpbGVkIHRvIHBhcnNlIFdlYlNvY2tldCBtZXNzYWdlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZyb20gRXZvQWdlbnRYJywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgIGNhbGxiYWNrcy5vbkRpc2Nvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3InKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQpIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LmNsb3NlKCk7XG4gICAgICB0aGlzLndlYnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZW5kV2ViU29ja2V0TWVzc2FnZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCAmJiB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGUsIGRhdGEgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU47XG4gIH1cbn1cbiIsIi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBwbGFubmVyIGZlYXR1cmVcbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlc3BvbnNlIHtcbiAgc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nO1xuICBoZWFkbGluZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5uZXJSZXF1ZXN0IHtcbiAgbm90ZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZldGNoZXMgc2NoZWR1bGUgZGF0YSBmcm9tIHRoZSBFdm9BZ2VudFggQVBJXG4gKiBAcGFyYW0gbm90ZVRleHQgLSBUaGUgZnVsbCB0ZXh0IG9mIHRoZSBhY3RpdmUgbm90ZVxuICogQHBhcmFtIGFwaUNsaWVudCAtIFRoZSBFdm9BZ2VudFggQVBJIGNsaWVudCBpbnN0YW5jZVxuICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHRoZSBzY2hlZHVsZSBtYXJrZG93biBhbmQgaGVhZGxpbmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU2NoZWR1bGUobm90ZVRleHQ6IHN0cmluZywgYXBpQ2xpZW50OiBhbnkpOiBQcm9taXNlPFBsYW5uZXJSZXNwb25zZT4ge1xuICBjb25zb2xlLmxvZygn8J+UhCBbUGxhbiBNeSBEYXldIFN0YXJ0aW5nIHNjaGVkdWxlIGZldGNoLi4uJyk7XG4gIGNvbnNvbGUubG9nKCfwn5OdIFtQbGFuIE15IERheV0gTm90ZSB0ZXh0IGxlbmd0aDonLCBub3RlVGV4dC5sZW5ndGgpO1xuICBjb25zb2xlLmxvZygn8J+UlyBbUGxhbiBNeSBEYXldIEFQSSBjbGllbnQgdHlwZTonLCB0eXBlb2YgYXBpQ2xpZW50KTtcbiAgXG4gIGlmICghYXBpQ2xpZW50KSB7XG4gICAgY29uc3QgZXJyb3IgPSAnQVBJIGNsaWVudCBpcyBudWxsIG9yIHVuZGVmaW5lZCc7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gIH1cblxuICBpZiAoIWFwaUNsaWVudC5wbGFuVGFza3MpIHtcbiAgICBjb25zdCBlcnJvciA9ICdBUEkgY2xpZW50IGRvZXMgbm90IGhhdmUgcGxhblRhc2tzIG1ldGhvZCc7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRXJyb3I6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gQXZhaWxhYmxlIG1ldGhvZHM6JywgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXBpQ2xpZW50KSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/Cfk6QgW1BsYW4gTXkgRGF5XSBTZW5kaW5nIHJlcXVlc3QgdG8gRXZvQWdlbnRYLi4uJyk7XG4gICAgXG4gICAgLy8gVXNlIEV2b0FnZW50WCB0YXNrIHBsYW5uaW5nIGVuZHBvaW50IGluc3RlYWQgb2YgbG9jYWwgc2VydmVyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQucGxhblRhc2tzKHtcbiAgICAgIGdvYWw6IGBDcmVhdGUgYSBkYWlseSBzY2hlZHVsZSBiYXNlZCBvbiB0aGlzIG5vdGUgY29udGVudGAsXG4gICAgICBjb250ZXh0OiBub3RlVGV4dCxcbiAgICAgIHRpbWVmcmFtZTogJzEgZGF5J1xuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ/Cfk6UgW1BsYW4gTXkgRGF5XSBSZWNlaXZlZCByZXNwb25zZTonLCB7XG4gICAgICBzdWNjZXNzOiByZXNwb25zZS5zdWNjZXNzLFxuICAgICAgaGFzRGF0YTogISFyZXNwb25zZS5kYXRhLFxuICAgICAgZXJyb3I6IHJlc3BvbnNlLmVycm9yXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIFJhdyByZXNwb25zZSBkYXRhOicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEsIG51bGwsIDIpKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIFJlc3BvbnNlIGRhdGEgdHlwZTonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBSZXNwb25zZSBkYXRhIGtleXM6JywgcmVzcG9uc2UuZGF0YSA/IE9iamVjdC5rZXlzKHJlc3BvbnNlLmRhdGEpIDogJ25vIGRhdGEnKTtcblxuICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgY29uc3QgZXJyb3IgPSByZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdlbmVyYXRlIHNjaGVkdWxlJztcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEFQSSBFcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIGlmICghcmVzcG9uc2UuZGF0YSkge1xuICAgICAgY29uc3QgZXJyb3IgPSAnTm8gZGF0YSBpbiBBUEkgcmVzcG9uc2UnO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRXJyb3I6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBGdWxsIHJlc3BvbnNlOicsIHJlc3BvbnNlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxuXG4gICAgLy8gVGhlIEV2b0FnZW50WCBBUEkgcmV0dXJucyBhIG5lc3RlZCBzdHJ1Y3R1cmU6IHJlc3BvbnNlLmRhdGEuZGF0YS5wbGFuXG4gICAgY29uc3QgYWN0dWFsRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YSB8fCByZXNwb25zZS5kYXRhO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5OLIFtQbGFuIE15IERheV0gUmVzcG9uc2UgZGF0YSBzdHJ1Y3R1cmU6Jywge1xuICAgICAgaGFzUGxhbjogISFhY3R1YWxEYXRhLnBsYW4sXG4gICAgICBwbGFuS2V5czogYWN0dWFsRGF0YS5wbGFuID8gT2JqZWN0LmtleXMoYWN0dWFsRGF0YS5wbGFuKSA6IG51bGwsXG4gICAgICBoYXNUYXNrczogYWN0dWFsRGF0YS5wbGFuPy50YXNrcyA/IHRydWUgOiBmYWxzZSxcbiAgICAgIHRhc2tDb3VudDogYWN0dWFsRGF0YS5wbGFuPy50YXNrcz8ubGVuZ3RoIHx8IDBcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGlmIHBsYW4gZXhpc3RzIGluIHJlc3BvbnNlXG4gICAgaWYgKCFhY3R1YWxEYXRhLnBsYW4pIHtcbiAgICAgIGNvbnN0IGVycm9yID0gJ05vIHBsYW4gZGF0YSBpbiBBUEkgcmVzcG9uc2UnO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRXJyb3I6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBGdWxsIHJlc3BvbnNlIGRhdGE6JywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEFjdHVhbCBkYXRhOicsIGFjdHVhbERhdGEpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IEV2b0FnZW50WCB0YXNrIHBsYW5uaW5nIHJlc3BvbnNlIHRvIHNjaGVkdWxlIGZvcm1hdFxuICAgIGNvbnN0IHRhc2tQbGFuID0gYWN0dWFsRGF0YS5wbGFuO1xuICAgIGNvbnN0IHRhc2tzID0gdGFza1BsYW4udGFza3MgfHwgW107XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk50gW1BsYW4gTXkgRGF5XSBQcm9jZXNzaW5nIHRhc2tzOicsIHRhc2tzLmxlbmd0aCk7XG4gICAgXG4gICAgaWYgKHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gW1BsYW4gTXkgRGF5XSBObyB0YXNrcyBpbiByZXNwb25zZSwgY3JlYXRpbmcgZmFsbGJhY2sgc2NoZWR1bGUnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNjaGVkdWxlTWFya2Rvd246ICd8IFRpbWUgfCBUYXNrIHxcXG58LS0tLS0tfC0tLS0tLXxcXG58IDk6MDAgQU0gfCBQbGFuIHlvdXIgZGF5IHxcXG58IDEwOjAwIEFNIHwgU3RhcnQgd29ya2luZyB8XFxufCAxMjowMCBQTSB8IEx1bmNoIGJyZWFrIHwnLFxuICAgICAgICBoZWFkbGluZTogJ/Cfk4UgQmFzaWMgc2NoZWR1bGUgY3JlYXRlZCAobm8gdGFza3MgZm91bmQgaW4gbm90ZSknXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBzY2hlZHVsZSBtYXJrZG93biBmcm9tIHRhc2tzXG4gICAgbGV0IHNjaGVkdWxlTWFya2Rvd24gPSAnfCBUaW1lIHwgVGFzayB8XFxufC0tLS0tLXwtLS0tLS18XFxuJztcbiAgICBcbiAgICAvLyBFeHRyYWN0IHNjaGVkdWxlZCB0aW1lcyBmcm9tIHRhc2sgZGVzY3JpcHRpb25zIG9yIGdlbmVyYXRlIHRoZW1cbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OLIFtQbGFuIE15IERheV0gUHJvY2Vzc2luZyB0YXNrICR7aW5kZXggKyAxfTpgLCB7XG4gICAgICAgIHRpdGxlOiB0YXNrLnRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogdGFzay5kZXNjcmlwdGlvbj8uc3Vic3RyaW5nKDAsIDEwMCksXG4gICAgICAgIHByaW9yaXR5OiB0YXNrLnByaW9yaXR5LFxuICAgICAgICBlc3RpbWF0ZWRUaW1lOiB0YXNrLmVzdGltYXRlZF90aW1lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgdGltZU1hdGNoID0gdGFzay5kZXNjcmlwdGlvbj8ubWF0Y2goLyhcXGR7MSwyfTpcXGR7Mn0pLyk7XG4gICAgICBjb25zdCB0aW1lID0gdGltZU1hdGNoID8gdGltZU1hdGNoWzFdIDogYCR7OSArIE1hdGguZmxvb3IoaW5kZXggKiAxLjUpfTokeyhpbmRleCAqIDMwKSAlIDYwIHx8ICcwMCd9YDtcbiAgICAgIHNjaGVkdWxlTWFya2Rvd24gKz0gYHwgJHt0aW1lfSB8ICR7dGFzay50aXRsZX0gfFxcbmA7XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBzY2hlZHVsZU1hcmtkb3duLFxuICAgICAgaGVhZGxpbmU6IGDinKggU21hcnQgc2NoZWR1bGUgY3JlYXRlZCB3aXRoICR7dGFza3MubGVuZ3RofSB0YXNrcyFgXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBTY2hlZHVsZSBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgIG1hcmtkb3duTGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLmxlbmd0aCxcbiAgICAgIHRhc2tDb3VudDogdGFza3MubGVuZ3RoLFxuICAgICAgaGVhZGxpbmU6IHJlc3VsdC5oZWFkbGluZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEZldGNoIGVycm9yOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmVycm9yKCfwn5SNIFtQbGFuIE15IERheV0gRXJyb3Igc3RhY2s6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogJ05vIHN0YWNrIHRyYWNlJyk7XG4gICAgXG4gICAgLy8gUmUtdGhyb3cgd2l0aCBtb3JlIGNvbnRleHRcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTY2hlZHVsZSBmZXRjaCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTY2hlZHVsZSBmZXRjaCBmYWlsZWQ6ICR7U3RyaW5nKGVycm9yKX1gKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBGaW5kcyBhbmQgZXh0cmFjdHMgdGhlIFZhdWx0UGlsb3QgcGxhbiBzZWN0aW9uIGZyb20gbm90ZSB0ZXh0IHVzaW5nIGNvbW1lbnQgd3JhcHBlclxuICogQHBhcmFtIHRleHQgLSBUaGUgZnVsbCBub3RlIHRleHRcbiAqIEByZXR1cm5zIE1hdGNoIHJlc3VsdCB3aXRoIHBsYW4gc2VjdGlvbiBkZXRhaWxzIG9yIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQbGFuU2VjdGlvbih0ZXh0OiBzdHJpbmcpOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCB7XG4gIC8vIExvb2sgZm9yIHRoZSBWYXVsdFBpbG90IHBsYW4gY29tbWVudCB3cmFwcGVyXG4gIGNvbnN0IHBsYW5SZWdleCA9IC8oPCEtLSB2cDpwbGFuOnN0YXJ0IC0tPikoW1xcc1xcU10qPykoPCEtLSB2cDpwbGFuOmVuZCAtLT4pL2k7XG4gIHJldHVybiB0ZXh0Lm1hdGNoKHBsYW5SZWdleCk7XG59XG5cbi8qKlxuICogRmluZHMgYW5kIGV4dHJhY3RzIHRoZSBTY2hlZHVsZSBzZWN0aW9uIGZyb20gbm90ZSB0ZXh0XG4gKiBAcGFyYW0gdGV4dCAtIFRoZSBmdWxsIG5vdGUgdGV4dFxuICogQHJldHVybnMgTWF0Y2ggcmVzdWx0IHdpdGggc2NoZWR1bGUgc2VjdGlvbiBkZXRhaWxzIG9yIG51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTY2hlZHVsZVNlY3Rpb24odGV4dDogc3RyaW5nKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwge1xuICAvLyBGaXJzdCB0cnkgdG8gbWF0Y2ggaGVhZGluZ3MgdGhhdCBhcmUgZXhhY3RseSBcIiMjIFNjaGVkdWxlXCIgKHdpdGggb3B0aW9uYWwgY29udGVudCBhZnRlcilcbiAgbGV0IHNjaGVkdWxlUmVnZXggPSAvKF4jI1xccytTY2hlZHVsZVxcYlteXFxuXSpcXG4pKFtcXHNcXFNdKj8pKD89XFxuIyNcXHN8JCkvaW07XG4gIGxldCBtYXRjaCA9IHRleHQubWF0Y2goc2NoZWR1bGVSZWdleCk7XG4gIFxuICBpZiAobWF0Y2gpIHtcbiAgICByZXR1cm4gbWF0Y2g7XG4gIH1cbiAgXG4gIC8vIElmIG5vIGV4YWN0IG1hdGNoLCB0cnkgdG8gbWF0Y2ggaGVhZGluZ3MgdGhhdCBjb250YWluIFwiU2NoZWR1bGVcIiBhcyBhIHdvcmRcbiAgc2NoZWR1bGVSZWdleCA9IC8oXiMjXFxzKig/Oi4qXFxzKT9cXGJTY2hlZHVsZVxcYig/Olxccy4qKT8kXFxuKShbXFxzXFxTXSo/KSg/PVxcbiMjXFxzfCQpL2ltO1xuICByZXR1cm4gdGV4dC5tYXRjaChzY2hlZHVsZVJlZ2V4KTtcbn1cblxuLyoqXG4gKiBJbmplY3RzIG9yIHJlcGxhY2VzIHRoZSBzY2hlZHVsZSBzZWN0aW9uIGluIHRoZSBub3RlIHRleHRcbiAqIEBwYXJhbSBvcmlnaW5hbFRleHQgLSBUaGUgb3JpZ2luYWwgbm90ZSB0ZXh0XG4gKiBAcGFyYW0gc2NoZWR1bGVNYXJrZG93biAtIFRoZSBuZXcgc2NoZWR1bGUgY29udGVudCB0byBpbmplY3RcbiAqIEByZXR1cm5zIFVwZGF0ZWQgbm90ZSB0ZXh0IHdpdGggdGhlIG5ldyBzY2hlZHVsZSBzZWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RTY2hlZHVsZShvcmlnaW5hbFRleHQ6IHN0cmluZywgc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc29sZS5sb2coJ/Cfk50gW1BsYW4gTXkgRGF5XSBJbmplY3Rpbmcgc2NoZWR1bGU6Jywge1xuICAgIG9yaWdpbmFsTGVuZ3RoOiBvcmlnaW5hbFRleHQubGVuZ3RoLFxuICAgIHNjaGVkdWxlTGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLmxlbmd0aCxcbiAgICBoYXNPcmlnaW5hbENvbnRlbnQ6IG9yaWdpbmFsVGV4dC50cmltKCkubGVuZ3RoID4gMFxuICB9KTtcbiAgXG4gIC8vIEZpcnN0LCBjaGVjayBmb3IgVmF1bHRQaWxvdCBjb21tZW50IHdyYXBwZXJcbiAgY29uc3QgcGxhbk1hdGNoID0gZmluZFBsYW5TZWN0aW9uKG9yaWdpbmFsVGV4dCk7XG4gIFxuICBpZiAocGxhbk1hdGNoKSB7XG4gICAgY29uc29sZS5sb2coJ/CflIQgW1BsYW4gTXkgRGF5XSBSZXBsYWNpbmcgZXhpc3RpbmcgcGxhbiBzZWN0aW9uIHdpdGggY29tbWVudCB3cmFwcGVyJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgW1BsYW4gTXkgRGF5XSBGb3VuZCB3cmFwcGVkIHBsYW4gc2VjdGlvbjonLCB7XG4gICAgICBzdGFydENvbW1lbnQ6IHBsYW5NYXRjaFsxXSxcbiAgICAgIGNvbnRlbnRMZW5ndGg6IHBsYW5NYXRjaFsyXT8ubGVuZ3RoIHx8IDAsXG4gICAgICBlbmRDb21tZW50OiBwbGFuTWF0Y2hbM11cbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZXBsYWNlIGV2ZXJ5dGhpbmcgaW5zaWRlIHRoZSBjb21tZW50IHdyYXBwZXJcbiAgICBjb25zdCBbZnVsbE1hdGNoLCBzdGFydENvbW1lbnQsICwgZW5kQ29tbWVudF0gPSBwbGFuTWF0Y2g7XG4gICAgY29uc3QgcmVwbGFjZW1lbnQgPSBgJHtzdGFydENvbW1lbnR9XFxuJHtzY2hlZHVsZU1hcmtkb3dufVxcbiR7ZW5kQ29tbWVudH1gO1xuICAgIGNvbnN0IHJlc3VsdCA9IG9yaWdpbmFsVGV4dC5yZXBsYWNlKGZ1bGxNYXRjaCwgcmVwbGFjZW1lbnQpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBQbGFuIHNlY3Rpb24gcmVwbGFjZWQgd2l0aGluIGNvbW1lbnQgd3JhcHBlcicpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgXG4gIC8vIEZhbGwgYmFjayB0byBjaGVja2luZyBmb3IgU2NoZWR1bGUgc2VjdGlvblxuICBjb25zdCBzY2hlZHVsZU1hdGNoID0gZmluZFNjaGVkdWxlU2VjdGlvbihvcmlnaW5hbFRleHQpO1xuICBcbiAgaWYgKHNjaGVkdWxlTWF0Y2gpIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBbUGxhbiBNeSBEYXldIFJlcGxhY2luZyBleGlzdGluZyBzY2hlZHVsZSBzZWN0aW9uJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgW1BsYW4gTXkgRGF5XSBGb3VuZCBzZWN0aW9uOicsIHtcbiAgICAgIGhlYWRpbmdNYXRjaDogc2NoZWR1bGVNYXRjaFsxXT8uc3Vic3RyaW5nKDAsIDUwKSxcbiAgICAgIGNvbnRlbnRNYXRjaDogc2NoZWR1bGVNYXRjaFsyXT8uc3Vic3RyaW5nKDAsIDEwMClcbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZXBsYWNlIGV4aXN0aW5nIHNjaGVkdWxlIHNlY3Rpb24gKGtlZXAgaGVhZGluZywgcmVwbGFjZSBjb250ZW50KVxuICAgIGNvbnN0IFtmdWxsTWF0Y2gsIGhlYWRpbmddID0gc2NoZWR1bGVNYXRjaDtcbiAgICBjb25zdCByZXBsYWNlbWVudCA9IGhlYWRpbmcgKyBzY2hlZHVsZU1hcmtkb3duO1xuICAgIGNvbnN0IHJlc3VsdCA9IG9yaWdpbmFsVGV4dC5yZXBsYWNlKGZ1bGxNYXRjaCwgcmVwbGFjZW1lbnQpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBTY2hlZHVsZSBzZWN0aW9uIHJlcGxhY2VkJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZygn4p6VIFtQbGFuIE15IERheV0gQWRkaW5nIG5ldyBwbGFuIHNlY3Rpb24gd2l0aCBjb21tZW50IHdyYXBwZXIgYXQgdG9wJyk7XG4gICAgXG4gICAgLy8gSW5zZXJ0IG5ldyBwbGFuIHNlY3Rpb24gd2l0aCBjb21tZW50IHdyYXBwZXIgYXQgdGhlIHRvcCBvZiB0aGUgbm90ZVxuICAgIGNvbnN0IHdyYXBwZWRQbGFuID0gYDwhLS0gdnA6cGxhbjpzdGFydCAtLT5cXG4ke3NjaGVkdWxlTWFya2Rvd259XFxuPCEtLSB2cDpwbGFuOmVuZCAtLT5cXG5cXG5gO1xuICAgIGNvbnN0IHJlc3VsdCA9IHdyYXBwZWRQbGFuICsgb3JpZ2luYWxUZXh0O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBOZXcgcGxhbiBzZWN0aW9uIHdpdGggd3JhcHBlciBhZGRlZCBhdCB0b3AnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIHRoZSBzY2hlZHVsZSBtYXJrZG93biBpcyBwcm9wZXJseSBmb3JtYXR0ZWRcbiAqIEBwYXJhbSBzY2hlZHVsZU1hcmtkb3duIC0gVGhlIHNjaGVkdWxlIGNvbnRlbnQgdG8gdmFsaWRhdGVcbiAqIEByZXR1cm5zIFRydWUgaWYgdmFsaWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duKHNjaGVkdWxlTWFya2Rvd246IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIFZhbGlkYXRpbmcgc2NoZWR1bGUgbWFya2Rvd246Jywge1xuICAgIGxlbmd0aDogc2NoZWR1bGVNYXJrZG93bi5sZW5ndGgsXG4gICAgdHJpbW1lZExlbmd0aDogc2NoZWR1bGVNYXJrZG93bi50cmltKCkubGVuZ3RoLFxuICAgIGlzU3RyaW5nOiB0eXBlb2Ygc2NoZWR1bGVNYXJrZG93biA9PT0gJ3N0cmluZycsXG4gICAgcHJldmlldzogc2NoZWR1bGVNYXJrZG93bi5zdWJzdHJpbmcoMCwgMTAwKVxuICB9KTtcbiAgXG4gIC8vIEJhc2ljIHZhbGlkYXRpb24gLSBjaGVjayBpZiBpdCdzIG5vdCBlbXB0eSBhbmQgY29udGFpbnMgc29tZSBjb250ZW50XG4gIGNvbnN0IGlzVmFsaWQgPSBzY2hlZHVsZU1hcmtkb3duLnRyaW0oKS5sZW5ndGggPiAwO1xuICBcbiAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFZhbGlkYXRpb24gcmVzdWx0OicsIGlzVmFsaWQpO1xuICBcbiAgcmV0dXJuIGlzVmFsaWQ7XG59XG4iLCIvLyBEZWJ1ZyB1dGlsaXRpZXMgZm9yIFBsYW4gTXkgRGF5IGZlYXR1cmVcbmV4cG9ydCBjbGFzcyBQbGFuTXlEYXlEZWJ1Z2dlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQbGFuTXlEYXlEZWJ1Z2dlcjtcbiAgcHJpdmF0ZSBsb2dzOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIG1heExvZ3MgPSAxMDA7XG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IFBsYW5NeURheURlYnVnZ2VyIHtcbiAgICBpZiAoIVBsYW5NeURheURlYnVnZ2VyLmluc3RhbmNlKSB7XG4gICAgICBQbGFuTXlEYXlEZWJ1Z2dlci5pbnN0YW5jZSA9IG5ldyBQbGFuTXlEYXlEZWJ1Z2dlcigpO1xuICAgIH1cbiAgICByZXR1cm4gUGxhbk15RGF5RGVidWdnZXIuaW5zdGFuY2U7XG4gIH1cblxuICBsb2cobWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGxvZ0VudHJ5ID0gYFske3RpbWVzdGFtcH1dICR7bWVzc2FnZX0ke2RhdGEgPyBgIHwgJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gIDogJyd9YDtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhsb2dFbnRyeSk7XG4gICAgdGhpcy5sb2dzLnB1c2gobG9nRW50cnkpO1xuICAgIFxuICAgIC8vIEtlZXAgb25seSB0aGUgbW9zdCByZWNlbnQgbG9nc1xuICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gdGhpcy5tYXhMb2dzKSB7XG4gICAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3Muc2xpY2UoLXRoaXMubWF4TG9ncyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IGFueSkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBlcnJvckRhdGEgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8ge1xuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgIG5hbWU6IGVycm9yLm5hbWVcbiAgICB9IDogZXJyb3I7XG4gICAgXG4gICAgY29uc3QgbG9nRW50cnkgPSBgWyR7dGltZXN0YW1wfV0gRVJST1I6ICR7bWVzc2FnZX0ke2Vycm9yRGF0YSA/IGAgfCAke0pTT04uc3RyaW5naWZ5KGVycm9yRGF0YSl9YCA6ICcnfWA7XG4gICAgXG4gICAgY29uc29sZS5lcnJvcihsb2dFbnRyeSk7XG4gICAgdGhpcy5sb2dzLnB1c2gobG9nRW50cnkpO1xuICAgIFxuICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gdGhpcy5tYXhMb2dzKSB7XG4gICAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3Muc2xpY2UoLXRoaXMubWF4TG9ncyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0TG9ncygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmxvZ3NdO1xuICB9XG5cbiAgY2xlYXJMb2dzKCkge1xuICAgIHRoaXMubG9ncyA9IFtdO1xuICB9XG5cbiAgZXhwb3J0TG9ncygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvZ3Muam9pbignXFxuJyk7XG4gIH1cblxuICAvLyBIZWxwZXIgdG8gYW5hbHl6ZSBBUEkgY2xpZW50IHN0YXRlXG4gIGFuYWx5emVBcGlDbGllbnQoYXBpQ2xpZW50OiBhbnkpOiBhbnkge1xuICAgIGlmICghYXBpQ2xpZW50KSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6ICdudWxsJywgYXZhaWxhYmxlOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6ICdhdmFpbGFibGUnLFxuICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgdHlwZTogdHlwZW9mIGFwaUNsaWVudCxcbiAgICAgIG1ldGhvZHM6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihhcGlDbGllbnQpKS5maWx0ZXIobmFtZSA9PiB0eXBlb2YgYXBpQ2xpZW50W25hbWVdID09PSAnZnVuY3Rpb24nKSxcbiAgICAgIGhhc1BsYW5UYXNrczogdHlwZW9mIGFwaUNsaWVudC5wbGFuVGFza3MgPT09ICdmdW5jdGlvbicsXG4gICAgICBoYXNIZWFsdGhDaGVjazogdHlwZW9mIGFwaUNsaWVudC5oZWFsdGhDaGVjayA9PT0gJ2Z1bmN0aW9uJ1xuICAgIH07XG4gIH1cblxuICAvLyBIZWxwZXIgdG8gdGVzdCBFdm9BZ2VudFggY29ubmVjdGlvblxuICBhc3luYyB0ZXN0Q29ubmVjdGlvbihhcGlDbGllbnQ6IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKCfwn5SXIFRlc3RpbmcgRXZvQWdlbnRYIGNvbm5lY3Rpb24uLi4nKTtcbiAgICAgIFxuICAgICAgaWYgKCFhcGlDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY2xpZW50IGlzIG51bGwgb3IgdW5kZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXBpQ2xpZW50LmhlYWx0aENoZWNrKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGNsaWVudCBkb2VzIG5vdCBoYXZlIGhlYWx0aENoZWNrIG1ldGhvZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIHRoaXMubG9nKCfinIUgQ29ubmVjdGlvbiB0ZXN0IHN1Y2Nlc3NmdWwnLCByZXN1bHQpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVzdWx0IH07XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvcign4p2MIENvbm5lY3Rpb24gdGVzdCBmYWlsZWQnLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciB0byB0ZXN0IHRhc2sgcGxhbm5pbmcgc3BlY2lmaWNhbGx5XG4gIGFzeW5jIHRlc3RUYXNrUGxhbm5pbmcoYXBpQ2xpZW50OiBhbnksIHRlc3ROb3RlOiBzdHJpbmcgPSAnVGVzdCBub3RlIGZvciBzY2hlZHVsZSBnZW5lcmF0aW9uJyk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMubG9nKCfwn5OLIFRlc3RpbmcgdGFzayBwbGFubmluZy4uLicpO1xuICAgICAgXG4gICAgICBpZiAoIWFwaUNsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBjbGllbnQgaXMgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhcGlDbGllbnQucGxhblRhc2tzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGNsaWVudCBkb2VzIG5vdCBoYXZlIHBsYW5UYXNrcyBtZXRob2QnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBpQ2xpZW50LnBsYW5UYXNrcyh7XG4gICAgICAgIGdvYWw6ICdDcmVhdGUgYSB0ZXN0IHNjaGVkdWxlJyxcbiAgICAgICAgY29udGV4dDogdGVzdE5vdGUsXG4gICAgICAgIHRpbWVmcmFtZTogJzEgZGF5J1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMubG9nKCfinIUgVGFzayBwbGFubmluZyB0ZXN0IHN1Y2Nlc3NmdWwnLCB7XG4gICAgICAgIHN1Y2Nlc3M6IHJlc3VsdC5zdWNjZXNzLFxuICAgICAgICBoYXNEYXRhOiAhIXJlc3VsdC5kYXRhLFxuICAgICAgICBoYXNQbGFuOiAhIXJlc3VsdC5kYXRhPy5wbGFuLFxuICAgICAgICB0YXNrQ291bnQ6IHJlc3VsdC5kYXRhPy5wbGFuPy50YXNrcz8ubGVuZ3RoIHx8IDBcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZXN1bHQgfTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVycm9yKCfinYwgVGFzayBwbGFubmluZyB0ZXN0IGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH07XG4gICAgfVxuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBwbGFuTXlEYXlEZWJ1Z2dlciA9IFBsYW5NeURheURlYnVnZ2VyLmdldEluc3RhbmNlKCk7XG4iLCIvKipcbiAqIFR5cGVTY3JpcHQgdHlwZSBkZWZpbml0aW9ucyBmb3IgVmF1bHRQaWxvdCB2YXVsdCBtYW5hZ2VtZW50IGludGVncmF0aW9uXG4gKi9cblxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyA9PT0gVkFVTFQgU1RSVUNUVVJFIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U3RydWN0dXJlUmVxdWVzdCB7XG4gIGluY2x1ZGVfY29udGVudD86IGJvb2xlYW47XG4gIG1heF9kZXB0aD86IG51bWJlcjtcbiAgZmlsZV90eXBlcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0RmlsZUluZm8ge1xuICBwYXRoOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc2l6ZTogbnVtYmVyO1xuICBtb2RpZmllZDogc3RyaW5nO1xuICBmaWxlX3R5cGU6IHN0cmluZztcbiAgY29udGVudF9wcmV2aWV3Pzogc3RyaW5nO1xuICB0YWdzPzogc3RyaW5nW107XG4gIGxpbmtzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRGb2xkZXJJbmZvIHtcbiAgbmFtZTogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIGNoaWxkcmVuOiAoVmF1bHRGaWxlSW5mbyB8IFZhdWx0Rm9sZGVySW5mbylbXTtcbiAgdHlwZTogJ2ZvbGRlcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdHJ1Y3R1cmVSZXNwb25zZSB7XG4gIHZhdWx0X25hbWU6IHN0cmluZztcbiAgdG90YWxfZmlsZXM6IG51bWJlcjtcbiAgdG90YWxfZm9sZGVyczogbnVtYmVyO1xuICB0b3RhbF9zaXplOiBudW1iZXI7XG4gIHN0cnVjdHVyZTogVmF1bHRGb2xkZXJJbmZvO1xuICByZWNlbnRfZmlsZXM6IFZhdWx0RmlsZUluZm9bXTtcbiAgb3JwaGFuZWRfZmlsZXM6IFZhdWx0RmlsZUluZm9bXTtcbn1cblxuLy8gPT09IEZJTEUgT1BFUkFUSU9OIFRZUEVTID09PVxuXG5leHBvcnQgdHlwZSBGaWxlT3BlcmF0aW9uVHlwZSA9ICdjcmVhdGUnIHwgJ3VwZGF0ZScgfCAnZGVsZXRlJyB8ICdtb3ZlJyB8ICdjb3B5JztcblxuZXhwb3J0IGludGVyZmFjZSBGaWxlT3BlcmF0aW9uUmVxdWVzdCB7XG4gIG9wZXJhdGlvbjogRmlsZU9wZXJhdGlvblR5cGU7XG4gIGZpbGVfcGF0aDogc3RyaW5nO1xuICBuZXdfcGF0aD86IHN0cmluZztcbiAgY29udGVudD86IHN0cmluZztcbiAgYmFja3VwPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlT3BlcmF0aW9uUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIGZpbGVfcGF0aDogc3RyaW5nO1xuICBiYWNrdXBfcGF0aD86IHN0cmluZztcbiAgbmV3X3BhdGg/OiBzdHJpbmc7XG59XG5cbi8vID09PSBCQVRDSCBPUEVSQVRJT05TID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoRmlsZU9wZXJhdGlvblJlcXVlc3Qge1xuICBvcGVyYXRpb25zOiBGaWxlT3BlcmF0aW9uUmVxdWVzdFtdO1xuICBhdG9taWM/OiBib29sZWFuO1xuICB0aW1lb3V0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoRmlsZU9wZXJhdGlvblJlc3BvbnNlIHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgY29tcGxldGVkOiBudW1iZXI7XG4gIGZhaWxlZDogbnVtYmVyO1xuICByZXN1bHRzOiBGaWxlT3BlcmF0aW9uUmVzcG9uc2VbXTtcbiAgZXJyb3JzPzogc3RyaW5nW107XG59XG5cbi8vID09PSBTRUFSQ0ggVFlQRVMgPT09XG5cbmV4cG9ydCB0eXBlIFNlYXJjaFR5cGUgPSAnY29udGVudCcgfCAnZmlsZW5hbWUnIHwgJ3RhZ3MnIHwgJ2xpbmtzJyB8ICdjb21wcmVoZW5zaXZlJztcblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFNlYXJjaFJlcXVlc3Qge1xuICBxdWVyeTogc3RyaW5nO1xuICBzZWFyY2hfdHlwZT86IFNlYXJjaFR5cGU7XG4gIG1heF9yZXN1bHRzPzogbnVtYmVyO1xuICBpbmNsdWRlX2NvbnRlbnQ/OiBib29sZWFuO1xuICBmaWxlX3R5cGVzPzogc3RyaW5nW107XG4gIGZvbGRlcnM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFNlYXJjaFJlc3VsdCB7XG4gIGZpbGVfcGF0aDogc3RyaW5nO1xuICBmaWxlX25hbWU6IHN0cmluZztcbiAgbWF0Y2hfdHlwZTogJ2NvbnRlbnQnIHwgJ2ZpbGVuYW1lJyB8ICd0YWcnIHwgJ2xpbmsnO1xuICBtYXRjaGVzOiBzdHJpbmdbXTtcbiAgcHJldmlldzogc3RyaW5nO1xuICBzY29yZTogbnVtYmVyO1xuICBsaW5lX251bWJlcnM/OiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFNlYXJjaFJlc3BvbnNlIHtcbiAgcmVzdWx0czogVmF1bHRTZWFyY2hSZXN1bHRbXTtcbiAgdG90YWxfZm91bmQ6IG51bWJlcjtcbiAgc2VhcmNoX3R5cGU6IFNlYXJjaFR5cGU7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIGluc2lnaHRzPzogc3RyaW5nO1xuICBzdWdnZXN0ZWRfcXVlcmllcz86IHN0cmluZ1tdO1xufVxuXG4vLyA9PT0gT1JHQU5JWkFUSU9OIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0T3JnYW5pemF0aW9uUmVxdWVzdCB7XG4gIGZvY3VzX2ZvbGRlcnM/OiBzdHJpbmdbXTtcbiAgb3JnYW5pemF0aW9uX21vZGU6ICdieV90b3BpYycgfCAnYnlfZGF0ZScgfCAnYnlfdHlwZScgfCAnY3VzdG9tJztcbiAgY3JlYXRlX2ZvbGRlcnM/OiBib29sZWFuO1xuICBtb3ZlX2ZpbGVzPzogYm9vbGVhbjtcbiAgY3VzdG9tX3J1bGVzPzogT3JnYW5pemF0aW9uUnVsZVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yZ2FuaXphdGlvblJ1bGUge1xuICBwYXR0ZXJuOiBzdHJpbmc7XG4gIHRhcmdldF9mb2xkZXI6IHN0cmluZztcbiAgcnVsZV90eXBlOiAnZmlsZW5hbWUnIHwgJ2NvbnRlbnQnIHwgJ3RhZyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRPcmdhbml6YXRpb25SZXNwb25zZSB7XG4gIHN1Z2dlc3RlZF9tb3ZlczogRmlsZU1vdmVPcGVyYXRpb25bXTtcbiAgc3VnZ2VzdGVkX2ZvbGRlcnM6IHN0cmluZ1tdO1xuICBvcmdhbml6YXRpb25faW5zaWdodHM6IHN0cmluZztcbiAgZXN0aW1hdGVkX2ltcHJvdmVtZW50czogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVNb3ZlT3BlcmF0aW9uIHtcbiAgZnJvbV9wYXRoOiBzdHJpbmc7XG4gIHRvX3BhdGg6IHN0cmluZztcbiAgcmVhc29uOiBzdHJpbmc7XG4gIGNvbmZpZGVuY2U6IG51bWJlcjtcbn1cblxuLy8gPT09IEJBQ0tVUCBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEJhY2t1cFJlcXVlc3Qge1xuICBpbmNsdWRlX3NldHRpbmdzPzogYm9vbGVhbjtcbiAgY29tcHJlc3Npb24/OiBib29sZWFuO1xuICBiYWNrdXBfbmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEJhY2t1cFJlc3BvbnNlIHtcbiAgYmFja3VwX3BhdGg6IHN0cmluZztcbiAgYmFja3VwX3NpemU6IG51bWJlcjtcbiAgZmlsZXNfYmFja2VkX3VwOiBudW1iZXI7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xufVxuXG4vLyA9PT0gRVJST1IgSEFORExJTkcgPT09XG5cbmV4cG9ydCBjbGFzcyBWYXVsdE1hbmFnZW1lbnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIGNvZGU6IHN0cmluZztcbiAgcHVibGljIGZlYXR1cmU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IHN0cmluZywgZmVhdHVyZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ1ZhdWx0TWFuYWdlbWVudEVycm9yJztcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuZmVhdHVyZSA9IGZlYXR1cmU7XG4gIH1cbn1cblxuLy8gPT09IFNFVFRJTkdTIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIHtcbiAgZW5hYmxlVmF1bHRNYW5hZ2VtZW50OiBib29sZWFuO1xuICBhdXRvU3luY1ZhdWx0U3RydWN0dXJlOiBib29sZWFuO1xuICBzZWFyY2hSZXN1bHRzTGltaXQ6IG51bWJlcjtcbiAgZW5hYmxlU21hcnRTZWFyY2g6IGJvb2xlYW47XG4gIGJhdGNoT3BlcmF0aW9uVGltZW91dDogbnVtYmVyO1xuICBzaG93VmF1bHRTdGF0czogYm9vbGVhbjtcbiAgbWF4U2VhcmNoUmVzdWx0czogbnVtYmVyO1xuICBkZWZhdWx0U2VhcmNoVHlwZTogU2VhcmNoVHlwZTtcbiAgZW5hYmxlRmlsZU9wZXJhdGlvbnM6IGJvb2xlYW47XG4gIGNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnM6IGJvb2xlYW47XG4gIGF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zOiBib29sZWFuO1xufVxuXG4vLyA9PT0gQVBJIElOVEVSRkFDRSA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE1hbmFnZW1lbnRBUEkge1xuICBnZXRWYXVsdFN0cnVjdHVyZShyZXF1ZXN0OiBWYXVsdFN0cnVjdHVyZVJlcXVlc3QpOiBQcm9taXNlPFZhdWx0U3RydWN0dXJlUmVzcG9uc2U+O1xuICBwZXJmb3JtRmlsZU9wZXJhdGlvbihyZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPjtcbiAgcGVyZm9ybUJhdGNoT3BlcmF0aW9ucyhyZXF1ZXN0OiBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogUHJvbWlzZTxCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZT47XG4gIHNlYXJjaFZhdWx0KHJlcXVlc3Q6IFZhdWx0U2VhcmNoUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTZWFyY2hSZXNwb25zZT47XG4gIG9yZ2FuaXplVmF1bHQocmVxdWVzdDogVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0KTogUHJvbWlzZTxWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlPjtcbiAgYmFja3VwVmF1bHQocmVxdWVzdDogVmF1bHRCYWNrdXBSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdEJhY2t1cFJlc3BvbnNlPjtcbn1cblxuLy8gPT09IFVUSUxJVFkgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRNb2RhbFByb3BzIHtcbiAgYXBwOiBBcHA7XG4gIHBsdWdpbjogYW55O1xuICBvbkNsb3NlPzogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlVHJlZU5vZGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgdHlwZTogJ2ZpbGUnIHwgJ2ZvbGRlcic7XG4gIGNoaWxkcmVuPzogRmlsZVRyZWVOb2RlW107XG4gIHNpemU/OiBudW1iZXI7XG4gIG1vZGlmaWVkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U3RhdHMge1xuICB0b3RhbEZpbGVzOiBudW1iZXI7XG4gIHRvdGFsRm9sZGVyczogbnVtYmVyO1xuICB0b3RhbFNpemU6IG51bWJlcjtcbiAgYXZlcmFnZUZpbGVTaXplOiBudW1iZXI7XG4gIGxhcmdlc3RGaWxlOiBWYXVsdEZpbGVJbmZvO1xuICBtb3N0UmVjZW50RmlsZTogVmF1bHRGaWxlSW5mbztcbiAgZmlsZVR5cGVEaXN0cmlidXRpb246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoRmlsdGVyIHtcbiAgZmlsZVR5cGVzPzogc3RyaW5nW107XG4gIGZvbGRlcnM/OiBzdHJpbmdbXTtcbiAgZGF0ZVJhbmdlPzoge1xuICAgIHN0YXJ0OiBzdHJpbmc7XG4gICAgZW5kOiBzdHJpbmc7XG4gIH07XG4gIHNpemVSYW5nZT86IHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbiAgfTtcbiAgdGFncz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0SGVhbHRoQ2hlY2sge1xuICBzdGF0dXM6ICdoZWFsdGh5JyB8ICd3YXJuaW5nJyB8ICdlcnJvcic7XG4gIGlzc3VlczogSGVhbHRoSXNzdWVbXTtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgbGFzdENoZWNrOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoSXNzdWUge1xuICB0eXBlOiAnb3JwaGFuZWRfZmlsZScgfCAnYnJva2VuX2xpbmsnIHwgJ2R1cGxpY2F0ZV9uYW1lJyB8ICdsYXJnZV9maWxlJyB8ICdlbXB0eV9mb2xkZXInO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBmaWxlczogc3RyaW5nW107XG4gIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xufVxuIiwiLyoqXG4gKiBBUEkgQ2xpZW50IEV4dGVuc2lvbnMgZm9yIFZhdWx0UGlsb3QgVmF1bHQgTWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7XG4gIFZhdWx0U3RydWN0dXJlUmVxdWVzdCxcbiAgVmF1bHRTdHJ1Y3R1cmVSZXNwb25zZSxcbiAgRmlsZU9wZXJhdGlvblJlcXVlc3QsXG4gIEZpbGVPcGVyYXRpb25SZXNwb25zZSxcbiAgQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCxcbiAgQmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2UsXG4gIFZhdWx0U2VhcmNoUmVxdWVzdCxcbiAgVmF1bHRTZWFyY2hSZXNwb25zZSxcbiAgVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0LFxuICBWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlLFxuICBWYXVsdEJhY2t1cFJlcXVlc3QsXG4gIFZhdWx0QmFja3VwUmVzcG9uc2UsXG4gIFZhdWx0TWFuYWdlbWVudEVycm9yLFxuICBWYXVsdE1hbmFnZW1lbnRBUElcbn0gZnJvbSAnLi92YXVsdC10eXBlcyc7XG5cbi8qKlxuICogVmF1bHQgTWFuYWdlbWVudCBBUEkgQ2xpZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBWYXVsdE1hbmFnZW1lbnRDbGllbnQgaW1wbGVtZW50cyBWYXVsdE1hbmFnZW1lbnRBUEkge1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBhcGlLZXk/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYmFzZVVybDogc3RyaW5nLCBhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgLy8gPT09IENPUkUgQVBJIE1FVEhPRFMgPT09XG5cbiAgLyoqXG4gICAqIEdldCBjb21wcmVoZW5zaXZlIHZhdWx0IHN0cnVjdHVyZSB3aXRoIEFJIGFuYWx5c2lzXG4gICAqL1xuICBhc3luYyBnZXRWYXVsdFN0cnVjdHVyZShyZXF1ZXN0OiBWYXVsdFN0cnVjdHVyZVJlcXVlc3QpOiBQcm9taXNlPFZhdWx0U3RydWN0dXJlUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L3N0cnVjdHVyZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIC8vIEVuZHBvaW50IG5vdCBpbXBsZW1lbnRlZCAtIHJldHVybiBlbXB0eSBzdHJ1Y3R1cmVcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YXVsdF9uYW1lOiAnVmF1bHQnLFxuICAgICAgICAgIHRvdGFsX2ZpbGVzOiAwLFxuICAgICAgICAgIHRvdGFsX2ZvbGRlcnM6IDAsXG4gICAgICAgICAgdG90YWxfc2l6ZTogMCxcbiAgICAgICAgICBzdHJ1Y3R1cmU6IHsgbmFtZTogJ3ZhdWx0JywgdHlwZTogJ2ZvbGRlcicsIHBhdGg6ICcvJywgY2hpbGRyZW46IFtdIH0sXG4gICAgICAgICAgcmVjZW50X2ZpbGVzOiBbXSxcbiAgICAgICAgICBvcnBoYW5lZF9maWxlczogW11cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEZhaWxlZCB0byBnZXQgdmF1bHQgc3RydWN0dXJlOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnU1RSVUNUVVJFX0ZFVENIX0ZBSUxFRCcsXG4gICAgICAgICAgJ3N0cnVjdHVyZSdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmF1bHRNYW5hZ2VtZW50RXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnc3RydWN0dXJlJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBpbmRpdmlkdWFsIGZpbGUgb3BlcmF0aW9uIChjcmVhdGUsIHVwZGF0ZSwgZGVsZXRlLCBtb3ZlLCBjb3B5KVxuICAgKi9cbiAgYXN5bmMgcGVyZm9ybUZpbGVPcGVyYXRpb24ocmVxdWVzdDogRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3QocmVxdWVzdCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9maWxlL29wZXJhdGlvbicsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEZpbGUgb3BlcmF0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ0ZJTEVfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2ZpbGUtb3BlcmF0aW9ucydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICByZXN1bHQubWVzc2FnZSB8fCAnRmlsZSBvcGVyYXRpb24gZmFpbGVkJyxcbiAgICAgICAgICAnRklMRV9PUEVSQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnZmlsZS1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnZmlsZS1vcGVyYXRpb25zJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBtdWx0aXBsZSBmaWxlIG9wZXJhdGlvbnMgZWZmaWNpZW50bHlcbiAgICovXG4gIGFzeW5jIHBlcmZvcm1CYXRjaE9wZXJhdGlvbnMocmVxdWVzdDogQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8QmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFyZXF1ZXN0Lm9wZXJhdGlvbnMgfHwgcmVxdWVzdC5vcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgJ05vIG9wZXJhdGlvbnMgc3BlY2lmaWVkIGZvciBiYXRjaCByZXF1ZXN0JyxcbiAgICAgICAgICAnSU5WQUxJRF9CQVRDSF9SRVFVRVNUJyxcbiAgICAgICAgICAnYmF0Y2gtb3BlcmF0aW9ucydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgZWFjaCBvcGVyYXRpb25cbiAgICAgIHJlcXVlc3Qub3BlcmF0aW9ucy5mb3JFYWNoKChvcCwgaW5kZXgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3Qob3ApO1xuICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAgIGBJbnZhbGlkIG9wZXJhdGlvbiBhdCBpbmRleCAke2luZGV4fTogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YCxcbiAgICAgICAgICAgICdJTlZBTElEX0JBVENIX09QRVJBVElPTicsXG4gICAgICAgICAgICAnYmF0Y2gtb3BlcmF0aW9ucydcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2ZpbGUvYmF0Y2gnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBCYXRjaCBvcGVyYXRpb25zIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ0JBVENIX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIHJlc3VsdC5tZXNzYWdlIHx8ICdCYXRjaCBvcGVyYXRpb25zIGZhaWxlZCcsXG4gICAgICAgICAgJ0JBVENIX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnYmF0Y2gtb3BlcmF0aW9ucycpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCB2YXVsdCB3aXRoIEFJLXBvd2VyZWQgaW5zaWdodHNcbiAgICovXG4gIGFzeW5jIHNlYXJjaFZhdWx0KHJlcXVlc3Q6IFZhdWx0U2VhcmNoUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTZWFyY2hSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcXVlc3QucXVlcnkgfHwgcmVxdWVzdC5xdWVyeS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnU2VhcmNoIHF1ZXJ5IGNhbm5vdCBiZSBlbXB0eScsXG4gICAgICAgICAgJ0lOVkFMSURfU0VBUkNIX1FVRVJZJyxcbiAgICAgICAgICAnc2VhcmNoJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvc2VhcmNoJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgU2VhcmNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ1NFQVJDSF9GQUlMRUQnLFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdzZWFyY2gnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQUktcG93ZXJlZCB2YXVsdCBvcmdhbml6YXRpb24gc3VnZ2VzdGlvbnNcbiAgICovXG4gIGFzeW5jIG9yZ2FuaXplVmF1bHQocmVxdWVzdDogVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0KTogUHJvbWlzZTxWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9vcmdhbml6ZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYE9yZ2FuaXphdGlvbiBhbmFseXNpcyBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdPUkdBTklaQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnb3JnYW5pemF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnb3JnYW5pemF0aW9uJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHZhdWx0IGJhY2t1cFxuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHQocmVxdWVzdDogVmF1bHRCYWNrdXBSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdEJhY2t1cFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9iYWNrdXAnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBCYWNrdXAgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnQkFDS1VQX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhY2t1cCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvciwgJ2JhY2t1cCcpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09IENPTlZFTklFTkNFIE1FVEhPRFMgPT09XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmaWxlIHdpdGggY29udGVudFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdjcmVhdGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgZXhpc3RpbmcgZmlsZSBjb250ZW50XG4gICAqL1xuICBhc3luYyB1cGRhdGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyZm9ybUZpbGVPcGVyYXRpb24oe1xuICAgICAgb3BlcmF0aW9uOiAndXBkYXRlJyxcbiAgICAgIGZpbGVfcGF0aDogZmlsZVBhdGgsXG4gICAgICBjb250ZW50LFxuICAgICAgYmFja3VwXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgZmlsZVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBiYWNrdXA6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdkZWxldGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmaWxlIHRvIG5ldyBsb2NhdGlvblxuICAgKi9cbiAgYXN5bmMgbW92ZUZpbGUoZnJvbVBhdGg6IHN0cmluZywgdG9QYXRoOiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ21vdmUnLFxuICAgICAgZmlsZV9wYXRoOiBmcm9tUGF0aCxcbiAgICAgIG5ld19wYXRoOiB0b1BhdGgsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IGEgZmlsZSB0byBuZXcgbG9jYXRpb25cbiAgICovXG4gIGFzeW5jIGNvcHlGaWxlKGZyb21QYXRoOiBzdHJpbmcsIHRvUGF0aDogc3RyaW5nKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICdjb3B5JyxcbiAgICAgIGZpbGVfcGF0aDogZnJvbVBhdGgsXG4gICAgICBuZXdfcGF0aDogdG9QYXRoXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUXVpY2sgc2VhcmNoIHdpdGggZGVmYXVsdCBzZXR0aW5nc1xuICAgKi9cbiAgYXN5bmMgcXVpY2tTZWFyY2gocXVlcnk6IHN0cmluZywgbWF4UmVzdWx0czogbnVtYmVyID0gMjApOiBQcm9taXNlPFZhdWx0U2VhcmNoUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5zZWFyY2hWYXVsdCh7XG4gICAgICBxdWVyeSxcbiAgICAgIHNlYXJjaF90eXBlOiAnY29tcHJlaGVuc2l2ZScsXG4gICAgICBtYXhfcmVzdWx0czogbWF4UmVzdWx0cyxcbiAgICAgIGluY2x1ZGVfY29udGVudDogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09IEhFTFBFUiBNRVRIT0RTID09PVxuXG4gIC8qKlxuICAgKiBNYWtlIGF1dGhlbnRpY2F0ZWQgcmVxdWVzdCB0byB0aGUgQVBJXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyl9JHtlbmRwb2ludH1gO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgLi4uKChvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPikgfHwge30pXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnNcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgYE5ldHdvcmsgcmVxdWVzdCBmYWlsZWQ6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyfWAsXG4gICAgICAgICdORVRXT1JLX0VSUk9SJyxcbiAgICAgICAgJ2FwaSdcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGZpbGUgb3BlcmF0aW9uIHJlcXVlc3RcbiAgICovXG4gIHByaXZhdGUgdmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChyZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IHZvaWQge1xuICAgIGlmICghcmVxdWVzdC5maWxlX3BhdGggfHwgcmVxdWVzdC5maWxlX3BhdGgudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAnRmlsZSBwYXRoIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgJ0lOVkFMSURfRklMRV9QQVRIJyxcbiAgICAgICAgJ3ZhbGlkYXRpb24nXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lm9wZXJhdGlvbiA9PT0gJ21vdmUnIHx8IHJlcXVlc3Qub3BlcmF0aW9uID09PSAnY29weScpIHtcbiAgICAgIGlmICghcmVxdWVzdC5uZXdfcGF0aCB8fCByZXF1ZXN0Lm5ld19wYXRoLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdOZXcgcGF0aCBpcyByZXF1aXJlZCBmb3IgbW92ZS9jb3B5IG9wZXJhdGlvbnMnLFxuICAgICAgICAgICdJTlZBTElEX05FV19QQVRIJyxcbiAgICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdC5vcGVyYXRpb24gPT09ICdjcmVhdGUnIHx8IHJlcXVlc3Qub3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgaWYgKHJlcXVlc3QuY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnQ29udGVudCBpcyByZXF1aXJlZCBmb3IgY3JlYXRlL3VwZGF0ZSBvcGVyYXRpb25zJyxcbiAgICAgICAgICAnSU5WQUxJRF9DT05URU5UJyxcbiAgICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHZhdWx0IG1hbmFnZW1lbnQgZXJyb3JzIHdpdGggdXNlciBmZWVkYmFja1xuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvcjogYW55LCBmZWF0dXJlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGBWYXVsdCBtYW5hZ2VtZW50IGVycm9yIGluICR7ZmVhdHVyZX06YCwgZXJyb3IpO1xuICAgIFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhdWx0TWFuYWdlbWVudEVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBWYXVsdCAke2ZlYXR1cmV9IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFZhdWx0ICR7ZmVhdHVyZX0gb3BlcmF0aW9uIGZhaWxlZGAsIDMwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gdmF1bHQgbWFuYWdlbWVudCBlbmRwb2ludHNcbiAgICovXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgYSBzaW1wbGUgdmF1bHQgc3RydWN0dXJlIHJlcXVlc3Qgd2l0aCBtaW5pbWFsIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9zdHJ1Y3R1cmUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGluY2x1ZGVfY29udGVudDogZmFsc2UsIG1heF9kZXB0aDogMSB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiAnVmF1bHQgbWFuYWdlbWVudCBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwnIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgbWVzc2FnZTogYENvbm5lY3Rpb24gZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAgXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIG1lc3NhZ2U6IGBDb25uZWN0aW9uIGVycm9yOiAke2Vyci5tZXNzYWdlIHx8IGVycn1gIFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8gPT09IFVUSUxJVFkgRlVOQ1RJT05TID09PVxuXG4vKipcbiAqIEZvcm1hdCBmaWxlIHNpemUgaW4gaHVtYW4gcmVhZGFibGUgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQic7XG4gIFxuICBjb25zdCBrID0gMTAyNDtcbiAgY29uc3Qgc2l6ZXMgPSBbJ0InLCAnS0InLCAnTUInLCAnR0InXTtcbiAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coYnl0ZXMpIC8gTWF0aC5sb2coaykpO1xuICBcbiAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV07XG59XG5cbi8qKlxuICogVmFsaWRhdGUgZmlsZSBwYXRoIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEZpbGVQYXRoKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAoIXBhdGggfHwgcGF0aC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgaW52YWxpZCBjaGFyYWN0ZXJzXG4gIGNvbnN0IGludmFsaWRDaGFycyA9IC9bPD46XCJ8PypdLztcbiAgaWYgKGludmFsaWRDaGFycy50ZXN0KHBhdGgpKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBmb3IgcmVzZXJ2ZWQgbmFtZXMgb24gV2luZG93c1xuICBjb25zdCByZXNlcnZlZE5hbWVzID0gL14oQ09OfFBSTnxBVVh8TlVMfENPTVsxLTldfExQVFsxLTldKSQvaTtcbiAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XG4gIGlmIChyZXNlcnZlZE5hbWVzLnRlc3QoZmlsZU5hbWUuc3BsaXQoJy4nKVswXSkpIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGZpbGUgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVGaWxlUGF0aChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gcGF0aFxuICAgIC5yZXBsYWNlKC9bPD46XCJ8PypdL2csICdfJylcbiAgICAucmVwbGFjZSgvXFxcXC9nLCAnLycpXG4gICAgLnJlcGxhY2UoL1xcLysvZywgJy8nKVxuICAgIC5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCAnJyk7XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEVudmlyb25tZW50SW5mbyB7XG4gIHBsYXRmb3JtOiAnbm9kZScgfCAnYnJvd3NlcicgfCAnb2JzaWRpYW4nIHwgJ3Vua25vd24nO1xuICBoYXNGaWxlU3lzdGVtOiBib29sZWFuO1xuICBoYXNXZWJTb2NrZXQ6IGJvb2xlYW47XG4gIGhhc0hUVFA6IGJvb2xlYW47XG4gIGNhcGFiaWxpdGllczogc3RyaW5nW107XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgYXBwPzogYW55O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFbnZpcm9ubWVudERldGVjdG9yIHtcbiAgc3RhdGljIGRldGVjdCgpOiBFbnZpcm9ubWVudEluZm8ge1xuICAgIGNvbnN0IGluZm86IEVudmlyb25tZW50SW5mbyA9IHtcbiAgICAgIHBsYXRmb3JtOiAndW5rbm93bicsXG4gICAgICBoYXNGaWxlU3lzdGVtOiBmYWxzZSxcbiAgICAgIGhhc1dlYlNvY2tldDogZmFsc2UsXG4gICAgICBoYXNIVFRQOiBmYWxzZSxcbiAgICAgIGNhcGFiaWxpdGllczogW11cbiAgICB9O1xuXG4gICAgLy8gRGV0ZWN0IHBsYXRmb3JtXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHAgJiYgd2luZG93LmFwcC53b3Jrc3BhY2UpIHtcbiAgICAgIGluZm8ucGxhdGZvcm0gPSAnb2JzaWRpYW4nO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGluZm8ucGxhdGZvcm0gPSAnYnJvd3Nlcic7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5wcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnByb2Nlc3MudmVyc2lvbnMgJiYgKGdsb2JhbFRoaXMgYXMgYW55KS5wcm9jZXNzLnZlcnNpb25zLm5vZGUpIHtcbiAgICAgIGluZm8ucGxhdGZvcm0gPSAnbm9kZSc7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgY2FwYWJpbGl0aWVzXG4gICAgaW5mby5oYXNIVFRQID0gdHlwZW9mIGZldGNoICE9PSAndW5kZWZpbmVkJztcbiAgICBpbmZvLmhhc1dlYlNvY2tldCA9IHR5cGVvZiBXZWJTb2NrZXQgIT09ICd1bmRlZmluZWQnO1xuICAgIGluZm8uaGFzRmlsZVN5c3RlbSA9IHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUgIT09ICd1bmRlZmluZWQnICYmIGluZm8ucGxhdGZvcm0gPT09ICdub2RlJztcblxuICAgIC8vIEFkZCBjYXBhYmlsaXRpZXMgbGlzdFxuICAgIGlmIChpbmZvLmhhc0hUVFApIGluZm8uY2FwYWJpbGl0aWVzLnB1c2goJ2h0dHAnKTtcbiAgICBpZiAoaW5mby5oYXNXZWJTb2NrZXQpIGluZm8uY2FwYWJpbGl0aWVzLnB1c2goJ3dlYnNvY2tldCcpO1xuICAgIGlmIChpbmZvLmhhc0ZpbGVTeXN0ZW0pIGluZm8uY2FwYWJpbGl0aWVzLnB1c2goJ2ZpbGVzeXN0ZW0nKTtcblxuICAgIHJldHVybiBpbmZvO1xuICB9XG5cbiAgc3RhdGljIGlzT2JzaWRpYW4oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZWN0KCkucGxhdGZvcm0gPT09ICdvYnNpZGlhbic7XG4gIH1cblxuICBzdGF0aWMgY2FuVXNlRmlsZVN5c3RlbSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXRlY3QoKS5oYXNGaWxlU3lzdGVtO1xuICB9XG5cbiAgc3RhdGljIGNhblVzZVdlYlNvY2tldCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXRlY3QoKS5oYXNXZWJTb2NrZXQ7XG4gIH1cblxuICBzdGF0aWMgZ2V0T3B0aW1hbFRyYW5zcG9ydCgpOiAnaHR0cCcgfCAnd2Vic29ja2V0JyB8ICdmaWxlc3lzdGVtJyB7XG4gICAgY29uc3QgZW52ID0gdGhpcy5kZXRlY3QoKTtcbiAgICBcbiAgICBpZiAoZW52Lmhhc1dlYlNvY2tldCkgcmV0dXJuICd3ZWJzb2NrZXQnO1xuICAgIGlmIChlbnYuaGFzSFRUUCkgcmV0dXJuICdodHRwJztcbiAgICBpZiAoZW52Lmhhc0ZpbGVTeXN0ZW0pIHJldHVybiAnZmlsZXN5c3RlbSc7XG4gICAgXG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdWl0YWJsZSB0cmFuc3BvcnQgYXZhaWxhYmxlJyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IERldlBpcGVNZXNzYWdlLCBEZXZQaXBlTWVzc2FnZVR5cGUsIE1vZGVsU2VsZWN0aW9uQ29uZmlnIH0gZnJvbSAnLi4vdHlwZXMvTW9kZWxTZWxlY3Rpb24nO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciwgRW52aXJvbm1lbnRJbmZvIH0gZnJvbSAnLi4vdXRpbHMvRW52aXJvbm1lbnREZXRlY3Rvcic7XG5cbmludGVyZmFjZSBFdmVudExpc3RlbmVyIHtcbiAgKGRhdGE6IGFueSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEZXZQaXBlQ2xpZW50IHtcbiAgcHJpdmF0ZSBzZXJ2ZXJVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBpc0Nvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIG1lc3NhZ2VJZDogbnVtYmVyID0gMTtcbiAgcHJpdmF0ZSBwZW5kaW5nUmVxdWVzdHM6IE1hcDxzdHJpbmcsIHsgcmVzb2x2ZTogRnVuY3Rpb247IHJlamVjdDogRnVuY3Rpb247IHRpbWVvdXQ6IG51bWJlciB9PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjb25maWc6IE1vZGVsU2VsZWN0aW9uQ29uZmlnO1xuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBFdmVudExpc3RlbmVyW10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGVudmlyb25tZW50OiBFbnZpcm9ubWVudEluZm87ICAvLyBBZGQgZW52aXJvbm1lbnQgcHJvcGVydHlcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IE1vZGVsU2VsZWN0aW9uQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5lbnZpcm9ubWVudCA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7ICAvLyBJbml0aWFsaXplIGVudmlyb25tZW50XG4gICAgdGhpcy5zZXJ2ZXJVcmwgPSBjb25maWcuc2VydmVyX3VybDtcbiAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ0RldlBpcGUgRW52aXJvbm1lbnQ6JywgdGhpcy5lbnZpcm9ubWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRXZlbnQgc3lzdGVtIGltcGxlbWVudGF0aW9uXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXQoZXZlbnQ6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKGRhdGEpKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBlbnZpcm9ubWVudCBjb21wYXRpYmlsaXR5XG4gICAgICBpZiAoIXRoaXMuZW52aXJvbm1lbnQuaGFzSFRUUCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgdHJhbnNwb3J0IG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IGNvbm5lY3Rpb24gd2l0aCBlbnZpcm9ubWVudC1zcGVjaWZpYyBtZXRob2RcbiAgICAgIGF3YWl0IHRoaXMudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgIFxuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RlZCcsIHsgXG4gICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgIGVudmlyb25tZW50OiB0aGlzLmVudmlyb25tZW50LnBsYXRmb3JtLFxuICAgICAgICB0cmFuc3BvcnQ6ICdodHRwJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEZXZQaXBlIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgRGV2UGlwZSBjbGllbnQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnNlcnZlclVybH0vYXBpL3YxL2RldnBpcGUvaGVhbHRoYCwge1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDUwMDApIC8vIDUgc2Vjb25kIHRpbWVvdXRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRGV2UGlwZSBzZXJ2ZXIgbm90IGFjY2Vzc2libGU6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFRyeSBhbHRlcm5hdGl2ZSBoZWFsdGggY2hlY2sgZW5kcG9pbnRzXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnVHlwZUVycm9yJyAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdGYWlsZWQgdG8gZmV0Y2gnKSkge1xuICAgICAgICAvLyBUcnkgdGhlIG1haW4gYmFja2VuZCBoZWFsdGggZW5kcG9pbnQgYXMgZmFsbGJhY2tcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBmYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5zZXJ2ZXJVcmx9L3N0YXR1c2AsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCgzMDAwKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChmYWxsYmFja1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAvLyBCYWNrZW5kIGlzIHJ1bm5pbmcgYnV0IERldlBpcGUgZW5kcG9pbnQgbWlnaHQgbm90IGJlIGF2YWlsYWJsZVxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXZQaXBlIGVuZHBvaW50IG5vdCBhdmFpbGFibGUsIGJ1dCBiYWNrZW5kIGlzIGFjY2Vzc2libGUnKTtcbiAgICAgICAgICAgIHJldHVybjsgLy8gQWxsb3cgaW5pdGlhbGl6YXRpb24gdG8gY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgICAgICAvLyBCb3RoIGVuZHBvaW50cyBmYWlsZWRcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERldlBpcGUgc2VydmVyIG5vdCBhY2Nlc3NpYmxlIGFuZCBmYWxsYmFjayBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2VuZE1lc3NhZ2U8VD4odHlwZTogRGV2UGlwZU1lc3NhZ2VUeXBlLCBwYXlsb2FkOiBhbnksIHRpbWVvdXQ6IG51bWJlciA9IDMwMDAwKTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RldlBpcGUgY2xpZW50IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlSWQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCk7XG4gICAgY29uc3QgbWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UgPSB7XG4gICAgICBpZDogbWVzc2FnZUlkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB0eXBlLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIHNlbmRlcjogJ3ZhdWx0cGlsb3QtcGx1Z2luJyxcbiAgICAgIHJlY2lwaWVudDogJ2V2b2FnZW50eC1iYWNrZW5kJyxcbiAgICAgIHByaW9yaXR5OiAnbm9ybWFsJ1xuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dEhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2VJZCk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFJlcXVlc3QgdGltZW91dCBhZnRlciAke3RpbWVvdXR9bXNgKSk7XG4gICAgICB9LCB0aW1lb3V0KTtcblxuICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuc2V0KG1lc3NhZ2VJZCwge1xuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3QsXG4gICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRIYW5kbGVcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNlbmRNZXNzYWdlVG9TZXJ2ZXIobWVzc2FnZSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZUlkKTtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZVRvU2VydmVyKG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnNlcnZlclVybH0vYXBpL3YxL2RldnBpcGUvbWVzc2FnZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShtZXNzYWdlKVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEZXZQaXBlIHNlcnZlciBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGltbWVkaWF0ZSByZXNwb25zZVxuICAgICAgaWYgKHJlc3VsdC5yZXNwb25zZSAmJiByZXN1bHQucmVzcG9uc2UuaWQgPT09IG1lc3NhZ2UuaWQpIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ1JlcXVlc3QgPSB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5nZXQobWVzc2FnZS5pZCk7XG4gICAgICAgIGlmIChwZW5kaW5nUmVxdWVzdCkge1xuICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQocGVuZGluZ1JlcXVlc3QudGltZW91dCk7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2UuaWQpO1xuICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0LnJlc29sdmUocmVzdWx0LnJlc3BvbnNlLnBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEZXZQaXBlIG1lc3NhZ2Ugc2VudCBzdWNjZXNzZnVsbHk6JywgbWVzc2FnZS50eXBlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBEZXZQaXBlIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZU1lc3NhZ2VJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgbXNnXyR7RGF0ZS5ub3coKX1fJHt0aGlzLm1lc3NhZ2VJZCsrfWA7XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFJlamVjdCBhbGwgcGVuZGluZyByZXF1ZXN0c1xuICAgIGNvbnN0IHBlbmRpbmdFbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLnBlbmRpbmdSZXF1ZXN0cy5lbnRyaWVzKCkpO1xuICAgIGZvciAoY29uc3QgW2lkLCByZXF1ZXN0XSBvZiBwZW5kaW5nRW50cmllcykge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dChyZXF1ZXN0LnRpbWVvdXQpO1xuICAgICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdEZXZQaXBlIGNsaWVudCBkaXNjb25uZWN0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmNsZWFyKCk7XG5cbiAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7IHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcgfSk7XG4gIH1cblxuICBpc1JlYWR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzQ29ubmVjdGVkO1xuICB9XG5cbiAgZ2V0UGVuZGluZ1JlcXVlc3RDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zaXplO1xuICB9XG59XG4iLCIvLyBNb2RlbCBTZWxlY3Rpb24gVHlwZXMgZm9yIERldlBpcGUgRnJhbWV3b3JrIEludGVncmF0aW9uXG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxTZWxlY3Rpb25SZXF1ZXN0IHtcbiAgdGFza190eXBlOiBUYXNrVHlwZTtcbiAgcXVhbGl0eV9yZXF1aXJlbWVudD86IFF1YWxpdHlSZXF1aXJlbWVudDtcbiAgbWF4X2Nvc3Q/OiBudW1iZXI7XG4gIGNvbnRleHRfbGVuZ3RoPzogbnVtYmVyO1xuICBwcmVmZXJyZWRfcHJvdmlkZXJzPzogc3RyaW5nW107XG4gIHRpbWVvdXRfbXM/OiBudW1iZXI7XG4gIHVzZXJfcHJlZmVyZW5jZXM/OiBVc2VyUHJlZmVyZW5jZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxTZWxlY3Rpb25SZXNwb25zZSB7XG4gIHNlbGVjdGVkX21vZGVsOiBNb2RlbEluZm87XG4gIHJlYXNvbmluZzogc3RyaW5nO1xuICBmYWxsYmFja19tb2RlbHM6IE1vZGVsSW5mb1tdO1xuICBlc3RpbWF0ZWRfY29zdDogbnVtYmVyO1xuICBlc3RpbWF0ZWRfdGltZV9tczogbnVtYmVyO1xuICBzZWxlY3Rpb25fbWV0YWRhdGE6IHtcbiAgICBzZWxlY3Rpb25fdGltZV9tczogbnVtYmVyO1xuICAgIGZhY3RvcnNfY29uc2lkZXJlZDogc3RyaW5nW107XG4gICAgY29uZmlkZW5jZV9zY29yZTogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsSW5mbyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgcHJvdmlkZXI6IHN0cmluZztcbiAgY2FwYWJpbGl0aWVzOiBNb2RlbENhcGFiaWxpdHlbXTtcbiAgY29zdF9wZXJfdG9rZW46IG51bWJlcjtcbiAgbWF4X3Rva2VuczogbnVtYmVyO1xuICByZXNwb25zZV90aW1lX2F2Z19tczogbnVtYmVyO1xuICBhdmFpbGFiaWxpdHlfc2NvcmU6IG51bWJlcjtcbiAgcXVhbGl0eV9zY29yZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsQ2FwYWJpbGl0eSB7XG4gIHR5cGU6IFRhc2tUeXBlO1xuICBzY29yZTogbnVtYmVyO1xuICBzcGVjaWFsaXphdGlvbnM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbEhlYWx0aFN0YXR1cyB7XG4gIG1vZGVsX2lkOiBzdHJpbmc7XG4gIHN0YXR1czogJ2hlYWx0aHknIHwgJ2RlZ3JhZGVkJyB8ICdvZmZsaW5lJztcbiAgcmVzcG9uc2VfdGltZTogbnVtYmVyO1xuICBlcnJvcl9yYXRlOiBudW1iZXI7XG4gIGxhc3RfY2hlY2s6IHN0cmluZztcbiAgYXZhaWxhYmlsaXR5X3BlcmNlbnRhZ2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyUHJlZmVyZW5jZXMge1xuICBwcmlvcml0eTogJ3BlcmZvcm1hbmNlJyB8ICdjb3N0JyB8ICdiYWxhbmNlZCc7XG4gIG1heF9jb3N0X3Blcl9yZXF1ZXN0OiBudW1iZXI7XG4gIHByZWZlcnJlZF9wcm92aWRlcnM6IHN0cmluZ1tdO1xuICBmYWxsYmFja19lbmFibGVkOiBib29sZWFuO1xuICBxdWFsaXR5X3RocmVzaG9sZDogbnVtYmVyO1xuICB0aW1lb3V0X3ByZWZlcmVuY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbFBlcmZvcm1hbmNlTWV0cmljcyB7XG4gIG1vZGVsX2lkOiBzdHJpbmc7XG4gIHRhc2tfdHlwZTogVGFza1R5cGU7XG4gIHN1Y2Nlc3NfcmF0ZTogbnVtYmVyO1xuICBhdmVyYWdlX3Jlc3BvbnNlX3RpbWU6IG51bWJlcjtcbiAgYXZlcmFnZV9jb3N0OiBudW1iZXI7XG4gIHVzZXJfc2F0aXNmYWN0aW9uX3Njb3JlOiBudW1iZXI7XG4gIGxhc3RfdXBkYXRlZDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBUYXNrVHlwZSA9IFxuICB8ICd0ZXh0LWdlbmVyYXRpb24nXG4gIHwgJ2NvZGUtZ2VuZXJhdGlvbidcbiAgfCAnY2hhdCdcbiAgfCAnc3VtbWFyaXphdGlvbidcbiAgfCAndHJhbnNsYXRpb24nXG4gIHwgJ2VtYmVkZGluZydcbiAgfCAnZWRpdGluZydcbiAgfCAnYW5hbHlzaXMnXG4gIHwgJ3BsYW5uaW5nJ1xuICB8ICd3b3JrZmxvdy1leGVjdXRpb24nO1xuXG5leHBvcnQgdHlwZSBRdWFsaXR5UmVxdWlyZW1lbnQgPSAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERldlBpcGVNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIHR5cGU6IERldlBpcGVNZXNzYWdlVHlwZTtcbiAgcGF5bG9hZDogYW55O1xuICBzZW5kZXI6IHN0cmluZztcbiAgcmVjaXBpZW50OiBzdHJpbmc7XG4gIHByaW9yaXR5OiAnbG93JyB8ICdub3JtYWwnIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJztcbiAgZXhwaXJlc19hdD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgRGV2UGlwZU1lc3NhZ2VUeXBlID0gXG4gIHwgJ21vZGVsLXNlbGVjdGlvbi1yZXF1ZXN0J1xuICB8ICdtb2RlbC1zZWxlY3Rpb24tcmVzcG9uc2UnXG4gIHwgJ2hlYWx0aC1jaGVjay1yZXF1ZXN0J1xuICB8ICdoZWFsdGgtY2hlY2stcmVzcG9uc2UnXG4gIHwgJ3BlcmZvcm1hbmNlLW1ldHJpY3MtcmVxdWVzdCdcbiAgfCAncGVyZm9ybWFuY2UtbWV0cmljcy1yZXNwb25zZSdcbiAgfCAncHJlZmVyZW5jZXMtdXBkYXRlJ1xuICB8ICdzdGF0dXMtdXBkYXRlJ1xuICB8ICdlcnJvci1yZXBvcnQnO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxTZWxlY3Rpb25FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIGNvZGU6ICdOT19IRUFMVEhZX01PREVMUycgfCAnQlVER0VUX0VYQ0VFREVEJyB8ICdUSU1FT1VUJyB8ICdJTlZBTElEX1JFUVVFU1QnIHwgJ1NFUlZJQ0VfVU5BVkFJTEFCTEUnO1xuICBwdWJsaWMgZGV0YWlscz86IGFueTtcbiAgcHVibGljIHN1Z2dlc3Rpb25zPzogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29kZTogJ05PX0hFQUxUSFlfTU9ERUxTJyB8ICdCVURHRVRfRVhDRUVERUQnIHwgJ1RJTUVPVVQnIHwgJ0lOVkFMSURfUkVRVUVTVCcgfCAnU0VSVklDRV9VTkFWQUlMQUJMRScsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGRldGFpbHM/OiBhbnksXG4gICAgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXVxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnTW9kZWxTZWxlY3Rpb25FcnJvcic7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsU2VsZWN0aW9uRXZlbnQge1xuICB0eXBlOiAnbW9kZWwtc2VsZWN0ZWQnIHwgJ2hlYWx0aC11cGRhdGVkJyB8ICdwZXJmb3JtYW5jZS1tZXRyaWNzJyB8ICdwcmVmZXJlbmNlcy11cGRhdGVkJyB8ICdjb25uZWN0ZWQnIHwgJ2Rpc2Nvbm5lY3RlZCc7XG4gIGRhdGE6IGFueTtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbi8vIENvbmZpZ3VyYXRpb24gdHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxTZWxlY3Rpb25Db25maWcge1xuICBkZXZwaXBlX3BhdGg6IHN0cmluZztcbiAgc2VydmVyX3VybDogc3RyaW5nO1xuICBtb25pdG9yaW5nX2ludGVydmFsOiBudW1iZXI7XG4gIGZhbGxiYWNrX2VuYWJsZWQ6IGJvb2xlYW47XG4gIGNhY2hlX2R1cmF0aW9uOiBudW1iZXI7XG4gIHJldHJ5X2F0dGVtcHRzOiBudW1iZXI7XG4gIHRpbWVvdXQ6IG51bWJlcjtcbiAgZGVidWdfbW9kZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbFByb3ZpZGVyQ29uZmlnIHtcbiAgbmFtZTogc3RyaW5nO1xuICBlbmFibGVkOiBib29sZWFuO1xuICBhcGlfa2V5Pzogc3RyaW5nO1xuICBiYXNlX3VybD86IHN0cmluZztcbiAgbWF4X3Rva2Vucz86IG51bWJlcjtcbiAgZGVmYXVsdF90ZW1wZXJhdHVyZT86IG51bWJlcjtcbiAgY3VzdG9tX3NldHRpbmdzPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cbiIsImltcG9ydCB7IERldlBpcGVDbGllbnQgfSBmcm9tICcuLi9kZXZwaXBlL0RldlBpcGVDbGllbnQnO1xuaW1wb3J0IHsgXG4gIE1vZGVsU2VsZWN0aW9uUmVxdWVzdCwgXG4gIE1vZGVsU2VsZWN0aW9uUmVzcG9uc2UsIFxuICBNb2RlbEhlYWx0aFN0YXR1cywgXG4gIFVzZXJQcmVmZXJlbmNlcywgXG4gIE1vZGVsUGVyZm9ybWFuY2VNZXRyaWNzLFxuICBNb2RlbFNlbGVjdGlvbkNvbmZpZyxcbiAgTW9kZWxTZWxlY3Rpb25FcnJvcixcbiAgTW9kZWxTZWxlY3Rpb25FdmVudCBcbn0gZnJvbSAnLi4vdHlwZXMvTW9kZWxTZWxlY3Rpb24nO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxTZWxlY3Rpb25TZXJ2aWNlIHtcbiAgcHJpdmF0ZSBkZXZQaXBlQ2xpZW50OiBEZXZQaXBlQ2xpZW50O1xuICBwcml2YXRlIGNvbmZpZzogTW9kZWxTZWxlY3Rpb25Db25maWc7XG4gIHByaXZhdGUgdXNlclByZWZlcmVuY2VzOiBVc2VyUHJlZmVyZW5jZXM7XG4gIHByaXZhdGUgY2FjaGVkSGVhbHRoOiBNb2RlbEhlYWx0aFN0YXR1c1tdID0gW107XG4gIHByaXZhdGUgbGFzdEhlYWx0aFVwZGF0ZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogTWFwPHN0cmluZywgRnVuY3Rpb25bXT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3Ioc2VydmVyVXJsOiBzdHJpbmcsIGRldlBpcGVQYXRoOiBzdHJpbmcgPSAnJywgb3B0aW9uczogUGFydGlhbDxNb2RlbFNlbGVjdGlvbkNvbmZpZz4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgZGV2cGlwZV9wYXRoOiBkZXZQaXBlUGF0aCxcbiAgICAgIHNlcnZlcl91cmw6IHNlcnZlclVybCxcbiAgICAgIG1vbml0b3JpbmdfaW50ZXJ2YWw6IG9wdGlvbnMubW9uaXRvcmluZ19pbnRlcnZhbCB8fCAzMDAwMCxcbiAgICAgIGZhbGxiYWNrX2VuYWJsZWQ6IG9wdGlvbnMuZmFsbGJhY2tfZW5hYmxlZCAhPT0gZmFsc2UsXG4gICAgICBjYWNoZV9kdXJhdGlvbjogb3B0aW9ucy5jYWNoZV9kdXJhdGlvbiB8fCAzMDAwMDAsIC8vIDUgbWludXRlc1xuICAgICAgcmV0cnlfYXR0ZW1wdHM6IG9wdGlvbnMucmV0cnlfYXR0ZW1wdHMgfHwgMyxcbiAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCB8fCAzMDAwMCxcbiAgICAgIGRlYnVnX21vZGU6IG9wdGlvbnMuZGVidWdfbW9kZSB8fCBmYWxzZVxuICAgIH07XG5cbiAgICB0aGlzLmRldlBpcGVDbGllbnQgPSBuZXcgRGV2UGlwZUNsaWVudCh0aGlzLmNvbmZpZyk7XG4gICAgXG4gICAgLy8gRGVmYXVsdCB1c2VyIHByZWZlcmVuY2VzXG4gICAgdGhpcy51c2VyUHJlZmVyZW5jZXMgPSB7XG4gICAgICBwcmlvcml0eTogJ2JhbGFuY2VkJyxcbiAgICAgIG1heF9jb3N0X3Blcl9yZXF1ZXN0OiAwLjUwLFxuICAgICAgcHJlZmVycmVkX3Byb3ZpZGVyczogW10sXG4gICAgICBmYWxsYmFja19lbmFibGVkOiB0cnVlLFxuICAgICAgcXVhbGl0eV90aHJlc2hvbGQ6IDAuNyxcbiAgICAgIHRpbWVvdXRfcHJlZmVyZW5jZTogMzAwMDBcbiAgICB9O1xuXG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy5kZXZQaXBlQ2xpZW50Lm9uKCdjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RlZCcsIHsgc3RhdHVzOiAnY29ubmVjdGVkJyB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudC5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7IHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmRldlBpcGVDbGllbnQub24oJ2hlYWx0aC11cGRhdGVkJywgKGhlYWx0aERhdGE6IE1vZGVsSGVhbHRoU3RhdHVzW10pID0+IHtcbiAgICAgIHRoaXMuY2FjaGVkSGVhbHRoID0gaGVhbHRoRGF0YTtcbiAgICAgIHRoaXMubGFzdEhlYWx0aFVwZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICB0aGlzLmVtaXQoJ2hlYWx0aC11cGRhdGVkJywgaGVhbHRoRGF0YSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmRldlBpcGVDbGllbnQub24oJ3BlcmZvcm1hbmNlLW1ldHJpY3MnLCAobWV0cmljczogTW9kZWxQZXJmb3JtYW5jZU1ldHJpY3NbXSkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdwZXJmb3JtYW5jZS1tZXRyaWNzJywgbWV0cmljcyk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmRldlBpcGVDbGllbnQuaW5pdGlhbGl6ZSgpO1xuICAgICAgXG4gICAgICAvLyBMb2FkIGluaXRpYWwgaGVhbHRoIHN0YXR1c1xuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoTW9kZWxIZWFsdGgoKTtcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgaGVhbHRoIG1vbml0b3JpbmdcbiAgICAgIHRoaXMuc3RhcnRIZWFsdGhNb25pdG9yaW5nKCk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbFNlbGVjdGlvblNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGluaXRpYWxpemUgTW9kZWxTZWxlY3Rpb25TZXJ2aWNlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbGVjdE1vZGVsKHJlcXVlc3Q6IE1vZGVsU2VsZWN0aW9uUmVxdWVzdCk6IFByb21pc2U8TW9kZWxTZWxlY3Rpb25SZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5wZXJmb3JtU2VsZWN0aW9uKHJlcXVlc3QpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuZmFsbGJhY2tfZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mYWxsYmFja1NlbGVjdGlvbihyZXF1ZXN0LCBlcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1TZWxlY3Rpb24ocmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0KTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgaWYgKCF0aGlzLmRldlBpcGVDbGllbnQuaXNSZWFkeSgpKSB7XG4gICAgICB0aHJvdyBuZXcgTW9kZWxTZWxlY3Rpb25FcnJvcignTk9fSEVBTFRIWV9NT0RFTFMnLCAnRGV2UGlwZSBjbGllbnQgbm90IGNvbm5lY3RlZCcsIHt9LCBbJ0NoZWNrIHNlcnZlciBjb25uZWN0aW9uJywgJ1JldHJ5IGluaXRpYWxpemF0aW9uJ10pO1xuICAgIH1cblxuICAgIC8vIEFkZCB1c2VyIHByZWZlcmVuY2VzIHRvIHJlcXVlc3RcbiAgICBjb25zdCBlbmhhbmNlZFJlcXVlc3QgPSB7XG4gICAgICAuLi5yZXF1ZXN0LFxuICAgICAgdXNlcl9wcmVmZXJlbmNlczogdGhpcy51c2VyUHJlZmVyZW5jZXMsXG4gICAgICB0aW1lb3V0X21zOiByZXF1ZXN0LnRpbWVvdXRfbXMgfHwgdGhpcy5jb25maWcudGltZW91dFxuICAgIH07XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5zZW5kTWVzc2FnZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPihcbiAgICAgICdtb2RlbC1zZWxlY3Rpb24tcmVxdWVzdCcsXG4gICAgICBlbmhhbmNlZFJlcXVlc3QsXG4gICAgICB0aGlzLmNvbmZpZy50aW1lb3V0XG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmFsbGJhY2tTZWxlY3Rpb24oXG4gICAgcmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0LCBcbiAgICBvcmlnaW5hbEVycm9yOiBhbnlcbiAgKTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgY29uc29sZS53YXJuKCdNb2RlbCBzZWxlY3Rpb24gZmFpbGVkLCB1c2luZyBmYWxsYmFjazonLCBvcmlnaW5hbEVycm9yKTtcblxuICAgIC8vIFRyeSBjYWNoZWQgc2VsZWN0aW9uIGZpcnN0XG4gICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWRTZWxlY3Rpb24ocmVxdWVzdCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG5cbiAgICAvLyBVc2Ugc3RhdGljIHJ1bGVzIGFzIGxhc3QgcmVzb3J0XG4gICAgcmV0dXJuIHRoaXMuc3RhdGljTW9kZWxTZWxlY3Rpb24ocmVxdWVzdCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpY01vZGVsU2VsZWN0aW9uKHJlcXVlc3Q6IE1vZGVsU2VsZWN0aW9uUmVxdWVzdCk6IE1vZGVsU2VsZWN0aW9uUmVzcG9uc2Uge1xuICAgIC8vIFNpbXBsZSBzdGF0aWMgcnVsZXMgZm9yIGZhbGxiYWNrXG4gICAgY29uc3QgZGVmYXVsdE1vZGVsczogeyBba2V5OiBzdHJpbmddOiB7IG5hbWU6IHN0cmluZzsgY29zdDogbnVtYmVyIH0gfSA9IHtcbiAgICAgICd0ZXh0LWdlbmVyYXRpb24nOiB7IG5hbWU6ICdncHQtMy41LXR1cmJvJywgY29zdDogMC4wMDIgfSxcbiAgICAgICdjb2RlLWdlbmVyYXRpb24nOiB7IG5hbWU6ICdncHQtNCcsIGNvc3Q6IDAuMDMgfSxcbiAgICAgICdjaGF0JzogeyBuYW1lOiAnZ3B0LTMuNS10dXJibycsIGNvc3Q6IDAuMDAyIH0sXG4gICAgICAnc3VtbWFyaXphdGlvbic6IHsgbmFtZTogJ2dwdC0zLjUtdHVyYm8nLCBjb3N0OiAwLjAwMiB9LFxuICAgICAgJ3RyYW5zbGF0aW9uJzogeyBuYW1lOiAnZ3B0LTMuNS10dXJibycsIGNvc3Q6IDAuMDAyIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGVmYXVsdE1vZGVsID0gZGVmYXVsdE1vZGVsc1tyZXF1ZXN0LnRhc2tfdHlwZV0gfHwgZGVmYXVsdE1vZGVsc1sndGV4dC1nZW5lcmF0aW9uJ107XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2VsZWN0ZWRfbW9kZWw6IHtcbiAgICAgICAgaWQ6IGRlZmF1bHRNb2RlbC5uYW1lLFxuICAgICAgICBuYW1lOiBkZWZhdWx0TW9kZWwubmFtZSxcbiAgICAgICAgcHJvdmlkZXI6ICdvcGVuYWknLFxuICAgICAgICBjYXBhYmlsaXRpZXM6IFt7IHR5cGU6IHJlcXVlc3QudGFza190eXBlLCBzY29yZTogMC44IH1dLFxuICAgICAgICBjb3N0X3Blcl90b2tlbjogZGVmYXVsdE1vZGVsLmNvc3QsXG4gICAgICAgIG1heF90b2tlbnM6IDQwMDAsXG4gICAgICAgIHJlc3BvbnNlX3RpbWVfYXZnX21zOiAyMDAwLFxuICAgICAgICBhdmFpbGFiaWxpdHlfc2NvcmU6IDAuOSxcbiAgICAgICAgcXVhbGl0eV9zY29yZTogMC44XG4gICAgICB9LFxuICAgICAgcmVhc29uaW5nOiAnRmFsbGJhY2sgc2VsZWN0aW9uIGR1ZSB0byBzZXJ2aWNlIHVuYXZhaWxhYmlsaXR5JyxcbiAgICAgIGZhbGxiYWNrX21vZGVsczogW10sXG4gICAgICBlc3RpbWF0ZWRfY29zdDogZGVmYXVsdE1vZGVsLmNvc3QgKiAxMDAsIC8vIEVzdGltYXRlIGZvciAxMDAgdG9rZW5zXG4gICAgICBlc3RpbWF0ZWRfdGltZV9tczogMjAwMCxcbiAgICAgIHNlbGVjdGlvbl9tZXRhZGF0YToge1xuICAgICAgICBzZWxlY3Rpb25fdGltZV9tczogMCxcbiAgICAgICAgZmFjdG9yc19jb25zaWRlcmVkOiBbJ2ZhbGxiYWNrJ10sXG4gICAgICAgIGNvbmZpZGVuY2Vfc2NvcmU6IDAuNVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldENhY2hlZFNlbGVjdGlvbihyZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QpOiBNb2RlbFNlbGVjdGlvblJlc3BvbnNlIHwgbnVsbCB7XG4gICAgLy8gSW1wbGVtZW50YXRpb24gb2YgY2FjaGUgbG9va3VwXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIG51bGwgKG5vIGNhY2hlKVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gT3JpZ2luYWwgc2VsZWN0TW9kZWwgbWV0aG9kIHJlbmFtZWQgdG8gcGVyZm9ybVNlbGVjdGlvbiAoc2VlIGFib3ZlKVxuICBhc3luYyBzZWxlY3RNb2RlbF9PTEQocmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0KTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgaWYgKCF0aGlzLmRldlBpcGVDbGllbnQuaXNSZWFkeSgpKSB7XG4gICAgICB0aHJvdyBuZXcgTW9kZWxTZWxlY3Rpb25FcnJvcignTk9fSEVBTFRIWV9NT0RFTFMnLCAnRGV2UGlwZSBjbGllbnQgbm90IGNvbm5lY3RlZCcsIHt9LCBbJ0NoZWNrIHNlcnZlciBjb25uZWN0aW9uJywgJ1JldHJ5IGluaXRpYWxpemF0aW9uJ10pO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBBZGQgdXNlciBwcmVmZXJlbmNlcyB0byByZXF1ZXN0XG4gICAgICBjb25zdCBlbmhhbmNlZFJlcXVlc3QgPSB7XG4gICAgICAgIC4uLnJlcXVlc3QsXG4gICAgICAgIHVzZXJfcHJlZmVyZW5jZXM6IHRoaXMudXNlclByZWZlcmVuY2VzLFxuICAgICAgICB0aW1lb3V0X21zOiByZXF1ZXN0LnRpbWVvdXRfbXMgfHwgdGhpcy5jb25maWcudGltZW91dFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmRldlBpcGVDbGllbnQuc2VuZE1lc3NhZ2U8TW9kZWxTZWxlY3Rpb25SZXNwb25zZT4oXG4gICAgICAgICdtb2RlbC1zZWxlY3Rpb24tcmVxdWVzdCcsXG4gICAgICAgIGVuaGFuY2VkUmVxdWVzdCxcbiAgICAgICAgcmVxdWVzdC50aW1lb3V0X21zIHx8IHRoaXMuY29uZmlnLnRpbWVvdXRcbiAgICAgICk7XG5cbiAgICAgIC8vIEVtaXQgc2VsZWN0aW9uIGV2ZW50XG4gICAgICB0aGlzLmVtaXQoJ21vZGVsLXNlbGVjdGVkJywgcmVzcG9uc2UpO1xuXG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgc2VsZWN0ZWQ6JywgcmVzcG9uc2Uuc2VsZWN0ZWRfbW9kZWwubmFtZSwgJ2ZvciB0YXNrOicsIHJlcXVlc3QudGFza190eXBlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IE1vZGVsU2VsZWN0aW9uRXJyb3IoJ1RJTUVPVVQnLCAnTW9kZWwgc2VsZWN0aW9uIHJlcXVlc3QgdGltZWQgb3V0JywgeyBvcmlnaW5hbEVycm9yOiBlcnJvciB9LCBbJ0luY3JlYXNlIHRpbWVvdXQnLCAnQ2hlY2sgc2VydmVyIHBlcmZvcm1hbmNlJ10pO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2J1ZGdldCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2Nvc3QnKSkge1xuICAgICAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdCVURHRVRfRVhDRUVERUQnLCAnUmVxdWVzdCBleGNlZWRzIGJ1ZGdldCBsaW1pdHMnLCB7IG9yaWdpbmFsRXJyb3I6IGVycm9yIH0sIFsnSW5jcmVhc2UgYnVkZ2V0JywgJ1VzZSBsb3dlciBjb3N0IG1vZGVscyddKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBuZXcgTW9kZWxTZWxlY3Rpb25FcnJvcignU0VSVklDRV9VTkFWQUlMQUJMRScsICdNb2RlbCBzZWxlY3Rpb24gc2VydmljZSB1bmF2YWlsYWJsZScsIHsgb3JpZ2luYWxFcnJvcjogZXJyb3IgfSwgWydDaGVjayBzZXJ2ZXIgc3RhdHVzJywgJ1JldHJ5IHJlcXVlc3QnXSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0TW9kZWxIZWFsdGgoKTogUHJvbWlzZTxNb2RlbEhlYWx0aFN0YXR1c1tdPiB7XG4gICAgLy8gUmV0dXJuIGNhY2hlZCBoZWFsdGggaWYgcmVjZW50XG4gICAgaWYgKHRoaXMuY2FjaGVkSGVhbHRoLmxlbmd0aCA+IDAgJiYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RIZWFsdGhVcGRhdGUpIDwgdGhpcy5jb25maWcuY2FjaGVfZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlZEhlYWx0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWZyZXNoTW9kZWxIZWFsdGgoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVmcmVzaE1vZGVsSGVhbHRoKCk6IFByb21pc2U8TW9kZWxIZWFsdGhTdGF0dXNbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCB0aGlzLmRldlBpcGVDbGllbnQuc2VuZE1lc3NhZ2U8TW9kZWxIZWFsdGhTdGF0dXNbXT4oXG4gICAgICAgICdoZWFsdGgtY2hlY2stcmVxdWVzdCcsXG4gICAgICAgIHt9LFxuICAgICAgICAxMDAwMCAvLyBTaG9ydCB0aW1lb3V0IGZvciBoZWFsdGggY2hlY2tzXG4gICAgICApO1xuXG4gICAgICB0aGlzLmNhY2hlZEhlYWx0aCA9IGhlYWx0aDtcbiAgICAgIHRoaXMubGFzdEhlYWx0aFVwZGF0ZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIHJldHVybiBoZWFsdGg7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHJlZnJlc2ggbW9kZWwgaGVhbHRoOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmNhY2hlZEhlYWx0aDsgLy8gUmV0dXJuIGNhY2hlZCBkYXRhIG9uIGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUHJlZmVyZW5jZXMocHJlZmVyZW5jZXM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMudXNlclByZWZlcmVuY2VzID0ge1xuICAgICAgLi4udGhpcy51c2VyUHJlZmVyZW5jZXMsXG4gICAgICAuLi5wcmVmZXJlbmNlc1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5kZXZQaXBlQ2xpZW50LnNlbmRNZXNzYWdlKFxuICAgICAgICAncHJlZmVyZW5jZXMtdXBkYXRlJyxcbiAgICAgICAgdGhpcy51c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgIDUwMDBcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuZW1pdCgncHJlZmVyZW5jZXMtdXBkYXRlZCcsIHRoaXMudXNlclByZWZlcmVuY2VzKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgcHJlZmVyZW5jZXMgdXBkYXRlZDonLCB0aGlzLnVzZXJQcmVmZXJlbmNlcyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHN5bmMgcHJlZmVyZW5jZXMgd2l0aCBzZXJ2ZXI6JywgZXJyb3IpO1xuICAgICAgfVxuICAgICAgLy8gQ29udGludWUgd2l0aCBsb2NhbCBwcmVmZXJlbmNlcyBldmVuIGlmIHNlcnZlciBzeW5jIGZhaWxzXG4gICAgfVxuICB9XG5cbiAgZ2V0UHJlZmVyZW5jZXMoKTogVXNlclByZWZlcmVuY2VzIHtcbiAgICByZXR1cm4geyAuLi50aGlzLnVzZXJQcmVmZXJlbmNlcyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydEhlYWx0aE1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29uZmlnLm1vbml0b3JpbmdfaW50ZXJ2YWwgPiAwKSB7XG4gICAgICBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoTW9kZWxIZWFsdGgoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdIZWFsdGggbW9uaXRvcmluZyBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgdGhpcy5jb25maWcubW9uaXRvcmluZ19pbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRXZlbnQgc3lzdGVtXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVycy5oYXMoZXZlbnQpKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnNldChldmVudCwgW10pO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCkhLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgb2ZmKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFdmVudCBsaXN0ZW5lciBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBRdWljayBzZWxlY3Rpb24gbWV0aG9kcyBmb3IgY29tbW9uIHVzZSBjYXNlc1xuICBhc3luYyBzZWxlY3RGb3JUYXNrKHRhc2tUeXBlOiBzdHJpbmcsIHF1YWxpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgPSAnbWVkaXVtJyk6IFByb21pc2U8TW9kZWxTZWxlY3Rpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdE1vZGVsKHtcbiAgICAgIHRhc2tfdHlwZTogdGFza1R5cGUgYXMgYW55LFxuICAgICAgcXVhbGl0eV9yZXF1aXJlbWVudDogcXVhbGl0eVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2VsZWN0Q29zdE9wdGltaXplZCh0YXNrVHlwZTogc3RyaW5nLCBtYXhDb3N0OiBudW1iZXIgPSAwLjAxKTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0TW9kZWwoe1xuICAgICAgdGFza190eXBlOiB0YXNrVHlwZSBhcyBhbnksXG4gICAgICBxdWFsaXR5X3JlcXVpcmVtZW50OiAnbWVkaXVtJyxcbiAgICAgIG1heF9jb3N0OiBtYXhDb3N0XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzZWxlY3RIaWdoUGVyZm9ybWFuY2UodGFza1R5cGU6IHN0cmluZyk6IFByb21pc2U8TW9kZWxTZWxlY3Rpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdE1vZGVsKHtcbiAgICAgIHRhc2tfdHlwZTogdGFza1R5cGUgYXMgYW55LFxuICAgICAgcXVhbGl0eV9yZXF1aXJlbWVudDogJ2hpZ2gnXG4gICAgfSk7XG4gIH1cblxuICAvLyBVdGlsaXR5IG1ldGhvZHNcbiAgaXNDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGV2UGlwZUNsaWVudC5pc1JlYWR5KCk7XG4gIH1cblxuICBnZXRDb25maWcoKTogTW9kZWxTZWxlY3Rpb25Db25maWcge1xuICAgIHJldHVybiB7IC4uLnRoaXMuY29uZmlnIH07XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5kaXNjb25uZWN0KCk7XG4gIH1cbn1cbiIsIi8qKlxuICogTW9kYWwgQ2xhc3NlcyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRNYW5hZ2VtZW50Q2xpZW50IH0gZnJvbSAnLi92YXVsdC1hcGktY2xpZW50JztcbmltcG9ydCB7IFxuICBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlLCBcbiAgVmF1bHRTZWFyY2hSZXNwb25zZSwgXG4gIEZpbGVPcGVyYXRpb25SZXF1ZXN0LFxuICBTZWFyY2hUeXBlLFxuICBWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlXG59IGZyb20gJy4vdmF1bHQtdHlwZXMnO1xuXG4vLyA9PT0gVkFVTFQgU1RSVUNUVVJFIE1PREFMID09PVxuXG5leHBvcnQgY2xhc3MgVmF1bHRTdHJ1Y3R1cmVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgcHJpdmF0ZSB2YXVsdENsaWVudDogVmF1bHRNYW5hZ2VtZW50Q2xpZW50O1xuICBwcml2YXRlIGZvY3VzUGF0aD86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBwbHVnaW4udmF1bHRDbGllbnQ7XG4gIH1cblxuICBzZXRGb2N1c1BhdGgocGF0aDogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5mb2N1c1BhdGggPSBwYXRoO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHQtc3RydWN0dXJlLW1vZGFsJyk7XG4gICAgXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdWYXVsdCBTdHJ1Y3R1cmUgQW5hbHlzaXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2gnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBMb2FkaW5nIHN0YXRlXG4gICAgY29uc3QgbG9hZGluZ0VsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LWxvYWRpbmcnIH0pO1xuICAgIGxvYWRpbmdFbC5zZXRUZXh0KCfwn5SNIEFuYWx5emluZyB2YXVsdCBzdHJ1Y3R1cmUuLi4nKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHtcbiAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSxcbiAgICAgICAgbWF4X2RlcHRoOiA1XG4gICAgICB9KTtcblxuICAgICAgbG9hZGluZ0VsLnJlbW92ZSgpO1xuICAgICAgdGhpcy5yZW5kZXJTdHJ1Y3R1cmUoY29udGVudEVsLCBzdHJ1Y3R1cmUpO1xuICAgICAgXG4gICAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGxvYWRpbmdFbC5yZW1vdmUoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0IHN0cnVjdHVyZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnTm90IEZvdW5kJykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJzQwNCcpKSB7XG4gICAgICAgIC8vIFNlcnZlciBkb2Vzbid0IGhhdmUgdmF1bHQgbWFuYWdlbWVudCAtIHNob3cgZmFsbGJhY2tcbiAgICAgICAgdGhpcy5yZW5kZXJGYWxsYmFja1N0cnVjdHVyZShjb250ZW50RWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXIgZXJyb3IgLSBzaG93IHJldHJ5IG9wdGlvblxuICAgICAgICBjb25zdCBlcnJvckVsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LWVycm9yJyB9KTtcbiAgICAgICAgZXJyb3JFbC5zZXRUZXh0KCfinYwgRmFpbGVkIHRvIGxvYWQgdmF1bHQgc3RydWN0dXJlJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXRyeUJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICB0ZXh0OiAnUmV0cnknLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICByZXRyeUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5vbk9wZW4oKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmVmcmVzaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLm9uT3BlbigpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0cnVjdHVyZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBzdHJ1Y3R1cmU6IFZhdWx0U3RydWN0dXJlUmVzcG9uc2UpIHtcbiAgICAvLyBTdGF0cyBvdmVydmlld1xuICAgIGNvbnN0IHN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtc3RhdHMnIH0pO1xuICAgIHN0YXRzRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInN0YXQtZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWljb25cIj7wn5OBPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPkZpbGVzPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7c3RydWN0dXJlLnRvdGFsX2ZpbGVzfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfk4I8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+Rm9sZGVyczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3N0cnVjdHVyZS50b3RhbF9mb2xkZXJzfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfkr48L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+U2l6ZTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4keyhzdHJ1Y3R1cmUudG90YWxfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQjwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8gRm9sZGVyIHRyZWVcbiAgICBjb25zdCB0cmVlQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LXRyZWUtY29udGFpbmVyJyB9KTtcbiAgICB0cmVlQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZvbGRlciBTdHJ1Y3R1cmUnIH0pO1xuICAgIFxuICAgIGNvbnN0IHRyZWVFbCA9IHRyZWVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtdHJlZScgfSk7XG4gICAgdGhpcy5yZW5kZXJGb2xkZXIodHJlZUVsLCBzdHJ1Y3R1cmUuc3RydWN0dXJlLCAwKTtcblxuICAgIC8vIFJlY2VudCBmaWxlc1xuICAgIGlmIChzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHJlY2VudENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZXMtY29udGFpbmVyJyB9KTtcbiAgICAgIHJlY2VudENvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZWNlbnRFbCA9IHJlY2VudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZXMnIH0pO1xuICAgICAgc3RydWN0dXJlLnJlY2VudF9maWxlcy5zbGljZSgwLCAxMCkuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgY29uc3QgZmlsZUVsID0gcmVjZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWZpbGUnIH0pO1xuICAgICAgICBmaWxlRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+8J+ThDwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtbmFtZVwiPiR7ZmlsZS5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtZGF0ZVwiPiR7bmV3IERhdGUoZmlsZS5tb2RpZmllZCkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9PC9zcGFuPlxuICAgICAgICBgO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gT3JwaGFuZWQgZmlsZXNcbiAgICBpZiAoc3RydWN0dXJlLm9ycGhhbmVkX2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG9ycGhhbmVkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ29ycGhhbmVkLWZpbGVzLWNvbnRhaW5lcicgfSk7XG4gICAgICBvcnBoYW5lZENvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfimqDvuI8gT3JwaGFuZWQgRmlsZXMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBvcnBoYW5lZEVsID0gb3JwaGFuZWRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3JwaGFuZWQtZmlsZXMnIH0pO1xuICAgICAgc3RydWN0dXJlLm9ycGhhbmVkX2ZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IG9ycGhhbkVsID0gb3JwaGFuZWRFbC5jcmVhdGVEaXYoeyBjbHM6ICdvcnBoYW5lZC1maWxlJyB9KTtcbiAgICAgICAgb3JwaGFuRWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+8J+Ulzwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtcGF0aFwiPiR7ZmlsZS5wYXRofTwvc3Bhbj5cbiAgICAgICAgYDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRm9sZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZvbGRlcjogYW55LCBsZXZlbDogbnVtYmVyKSB7XG4gICAgY29uc3QgZm9sZGVyRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6ICdmb2xkZXItaXRlbScsXG4gICAgICBhdHRyOiB7ICdkYXRhLWxldmVsJzogbGV2ZWwudG9TdHJpbmcoKSB9XG4gICAgfSk7XG4gICAgXG4gICAgZm9sZGVyRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPHNwYW4gY2xhc3M9XCJmb2xkZXItdG9nZ2xlXCI+4pa2PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJmb2xkZXItaWNvblwiPvCfk4E8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci1uYW1lXCI+JHtmb2xkZXIubmFtZX08L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci1jb3VudFwiPigke2ZvbGRlci5jaGlsZHJlbi5sZW5ndGh9KTwvc3Bhbj5cbiAgICBgO1xuXG4gICAgLy8gQWRkIGNoaWxkcmVuIGNvbnRhaW5lclxuICAgIGNvbnN0IGNoaWxkcmVuRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6ICdmb2xkZXItY2hpbGRyZW4nLFxuICAgICAgYXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IG5vbmU7JyB9XG4gICAgfSk7XG5cbiAgICAvLyBUb2dnbGUgZnVuY3Rpb25hbGl0eVxuICAgIGNvbnN0IHRvZ2dsZUVsID0gZm9sZGVyRWwucXVlcnlTZWxlY3RvcignLmZvbGRlci10b2dnbGUnKSBhcyBIVE1MRWxlbWVudDtcbiAgICB0b2dnbGVFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXNPcGVuID0gY2hpbGRyZW5FbC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICBjaGlsZHJlbkVsLnN0eWxlLmRpc3BsYXkgPSBpc09wZW4gPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgdG9nZ2xlRWwudGV4dENvbnRlbnQgPSBpc09wZW4gPyAn4pa2JyA6ICfilrwnO1xuICAgIH07XG5cbiAgICAvLyBSZW5kZXIgY2hpbGRyZW5cbiAgICBmb2xkZXIuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4ge1xuICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdmb2xkZXInKSB7XG4gICAgICAgIHRoaXMucmVuZGVyRm9sZGVyKGNoaWxkcmVuRWwsIGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZmlsZUVsID0gY2hpbGRyZW5FbC5jcmVhdGVEaXYoeyBcbiAgICAgICAgICBjbHM6ICdmaWxlLWl0ZW0nLFxuICAgICAgICAgIGF0dHI6IHsgJ2RhdGEtbGV2ZWwnOiAobGV2ZWwgKyAxKS50b1N0cmluZygpIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZpbGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5OEPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtjaGlsZC5uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtc2l6ZVwiPiR7KGNoaWxkLnNpemUgLyAxMDI0KS50b0ZpeGVkKDEpfUtCPC9zcGFuPlxuICAgICAgICBgO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGYWxsYmFja1N0cnVjdHVyZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gTG9jYWwgdmF1bHQgYW5hbHlzaXMgd2hlbiBzZXJ2ZXIgZW5kcG9pbnRzIGFyZW4ndCBhdmFpbGFibGVcbiAgICBjb25zdCBmYWxsYmFja0VsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LWZhbGxiYWNrJyB9KTtcbiAgICBmYWxsYmFja0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ/Cfk4EgTG9jYWwgVmF1bHQgQW5hbHlzaXMnIH0pO1xuICAgIGZhbGxiYWNrRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1NlcnZlci1zaWRlIHZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZS4gU2hvd2luZyBsb2NhbCBhbmFseXNpcy4nLFxuICAgICAgY2xzOiAndmF1bHQtZmFsbGJhY2stbWVzc2FnZSdcbiAgICB9KTtcblxuICAgIC8vIEdldCBsb2NhbCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCBmb2xkZXJzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKChmOiBhbnkpID0+IGYuY2hpbGRyZW4pLmxlbmd0aDtcblxuICAgIC8vIFN0YXRzIG92ZXJ2aWV3XG4gICAgY29uc3Qgc3RhdHNFbCA9IGZhbGxiYWNrRWwuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtc3RhdHMnIH0pO1xuICAgIHN0YXRzRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInN0YXQtZ3JpZFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWljb25cIj7wn5OBPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPkZvbGRlcnM8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtmb2xkZXJzfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfk4Q8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+VG90YWwgRmlsZXM8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtmaWxlcy5sZW5ndGh9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+TnTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5NYXJrZG93bjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke21hcmtkb3duRmlsZXMubGVuZ3RofTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfkr48L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+U3RhdHVzPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPkxvY2FsIE9ubHk8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcblxuICAgIC8vIFJlY2VudCBmaWxlc1xuICAgIGNvbnN0IHJlY2VudEVsID0gZmFsbGJhY2tFbC5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZXMtY29udGFpbmVyJyB9KTtcbiAgICByZWNlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlY2VudEZpbGVzID0gbWFya2Rvd25GaWxlc1xuICAgICAgLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpXG4gICAgICAuc2xpY2UoMCwgMTApO1xuXG4gICAgY29uc3QgcmVjZW50TGlzdCA9IHJlY2VudEVsLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlcycgfSk7XG4gICAgcmVjZW50RmlsZXMuZm9yRWFjaCgoZmlsZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBmaWxlRWwgPSByZWNlbnRMaXN0LmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlJyB9KTtcbiAgICAgIGZpbGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+8J+ThDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLW5hbWVcIj4ke2ZpbGUuYmFzZW5hbWV9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtZGF0ZVwiPiR7bmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+XG4gICAgICBgO1xuICAgICAgZmlsZUVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIENvbmZpZ3VyYXRpb24gbm90ZVxuICAgIGNvbnN0IGNvbmZpZ0VsID0gZmFsbGJhY2tFbC5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC1jb25maWctbm90ZScgfSk7XG4gICAgY29uZmlnRWwuaW5uZXJIVE1MID0gYFxuICAgICAgPHA+PHN0cm9uZz7wn5KhIEVuYWJsZSBGdWxsIEZlYXR1cmVzOjwvc3Ryb25nPiBDb25maWd1cmUgdmF1bHQgbWFuYWdlbWVudCBlbmRwb2ludHMgb24geW91ciBzZXJ2ZXIgdG8gYWNjZXNzIGFkdmFuY2VkIGZlYXR1cmVzIGxpa2Ugc3RydWN0dXJlIGFuYWx5c2lzLCBzbWFydCBzZWFyY2gsIGFuZCBmaWxlIG9wZXJhdGlvbnMuPC9wPlxuICAgICAgPHA+U2VlIHRoZSBkZXYtcGlwZSBkb2N1bWVudGF0aW9uIGZvciBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLjwvcD5cbiAgICBgO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG4vLyA9PT0gU01BUlQgU0VBUkNIIE1PREFMID09PVxuXG5leHBvcnQgY2xhc3MgU21hcnRTZWFyY2hNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgcHJpdmF0ZSB2YXVsdENsaWVudDogVmF1bHRNYW5hZ2VtZW50Q2xpZW50O1xuICBwcml2YXRlIGluaXRpYWxRdWVyeT86IHN0cmluZztcbiAgcHJpdmF0ZSBzZWFyY2hUeXBlPzogU2VhcmNoVHlwZTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBwbHVnaW4udmF1bHRDbGllbnQ7XG4gIH1cblxuICBzZXRJbml0aWFsUXVlcnkocXVlcnk6IHN0cmluZywgdHlwZT86IFNlYXJjaFR5cGUpOiB0aGlzIHtcbiAgICB0aGlzLmluaXRpYWxRdWVyeSA9IHF1ZXJ5O1xuICAgIHRoaXMuc2VhcmNoVHlwZSA9IHR5cGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdzbWFydC1zZWFyY2gtbW9kYWwnKTtcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+UjSBTbWFydCBWYXVsdCBTZWFyY2gnIH0pO1xuXG4gICAgLy8gU2VhcmNoIGZvcm1cbiAgICBjb25zdCBzZWFyY2hGb3JtID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1mb3JtJyB9KTtcbiAgICBcbiAgICBjb25zdCBxdWVyeUlucHV0ID0gc2VhcmNoRm9ybS5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0VudGVyIHNlYXJjaCBxdWVyeS4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtcXVlcnktaW5wdXQnXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMuaW5pdGlhbFF1ZXJ5KSB7XG4gICAgICBxdWVyeUlucHV0LnZhbHVlID0gdGhpcy5pbml0aWFsUXVlcnk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoVHlwZVNlbGVjdCA9IHNlYXJjaEZvcm0uY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAnc2VhcmNoLXR5cGUtc2VsZWN0JyB9KTtcbiAgICBjb25zdCBzZWFyY2hUeXBlcyA9IFtcbiAgICAgIHsgdmFsdWU6ICdjb21wcmVoZW5zaXZlJywgbGFiZWw6ICdDb21wcmVoZW5zaXZlJyB9LFxuICAgICAgeyB2YWx1ZTogJ2NvbnRlbnQnLCBsYWJlbDogJ0NvbnRlbnQnIH0sXG4gICAgICB7IHZhbHVlOiAnZmlsZW5hbWUnLCBsYWJlbDogJ0ZpbGVuYW1lJyB9LFxuICAgICAgeyB2YWx1ZTogJ3RhZ3MnLCBsYWJlbDogJ1RhZ3MnIH0sXG4gICAgICB7IHZhbHVlOiAnbGlua3MnLCBsYWJlbDogJ0xpbmtzJyB9XG4gICAgXTtcbiAgICBcbiAgICBzZWFyY2hUeXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gc2VhcmNoVHlwZVNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogdHlwZS52YWx1ZSB9KTtcbiAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IHR5cGUubGFiZWw7XG4gICAgICBpZiAodHlwZS52YWx1ZSA9PT0gKHRoaXMuc2VhcmNoVHlwZSB8fCAnY29tcHJlaGVuc2l2ZScpKSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzZWFyY2hCdXR0b24gPSBzZWFyY2hGb3JtLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ1NlYXJjaCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHNlYXJjaC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBSZXN1bHRzIGNvbnRhaW5lclxuICAgIGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLXJlc3VsdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIFNlYXJjaCBmdW5jdGlvblxuICAgIGNvbnN0IHBlcmZvcm1TZWFyY2ggPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5SW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCFxdWVyeSkge1xuICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSBzZWFyY2ggcXVlcnknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWFyY2hCdXR0b24udGV4dENvbnRlbnQgPSAnU2VhcmNoaW5nLi4uJztcbiAgICAgIHNlYXJjaEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IHJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWxvYWRpbmcnIH0pO1xuICAgICAgbG9hZGluZ0VsLnRleHRDb250ZW50ID0gJ/CflI0gU2VhcmNoaW5nIHZhdWx0Li4uJztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuc2VhcmNoVmF1bHQoe1xuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIHNlYXJjaF90eXBlOiBzZWFyY2hUeXBlU2VsZWN0LnZhbHVlIGFzIFNlYXJjaFR5cGUsXG4gICAgICAgICAgbWF4X3Jlc3VsdHM6IHRoaXMucGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uc2VhcmNoUmVzdWx0c0xpbWl0IHx8IDUwLFxuICAgICAgICAgIGluY2x1ZGVfY29udGVudDogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2FkaW5nRWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2VhcmNoUmVzdWx0cyhyZXN1bHRzQ29udGFpbmVyLCByZXN1bHRzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgbG9hZGluZ0VsLnRleHRDb250ZW50ID0gJ+KdjCBTZWFyY2ggZmFpbGVkJztcbiAgICAgICAgY29uc29sZS5lcnJvcignU2VhcmNoIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNlYXJjaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZWFyY2gnO1xuICAgICAgICBzZWFyY2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgc2VhcmNoQnV0dG9uLm9uY2xpY2sgPSBwZXJmb3JtU2VhcmNoO1xuICAgIHF1ZXJ5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIHBlcmZvcm1TZWFyY2goKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEF1dG8tc2VhcmNoIGlmIGluaXRpYWwgcXVlcnkgcHJvdmlkZWRcbiAgICBpZiAodGhpcy5pbml0aWFsUXVlcnkpIHtcbiAgICAgIHBlcmZvcm1TZWFyY2goKTtcbiAgICB9XG5cbiAgICAvLyBGb2N1cyBpbnB1dFxuICAgIHF1ZXJ5SW5wdXQuZm9jdXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2VhcmNoUmVzdWx0cyhjb250YWluZXI6IEhUTUxFbGVtZW50LCByZXN1bHRzOiBWYXVsdFNlYXJjaFJlc3BvbnNlKSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogYFNlYXJjaCBSZXN1bHRzICgke3Jlc3VsdHMudG90YWxfZm91bmR9KWAgfSk7XG5cbiAgICBpZiAocmVzdWx0cy5pbnNpZ2h0cykge1xuICAgICAgY29uc3QgaW5zaWdodHNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtaW5zaWdodHMnIH0pO1xuICAgICAgaW5zaWdodHNFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbnNpZ2h0cy1oZWFkZXJcIj7wn6egIEFJIEluc2lnaHRzPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbnNpZ2h0cy1jb250ZW50XCI+JHtyZXN1bHRzLmluc2lnaHRzfTwvZGl2PlxuICAgICAgYDtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0cy5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICduby1yZXN1bHRzJyxcbiAgICAgICAgdGV4dDogJ05vIHJlc3VsdHMgZm91bmQuIFRyeSBhIGRpZmZlcmVudCBzZWFyY2ggdGVybSBvciB0eXBlLicgXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHRzTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtcmVzdWx0cy1saXN0JyB9KTtcbiAgICBcbiAgICByZXN1bHRzLnJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0RWwgPSByZXN1bHRzTGlzdC5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtcmVzdWx0JyB9KTtcbiAgICAgIFxuICAgICAgcmVzdWx0RWwuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LWhlYWRlclwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVzdWx0LWZpbGUtbmFtZVwiPiR7cmVzdWx0LmZpbGVfbmFtZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHQtbWF0Y2gtdHlwZVwiPiR7cmVzdWx0Lm1hdGNoX3R5cGV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVzdWx0LXNjb3JlXCI+JHsocmVzdWx0LnNjb3JlICogMTAwKS50b0ZpeGVkKDApfSU8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LXBhdGhcIj4ke3Jlc3VsdC5maWxlX3BhdGh9PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtcHJldmlld1wiPiR7cmVzdWx0LnByZXZpZXd9PC9kaXY+XG4gICAgICAgICR7cmVzdWx0Lm1hdGNoZXMubGVuZ3RoID4gMCA/IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVzdWx0LW1hdGNoZXNcIj5cbiAgICAgICAgICAgIDxzdHJvbmc+TWF0Y2hlczo8L3N0cm9uZz4gJHtyZXN1bHQubWF0Y2hlcy5qb2luKCcsICcpfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgIDogJyd9XG4gICAgICBgO1xuXG4gICAgICAvLyBDbGljayB0byBvcGVuIGZpbGVcbiAgICAgIHJlc3VsdEVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocmVzdWx0LmZpbGVfcGF0aCwgJycpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gU3VnZ2VzdGVkIHF1ZXJpZXNcbiAgICBpZiAocmVzdWx0cy5zdWdnZXN0ZWRfcXVlcmllcyAmJiByZXN1bHRzLnN1Z2dlc3RlZF9xdWVyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGVkLXF1ZXJpZXMnIH0pO1xuICAgICAgc3VnZ2VzdGlvbnNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfwn5KhIFN1Z2dlc3RlZCBRdWVyaWVzJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3VnZ2VzdGlvbnNMaXN0ID0gc3VnZ2VzdGlvbnNFbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9ucy1saXN0JyB9KTtcbiAgICAgIHJlc3VsdHMuc3VnZ2VzdGVkX3F1ZXJpZXMuZm9yRWFjaChzdWdnZXN0aW9uID0+IHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkVsID0gc3VnZ2VzdGlvbnNMaXN0LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgIHRleHQ6IHN1Z2dlc3Rpb24sXG4gICAgICAgICAgY2xzOiAnc3VnZ2VzdGlvbi1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBzdWdnZXN0aW9uRWwub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBxdWVyeUlucHV0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnNlYXJjaC1xdWVyeS1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKHF1ZXJ5SW5wdXQpIHtcbiAgICAgICAgICAgIHF1ZXJ5SW5wdXQudmFsdWUgPSBzdWdnZXN0aW9uO1xuICAgICAgICAgICAgcXVlcnlJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBLZXlib2FyZEV2ZW50KCdrZXlwcmVzcycsIHsga2V5OiAnRW50ZXInIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbi8vID09PSBGSUxFIE9QRVJBVElPTlMgTU9EQUwgPT09XG5cbmV4cG9ydCBjbGFzcyBGaWxlT3BlcmF0aW9uc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHZhdWx0Q2xpZW50OiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgaW5pdGlhbFBhdGg/OiBzdHJpbmc7XG4gIHByaXZhdGUgb3BlcmF0aW9uPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFueSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdENsaWVudCA9IHBsdWdpbi52YXVsdENsaWVudDtcbiAgfVxuXG4gIHNldEluaXRpYWxQYXRoKHBhdGg6IHN0cmluZyk6IHRoaXMge1xuICAgIHRoaXMuaW5pdGlhbFBhdGggPSBwYXRoO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0T3BlcmF0aW9uKG9wZXJhdGlvbjogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCdmaWxlLW9wZXJhdGlvbnMtbW9kYWwnKTtcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+TgSBGaWxlIE9wZXJhdGlvbnMgTWFuYWdlcicgfSk7XG5cbiAgICAvLyBPcGVyYXRpb24gc2VsZWN0aW9uXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ09wZXJhdGlvbicpXG4gICAgICAuc2V0RGVzYygnU2VsZWN0IHRoZSBmaWxlIG9wZXJhdGlvbiB0byBwZXJmb3JtJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAuYWRkT3B0aW9uKCdjcmVhdGUnLCAnQ3JlYXRlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCd1cGRhdGUnLCAnVXBkYXRlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCdkZWxldGUnLCAnRGVsZXRlIEZpbGUnKVxuICAgICAgICAuYWRkT3B0aW9uKCdtb3ZlJywgJ01vdmUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ2NvcHknLCAnQ29weSBGaWxlJylcbiAgICAgICAgLnNldFZhbHVlKHRoaXMub3BlcmF0aW9uIHx8ICdjcmVhdGUnKVxuICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMub3BlcmF0aW9uID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy51cGRhdGVPcGVyYXRpb25Gb3JtKCk7XG4gICAgICAgIH0pKTtcblxuICAgIC8vIE9wZXJhdGlvbiBmb3JtIGNvbnRhaW5lclxuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnb3BlcmF0aW9uLWZvcm0nIH0pO1xuICAgIHRoaXMudXBkYXRlT3BlcmF0aW9uRm9ybSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVPcGVyYXRpb25Gb3JtKCkge1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcub3BlcmF0aW9uLWZvcm0nKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIWZvcm1Db250YWluZXIpIHJldHVybjtcbiAgICBcbiAgICBmb3JtQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLm9wZXJhdGlvbiB8fCAnY3JlYXRlJztcbiAgICBcbiAgICAvLyBGaWxlIHBhdGggaW5wdXRcbiAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0ZpbGUgUGF0aCcpXG4gICAgICAuc2V0RGVzYygnUGF0aCB0byB0aGUgZmlsZSAoaW5jbHVkaW5nIGZpbGVuYW1lKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdwYXRoL3RvL2ZpbGUubWQnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5pbml0aWFsUGF0aCB8fCAnJylcbiAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHRoaXMuaW5pdGlhbFBhdGggPSB2YWx1ZSkpO1xuXG4gICAgLy8gQWRkaXRpb25hbCBpbnB1dHMgYmFzZWQgb24gb3BlcmF0aW9uXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ21vdmUnIHx8IG9wZXJhdGlvbiA9PT0gJ2NvcHknKSB7XG4gICAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnTmV3IFBhdGgnKVxuICAgICAgICAuc2V0RGVzYygnRGVzdGluYXRpb24gcGF0aCBmb3IgdGhlIGZpbGUnKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ25ldy9wYXRoL3RvL2ZpbGUubWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2NyZWF0ZScgfHwgb3BlcmF0aW9uID09PSAndXBkYXRlJykge1xuICAgICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NvbnRlbnQnKVxuICAgICAgICAuc2V0RGVzYygnRmlsZSBjb250ZW50JylcbiAgICAgICAgLmFkZFRleHRBcmVhKHRleHRhcmVhID0+IHtcbiAgICAgICAgICB0ZXh0YXJlYS5zZXRQbGFjZWhvbGRlcignRW50ZXIgZmlsZSBjb250ZW50Li4uJyk7XG4gICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2NyZWF0ZScpIHtcbiAgICAgICAgICAgIHRleHRhcmVhLnNldFZhbHVlKCcjIE5ldyBGaWxlXFxuXFxuQ29udGVudCBnb2VzIGhlcmUuLi4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEJhY2t1cCBvcHRpb25cbiAgICBpZiAob3BlcmF0aW9uICE9PSAnY3JlYXRlJykge1xuICAgICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NyZWF0ZSBCYWNrdXAnKVxuICAgICAgICAuc2V0RGVzYygnQ3JlYXRlIGEgYmFja3VwIGJlZm9yZSBwZXJmb3JtaW5nIHRoZSBvcGVyYXRpb24nKVxuICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodHJ1ZSkpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoZm9ybUNvbnRhaW5lcilcbiAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAuc2V0QnV0dG9uVGV4dChgRXhlY3V0ZSAke29wZXJhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG9wZXJhdGlvbi5zbGljZSgxKX1gKVxuICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5leGVjdXRlT3BlcmF0aW9uKCkpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZU9wZXJhdGlvbigpIHtcbiAgICBjb25zdCBvcGVyYXRpb24gPSB0aGlzLm9wZXJhdGlvbiB8fCAnY3JlYXRlJztcbiAgICBjb25zdCBwYXRoSW5wdXQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtwbGFjZWhvbGRlcio9XCJwYXRoL3RvL2ZpbGVcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IG5ld1BhdGhJbnB1dCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyKj1cIm5ldy9wYXRoXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBjb250ZW50VGV4dGFyZWEgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgY29uc3QgYmFja3VwVG9nZ2xlID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgIGlmICghcGF0aElucHV0Py52YWx1ZSkge1xuICAgICAgbmV3IE5vdGljZSgnRmlsZSBwYXRoIGlzIHJlcXVpcmVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdDogRmlsZU9wZXJhdGlvblJlcXVlc3QgPSB7XG4gICAgICBvcGVyYXRpb246IG9wZXJhdGlvbiBhcyBhbnksXG4gICAgICBmaWxlX3BhdGg6IHBhdGhJbnB1dC52YWx1ZSxcbiAgICAgIGJhY2t1cDogYmFja3VwVG9nZ2xlPy5jaGVja2VkID8/IHRydWVcbiAgICB9O1xuXG4gICAgaWYgKG5ld1BhdGhJbnB1dD8udmFsdWUpIHtcbiAgICAgIHJlcXVlc3QubmV3X3BhdGggPSBuZXdQYXRoSW5wdXQudmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRlbnRUZXh0YXJlYT8udmFsdWUpIHtcbiAgICAgIHJlcXVlc3QuY29udGVudCA9IGNvbnRlbnRUZXh0YXJlYS52YWx1ZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbmV3IE5vdGljZShgUGVyZm9ybWluZyAke29wZXJhdGlvbn0uLi5gKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQucGVyZm9ybUZpbGVPcGVyYXRpb24ocmVxdWVzdCk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYOKchSAke29wZXJhdGlvbn0gc3VjY2Vzc2Z1bDogJHtyZXN1bHQubWVzc2FnZX1gKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBuZXcgTm90aWNlKGDinYwgJHtvcGVyYXRpb259IGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsIi8qKlxuICogVHJhbnNwb3J0IGludGVyZmFjZSBmb3IgRGV2UGlwZSBjb21tdW5pY2F0aW9uXG4gKiBTdXBwb3J0cyBtdWx0aXBsZSB0cmFuc3BvcnQgdHlwZXM6IEhUVFAsIFdlYlNvY2tldCwgRmlsZVN5c3RlbVxuICovXG5cbmV4cG9ydCBlbnVtIFRyYW5zcG9ydFR5cGUge1xuICBIVFRQID0gJ2h0dHAnLFxuICBXRUJTT0NLRVQgPSAnd2Vic29ja2V0JyxcbiAgRklMRVNZU1RFTSA9ICdmaWxlc3lzdGVtJ1xufVxuXG5leHBvcnQgZW51bSBUcmFuc3BvcnRFdmVudCB7XG4gIENPTk5FQ1RFRCA9ICdjb25uZWN0ZWQnLFxuICBESVNDT05ORUNURUQgPSAnZGlzY29ubmVjdGVkJyxcbiAgTUVTU0FHRSA9ICdtZXNzYWdlJyxcbiAgRVJST1IgPSAnZXJyb3InLFxuICBIRUFMVEhfQ0hFQ0sgPSAnaGVhbHRoX2NoZWNrJyxcbiAgUkVDT05ORUNUSU5HID0gJ3JlY29ubmVjdGluZydcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc3BvcnRDYXBhYmlsaXRpZXMge1xuICAvLyBGZWF0dXJlIHN1cHBvcnRcbiAgc3VwcG9ydHNSZWFsdGltZTogYm9vbGVhbjtcbiAgc3VwcG9ydHNCaWRpcmVjdGlvbmFsOiBib29sZWFuO1xuICBzdXBwb3J0c0ZpbGVTeXN0ZW06IGJvb2xlYW47XG4gIHN1cHBvcnRzU3RyZWFtaW5nOiBib29sZWFuO1xuICBcbiAgLy8gUGVyZm9ybWFuY2UgY2hhcmFjdGVyaXN0aWNzXG4gIG1heE1lc3NhZ2VTaXplOiBudW1iZXI7XG4gIGF2ZXJhZ2VMYXRlbmN5OiBudW1iZXI7XG4gIG1heENvbmN1cnJlbnRDb25uZWN0aW9uczogbnVtYmVyO1xuICBcbiAgLy8gUmVsaWFiaWxpdHkgbWV0cmljc1xuICByZWxpYWJpbGl0eTogbnVtYmVyOyAvLyAwLTEgYmFzZWQgb24gaGlzdG9yaWNhbCBkYXRhXG4gIHN1cHBvcnRlZEVudmlyb25tZW50czogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNwb3J0SGVhbHRoU3RhdHVzIHtcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ2ZhaWxpbmcnIHwgJ2Rpc2Nvbm5lY3RlZCc7XG4gIGxhc3RDaGVjazogbnVtYmVyO1xuICBsYXRlbmN5OiBudW1iZXI7XG4gIGVycm9yUmF0ZTogbnVtYmVyO1xuICBjb25zZWN1dGl2ZUZhaWx1cmVzOiBudW1iZXI7XG4gIHVwdGltZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWx0aENoZWNrUmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbGF0ZW5jeTogbnVtYmVyO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2UGlwZU1lc3NhZ2Uge1xuICBpZD86IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBwYXlsb2FkOiBhbnk7XG4gIHRpbWVzdGFtcD86IG51bWJlcjtcbiAgcmVwbHlUbz86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZQaXBlUmVzcG9uc2Uge1xuICBpZD86IHN0cmluZztcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgcGF5bG9hZD86IGFueTtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydENvbmZpZyB7XG4gIHNlcnZlclVybD86IHN0cmluZztcbiAgZGV2UGlwZVBhdGg/OiBzdHJpbmc7XG4gIHRpbWVvdXQ6IG51bWJlcjtcbiAgcmV0cnlBdHRlbXB0czogbnVtYmVyO1xuICBkZWJ1ZzogYm9vbGVhbjtcbiAgXG4gIC8vIFRyYW5zcG9ydC1zcGVjaWZpYyBjb25maWdcbiAgaHR0cD86IEhUVFBUcmFuc3BvcnRDb25maWc7XG4gIHdlYnNvY2tldD86IFdlYlNvY2tldFRyYW5zcG9ydENvbmZpZztcbiAgZmlsZXN5c3RlbT86IEZpbGVTeXN0ZW1UcmFuc3BvcnRDb25maWc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSFRUUFRyYW5zcG9ydENvbmZpZyB7XG4gIGVuYWJsZVNTRT86IGJvb2xlYW47XG4gIG1heENvbm5lY3Rpb25zPzogbnVtYmVyO1xuICBrZWVwQWxpdmU/OiBib29sZWFuO1xuICBjb21wcmVzc2lvbj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0VHJhbnNwb3J0Q29uZmlnIHtcbiAgaGVhcnRiZWF0SW50ZXJ2YWw/OiBudW1iZXI7XG4gIHJlY29ubmVjdERlbGF5PzogbnVtYmVyO1xuICBtYXhSZWNvbm5lY3RBdHRlbXB0cz86IG51bWJlcjtcbiAgcGVyc2lzdE1lc3NhZ2VzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlU3lzdGVtVHJhbnNwb3J0Q29uZmlnIHtcbiAgd2F0Y2hJbnRlcnZhbD86IG51bWJlcjtcbiAgbG9ja1RpbWVvdXQ/OiBudW1iZXI7XG4gIG1heFF1ZXVlU2l6ZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudExpc3RlbmVyIHtcbiAgKGRhdGE6IGFueSk6IHZvaWQ7XG59XG5cbi8qKlxuICogQ29yZSB0cmFuc3BvcnQgaW50ZXJmYWNlIHRoYXQgYWxsIHRyYW5zcG9ydCBpbXBsZW1lbnRhdGlvbnMgbXVzdCBmb2xsb3dcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZXZQaXBlVHJhbnNwb3J0IHtcbiAgcmVhZG9ubHkgdHlwZTogVHJhbnNwb3J0VHlwZTtcbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcbiAgXG4gIC8vIExpZmVjeWNsZSBtYW5hZ2VtZW50XG4gIGluaXRpYWxpemUoY29uZmlnOiBUcmFuc3BvcnRDb25maWcpOiBQcm9taXNlPHZvaWQ+O1xuICBjb25uZWN0KCk6IFByb21pc2U8dm9pZD47XG4gIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPjtcbiAgZGVzdHJveSgpOiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgLy8gQ29tbXVuaWNhdGlvblxuICBzZW5kKG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlKTogUHJvbWlzZTxEZXZQaXBlUmVzcG9uc2U+O1xuICBcbiAgLy8gTWVzc2FnZSByZWNlaXZpbmcgaXMgaGFuZGxlZCB2aWEgZXZlbnRzIHJhdGhlciB0aGFuIGFzeW5jIGl0ZXJhdG9yXG4gIC8vIExpc3RlbiB0byAnbWVzc2FnZScgZXZlbnQgdG8gcmVjZWl2ZSBpbmNvbWluZyBtZXNzYWdlc1xuICBcbiAgLy8gSGVhbHRoIGFuZCBjYXBhYmlsaXRpZXNcbiAgaXNBdmFpbGFibGUoKTogYm9vbGVhbjtcbiAgaXNDb25uZWN0ZWQoKTogYm9vbGVhbjtcbiAgZ2V0Q2FwYWJpbGl0aWVzKCk6IFRyYW5zcG9ydENhcGFiaWxpdGllcztcbiAgZ2V0SGVhbHRoU3RhdHVzKCk6IFRyYW5zcG9ydEhlYWx0aFN0YXR1cztcbiAgcGVyZm9ybUhlYWx0aENoZWNrKCk6IFByb21pc2U8SGVhbHRoQ2hlY2tSZXN1bHQ+O1xuICBcbiAgLy8gRXZlbnQgc3lzdGVtXG4gIG9uKGV2ZW50OiBUcmFuc3BvcnRFdmVudCB8IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkO1xuICBvZmYoZXZlbnQ6IFRyYW5zcG9ydEV2ZW50IHwgc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcik6IHZvaWQ7XG4gIGVtaXQoZXZlbnQ6IFRyYW5zcG9ydEV2ZW50IHwgc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZDtcbn1cbiIsIi8qKlxuICogT25ib2FyZGluZ1dpemFyZCAtIEludGVsbGlnZW50IGZpcnN0LXRpbWUgc2V0dXAgYW5kIHRyYW5zcG9ydCBvcHRpbWl6YXRpb25cbiAqL1xuXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UsIEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRyYW5zcG9ydE1hbmFnZXIgfSBmcm9tICcuLi9kZXZwaXBlL1RyYW5zcG9ydE1hbmFnZXInO1xuaW1wb3J0IHsgVHJhbnNwb3J0VHlwZSB9IGZyb20gJy4uL2RldnBpcGUvdHJhbnNwb3J0cy9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCB7IEVudmlyb25tZW50RGV0ZWN0b3IgfSBmcm9tICcuLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcbmltcG9ydCBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE9uYm9hcmRpbmdXaXphcmRDb25maWcge1xuICBza2lwRW52aXJvbm1lbnREZXRlY3Rpb24/OiBib29sZWFuO1xuICBlbmFibGVUZWxlbWV0cnk/OiBib29sZWFuO1xuICBza2lwVmFsaWRhdGlvbj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW52aXJvbm1lbnRDYXBhYmlsaXRpZXMge1xuICBwbGF0Zm9ybTogJ2Jyb3dzZXInIHwgJ25vZGUnIHwgJ29ic2lkaWFuJztcbiAgd2ViU29ja2V0U3VwcG9ydGVkOiBib29sZWFuO1xuICBmaWxlU3lzdGVtQWNjZXNzOiBib29sZWFuO1xuICBodHRwQ2FwYWJpbGl0aWVzOiBib29sZWFuO1xuICByZWNvbW1lbmRlZFRyYW5zcG9ydDogc3RyaW5nO1xuICBwZXJmb3JtYW5jZUVzdGltYXRlOiAnZXhjZWxsZW50JyB8ICdnb29kJyB8ICdmYWlyJyB8ICdwb29yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPbmJvYXJkaW5nUHJvZ3Jlc3Mge1xuICBjdXJyZW50U3RlcDogbnVtYmVyO1xuICB0b3RhbFN0ZXBzOiBudW1iZXI7XG4gIGNvbXBsZXRlZFN0ZXBzOiBib29sZWFuW107XG4gIHVzZXJQcmVmZXJlbmNlczogT25ib2FyZGluZ1ByZWZlcmVuY2VzO1xuICBkZXRlY3RlZENhcGFiaWxpdGllcz86IEVudmlyb25tZW50Q2FwYWJpbGl0aWVzO1xuICB2YWxpZGF0aW9uUmVzdWx0cz86IFZhbGlkYXRpb25SZXN1bHRzO1xufVxuXG5pbnRlcmZhY2UgT25ib2FyZGluZ1ByZWZlcmVuY2VzIHtcbiAgcHJpbWFyeVRyYW5zcG9ydD86IHN0cmluZztcbiAgZW5hYmxlUmVhbFRpbWVVcGRhdGVzOiBib29sZWFuO1xuICBwZXJmb3JtYW5jZU1vZGU6ICdiYWxhbmNlZCcgfCAncGVyZm9ybWFuY2UnIHwgJ3JlbGlhYmlsaXR5JztcbiAgZW5hYmxlQW5hbHl0aWNzOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgVmFsaWRhdGlvblJlc3VsdHMge1xuICB0cmFuc3BvcnRzV29ya2luZzogc3RyaW5nW107XG4gIHRyYW5zcG9ydHNGYWlsaW5nOiBzdHJpbmdbXTtcbiAgcmVjb21tZW5kZWRDb25maWd1cmF0aW9uOiBhbnk7XG4gIHBlcmZvcm1hbmNlQmFzZWxpbmU6IGFueTtcbn1cblxuZW51bSBPbmJvYXJkaW5nU3RlcCB7XG4gIFdFTENPTUUgPSAwLFxuICBFTlZJUk9OTUVOVF9ERVRFQ1RJT04gPSAxLFxuICBQUkVGRVJFTkNFUyA9IDIsXG4gIFZBTElEQVRJT04gPSAzLFxuICBDT01QTEVUSU9OID0gNFxufVxuXG5leHBvcnQgY2xhc3MgT25ib2FyZGluZ1dpemFyZCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjdXJyZW50U3RlcDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSB0b3RhbFN0ZXBzOiBudW1iZXIgPSA1O1xuICBwcml2YXRlIHByb2dyZXNzOiBPbmJvYXJkaW5nUHJvZ3Jlc3M7XG4gIHByaXZhdGUgY29uZmlnOiBPbmJvYXJkaW5nV2l6YXJkQ29uZmlnO1xuICBwcml2YXRlIHRyYW5zcG9ydE1hbmFnZXI6IFRyYW5zcG9ydE1hbmFnZXI7XG4gIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBcbiAgcHJpdmF0ZSBzdGVwRWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBwcm9ncmVzc0JhciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIG5leHRCdXR0b24hOiBCdXR0b25Db21wb25lbnQ7XG4gIHByaXZhdGUgcHJldmlvdXNCdXR0b24hOiBCdXR0b25Db21wb25lbnQ7XG4gIHByaXZhdGUgc2tpcEJ1dHRvbiE6IEJ1dHRvbkNvbXBvbmVudDtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luLCBjb25maWc6IE9uYm9hcmRpbmdXaXphcmRDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSB0cmFuc3BvcnQgbWFuYWdlciB3aXRoIGRlZmF1bHQgY29uZmlnXG4gICAgY29uc3QgdHJhbnNwb3J0Q29uZmlnID0ge1xuICAgICAgc2VsZWN0aW9uQ3JpdGVyaWE6IHtcbiAgICAgICAgbGF0ZW5jeVdlaWdodDogMC4zLFxuICAgICAgICByZWxpYWJpbGl0eVdlaWdodDogMC40LFxuICAgICAgICBjYXBhYmlsaXR5V2VpZ2h0OiAwLjIsXG4gICAgICAgIGNvc3RXZWlnaHQ6IDAuMVxuICAgICAgfSxcbiAgICAgIGZhbGxiYWNrQ2hhaW46IFtUcmFuc3BvcnRUeXBlLkhUVFAsIFRyYW5zcG9ydFR5cGUuV0VCU09DS0VULCBUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU1dLFxuICAgICAgdHJhbnNwb3J0Q29uZmlnczoge1xuICAgICAgICBodHRwOiB7IFxuICAgICAgICAgIHNlcnZlclVybDogcGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwsXG4gICAgICAgICAgdGltZW91dDogMzAwMDAsXG4gICAgICAgICAgcmV0cnlBdHRlbXB0czogMyxcbiAgICAgICAgICBkZWJ1ZzogcGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnRyYW5zcG9ydE1hbmFnZXIgPSBuZXcgVHJhbnNwb3J0TWFuYWdlcih0cmFuc3BvcnRDb25maWcpO1xuICAgIFxuICAgIHRoaXMucHJvZ3Jlc3MgPSB7XG4gICAgICBjdXJyZW50U3RlcDogMCxcbiAgICAgIHRvdGFsU3RlcHM6IHRoaXMudG90YWxTdGVwcyxcbiAgICAgIGNvbXBsZXRlZFN0ZXBzOiBuZXcgQXJyYXkodGhpcy50b3RhbFN0ZXBzKS5maWxsKGZhbHNlKSxcbiAgICAgIHVzZXJQcmVmZXJlbmNlczoge1xuICAgICAgICBlbmFibGVSZWFsVGltZVVwZGF0ZXM6IHRydWUsXG4gICAgICAgIHBlcmZvcm1hbmNlTW9kZTogJ2JhbGFuY2VkJyxcbiAgICAgICAgZW5hYmxlQW5hbHl0aWNzOiB0cnVlXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygndmF1bHRwaWxvdC1vbmJvYXJkaW5nJyk7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gQWRkIENTUyBjbGFzc2VzIGZvciBzdHlsaW5nXG4gICAgdGhpcy5tb2RhbEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LW9uYm9hcmRpbmctbW9kYWwnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgaGVhZGVyXG4gICAgdGhpcy5jcmVhdGVIZWFkZXIoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcHJvZ3Jlc3MgYmFyXG4gICAgdGhpcy5jcmVhdGVQcm9ncmVzc0JhcigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBzdGVwIGNvbnRhaW5lclxuICAgIGNvbnN0IHN0ZXBDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdvbmJvYXJkaW5nLXN0ZXAtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIG5hdmlnYXRpb25cbiAgICB0aGlzLmNyZWF0ZU5hdmlnYXRpb24oKTtcbiAgICBcbiAgICAvLyBTdGFydCB3aXRoIGZpcnN0IHN0ZXBcbiAgICBhd2FpdCB0aGlzLnJlbmRlckN1cnJlbnRTdGVwKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUhlYWRlcigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb25zdCBoZWFkZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdvbmJvYXJkaW5nLWhlYWRlcicpO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdXZWxjb21lIHRvIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnTGV0XFwncyBzZXQgdXAgeW91ciBvcHRpbWFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBiZXN0IGV4cGVyaWVuY2UnLFxuICAgICAgY2xzOiAnb25ib2FyZGluZy1zdWJ0aXRsZSdcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUHJvZ3Jlc3NCYXIoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29uc3QgcHJvZ3Jlc3NDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdvbmJvYXJkaW5nLXByb2dyZXNzJyk7XG4gICAgXG4gICAgLy8gU3RlcCBpbmRpY2F0b3JzXG4gICAgY29uc3Qgc3RlcHNDb250YWluZXIgPSBwcm9ncmVzc0NvbnRhaW5lci5jcmVhdGVEaXYoJ3Byb2dyZXNzLXN0ZXBzJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnRvdGFsU3RlcHM7IGkrKykge1xuICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzQ29udGFpbmVyLmNyZWF0ZURpdigncHJvZ3Jlc3Mtc3RlcCcpO1xuICAgICAgc3RlcC5hZGRDbGFzcyhpID09PSAwID8gJ2FjdGl2ZScgOiAnaW5hY3RpdmUnKTtcbiAgICAgIHN0ZXAuY3JlYXRlU3Bhbih7IHRleHQ6IChpICsgMSkudG9TdHJpbmcoKSB9KTtcbiAgICAgIHRoaXMuc3RlcEVsZW1lbnRzLnB1c2goc3RlcCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFByb2dyZXNzIGJhclxuICAgIHRoaXMucHJvZ3Jlc3NCYXIgPSBwcm9ncmVzc0NvbnRhaW5lci5jcmVhdGVEaXYoJ3Byb2dyZXNzLWJhcicpO1xuICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHRoaXMucHJvZ3Jlc3NCYXIuY3JlYXRlRGl2KCdwcm9ncmVzcy1maWxsJyk7XG4gICAgcHJvZ3Jlc3NGaWxsLnN0eWxlLndpZHRoID0gYCR7KDEgLyB0aGlzLnRvdGFsU3RlcHMpICogMTAwfSVgO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVOYXZpZ2F0aW9uKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IG5hdmlnYXRpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KCdvbmJvYXJkaW5nLW5hdmlnYXRpb24nKTtcbiAgICBcbiAgICAvLyBQcmV2aW91cyBidXR0b25cbiAgICB0aGlzLnByZXZpb3VzQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChuYXZpZ2F0aW9uKVxuICAgICAgLnNldEJ1dHRvblRleHQoJ1ByZXZpb3VzJylcbiAgICAgIC5zZXRDbGFzcygnbW9kLW11dGVkJylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMucHJldmlvdXNTdGVwKCkpO1xuICAgIFxuICAgIC8vIFNraXAgYnV0dG9uXG4gICAgdGhpcy5za2lwQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChuYXZpZ2F0aW9uKVxuICAgICAgLnNldEJ1dHRvblRleHQoJ1NraXAgU2V0dXAnKVxuICAgICAgLnNldENsYXNzKCdtb2QtbXV0ZWQnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5za2lwT25ib2FyZGluZygpKTtcbiAgICBcbiAgICAvLyBOZXh0IGJ1dHRvblxuICAgIHRoaXMubmV4dEJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQobmF2aWdhdGlvbilcbiAgICAgIC5zZXRCdXR0b25UZXh0KCdOZXh0JylcbiAgICAgIC5zZXRDdGEoKVxuICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5uZXh0U3RlcCgpKTtcbiAgICBcbiAgICB0aGlzLnVwZGF0ZU5hdmlnYXRpb25TdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJDdXJyZW50U3RlcCgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb25zdCBzdGVwQ29udGFpbmVyID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5vbmJvYXJkaW5nLXN0ZXAtY29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgc3RlcENvbnRhaW5lci5lbXB0eSgpO1xuICAgIFxuICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NJbmRpY2F0b3JzKCk7XG4gICAgXG4gICAgc3dpdGNoICh0aGlzLmN1cnJlbnRTdGVwKSB7XG4gICAgICBjYXNlIE9uYm9hcmRpbmdTdGVwLldFTENPTUU6XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyV2VsY29tZVN0ZXAoc3RlcENvbnRhaW5lcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPbmJvYXJkaW5nU3RlcC5FTlZJUk9OTUVOVF9ERVRFQ1RJT046XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRW52aXJvbm1lbnRTdGVwKHN0ZXBDb250YWluZXIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT25ib2FyZGluZ1N0ZXAuUFJFRkVSRU5DRVM6XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyUHJlZmVyZW5jZXNTdGVwKHN0ZXBDb250YWluZXIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT25ib2FyZGluZ1N0ZXAuVkFMSURBVElPTjpcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJWYWxpZGF0aW9uU3RlcChzdGVwQ29udGFpbmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9uYm9hcmRpbmdTdGVwLkNPTVBMRVRJT046XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyQ29tcGxldGlvblN0ZXAoc3RlcENvbnRhaW5lcik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZU5hdmlnYXRpb25TdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJXZWxjb21lU3RlcChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgc3RlcCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ29uYm9hcmRpbmctc3RlcCB3ZWxjb21lLXN0ZXAnKTtcbiAgICBcbiAgICBzdGVwLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1dlbGNvbWUgdG8gVmF1bHRQaWxvdCcgfSk7XG4gICAgc3RlcC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnVmF1bHRQaWxvdCBwcm92aWRlcyBpbnRlbGxpZ2VudCB0cmFuc3BvcnQgbWFuYWdlbWVudCBhbmQgb3B0aW1pemF0aW9uIGZvciB5b3VyIE9ic2lkaWFuIGV4cGVyaWVuY2UuIFRoaXMgd2l6YXJkIHdpbGwgaGVscCB5b3UgY29uZmlndXJlIHRoZSBvcHRpbWFsIHNldHRpbmdzIGZvciB5b3VyIGVudmlyb25tZW50LidcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBmZWF0dXJlcyA9IHN0ZXAuY3JlYXRlRGl2KCd3ZWxjb21lLWZlYXR1cmVzJyk7XG4gICAgZmVhdHVyZXMuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnV2hhdCB5b3VcXCdsbCBnZXQ6JyB9KTtcbiAgICBcbiAgICBjb25zdCBmZWF0dXJlTGlzdCA9IGZlYXR1cmVzLmNyZWF0ZUVsKCd1bCcpO1xuICAgIGZlYXR1cmVMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/CfmoAgSW50ZWxsaWdlbnQgdHJhbnNwb3J0IHNlbGVjdGlvbiBhbmQgZmFpbG92ZXInIH0pO1xuICAgIGZlYXR1cmVMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/Cfk4ogUmVhbC10aW1lIHBlcmZvcm1hbmNlIG1vbml0b3JpbmcnIH0pO1xuICAgIGZlYXR1cmVMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/CfkqEgQUktcG93ZXJlZCBvcHRpbWl6YXRpb24gc3VnZ2VzdGlvbnMnIH0pO1xuICAgIGZlYXR1cmVMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/CflKcgQWR2YW5jZWQgY29uZmlndXJhdGlvbiBvcHRpb25zJyB9KTtcbiAgICBmZWF0dXJlTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICfwn5OIIFVzYWdlIGFuYWx5dGljcyBhbmQgaW5zaWdodHMnIH0pO1xuICAgIFxuICAgIGNvbnN0IGVzdGltYXRlZFRpbWUgPSBzdGVwLmNyZWF0ZURpdignZXN0aW1hdGVkLXRpbWUnKTtcbiAgICBlc3RpbWF0ZWRUaW1lLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICfij7HvuI8gRXN0aW1hdGVkIHNldHVwIHRpbWU6IDItMyBtaW51dGVzJyxcbiAgICAgIGNsczogJ211dGVkJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJFbnZpcm9ubWVudFN0ZXAoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHN0ZXAgPSBjb250YWluZXIuY3JlYXRlRGl2KCdvbmJvYXJkaW5nLXN0ZXAgZW52aXJvbm1lbnQtc3RlcCcpO1xuICAgIFxuICAgIHN0ZXAuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRW52aXJvbm1lbnQgRGV0ZWN0aW9uJyB9KTtcbiAgICBzdGVwLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQW5hbHl6aW5nIHlvdXIgZW52aXJvbm1lbnQgdG8gcmVjb21tZW5kIG9wdGltYWwgdHJhbnNwb3J0IGNvbmZpZ3VyYXRpb24uLi4nIH0pO1xuICAgIFxuICAgIGlmICghdGhpcy5jb25maWcuc2tpcEVudmlyb25tZW50RGV0ZWN0aW9uICYmICF0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzKSB7XG4gICAgICBjb25zdCBkZXRlY3Rpb25TdGF0dXMgPSBzdGVwLmNyZWF0ZURpdignZGV0ZWN0aW9uLXN0YXR1cycpO1xuICAgICAgZGV0ZWN0aW9uU3RhdHVzLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAn8J+UjSBEZXRlY3RpbmcgY2FwYWJpbGl0aWVzLi4uJywgY2xzOiAnZGV0ZWN0aW9uLWxvYWRpbmcnIH0pO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzID0gYXdhaXQgdGhpcy5kZXRlY3RFbnZpcm9ubWVudCgpO1xuICAgICAgICB0aGlzLnJlbmRlckVudmlyb25tZW50UmVzdWx0cyhzdGVwKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMucmVuZGVyRW52aXJvbm1lbnRFcnJvcihzdGVwLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzKSB7XG4gICAgICB0aGlzLnJlbmRlckVudmlyb25tZW50UmVzdWx0cyhzdGVwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRldGVjdEVudmlyb25tZW50KCk6IFByb21pc2U8RW52aXJvbm1lbnRDYXBhYmlsaXRpZXM+IHtcbiAgICAvLyBTaW11bGF0ZSBkZXRlY3Rpb24gcHJvY2VzcyB3aXRoIHByb2dyZXNzIHVwZGF0ZXNcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xuICAgIFxuICAgIGNvbnN0IGVudkluZm8gPSBFbnZpcm9ubWVudERldGVjdG9yLmRldGVjdCgpO1xuICAgIFxuICAgIC8vIEVuc3VyZSBwbGF0Zm9ybSBtYXRjaGVzIG91ciBpbnRlcmZhY2VcbiAgICBsZXQgcGxhdGZvcm06ICdicm93c2VyJyB8ICdub2RlJyB8ICdvYnNpZGlhbicgPSAnb2JzaWRpYW4nO1xuICAgIGlmIChlbnZJbmZvLnBsYXRmb3JtID09PSAnYnJvd3NlcicgfHwgZW52SW5mby5wbGF0Zm9ybSA9PT0gJ25vZGUnIHx8IGVudkluZm8ucGxhdGZvcm0gPT09ICdvYnNpZGlhbicpIHtcbiAgICAgIHBsYXRmb3JtID0gZW52SW5mby5wbGF0Zm9ybTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY2FwYWJpbGl0aWVzOiBFbnZpcm9ubWVudENhcGFiaWxpdGllcyA9IHtcbiAgICAgIHBsYXRmb3JtLFxuICAgICAgd2ViU29ja2V0U3VwcG9ydGVkOiBlbnZJbmZvLmhhc1dlYlNvY2tldCxcbiAgICAgIGZpbGVTeXN0ZW1BY2Nlc3M6IGVudkluZm8uaGFzRmlsZVN5c3RlbSxcbiAgICAgIGh0dHBDYXBhYmlsaXRpZXM6IGVudkluZm8uaGFzSFRUUCxcbiAgICAgIHJlY29tbWVuZGVkVHJhbnNwb3J0OiAnaHR0cCcsIC8vIFdpbGwgYmUgZGV0ZXJtaW5lZCBieSBhbmFseXNpc1xuICAgICAgcGVyZm9ybWFuY2VFc3RpbWF0ZTogJ2dvb2QnXG4gICAgfTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgcmVjb21tZW5kZWQgdHJhbnNwb3J0XG4gICAgaWYgKGNhcGFiaWxpdGllcy53ZWJTb2NrZXRTdXBwb3J0ZWQgJiYgY2FwYWJpbGl0aWVzLmh0dHBDYXBhYmlsaXRpZXMpIHtcbiAgICAgIGNhcGFiaWxpdGllcy5yZWNvbW1lbmRlZFRyYW5zcG9ydCA9ICd3ZWJzb2NrZXQnO1xuICAgICAgY2FwYWJpbGl0aWVzLnBlcmZvcm1hbmNlRXN0aW1hdGUgPSAnZXhjZWxsZW50JztcbiAgICB9IGVsc2UgaWYgKGNhcGFiaWxpdGllcy5odHRwQ2FwYWJpbGl0aWVzKSB7XG4gICAgICBjYXBhYmlsaXRpZXMucmVjb21tZW5kZWRUcmFuc3BvcnQgPSAnaHR0cCc7XG4gICAgICBjYXBhYmlsaXRpZXMucGVyZm9ybWFuY2VFc3RpbWF0ZSA9ICdnb29kJztcbiAgICB9IGVsc2UgaWYgKGNhcGFiaWxpdGllcy5maWxlU3lzdGVtQWNjZXNzKSB7XG4gICAgICBjYXBhYmlsaXRpZXMucmVjb21tZW5kZWRUcmFuc3BvcnQgPSAnZmlsZXN5c3RlbSc7XG4gICAgICBjYXBhYmlsaXRpZXMucGVyZm9ybWFuY2VFc3RpbWF0ZSA9ICdmYWlyJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNhcGFiaWxpdGllcztcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRW52aXJvbm1lbnRSZXN1bHRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCByZXN1bHRzQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignZW52aXJvbm1lbnQtcmVzdWx0cycpO1xuICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IHRoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXMhO1xuICAgIFxuICAgIHJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn4pyFIERldGVjdGlvbiBDb21wbGV0ZScgfSk7XG4gICAgXG4gICAgY29uc3QgY2FwYWJpbGl0aWVzTGlzdCA9IHJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KCdjYXBhYmlsaXRpZXMtbGlzdCcpO1xuICAgIFxuICAgIC8vIFdlYlNvY2tldCBjYXBhYmlsaXR5XG4gICAgY29uc3Qgd3NDYXBhYmlsaXR5ID0gY2FwYWJpbGl0aWVzTGlzdC5jcmVhdGVEaXYoJ2NhcGFiaWxpdHktaXRlbScpO1xuICAgIHdzQ2FwYWJpbGl0eS5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBjYXBhYmlsaXRpZXMud2ViU29ja2V0U3VwcG9ydGVkID8gJ+KchScgOiAn4p2MJyxcbiAgICAgIGNsczogJ2NhcGFiaWxpdHktaWNvbidcbiAgICB9KTtcbiAgICB3c0NhcGFiaWxpdHkuY3JlYXRlU3Bhbih7IHRleHQ6ICdXZWJTb2NrZXQgU3VwcG9ydCcgfSk7XG4gICAgXG4gICAgLy8gSFRUUCBjYXBhYmlsaXR5XG4gICAgY29uc3QgaHR0cENhcGFiaWxpdHkgPSBjYXBhYmlsaXRpZXNMaXN0LmNyZWF0ZURpdignY2FwYWJpbGl0eS1pdGVtJyk7XG4gICAgaHR0cENhcGFiaWxpdHkuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogY2FwYWJpbGl0aWVzLmh0dHBDYXBhYmlsaXRpZXMgPyAn4pyFJyA6ICfinYwnLFxuICAgICAgY2xzOiAnY2FwYWJpbGl0eS1pY29uJ1xuICAgIH0pO1xuICAgIGh0dHBDYXBhYmlsaXR5LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSFRUUCBUcmFuc3BvcnQnIH0pO1xuICAgIFxuICAgIC8vIEZpbGVTeXN0ZW0gY2FwYWJpbGl0eVxuICAgIGNvbnN0IGZzQ2FwYWJpbGl0eSA9IGNhcGFiaWxpdGllc0xpc3QuY3JlYXRlRGl2KCdjYXBhYmlsaXR5LWl0ZW0nKTtcbiAgICBmc0NhcGFiaWxpdHkuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogY2FwYWJpbGl0aWVzLmZpbGVTeXN0ZW1BY2Nlc3MgPyAn4pyFJyA6ICfinYwnLFxuICAgICAgY2xzOiAnY2FwYWJpbGl0eS1pY29uJ1xuICAgIH0pO1xuICAgIGZzQ2FwYWJpbGl0eS5jcmVhdGVTcGFuKHsgdGV4dDogJ0ZpbGVTeXN0ZW0gQWNjZXNzJyB9KTtcbiAgICBcbiAgICAvLyBSZWNvbW1lbmRhdGlvblxuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoJ2Vudmlyb25tZW50LXJlY29tbWVuZGF0aW9uJyk7XG4gICAgcmVjb21tZW5kYXRpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmVjb21tZW5kYXRpb24nIH0pO1xuICAgIHJlY29tbWVuZGF0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6IGBCYXNlZCBvbiB5b3VyIGVudmlyb25tZW50LCB3ZSByZWNvbW1lbmQgdXNpbmcgJHtjYXBhYmlsaXRpZXMucmVjb21tZW5kZWRUcmFuc3BvcnR9IHRyYW5zcG9ydCBmb3IgJHtjYXBhYmlsaXRpZXMucGVyZm9ybWFuY2VFc3RpbWF0ZX0gcGVyZm9ybWFuY2UuYFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnZpcm9ubWVudEVycm9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGVycm9yOiBhbnkpIHtcbiAgICBjb25zdCBlcnJvckNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2Vudmlyb25tZW50LWVycm9yJyk7XG4gICAgZXJyb3JDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn4pqg77iPIERldGVjdGlvbiBGYWlsZWQnIH0pO1xuICAgIGVycm9yQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdVbmFibGUgdG8gYXV0b21hdGljYWxseSBkZXRlY3QgeW91ciBlbnZpcm9ubWVudCBjYXBhYmlsaXRpZXMuIFlvdSBjYW4gcHJvY2VlZCB3aXRoIGRlZmF1bHQgc2V0dGluZ3Mgb3IgbWFudWFsbHkgY29uZmlndXJlIGxhdGVyLidcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBlcnJvckNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgIHRleHQ6IGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIGNsczogJ2Vycm9yLWRldGFpbHMnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlclByZWZlcmVuY2VzU3RlcChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgc3RlcCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ29uYm9hcmRpbmctc3RlcCBwcmVmZXJlbmNlcy1zdGVwJyk7XG4gICAgXG4gICAgc3RlcC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdQZXJmb3JtYW5jZSBQcmVmZXJlbmNlcycgfSk7XG4gICAgc3RlcC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NvbmZpZ3VyZSB5b3VyIHByZWZlcmVuY2VzIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlOicgfSk7XG4gICAgXG4gICAgY29uc3QgcHJlZmVyZW5jZXNDb250YWluZXIgPSBzdGVwLmNyZWF0ZURpdigncHJlZmVyZW5jZXMtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2UgbW9kZSBzZXR0aW5nXG4gICAgbmV3IFNldHRpbmcocHJlZmVyZW5jZXNDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUGVyZm9ybWFuY2UgTW9kZScpXG4gICAgICAuc2V0RGVzYygnQ2hvb3NlIHlvdXIgcHJlZmVycmVkIGJhbGFuY2UgYmV0d2VlbiBzcGVlZCBhbmQgcmVsaWFiaWxpdHknKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdwZXJmb3JtYW5jZScsICdQZXJmb3JtYW5jZSAoUHJpb3JpdGl6ZSBTcGVlZCknKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdiYWxhbmNlZCcsICdCYWxhbmNlZCAoUmVjb21tZW5kZWQpJyk7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbigncmVsaWFiaWxpdHknLCAnUmVsaWFiaWxpdHkgKFByaW9yaXRpemUgU3RhYmlsaXR5KScpO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnByb2dyZXNzLnVzZXJQcmVmZXJlbmNlcy5wZXJmb3JtYW5jZU1vZGUpO1xuICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMucGVyZm9ybWFuY2VNb2RlID0gdmFsdWUgYXMgYW55O1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIFJlYWwtdGltZSB1cGRhdGVzIHNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhwcmVmZXJlbmNlc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdSZWFsLXRpbWUgVXBkYXRlcycpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIHJlYWwtdGltZSBkYXNoYm9hcmQgdXBkYXRlcyBhbmQgbGl2ZSBtb25pdG9yaW5nJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucHJvZ3Jlc3MudXNlclByZWZlcmVuY2VzLmVuYWJsZVJlYWxUaW1lVXBkYXRlcyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMuZW5hYmxlUmVhbFRpbWVVcGRhdGVzID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gQW5hbHl0aWNzIHNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhwcmVmZXJlbmNlc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdVc2FnZSBBbmFseXRpY3MnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBhbm9ueW1vdXMgdXNhZ2UgYW5hbHl0aWNzIHRvIGltcHJvdmUgcmVjb21tZW5kYXRpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMucHJvZ3Jlc3MudXNlclByZWZlcmVuY2VzLmVuYWJsZUFuYWx5dGljcyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMuZW5hYmxlQW5hbHl0aWNzID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlclZhbGlkYXRpb25TdGVwKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzdGVwID0gY29udGFpbmVyLmNyZWF0ZURpdignb25ib2FyZGluZy1zdGVwIHZhbGlkYXRpb24tc3RlcCcpO1xuICAgIFxuICAgIHN0ZXAuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29uZmlndXJhdGlvbiBWYWxpZGF0aW9uJyB9KTtcbiAgICBzdGVwLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnVGVzdGluZyB5b3VyIGNvbmZpZ3VyYXRpb24gYW5kIGVzdGFibGlzaGluZyBwZXJmb3JtYW5jZSBiYXNlbGluZS4uLicgfSk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5za2lwVmFsaWRhdGlvbiAmJiAhdGhpcy5wcm9ncmVzcy52YWxpZGF0aW9uUmVzdWx0cykge1xuICAgICAgY29uc3QgdmFsaWRhdGlvblN0YXR1cyA9IHN0ZXAuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLXN0YXR1cycpO1xuICAgICAgdmFsaWRhdGlvblN0YXR1cy5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ/Cfp6ogUnVubmluZyB2YWxpZGF0aW9uIHRlc3RzLi4uJywgY2xzOiAndmFsaWRhdGlvbi1sb2FkaW5nJyB9KTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy52YWxpZGF0aW9uUmVzdWx0cyA9IGF3YWl0IHRoaXMudmFsaWRhdGVDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIHRoaXMucmVuZGVyVmFsaWRhdGlvblJlc3VsdHMoc3RlcCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLnJlbmRlclZhbGlkYXRpb25FcnJvcihzdGVwLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb2dyZXNzLnZhbGlkYXRpb25SZXN1bHRzKSB7XG4gICAgICB0aGlzLnJlbmRlclZhbGlkYXRpb25SZXN1bHRzKHN0ZXApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVDb25maWd1cmF0aW9uKCk6IFByb21pc2U8VmFsaWRhdGlvblJlc3VsdHM+IHtcbiAgICAvLyBTaW11bGF0ZSB2YWxpZGF0aW9uIHByb2Nlc3NcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdHM6IFZhbGlkYXRpb25SZXN1bHRzID0ge1xuICAgICAgdHJhbnNwb3J0c1dvcmtpbmc6IFsnaHR0cCddLFxuICAgICAgdHJhbnNwb3J0c0ZhaWxpbmc6IFtdLFxuICAgICAgcmVjb21tZW5kZWRDb25maWd1cmF0aW9uOiB7fSxcbiAgICAgIHBlcmZvcm1hbmNlQmFzZWxpbmU6IHtcbiAgICAgICAgYXZnUmVzcG9uc2VUaW1lOiAxNTAsXG4gICAgICAgIHJlbGlhYmlsaXR5OiAwLjk4LFxuICAgICAgICB0aHJvdWdocHV0OiAxMDAwXG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvLyBUZXN0IFdlYlNvY2tldCBpZiBzdXBwb3J0ZWRcbiAgICBpZiAodGhpcy5wcm9ncmVzcy5kZXRlY3RlZENhcGFiaWxpdGllcz8ud2ViU29ja2V0U3VwcG9ydGVkKSB7XG4gICAgICByZXN1bHRzLnRyYW5zcG9ydHNXb3JraW5nLnB1c2goJ3dlYnNvY2tldCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUZXN0IEZpbGVTeXN0ZW0gaWYgc3VwcG9ydGVkXG4gICAgaWYgKHRoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXM/LmZpbGVTeXN0ZW1BY2Nlc3MpIHtcbiAgICAgIHJlc3VsdHMudHJhbnNwb3J0c1dvcmtpbmcucHVzaCgnZmlsZXN5c3RlbScpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVmFsaWRhdGlvblJlc3VsdHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLXJlc3VsdHMnKTtcbiAgICBjb25zdCByZXN1bHRzID0gdGhpcy5wcm9ncmVzcy52YWxpZGF0aW9uUmVzdWx0cyE7XG4gICAgXG4gICAgcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfinIUgVmFsaWRhdGlvbiBDb21wbGV0ZScgfSk7XG4gICAgXG4gICAgLy8gV29ya2luZyB0cmFuc3BvcnRzXG4gICAgY29uc3Qgd29ya2luZ0NvbnRhaW5lciA9IHJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KCd3b3JraW5nLXRyYW5zcG9ydHMnKTtcbiAgICB3b3JraW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1dvcmtpbmcgVHJhbnNwb3J0czonIH0pO1xuICAgIGNvbnN0IHdvcmtpbmdMaXN0ID0gd29ya2luZ0NvbnRhaW5lci5jcmVhdGVFbCgndWwnKTtcbiAgICByZXN1bHRzLnRyYW5zcG9ydHNXb3JraW5nLmZvckVhY2godHJhbnNwb3J0ID0+IHtcbiAgICAgIHdvcmtpbmdMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYOKchSAke3RyYW5zcG9ydC50b1VwcGVyQ2FzZSgpfWAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2UgYmFzZWxpbmVcbiAgICBjb25zdCBwZXJmb3JtYW5jZUNvbnRhaW5lciA9IHJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KCdwZXJmb3JtYW5jZS1iYXNlbGluZScpO1xuICAgIHBlcmZvcm1hbmNlQ29udGFpbmVyLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1BlcmZvcm1hbmNlIEJhc2VsaW5lOicgfSk7XG4gICAgY29uc3QgcGVyZkxpc3QgPSBwZXJmb3JtYW5jZUNvbnRhaW5lci5jcmVhdGVFbCgndWwnKTtcbiAgICBwZXJmTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGBBdmVyYWdlIFJlc3BvbnNlIFRpbWU6ICR7cmVzdWx0cy5wZXJmb3JtYW5jZUJhc2VsaW5lLmF2Z1Jlc3BvbnNlVGltZX1tc2AgfSk7XG4gICAgcGVyZkxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBgUmVsaWFiaWxpdHk6ICR7KHJlc3VsdHMucGVyZm9ybWFuY2VCYXNlbGluZS5yZWxpYWJpbGl0eSAqIDEwMCkudG9GaXhlZCgxKX0lYCB9KTtcbiAgICBwZXJmTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGBUaHJvdWdocHV0OiAke3Jlc3VsdHMucGVyZm9ybWFuY2VCYXNlbGluZS50aHJvdWdocHV0fSByZXF1ZXN0cy9taW5gIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJWYWxpZGF0aW9uRXJyb3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZXJyb3I6IGFueSkge1xuICAgIGNvbnN0IGVycm9yQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigndmFsaWRhdGlvbi1lcnJvcicpO1xuICAgIGVycm9yQ29udGFpbmVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ+KaoO+4jyBWYWxpZGF0aW9uIElzc3VlcycgfSk7XG4gICAgZXJyb3JDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1NvbWUgdmFsaWRhdGlvbiB0ZXN0cyBmYWlsZWQsIGJ1dCB5b3UgY2FuIHN0aWxsIHByb2NlZWQuIFlvdSBjYW4gYWRqdXN0IHNldHRpbmdzIGxhdGVyIGlmIG5lZWRlZC4nXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgZXJyb3JDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICB0ZXh0OiBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICBjbHM6ICdlcnJvci1kZXRhaWxzJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJDb21wbGV0aW9uU3RlcChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgc3RlcCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ29uYm9hcmRpbmctc3RlcCBjb21wbGV0aW9uLXN0ZXAnKTtcbiAgICBcbiAgICBzdGVwLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ/CfjokgU2V0dXAgQ29tcGxldGUhJyB9KTtcbiAgICBzdGVwLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnVmF1bHRQaWxvdCBoYXMgYmVlbiBjb25maWd1cmVkIHdpdGggeW91ciBvcHRpbWFsIHNldHRpbmdzLicgfSk7XG4gICAgXG4gICAgY29uc3Qgc3VtbWFyeSA9IHN0ZXAuY3JlYXRlRGl2KCdzZXR1cC1zdW1tYXJ5Jyk7XG4gICAgc3VtbWFyeS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdDb25maWd1cmF0aW9uIFN1bW1hcnk6JyB9KTtcbiAgICBcbiAgICBjb25zdCBzdW1tYXJ5TGlzdCA9IHN1bW1hcnkuY3JlYXRlRWwoJ3VsJyk7XG4gICAgc3VtbWFyeUxpc3QuY3JlYXRlRWwoJ2xpJywgeyBcbiAgICAgIHRleHQ6IGBQZXJmb3JtYW5jZSBNb2RlOiAke3RoaXMucHJvZ3Jlc3MudXNlclByZWZlcmVuY2VzLnBlcmZvcm1hbmNlTW9kZX1gIFxuICAgIH0pO1xuICAgIHN1bW1hcnlMaXN0LmNyZWF0ZUVsKCdsaScsIHsgXG4gICAgICB0ZXh0OiBgUmVhbC10aW1lIFVwZGF0ZXM6ICR7dGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMuZW5hYmxlUmVhbFRpbWVVcGRhdGVzID8gJ0VuYWJsZWQnIDogJ0Rpc2FibGVkJ31gIFxuICAgIH0pO1xuICAgIHN1bW1hcnlMaXN0LmNyZWF0ZUVsKCdsaScsIHsgXG4gICAgICB0ZXh0OiBgQW5hbHl0aWNzOiAke3RoaXMucHJvZ3Jlc3MudXNlclByZWZlcmVuY2VzLmVuYWJsZUFuYWx5dGljcyA/ICdFbmFibGVkJyA6ICdEaXNhYmxlZCd9YCBcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5wcm9ncmVzcy5kZXRlY3RlZENhcGFiaWxpdGllcykge1xuICAgICAgc3VtbWFyeUxpc3QuY3JlYXRlRWwoJ2xpJywgeyBcbiAgICAgICAgdGV4dDogYFJlY29tbWVuZGVkIFRyYW5zcG9ydDogJHt0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzLnJlY29tbWVuZGVkVHJhbnNwb3J0fWAgXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgbmV4dFN0ZXBzID0gc3RlcC5jcmVhdGVEaXYoJ25leHQtc3RlcHMnKTtcbiAgICBuZXh0U3RlcHMuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnV2hhdFxcJ3MgTmV4dDonIH0pO1xuICAgIGNvbnN0IG5leHRMaXN0ID0gbmV4dFN0ZXBzLmNyZWF0ZUVsKCd1bCcpO1xuICAgIG5leHRMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/Cfk4ogQ2hlY2sgdGhlIGRhc2hib2FyZCBmb3IgcmVhbC10aW1lIHN0YXR1cycgfSk7XG4gICAgbmV4dExpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn4pqZ77iPIEFkanVzdCBhZHZhbmNlZCBzZXR0aW5ncyBhcyBuZWVkZWQnIH0pO1xuICAgIG5leHRMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/CfkqEgUmV2aWV3IEFJLXBvd2VyZWQgcmVjb21tZW5kYXRpb25zJyB9KTtcbiAgICBuZXh0TGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICfwn5OIIE1vbml0b3IgcGVyZm9ybWFuY2UgYW5hbHl0aWNzJyB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUHJvZ3Jlc3NJbmRpY2F0b3JzKCkge1xuICAgIC8vIFVwZGF0ZSBzdGVwIGluZGljYXRvcnNcbiAgICB0aGlzLnN0ZXBFbGVtZW50cy5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnYWN0aXZlJywgJ2NvbXBsZXRlZCcsICdpbmFjdGl2ZScpO1xuICAgICAgaWYgKGluZGV4IDwgdGhpcy5jdXJyZW50U3RlcCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdjb21wbGV0ZWQnKTtcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IHRoaXMuY3VycmVudFN0ZXApIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdpbmFjdGl2ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBwcm9ncmVzcyBiYXJcbiAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSB0aGlzLnByb2dyZXNzQmFyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1maWxsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHByb2dyZXNzRmlsbCkge1xuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAoKHRoaXMuY3VycmVudFN0ZXAgKyAxKSAvIHRoaXMudG90YWxTdGVwcykgKiAxMDA7XG4gICAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSBgJHtwcm9ncmVzc30lYDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU5hdmlnYXRpb25TdGF0ZSgpIHtcbiAgICAvLyBQcmV2aW91cyBidXR0b25cbiAgICB0aGlzLnByZXZpb3VzQnV0dG9uLnNldERpc2FibGVkKHRoaXMuY3VycmVudFN0ZXAgPT09IDApO1xuICAgIFxuICAgIC8vIE5leHQgYnV0dG9uXG4gICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPT09IHRoaXMudG90YWxTdGVwcyAtIDEpIHtcbiAgICAgIHRoaXMubmV4dEJ1dHRvbi5zZXRCdXR0b25UZXh0KCdGaW5pc2gnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5uZXh0QnV0dG9uLnNldEJ1dHRvblRleHQoJ05leHQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2tpcCBidXR0b24gLSBoaWRlIG9uIGxhc3Qgc3RlcFxuICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwID09PSB0aGlzLnRvdGFsU3RlcHMgLSAxKSB7XG4gICAgICB0aGlzLnNraXBCdXR0b24uYnV0dG9uRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5za2lwQnV0dG9uLmJ1dHRvbkVsLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG5leHRTdGVwKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwIDwgdGhpcy50b3RhbFN0ZXBzIC0gMSkge1xuICAgICAgdGhpcy5wcm9ncmVzcy5jb21wbGV0ZWRTdGVwc1t0aGlzLmN1cnJlbnRTdGVwXSA9IHRydWU7XG4gICAgICB0aGlzLmN1cnJlbnRTdGVwKys7XG4gICAgICBhd2FpdCB0aGlzLnJlbmRlckN1cnJlbnRTdGVwKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZpbmlzaCBvbmJvYXJkaW5nXG4gICAgICBhd2FpdCB0aGlzLmZpbmlzaE9uYm9hcmRpbmcoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHByZXZpb3VzU3RlcCgpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50U3RlcCA+IDApIHtcbiAgICAgIHRoaXMuY3VycmVudFN0ZXAtLTtcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyQ3VycmVudFN0ZXAoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNraXBPbmJvYXJkaW5nKCkge1xuICAgIGNvbnN0IGNvbmZpcm1lZCA9IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBza2lwIHRoZSBzZXR1cCB3aXphcmQ/IFlvdSBjYW4gYWNjZXNzIHRoZXNlIHNldHRpbmdzIGxhdGVyIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MuJyk7XG4gICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgYXdhaXQgdGhpcy5maW5pc2hPbmJvYXJkaW5nKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmluaXNoT25ib2FyZGluZyhza2lwcGVkOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFza2lwcGVkKSB7XG4gICAgICAgIC8vIEFwcGx5IHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KchSBWYXVsdFBpbG90IGNvbmZpZ3VyYXRpb24gYXBwbGllZCBzdWNjZXNzZnVsbHkhJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gT25ib2FyZGluZyBza2lwcGVkIC0gdXNpbmcgZGVmYXVsdCBzZXR0aW5ncycpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBNYXJrIG9uYm9hcmRpbmcgYXMgY29tcGxldGVcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9uYm9hcmRpbmdDb21wbGV0ZSA9IHRydWU7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIFxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gYXBwbHkgb25ib2FyZGluZyBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KdjCBGYWlsZWQgdG8gYXBwbHkgY29uZmlndXJhdGlvbi4gUGxlYXNlIGNoZWNrIHNldHRpbmdzIG1hbnVhbGx5LicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlDb25maWd1cmF0aW9uKCkge1xuICAgIC8vIEFwcGx5IHVzZXIgcHJlZmVyZW5jZXMgdG8gcGx1Z2luIHNldHRpbmdzXG4gICAgY29uc3QgcHJlZmVyZW5jZXMgPSB0aGlzLnByb2dyZXNzLnVzZXJQcmVmZXJlbmNlcztcbiAgICBcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJmb3JtYW5jZU1vZGUgPSBwcmVmZXJlbmNlcy5wZXJmb3JtYW5jZU1vZGU7XG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUmVhbFRpbWVVcGRhdGVzID0gcHJlZmVyZW5jZXMuZW5hYmxlUmVhbFRpbWVVcGRhdGVzO1xuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUFuYWx5dGljcyA9IHByZWZlcmVuY2VzLmVuYWJsZUFuYWx5dGljcztcbiAgICBcbiAgICBpZiAodGhpcy5wcm9ncmVzcy5kZXRlY3RlZENhcGFiaWxpdGllcykge1xuICAgICAgLy8gQXBwbHkgcmVjb21tZW5kZWQgdHJhbnNwb3J0IGNvbmZpZ3VyYXRpb25cbiAgICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IHRoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXM7XG4gICAgICBcbiAgICAgIC8vIENvbmZpZ3VyZSB0cmFuc3BvcnQgbWFuYWdlciB3aXRoIGRldGVjdGVkIGNhcGFiaWxpdGllc1xuICAgICAgY29uc3QgdHJhbnNwb3J0Q29uZmlnID0ge1xuICAgICAgICBzZWxlY3Rpb25Dcml0ZXJpYTogdGhpcy5nZXRTZWxlY3Rpb25Dcml0ZXJpYUZvck1vZGUocHJlZmVyZW5jZXMucGVyZm9ybWFuY2VNb2RlKSxcbiAgICAgICAgZmFsbGJhY2tDaGFpbjogdGhpcy5idWlsZEZhbGxiYWNrQ2hhaW4oY2FwYWJpbGl0aWVzKSxcbiAgICAgICAgdHJhbnNwb3J0Q29uZmlnczoge1xuICAgICAgICAgIGh0dHA6IHsgYmFzZVVybDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFja2VuZFVybCB9LFxuICAgICAgICAgIHdlYnNvY2tldDogY2FwYWJpbGl0aWVzLndlYlNvY2tldFN1cHBvcnRlZCA/IHsgdXJsOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWJTb2NrZXRVcmwgfSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBmaWxlc3lzdGVtOiBjYXBhYmlsaXRpZXMuZmlsZVN5c3RlbUFjY2VzcyA/IHsgYmFzZVBhdGg6ICcudmF1bHRwaWxvdCcgfSA6IHVuZGVmaW5lZFxuICAgICAgICB9LFxuICAgICAgICBhdXRvRmFpbG92ZXI6IHRydWUsXG4gICAgICAgIGRlYnVnOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGVcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGNvbmZpZ3VyYXRpb24gZm9yIHRyYW5zcG9ydCBtYW5hZ2VyXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmFuc3BvcnRDb25maWcgPSB0cmFuc3BvcnRDb25maWc7XG4gICAgfVxuICAgIFxuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZWxlY3Rpb25Dcml0ZXJpYUZvck1vZGUobW9kZTogc3RyaW5nKSB7XG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdwZXJmb3JtYW5jZSc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGF0ZW5jeVdlaWdodDogMC42LFxuICAgICAgICAgIHJlbGlhYmlsaXR5V2VpZ2h0OiAwLjIsXG4gICAgICAgICAgY2FwYWJpbGl0eVdlaWdodDogMC4xLFxuICAgICAgICAgIGNvc3RXZWlnaHQ6IDAuMVxuICAgICAgICB9O1xuICAgICAgY2FzZSAncmVsaWFiaWxpdHknOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhdGVuY3lXZWlnaHQ6IDAuMSxcbiAgICAgICAgICByZWxpYWJpbGl0eVdlaWdodDogMC42LFxuICAgICAgICAgIGNhcGFiaWxpdHlXZWlnaHQ6IDAuMixcbiAgICAgICAgICBjb3N0V2VpZ2h0OiAwLjFcbiAgICAgICAgfTtcbiAgICAgIGRlZmF1bHQ6IC8vIGJhbGFuY2VkXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGF0ZW5jeVdlaWdodDogMC4zLFxuICAgICAgICAgIHJlbGlhYmlsaXR5V2VpZ2h0OiAwLjMsXG4gICAgICAgICAgY2FwYWJpbGl0eVdlaWdodDogMC4yLFxuICAgICAgICAgIGNvc3RXZWlnaHQ6IDAuMlxuICAgICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRGYWxsYmFja0NoYWluKGNhcGFiaWxpdGllczogRW52aXJvbm1lbnRDYXBhYmlsaXRpZXMpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY2hhaW46IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgaWYgKGNhcGFiaWxpdGllcy53ZWJTb2NrZXRTdXBwb3J0ZWQpIHtcbiAgICAgIGNoYWluLnB1c2goJ3dlYnNvY2tldCcpO1xuICAgIH1cbiAgICBpZiAoY2FwYWJpbGl0aWVzLmh0dHBDYXBhYmlsaXRpZXMpIHtcbiAgICAgIGNoYWluLnB1c2goJ2h0dHAnKTtcbiAgICB9XG4gICAgaWYgKGNhcGFiaWxpdGllcy5maWxlU3lzdGVtQWNjZXNzKSB7XG4gICAgICBjaGFpbi5wdXNoKCdmaWxlc3lzdGVtJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjaGFpbjtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsIi8qKlxuICogUmVjb21tZW5kYXRpb25FbmdpbmUgLSBBSS1wb3dlcmVkIG9wdGltaXphdGlvbiBzdWdnZXN0aW9ucyBhbmQgaW5zaWdodHNcbiAqL1xuXG5pbXBvcnQgeyBUcmFuc3BvcnRUeXBlIH0gZnJvbSAnLi4vZGV2cGlwZS90cmFuc3BvcnRzL0RldlBpcGVUcmFuc3BvcnQnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciB9IGZyb20gJy4uL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZGF0aW9uQ29udGV4dCB7XG4gIHVzZXJJZD86IHN0cmluZztcbiAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgY3VycmVudFRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZTtcbiAgYXZhaWxhYmxlVHJhbnNwb3J0czogVHJhbnNwb3J0VHlwZVtdO1xuICBwZXJmb3JtYW5jZU1ldHJpY3M6IFBlcmZvcm1hbmNlU25hcHNob3Q7XG4gIHVzZXJCZWhhdmlvcjogVXNlckJlaGF2aW9yUGF0dGVybjtcbiAgZW52aXJvbm1lbnRDb250ZXh0OiBFbnZpcm9ubWVudENvbnRleHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VTbmFwc2hvdCB7XG4gIGF2ZXJhZ2VMYXRlbmN5OiBudW1iZXI7XG4gIGVycm9yUmF0ZTogbnVtYmVyO1xuICB0aHJvdWdocHV0OiBudW1iZXI7XG4gIHJlbGlhYmlsaXR5OiBudW1iZXI7XG4gIHRyYW5zcG9ydFVzYWdlOiBSZWNvcmQ8VHJhbnNwb3J0VHlwZSwgbnVtYmVyPjtcbiAgdGltZVdpbmRvdzogc3RyaW5nOyAvLyBlLmcuLCAnMWgnLCAnMjRoJywgJzdkJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJCZWhhdmlvclBhdHRlcm4ge1xuICB1c2FnZUZyZXF1ZW5jeTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgcGVha1VzYWdlSG91cnM6IG51bWJlcltdO1xuICBwcmVmZXJyZWRGZWF0dXJlczogc3RyaW5nW107XG4gIGVycm9yVG9sZXJhbmNlOiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICBwZXJmb3JtYW5jZVNlbnNpdGl2aXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVudmlyb25tZW50Q29udGV4dCB7XG4gIHBsYXRmb3JtOiBzdHJpbmc7XG4gIGNvbm5lY3Rpdml0eTogJ3Bvb3InIHwgJ2ZhaXInIHwgJ2dvb2QnIHwgJ2V4Y2VsbGVudCc7XG4gIGJhbmR3aWR0aDogbnVtYmVyOyAvLyBNYnBzXG4gIGxhdGVuY3k6IG51bWJlcjsgLy8gbXNcbiAgc3RhYmlsaXR5OiBudW1iZXI7IC8vIDAtMVxufVxuXG5leHBvcnQgZW51bSBSZWNvbW1lbmRhdGlvblR5cGUge1xuICBUUkFOU1BPUlRfT1BUSU1JWkFUSU9OID0gJ3RyYW5zcG9ydF9vcHRpbWl6YXRpb24nLFxuICBQRVJGT1JNQU5DRV9UVU5JTkcgPSAncGVyZm9ybWFuY2VfdHVuaW5nJyxcbiAgRVJST1JfUkVEVUNUSU9OID0gJ2Vycm9yX3JlZHVjdGlvbicsXG4gIENPU1RfT1BUSU1JWkFUSU9OID0gJ2Nvc3Rfb3B0aW1pemF0aW9uJyxcbiAgRkVBVFVSRV9BRE9QVElPTiA9ICdmZWF0dXJlX2Fkb3B0aW9uJyxcbiAgQ09ORklHVVJBVElPTl9JTVBST1ZFTUVOVCA9ICdjb25maWd1cmF0aW9uX2ltcHJvdmVtZW50JyxcbiAgUFJPQUNUSVZFX01BSU5URU5BTkNFID0gJ3Byb2FjdGl2ZV9tYWludGVuYW5jZSdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWNvbW1lbmRhdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6IFJlY29tbWVuZGF0aW9uVHlwZTtcbiAgcHJpb3JpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICByYXRpb25hbGU6IHN0cmluZztcbiAgXG4gIC8vIEV4cGVjdGVkIGltcGFjdFxuICBleHBlY3RlZEltcGFjdDoge1xuICAgIHBlcmZvcm1hbmNlSW1wcm92ZW1lbnQ6IG51bWJlcjsgLy8gcGVyY2VudGFnZVxuICAgIGVycm9yUmVkdWN0aW9uOiBudW1iZXI7IC8vIHBlcmNlbnRhZ2VcbiAgICByZWxpYWJpbGl0eUltcHJvdmVtZW50OiBudW1iZXI7IC8vIHBlcmNlbnRhZ2VcbiAgICBjb25maWRlbmNlU2NvcmU6IG51bWJlcjsgLy8gMC0xXG4gIH07XG4gIFxuICAvLyBJbXBsZW1lbnRhdGlvbiBkZXRhaWxzXG4gIGltcGxlbWVudGF0aW9uOiB7XG4gICAgZGlmZmljdWx0eTogJ2Vhc3knIHwgJ21lZGl1bScgfCAnaGFyZCc7XG4gICAgZXN0aW1hdGVkVGltZTogc3RyaW5nO1xuICAgIHN0ZXBzOiBSZWNvbW1lbmRhdGlvblN0ZXBbXTtcbiAgICByZXZlcnNpYmxlOiBib29sZWFuO1xuICAgIHJpc2tMZXZlbDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgfTtcbiAgXG4gIC8vIE1ldGFkYXRhXG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBjcmVhdGVkOiBEYXRlO1xuICB2YWxpZFVudGlsPzogRGF0ZTtcbiAgYXBwbGllZEF0PzogRGF0ZTtcbiAgZWZmZWN0aXZlbmVzcz86IG51bWJlcjsgLy8gcG9zdC1pbXBsZW1lbnRhdGlvbiBmZWVkYmFja1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZGF0aW9uU3RlcCB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGFjdGlvbjogJ21hbnVhbCcgfCAnYXV0b21hdGljJztcbiAgY29tbWFuZD86IHN0cmluZztcbiAgdmFsaWRhdGlvbj86IHN0cmluZztcbiAgZGVwZW5kZW5jaWVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW1pemF0aW9uT3Bwb3J0dW5pdHkge1xuICBhcmVhOiAndHJhbnNwb3J0JyB8ICdjb25maWd1cmF0aW9uJyB8ICd1c2FnZScgfCAnZW52aXJvbm1lbnQnO1xuICBpbXBhY3Q6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG4gIGVmZm9ydDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgbWV0cmljczoge1xuICAgIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICAgIHBvdGVudGlhbFZhbHVlOiBudW1iZXI7XG4gICAgaW1wcm92ZW1lbnQ6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnNpZ2h0Q2F0ZWdvcnkge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByaW9yaXR5OiBudW1iZXI7XG4gIGluc2lnaHRzOiBJbnNpZ2h0W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zaWdodCB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHR5cGU6ICdwb3NpdGl2ZScgfCAnbmV1dHJhbCcgfCAnd2FybmluZycgfCAnY3JpdGljYWwnO1xuICBjb25maWRlbmNlOiBudW1iZXI7IC8vIDAtMVxuICBkYXRhOiBhbnk7XG4gIGFjdGlvbmFibGU6IGJvb2xlYW47XG4gIHJlbGF0ZWQ6IHN0cmluZ1tdOyAvLyByZWxhdGVkIHJlY29tbWVuZGF0aW9uIElEc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByZWRpY3RpdmVBbGVydCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdwZXJmb3JtYW5jZV9kZWdyYWRhdGlvbicgfCAndHJhbnNwb3J0X2ZhaWx1cmUnIHwgJ2NhcGFjaXR5X2xpbWl0JyB8ICdtYWludGVuYW5jZV9yZXF1aXJlZCc7XG4gIHNldmVyaXR5OiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ2NyaXRpY2FsJztcbiAgcHJvYmFiaWxpdHk6IG51bWJlcjsgLy8gMC0xXG4gIHRpbWVmcmFtZTogc3RyaW5nOyAvLyBlLmcuLCAnMWgnLCAnMjRoJywgJzF3J1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBwcmV2ZW50aXZlQWN0aW9uczogUmVjb21tZW5kYXRpb25bXTtcbiAgdHJpZ2dlcnM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgUmVjb21tZW5kYXRpb25FbmdpbmUge1xuICBwcml2YXRlIHBlcmZvcm1hbmNlSGlzdG9yeTogUGVyZm9ybWFuY2VTbmFwc2hvdFtdID0gW107XG4gIHByaXZhdGUgYmVoYXZpb3JQYXR0ZXJuczogTWFwPHN0cmluZywgVXNlckJlaGF2aW9yUGF0dGVybj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYXBwbGllZFJlY29tbWVuZGF0aW9uczogTWFwPHN0cmluZywgUmVjb21tZW5kYXRpb24+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGluc2lnaHRDYWNoZTogTWFwPHN0cmluZywgSW5zaWdodENhdGVnb3J5W10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHByZWRpY3Rpb25Nb2RlbHM6IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwKCk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBBTkFMWVNJU19XSU5ET1cgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gNyBkYXlzXG4gIHByaXZhdGUgcmVhZG9ubHkgTUlOX0RBVEFfUE9JTlRTID0gMTA7XG4gIHByaXZhdGUgcmVhZG9ubHkgQ09ORklERU5DRV9USFJFU0hPTEQgPSAwLjc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplUHJlZGljdGlvbk1vZGVscygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGN1cnJlbnQgY29udGV4dFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxSZWNvbW1lbmRhdGlvbltdPiB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBSZWNvbW1lbmRhdGlvbltdID0gW107XG5cbiAgICB0cnkge1xuICAgICAgLy8gQW5hbHl6ZSBjdXJyZW50IHBlcmZvcm1hbmNlIGFuZCBpZGVudGlmeSBvcHBvcnR1bml0aWVzXG4gICAgICBjb25zdCBvcHBvcnR1bml0aWVzID0gYXdhaXQgdGhpcy5hbmFseXplT3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyhjb250ZXh0KTtcbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgdHJhbnNwb3J0LXNwZWNpZmljIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgdHJhbnNwb3J0UmVjcyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVUcmFuc3BvcnRSZWNvbW1lbmRhdGlvbnMoY29udGV4dCwgb3Bwb3J0dW5pdGllcyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi50cmFuc3BvcnRSZWNzKTtcblxuICAgICAgLy8gR2VuZXJhdGUgcGVyZm9ybWFuY2UgdHVuaW5nIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgcGVyZm9ybWFuY2VSZWNzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVBlcmZvcm1hbmNlUmVjb21tZW5kYXRpb25zKGNvbnRleHQsIG9wcG9ydHVuaXRpZXMpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goLi4ucGVyZm9ybWFuY2VSZWNzKTtcblxuICAgICAgLy8gR2VuZXJhdGUgY29uZmlndXJhdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IGNvbmZpZ1JlY3MgPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ29uZmlndXJhdGlvblJlY29tbWVuZGF0aW9ucyhjb250ZXh0KTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLmNvbmZpZ1JlY3MpO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBwcm9hY3RpdmUgbWFpbnRlbmFuY2UgcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBtYWludGVuYW5jZVJlY3MgPSBhd2FpdCB0aGlzLmdlbmVyYXRlTWFpbnRlbmFuY2VSZWNvbW1lbmRhdGlvbnMoY29udGV4dCk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5tYWludGVuYW5jZVJlY3MpO1xuXG4gICAgICAvLyBTb3J0IGJ5IHByaW9yaXR5IGFuZCBleHBlY3RlZCBpbXBhY3RcbiAgICAgIGNvbnN0IHNvcnRlZFJlY29tbWVuZGF0aW9ucyA9IHRoaXMucHJpb3JpdGl6ZVJlY29tbWVuZGF0aW9ucyhyZWNvbW1lbmRhdGlvbnMpO1xuXG4gICAgICAvLyBDYWNoZSByZWNvbW1lbmRhdGlvbnMgZm9yIHRyYWNraW5nXG4gICAgICBzb3J0ZWRSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4ge1xuICAgICAgICB0aGlzLmFwcGxpZWRSZWNvbW1lbmRhdGlvbnMuc2V0KHJlYy5pZCwgcmVjKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc29ydGVkUmVjb21tZW5kYXRpb25zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVjb21tZW5kYXRpb25zOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBjdXJyZW50IHN0YXRlIHRvIGlkZW50aWZ5IG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGFuYWx5emVPcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IFByb21pc2U8T3B0aW1pemF0aW9uT3Bwb3J0dW5pdHlbXT4ge1xuICAgIGNvbnN0IG9wcG9ydHVuaXRpZXM6IE9wdGltaXphdGlvbk9wcG9ydHVuaXR5W10gPSBbXTtcblxuICAgIC8vIEFuYWx5emUgdHJhbnNwb3J0IHBlcmZvcm1hbmNlXG4gICAgaWYgKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSA+IDAuMDUpIHtcbiAgICAgIG9wcG9ydHVuaXRpZXMucHVzaCh7XG4gICAgICAgIGFyZWE6ICd0cmFuc3BvcnQnLFxuICAgICAgICBpbXBhY3Q6ICdoaWdoJyxcbiAgICAgICAgZWZmb3J0OiAnbWVkaXVtJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdIaWdoIGVycm9yIHJhdGUgZGV0ZWN0ZWQsIHRyYW5zcG9ydCBvcHRpbWl6YXRpb24gcmVjb21tZW5kZWQnLFxuICAgICAgICBtZXRyaWNzOiB7XG4gICAgICAgICAgY3VycmVudFZhbHVlOiBjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUsXG4gICAgICAgICAgcG90ZW50aWFsVmFsdWU6IDAuMDEsXG4gICAgICAgICAgaW1wcm92ZW1lbnQ6IChjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgLSAwLjAxKSAvIGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBbmFseXplIGxhdGVuY3kgaXNzdWVzXG4gICAgaWYgKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5ID4gNTAwKSB7XG4gICAgICBvcHBvcnR1bml0aWVzLnB1c2goe1xuICAgICAgICBhcmVhOiAnY29uZmlndXJhdGlvbicsXG4gICAgICAgIGltcGFjdDogJ21lZGl1bScsXG4gICAgICAgIGVmZm9ydDogJ2xvdycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSGlnaCBsYXRlbmN5IGRldGVjdGVkLCBjb25maWd1cmF0aW9uIHR1bmluZyByZWNvbW1lbmRlZCcsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBjdXJyZW50VmFsdWU6IGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5LFxuICAgICAgICAgIHBvdGVudGlhbFZhbHVlOiAyMDAsXG4gICAgICAgICAgaW1wcm92ZW1lbnQ6IChjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlTGF0ZW5jeSAtIDIwMCkgLyBjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlTGF0ZW5jeVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBbmFseXplIHRyYW5zcG9ydCB1c2FnZSBwYXR0ZXJuc1xuICAgIGNvbnN0IHRyYW5zcG9ydERpc3RyaWJ1dGlvbiA9IE9iamVjdC52YWx1ZXMoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MudHJhbnNwb3J0VXNhZ2UpO1xuICAgIGNvbnN0IG1heFVzYWdlID0gTWF0aC5tYXgoLi4udHJhbnNwb3J0RGlzdHJpYnV0aW9uKTtcbiAgICBjb25zdCBtaW5Vc2FnZSA9IE1hdGgubWluKC4uLnRyYW5zcG9ydERpc3RyaWJ1dGlvbik7XG4gICAgXG4gICAgaWYgKG1heFVzYWdlIC8gKG1pblVzYWdlIHx8IDAuMDAxKSA+IDEwKSB7XG4gICAgICBvcHBvcnR1bml0aWVzLnB1c2goe1xuICAgICAgICBhcmVhOiAndXNhZ2UnLFxuICAgICAgICBpbXBhY3Q6ICdtZWRpdW0nLFxuICAgICAgICBlZmZvcnQ6ICdsb3cnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1VuYmFsYW5jZWQgdHJhbnNwb3J0IHVzYWdlIGRldGVjdGVkLCBsb2FkIGJhbGFuY2luZyByZWNvbW1lbmRlZCcsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBjdXJyZW50VmFsdWU6IG1heFVzYWdlIC8gKG1pblVzYWdlIHx8IDAuMDAxKSxcbiAgICAgICAgICBwb3RlbnRpYWxWYWx1ZTogMyxcbiAgICAgICAgICBpbXByb3ZlbWVudDogMC4zXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBvcHBvcnR1bml0aWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRyYW5zcG9ydC1zcGVjaWZpYyByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVUcmFuc3BvcnRSZWNvbW1lbmRhdGlvbnMoXG4gICAgY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0LFxuICAgIG9wcG9ydHVuaXRpZXM6IE9wdGltaXphdGlvbk9wcG9ydHVuaXR5W11cbiAgKTogUHJvbWlzZTxSZWNvbW1lbmRhdGlvbltdPiB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBSZWNvbW1lbmRhdGlvbltdID0gW107XG5cbiAgICAvLyBDaGVjayBpZiBjdXJyZW50IHRyYW5zcG9ydCBpcyBvcHRpbWFsXG4gICAgY29uc3Qgb3B0aW1hbFRyYW5zcG9ydCA9IGF3YWl0IHRoaXMuZGV0ZXJtaW5lT3B0aW1hbFRyYW5zcG9ydChjb250ZXh0KTtcbiAgICBpZiAob3B0aW1hbFRyYW5zcG9ydCAhPT0gY29udGV4dC5jdXJyZW50VHJhbnNwb3J0KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBgdHJhbnNwb3J0LXN3aXRjaC0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogUmVjb21tZW5kYXRpb25UeXBlLlRSQU5TUE9SVF9PUFRJTUlaQVRJT04sXG4gICAgICAgIHByaW9yaXR5OiAnaGlnaCcsXG4gICAgICAgIHRpdGxlOiBgU3dpdGNoIHRvICR7b3B0aW1hbFRyYW5zcG9ydH0gVHJhbnNwb3J0YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBCYXNlZCBvbiB5b3VyIHVzYWdlIHBhdHRlcm5zIGFuZCBlbnZpcm9ubWVudCwgJHtvcHRpbWFsVHJhbnNwb3J0fSB0cmFuc3BvcnQgd291bGQgcHJvdmlkZSBiZXR0ZXIgcGVyZm9ybWFuY2UuYCxcbiAgICAgICAgcmF0aW9uYWxlOiB0aGlzLmdlbmVyYXRlVHJhbnNwb3J0U3dpdGNoUmF0aW9uYWxlKGNvbnRleHQsIG9wdGltYWxUcmFuc3BvcnQpLFxuICAgICAgICBleHBlY3RlZEltcGFjdDoge1xuICAgICAgICAgIHBlcmZvcm1hbmNlSW1wcm92ZW1lbnQ6IDI1LFxuICAgICAgICAgIGVycm9yUmVkdWN0aW9uOiA0MCxcbiAgICAgICAgICByZWxpYWJpbGl0eUltcHJvdmVtZW50OiAzMCxcbiAgICAgICAgICBjb25maWRlbmNlU2NvcmU6IDAuODVcbiAgICAgICAgfSxcbiAgICAgICAgaW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBkaWZmaWN1bHR5OiAnZWFzeScsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogJzEgbWludXRlJyxcbiAgICAgICAgICBzdGVwczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ3N3aXRjaC10cmFuc3BvcnQnLFxuICAgICAgICAgICAgICB0aXRsZTogJ1N3aXRjaCBQcmltYXJ5IFRyYW5zcG9ydCcsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgQ2hhbmdlIHByaW1hcnkgdHJhbnNwb3J0IHRvICR7b3B0aW1hbFRyYW5zcG9ydH1gLFxuICAgICAgICAgICAgICBhY3Rpb246ICdhdXRvbWF0aWMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICByZXZlcnNpYmxlOiB0cnVlLFxuICAgICAgICAgIHJpc2tMZXZlbDogJ2xvdydcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6ICdUcmFuc3BvcnQnLFxuICAgICAgICB0YWdzOiBbJ3BlcmZvcm1hbmNlJywgJ29wdGltaXphdGlvbicsICd0cmFuc3BvcnQnXSxcbiAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHRyYW5zcG9ydCBmYWxsYmFjayBpbXByb3ZlbWVudHNcbiAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlID4gMC4wMikge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICBpZDogYGZhbGxiYWNrLW9wdGltaXphdGlvbi0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogUmVjb21tZW5kYXRpb25UeXBlLlRSQU5TUE9SVF9PUFRJTUlaQVRJT04sXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgdGl0bGU6ICdPcHRpbWl6ZSBUcmFuc3BvcnQgRmFsbGJhY2sgQ2hhaW4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0NvbmZpZ3VyZSBpbnRlbGxpZ2VudCBmYWxsYmFjayB0byByZWR1Y2UgZXJyb3IgaW1wYWN0LicsXG4gICAgICAgIHJhdGlvbmFsZTogJ0N1cnJlbnQgZXJyb3IgcmF0ZSBzdWdnZXN0cyBmYWxsYmFjayBtZWNoYW5pc21zIGNvdWxkIGJlIGltcHJvdmVkLicsXG4gICAgICAgIGV4cGVjdGVkSW1wYWN0OiB7XG4gICAgICAgICAgcGVyZm9ybWFuY2VJbXByb3ZlbWVudDogMTUsXG4gICAgICAgICAgZXJyb3JSZWR1Y3Rpb246IDYwLFxuICAgICAgICAgIHJlbGlhYmlsaXR5SW1wcm92ZW1lbnQ6IDQ1LFxuICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogMC43NVxuICAgICAgICB9LFxuICAgICAgICBpbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIGRpZmZpY3VsdHk6ICdtZWRpdW0nLFxuICAgICAgICAgIGVzdGltYXRlZFRpbWU6ICc1IG1pbnV0ZXMnLFxuICAgICAgICAgIHN0ZXBzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnY29uZmlndXJlLWZhbGxiYWNrJyxcbiAgICAgICAgICAgICAgdGl0bGU6ICdDb25maWd1cmUgRmFsbGJhY2sgQ2hhaW4nLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NldCB1cCBpbnRlbGxpZ2VudCB0cmFuc3BvcnQgZmFsbGJhY2snLFxuICAgICAgICAgICAgICBhY3Rpb246ICdtYW51YWwnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICByZXZlcnNpYmxlOiB0cnVlLFxuICAgICAgICAgIHJpc2tMZXZlbDogJ2xvdydcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6ICdSZWxpYWJpbGl0eScsXG4gICAgICAgIHRhZ3M6IFsnZmFsbGJhY2snLCAncmVsaWFiaWxpdHknLCAnZXJyb3ItcmVkdWN0aW9uJ10sXG4gICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcGVyZm9ybWFuY2UgdHVuaW5nIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVBlcmZvcm1hbmNlUmVjb21tZW5kYXRpb25zKFxuICAgIGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCxcbiAgICBvcHBvcnR1bml0aWVzOiBPcHRpbWl6YXRpb25PcHBvcnR1bml0eVtdXG4gICk6IFByb21pc2U8UmVjb21tZW5kYXRpb25bXT4ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHRpbWVvdXQgb3B0aW1pemF0aW9uXG4gICAgaWYgKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5ID4gMTAwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICBpZDogYHRpbWVvdXQtb3B0aW1pemF0aW9uLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0eXBlOiBSZWNvbW1lbmRhdGlvblR5cGUuUEVSRk9STUFOQ0VfVFVOSU5HLFxuICAgICAgICBwcmlvcml0eTogJ21lZGl1bScsXG4gICAgICAgIHRpdGxlOiAnT3B0aW1pemUgUmVxdWVzdCBUaW1lb3V0cycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQWRqdXN0IHRpbWVvdXQgc2V0dGluZ3MgdG8gcmVkdWNlIHdhaXQgdGltZXMgZm9yIGZhaWxlZCByZXF1ZXN0cy4nLFxuICAgICAgICByYXRpb25hbGU6ICdIaWdoIGF2ZXJhZ2UgbGF0ZW5jeSBpbmRpY2F0ZXMgdGltZW91dCBzZXR0aW5ncyBtYXkgbmVlZCBhZGp1c3RtZW50LicsXG4gICAgICAgIGV4cGVjdGVkSW1wYWN0OiB7XG4gICAgICAgICAgcGVyZm9ybWFuY2VJbXByb3ZlbWVudDogMjAsXG4gICAgICAgICAgZXJyb3JSZWR1Y3Rpb246IDEwLFxuICAgICAgICAgIHJlbGlhYmlsaXR5SW1wcm92ZW1lbnQ6IDE1LFxuICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogMC44XG4gICAgICAgIH0sXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgZGlmZmljdWx0eTogJ2Vhc3knLFxuICAgICAgICAgIGVzdGltYXRlZFRpbWU6ICcyIG1pbnV0ZXMnLFxuICAgICAgICAgIHN0ZXBzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnYWRqdXN0LXRpbWVvdXRzJyxcbiAgICAgICAgICAgICAgdGl0bGU6ICdBZGp1c3QgVGltZW91dCBTZXR0aW5ncycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT3B0aW1pemUgcmVxdWVzdCB0aW1lb3V0IHZhbHVlcycsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ21hbnVhbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHJldmVyc2libGU6IHRydWUsXG4gICAgICAgICAgcmlza0xldmVsOiAnbG93J1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogJ1BlcmZvcm1hbmNlJyxcbiAgICAgICAgdGFnczogWyd0aW1lb3V0JywgJ2xhdGVuY3knLCAncGVyZm9ybWFuY2UnXSxcbiAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGNvbm5lY3Rpb24gcG9vbGluZyBvcHBvcnR1bml0aWVzXG4gICAgaWYgKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLnRocm91Z2hwdXQgPCAxMDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgICAgaWQ6IGBjb25uZWN0aW9uLXBvb2xpbmctJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHR5cGU6IFJlY29tbWVuZGF0aW9uVHlwZS5QRVJGT1JNQU5DRV9UVU5JTkcsXG4gICAgICAgIHByaW9yaXR5OiAnaGlnaCcsXG4gICAgICAgIHRpdGxlOiAnRW5hYmxlIENvbm5lY3Rpb24gUG9vbGluZycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRW5hYmxlIGNvbm5lY3Rpb24gcG9vbGluZyB0byBpbXByb3ZlIHRocm91Z2hwdXQgYW5kIHJlZHVjZSBjb25uZWN0aW9uIG92ZXJoZWFkLicsXG4gICAgICAgIHJhdGlvbmFsZTogJ0xvdyB0aHJvdWdocHV0IHN1Z2dlc3RzIGNvbm5lY3Rpb24gcG9vbGluZyBjb3VsZCBwcm92aWRlIHNpZ25pZmljYW50IGJlbmVmaXRzLicsXG4gICAgICAgIGV4cGVjdGVkSW1wYWN0OiB7XG4gICAgICAgICAgcGVyZm9ybWFuY2VJbXByb3ZlbWVudDogNDAsXG4gICAgICAgICAgZXJyb3JSZWR1Y3Rpb246IDIwLFxuICAgICAgICAgIHJlbGlhYmlsaXR5SW1wcm92ZW1lbnQ6IDI1LFxuICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogMC45XG4gICAgICAgIH0sXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgZGlmZmljdWx0eTogJ21lZGl1bScsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogJzMgbWludXRlcycsXG4gICAgICAgICAgc3RlcHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdlbmFibGUtcG9vbGluZycsXG4gICAgICAgICAgICAgIHRpdGxlOiAnRW5hYmxlIENvbm5lY3Rpb24gUG9vbGluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJlIEhUVFAgY29ubmVjdGlvbiBwb29saW5nJyxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnYXV0b21hdGljJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgcmV2ZXJzaWJsZTogdHJ1ZSxcbiAgICAgICAgICByaXNrTGV2ZWw6ICdsb3cnXG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiAnUGVyZm9ybWFuY2UnLFxuICAgICAgICB0YWdzOiBbJ2Nvbm5lY3Rpb24tcG9vbGluZycsICd0aHJvdWdocHV0JywgJ3BlcmZvcm1hbmNlJ10sXG4gICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29uZmlndXJhdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVDb25maWd1cmF0aW9uUmVjb21tZW5kYXRpb25zKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IFByb21pc2U8UmVjb21tZW5kYXRpb25bXT4ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIHJldHJ5IGNvbmZpZ3VyYXRpb25cbiAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlID4gMC4wMykge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICBpZDogYHJldHJ5LWNvbmZpZy0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogUmVjb21tZW5kYXRpb25UeXBlLkNPTkZJR1VSQVRJT05fSU1QUk9WRU1FTlQsXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgdGl0bGU6ICdPcHRpbWl6ZSBSZXRyeSBDb25maWd1cmF0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdGaW5lLXR1bmUgcmV0cnkgYXR0ZW1wdHMgYW5kIGJhY2tvZmYgc3RyYXRlZ3kgdG8gaGFuZGxlIHRyYW5zaWVudCBlcnJvcnMgYmV0dGVyLicsXG4gICAgICAgIHJhdGlvbmFsZTogJ0Vycm9yIHJhdGUgc3VnZ2VzdHMgcmV0cnkgY29uZmlndXJhdGlvbiBjb3VsZCBiZSBvcHRpbWl6ZWQuJyxcbiAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6IHtcbiAgICAgICAgICBwZXJmb3JtYW5jZUltcHJvdmVtZW50OiAxMCxcbiAgICAgICAgICBlcnJvclJlZHVjdGlvbjogMzUsXG4gICAgICAgICAgcmVsaWFiaWxpdHlJbXByb3ZlbWVudDogNDAsXG4gICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiAwLjc1XG4gICAgICAgIH0sXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgZGlmZmljdWx0eTogJ21lZGl1bScsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogJzUgbWludXRlcycsXG4gICAgICAgICAgc3RlcHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjb25maWd1cmUtcmV0cnknLFxuICAgICAgICAgICAgICB0aXRsZTogJ0NvbmZpZ3VyZSBSZXRyeSBTdHJhdGVneScsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2V0IHVwIGV4cG9uZW50aWFsIGJhY2tvZmYgcmV0cnkgc3RyYXRlZ3knLFxuICAgICAgICAgICAgICBhY3Rpb246ICdtYW51YWwnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICByZXZlcnNpYmxlOiB0cnVlLFxuICAgICAgICAgIHJpc2tMZXZlbDogJ2xvdydcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6ICdDb25maWd1cmF0aW9uJyxcbiAgICAgICAgdGFnczogWydyZXRyeScsICdlcnJvci1oYW5kbGluZycsICdyZWxpYWJpbGl0eSddLFxuICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHByb2FjdGl2ZSBtYWludGVuYW5jZSByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVNYWludGVuYW5jZVJlY29tbWVuZGF0aW9ucyhjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBQcm9taXNlPFJlY29tbWVuZGF0aW9uW10+IHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW10gPSBbXTtcblxuICAgIC8vIENoZWNrIGZvciBoZWFsdGggbW9uaXRvcmluZyBvcHRpbWl6YXRpb25cbiAgICBjb25zdCBoZWFsdGhNb25pdG9yaW5nUmVjb21tZW5kYXRpb246IFJlY29tbWVuZGF0aW9uID0ge1xuICAgICAgaWQ6IGBoZWFsdGgtbW9uaXRvcmluZy0ke0RhdGUubm93KCl9YCxcbiAgICAgIHR5cGU6IFJlY29tbWVuZGF0aW9uVHlwZS5QUk9BQ1RJVkVfTUFJTlRFTkFOQ0UsXG4gICAgICBwcmlvcml0eTogJ2xvdycsXG4gICAgICB0aXRsZTogJ0VuaGFuY2UgSGVhbHRoIE1vbml0b3JpbmcnLFxuICAgICAgZGVzY3JpcHRpb246ICdTZXQgdXAgY29tcHJlaGVuc2l2ZSBoZWFsdGggbW9uaXRvcmluZyB0byBkZXRlY3QgaXNzdWVzIGVhcmx5LicsXG4gICAgICByYXRpb25hbGU6ICdQcm9hY3RpdmUgbW9uaXRvcmluZyBjYW4gcHJldmVudCBpc3N1ZXMgYmVmb3JlIHRoZXkgaW1wYWN0IHVzZXJzLicsXG4gICAgICBleHBlY3RlZEltcGFjdDoge1xuICAgICAgICBwZXJmb3JtYW5jZUltcHJvdmVtZW50OiA1LFxuICAgICAgICBlcnJvclJlZHVjdGlvbjogMjUsXG4gICAgICAgIHJlbGlhYmlsaXR5SW1wcm92ZW1lbnQ6IDM1LFxuICAgICAgICBjb25maWRlbmNlU2NvcmU6IDAuOFxuICAgICAgfSxcbiAgICAgIGltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgIGRpZmZpY3VsdHk6ICdlYXN5JyxcbiAgICAgICAgZXN0aW1hdGVkVGltZTogJzIgbWludXRlcycsXG4gICAgICAgIHN0ZXBzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdlbmFibGUtbW9uaXRvcmluZycsXG4gICAgICAgICAgICB0aXRsZTogJ0VuYWJsZSBFbmhhbmNlZCBNb25pdG9yaW5nJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVHVybiBvbiBjb21wcmVoZW5zaXZlIGhlYWx0aCBtb25pdG9yaW5nJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ2F1dG9tYXRpYydcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHJldmVyc2libGU6IHRydWUsXG4gICAgICAgIHJpc2tMZXZlbDogJ2xvdydcbiAgICAgIH0sXG4gICAgICBjYXRlZ29yeTogJ01haW50ZW5hbmNlJyxcbiAgICAgIHRhZ3M6IFsnbW9uaXRvcmluZycsICdwcm9hY3RpdmUnLCAnaGVhbHRoJ10sXG4gICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpXG4gICAgfTtcblxuICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKGhlYWx0aE1vbml0b3JpbmdSZWNvbW1lbmRhdGlvbik7XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBvcHRpbWFsIHRyYW5zcG9ydCBiYXNlZCBvbiBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGRldGVybWluZU9wdGltYWxUcmFuc3BvcnQoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxUcmFuc3BvcnRUeXBlPiB7XG4gICAgY29uc3QgZW52aXJvbm1lbnQgPSBjb250ZXh0LmVudmlyb25tZW50Q29udGV4dDtcbiAgICBjb25zdCBiZWhhdmlvciA9IGNvbnRleHQudXNlckJlaGF2aW9yO1xuICAgIFxuICAgIC8vIFNjb3JlIGVhY2ggYXZhaWxhYmxlIHRyYW5zcG9ydFxuICAgIGNvbnN0IHNjb3JlczogUmVjb3JkPFRyYW5zcG9ydFR5cGUsIG51bWJlcj4gPSB7fSBhcyBSZWNvcmQ8VHJhbnNwb3J0VHlwZSwgbnVtYmVyPjtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHRyYW5zcG9ydCBvZiBjb250ZXh0LmF2YWlsYWJsZVRyYW5zcG9ydHMpIHtcbiAgICAgIGxldCBzY29yZSA9IDA7XG4gICAgICBcbiAgICAgIHN3aXRjaCAodHJhbnNwb3J0KSB7XG4gICAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQ6XG4gICAgICAgICAgLy8gV2ViU29ja2V0IGlzIGdyZWF0IGZvciByZWFsLXRpbWUsIGxvdyBsYXRlbmN5IG5lZWRzXG4gICAgICAgICAgc2NvcmUgKz0gZW52aXJvbm1lbnQuY29ubmVjdGl2aXR5ID09PSAnZXhjZWxsZW50JyA/IDQwIDogMjA7XG4gICAgICAgICAgc2NvcmUgKz0gZW52aXJvbm1lbnQubGF0ZW5jeSA8IDUwID8gMzAgOiAxMDtcbiAgICAgICAgICBzY29yZSArPSBiZWhhdmlvci5wZXJmb3JtYW5jZVNlbnNpdGl2aXR5ID09PSAnaGlnaCcgPyAyMCA6IDEwO1xuICAgICAgICAgIHNjb3JlICs9IGJlaGF2aW9yLnVzYWdlRnJlcXVlbmN5ID09PSAnaGlnaCcgPyAxMCA6IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgXG4gICAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5IVFRQOlxuICAgICAgICAgIC8vIEhUVFAgaXMgcmVsaWFibGUgYW5kIHdpZGVseSBjb21wYXRpYmxlXG4gICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIEJhc2UgcmVsaWFiaWxpdHkgc2NvcmVcbiAgICAgICAgICBzY29yZSArPSBlbnZpcm9ubWVudC5jb25uZWN0aXZpdHkgPT09ICdwb29yJyA/IDIwIDogMTA7XG4gICAgICAgICAgc2NvcmUgKz0gYmVoYXZpb3IuZXJyb3JUb2xlcmFuY2UgPT09ICdsb3cnID8gMjAgOiAxMDtcbiAgICAgICAgICBzY29yZSArPSAxNTsgLy8gV2lkZSBjb21wYXRpYmlsaXR5IGJvbnVzXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgXG4gICAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNOlxuICAgICAgICAgIC8vIEZpbGVTeXN0ZW0gaXMgZ29vZCBmb3Igb2ZmbGluZSBzY2VuYXJpb3NcbiAgICAgICAgICBzY29yZSArPSBlbnZpcm9ubWVudC5jb25uZWN0aXZpdHkgPT09ICdwb29yJyA/IDQwIDogNTtcbiAgICAgICAgICBzY29yZSArPSBiZWhhdmlvci51c2FnZUZyZXF1ZW5jeSA9PT0gJ2xvdycgPyAyMCA6IDA7XG4gICAgICAgICAgc2NvcmUgKz0gMTA7IC8vIE9mZmxpbmUgY2FwYWJpbGl0eSBib251c1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgXG4gICAgICBzY29yZXNbdHJhbnNwb3J0XSA9IHNjb3JlO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdHJhbnNwb3J0IHdpdGggaGlnaGVzdCBzY29yZVxuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhzY29yZXMpLnJlZHVjZSgoYSwgYikgPT4gc2NvcmVzW2FbMF0gYXMgVHJhbnNwb3J0VHlwZV0gPiBzY29yZXNbYlswXSBhcyBUcmFuc3BvcnRUeXBlXSA/IGEgOiBiKVswXSBhcyBUcmFuc3BvcnRUeXBlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHJhdGlvbmFsZSBmb3IgdHJhbnNwb3J0IHN3aXRjaCByZWNvbW1lbmRhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRyYW5zcG9ydFN3aXRjaFJhdGlvbmFsZShjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQsIHJlY29tbWVuZGVkVHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXJyZW50ID0gY29udGV4dC5jdXJyZW50VHJhbnNwb3J0O1xuICAgIGNvbnN0IGVudiA9IGNvbnRleHQuZW52aXJvbm1lbnRDb250ZXh0O1xuICAgIFxuICAgIGxldCByYXRpb25hbGUgPSBgU3dpdGNoaW5nIGZyb20gJHtjdXJyZW50fSB0byAke3JlY29tbWVuZGVkVHJhbnNwb3J0fSBpcyByZWNvbW1lbmRlZCBiZWNhdXNlOiBgO1xuICAgIFxuICAgIHN3aXRjaCAocmVjb21tZW5kZWRUcmFuc3BvcnQpIHtcbiAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQ6XG4gICAgICAgIHJhdGlvbmFsZSArPSAnV2ViU29ja2V0IHByb3ZpZGVzIHJlYWwtdGltZSBjb21tdW5pY2F0aW9uIHdpdGggbG93ZXIgbGF0ZW5jeSwgJztcbiAgICAgICAgaWYgKGVudi5jb25uZWN0aXZpdHkgPT09ICdleGNlbGxlbnQnKSB7XG4gICAgICAgICAgcmF0aW9uYWxlICs9ICdhbmQgeW91ciBleGNlbGxlbnQgY29ubmVjdGl2aXR5IHN1cHBvcnRzIHN0YWJsZSBXZWJTb2NrZXQgY29ubmVjdGlvbnMuJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRpb25hbGUgKz0gJ3doaWNoIHdvdWxkIGJlbmVmaXQgeW91ciB1c2FnZSBwYXR0ZXJucy4nO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5IVFRQOlxuICAgICAgICByYXRpb25hbGUgKz0gJ0hUVFAgb2ZmZXJzIHN1cGVyaW9yIHJlbGlhYmlsaXR5IGFuZCBlcnJvciBoYW5kbGluZywgJztcbiAgICAgICAgaWYgKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSA+IDAuMDUpIHtcbiAgICAgICAgICByYXRpb25hbGUgKz0gJ3doaWNoIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IGdpdmVuIHlvdXIgY3VycmVudCBlcnJvciByYXRlLic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmF0aW9uYWxlICs9ICdwcm92aWRpbmcgYSBtb3JlIHN0YWJsZSBmb3VuZGF0aW9uIGZvciB5b3VyIHVzYWdlLic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU06XG4gICAgICAgIHJhdGlvbmFsZSArPSAnRmlsZVN5c3RlbSB0cmFuc3BvcnQgcHJvdmlkZXMgb2ZmbGluZSBjYXBhYmlsaXR5IGFuZCBsb2NhbCBzdG9yYWdlIGJlbmVmaXRzLCAnO1xuICAgICAgICBpZiAoZW52LmNvbm5lY3Rpdml0eSA9PT0gJ3Bvb3InKSB7XG4gICAgICAgICAgcmF0aW9uYWxlICs9ICd3aGljaCBpcyBpZGVhbCBmb3IgeW91ciBjdXJyZW50IGNvbm5lY3Rpdml0eSBzaXR1YXRpb24uJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRpb25hbGUgKz0gJ29mZmVyaW5nIGJldHRlciBwZXJmb3JtYW5jZSBmb3IgeW91ciB1c2FnZSBwYXR0ZXJucy4nO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmF0aW9uYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIFByaW9yaXRpemUgcmVjb21tZW5kYXRpb25zIGJ5IGltcGFjdCBhbmQgZmVhc2liaWxpdHlcbiAgICovXG4gIHByaXZhdGUgcHJpb3JpdGl6ZVJlY29tbWVuZGF0aW9ucyhyZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW10pOiBSZWNvbW1lbmRhdGlvbltdIHtcbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIC8vIEZpcnN0LCBzb3J0IGJ5IHByaW9yaXR5XG4gICAgICBjb25zdCBwcmlvcml0eU9yZGVyID0geyAnY3JpdGljYWwnOiA0LCAnaGlnaCc6IDMsICdtZWRpdW0nOiAyLCAnbG93JzogMSB9O1xuICAgICAgY29uc3QgcHJpb3JpdHlEaWZmID0gcHJpb3JpdHlPcmRlcltiLnByaW9yaXR5XSAtIHByaW9yaXR5T3JkZXJbYS5wcmlvcml0eV07XG4gICAgICBpZiAocHJpb3JpdHlEaWZmICE9PSAwKSByZXR1cm4gcHJpb3JpdHlEaWZmO1xuICAgICAgXG4gICAgICAvLyBUaGVuIGJ5IGV4cGVjdGVkIGltcGFjdCBzY29yZSAoY29tYmluYXRpb24gb2YgcGVyZm9ybWFuY2UgYW5kIGNvbmZpZGVuY2UpXG4gICAgICBjb25zdCBpbXBhY3RBID0gYS5leHBlY3RlZEltcGFjdC5wZXJmb3JtYW5jZUltcHJvdmVtZW50ICogYS5leHBlY3RlZEltcGFjdC5jb25maWRlbmNlU2NvcmU7XG4gICAgICBjb25zdCBpbXBhY3RCID0gYi5leHBlY3RlZEltcGFjdC5wZXJmb3JtYW5jZUltcHJvdmVtZW50ICogYi5leHBlY3RlZEltcGFjdC5jb25maWRlbmNlU2NvcmU7XG4gICAgICByZXR1cm4gaW1wYWN0QiAtIGltcGFjdEE7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgaW5zaWdodHMgZnJvbSBjdXJyZW50IHBlcmZvcm1hbmNlIGRhdGFcbiAgICovXG4gIGFzeW5jIGdlbmVyYXRlSW5zaWdodHMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxJbnNpZ2h0Q2F0ZWdvcnlbXT4ge1xuICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5nZW5lcmF0ZUluc2lnaHRDYWNoZUtleShjb250ZXh0KTtcbiAgICBcbiAgICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICAgIGlmICh0aGlzLmluc2lnaHRDYWNoZS5oYXMoY2FjaGVLZXkpKSB7XG4gICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmluc2lnaHRDYWNoZS5nZXQoY2FjaGVLZXkpITtcbiAgICAgIC8vIFJldHVybiBjYWNoZWQgaW5zaWdodHMgaWYgbGVzcyB0aGFuIDEwIG1pbnV0ZXMgb2xkXG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIGNhY2hlZFswXT8uaW5zaWdodHNbMF0/LmRhdGE/LnRpbWVzdGFtcCA8IDEwICogNjAgKiAxMDAwKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGluc2lnaHRzOiBJbnNpZ2h0Q2F0ZWdvcnlbXSA9IFtdO1xuICAgIFxuICAgIC8vIFBlcmZvcm1hbmNlIGluc2lnaHRzXG4gICAgY29uc3QgcGVyZm9ybWFuY2VJbnNpZ2h0cyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVQZXJmb3JtYW5jZUluc2lnaHRzKGNvbnRleHQpO1xuICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgbmFtZTogJ1BlcmZvcm1hbmNlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ3VycmVudCBwZXJmb3JtYW5jZSBhbmFseXNpcyBhbmQgdHJlbmRzJyxcbiAgICAgIHByaW9yaXR5OiAxLFxuICAgICAgaW5zaWdodHM6IHBlcmZvcm1hbmNlSW5zaWdodHNcbiAgICB9KTtcbiAgICBcbiAgICAvLyBVc2FnZSBpbnNpZ2h0c1xuICAgIGNvbnN0IHVzYWdlSW5zaWdodHMgPSBhd2FpdCB0aGlzLmdlbmVyYXRlVXNhZ2VJbnNpZ2h0cyhjb250ZXh0KTtcbiAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgIG5hbWU6ICdVc2FnZSBQYXR0ZXJucycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5c2lzIG9mIHlvdXIgdXNhZ2UgcGF0dGVybnMgYW5kIGJlaGF2aW9yJyxcbiAgICAgIHByaW9yaXR5OiAyLFxuICAgICAgaW5zaWdodHM6IHVzYWdlSW5zaWdodHNcbiAgICB9KTtcbiAgICBcbiAgICAvLyBUcmFuc3BvcnQgaW5zaWdodHNcbiAgICBjb25zdCB0cmFuc3BvcnRJbnNpZ2h0cyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVUcmFuc3BvcnRJbnNpZ2h0cyhjb250ZXh0KTtcbiAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgIG5hbWU6ICdUcmFuc3BvcnQgQW5hbHlzaXMnLFxuICAgICAgZGVzY3JpcHRpb246ICdUcmFuc3BvcnQgcGVyZm9ybWFuY2UgYW5kIG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzJyxcbiAgICAgIHByaW9yaXR5OiAzLFxuICAgICAgaW5zaWdodHM6IHRyYW5zcG9ydEluc2lnaHRzXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FjaGUgaW5zaWdodHNcbiAgICB0aGlzLmluc2lnaHRDYWNoZS5zZXQoY2FjaGVLZXksIGluc2lnaHRzKTtcbiAgICBcbiAgICByZXR1cm4gaW5zaWdodHM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcGVyZm9ybWFuY2UtcmVsYXRlZCBpbnNpZ2h0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVBlcmZvcm1hbmNlSW5zaWdodHMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxJbnNpZ2h0W10+IHtcbiAgICBjb25zdCBpbnNpZ2h0czogSW5zaWdodFtdID0gW107XG4gICAgY29uc3QgbWV0cmljcyA9IGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzO1xuICAgIFxuICAgIC8vIExhdGVuY3kgaW5zaWdodFxuICAgIGlmIChtZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5IDwgMjAwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdsb3ctbGF0ZW5jeScsXG4gICAgICAgIHRpdGxlOiAnRXhjZWxsZW50IFJlc3BvbnNlIFRpbWUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFlvdXIgYXZlcmFnZSByZXNwb25zZSB0aW1lIG9mICR7bWV0cmljcy5hdmVyYWdlTGF0ZW5jeX1tcyBpcyBleGNlbGxlbnQuYCxcbiAgICAgICAgdHlwZTogJ3Bvc2l0aXZlJyxcbiAgICAgICAgY29uZmlkZW5jZTogMC45LFxuICAgICAgICBkYXRhOiB7IGxhdGVuY3k6IG1ldHJpY3MuYXZlcmFnZUxhdGVuY3ksIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9LFxuICAgICAgICBhY3Rpb25hYmxlOiBmYWxzZSxcbiAgICAgICAgcmVsYXRlZDogW11cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobWV0cmljcy5hdmVyYWdlTGF0ZW5jeSA+IDUwMCkge1xuICAgICAgaW5zaWdodHMucHVzaCh7XG4gICAgICAgIGlkOiAnaGlnaC1sYXRlbmN5JyxcbiAgICAgICAgdGl0bGU6ICdIaWdoIFJlc3BvbnNlIFRpbWUgRGV0ZWN0ZWQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFlvdXIgYXZlcmFnZSByZXNwb25zZSB0aW1lIG9mICR7bWV0cmljcy5hdmVyYWdlTGF0ZW5jeX1tcyBjb3VsZCBiZSBpbXByb3ZlZC5gLFxuICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuODUsXG4gICAgICAgIGRhdGE6IHsgbGF0ZW5jeTogbWV0cmljcy5hdmVyYWdlTGF0ZW5jeSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIGFjdGlvbmFibGU6IHRydWUsXG4gICAgICAgIHJlbGF0ZWQ6IFtdXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gRXJyb3IgcmF0ZSBpbnNpZ2h0XG4gICAgaWYgKG1ldHJpY3MuZXJyb3JSYXRlIDwgMC4wMSkge1xuICAgICAgaW5zaWdodHMucHVzaCh7XG4gICAgICAgIGlkOiAnbG93LWVycm9yLXJhdGUnLFxuICAgICAgICB0aXRsZTogJ0xvdyBFcnJvciBSYXRlJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBZb3VyIGVycm9yIHJhdGUgb2YgJHsobWV0cmljcy5lcnJvclJhdGUgKiAxMDApLnRvRml4ZWQoMil9JSBpcyB2ZXJ5IGdvb2QuYCxcbiAgICAgICAgdHlwZTogJ3Bvc2l0aXZlJyxcbiAgICAgICAgY29uZmlkZW5jZTogMC45LFxuICAgICAgICBkYXRhOiB7IGVycm9yUmF0ZTogbWV0cmljcy5lcnJvclJhdGUsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9LFxuICAgICAgICBhY3Rpb25hYmxlOiBmYWxzZSxcbiAgICAgICAgcmVsYXRlZDogW11cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobWV0cmljcy5lcnJvclJhdGUgPiAwLjA1KSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdoaWdoLWVycm9yLXJhdGUnLFxuICAgICAgICB0aXRsZTogJ0hpZ2ggRXJyb3IgUmF0ZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgWW91ciBlcnJvciByYXRlIG9mICR7KG1ldHJpY3MuZXJyb3JSYXRlICogMTAwKS50b0ZpeGVkKDIpfSUgbmVlZHMgYXR0ZW50aW9uLmAsXG4gICAgICAgIHR5cGU6ICdjcml0aWNhbCcsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuOTUsXG4gICAgICAgIGRhdGE6IHsgZXJyb3JSYXRlOiBtZXRyaWNzLmVycm9yUmF0ZSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIGFjdGlvbmFibGU6IHRydWUsXG4gICAgICAgIHJlbGF0ZWQ6IFtdXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGluc2lnaHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHVzYWdlIHBhdHRlcm4gaW5zaWdodHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVVc2FnZUluc2lnaHRzKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IFByb21pc2U8SW5zaWdodFtdPiB7XG4gICAgY29uc3QgaW5zaWdodHM6IEluc2lnaHRbXSA9IFtdO1xuICAgIGNvbnN0IGJlaGF2aW9yID0gY29udGV4dC51c2VyQmVoYXZpb3I7XG4gICAgXG4gICAgLy8gVXNhZ2UgZnJlcXVlbmN5IGluc2lnaHRcbiAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgIGlkOiAndXNhZ2UtZnJlcXVlbmN5JyxcbiAgICAgIHRpdGxlOiAnVXNhZ2UgUGF0dGVybiBBbmFseXNpcycsXG4gICAgICBkZXNjcmlwdGlvbjogYFlvdXIgdXNhZ2UgZnJlcXVlbmN5IGlzICR7YmVoYXZpb3IudXNhZ2VGcmVxdWVuY3l9LiAke3RoaXMuZ2V0VXNhZ2VGcmVxdWVuY3lBZHZpY2UoYmVoYXZpb3IudXNhZ2VGcmVxdWVuY3kpfWAsXG4gICAgICB0eXBlOiAnbmV1dHJhbCcsXG4gICAgICBjb25maWRlbmNlOiAwLjgsXG4gICAgICBkYXRhOiB7IGZyZXF1ZW5jeTogYmVoYXZpb3IudXNhZ2VGcmVxdWVuY3ksIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9LFxuICAgICAgYWN0aW9uYWJsZTogYmVoYXZpb3IudXNhZ2VGcmVxdWVuY3kgIT09ICdtZWRpdW0nLFxuICAgICAgcmVsYXRlZDogW11cbiAgICB9KTtcbiAgICBcbiAgICAvLyBQZWFrIHVzYWdlIGluc2lnaHRcbiAgICBpZiAoYmVoYXZpb3IucGVha1VzYWdlSG91cnMubGVuZ3RoID4gMCkge1xuICAgICAgaW5zaWdodHMucHVzaCh7XG4gICAgICAgIGlkOiAncGVhay11c2FnZScsXG4gICAgICAgIHRpdGxlOiAnUGVhayBVc2FnZSBIb3VycycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgWW91ciBwZWFrIHVzYWdlIG9jY3VycyBkdXJpbmcgaG91cnM6ICR7YmVoYXZpb3IucGVha1VzYWdlSG91cnMuam9pbignLCAnKX0uIENvbnNpZGVyIG9wdGltaXppbmcgZm9yIHRoZXNlIHRpbWVzLmAsXG4gICAgICAgIHR5cGU6ICduZXV0cmFsJyxcbiAgICAgICAgY29uZmlkZW5jZTogMC43LFxuICAgICAgICBkYXRhOiB7IHBlYWtIb3VyczogYmVoYXZpb3IucGVha1VzYWdlSG91cnMsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9LFxuICAgICAgICBhY3Rpb25hYmxlOiB0cnVlLFxuICAgICAgICByZWxhdGVkOiBbXVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBpbnNpZ2h0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB0cmFuc3BvcnQtc3BlY2lmaWMgaW5zaWdodHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVUcmFuc3BvcnRJbnNpZ2h0cyhjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBQcm9taXNlPEluc2lnaHRbXT4ge1xuICAgIGNvbnN0IGluc2lnaHRzOiBJbnNpZ2h0W10gPSBbXTtcbiAgICBjb25zdCB1c2FnZSA9IGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLnRyYW5zcG9ydFVzYWdlO1xuICAgIFxuICAgIC8vIFRyYW5zcG9ydCBkaXN0cmlidXRpb24gaW5zaWdodFxuICAgIGNvbnN0IHRvdGFsVXNhZ2UgPSBPYmplY3QudmFsdWVzKHVzYWdlKS5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwsIDApO1xuICAgIGNvbnN0IGRvbWluYW50VHJhbnNwb3J0ID0gT2JqZWN0LmVudHJpZXModXNhZ2UpLnJlZHVjZSgoYSwgYikgPT4gdXNhZ2VbYVswXSBhcyBUcmFuc3BvcnRUeXBlXSA+IHVzYWdlW2JbMF0gYXMgVHJhbnNwb3J0VHlwZV0gPyBhIDogYik7XG4gICAgXG4gICAgaWYgKHRvdGFsVXNhZ2UgPiAwKSB7XG4gICAgICBjb25zdCBkb21pbmFudFBlcmNlbnRhZ2UgPSAodXNhZ2VbZG9taW5hbnRUcmFuc3BvcnRbMF0gYXMgVHJhbnNwb3J0VHlwZV0gLyB0b3RhbFVzYWdlICogMTAwKTtcbiAgICAgIFxuICAgICAgaWYgKGRvbWluYW50UGVyY2VudGFnZSA+IDgwKSB7XG4gICAgICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgICAgIGlkOiAndHJhbnNwb3J0LWNvbmNlbnRyYXRpb24nLFxuICAgICAgICAgIHRpdGxlOiAnSGVhdnkgUmVsaWFuY2Ugb24gU2luZ2xlIFRyYW5zcG9ydCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBZb3UncmUgdXNpbmcgJHtkb21pbmFudFRyYW5zcG9ydFswXX0gZm9yICR7ZG9taW5hbnRQZXJjZW50YWdlLnRvRml4ZWQoMSl9JSBvZiByZXF1ZXN0cy4gQ29uc2lkZXIgbG9hZCBiYWxhbmNpbmcuYCxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC44LFxuICAgICAgICAgIGRhdGE6IHsgZGlzdHJpYnV0aW9uOiB1c2FnZSwgZG9taW5hbnQ6IGRvbWluYW50VHJhbnNwb3J0WzBdLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICAgICAgICBhY3Rpb25hYmxlOiB0cnVlLFxuICAgICAgICAgIHJlbGF0ZWQ6IFtdXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zaWdodHMucHVzaCh7XG4gICAgICAgICAgaWQ6ICdiYWxhbmNlZC10cmFuc3BvcnQtdXNhZ2UnLFxuICAgICAgICAgIHRpdGxlOiAnR29vZCBUcmFuc3BvcnQgRGlzdHJpYnV0aW9uJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1lvdXIgdHJhbnNwb3J0IHVzYWdlIGlzIHdlbGwgYmFsYW5jZWQgYWNyb3NzIGF2YWlsYWJsZSBvcHRpb25zLicsXG4gICAgICAgICAgdHlwZTogJ3Bvc2l0aXZlJyxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjc1LFxuICAgICAgICAgIGRhdGE6IHsgZGlzdHJpYnV0aW9uOiB1c2FnZSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgICAgYWN0aW9uYWJsZTogZmFsc2UsXG4gICAgICAgICAgcmVsYXRlZDogW11cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBpbnNpZ2h0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwcmVkaWN0aXZlIGFsZXJ0cyBmb3IgcG90ZW50aWFsIGlzc3Vlc1xuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVQcmVkaWN0aXZlQWxlcnRzKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IFByb21pc2U8UHJlZGljdGl2ZUFsZXJ0W10+IHtcbiAgICBjb25zdCBhbGVydHM6IFByZWRpY3RpdmVBbGVydFtdID0gW107XG4gICAgXG4gICAgLy8gUHJlZGljdCBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvblxuICAgIGNvbnN0IHBlcmZvcm1hbmNlVHJlbmQgPSB0aGlzLmFuYWx5emVQZXJmb3JtYW5jZVRyZW5kKGNvbnRleHQpO1xuICAgIGlmIChwZXJmb3JtYW5jZVRyZW5kLmRlY2xpbmluZyAmJiBwZXJmb3JtYW5jZVRyZW5kLnNldmVyaXR5ID4gMC43KSB7XG4gICAgICBhbGVydHMucHVzaCh7XG4gICAgICAgIGlkOiBgcGVyZi1kZWdyYWRhdGlvbi0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogJ3BlcmZvcm1hbmNlX2RlZ3JhZGF0aW9uJyxcbiAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcbiAgICAgICAgcHJvYmFiaWxpdHk6IHBlcmZvcm1hbmNlVHJlbmQuc2V2ZXJpdHksXG4gICAgICAgIHRpbWVmcmFtZTogJzI0aCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUGVyZm9ybWFuY2UgZGVncmFkYXRpb24gdHJlbmQgZGV0ZWN0ZWQuIFJlc3BvbnNlIHRpbWVzIG1heSBpbmNyZWFzZSBzaWduaWZpY2FudGx5LicsXG4gICAgICAgIHByZXZlbnRpdmVBY3Rpb25zOiBbXSxcbiAgICAgICAgdHJpZ2dlcnM6IFsnaW5jcmVhc2luZ19sYXRlbmN5JywgJ2Vycm9yX3JhdGVfcmlzZSddXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gUHJlZGljdCB0cmFuc3BvcnQgZmFpbHVyZVxuICAgIGlmIChjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgPiAwLjEpIHtcbiAgICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgICAgaWQ6IGB0cmFuc3BvcnQtZmFpbHVyZS0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogJ3RyYW5zcG9ydF9mYWlsdXJlJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXG4gICAgICAgIHByb2JhYmlsaXR5OiBNYXRoLm1pbihjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgKiAyLCAwLjkpLFxuICAgICAgICB0aW1lZnJhbWU6ICcxaCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgJHtjb250ZXh0LmN1cnJlbnRUcmFuc3BvcnR9IHRyYW5zcG9ydCBzaG93aW5nIGhpZ2ggZXJyb3IgcmF0ZS4gRmFpbHVyZSByaXNrIGlzIGVsZXZhdGVkLmAsXG4gICAgICAgIHByZXZlbnRpdmVBY3Rpb25zOiBbXSxcbiAgICAgICAgdHJpZ2dlcnM6IFsnaGlnaF9lcnJvcl9yYXRlJywgJ2Nvbm5lY3Rpb25faW5zdGFiaWxpdHknXVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBhbGVydHM7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBwZXJmb3JtYW5jZSB0cmVuZCBmcm9tIGhpc3RvcmljYWwgZGF0YVxuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplUGVyZm9ybWFuY2VUcmVuZChjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiB7IGRlY2xpbmluZzogYm9vbGVhbjsgc2V2ZXJpdHk6IG51bWJlciB9IHtcbiAgICAvLyBTaW11bGF0ZSB0cmVuZCBhbmFseXNpcyAtIGluIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgYW5hbHl6ZSBoaXN0b3JpY2FsIGRhdGFcbiAgICBjb25zdCByZWNlbnRMYXRlbmN5ID0gY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZUxhdGVuY3k7XG4gICAgY29uc3QgcmVjZW50RXJyb3JSYXRlID0gY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlO1xuICAgIFxuICAgIC8vIFNpbXBsZSBoZXVyaXN0aWMgZm9yIHRyZW5kIGFuYWx5c2lzXG4gICAgY29uc3QgbGF0ZW5jeVNjb3JlID0gTWF0aC5taW4ocmVjZW50TGF0ZW5jeSAvIDEwMDAsIDEpOyAvLyBOb3JtYWxpemUgdG8gMC0xXG4gICAgY29uc3QgZXJyb3JTY29yZSA9IE1hdGgubWluKHJlY2VudEVycm9yUmF0ZSAqIDEwLCAxKTsgLy8gTm9ybWFsaXplIHRvIDAtMVxuICAgIFxuICAgIGNvbnN0IHNldmVyaXR5ID0gKGxhdGVuY3lTY29yZSArIGVycm9yU2NvcmUpIC8gMjtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgZGVjbGluaW5nOiBzZXZlcml0eSA+IDAuNSxcbiAgICAgIHNldmVyaXR5OiBzZXZlcml0eVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFkdmljZSBiYXNlZCBvbiB1c2FnZSBmcmVxdWVuY3lcbiAgICovXG4gIHByaXZhdGUgZ2V0VXNhZ2VGcmVxdWVuY3lBZHZpY2UoZnJlcXVlbmN5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoZnJlcXVlbmN5KSB7XG4gICAgICBjYXNlICdsb3cnOlxuICAgICAgICByZXR1cm4gJ0NvbnNpZGVyIHVzaW5nIEZpbGVTeXN0ZW0gdHJhbnNwb3J0IGZvciBiZXR0ZXIgb2ZmbGluZSBjYXBhYmlsaXR5Lic7XG4gICAgICBjYXNlICdoaWdoJzpcbiAgICAgICAgcmV0dXJuICdXZWJTb2NrZXQgdHJhbnNwb3J0IG1pZ2h0IHByb3ZpZGUgYmV0dGVyIHBlcmZvcm1hbmNlIGZvciB5b3VyIGludGVuc2l2ZSB1c2FnZS4nO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdZb3VyIGN1cnJlbnQgY29uZmlndXJhdGlvbiBzaG91bGQgd29yayB3ZWxsIGZvciB5b3VyIHVzYWdlIHBhdHRlcm5zLic7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNhY2hlIGtleSBmb3IgaW5zaWdodHNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJbnNpZ2h0Q2FjaGVLZXkoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGluc2lnaHRzLSR7Y29udGV4dC5zZXNzaW9uSWR9LSR7Y29udGV4dC5jdXJyZW50VHJhbnNwb3J0fS0ke01hdGguZmxvb3IoRGF0ZS5ub3coKSAvICgxMCAqIDYwICogMTAwMCkpfWA7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwcmVkaWN0aW9uIG1vZGVscyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBNTCBtb2RlbHMpXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVQcmVkaWN0aW9uTW9kZWxzKCk6IHZvaWQge1xuICAgIC8vIFBsYWNlaG9sZGVyIGZvciBmdXR1cmUgbWFjaGluZSBsZWFybmluZyBtb2RlbCBpbml0aWFsaXphdGlvblxuICAgIHRoaXMucHJlZGljdGlvbk1vZGVscy5zZXQoJ3BlcmZvcm1hbmNlX3RyZW5kJywge1xuICAgICAgdHlwZTogJ2xpbmVhcl9yZWdyZXNzaW9uJyxcbiAgICAgIGZlYXR1cmVzOiBbJ2xhdGVuY3knLCAnZXJyb3JfcmF0ZScsICd0aHJvdWdocHV0J10sXG4gICAgICB0cmFpbmVkOiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMucHJlZGljdGlvbk1vZGVscy5zZXQoJ2ZhaWx1cmVfcHJlZGljdGlvbicsIHtcbiAgICAgIHR5cGU6ICdjbGFzc2lmaWNhdGlvbicsXG4gICAgICBmZWF0dXJlczogWydlcnJvcl9yYXRlJywgJ2xhdGVuY3lfdmFyaWFuY2UnLCAnY29ubmVjdGlvbl9mYWlsdXJlcyddLFxuICAgICAgdHJhaW5lZDogZmFsc2VcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFjayByZWNvbW1lbmRhdGlvbiBlZmZlY3RpdmVuZXNzIChjYWxsZWQgYWZ0ZXIgaW1wbGVtZW50YXRpb24pXG4gICAqL1xuICB0cmFja1JlY29tbWVuZGF0aW9uRWZmZWN0aXZlbmVzcyhyZWNvbW1lbmRhdGlvbklkOiBzdHJpbmcsIGVmZmVjdGl2ZW5lc3M6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uID0gdGhpcy5hcHBsaWVkUmVjb21tZW5kYXRpb25zLmdldChyZWNvbW1lbmRhdGlvbklkKTtcbiAgICBpZiAocmVjb21tZW5kYXRpb24pIHtcbiAgICAgIHJlY29tbWVuZGF0aW9uLmVmZmVjdGl2ZW5lc3MgPSBlZmZlY3RpdmVuZXNzO1xuICAgICAgcmVjb21tZW5kYXRpb24uYXBwbGllZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHByZWRpY3Rpb24gbW9kZWxzIGJhc2VkIG9uIGZlZWRiYWNrIChmdXR1cmUgZW5oYW5jZW1lbnQpXG4gICAgICBjb25zb2xlLmxvZyhgUmVjb21tZW5kYXRpb24gJHtyZWNvbW1lbmRhdGlvbklkfSBlZmZlY3RpdmVuZXNzOiAke2VmZmVjdGl2ZW5lc3N9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNvbW1lbmRhdGlvbiBzdGF0aXN0aWNzXG4gICAqL1xuICBnZXRSZWNvbW1lbmRhdGlvblN0YXRzKCk6IHtcbiAgICB0b3RhbDogbnVtYmVyO1xuICAgIGFwcGxpZWQ6IG51bWJlcjtcbiAgICBhdmVyYWdlRWZmZWN0aXZlbmVzczogbnVtYmVyO1xuICAgIGJ5VHlwZTogUmVjb3JkPFJlY29tbWVuZGF0aW9uVHlwZSwgbnVtYmVyPjtcbiAgfSB7XG4gICAgY29uc3QgYXBwbGllZCA9IEFycmF5LmZyb20odGhpcy5hcHBsaWVkUmVjb21tZW5kYXRpb25zLnZhbHVlcygpKS5maWx0ZXIociA9PiByLmFwcGxpZWRBdCk7XG4gICAgY29uc3QgZWZmZWN0aXZlbmVzcyA9IGFwcGxpZWQuZmlsdGVyKHIgPT4gci5lZmZlY3RpdmVuZXNzICE9PSB1bmRlZmluZWQpO1xuICAgIFxuICAgIGNvbnN0IGJ5VHlwZTogUmVjb3JkPFJlY29tbWVuZGF0aW9uVHlwZSwgbnVtYmVyPiA9IHt9IGFzIFJlY29yZDxSZWNvbW1lbmRhdGlvblR5cGUsIG51bWJlcj47XG4gICAgYXBwbGllZC5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICBieVR5cGVbcmVjLnR5cGVdID0gKGJ5VHlwZVtyZWMudHlwZV0gfHwgMCkgKyAxO1xuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbDogdGhpcy5hcHBsaWVkUmVjb21tZW5kYXRpb25zLnNpemUsXG4gICAgICBhcHBsaWVkOiBhcHBsaWVkLmxlbmd0aCxcbiAgICAgIGF2ZXJhZ2VFZmZlY3RpdmVuZXNzOiBlZmZlY3RpdmVuZXNzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gZWZmZWN0aXZlbmVzcy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgKHIuZWZmZWN0aXZlbmVzcyB8fCAwKSwgMCkgLyBlZmZlY3RpdmVuZXNzLmxlbmd0aCBcbiAgICAgICAgOiAwLFxuICAgICAgYnlUeXBlXG4gICAgfTtcbiAgfVxufVxuIiwiLyoqXG4gKiBCYXNlIHRyYW5zcG9ydCBpbXBsZW1lbnRhdGlvbiB3aXRoIGNvbW1vbiBmdW5jdGlvbmFsaXR5XG4gKiBBbGwgc3BlY2lmaWMgdHJhbnNwb3J0IHR5cGVzIGV4dGVuZCB0aGlzIGJhc2UgY2xhc3NcbiAqL1xuXG5pbXBvcnQgeyBcbiAgRGV2UGlwZVRyYW5zcG9ydCwgXG4gIFRyYW5zcG9ydFR5cGUsIFxuICBUcmFuc3BvcnRDb25maWcsIFxuICBUcmFuc3BvcnRIZWFsdGhTdGF0dXMsIFxuICBIZWFsdGhDaGVja1Jlc3VsdCxcbiAgRXZlbnRMaXN0ZW5lcixcbiAgVHJhbnNwb3J0RXZlbnQsXG4gIERldlBpcGVNZXNzYWdlLFxuICBEZXZQaXBlUmVzcG9uc2UsXG4gIFRyYW5zcG9ydENhcGFiaWxpdGllc1xufSBmcm9tICcuL0RldlBpcGVUcmFuc3BvcnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENpcmN1aXRCcmVha2VyQ29uZmlnIHtcbiAgZmFpbHVyZVRocmVzaG9sZDogbnVtYmVyO1xuICByZXNldFRpbWVvdXQ6IG51bWJlcjtcbiAgbW9uaXRvcmluZ1BlcmlvZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydE1ldHJpY3Mge1xuICBtZXNzYWdlc1NlbnQ6IG51bWJlcjtcbiAgbWVzc2FnZXNSZWNlaXZlZDogbnVtYmVyO1xuICBlcnJvcnM6IG51bWJlcjtcbiAgdG90YWxMYXRlbmN5OiBudW1iZXI7XG4gIGxhc3RBY3Rpdml0eTogbnVtYmVyO1xufVxuXG4vKipcbiAqIENpcmN1aXQgYnJlYWtlciBwYXR0ZXJuIGltcGxlbWVudGF0aW9uIGZvciB0cmFuc3BvcnQgcmVsaWFiaWxpdHlcbiAqL1xuZXhwb3J0IGNsYXNzIENpcmN1aXRCcmVha2VyIHtcbiAgcHJpdmF0ZSBzdGF0ZTogJ2Nsb3NlZCcgfCAnb3BlbicgfCAnaGFsZi1vcGVuJyA9ICdjbG9zZWQnO1xuICBwcml2YXRlIGZhaWx1cmVDb3VudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBsYXN0RmFpbHVyZVRpbWU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgbmV4dEF0dGVtcHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgY29uZmlnOiBDaXJjdWl0QnJlYWtlckNvbmZpZztcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IENpcmN1aXRCcmVha2VyQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cblxuICBhc3luYyBleGVjdXRlPFQ+KG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICAgIGlmICh0aGlzLnN0YXRlID09PSAnb3BlbicpIHtcbiAgICAgIGlmIChEYXRlLm5vdygpIDwgdGhpcy5uZXh0QXR0ZW1wdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NpcmN1aXQgYnJlYWtlciBpcyBPUEVOJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXRlID0gJ2hhbGYtb3Blbic7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbigpO1xuICAgICAgdGhpcy5vblN1Y2Nlc3MoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMub25GYWlsdXJlKCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uU3VjY2VzcygpOiB2b2lkIHtcbiAgICB0aGlzLmZhaWx1cmVDb3VudCA9IDA7XG4gICAgdGhpcy5zdGF0ZSA9ICdjbG9zZWQnO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkZhaWx1cmUoKTogdm9pZCB7XG4gICAgdGhpcy5mYWlsdXJlQ291bnQrKztcbiAgICB0aGlzLmxhc3RGYWlsdXJlVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBpZiAodGhpcy5mYWlsdXJlQ291bnQgPj0gdGhpcy5jb25maWcuZmFpbHVyZVRocmVzaG9sZCkge1xuICAgICAgdGhpcy5zdGF0ZSA9ICdvcGVuJztcbiAgICAgIHRoaXMubmV4dEF0dGVtcHQgPSBEYXRlLm5vdygpICsgdGhpcy5jb25maWcucmVzZXRUaW1lb3V0O1xuICAgIH1cbiAgfVxuXG4gIGdldFN0YXRlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gIH1cbn1cblxuLyoqXG4gKiBCYXNlIHRyYW5zcG9ydCBjbGFzcyB3aXRoIGNvbW1vbiBmdW5jdGlvbmFsaXR5XG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlVHJhbnNwb3J0IGltcGxlbWVudHMgRGV2UGlwZVRyYW5zcG9ydCB7XG4gIHByb3RlY3RlZCBjb25maWc6IFRyYW5zcG9ydENvbmZpZztcbiAgcHJvdGVjdGVkIGhlYWx0aFN0YXR1czogVHJhbnNwb3J0SGVhbHRoU3RhdHVzO1xuICBwcm90ZWN0ZWQgY2lyY3VpdEJyZWFrZXI6IENpcmN1aXRCcmVha2VyO1xuICBwcm90ZWN0ZWQgbWV0cmljczogVHJhbnNwb3J0TWV0cmljcztcbiAgcHJvdGVjdGVkIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBFdmVudExpc3RlbmVyW10+ID0gbmV3IE1hcCgpO1xuICBcbiAgcHVibGljIHJlYWRvbmx5IHR5cGU6IFRyYW5zcG9ydFR5cGU7XG4gIHB1YmxpYyByZWFkb25seSBpZDogc3RyaW5nO1xuICBwcm90ZWN0ZWQgY29ubmVjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByb3RlY3RlZCBpbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHR5cGU6IFRyYW5zcG9ydFR5cGUsIGNvbmZpZzogVHJhbnNwb3J0Q29uZmlnKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmlkID0gYCR7dHlwZX0tJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIFxuICAgIHRoaXMuaGVhbHRoU3RhdHVzID0ge1xuICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgIGxhc3RDaGVjazogRGF0ZS5ub3coKSxcbiAgICAgIGxhdGVuY3k6IDAsXG4gICAgICBlcnJvclJhdGU6IDAsXG4gICAgICBjb25zZWN1dGl2ZUZhaWx1cmVzOiAwLFxuICAgICAgdXB0aW1lOiAwXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNpcmN1aXRCcmVha2VyID0gbmV3IENpcmN1aXRCcmVha2VyKHtcbiAgICAgIGZhaWx1cmVUaHJlc2hvbGQ6IDUsXG4gICAgICByZXNldFRpbWVvdXQ6IDMwMDAwLFxuICAgICAgbW9uaXRvcmluZ1BlcmlvZDogMTAwMDBcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLm1ldHJpY3MgPSB7XG4gICAgICBtZXNzYWdlc1NlbnQ6IDAsXG4gICAgICBtZXNzYWdlc1JlY2VpdmVkOiAwLFxuICAgICAgZXJyb3JzOiAwLFxuICAgICAgdG90YWxMYXRlbmN5OiAwLFxuICAgICAgbGFzdEFjdGl2aXR5OiBEYXRlLm5vdygpXG4gICAgfTtcblxuICAgIHRoaXMuZGVidWcoYFRyYW5zcG9ydCAke3RoaXMuaWR9IGNyZWF0ZWRgKTtcbiAgfVxuXG4gIC8vIEV2ZW50IHN5c3RlbSBpbXBsZW1lbnRhdGlvblxuICBvbihldmVudDogVHJhbnNwb3J0RXZlbnQgfCBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyKTogdm9pZCB7XG4gICAgY29uc3QgZXZlbnRLZXkgPSBldmVudC50b1N0cmluZygpO1xuICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVycy5oYXMoZXZlbnRLZXkpKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnNldChldmVudEtleSwgW10pO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudEtleSkhLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgb2ZmKGV2ZW50OiBUcmFuc3BvcnRFdmVudCB8IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudEtleSA9IGV2ZW50LnRvU3RyaW5nKCk7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnRLZXkpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZW1pdChldmVudDogVHJhbnNwb3J0RXZlbnQgfCBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudEtleSA9IGV2ZW50LnRvU3RyaW5nKCk7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnRLZXkpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsaXN0ZW5lcihkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmRlYnVnKGBFcnJvciBpbiBldmVudCBsaXN0ZW5lciBmb3IgJHtldmVudEtleX06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWFsdGggbW9uaXRvcmluZ1xuICBhc3luYyBwZXJmb3JtSGVhbHRoQ2hlY2soKTogUHJvbWlzZTxIZWFsdGhDaGVja1Jlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZG9IZWFsdGhDaGVjaygpO1xuICAgICAgY29uc3QgbGF0ZW5jeSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLnN0YXR1cyA9ICdoZWFsdGh5JztcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLmxhdGVuY3kgPSBsYXRlbmN5O1xuICAgICAgdGhpcy5oZWFsdGhTdGF0dXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgICB0aGlzLmhlYWx0aFN0YXR1cy5sYXN0Q2hlY2sgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuSEVBTFRIX0NIRUNLLCB7IHN1Y2Nlc3M6IHRydWUsIGxhdGVuY3kgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGxhdGVuY3ksIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhlYWx0aFN0YXR1cy5zdGF0dXMgPSAnZmFpbGluZyc7XG4gICAgICB0aGlzLmhlYWx0aFN0YXR1cy5jb25zZWN1dGl2ZUZhaWx1cmVzKys7XG4gICAgICB0aGlzLmhlYWx0aFN0YXR1cy5sYXN0Q2hlY2sgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5IRUFMVEhfQ0hFQ0ssIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3JNZXNzYWdlLCBsYXRlbmN5OiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfTtcbiAgICB9XG4gIH1cblxuICAvLyBDaXJjdWl0IGJyZWFrZXIgd3JhcHBlciBmb3Igb3BlcmF0aW9uc1xuICBwcm90ZWN0ZWQgYXN5bmMgZXhlY3V0ZVdpdGhDaXJjdWl0QnJlYWtlcjxUPihcbiAgICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gICAgb3BlcmF0aW9uTmFtZTogc3RyaW5nXG4gICk6IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY2lyY3VpdEJyZWFrZXIuZXhlY3V0ZShvcGVyYXRpb24pO1xuICAgICAgY29uc3QgbGF0ZW5jeSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICB0aGlzLnVwZGF0ZU1ldHJpY3ModHJ1ZSwgbGF0ZW5jeSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBsYXRlbmN5ID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIHRoaXMudXBkYXRlTWV0cmljcyhmYWxzZSwgbGF0ZW5jeSk7XG4gICAgICB0aGlzLmRlYnVnKGBPcGVyYXRpb24gJHtvcGVyYXRpb25OYW1lfSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVNZXRyaWNzKHN1Y2Nlc3M6IGJvb2xlYW4sIGxhdGVuY3k6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICB0aGlzLm1ldHJpY3MubWVzc2FnZXNTZW50Kys7XG4gICAgICB0aGlzLm1ldHJpY3MudG90YWxMYXRlbmN5ICs9IGxhdGVuY3k7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWV0cmljcy5lcnJvcnMrKztcbiAgICB9XG4gICAgdGhpcy5tZXRyaWNzLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XG4gIH1cblxuICAvLyBVdGlsaXR5IG1ldGhvZHNcbiAgcHJvdGVjdGVkIGdlbmVyYXRlTWVzc2FnZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBtc2ctJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG5cbiAgcHJvdGVjdGVkIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb25maWcuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLnR5cGV9OiR7dGhpcy5pZH1dICR7bWVzc2FnZX1gLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgY2FsY3VsYXRlUmVsaWFiaWxpdHkoKTogbnVtYmVyIHtcbiAgICBjb25zdCB0b3RhbCA9IHRoaXMubWV0cmljcy5tZXNzYWdlc1NlbnQgKyB0aGlzLm1ldHJpY3MuZXJyb3JzO1xuICAgIGlmICh0b3RhbCA9PT0gMCkgcmV0dXJuIDEuMDtcbiAgICByZXR1cm4gdGhpcy5tZXRyaWNzLm1lc3NhZ2VzU2VudCAvIHRvdGFsO1xuICB9XG5cbiAgLy8gU3RhbmRhcmQgaW50ZXJmYWNlIGltcGxlbWVudGF0aW9uc1xuICBpc0F2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbml0aWFsaXplZCAmJiB0aGlzLmNpcmN1aXRCcmVha2VyLmdldFN0YXRlKCkgIT09ICdvcGVuJztcbiAgfVxuXG4gIGlzQ29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3RlZCAmJiB0aGlzLmlzQXZhaWxhYmxlKCk7XG4gIH1cblxuICBnZXRIZWFsdGhTdGF0dXMoKTogVHJhbnNwb3J0SGVhbHRoU3RhdHVzIHtcbiAgICByZXR1cm4geyAuLi50aGlzLmhlYWx0aFN0YXR1cyB9O1xuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZShjb25maWc6IFRyYW5zcG9ydENvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuY29uZmlnID0geyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH07XG4gICAgYXdhaXQgdGhpcy5kb0luaXRpYWxpemUoKTtcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB0aGlzLmRlYnVnKCdUcmFuc3BvcnQgaW5pdGlhbGl6ZWQnKTtcbiAgfVxuXG4gIGFzeW5jIGRlc3Ryb3koKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5jbGVhcigpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRlYnVnKCdUcmFuc3BvcnQgZGVzdHJveWVkJyk7XG4gIH1cblxuICAvLyBBYnN0cmFjdCBtZXRob2RzIHRoYXQgbXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzcGVjaWZpYyB0cmFuc3BvcnQgdHlwZXNcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGRvSW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+O1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZG9IZWFsdGhDaGVjaygpOiBQcm9taXNlPHZvaWQ+O1xuICBwdWJsaWMgYWJzdHJhY3QgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+O1xuICBwdWJsaWMgYWJzdHJhY3QgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+O1xuICBwdWJsaWMgYWJzdHJhY3Qgc2VuZChtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPjtcbiAgcHVibGljIGFic3RyYWN0IGdldENhcGFiaWxpdGllcygpOiBUcmFuc3BvcnRDYXBhYmlsaXRpZXM7XG59XG4iLCIvKipcbiAqIEVuaGFuY2VkIEhUVFAgVHJhbnNwb3J0IGZvciBEZXZQaXBlIGNvbW11bmljYXRpb25cbiAqIFN1cHBvcnRzIFNlcnZlci1TZW50IEV2ZW50cywgY29ubmVjdGlvbiBwb29saW5nLCBhbmQgYWR2YW5jZWQgcmV0cnkgbG9naWNcbiAqL1xuXG5pbXBvcnQgeyBcbiAgRGV2UGlwZVRyYW5zcG9ydCxcbiAgVHJhbnNwb3J0VHlwZSxcbiAgVHJhbnNwb3J0Q29uZmlnLFxuICBUcmFuc3BvcnRDYXBhYmlsaXRpZXMsXG4gIERldlBpcGVNZXNzYWdlLFxuICBEZXZQaXBlUmVzcG9uc2UsXG4gIFRyYW5zcG9ydEV2ZW50LFxuICBIVFRQVHJhbnNwb3J0Q29uZmlnXG59IGZyb20gJy4vRGV2UGlwZVRyYW5zcG9ydCc7XG5pbXBvcnQgeyBCYXNlVHJhbnNwb3J0IH0gZnJvbSAnLi9CYXNlVHJhbnNwb3J0JztcbmltcG9ydCB7IEVudmlyb25tZW50RGV0ZWN0b3IgfSBmcm9tICcuLi8uLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcblxuaW50ZXJmYWNlIFBlbmRpbmdSZXF1ZXN0IHtcbiAgaWQ6IHN0cmluZztcbiAgbWVzc2FnZTogRGV2UGlwZU1lc3NhZ2U7XG4gIHJlc29sdmU6IChyZXNwb25zZTogRGV2UGlwZVJlc3BvbnNlKSA9PiB2b2lkO1xuICByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG4gIHRpbWVvdXQ6IGFueTsgLy8gQ2FuIGJlIE5vZGVKUy5UaW1lb3V0IG9yIG51bWJlciBkZXBlbmRpbmcgb24gZW52aXJvbm1lbnRcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBDb25uZWN0aW9uUG9vbE9wdGlvbnMge1xuICBtYXhDb25uZWN0aW9uczogbnVtYmVyO1xuICBrZWVwQWxpdmU6IGJvb2xlYW47XG4gIHRpbWVvdXQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBTaW1wbGUgY29ubmVjdGlvbiBwb29sIGZvciBIVFRQIHJlcXVlc3RzXG4gKi9cbmNsYXNzIENvbm5lY3Rpb25Qb29sIHtcbiAgcHJpdmF0ZSBhY3RpdmVDb25uZWN0aW9uczogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBtYXhDb25uZWN0aW9uczogbnVtYmVyO1xuICBwcml2YXRlIHF1ZXVlOiAoKCkgPT4gdm9pZClbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENvbm5lY3Rpb25Qb29sT3B0aW9ucykge1xuICAgIHRoaXMubWF4Q29ubmVjdGlvbnMgPSBvcHRpb25zLm1heENvbm5lY3Rpb25zO1xuICB9XG5cbiAgYXN5bmMgYWNxdWlyZTxUPihvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgZXhlY3V0ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmVDb25uZWN0aW9ucysrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbigpO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHRoaXMuYWN0aXZlQ29ubmVjdGlvbnMtLTtcbiAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKG5leHQpIG5leHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLmFjdGl2ZUNvbm5lY3Rpb25zIDwgdGhpcy5tYXhDb25uZWN0aW9ucykge1xuICAgICAgICBleGVjdXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1ZXVlLnB1c2goZXhlY3V0ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBIVFRQIFRyYW5zcG9ydCBpbXBsZW1lbnRhdGlvbiB3aXRoIGVuaGFuY2VkIGZlYXR1cmVzXG4gKi9cbmV4cG9ydCBjbGFzcyBIVFRQVHJhbnNwb3J0IGV4dGVuZHMgQmFzZVRyYW5zcG9ydCB7XG4gIHByaXZhdGUgc3NlQ29ubmVjdGlvbj86IEV2ZW50U291cmNlO1xuICBwcml2YXRlIGNvbm5lY3Rpb25Qb29sOiBDb25uZWN0aW9uUG9vbDtcbiAgcHJpdmF0ZSBwZW5kaW5nUmVxdWVzdHM6IE1hcDxzdHJpbmcsIFBlbmRpbmdSZXF1ZXN0PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBodHRwQ29uZmlnOiBIVFRQVHJhbnNwb3J0Q29uZmlnO1xuICBwcml2YXRlIG1lc3NhZ2VRdWV1ZTogRGV2UGlwZU1lc3NhZ2VbXSA9IFtdO1xuICBwcml2YXRlIHByb2Nlc3NpbmdRdWV1ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVHJhbnNwb3J0Q29uZmlnKSB7XG4gICAgc3VwZXIoVHJhbnNwb3J0VHlwZS5IVFRQLCBjb25maWcpO1xuICAgIFxuICAgIHRoaXMuaHR0cENvbmZpZyA9IGNvbmZpZy5odHRwIHx8IHtcbiAgICAgIGVuYWJsZVNTRTogdHJ1ZSxcbiAgICAgIG1heENvbm5lY3Rpb25zOiAxMCxcbiAgICAgIGtlZXBBbGl2ZTogdHJ1ZSxcbiAgICAgIGNvbXByZXNzaW9uOiB0cnVlXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmNvbm5lY3Rpb25Qb29sID0gbmV3IENvbm5lY3Rpb25Qb29sKHtcbiAgICAgIG1heENvbm5lY3Rpb25zOiB0aGlzLmh0dHBDb25maWcubWF4Q29ubmVjdGlvbnMgfHwgMTAsXG4gICAgICBrZWVwQWxpdmU6IHRoaXMuaHR0cENvbmZpZy5rZWVwQWxpdmUgIT09IGZhbHNlLFxuICAgICAgdGltZW91dDogY29uZmlnLnRpbWVvdXRcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBkb0luaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVmFsaWRhdGUgSFRUUCBzdXBwb3J0IGluIGVudmlyb25tZW50XG4gICAgY29uc3QgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudERldGVjdG9yLmRldGVjdCgpO1xuICAgIGlmICghZW52aXJvbm1lbnQuaGFzSFRUUCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdIVFRQIHRyYW5zcG9ydCBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmRlYnVnKCdIVFRQIHRyYW5zcG9ydCBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgYXN5bmMgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCBiYXNpYyBjb25uZWN0aXZpdHlcbiAgICAgIGF3YWl0IHRoaXMuZG9IZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBTZXR1cCBTZXJ2ZXItU2VudCBFdmVudHMgaWYgZW5hYmxlZFxuICAgICAgaWYgKHRoaXMuaHR0cENvbmZpZy5lbmFibGVTU0UgJiYgdGhpcy5jb25maWcuc2VydmVyVXJsKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dXBTU0UoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2hlYWx0aHknO1xuICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkNPTk5FQ1RFRCwgeyB0cmFuc3BvcnQ6IHRoaXMudHlwZSB9KTtcbiAgICAgIFxuICAgICAgdGhpcy5kZWJ1ZygnSFRUUCB0cmFuc3BvcnQgY29ubmVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5FUlJPUiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBSZWplY3QgYWxsIHBlbmRpbmcgcmVxdWVzdHNcbiAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5LmZyb20odGhpcy5wZW5kaW5nUmVxdWVzdHMudmFsdWVzKCkpO1xuICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiByZXF1ZXN0cykge1xuICAgICAgY2xlYXJUaW1lb3V0KHJlcXVlc3QudGltZW91dCk7XG4gICAgICByZXF1ZXN0LnJlamVjdChuZXcgRXJyb3IoJ1RyYW5zcG9ydCBkaXNjb25uZWN0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmNsZWFyKCk7XG5cbiAgICAvLyBDbG9zZSBTU0UgY29ubmVjdGlvblxuICAgIGlmICh0aGlzLnNzZUNvbm5lY3Rpb24pIHtcbiAgICAgIHRoaXMuc3NlQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgdGhpcy5zc2VDb25uZWN0aW9uID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkRJU0NPTk5FQ1RFRCwgeyB0cmFuc3BvcnQ6IHRoaXMudHlwZSB9KTtcbiAgICBcbiAgICB0aGlzLmRlYnVnKCdIVFRQIHRyYW5zcG9ydCBkaXNjb25uZWN0ZWQnKTtcbiAgfVxuXG4gIGFzeW5jIHNlbmQobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPERldlBpcGVSZXNwb25zZT4ge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgdHJhbnNwb3J0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbWVzc2FnZSBJRCBpZiBub3QgcHJlc2VudFxuICAgIGlmICghbWVzc2FnZS5pZCkge1xuICAgICAgbWVzc2FnZS5pZCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGltZXN0YW1wXG4gICAgbWVzc2FnZS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXG4gICAgcmV0dXJuIHRoaXMuZXhlY3V0ZVdpdGhDaXJjdWl0QnJlYWtlcihhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kSHR0cFJlcXVlc3QobWVzc2FnZSk7XG4gICAgfSwgJ2h0dHBfc2VuZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kSHR0cFJlcXVlc3QobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPERldlBpcGVSZXNwb25zZT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFJlcXVlc3QgdGltZW91dCBhZnRlciAke3RoaXMuY29uZmlnLnRpbWVvdXR9bXNgKSk7XG4gICAgICB9LCB0aGlzLmNvbmZpZy50aW1lb3V0KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogUGVuZGluZ1JlcXVlc3QgPSB7XG4gICAgICAgIGlkOiBtZXNzYWdlLmlkISxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgcmVzb2x2ZTogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdDogKGVycm9yKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogdGltZW91dEhhbmRsZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zZXQobWVzc2FnZS5pZCEsIHJlcXVlc3QpO1xuICAgICAgdGhpcy5wZXJmb3JtSHR0cFJlcXVlc3QobWVzc2FnZSwgcmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1IdHRwUmVxdWVzdChtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSwgcmVxdWVzdDogUGVuZGluZ1JlcXVlc3QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb25Qb29sLmFjcXVpcmUoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5jb25maWcuc2VydmVyVXJsfS9hcGkvdjEvZGV2cGlwZS9tZXNzYWdlYCwge1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAuLi4odGhpcy5odHRwQ29uZmlnLmNvbXByZXNzaW9uICYmIHsgJ0FjY2VwdC1FbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlJyB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobWVzc2FnZSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFmZXRjaFJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7ZmV0Y2hSZXNwb25zZS5zdGF0dXN9OiAke2ZldGNoUmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmZXRjaFJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBIYW5kbGUgaW1tZWRpYXRlIHJlc3BvbnNlXG4gICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuaWQgPT09IG1lc3NhZ2UuaWQpIHtcbiAgICAgICAgY29uc3QgZGV2UGlwZVJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UgPSB7XG4gICAgICAgICAgaWQ6IHJlc3BvbnNlLmlkLFxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgcGF5bG9hZDogcmVzcG9uc2UucGF5bG9hZCB8fCByZXNwb25zZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5yZXNvbHZlKGRldlBpcGVSZXNwb25zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXYWl0IGZvciBhc3luYyByZXNwb25zZSB2aWEgU1NFIG9yIHBvbGxpbmdcbiAgICAgICAgdGhpcy5kZWJ1ZyhgV2FpdGluZyBmb3IgYXN5bmMgcmVzcG9uc2UgZm9yIG1lc3NhZ2UgJHttZXNzYWdlLmlkfWApO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlcXVlc3QucmVqZWN0KGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcignSFRUUCByZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNldHVwU1NFKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuc2VydmVyVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcnZlciBVUkwgcmVxdWlyZWQgZm9yIFNTRScpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBzc2VVcmwgPSBgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L2FwaS92MS9kZXZwaXBlL3N0cmVhbWA7XG4gICAgICB0aGlzLnNzZUNvbm5lY3Rpb24gPSBuZXcgRXZlbnRTb3VyY2Uoc3NlVXJsKTtcbiAgICAgIFxuICAgICAgdGhpcy5zc2VDb25uZWN0aW9uLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5kZWJ1ZygnU1NFIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5zc2VDb25uZWN0aW9uLm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgIHRoaXMuaGFuZGxlU1NFTWVzc2FnZShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmRlYnVnKCdGYWlsZWQgdG8gcGFyc2UgU1NFIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNzZUNvbm5lY3Rpb24ub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICB0aGlzLmRlYnVnKCdTU0UgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIGlmICh0aGlzLnNzZUNvbm5lY3Rpb24/LnJlYWR5U3RhdGUgPT09IEV2ZW50U291cmNlLkNPTk5FQ1RJTkcpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuUkVDT05ORUNUSU5HLCB7IHRyYW5zcG9ydDogdGhpcy50eXBlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5FUlJPUiwgZXJyb3IpO1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVNTRU1lc3NhZ2UoZGF0YTogYW55KTogdm9pZCB7XG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiBkYXRhLmlkKSB7XG4gICAgICAvLyBIYW5kbGUgcmVzcG9uc2UgdG8gcGVuZGluZyByZXF1ZXN0XG4gICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5wZW5kaW5nUmVxdWVzdHMuZ2V0KGRhdGEuaWQpO1xuICAgICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2U6IERldlBpcGVSZXNwb25zZSA9IHtcbiAgICAgICAgICBpZDogZGF0YS5pZCxcbiAgICAgICAgICBzdWNjZXNzOiBkYXRhLnN1Y2Nlc3MgIT09IGZhbHNlLFxuICAgICAgICAgIHBheWxvYWQ6IGRhdGEucGF5bG9hZCxcbiAgICAgICAgICBlcnJvcjogZGF0YS5lcnJvcixcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSGFuZGxlIGluY29taW5nIG1lc3NhZ2VcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5NRVNTQUdFLCBkYXRhKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZG9IZWFsdGhDaGVjaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLnNlcnZlclVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZXJ2ZXIgVVJMIGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vYXBpL3YxL2RldnBpcGUvaGVhbHRoYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDUwMDApXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FwYWJpbGl0aWVzKCk6IFRyYW5zcG9ydENhcGFiaWxpdGllcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1cHBvcnRzUmVhbHRpbWU6ICEhdGhpcy5odHRwQ29uZmlnLmVuYWJsZVNTRSxcbiAgICAgIHN1cHBvcnRzQmlkaXJlY3Rpb25hbDogISF0aGlzLmh0dHBDb25maWcuZW5hYmxlU1NFLFxuICAgICAgc3VwcG9ydHNGaWxlU3lzdGVtOiBmYWxzZSxcbiAgICAgIHN1cHBvcnRzU3RyZWFtaW5nOiB0cnVlLFxuICAgICAgbWF4TWVzc2FnZVNpemU6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUJcbiAgICAgIGF2ZXJhZ2VMYXRlbmN5OiB0aGlzLmhlYWx0aFN0YXR1cy5sYXRlbmN5LFxuICAgICAgbWF4Q29uY3VycmVudENvbm5lY3Rpb25zOiB0aGlzLmh0dHBDb25maWcubWF4Q29ubmVjdGlvbnMgfHwgMTAsXG4gICAgICByZWxpYWJpbGl0eTogdGhpcy5jYWxjdWxhdGVSZWxpYWJpbGl0eSgpLFxuICAgICAgc3VwcG9ydGVkRW52aXJvbm1lbnRzOiBbJ2Jyb3dzZXInLCAnbm9kZScsICdvYnNpZGlhbiddXG4gICAgfTtcbiAgfVxufVxuIiwiLyoqXG4gKiBXZWJTb2NrZXQgVHJhbnNwb3J0IGZvciBEZXZQaXBlIGNvbW11bmljYXRpb25cbiAqIFN1cHBvcnRzIHJlYWwtdGltZSBiaWRpcmVjdGlvbmFsIGNvbW11bmljYXRpb24gd2l0aCBhdXRvbWF0aWMgcmVjb25uZWN0aW9uXG4gKi9cblxuaW1wb3J0IHsgXG4gIERldlBpcGVUcmFuc3BvcnQsXG4gIFRyYW5zcG9ydFR5cGUsXG4gIFRyYW5zcG9ydENvbmZpZyxcbiAgVHJhbnNwb3J0Q2FwYWJpbGl0aWVzLFxuICBEZXZQaXBlTWVzc2FnZSxcbiAgRGV2UGlwZVJlc3BvbnNlLFxuICBUcmFuc3BvcnRFdmVudCxcbiAgV2ViU29ja2V0VHJhbnNwb3J0Q29uZmlnXG59IGZyb20gJy4vRGV2UGlwZVRyYW5zcG9ydCc7XG5pbXBvcnQgeyBCYXNlVHJhbnNwb3J0IH0gZnJvbSAnLi9CYXNlVHJhbnNwb3J0JztcbmltcG9ydCB7IEVudmlyb25tZW50RGV0ZWN0b3IgfSBmcm9tICcuLi8uLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcblxuaW50ZXJmYWNlIFJlc3BvbnNlSGFuZGxlciB7XG4gIHJlc29sdmU6IChyZXNwb25zZTogRGV2UGlwZVJlc3BvbnNlKSA9PiB2b2lkO1xuICByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG4gIHRpbWVvdXQ6IGFueTtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBNZXNzYWdlUXVldWUge1xuICBtZXNzYWdlczogRGV2UGlwZU1lc3NhZ2VbXTtcbiAgbWF4U2l6ZTogbnVtYmVyO1xuICBwZXJzaXN0VG9EaXNrOiBib29sZWFuO1xufVxuXG4vKipcbiAqIFNpbXBsZSByZWNvbm5lY3RpbmcgV2ViU29ja2V0IHdyYXBwZXJcbiAqL1xuY2xhc3MgUmVjb25uZWN0aW5nV2ViU29ja2V0IHtcbiAgcHJpdmF0ZSB3cz86IFdlYlNvY2tldDtcbiAgcHJpdmF0ZSB1cmw6IHN0cmluZztcbiAgcHJpdmF0ZSBwcm90b2NvbHM6IHN0cmluZ1tdO1xuICBwcml2YXRlIG9wdGlvbnM6IGFueTtcbiAgcHJpdmF0ZSByZWNvbm5lY3RBdHRlbXB0czogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBtYXhSZWNvbm5lY3RBdHRlbXB0czogbnVtYmVyO1xuICBwcml2YXRlIHJlY29ubmVjdERlbGF5OiBudW1iZXI7XG4gIHByaXZhdGUgc2hvdWxkUmVjb25uZWN0OiBib29sZWFuID0gdHJ1ZTtcbiAgXG4gIHB1YmxpYyBvbm9wZW4/OiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xuICBwdWJsaWMgb25jbG9zZT86IChldmVudDogQ2xvc2VFdmVudCkgPT4gdm9pZDtcbiAgcHVibGljIG9ubWVzc2FnZT86IChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB2b2lkO1xuICBwdWJsaWMgb25lcnJvcj86IChldmVudDogRXZlbnQpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIHByb3RvY29sczogc3RyaW5nW10gPSBbXSwgb3B0aW9uczogYW55ID0ge30pIHtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLnByb3RvY29scyA9IHByb3RvY29scztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMubWF4UmVjb25uZWN0QXR0ZW1wdHMgPSBvcHRpb25zLm1heFJlY29ubmVjdEF0dGVtcHRzIHx8IDEwO1xuICAgIHRoaXMucmVjb25uZWN0RGVsYXkgPSBvcHRpb25zLnJlY29ubmVjdERlbGF5IHx8IDEwMDA7XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gIH1cblxuICBwcml2YXRlIGNvbm5lY3QoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMud3MgPSBuZXcgV2ViU29ja2V0KHRoaXMudXJsLCB0aGlzLnByb3RvY29scyk7XG4gICAgICBcbiAgICAgIHRoaXMud3Mub25vcGVuID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPSAwO1xuICAgICAgICBpZiAodGhpcy5vbm9wZW4pIHRoaXMub25vcGVuKGV2ZW50KTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMud3Mub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5vbmNsb3NlKSB0aGlzLm9uY2xvc2UoZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRSZWNvbm5lY3QgJiYgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA8IHRoaXMubWF4UmVjb25uZWN0QXR0ZW1wdHMpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucmVjb25uZWN0KCksIHRoaXMucmVjb25uZWN0RGVsYXkgKiBNYXRoLnBvdygyLCB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm9ubWVzc2FnZSkgdGhpcy5vbm1lc3NhZ2UoZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy53cy5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm9uZXJyb3IpIHRoaXMub25lcnJvcihldmVudCk7XG4gICAgICB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLm9uZXJyb3IpIHRoaXMub25lcnJvcihuZXcgRXZlbnQoJ2Vycm9yJykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVjb25uZWN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNob3VsZFJlY29ubmVjdCAmJiB0aGlzLnJlY29ubmVjdEF0dGVtcHRzIDwgdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cykge1xuICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cysrO1xuICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgc2VuZChkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLndzLnNlbmQoZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNob3VsZFJlY29ubmVjdCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLndzKSB7XG4gICAgICB0aGlzLndzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlYWR5U3RhdGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy53cyA/IHRoaXMud3MucmVhZHlTdGF0ZSA6IFdlYlNvY2tldC5DTE9TRUQ7XG4gIH1cbn1cblxuLyoqXG4gKiBXZWJTb2NrZXQgVHJhbnNwb3J0IGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRUcmFuc3BvcnQgZXh0ZW5kcyBCYXNlVHJhbnNwb3J0IHtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ/OiBSZWNvbm5lY3RpbmdXZWJTb2NrZXQ7XG4gIHByaXZhdGUgbWVzc2FnZVF1ZXVlOiBNZXNzYWdlUXVldWU7XG4gIHByaXZhdGUgaGVhcnRiZWF0SW50ZXJ2YWw/OiBhbnk7XG4gIHByaXZhdGUgcmVzcG9uc2VIYW5kbGVyczogTWFwPHN0cmluZywgUmVzcG9uc2VIYW5kbGVyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSB3c0NvbmZpZzogV2ViU29ja2V0VHJhbnNwb3J0Q29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVHJhbnNwb3J0Q29uZmlnKSB7XG4gICAgc3VwZXIoVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsIGNvbmZpZyk7XG4gICAgXG4gICAgdGhpcy53c0NvbmZpZyA9IGNvbmZpZy53ZWJzb2NrZXQgfHwge1xuICAgICAgaGVhcnRiZWF0SW50ZXJ2YWw6IDMwMDAwLFxuICAgICAgcmVjb25uZWN0RGVsYXk6IDEwMDAsXG4gICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0czogMTAsXG4gICAgICBwZXJzaXN0TWVzc2FnZXM6IGZhbHNlXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLm1lc3NhZ2VRdWV1ZSA9IHtcbiAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICAgIG1heFNpemU6IDEwMDAsXG4gICAgICBwZXJzaXN0VG9EaXNrOiB0aGlzLndzQ29uZmlnLnBlcnNpc3RNZXNzYWdlcyB8fCBmYWxzZVxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZG9Jbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFZhbGlkYXRlIFdlYlNvY2tldCBzdXBwb3J0IGluIGVudmlyb25tZW50XG4gICAgY29uc3QgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudERldGVjdG9yLmRldGVjdCgpO1xuICAgIGlmICghZW52aXJvbm1lbnQuaGFzV2ViU29ja2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCB0cmFuc3BvcnQgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5kZWJ1ZygnV2ViU29ja2V0IHRyYW5zcG9ydCBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgYXN5bmMgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLnNlcnZlclVybCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXJ2ZXIgVVJMIHJlcXVpcmVkIGZvciBXZWJTb2NrZXQgdHJhbnNwb3J0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHdzVXJsID0gdGhpcy5jb25maWcuc2VydmVyVXJsIS5yZXBsYWNlKC9eaHR0cC8sICd3cycpICsgJy9hcGkvdjEvZGV2cGlwZS93cyc7XG4gICAgICBcbiAgICAgIHRoaXMud2Vic29ja2V0ID0gbmV3IFJlY29ubmVjdGluZ1dlYlNvY2tldCh3c1VybCwgW10sIHtcbiAgICAgICAgY29ubmVjdGlvblRpbWVvdXQ6IHRoaXMuY29uZmlnLnRpbWVvdXQsXG4gICAgICAgIGRlYnVnOiB0aGlzLmNvbmZpZy5kZWJ1ZyxcbiAgICAgICAgbWF4UmVjb25uZWN0QXR0ZW1wdHM6IHRoaXMud3NDb25maWcubWF4UmVjb25uZWN0QXR0ZW1wdHMsXG4gICAgICAgIHJlY29ubmVjdERlbGF5OiB0aGlzLndzQ29uZmlnLnJlY29ubmVjdERlbGF5XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgdGhpcy53ZWJzb2NrZXQub25vcGVuID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLnN0YXR1cyA9ICdoZWFsdGh5JztcbiAgICAgICAgdGhpcy5zdGFydEhlYXJ0YmVhdCgpO1xuICAgICAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuQ09OTkVDVEVELCB7IHRyYW5zcG9ydDogdGhpcy50eXBlIH0pO1xuICAgICAgICB0aGlzLmRlYnVnKCdXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMud2Vic29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhpcy5kZWJ1ZygnV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkVSUk9SLCBlcnJvcik7XG4gICAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gY29ubmVjdCBXZWJTb2NrZXQnKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UoZXZlbnQuZGF0YSk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICB0aGlzLndlYnNvY2tldC5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhlYWx0aFN0YXR1cy5zdGF0dXMgPSAnZGlzY29ubmVjdGVkJztcbiAgICAgICAgdGhpcy5zdG9wSGVhcnRiZWF0KCk7XG4gICAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5ESVNDT05ORUNURUQsIHsgdHJhbnNwb3J0OiB0aGlzLnR5cGUgfSk7XG4gICAgICAgIHRoaXMuZGVidWcoJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFJlamVjdCBhbGwgcGVuZGluZyByZXNwb25zZSBoYW5kbGVyc1xuICAgIGNvbnN0IGhhbmRsZXJzID0gQXJyYXkuZnJvbSh0aGlzLnJlc3BvbnNlSGFuZGxlcnMudmFsdWVzKCkpO1xuICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZXIudGltZW91dCk7XG4gICAgICBoYW5kbGVyLnJlamVjdChuZXcgRXJyb3IoJ1RyYW5zcG9ydCBkaXNjb25uZWN0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMucmVzcG9uc2VIYW5kbGVycy5jbGVhcigpO1xuXG4gICAgLy8gU3RvcCBoZWFydGJlYXRcbiAgICB0aGlzLnN0b3BIZWFydGJlYXQoKTtcblxuICAgIC8vIENsb3NlIFdlYlNvY2tldFxuICAgIGlmICh0aGlzLndlYnNvY2tldCkge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuY2xvc2UoKTtcbiAgICAgIHRoaXMud2Vic29ja2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkRJU0NPTk5FQ1RFRCwgeyB0cmFuc3BvcnQ6IHRoaXMudHlwZSB9KTtcbiAgICBcbiAgICB0aGlzLmRlYnVnKCdXZWJTb2NrZXQgdHJhbnNwb3J0IGRpc2Nvbm5lY3RlZCcpO1xuICB9XG5cbiAgYXN5bmMgc2VuZChtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPiB7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IHRyYW5zcG9ydCBub3QgY29ubmVjdGVkJyk7XG4gICAgfVxuXG4gICAgLy8gQWRkIG1lc3NhZ2UgSUQgaWYgbm90IHByZXNlbnRcbiAgICBpZiAoIW1lc3NhZ2UuaWQpIHtcbiAgICAgIG1lc3NhZ2UuaWQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRpbWVzdGFtcFxuICAgIG1lc3NhZ2UudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblxuICAgIHJldHVybiB0aGlzLmV4ZWN1dGVXaXRoQ2lyY3VpdEJyZWFrZXIoYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc2VuZFdlYlNvY2tldE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfSwgJ3dlYnNvY2tldF9zZW5kJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRXZWJTb2NrZXRNZXNzYWdlKG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlKTogUHJvbWlzZTxEZXZQaXBlUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgV2ViU29ja2V0IHJlcXVlc3QgdGltZW91dCBhZnRlciAke3RoaXMuY29uZmlnLnRpbWVvdXR9bXNgKSk7XG4gICAgICB9LCB0aGlzLmNvbmZpZy50aW1lb3V0KTtcblxuICAgICAgY29uc3QgaGFuZGxlcjogUmVzcG9uc2VIYW5kbGVyID0ge1xuICAgICAgICByZXNvbHZlOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXJzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdDogKGVycm9yKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICAgIHRoaXMucmVzcG9uc2VIYW5kbGVycy5kZWxldGUobWVzc2FnZS5pZCEpO1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRIYW5kbGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfTtcblxuICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXJzLnNldChtZXNzYWdlLmlkISwgaGFuZGxlcik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0IS5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXJzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU1lc3NhZ2UoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgXG4gICAgICBpZiAobWVzc2FnZS50eXBlID09PSAncG9uZycpIHtcbiAgICAgICAgLy8gSGFuZGxlIGhlYXJ0YmVhdCBwb25nXG4gICAgICAgIHRoaXMuZGVidWcoJ1JlY2VpdmVkIGhlYXJ0YmVhdCBwb25nJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiBtZXNzYWdlLnJlcGx5VG8pIHtcbiAgICAgICAgLy8gSGFuZGxlIHJlc3BvbnNlIHRvIHBlbmRpbmcgcmVxdWVzdFxuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5yZXNwb25zZUhhbmRsZXJzLmdldChtZXNzYWdlLnJlcGx5VG8pO1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBpZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IG1lc3NhZ2Uuc3VjY2VzcyAhPT0gZmFsc2UsXG4gICAgICAgICAgICBwYXlsb2FkOiBtZXNzYWdlLnBheWxvYWQsXG4gICAgICAgICAgICBlcnJvcjogbWVzc2FnZS5lcnJvcixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH07XG4gICAgICAgICAgaGFuZGxlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdoZWFsdGhfcG9uZycgJiYgbWVzc2FnZS5pZCkge1xuICAgICAgICAvLyBIYW5kbGUgaGVhbHRoIGNoZWNrIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuZ2V0KG1lc3NhZ2UuaWQpO1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBpZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBwYXlsb2FkOiB7IHN0YXR1czogJ2hlYWx0aHknIH0sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9O1xuICAgICAgICAgIGhhbmRsZXIucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbmNvbWluZyBtZXNzYWdlXG4gICAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5NRVNTQUdFLCBtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmRlYnVnKCdGYWlsZWQgdG8gaGFuZGxlIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5FUlJPUiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRIZWFydGJlYXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMud2Vic29ja2V0IS5zZW5kKEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgICB0eXBlOiAncGluZycsIFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpIFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICB0aGlzLmRlYnVnKCdGYWlsZWQgdG8gc2VuZCBoZWFydGJlYXQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcy53c0NvbmZpZy5oZWFydGJlYXRJbnRlcnZhbCB8fCAzMDAwMCk7XG4gIH1cblxuICBwcml2YXRlIHN0b3BIZWFydGJlYXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRJbnRlcnZhbCk7XG4gICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBkb0hlYWx0aENoZWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBub3QgY29ubmVjdGVkJyk7XG4gICAgfVxuXG4gICAgLy8gU2VuZCBwaW5nIGFuZCB3YWl0IGZvciBwb25nXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignSGVhbHRoIGNoZWNrIHRpbWVvdXQnKSk7XG4gICAgICB9LCA1MDAwKTtcbiAgICAgIFxuICAgICAgY29uc3QgcGluZ0lkID0gdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpO1xuICAgICAgY29uc3QgaGFuZGxlcjogUmVzcG9uc2VIYW5kbGVyID0ge1xuICAgICAgICByZXNvbHZlOiAoKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuICAgICAgXG4gICAgICB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuc2V0KHBpbmdJZCwgaGFuZGxlcik7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0IS5zZW5kKEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgdHlwZTogJ2hlYWx0aF9waW5nJywgXG4gICAgICAgICAgaWQ6IHBpbmdJZCxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgfSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuZGVsZXRlKHBpbmdJZCk7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRDYXBhYmlsaXRpZXMoKTogVHJhbnNwb3J0Q2FwYWJpbGl0aWVzIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VwcG9ydHNSZWFsdGltZTogdHJ1ZSxcbiAgICAgIHN1cHBvcnRzQmlkaXJlY3Rpb25hbDogdHJ1ZSxcbiAgICAgIHN1cHBvcnRzRmlsZVN5c3RlbTogZmFsc2UsXG4gICAgICBzdXBwb3J0c1N0cmVhbWluZzogdHJ1ZSxcbiAgICAgIG1heE1lc3NhZ2VTaXplOiAxMDI0ICogMTAyNCwgLy8gMU1CXG4gICAgICBhdmVyYWdlTGF0ZW5jeTogdGhpcy5oZWFsdGhTdGF0dXMubGF0ZW5jeSxcbiAgICAgIG1heENvbmN1cnJlbnRDb25uZWN0aW9uczogMSxcbiAgICAgIHJlbGlhYmlsaXR5OiB0aGlzLmNhbGN1bGF0ZVJlbGlhYmlsaXR5KCksXG4gICAgICBzdXBwb3J0ZWRFbnZpcm9ubWVudHM6IFsnYnJvd3NlcicsICdub2RlJywgJ29ic2lkaWFuJ11cbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIEZpbGVTeXN0ZW0gVHJhbnNwb3J0IGZvciBEZXZQaXBlIGNvbW11bmljYXRpb25cbiAqIFN1cHBvcnRzIGZpbGUtYmFzZWQgY29tbXVuaWNhdGlvbiB3aXRoIHByb3BlciBsb2NraW5nIGFuZCBhdG9taWMgb3BlcmF0aW9uc1xuICovXG5cbmltcG9ydCB7IFxuICBEZXZQaXBlVHJhbnNwb3J0LFxuICBUcmFuc3BvcnRUeXBlLFxuICBUcmFuc3BvcnRDb25maWcsXG4gIFRyYW5zcG9ydENhcGFiaWxpdGllcyxcbiAgRGV2UGlwZU1lc3NhZ2UsXG4gIERldlBpcGVSZXNwb25zZSxcbiAgVHJhbnNwb3J0RXZlbnQsXG4gIEZpbGVTeXN0ZW1UcmFuc3BvcnRDb25maWdcbn0gZnJvbSAnLi9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCB7IEJhc2VUcmFuc3BvcnQgfSBmcm9tICcuL0Jhc2VUcmFuc3BvcnQnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciB9IGZyb20gJy4uLy4uL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuXG5pbnRlcmZhY2UgUGVuZGluZ0ZpbGVSZXF1ZXN0IHtcbiAgaWQ6IHN0cmluZztcbiAgbWVzc2FnZTogRGV2UGlwZU1lc3NhZ2U7XG4gIHJlc29sdmU6IChyZXNwb25zZTogRGV2UGlwZVJlc3BvbnNlKSA9PiB2b2lkO1xuICByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG4gIHRpbWVvdXQ6IGFueTtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHJlcXVlc3RGaWxlOiBzdHJpbmc7XG4gIHJlc3BvbnNlRmlsZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFNpbXBsZSBmaWxlIGxvY2sgbWFuYWdlciBmb3IgYXRvbWljIG9wZXJhdGlvbnNcbiAqL1xuY2xhc3MgRmlsZUxvY2tNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBsb2NrczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgbG9ja1RpbWVvdXQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihsb2NrVGltZW91dDogbnVtYmVyID0gNTAwMCkge1xuICAgIHRoaXMubG9ja1RpbWVvdXQgPSBsb2NrVGltZW91dDtcbiAgfVxuXG4gIGFzeW5jIGFjcXVpcmVMb2NrKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgYXR0ZW1wdExvY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5sb2Nrcy5oYXMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgdGhpcy5sb2Nrcy5hZGQoZmlsZVBhdGgpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGF0dGVtcHRMb2NrLCAxMDApOyAvLyBSZXRyeSBldmVyeSAxMDBtc1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXQgdGltZW91dCBmb3IgbG9jayBhY3F1aXNpdGlvblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBhY3F1aXJlIGxvY2sgZm9yICR7ZmlsZVBhdGh9IHdpdGhpbiAke3RoaXMubG9ja1RpbWVvdXR9bXNgKSk7XG4gICAgICB9LCB0aGlzLmxvY2tUaW1lb3V0KTtcblxuICAgICAgYXR0ZW1wdExvY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbGVhc2VMb2NrKGZpbGVQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmxvY2tzLmRlbGV0ZShmaWxlUGF0aCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGaWxlIHdhdGNoZXIgaW1wbGVtZW50YXRpb24gZm9yIG1vbml0b3JpbmcgcmVzcG9uc2UgZmlsZXNcbiAqL1xuY2xhc3MgRmlsZVdhdGNoZXIge1xuICBwcml2YXRlIHdhdGNoZXJzOiBNYXA8c3RyaW5nLCBhbnk+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGNhbGxiYWNrczogTWFwPHN0cmluZywgKGNvbnRlbnQ6IHN0cmluZykgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cbiAgd2F0Y2goZmlsZVBhdGg6IHN0cmluZywgY2FsbGJhY2s6IChjb250ZW50OiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmNhbGxiYWNrcy5zZXQoZmlsZVBhdGgsIGNhbGxiYWNrKTtcbiAgICBcbiAgICAvLyBTaW1wbGUgcG9sbGluZyBpbXBsZW1lbnRhdGlvbiAoY291bGQgYmUgZW5oYW5jZWQgd2l0aCBwcm9wZXIgZmlsZSB3YXRjaGluZylcbiAgICBjb25zdCB3YXRjaGVyID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5maWxlRXhpc3RzKGZpbGVQYXRoKTtcbiAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKGZpbGVQYXRoKTtcbiAgICAgICAgICBjYWxsYmFjayhjb250ZW50KTtcbiAgICAgICAgICB0aGlzLnVud2F0Y2goZmlsZVBhdGgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBGaWxlIGRvZXNuJ3QgZXhpc3QgeWV0IG9yIG90aGVyIGVycm9yLCBjb250aW51ZSB3YXRjaGluZ1xuICAgICAgfVxuICAgIH0sIDUwMCk7IC8vIENoZWNrIGV2ZXJ5IDUwMG1zXG5cbiAgICB0aGlzLndhdGNoZXJzLnNldChmaWxlUGF0aCwgd2F0Y2hlcik7XG4gIH1cblxuICB1bndhdGNoKGZpbGVQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCB3YXRjaGVyID0gdGhpcy53YXRjaGVycy5nZXQoZmlsZVBhdGgpO1xuICAgIGlmICh3YXRjaGVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHdhdGNoZXIpO1xuICAgICAgdGhpcy53YXRjaGVycy5kZWxldGUoZmlsZVBhdGgpO1xuICAgIH1cbiAgICB0aGlzLmNhbGxiYWNrcy5kZWxldGUoZmlsZVBhdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmaWxlRXhpc3RzKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBQbGF0Zm9ybS1zcGVjaWZpYyBmaWxlIGV4aXN0ZW5jZSBjaGVja1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuYXBwPy52YXVsdD8uYWRhcHRlcj8uZXhpc3RzKSB7XG4gICAgICAvLyBPYnNpZGlhbiBlbnZpcm9ubWVudFxuICAgICAgcmV0dXJuIHdpbmRvdy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIE5vZGUuanMgZW52aXJvbm1lbnRcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZzID0gKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlKCdmcycpLnByb21pc2VzO1xuICAgICAgICBhd2FpdCBmcy5hY2Nlc3MoZmlsZVBhdGgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVhZEZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gUGxhdGZvcm0tc3BlY2lmaWMgZmlsZSByZWFkaW5nXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHA/LnZhdWx0Py5hZGFwdGVyPy5yZWFkKSB7XG4gICAgICAvLyBPYnNpZGlhbiBlbnZpcm9ubWVudFxuICAgICAgcmV0dXJuIHdpbmRvdy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBOb2RlLmpzIGVudmlyb25tZW50XG4gICAgICBjb25zdCBmcyA9IChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSgnZnMnKS5wcm9taXNlcztcbiAgICAgIHJldHVybiBmcy5yZWFkRmlsZShmaWxlUGF0aCwgJ3V0Zi04Jyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignRmlsZSByZWFkaW5nIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICB9XG59XG5cbi8qKlxuICogRmlsZVN5c3RlbSBUcmFuc3BvcnQgaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVTeXN0ZW1UcmFuc3BvcnQgZXh0ZW5kcyBCYXNlVHJhbnNwb3J0IHtcbiAgcHJpdmF0ZSBkZXZQaXBlUGF0aDogc3RyaW5nO1xuICBwcml2YXRlIGZpbGVXYXRjaGVyOiBGaWxlV2F0Y2hlcjtcbiAgcHJpdmF0ZSBsb2NrTWFuYWdlcjogRmlsZUxvY2tNYW5hZ2VyO1xuICBwcml2YXRlIHBlbmRpbmdSZXF1ZXN0czogTWFwPHN0cmluZywgUGVuZGluZ0ZpbGVSZXF1ZXN0PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBmc0NvbmZpZzogRmlsZVN5c3RlbVRyYW5zcG9ydENvbmZpZztcbiAgcHJpdmF0ZSBtZXNzYWdlUXVldWU6IERldlBpcGVNZXNzYWdlW10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFRyYW5zcG9ydENvbmZpZykge1xuICAgIHN1cGVyKFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTSwgY29uZmlnKTtcbiAgICBcbiAgICB0aGlzLmZzQ29uZmlnID0gY29uZmlnLmZpbGVzeXN0ZW0gfHwge1xuICAgICAgd2F0Y2hJbnRlcnZhbDogNTAwLFxuICAgICAgbG9ja1RpbWVvdXQ6IDUwMDAsXG4gICAgICBtYXhRdWV1ZVNpemU6IDEwMFxuICAgIH07XG4gICAgXG4gICAgdGhpcy5kZXZQaXBlUGF0aCA9IGNvbmZpZy5kZXZQaXBlUGF0aCB8fCAnLi9kZXZwaXBlJztcbiAgICB0aGlzLmZpbGVXYXRjaGVyID0gbmV3IEZpbGVXYXRjaGVyKCk7XG4gICAgdGhpcy5sb2NrTWFuYWdlciA9IG5ldyBGaWxlTG9ja01hbmFnZXIodGhpcy5mc0NvbmZpZy5sb2NrVGltZW91dCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZG9Jbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFZhbGlkYXRlIGZpbGUgc3lzdGVtIHN1cHBvcnQgaW4gZW52aXJvbm1lbnRcbiAgICBjb25zdCBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgaWYgKCFlbnZpcm9ubWVudC5oYXNGaWxlU3lzdGVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGVTeXN0ZW0gdHJhbnNwb3J0IG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBkZXZwaXBlIGRpcmVjdG9yeSBleGlzdHNcbiAgICBhd2FpdCB0aGlzLmVuc3VyZURpcmVjdG9yeUV4aXN0cyh0aGlzLmRldlBpcGVQYXRoKTtcbiAgICBcbiAgICB0aGlzLmRlYnVnKCdGaWxlU3lzdGVtIHRyYW5zcG9ydCBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgYXN5bmMgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgIGF3YWl0IHRoaXMuZG9IZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBTdGFydCB3YXRjaGluZyBmb3IgaW5jb21pbmcgbWVzc2FnZXNcbiAgICAgIHRoaXMuc2V0dXBJbmNvbWluZ01lc3NhZ2VXYXRjaGVyKCk7XG4gICAgICBcbiAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLnN0YXR1cyA9ICdoZWFsdGh5JztcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5DT05ORUNURUQsIHsgdHJhbnNwb3J0OiB0aGlzLnR5cGUgfSk7XG4gICAgICBcbiAgICAgIHRoaXMuZGVidWcoJ0ZpbGVTeXN0ZW0gdHJhbnNwb3J0IGNvbm5lY3RlZCcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuRVJST1IsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUmVqZWN0IGFsbCBwZW5kaW5nIHJlcXVlc3RzXG4gICAgY29uc3QgcmVxdWVzdHMgPSBBcnJheS5mcm9tKHRoaXMucGVuZGluZ1JlcXVlc3RzLnZhbHVlcygpKTtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgcmVxdWVzdHMpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZXF1ZXN0LnRpbWVvdXQpO1xuICAgICAgdGhpcy5maWxlV2F0Y2hlci51bndhdGNoKHJlcXVlc3QucmVzcG9uc2VGaWxlKTtcbiAgICAgIHJlcXVlc3QucmVqZWN0KG5ldyBFcnJvcignVHJhbnNwb3J0IGRpc2Nvbm5lY3RlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuY2xlYXIoKTtcblxuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkRJU0NPTk5FQ1RFRCwgeyB0cmFuc3BvcnQ6IHRoaXMudHlwZSB9KTtcbiAgICBcbiAgICB0aGlzLmRlYnVnKCdGaWxlU3lzdGVtIHRyYW5zcG9ydCBkaXNjb25uZWN0ZWQnKTtcbiAgfVxuXG4gIGFzeW5jIHNlbmQobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPERldlBpcGVSZXNwb25zZT4ge1xuICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGVTeXN0ZW0gdHJhbnNwb3J0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbWVzc2FnZSBJRCBpZiBub3QgcHJlc2VudFxuICAgIGlmICghbWVzc2FnZS5pZCkge1xuICAgICAgbWVzc2FnZS5pZCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGltZXN0YW1wXG4gICAgbWVzc2FnZS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXG4gICAgcmV0dXJuIHRoaXMuZXhlY3V0ZVdpdGhDaXJjdWl0QnJlYWtlcihhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kRmlsZU1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfSwgJ2ZpbGVzeXN0ZW1fc2VuZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kRmlsZU1lc3NhZ2UobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPERldlBpcGVSZXNwb25zZT4ge1xuICAgIGNvbnN0IHJlcXVlc3RGaWxlID0gYCR7dGhpcy5kZXZQaXBlUGF0aH0vcmVxdWVzdF8ke21lc3NhZ2UuaWR9Lmpzb25gO1xuICAgIGNvbnN0IHJlc3BvbnNlRmlsZSA9IGAke3RoaXMuZGV2UGlwZVBhdGh9L3Jlc3BvbnNlXyR7bWVzc2FnZS5pZH0uanNvbmA7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZS5pZCEpO1xuICAgICAgICB0aGlzLmZpbGVXYXRjaGVyLnVud2F0Y2gocmVzcG9uc2VGaWxlKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmlsZVN5c3RlbSByZXF1ZXN0IHRpbWVvdXQgYWZ0ZXIgJHt0aGlzLmNvbmZpZy50aW1lb3V0fW1zYCkpO1xuICAgICAgfSwgdGhpcy5jb25maWcudGltZW91dCk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFBlbmRpbmdGaWxlUmVxdWVzdCA9IHtcbiAgICAgICAgaWQ6IG1lc3NhZ2UuaWQhLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICByZXNvbHZlOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgICB0aGlzLmZpbGVXYXRjaGVyLnVud2F0Y2gocmVzcG9uc2VGaWxlKTtcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgICB0aGlzLmZpbGVXYXRjaGVyLnVud2F0Y2gocmVzcG9uc2VGaWxlKTtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0OiB0aW1lb3V0SGFuZGxlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHJlcXVlc3RGaWxlLFxuICAgICAgICByZXNwb25zZUZpbGVcbiAgICAgIH07XG5cbiAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLnNldChtZXNzYWdlLmlkISwgcmVxdWVzdCk7XG5cbiAgICAgIC8vIFdhdGNoIGZvciByZXNwb25zZSBmaWxlXG4gICAgICB0aGlzLmZpbGVXYXRjaGVyLndhdGNoKHJlc3BvbnNlRmlsZSwgKGNvbnRlbnQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICAgICAgY29uc3QgZGV2UGlwZVJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBpZDogcmVzcG9uc2UuaWQsXG4gICAgICAgICAgICBzdWNjZXNzOiByZXNwb25zZS5zdWNjZXNzICE9PSBmYWxzZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHJlc3BvbnNlLnBheWxvYWQsXG4gICAgICAgICAgICBlcnJvcjogcmVzcG9uc2UuZXJyb3IsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJlcXVlc3QucmVzb2x2ZShkZXZQaXBlUmVzcG9uc2UpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJlcXVlc3QucmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlIGZpbGUnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBXcml0ZSByZXF1ZXN0IGZpbGVcbiAgICAgIHRoaXMud3JpdGVSZXF1ZXN0RmlsZShyZXF1ZXN0RmlsZSwgbWVzc2FnZSwgcmVxdWVzdCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHdyaXRlUmVxdWVzdEZpbGUoZmlsZVBhdGg6IHN0cmluZywgbWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UsIHJlcXVlc3Q6IFBlbmRpbmdGaWxlUmVxdWVzdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmxvY2tNYW5hZ2VyLmFjcXVpcmVMb2NrKGZpbGVQYXRoKTtcbiAgICAgIGF3YWl0IHRoaXMud3JpdGVGaWxlKGZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShtZXNzYWdlLCBudWxsLCAyKSk7XG4gICAgICB0aGlzLmxvY2tNYW5hZ2VyLnJlbGVhc2VMb2NrKGZpbGVQYXRoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2NrTWFuYWdlci5yZWxlYXNlTG9jayhmaWxlUGF0aCk7XG4gICAgICByZXF1ZXN0LnJlamVjdChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB3cml0ZSByZXF1ZXN0IGZpbGUnKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEluY29taW5nTWVzc2FnZVdhdGNoZXIoKTogdm9pZCB7XG4gICAgLy8gV2F0Y2ggZm9yIGluY29taW5nIG1lc3NhZ2VzICh0aGlzIHdvdWxkIGJlIGltcGxlbWVudGVkIGJhc2VkIG9uIHRoZSBzcGVjaWZpYyBwcm90b2NvbClcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IGxvZyB0aGF0IHRoZSB3YXRjaGVyIGlzIHNldCB1cFxuICAgIHRoaXMuZGVidWcoJ0luY29taW5nIG1lc3NhZ2Ugd2F0Y2hlciBzZXR1cCBjb21wbGV0ZWQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlRGlyZWN0b3J5RXhpc3RzKHBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFBsYXRmb3JtLXNwZWNpZmljIGRpcmVjdG9yeSBjcmVhdGlvblxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuYXBwPy52YXVsdD8uYWRhcHRlcj8ubWtkaXIpIHtcbiAgICAgIC8vIE9ic2lkaWFuIGVudmlyb25tZW50XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIocGF0aCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBEaXJlY3RvcnkgbWlnaHQgYWxyZWFkeSBleGlzdFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIE5vZGUuanMgZW52aXJvbm1lbnRcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZzID0gKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlKCdmcycpLnByb21pc2VzO1xuICAgICAgICBhd2FpdCBmcy5ta2RpcihwYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIERpcmVjdG9yeSBtaWdodCBhbHJlYWR5IGV4aXN0XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB3cml0ZUZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUGxhdGZvcm0tc3BlY2lmaWMgZmlsZSB3cml0aW5nXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHA/LnZhdWx0Py5hZGFwdGVyPy53cml0ZSkge1xuICAgICAgLy8gT2JzaWRpYW4gZW52aXJvbm1lbnRcbiAgICAgIHJldHVybiB3aW5kb3cuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIE5vZGUuanMgZW52aXJvbm1lbnRcbiAgICAgIGNvbnN0IGZzID0gKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlKCdmcycpLnByb21pc2VzO1xuICAgICAgcmV0dXJuIGZzLndyaXRlRmlsZShmaWxlUGF0aCwgY29udGVudCwgJ3V0Zi04Jyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignRmlsZSB3cml0aW5nIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWFkRmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBQbGF0Zm9ybS1zcGVjaWZpYyBmaWxlIHJlYWRpbmdcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmFwcD8udmF1bHQ/LmFkYXB0ZXI/LnJlYWQpIHtcbiAgICAgIC8vIE9ic2lkaWFuIGVudmlyb25tZW50XG4gICAgICByZXR1cm4gd2luZG93LmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIE5vZGUuanMgZW52aXJvbm1lbnRcbiAgICAgIGNvbnN0IGZzID0gKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlKCdmcycpLnByb21pc2VzO1xuICAgICAgcmV0dXJuIGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHJlYWRpbmcgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZG9IZWFsdGhDaGVjaygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB0ZXN0RmlsZSA9IGAke3RoaXMuZGV2UGlwZVBhdGh9L2hlYWx0aF9jaGVja18ke0RhdGUubm93KCl9LnRtcGA7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRlc3Qgd3JpdGUgYWNjZXNzXG4gICAgICBhd2FpdCB0aGlzLndyaXRlRmlsZSh0ZXN0RmlsZSwgJ2hlYWx0aF9jaGVjaycpO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHJlYWQgYWNjZXNzXG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5yZWFkRmlsZSh0ZXN0RmlsZSk7XG4gICAgICBpZiAoY29udGVudCAhPT0gJ2hlYWx0aF9jaGVjaycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIGNvbnRlbnQgbWlzbWF0Y2ggZHVyaW5nIGhlYWx0aCBjaGVjaycpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCB0ZXN0IGZpbGVcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZSh0ZXN0RmlsZSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlU3lzdGVtIGhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBQbGF0Zm9ybS1zcGVjaWZpYyBmaWxlIGRlbGV0aW9uXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHA/LnZhdWx0Py5hZGFwdGVyPy5yZW1vdmUpIHtcbiAgICAgIC8vIE9ic2lkaWFuIGVudmlyb25tZW50XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKGZpbGVQYXRoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIEZpbGUgbWlnaHQgbm90IGV4aXN0XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZnMgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XG4gICAgICAgIGF3YWl0IGZzLnVubGluayhmaWxlUGF0aCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBGaWxlIG1pZ2h0IG5vdCBleGlzdFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldENhcGFiaWxpdGllcygpOiBUcmFuc3BvcnRDYXBhYmlsaXRpZXMge1xuICAgIHJldHVybiB7XG4gICAgICBzdXBwb3J0c1JlYWx0aW1lOiBmYWxzZSxcbiAgICAgIHN1cHBvcnRzQmlkaXJlY3Rpb25hbDogdHJ1ZSxcbiAgICAgIHN1cHBvcnRzRmlsZVN5c3RlbTogdHJ1ZSxcbiAgICAgIHN1cHBvcnRzU3RyZWFtaW5nOiBmYWxzZSxcbiAgICAgIG1heE1lc3NhZ2VTaXplOiAxMCAqIDEwMjQgKiAxMDI0LCAvLyAxME1CXG4gICAgICBhdmVyYWdlTGF0ZW5jeTogdGhpcy5oZWFsdGhTdGF0dXMubGF0ZW5jeSxcbiAgICAgIG1heENvbmN1cnJlbnRDb25uZWN0aW9uczogMSxcbiAgICAgIHJlbGlhYmlsaXR5OiB0aGlzLmNhbGN1bGF0ZVJlbGlhYmlsaXR5KCksXG4gICAgICBzdXBwb3J0ZWRFbnZpcm9ubWVudHM6IFsnbm9kZScsICdvYnNpZGlhbiddXG4gICAgfTtcbiAgfVxufVxuIiwiLyoqXG4gKiBUcmFuc3BvcnQgSGVhbHRoIE1vbml0b3IgZm9yIG1vbml0b3JpbmcgdHJhbnNwb3J0IGhlYWx0aCBhbmQgcGVyZm9ybWFuY2VcbiAqL1xuXG5pbXBvcnQgeyBcbiAgRGV2UGlwZVRyYW5zcG9ydCwgXG4gIFRyYW5zcG9ydFR5cGUsIFxuICBUcmFuc3BvcnRIZWFsdGhTdGF0dXMsXG4gIEhlYWx0aENoZWNrUmVzdWx0LFxuICBUcmFuc3BvcnRFdmVudFxufSBmcm9tICcuLi90cmFuc3BvcnRzL0RldlBpcGVUcmFuc3BvcnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWx0aENoZWNrU2NoZWR1bGUge1xuICB0cmFuc3BvcnQ6IERldlBpcGVUcmFuc3BvcnQ7XG4gIGludGVydmFsOiBudW1iZXI7XG4gIGxhc3RDaGVjazogbnVtYmVyO1xuICBjb25zZWN1dGl2ZUZhaWx1cmVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQXNzZXNzbWVudCB7XG4gIHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZTtcbiAgc2NvcmU6IG51bWJlcjsgLy8gMC0xLCBoaWdoZXIgaXMgYmV0dGVyXG4gIHN0YXR1czogJ2V4Y2VsbGVudCcgfCAnZ29vZCcgfCAnZmFpcicgfCAncG9vcicgfCAnZmFpbGluZyc7XG4gIG1ldHJpY3M6IHtcbiAgICBhdmFpbGFiaWxpdHk6IG51bWJlcjtcbiAgICBsYXRlbmN5OiBudW1iZXI7XG4gICAgcmVsaWFiaWxpdHk6IG51bWJlcjtcbiAgICBlcnJvclJhdGU6IG51bWJlcjtcbiAgfTtcbiAgcmVjb21tZW5kYXRpb246ICd1c2UnIHwgJ21vbml0b3InIHwgJ2F2b2lkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXRyaWNzQ29sbGVjdG9yIHtcbiAgcmVjb3JkTGF0ZW5jeSh0cmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUsIGxhdGVuY3k6IG51bWJlcik6IHZvaWQ7XG4gIHJlY29yZFN1Y2Nlc3ModHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogdm9pZDtcbiAgcmVjb3JkRmFpbHVyZSh0cmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUsIGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gIGdldE1ldHJpY3ModHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogVHJhbnNwb3J0TWV0cmljcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc3BvcnRNZXRyaWNzIHtcbiAgdG90YWxSZXF1ZXN0czogbnVtYmVyO1xuICBzdWNjZXNzZnVsUmVxdWVzdHM6IG51bWJlcjtcbiAgZmFpbGVkUmVxdWVzdHM6IG51bWJlcjtcbiAgYXZlcmFnZUxhdGVuY3k6IG51bWJlcjtcbiAgbWluTGF0ZW5jeTogbnVtYmVyO1xuICBtYXhMYXRlbmN5OiBudW1iZXI7XG4gIHVwdGltZTogbnVtYmVyO1xuICBsYXN0QWN0aXZpdHk6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDb2xsZWN0cyBhbmQgYWdncmVnYXRlcyB0cmFuc3BvcnQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdE1ldHJpY3NDb2xsZWN0b3IgaW1wbGVtZW50cyBNZXRyaWNzQ29sbGVjdG9yIHtcbiAgcHJpdmF0ZSBtZXRyaWNzOiBNYXA8VHJhbnNwb3J0VHlwZSwgVHJhbnNwb3J0TWV0cmljcz4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbGF0ZW5jeUhpc3Rvcnk6IE1hcDxUcmFuc3BvcnRUeXBlLCBudW1iZXJbXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX0hJU1RPUllfU0laRSA9IDEwMDtcblxuICByZWNvcmRMYXRlbmN5KHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSwgbGF0ZW5jeTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMuZ2V0T3JDcmVhdGVNZXRyaWNzKHRyYW5zcG9ydCk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGxhdGVuY3kgbWV0cmljc1xuICAgIGNvbnN0IGhpc3RvcnkgPSB0aGlzLmdldE9yQ3JlYXRlSGlzdG9yeSh0cmFuc3BvcnQpO1xuICAgIGhpc3RvcnkucHVzaChsYXRlbmN5KTtcbiAgICBpZiAoaGlzdG9yeS5sZW5ndGggPiB0aGlzLk1BWF9ISVNUT1JZX1NJWkUpIHtcbiAgICAgIGhpc3Rvcnkuc2hpZnQoKTtcbiAgICB9XG4gICAgXG4gICAgbWV0cmljcy5hdmVyYWdlTGF0ZW5jeSA9IGhpc3RvcnkucmVkdWNlKChzdW0sIHZhbCkgPT4gc3VtICsgdmFsLCAwKSAvIGhpc3RvcnkubGVuZ3RoO1xuICAgIG1ldHJpY3MubWluTGF0ZW5jeSA9IE1hdGgubWluKG1ldHJpY3MubWluTGF0ZW5jeSwgbGF0ZW5jeSk7XG4gICAgbWV0cmljcy5tYXhMYXRlbmN5ID0gTWF0aC5tYXgobWV0cmljcy5tYXhMYXRlbmN5LCBsYXRlbmN5KTtcbiAgICBtZXRyaWNzLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XG4gIH1cblxuICByZWNvcmRTdWNjZXNzKHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSk6IHZvaWQge1xuICAgIGNvbnN0IG1ldHJpY3MgPSB0aGlzLmdldE9yQ3JlYXRlTWV0cmljcyh0cmFuc3BvcnQpO1xuICAgIG1ldHJpY3MudG90YWxSZXF1ZXN0cysrO1xuICAgIG1ldHJpY3Muc3VjY2Vzc2Z1bFJlcXVlc3RzKys7XG4gICAgbWV0cmljcy5sYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpO1xuICB9XG5cbiAgcmVjb3JkRmFpbHVyZSh0cmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUsIGVycm9yOiBFcnJvcik6IHZvaWQge1xuICAgIGNvbnN0IG1ldHJpY3MgPSB0aGlzLmdldE9yQ3JlYXRlTWV0cmljcyh0cmFuc3BvcnQpO1xuICAgIG1ldHJpY3MudG90YWxSZXF1ZXN0cysrO1xuICAgIG1ldHJpY3MuZmFpbGVkUmVxdWVzdHMrKztcbiAgICBtZXRyaWNzLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XG4gIH1cblxuICBnZXRNZXRyaWNzKHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSk6IFRyYW5zcG9ydE1ldHJpY3Mge1xuICAgIHJldHVybiB0aGlzLmdldE9yQ3JlYXRlTWV0cmljcyh0cmFuc3BvcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZU1ldHJpY3ModHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogVHJhbnNwb3J0TWV0cmljcyB7XG4gICAgaWYgKCF0aGlzLm1ldHJpY3MuaGFzKHRyYW5zcG9ydCkpIHtcbiAgICAgIHRoaXMubWV0cmljcy5zZXQodHJhbnNwb3J0LCB7XG4gICAgICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgICAgIHN1Y2Nlc3NmdWxSZXF1ZXN0czogMCxcbiAgICAgICAgZmFpbGVkUmVxdWVzdHM6IDAsXG4gICAgICAgIGF2ZXJhZ2VMYXRlbmN5OiAwLFxuICAgICAgICBtaW5MYXRlbmN5OiBJbmZpbml0eSxcbiAgICAgICAgbWF4TGF0ZW5jeTogMCxcbiAgICAgICAgdXB0aW1lOiAwLFxuICAgICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KClcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tZXRyaWNzLmdldCh0cmFuc3BvcnQpITtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3JDcmVhdGVIaXN0b3J5KHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSk6IG51bWJlcltdIHtcbiAgICBpZiAoIXRoaXMubGF0ZW5jeUhpc3RvcnkuaGFzKHRyYW5zcG9ydCkpIHtcbiAgICAgIHRoaXMubGF0ZW5jeUhpc3Rvcnkuc2V0KHRyYW5zcG9ydCwgW10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5sYXRlbmN5SGlzdG9yeS5nZXQodHJhbnNwb3J0KSE7XG4gIH1cbn1cblxuLyoqXG4gKiBNb25pdG9ycyB0cmFuc3BvcnQgaGVhbHRoIGFuZCBwcm92aWRlcyBhc3Nlc3NtZW50c1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNwb3J0SGVhbHRoTW9uaXRvciB7XG4gIHByaXZhdGUgc2NoZWR1bGVzOiBNYXA8c3RyaW5nLCBIZWFsdGhDaGVja1NjaGVkdWxlPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtZXRyaWNzQ29sbGVjdG9yOiBNZXRyaWNzQ29sbGVjdG9yO1xuICBwcml2YXRlIG1vbml0b3JpbmdJbnRlcnZhbD86IGFueTtcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogTWFwPHN0cmluZywgRnVuY3Rpb25bXT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IobWV0cmljc0NvbGxlY3Rvcj86IE1ldHJpY3NDb2xsZWN0b3IpIHtcbiAgICB0aGlzLm1ldHJpY3NDb2xsZWN0b3IgPSBtZXRyaWNzQ29sbGVjdG9yIHx8IG5ldyBEZWZhdWx0TWV0cmljc0NvbGxlY3RvcigpO1xuICB9XG5cbiAgc3RhcnRNb25pdG9yaW5nKHRyYW5zcG9ydDogRGV2UGlwZVRyYW5zcG9ydCwgaW50ZXJ2YWw6IG51bWJlciA9IDMwMDAwKTogdm9pZCB7XG4gICAgY29uc3Qgc2NoZWR1bGU6IEhlYWx0aENoZWNrU2NoZWR1bGUgPSB7XG4gICAgICB0cmFuc3BvcnQsXG4gICAgICBpbnRlcnZhbCxcbiAgICAgIGxhc3RDaGVjazogMCxcbiAgICAgIGNvbnNlY3V0aXZlRmFpbHVyZXM6IDBcbiAgICB9O1xuXG4gICAgdGhpcy5zY2hlZHVsZXMuc2V0KHRyYW5zcG9ydC5pZCwgc2NoZWR1bGUpO1xuXG4gICAgLy8gU2V0IHVwIHRyYW5zcG9ydCBldmVudCBsaXN0ZW5lcnNcbiAgICB0cmFuc3BvcnQub24oVHJhbnNwb3J0RXZlbnQuSEVBTFRIX0NIRUNLLCAocmVzdWx0OiBIZWFsdGhDaGVja1Jlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRMYXRlbmN5KHRyYW5zcG9ydC50eXBlLCByZXN1bHQubGF0ZW5jeSk7XG4gICAgICAgIHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRTdWNjZXNzKHRyYW5zcG9ydC50eXBlKTtcbiAgICAgICAgc2NoZWR1bGUuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1ldHJpY3NDb2xsZWN0b3IucmVjb3JkRmFpbHVyZSh0cmFuc3BvcnQudHlwZSwgbmV3IEVycm9yKHJlc3VsdC5lcnJvciB8fCAnSGVhbHRoIGNoZWNrIGZhaWxlZCcpKTtcbiAgICAgICAgc2NoZWR1bGUuY29uc2VjdXRpdmVGYWlsdXJlcysrO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmVtaXQoJ2hlYWx0aC11cGRhdGVkJywgdGhpcy5hc3Nlc3NUcmFuc3BvcnRIZWFsdGgodHJhbnNwb3J0KSk7XG4gICAgfSk7XG5cbiAgICAvLyBTdGFydCBwZXJpb2RpYyBtb25pdG9yaW5nIGlmIG5vdCBhbHJlYWR5IHJ1bm5pbmdcbiAgICBpZiAoIXRoaXMubW9uaXRvcmluZ0ludGVydmFsKSB7XG4gICAgICB0aGlzLnN0YXJ0UGVyaW9kaWNDaGVja3MoKTtcbiAgICB9XG4gIH1cblxuICBzdG9wTW9uaXRvcmluZyh0cmFuc3BvcnQ6IERldlBpcGVUcmFuc3BvcnQpOiB2b2lkIHtcbiAgICB0aGlzLnNjaGVkdWxlcy5kZWxldGUodHJhbnNwb3J0LmlkKTtcbiAgICBcbiAgICAvLyBTdG9wIHBlcmlvZGljIG1vbml0b3JpbmcgaWYgbm8gdHJhbnNwb3J0cyBhcmUgYmVpbmcgbW9uaXRvcmVkXG4gICAgaWYgKHRoaXMuc2NoZWR1bGVzLnNpemUgPT09IDAgJiYgdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgYXNzZXNzVHJhbnNwb3J0SGVhbHRoKHRyYW5zcG9ydDogRGV2UGlwZVRyYW5zcG9ydCk6IEhlYWx0aEFzc2Vzc21lbnQge1xuICAgIGNvbnN0IG1ldHJpY3MgPSB0aGlzLm1ldHJpY3NDb2xsZWN0b3IuZ2V0TWV0cmljcyh0cmFuc3BvcnQudHlwZSk7XG4gICAgY29uc3QgaGVhbHRoU3RhdHVzID0gdHJhbnNwb3J0LmdldEhlYWx0aFN0YXR1cygpO1xuICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IHRyYW5zcG9ydC5nZXRDYXBhYmlsaXRpZXMoKTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgaW5kaXZpZHVhbCBtZXRyaWMgc2NvcmVzICgwLTEpXG4gICAgY29uc3QgYXZhaWxhYmlsaXR5ID0gdGhpcy5jYWxjdWxhdGVBdmFpbGFiaWxpdHlTY29yZSh0cmFuc3BvcnQpO1xuICAgIGNvbnN0IGxhdGVuY3kgPSB0aGlzLmNhbGN1bGF0ZUxhdGVuY3lTY29yZShoZWFsdGhTdGF0dXMubGF0ZW5jeSk7XG4gICAgY29uc3QgcmVsaWFiaWxpdHkgPSB0aGlzLmNhbGN1bGF0ZVJlbGlhYmlsaXR5U2NvcmUobWV0cmljcyk7XG4gICAgY29uc3QgZXJyb3JSYXRlID0gdGhpcy5jYWxjdWxhdGVFcnJvclJhdGVTY29yZShtZXRyaWNzKTtcbiAgICBcbiAgICAvLyBXZWlnaHRlZCBvdmVyYWxsIHNjb3JlXG4gICAgY29uc3Qgc2NvcmUgPSAoXG4gICAgICBhdmFpbGFiaWxpdHkgKiAwLjMgK1xuICAgICAgbGF0ZW5jeSAqIDAuMjUgK1xuICAgICAgcmVsaWFiaWxpdHkgKiAwLjMgK1xuICAgICAgZXJyb3JSYXRlICogMC4xNVxuICAgICk7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHN0YXR1cyBiYXNlZCBvbiBzY29yZVxuICAgIGxldCBzdGF0dXM6IEhlYWx0aEFzc2Vzc21lbnRbJ3N0YXR1cyddO1xuICAgIGlmIChzY29yZSA+PSAwLjkpIHN0YXR1cyA9ICdleGNlbGxlbnQnO1xuICAgIGVsc2UgaWYgKHNjb3JlID49IDAuNykgc3RhdHVzID0gJ2dvb2QnO1xuICAgIGVsc2UgaWYgKHNjb3JlID49IDAuNSkgc3RhdHVzID0gJ2ZhaXInO1xuICAgIGVsc2UgaWYgKHNjb3JlID49IDAuMykgc3RhdHVzID0gJ3Bvb3InO1xuICAgIGVsc2Ugc3RhdHVzID0gJ2ZhaWxpbmcnO1xuICAgIFxuICAgIC8vIERldGVybWluZSByZWNvbW1lbmRhdGlvblxuICAgIGxldCByZWNvbW1lbmRhdGlvbjogSGVhbHRoQXNzZXNzbWVudFsncmVjb21tZW5kYXRpb24nXTtcbiAgICBpZiAoc2NvcmUgPj0gMC43KSByZWNvbW1lbmRhdGlvbiA9ICd1c2UnO1xuICAgIGVsc2UgaWYgKHNjb3JlID49IDAuNCkgcmVjb21tZW5kYXRpb24gPSAnbW9uaXRvcic7XG4gICAgZWxzZSByZWNvbW1lbmRhdGlvbiA9ICdhdm9pZCc7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYW5zcG9ydDogdHJhbnNwb3J0LnR5cGUsXG4gICAgICBzY29yZSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgYXZhaWxhYmlsaXR5LFxuICAgICAgICBsYXRlbmN5OiBsYXRlbmN5LFxuICAgICAgICByZWxpYWJpbGl0eSxcbiAgICAgICAgZXJyb3JSYXRlOiAxIC0gZXJyb3JSYXRlIC8vIEludmVydCBmb3IgZGlzcGxheSAoaGlnaGVyIGlzIGJldHRlcilcbiAgICAgIH0sXG4gICAgICByZWNvbW1lbmRhdGlvblxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUF2YWlsYWJpbGl0eVNjb3JlKHRyYW5zcG9ydDogRGV2UGlwZVRyYW5zcG9ydCk6IG51bWJlciB7XG4gICAgaWYgKCF0cmFuc3BvcnQuaXNBdmFpbGFibGUoKSkgcmV0dXJuIDA7XG4gICAgaWYgKCF0cmFuc3BvcnQuaXNDb25uZWN0ZWQoKSkgcmV0dXJuIDAuMztcbiAgICBcbiAgICBjb25zdCBzY2hlZHVsZSA9IHRoaXMuc2NoZWR1bGVzLmdldCh0cmFuc3BvcnQuaWQpO1xuICAgIGlmICghc2NoZWR1bGUpIHJldHVybiAwLjg7IC8vIERlZmF1bHQgaWYgbm8gbW9uaXRvcmluZyBkYXRhXG4gICAgXG4gICAgLy8gUGVuYWxpemUgY29uc2VjdXRpdmUgZmFpbHVyZXNcbiAgICBjb25zdCBmYWlsdXJlUGVuYWx0eSA9IE1hdGgubWluKHNjaGVkdWxlLmNvbnNlY3V0aXZlRmFpbHVyZXMgKiAwLjEsIDAuNSk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDEuMCAtIGZhaWx1cmVQZW5hbHR5LCAwKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlTGF0ZW5jeVNjb3JlKGxhdGVuY3k6IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gT3B0aW1hbCBsYXRlbmN5IHRhcmdldHMgYnkgdHJhbnNwb3J0IHR5cGVcbiAgICBjb25zdCBleGNlbGxlbnQgPSA1MDsgICAvLyA8NTBtc1xuICAgIGNvbnN0IGdvb2QgPSAyMDA7ICAgICAgIC8vIDwyMDBtc1xuICAgIGNvbnN0IGFjY2VwdGFibGUgPSAxMDAwOyAvLyA8MXNcbiAgICBcbiAgICBpZiAobGF0ZW5jeSA8PSBleGNlbGxlbnQpIHJldHVybiAxLjA7XG4gICAgaWYgKGxhdGVuY3kgPD0gZ29vZCkgcmV0dXJuIDAuODtcbiAgICBpZiAobGF0ZW5jeSA8PSBhY2NlcHRhYmxlKSByZXR1cm4gMC42O1xuICAgIHJldHVybiBNYXRoLm1heCgwLjIsIDEuMCAtIChsYXRlbmN5IC8gNTAwMCkpOyAvLyBEZWdyYWRlIGZ1cnRoZXIgZm9yIHZlcnkgaGlnaCBsYXRlbmN5XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJlbGlhYmlsaXR5U2NvcmUobWV0cmljczogVHJhbnNwb3J0TWV0cmljcyk6IG51bWJlciB7XG4gICAgaWYgKG1ldHJpY3MudG90YWxSZXF1ZXN0cyA9PT0gMCkgcmV0dXJuIDAuNTsgLy8gVW5rbm93blxuICAgIFxuICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gbWV0cmljcy5zdWNjZXNzZnVsUmVxdWVzdHMgLyBtZXRyaWNzLnRvdGFsUmVxdWVzdHM7XG4gICAgcmV0dXJuIHN1Y2Nlc3NSYXRlO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVFcnJvclJhdGVTY29yZShtZXRyaWNzOiBUcmFuc3BvcnRNZXRyaWNzKTogbnVtYmVyIHtcbiAgICBpZiAobWV0cmljcy50b3RhbFJlcXVlc3RzID09PSAwKSByZXR1cm4gMS4wOyAvLyBObyBlcnJvcnMgeWV0XG4gICAgXG4gICAgY29uc3QgZXJyb3JSYXRlID0gbWV0cmljcy5mYWlsZWRSZXF1ZXN0cyAvIG1ldHJpY3MudG90YWxSZXF1ZXN0cztcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgMS4wIC0gZXJyb3JSYXRlKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRQZXJpb2RpY0NoZWNrcygpOiB2b2lkIHtcbiAgICB0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNjaGVkdWxlcyA9IEFycmF5LmZyb20odGhpcy5zY2hlZHVsZXMudmFsdWVzKCkpO1xuICAgICAgZm9yIChjb25zdCBzY2hlZHVsZSBvZiBzY2hlZHVsZXMpIHtcbiAgICAgICAgaWYgKG5vdyAtIHNjaGVkdWxlLmxhc3RDaGVjayA+PSBzY2hlZHVsZS5pbnRlcnZhbCkge1xuICAgICAgICAgIHNjaGVkdWxlLmxhc3RDaGVjayA9IG5vdztcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQZXJmb3JtIGhlYWx0aCBjaGVja1xuICAgICAgICAgIHNjaGVkdWxlLnRyYW5zcG9ydC5wZXJmb3JtSGVhbHRoQ2hlY2soKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAvLyBFcnJvciBpcyBhbHJlYWR5IGhhbmRsZWQgYnkgdGhlIHRyYW5zcG9ydCdzIGhlYWx0aCBjaGVjayBldmVudFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgNTAwMCk7IC8vIENoZWNrIGV2ZXJ5IDUgc2Vjb25kc1xuICB9XG5cbiAgLy8gRXZlbnQgc3lzdGVtXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVycy5oYXMoZXZlbnQpKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnNldChldmVudCwgW10pO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCkhLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgb2ZmKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhlYWx0aCBtb25pdG9yIGV2ZW50IGxpc3RlbmVyIGZvciAke2V2ZW50fTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldE1ldHJpY3NDb2xsZWN0b3IoKTogTWV0cmljc0NvbGxlY3RvciB7XG4gICAgcmV0dXJuIHRoaXMubWV0cmljc0NvbGxlY3RvcjtcbiAgfVxufVxuIiwiLyoqXG4gKiBUcmFuc3BvcnQgTWFuYWdlciAtIEludGVsbGlnZW50IHRyYW5zcG9ydCBzZWxlY3Rpb24gYW5kIGZhaWxvdmVyIG1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBcbiAgRGV2UGlwZVRyYW5zcG9ydCxcbiAgVHJhbnNwb3J0VHlwZSxcbiAgVHJhbnNwb3J0Q29uZmlnLFxuICBEZXZQaXBlTWVzc2FnZSxcbiAgRGV2UGlwZVJlc3BvbnNlLFxuICBUcmFuc3BvcnRFdmVudFxufSBmcm9tICcuL3RyYW5zcG9ydHMvRGV2UGlwZVRyYW5zcG9ydCc7XG5pbXBvcnQgeyBIVFRQVHJhbnNwb3J0IH0gZnJvbSAnLi90cmFuc3BvcnRzL0hUVFBUcmFuc3BvcnQnO1xuaW1wb3J0IHsgV2ViU29ja2V0VHJhbnNwb3J0IH0gZnJvbSAnLi90cmFuc3BvcnRzL1dlYlNvY2tldFRyYW5zcG9ydCc7XG5pbXBvcnQgeyBGaWxlU3lzdGVtVHJhbnNwb3J0IH0gZnJvbSAnLi90cmFuc3BvcnRzL0ZpbGVTeXN0ZW1UcmFuc3BvcnQnO1xuaW1wb3J0IHsgVHJhbnNwb3J0SGVhbHRoTW9uaXRvciwgSGVhbHRoQXNzZXNzbWVudCB9IGZyb20gJy4vbW9uaXRvcmluZy9UcmFuc3BvcnRIZWFsdGhNb25pdG9yJztcbmltcG9ydCB7IEVudmlyb25tZW50RGV0ZWN0b3IgfSBmcm9tICcuLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc3BvcnRTZWxlY3Rpb25Dcml0ZXJpYSB7XG4gIGxhdGVuY3lXZWlnaHQ6IG51bWJlcjsgICAgICAvLyAwLTFcbiAgcmVsaWFiaWxpdHlXZWlnaHQ6IG51bWJlcjsgIC8vIDAtMVxuICBjYXBhYmlsaXR5V2VpZ2h0OiBudW1iZXI7ICAgLy8gMC0xXG4gIGNvc3RXZWlnaHQ6IG51bWJlcjsgICAgICAgICAvLyAwLTFcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc3BvcnRNYW5hZ2VyQ29uZmlnIHtcbiAgc2VsZWN0aW9uQ3JpdGVyaWE6IFRyYW5zcG9ydFNlbGVjdGlvbkNyaXRlcmlhO1xuICBmYWxsYmFja0NoYWluOiBUcmFuc3BvcnRUeXBlW107XG4gIHRyYW5zcG9ydENvbmZpZ3M6IHtcbiAgICBodHRwOiBUcmFuc3BvcnRDb25maWc7XG4gICAgd2Vic29ja2V0PzogVHJhbnNwb3J0Q29uZmlnO1xuICAgIGZpbGVzeXN0ZW0/OiBUcmFuc3BvcnRDb25maWc7XG4gIH07XG4gIGhlYWx0aENoZWNrSW50ZXJ2YWw/OiBudW1iZXI7XG4gIGF1dG9GYWlsb3Zlcj86IGJvb2xlYW47XG4gIGRlYnVnPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25Db250ZXh0IHtcbiAgbWVzc2FnZVR5cGU/OiBzdHJpbmc7XG4gIHByaW9yaXR5PzogJ2xvdycgfCAnbm9ybWFsJyB8ICdoaWdoJyB8ICdjcml0aWNhbCc7XG4gIHJlcXVpcmVzUmVhbHRpbWU/OiBib29sZWFuO1xuICBtYXhMYXRlbmN5PzogbnVtYmVyO1xuICByZXRyeUF0dGVtcHQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogVHJhbnNwb3J0IHNlbGVjdG9yIHRoYXQgY2hvb3NlcyB0aGUgYmVzdCB0cmFuc3BvcnQgYmFzZWQgb24gY3JpdGVyaWFcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zcG9ydFNlbGVjdG9yIHtcbiAgcHJpdmF0ZSBjcml0ZXJpYTogVHJhbnNwb3J0U2VsZWN0aW9uQ3JpdGVyaWE7XG5cbiAgY29uc3RydWN0b3IoY3JpdGVyaWE6IFRyYW5zcG9ydFNlbGVjdGlvbkNyaXRlcmlhKSB7XG4gICAgdGhpcy5jcml0ZXJpYSA9IGNyaXRlcmlhO1xuICB9XG5cbiAgYXN5bmMgY2FsY3VsYXRlU2NvcmUodHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0LCBjb250ZXh0PzogU2VsZWN0aW9uQ29udGV4dCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdHJhbnNwb3J0LmdldENhcGFiaWxpdGllcygpO1xuICAgIGNvbnN0IGhlYWx0aFN0YXR1cyA9IHRyYW5zcG9ydC5nZXRIZWFsdGhTdGF0dXMoKTtcbiAgICBcbiAgICAvLyBDYXBhYmlsaXR5IHNjb3JlICgwLTEpXG4gICAgbGV0IGNhcGFiaWxpdHlTY29yZSA9IDAuNTsgLy8gQmFzZSBzY29yZVxuICAgIFxuICAgIGlmIChjb250ZXh0Py5yZXF1aXJlc1JlYWx0aW1lICYmIGNhcGFiaWxpdGllcy5zdXBwb3J0c1JlYWx0aW1lKSB7XG4gICAgICBjYXBhYmlsaXR5U2NvcmUgKz0gMC4zO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29udGV4dD8ubWF4TGF0ZW5jeSAmJiBjYXBhYmlsaXRpZXMuYXZlcmFnZUxhdGVuY3kgPD0gY29udGV4dC5tYXhMYXRlbmN5KSB7XG4gICAgICBjYXBhYmlsaXR5U2NvcmUgKz0gMC4yO1xuICAgIH1cbiAgICBcbiAgICAvLyBOb3JtYWxpemUgY2FwYWJpbGl0eSBzY29yZVxuICAgIGNhcGFiaWxpdHlTY29yZSA9IE1hdGgubWluKGNhcGFiaWxpdHlTY29yZSwgMS4wKTtcbiAgICBcbiAgICAvLyBMYXRlbmN5IHNjb3JlICgwLTEsIGxvd2VyIGxhdGVuY3kgPSBoaWdoZXIgc2NvcmUpXG4gICAgY29uc3QgbGF0ZW5jeVNjb3JlID0gTWF0aC5tYXgoMCwgMS4wIC0gKGNhcGFiaWxpdGllcy5hdmVyYWdlTGF0ZW5jeSAvIDUwMDApKTtcbiAgICBcbiAgICAvLyBSZWxpYWJpbGl0eSBzY29yZSAoMC0xKVxuICAgIGNvbnN0IHJlbGlhYmlsaXR5U2NvcmUgPSBjYXBhYmlsaXRpZXMucmVsaWFiaWxpdHk7XG4gICAgXG4gICAgLy8gQ29zdCBzY29yZSAoc2ltcGxpZmllZCAtIGNvdWxkIGJlIGVuaGFuY2VkIHdpdGggYWN0dWFsIGNvc3QgZGF0YSlcbiAgICBsZXQgY29zdFNjb3JlID0gMS4wO1xuICAgIGlmICh0cmFuc3BvcnQudHlwZSA9PT0gVHJhbnNwb3J0VHlwZS5IVFRQKSBjb3N0U2NvcmUgPSAwLjg7XG4gICAgZWxzZSBpZiAodHJhbnNwb3J0LnR5cGUgPT09IFRyYW5zcG9ydFR5cGUuV0VCU09DS0VUKSBjb3N0U2NvcmUgPSAwLjk7XG4gICAgZWxzZSBpZiAodHJhbnNwb3J0LnR5cGUgPT09IFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTSkgY29zdFNjb3JlID0gMS4wO1xuICAgIFxuICAgIC8vIEF2YWlsYWJpbGl0eSBwZW5hbHR5XG4gICAgbGV0IGF2YWlsYWJpbGl0eU11bHRpcGxpZXIgPSAxLjA7XG4gICAgaWYgKCF0cmFuc3BvcnQuaXNBdmFpbGFibGUoKSkgYXZhaWxhYmlsaXR5TXVsdGlwbGllciA9IDA7XG4gICAgZWxzZSBpZiAoIXRyYW5zcG9ydC5pc0Nvbm5lY3RlZCgpKSBhdmFpbGFiaWxpdHlNdWx0aXBsaWVyID0gMC4zO1xuICAgIGVsc2UgaWYgKGhlYWx0aFN0YXR1cy5zdGF0dXMgPT09ICdmYWlsaW5nJykgYXZhaWxhYmlsaXR5TXVsdGlwbGllciA9IDAuMTtcbiAgICBlbHNlIGlmIChoZWFsdGhTdGF0dXMuc3RhdHVzID09PSAnZGVncmFkZWQnKSBhdmFpbGFiaWxpdHlNdWx0aXBsaWVyID0gMC41O1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSB3ZWlnaHRlZCBzY29yZVxuICAgIGNvbnN0IHdlaWdodGVkU2NvcmUgPSAoXG4gICAgICBsYXRlbmN5U2NvcmUgKiB0aGlzLmNyaXRlcmlhLmxhdGVuY3lXZWlnaHQgK1xuICAgICAgcmVsaWFiaWxpdHlTY29yZSAqIHRoaXMuY3JpdGVyaWEucmVsaWFiaWxpdHlXZWlnaHQgK1xuICAgICAgY2FwYWJpbGl0eVNjb3JlICogdGhpcy5jcml0ZXJpYS5jYXBhYmlsaXR5V2VpZ2h0ICtcbiAgICAgIGNvc3RTY29yZSAqIHRoaXMuY3JpdGVyaWEuY29zdFdlaWdodFxuICAgICkgKiBhdmFpbGFiaWxpdHlNdWx0aXBsaWVyO1xuICAgIFxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB3ZWlnaHRlZFNjb3JlKSk7XG4gIH1cblxuICBzZWxlY3RCZXN0KFxuICAgIGF2YWlsYWJsZTogRGV2UGlwZVRyYW5zcG9ydFtdLCBcbiAgICBjb250ZXh0PzogU2VsZWN0aW9uQ29udGV4dFxuICApOiBQcm9taXNlPERldlBpcGVUcmFuc3BvcnQgfCBudWxsPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlKSA9PiB7XG4gICAgICBpZiAoYXZhaWxhYmxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBzY29yZXMgZm9yIGFsbCBhdmFpbGFibGUgdHJhbnNwb3J0c1xuICAgICAgY29uc3Qgc2NvcmVkVHJhbnNwb3J0cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBhdmFpbGFibGUubWFwKGFzeW5jICh0cmFuc3BvcnQpID0+ICh7XG4gICAgICAgICAgdHJhbnNwb3J0LFxuICAgICAgICAgIHNjb3JlOiBhd2FpdCB0aGlzLmNhbGN1bGF0ZVNjb3JlKHRyYW5zcG9ydCwgY29udGV4dClcbiAgICAgICAgfSkpXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBTb3J0IGJ5IHNjb3JlIChoaWdoZXN0IGZpcnN0KVxuICAgICAgc2NvcmVkVHJhbnNwb3J0cy5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSk7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiB0aGUgYmVzdCB0cmFuc3BvcnRcbiAgICAgIHJlc29sdmUoc2NvcmVkVHJhbnNwb3J0c1swXS50cmFuc3BvcnQpO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogTWFpbiBUcmFuc3BvcnQgTWFuYWdlciBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgVHJhbnNwb3J0TWFuYWdlciB7XG4gIHByaXZhdGUgdHJhbnNwb3J0czogTWFwPFRyYW5zcG9ydFR5cGUsIERldlBpcGVUcmFuc3BvcnQ+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGFjdGl2ZVRyYW5zcG9ydD86IERldlBpcGVUcmFuc3BvcnQ7XG4gIHByaXZhdGUgZmFsbGJhY2tDaGFpbjogVHJhbnNwb3J0VHlwZVtdO1xuICBwcml2YXRlIGhlYWx0aE1vbml0b3I6IFRyYW5zcG9ydEhlYWx0aE1vbml0b3I7XG4gIHByaXZhdGUgc2VsZWN0b3I6IFRyYW5zcG9ydFNlbGVjdG9yO1xuICBwcml2YXRlIGNvbmZpZzogVHJhbnNwb3J0TWFuYWdlckNvbmZpZztcbiAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogTWFwPHN0cmluZywgRnVuY3Rpb25bXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZmFpbG92ZXJJblByb2dyZXNzOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBUcmFuc3BvcnRNYW5hZ2VyQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5mYWxsYmFja0NoYWluID0gY29uZmlnLmZhbGxiYWNrQ2hhaW4gfHwgW1xuICAgICAgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsXG4gICAgICBUcmFuc3BvcnRUeXBlLkhUVFAsXG4gICAgICBUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU1cbiAgICBdO1xuICAgIFxuICAgIHRoaXMuaGVhbHRoTW9uaXRvciA9IG5ldyBUcmFuc3BvcnRIZWFsdGhNb25pdG9yKCk7XG4gICAgdGhpcy5zZWxlY3RvciA9IG5ldyBUcmFuc3BvcnRTZWxlY3Rvcihjb25maWcuc2VsZWN0aW9uQ3JpdGVyaWEpO1xuICAgIFxuICAgIHRoaXMuaW5pdGlhbGl6ZVRyYW5zcG9ydHMoKTtcbiAgICB0aGlzLnNldHVwSGVhbHRoTW9uaXRvcmluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplVHJhbnNwb3J0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgXG4gICAgLy8gQWx3YXlzIGluaXRpYWxpemUgSFRUUCB0cmFuc3BvcnQgKG1vc3QgY29tcGF0aWJsZSlcbiAgICBjb25zdCBodHRwVHJhbnNwb3J0ID0gbmV3IEhUVFBUcmFuc3BvcnQodGhpcy5jb25maWcudHJhbnNwb3J0Q29uZmlncy5odHRwKTtcbiAgICBhd2FpdCBodHRwVHJhbnNwb3J0LmluaXRpYWxpemUodGhpcy5jb25maWcudHJhbnNwb3J0Q29uZmlncy5odHRwKTtcbiAgICB0aGlzLnRyYW5zcG9ydHMuc2V0KFRyYW5zcG9ydFR5cGUuSFRUUCwgaHR0cFRyYW5zcG9ydCk7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGlmIHN1cHBvcnRlZCBhbmQgY29uZmlndXJlZFxuICAgIGlmIChlbnZpcm9ubWVudC5oYXNXZWJTb2NrZXQgJiYgdGhpcy5jb25maWcudHJhbnNwb3J0Q29uZmlncy53ZWJzb2NrZXQpIHtcbiAgICAgIGNvbnN0IHdzVHJhbnNwb3J0ID0gbmV3IFdlYlNvY2tldFRyYW5zcG9ydCh0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLndlYnNvY2tldCk7XG4gICAgICBhd2FpdCB3c1RyYW5zcG9ydC5pbml0aWFsaXplKHRoaXMuY29uZmlnLnRyYW5zcG9ydENvbmZpZ3Mud2Vic29ja2V0KTtcbiAgICAgIHRoaXMudHJhbnNwb3J0cy5zZXQoVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsIHdzVHJhbnNwb3J0KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSBGaWxlU3lzdGVtIHRyYW5zcG9ydCBpZiBzdXBwb3J0ZWQgYW5kIGNvbmZpZ3VyZWRcbiAgICBpZiAoZW52aXJvbm1lbnQuaGFzRmlsZVN5c3RlbSAmJiB0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLmZpbGVzeXN0ZW0pIHtcbiAgICAgIGNvbnN0IGZzVHJhbnNwb3J0ID0gbmV3IEZpbGVTeXN0ZW1UcmFuc3BvcnQodGhpcy5jb25maWcudHJhbnNwb3J0Q29uZmlncy5maWxlc3lzdGVtKTtcbiAgICAgIGF3YWl0IGZzVHJhbnNwb3J0LmluaXRpYWxpemUodGhpcy5jb25maWcudHJhbnNwb3J0Q29uZmlncy5maWxlc3lzdGVtKTtcbiAgICAgIHRoaXMudHJhbnNwb3J0cy5zZXQoVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNLCBmc1RyYW5zcG9ydCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNldHVwIGV2ZW50IGhhbmRsZXJzIGZvciBlYWNoIHRyYW5zcG9ydFxuICAgIGNvbnN0IHRyYW5zcG9ydHMgPSBBcnJheS5mcm9tKHRoaXMudHJhbnNwb3J0cy52YWx1ZXMoKSk7XG4gICAgZm9yIChjb25zdCB0cmFuc3BvcnQgb2YgdHJhbnNwb3J0cykge1xuICAgICAgdGhpcy5zZXR1cFRyYW5zcG9ydEV2ZW50SGFuZGxlcnModHJhbnNwb3J0KTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5kZWJ1ZyhgSW5pdGlhbGl6ZWQgJHt0aGlzLnRyYW5zcG9ydHMuc2l6ZX0gdHJhbnNwb3J0c2ApO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFRyYW5zcG9ydEV2ZW50SGFuZGxlcnModHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0KTogdm9pZCB7XG4gICAgdHJhbnNwb3J0Lm9uKFRyYW5zcG9ydEV2ZW50LkNPTk5FQ1RFRCwgKCkgPT4ge1xuICAgICAgdGhpcy5kZWJ1ZyhgVHJhbnNwb3J0ICR7dHJhbnNwb3J0LnR5cGV9IGNvbm5lY3RlZGApO1xuICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfY29ubmVjdGVkJywgeyB0cmFuc3BvcnQ6IHRyYW5zcG9ydC50eXBlIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHRyYW5zcG9ydC5vbihUcmFuc3BvcnRFdmVudC5ESVNDT05ORUNURUQsICgpID0+IHtcbiAgICAgIHRoaXMuZGVidWcoYFRyYW5zcG9ydCAke3RyYW5zcG9ydC50eXBlfSBkaXNjb25uZWN0ZWRgKTtcbiAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X2Rpc2Nvbm5lY3RlZCcsIHsgdHJhbnNwb3J0OiB0cmFuc3BvcnQudHlwZSB9KTtcbiAgICAgIFxuICAgICAgLy8gVHJpZ2dlciBmYWlsb3ZlciBpZiB0aGlzIHdhcyB0aGUgYWN0aXZlIHRyYW5zcG9ydFxuICAgICAgaWYgKHRoaXMuYWN0aXZlVHJhbnNwb3J0ID09PSB0cmFuc3BvcnQgJiYgdGhpcy5jb25maWcuYXV0b0ZhaWxvdmVyICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmhhbmRsZVRyYW5zcG9ydEZhaWx1cmUodHJhbnNwb3J0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICB0cmFuc3BvcnQub24oVHJhbnNwb3J0RXZlbnQuRVJST1IsIChlcnJvcikgPT4ge1xuICAgICAgdGhpcy5kZWJ1ZyhgVHJhbnNwb3J0ICR7dHJhbnNwb3J0LnR5cGV9IGVycm9yOmAsIGVycm9yKTtcbiAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X2Vycm9yJywgeyB0cmFuc3BvcnQ6IHRyYW5zcG9ydC50eXBlLCBlcnJvciB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0cmFuc3BvcnQub24oVHJhbnNwb3J0RXZlbnQuTUVTU0FHRSwgKG1lc3NhZ2UpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEhlYWx0aE1vbml0b3JpbmcoKTogdm9pZCB7XG4gICAgY29uc3QgdHJhbnNwb3J0cyA9IEFycmF5LmZyb20odGhpcy50cmFuc3BvcnRzLnZhbHVlcygpKTtcbiAgICBmb3IgKGNvbnN0IHRyYW5zcG9ydCBvZiB0cmFuc3BvcnRzKSB7XG4gICAgICB0aGlzLmhlYWx0aE1vbml0b3Iuc3RhcnRNb25pdG9yaW5nKFxuICAgICAgICB0cmFuc3BvcnQsIFxuICAgICAgICB0aGlzLmNvbmZpZy5oZWFsdGhDaGVja0ludGVydmFsIHx8IDMwMDAwXG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmhlYWx0aE1vbml0b3Iub24oJ2hlYWx0aC11cGRhdGVkJywgKGFzc2Vzc21lbnQ6IEhlYWx0aEFzc2Vzc21lbnQpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnaGVhbHRoX3VwZGF0ZWQnLCBhc3Nlc3NtZW50KTtcbiAgICAgIFxuICAgICAgLy8gQ29uc2lkZXIgdHJhbnNwb3J0IHN3aXRjaGluZyBpZiBjdXJyZW50IHRyYW5zcG9ydCBpcyBkZWdyYWRpbmdcbiAgICAgIGlmICh0aGlzLmFjdGl2ZVRyYW5zcG9ydD8udHlwZSA9PT0gYXNzZXNzbWVudC50cmFuc3BvcnQgJiYgXG4gICAgICAgICAgYXNzZXNzbWVudC5yZWNvbW1lbmRhdGlvbiA9PT0gJ2F2b2lkJyAmJlxuICAgICAgICAgICF0aGlzLmZhaWxvdmVySW5Qcm9ncmVzcykge1xuICAgICAgICB0aGlzLnNlbGVjdE9wdGltYWxUcmFuc3BvcnQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbGVjdE9wdGltYWxUcmFuc3BvcnQoY29udGV4dD86IFNlbGVjdGlvbkNvbnRleHQpOiBQcm9taXNlPERldlBpcGVUcmFuc3BvcnQ+IHtcbiAgICBjb25zdCBhdmFpbGFibGVUcmFuc3BvcnRzID0gQXJyYXkuZnJvbSh0aGlzLnRyYW5zcG9ydHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKHRyYW5zcG9ydCA9PiB0cmFuc3BvcnQuaXNBdmFpbGFibGUoKSk7XG4gICAgXG4gICAgaWYgKGF2YWlsYWJsZVRyYW5zcG9ydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGF2YWlsYWJsZSB0cmFuc3BvcnRzJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHNlbGVjdGVkVHJhbnNwb3J0ID0gYXdhaXQgdGhpcy5zZWxlY3Rvci5zZWxlY3RCZXN0KGF2YWlsYWJsZVRyYW5zcG9ydHMsIGNvbnRleHQpO1xuICAgIGlmICghc2VsZWN0ZWRUcmFuc3BvcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc3VpdGFibGUgdHJhbnNwb3J0IGZvdW5kJyk7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmFjdGl2ZVRyYW5zcG9ydCAhPT0gc2VsZWN0ZWRUcmFuc3BvcnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuc3dpdGNoVHJhbnNwb3J0KHNlbGVjdGVkVHJhbnNwb3J0LCAnb3B0aW1pemF0aW9uJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBzZWxlY3RlZFRyYW5zcG9ydDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc3dpdGNoVHJhbnNwb3J0KFxuICAgIG5ld1RyYW5zcG9ydDogRGV2UGlwZVRyYW5zcG9ydCwgXG4gICAgcmVhc29uOiAnb3B0aW1pemF0aW9uJyB8ICdmYWlsb3ZlcicgfCAnbWFudWFsJ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBvbGRUcmFuc3BvcnQgPSB0aGlzLmFjdGl2ZVRyYW5zcG9ydDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgdGhpcy5kZWJ1ZyhgU3dpdGNoaW5nIHRyYW5zcG9ydCBmcm9tICR7b2xkVHJhbnNwb3J0Py50eXBlIHx8ICdub25lJ30gdG8gJHtuZXdUcmFuc3BvcnQudHlwZX0gKCR7cmVhc29ufSlgKTtcbiAgICAgIFxuICAgICAgLy8gQ29ubmVjdCBuZXcgdHJhbnNwb3J0IGlmIG5vdCBhbHJlYWR5IGNvbm5lY3RlZFxuICAgICAgaWYgKCFuZXdUcmFuc3BvcnQuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICBhd2FpdCBuZXdUcmFuc3BvcnQuY29ubmVjdCgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTd2l0Y2ggYWN0aXZlIHRyYW5zcG9ydFxuICAgICAgdGhpcy5hY3RpdmVUcmFuc3BvcnQgPSBuZXdUcmFuc3BvcnQ7XG4gICAgICBcbiAgICAgIC8vIERpc2Nvbm5lY3Qgb2xkIHRyYW5zcG9ydCBpZiBkaWZmZXJlbnQgKGJ1dCBkb24ndCBhd2FpdCB0byBhdm9pZCBkZWxheXMpXG4gICAgICBpZiAob2xkVHJhbnNwb3J0ICYmIG9sZFRyYW5zcG9ydCAhPT0gbmV3VHJhbnNwb3J0KSB7XG4gICAgICAgIG9sZFRyYW5zcG9ydC5kaXNjb25uZWN0KCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMuZGVidWcoYEVycm9yIGRpc2Nvbm5lY3Rpbmcgb2xkIHRyYW5zcG9ydCAke29sZFRyYW5zcG9ydC50eXBlfTpgLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9zd2l0Y2hlZCcsIHtcbiAgICAgICAgZnJvbTogb2xkVHJhbnNwb3J0Py50eXBlLFxuICAgICAgICB0bzogbmV3VHJhbnNwb3J0LnR5cGUsXG4gICAgICAgIHJlYXNvblxuICAgICAgfSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gUm9sbGJhY2sgaWYgc3dpdGNoIGZhaWxlZFxuICAgICAgaWYgKG9sZFRyYW5zcG9ydCAmJiBvbGRUcmFuc3BvcnQuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRyYW5zcG9ydCA9IG9sZFRyYW5zcG9ydDtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVRyYW5zcG9ydEZhaWx1cmUoZmFpbGVkVHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuZmFpbG92ZXJJblByb2dyZXNzKSByZXR1cm47XG4gICAgdGhpcy5mYWlsb3ZlckluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlYnVnKGBIYW5kbGluZyBmYWlsdXJlIG9mIHRyYW5zcG9ydCAke2ZhaWxlZFRyYW5zcG9ydC50eXBlfWApO1xuICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZmFpbGVkJywge1xuICAgICAgICB0cmFuc3BvcnQ6IGZhaWxlZFRyYW5zcG9ydC50eXBlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBUcnkgZmFsbGJhY2sgY2hhaW5cbiAgICAgIGZvciAoY29uc3QgdHJhbnNwb3J0VHlwZSBvZiB0aGlzLmZhbGxiYWNrQ2hhaW4pIHtcbiAgICAgICAgaWYgKHRyYW5zcG9ydFR5cGUgPT09IGZhaWxlZFRyYW5zcG9ydC50eXBlKSBjb250aW51ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrVHJhbnNwb3J0ID0gdGhpcy50cmFuc3BvcnRzLmdldCh0cmFuc3BvcnRUeXBlKTtcbiAgICAgICAgaWYgKGZhbGxiYWNrVHJhbnNwb3J0ICYmIGZhbGxiYWNrVHJhbnNwb3J0LmlzQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zd2l0Y2hUcmFuc3BvcnQoZmFsbGJhY2tUcmFuc3BvcnQsICdmYWlsb3ZlcicpO1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IGZhaWxlZCBvdmVyIHRvICR7dHJhbnNwb3J0VHlwZX1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZWJ1ZyhgRmFpbG92ZXIgdG8gJHt0cmFuc3BvcnRUeXBlfSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBFcnJvcignQWxsIHRyYW5zcG9ydHMgZmFpbGVkJyk7XG4gICAgICBcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5mYWlsb3ZlckluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZW5kKG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlLCBjb250ZXh0PzogU2VsZWN0aW9uQ29udGV4dCk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPiB7XG4gICAgLy8gRW5zdXJlIHdlIGhhdmUgYW4gYWN0aXZlIHRyYW5zcG9ydFxuICAgIGlmICghdGhpcy5hY3RpdmVUcmFuc3BvcnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2VsZWN0T3B0aW1hbFRyYW5zcG9ydChjb250ZXh0KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLmFjdGl2ZVRyYW5zcG9ydCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhY3RpdmUgdHJhbnNwb3J0IGF2YWlsYWJsZScpO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuYWN0aXZlVHJhbnNwb3J0LnNlbmQobWVzc2FnZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEhhbmRsZSB0cmFuc3BvcnQgZmFpbHVyZSBhbmQgcmV0cnlcbiAgICAgIHRoaXMuZGVidWcoYFNlbmQgZmFpbGVkIG9uICR7dGhpcy5hY3RpdmVUcmFuc3BvcnQudHlwZX0sIGF0dGVtcHRpbmcgZmFpbG92ZXJgKTtcbiAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVHJhbnNwb3J0RmFpbHVyZSh0aGlzLmFjdGl2ZVRyYW5zcG9ydCk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmFjdGl2ZVRyYW5zcG9ydCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5hY3RpdmVUcmFuc3BvcnQuc2VuZChtZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5zZWxlY3RPcHRpbWFsVHJhbnNwb3J0KCk7XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGRpc2Nvbm5lY3RQcm9taXNlcyA9IEFycmF5LmZyb20odGhpcy50cmFuc3BvcnRzLnZhbHVlcygpKVxuICAgICAgLm1hcCh0cmFuc3BvcnQgPT4gdHJhbnNwb3J0LmRpc2Nvbm5lY3QoKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMuZGVidWcoYEVycm9yIGRpc2Nvbm5lY3RpbmcgdHJhbnNwb3J0ICR7dHJhbnNwb3J0LnR5cGV9OmAsIGVycm9yKTtcbiAgICAgIH0pKTtcbiAgICBcbiAgICBhd2FpdCBQcm9taXNlLmFsbChkaXNjb25uZWN0UHJvbWlzZXMpO1xuICAgIHRoaXMuYWN0aXZlVHJhbnNwb3J0ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0QWN0aXZlVHJhbnNwb3J0KCk6IERldlBpcGVUcmFuc3BvcnQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZVRyYW5zcG9ydDtcbiAgfVxuXG4gIGdldEF2YWlsYWJsZVRyYW5zcG9ydHMoKTogRGV2UGlwZVRyYW5zcG9ydFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnRyYW5zcG9ydHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKHRyYW5zcG9ydCA9PiB0cmFuc3BvcnQuaXNBdmFpbGFibGUoKSk7XG4gIH1cblxuICBnZXRUcmFuc3BvcnRIZWFsdGgoKTogTWFwPFRyYW5zcG9ydFR5cGUsIEhlYWx0aEFzc2Vzc21lbnQ+IHtcbiAgICBjb25zdCBhc3Nlc3NtZW50cyA9IG5ldyBNYXA8VHJhbnNwb3J0VHlwZSwgSGVhbHRoQXNzZXNzbWVudD4oKTtcbiAgICBcbiAgICBjb25zdCB0cmFuc3BvcnRzID0gQXJyYXkuZnJvbSh0aGlzLnRyYW5zcG9ydHMudmFsdWVzKCkpO1xuICAgIGZvciAoY29uc3QgdHJhbnNwb3J0IG9mIHRyYW5zcG9ydHMpIHtcbiAgICAgIGFzc2Vzc21lbnRzLnNldCh0cmFuc3BvcnQudHlwZSwgdGhpcy5oZWFsdGhNb25pdG9yLmFzc2Vzc1RyYW5zcG9ydEhlYWx0aCh0cmFuc3BvcnQpKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGFzc2Vzc21lbnRzO1xuICB9XG5cbiAgLy8gRXZlbnQgc3lzdGVtXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVycy5oYXMoZXZlbnQpKSB7XG4gICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLnNldChldmVudCwgW10pO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCkhLnB1c2gobGlzdGVuZXIpO1xuICB9XG5cbiAgb2ZmKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZGVidWcoYEVycm9yIGluIHRyYW5zcG9ydCBtYW5hZ2VyIGV2ZW50IGxpc3RlbmVyIGZvciAke2V2ZW50fTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGVidWcobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coYFtUcmFuc3BvcnRNYW5hZ2VyXSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIFRyYW5zcG9ydERhc2hib2FyZCAtIFJlYWwtdGltZSB0cmFuc3BvcnQgc3RhdHVzIG1vbml0b3JpbmcgYW5kIG1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRyYW5zcG9ydE1hbmFnZXIsIFRyYW5zcG9ydE1hbmFnZXJDb25maWcgfSBmcm9tICcuLi9kZXZwaXBlL1RyYW5zcG9ydE1hbmFnZXInO1xuaW1wb3J0IHsgVHJhbnNwb3J0VHlwZSwgVHJhbnNwb3J0RXZlbnQgfSBmcm9tICcuLi9kZXZwaXBlL3RyYW5zcG9ydHMvRGV2UGlwZVRyYW5zcG9ydCc7XG5pbXBvcnQgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBEYXNoYm9hcmRDb25maWcge1xuICB1cGRhdGVJbnRlcnZhbDogbnVtYmVyO1xuICBzaG93QWR2YW5jZWRNZXRyaWNzOiBib29sZWFuO1xuICBlbmFibGVSZWFsVGltZVVwZGF0ZXM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNwb3J0U3RhdHVzRGF0YSB7XG4gIHR5cGU6IFRyYW5zcG9ydFR5cGU7XG4gIHN0YXR1czogJ2hlYWx0aHknIHwgJ2RlZ3JhZGVkJyB8ICdmYWlsaW5nJyB8ICdkaXNjb25uZWN0ZWQnO1xuICBsYXN0UmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gIHN1Y2Nlc3NSYXRlOiBudW1iZXI7XG4gIGVycm9yQ291bnQ6IG51bWJlcjtcbiAgbGFzdEVycm9yPzogc3RyaW5nO1xuICBjYXBhYmlsaXRpZXM6IHN0cmluZ1tdO1xuICBjb25uZWN0aW9uU3RhdGU6ICdjb25uZWN0ZWQnIHwgJ2Nvbm5lY3RpbmcnIHwgJ2Rpc2Nvbm5lY3RlZCcgfCAnZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN5c3RlbUhlYWx0aCB7XG4gIG92ZXJhbGw6ICdleGNlbGxlbnQnIHwgJ2dvb2QnIHwgJ2ZhaXInIHwgJ3Bvb3InIHwgJ2NyaXRpY2FsJztcbiAgYWN0aXZlVHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlO1xuICBhdmFpbGFibGVUcmFuc3BvcnRzOiBUcmFuc3BvcnRUeXBlW107XG4gIGxhc3RIZWFsdGhDaGVjazogRGF0ZTtcbiAgdXB0aW1lOiBudW1iZXI7XG4gIHRvdGFsUmVxdWVzdHM6IG51bWJlcjtcbiAgdG90YWxFcnJvcnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3Mge1xuICBhdmVyYWdlUmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gIHA5NVJlc3BvbnNlVGltZTogbnVtYmVyO1xuICByZXF1ZXN0c1Blck1pbnV0ZTogbnVtYmVyO1xuICBlcnJvclJhdGU6IG51bWJlcjtcbiAgdHJhbnNwb3J0RGlzdHJpYnV0aW9uOiBSZWNvcmQ8VHJhbnNwb3J0VHlwZSwgbnVtYmVyPjtcbiAgdHJlbmRzOiB7XG4gICAgcmVzcG9uc2VUaW1lOiBudW1iZXJbXTtcbiAgICBlcnJvclJhdGU6IG51bWJlcltdO1xuICAgIHRocm91Z2hwdXQ6IG51bWJlcltdO1xuICAgIHRpbWVzdGFtcHM6IERhdGVbXTtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFRyYW5zcG9ydERhc2hib2FyZCBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHRyYW5zcG9ydE1hbmFnZXI/OiBUcmFuc3BvcnRNYW5hZ2VyO1xuICBwcml2YXRlIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBjb25maWc6IERhc2hib2FyZENvbmZpZztcbiAgXG4gIHByaXZhdGUgdXBkYXRlSW50ZXJ2YWw/OiBudW1iZXI7XG4gIHByaXZhdGUgc3RhdHVzQ2FyZHM6IE1hcDxUcmFuc3BvcnRUeXBlLCBIVE1MRWxlbWVudD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbWV0cmljc0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHN5c3RlbUhlYWx0aENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGNoYXJ0c0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBcbiAgcHJpdmF0ZSBjdXJyZW50SGVhbHRoPzogU3lzdGVtSGVhbHRoO1xuICBwcml2YXRlIGN1cnJlbnRNZXRyaWNzPzogUGVyZm9ybWFuY2VNZXRyaWNzO1xuICBwcml2YXRlIGlzUmVhbFRpbWVFbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIFxuICAgIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbiwgXG4gICAgY29uZmlnOiBEYXNoYm9hcmRDb25maWcgPSB7XG4gICAgICB1cGRhdGVJbnRlcnZhbDogMjAwMCxcbiAgICAgIHNob3dBZHZhbmNlZE1ldHJpY3M6IHRydWUsXG4gICAgICBlbmFibGVSZWFsVGltZVVwZGF0ZXM6IHRydWVcbiAgICB9XG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIC8vIFRyYW5zcG9ydCBtYW5hZ2VyIHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2hlbiBhdmFpbGFibGVcbiAgICB0aGlzLmlzUmVhbFRpbWVFbmFibGVkID0gY29uZmlnLmVuYWJsZVJlYWxUaW1lVXBkYXRlcztcbiAgfVxuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICB0aGlzLmluaXRpYWxpemVEYXNoYm9hcmQoKTtcbiAgICBcbiAgICBpZiAodGhpcy5pc1JlYWxUaW1lRW5hYmxlZCkge1xuICAgICAgdGhpcy5zdGFydFJlYWxUaW1lVXBkYXRlcygpO1xuICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWwgbG9hZFxuICAgIGF3YWl0IHRoaXMudXBkYXRlRGFzaGJvYXJkKCk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLnN0b3BSZWFsVGltZVVwZGF0ZXMoKTtcbiAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemVEYXNoYm9hcmQoKSB7XG4gICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuICAgIHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ3RyYW5zcG9ydC1kYXNoYm9hcmQnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgaGVhZGVyXG4gICAgdGhpcy5jcmVhdGVIZWFkZXIoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgc3lzdGVtIGhlYWx0aCBvdmVydmlld1xuICAgIHRoaXMuY3JlYXRlU3lzdGVtSGVhbHRoU2VjdGlvbigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0cmFuc3BvcnQgc3RhdHVzIGNhcmRzXG4gICAgdGhpcy5jcmVhdGVUcmFuc3BvcnRTdGF0dXNTZWN0aW9uKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHBlcmZvcm1hbmNlIG1ldHJpY3NcbiAgICB0aGlzLmNyZWF0ZVBlcmZvcm1hbmNlTWV0cmljc1NlY3Rpb24oKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY2hhcnRzIHNlY3Rpb25cbiAgICB0aGlzLmNyZWF0ZUNoYXJ0c1NlY3Rpb24oKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY29udHJvbHNcbiAgICB0aGlzLmNyZWF0ZUNvbnRyb2xzU2VjdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVIZWFkZXIoKSB7XG4gICAgY29uc3QgaGVhZGVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2Rhc2hib2FyZC1oZWFkZXInKTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVHJhbnNwb3J0IERhc2hib2FyZCcgfSk7XG4gICAgXG4gICAgY29uc3QgbGFzdFVwZGF0ZSA9IGhlYWRlci5jcmVhdGVEaXYoJ2xhc3QtdXBkYXRlJyk7XG4gICAgbGFzdFVwZGF0ZS5jcmVhdGVTcGFuKHsgdGV4dDogJ0xhc3QgdXBkYXRlZDogJywgY2xzOiAnbGFiZWwnIH0pO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGxhc3RVcGRhdGUuY3JlYXRlU3Bhbih7IGNsczogJ3RpbWVzdGFtcCcgfSk7XG4gICAgdGltZXN0YW1wLnRleHRDb250ZW50ID0gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTtcbiAgICBcbiAgICAvLyBSZWFsLXRpbWUgaW5kaWNhdG9yXG4gICAgY29uc3QgaW5kaWNhdG9yID0gaGVhZGVyLmNyZWF0ZURpdigncmVhbHRpbWUtaW5kaWNhdG9yJyk7XG4gICAgaWYgKHRoaXMuaXNSZWFsVGltZUVuYWJsZWQpIHtcbiAgICAgIGluZGljYXRvci5jcmVhdGVTcGFuKHsgdGV4dDogJ/Cfn6IgUmVhbC10aW1lJywgY2xzOiAncmVhbHRpbWUtYWN0aXZlJyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kaWNhdG9yLmNyZWF0ZVNwYW4oeyB0ZXh0OiAn4pqqIE1hbnVhbCByZWZyZXNoJywgY2xzOiAncmVhbHRpbWUtaW5hY3RpdmUnIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU3lzdGVtSGVhbHRoU2VjdGlvbigpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3N5c3RlbS1oZWFsdGgtc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnU3lzdGVtIEhlYWx0aCcgfSk7XG4gICAgXG4gICAgdGhpcy5zeXN0ZW1IZWFsdGhDb250YWluZXIgPSBzZWN0aW9uLmNyZWF0ZURpdignc3lzdGVtLWhlYWx0aC1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBQbGFjZWhvbGRlciBjb250ZW50XG4gICAgdGhpcy5yZW5kZXJTeXN0ZW1IZWFsdGhQbGFjZWhvbGRlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRTdGF0dXNTZWN0aW9uKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigndHJhbnNwb3J0LXN0YXR1cy1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUcmFuc3BvcnQgU3RhdHVzJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCd0cmFuc3BvcnQtY2FyZHMtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGNhcmRzIGZvciBhbGwgc3VwcG9ydGVkIHRyYW5zcG9ydCB0eXBlc1xuICAgIGNvbnN0IHN1cHBvcnRlZFRyYW5zcG9ydHMgPSBbVHJhbnNwb3J0VHlwZS5IVFRQLCBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCwgVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNXTtcbiAgICBcbiAgICBzdXBwb3J0ZWRUcmFuc3BvcnRzLmZvckVhY2godHJhbnNwb3J0VHlwZSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVUcmFuc3BvcnRDYXJkKGNhcmRzQ29udGFpbmVyLCB0cmFuc3BvcnRUeXBlKTtcbiAgICAgIHRoaXMuc3RhdHVzQ2FyZHMuc2V0KHRyYW5zcG9ydFR5cGUsIGNhcmQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHRyYW5zcG9ydFR5cGU6IFRyYW5zcG9ydFR5cGUpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3RyYW5zcG9ydC1zdGF0dXMtY2FyZCcpO1xuICAgIGNhcmQuYWRkQ2xhc3MoYHRyYW5zcG9ydC0ke3RyYW5zcG9ydFR5cGV9YCk7XG4gICAgY2FyZC5hZGRDbGFzcygnc3RhdHVzLXVua25vd24nKTtcbiAgICBcbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXIgPSBjYXJkLmNyZWF0ZURpdignY2FyZC1oZWFkZXInKTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiB0cmFuc3BvcnRUeXBlLnRvVXBwZXJDYXNlKCkgfSk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHVzQmFkZ2UgPSBoZWFkZXIuY3JlYXRlRGl2KCdzdGF0dXMtYmFkZ2UnKTtcbiAgICBzdGF0dXNCYWRnZS50ZXh0Q29udGVudCA9ICdVbmtub3duJztcbiAgICBcbiAgICAvLyBNZXRyaWNzXG4gICAgY29uc3QgbWV0cmljcyA9IGNhcmQuY3JlYXRlRGl2KCdjYXJkLW1ldHJpY3MnKTtcbiAgICBcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSBtZXRyaWNzLmNyZWF0ZURpdignbWV0cmljJyk7XG4gICAgcmVzcG9uc2VUaW1lLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVzcG9uc2UgVGltZScsIGNsczogJ21ldHJpYy1sYWJlbCcgfSk7XG4gICAgcmVzcG9uc2VUaW1lLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnLS0nLCBjbHM6ICdtZXRyaWMtdmFsdWUgcmVzcG9uc2UtdGltZScgfSk7XG4gICAgXG4gICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSBtZXRyaWNzLmNyZWF0ZURpdignbWV0cmljJyk7XG4gICAgc3VjY2Vzc1JhdGUuY3JlYXRlU3Bhbih7IHRleHQ6ICdTdWNjZXNzIFJhdGUnLCBjbHM6ICdtZXRyaWMtbGFiZWwnIH0pO1xuICAgIHN1Y2Nlc3NSYXRlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnLS0nLCBjbHM6ICdtZXRyaWMtdmFsdWUgc3VjY2Vzcy1yYXRlJyB9KTtcbiAgICBcbiAgICBjb25zdCBlcnJvckNvdW50ID0gbWV0cmljcy5jcmVhdGVEaXYoJ21ldHJpYycpO1xuICAgIGVycm9yQ291bnQuY3JlYXRlU3Bhbih7IHRleHQ6ICdFcnJvcnMnLCBjbHM6ICdtZXRyaWMtbGFiZWwnIH0pO1xuICAgIGVycm9yQ291bnQuY3JlYXRlU3Bhbih7IHRleHQ6ICctLScsIGNsczogJ21ldHJpYy12YWx1ZSBlcnJvci1jb3VudCcgfSk7XG4gICAgXG4gICAgLy8gQ29ubmVjdGlvbiBzdGF0ZVxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBjYXJkLmNyZWF0ZURpdignY29ubmVjdGlvbi1zdGF0ZScpO1xuICAgIGNvbm5lY3Rpb24uY3JlYXRlU3Bhbih7IHRleHQ6ICdEaXNjb25uZWN0ZWQnLCBjbHM6ICdjb25uZWN0aW9uLXN0YXR1cycgfSk7XG4gICAgXG4gICAgLy8gQWN0aW9uc1xuICAgIGNvbnN0IGFjdGlvbnMgPSBjYXJkLmNyZWF0ZURpdignY2FyZC1hY3Rpb25zJyk7XG4gICAgXG4gICAgY29uc3QgdGVzdEJ1dHRvbiA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1Rlc3QnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgIHRlc3RCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudGVzdFRyYW5zcG9ydCh0cmFuc3BvcnRUeXBlKTtcbiAgICBcbiAgICBjb25zdCBzd2l0Y2hCdXR0b24gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTd2l0Y2ggVG8nLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICBzd2l0Y2hCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVG9UcmFuc3BvcnQodHJhbnNwb3J0VHlwZSk7XG4gICAgXG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVBlcmZvcm1hbmNlTWV0cmljc1NlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwZXJmb3JtYW5jZS1tZXRyaWNzLXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BlcmZvcm1hbmNlIE1ldHJpY3MnIH0pO1xuICAgIFxuICAgIHRoaXMubWV0cmljc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdtZXRyaWNzLWNvbnRhaW5lcicpO1xuICAgIFxuICAgIC8vIFBsYWNlaG9sZGVyIGNvbnRlbnRcbiAgICB0aGlzLnJlbmRlclBlcmZvcm1hbmNlTWV0cmljc1BsYWNlaG9sZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNoYXJ0c1NlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjaGFydHMtc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUGVyZm9ybWFuY2UgVHJlbmRzJyB9KTtcbiAgICBcbiAgICB0aGlzLmNoYXJ0c0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdjaGFydHMtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gRm9yIG5vdywgY3JlYXRlIHBsYWNlaG9sZGVyIGNoYXJ0c1xuICAgIHRoaXMucmVuZGVyQ2hhcnRzUGxhY2Vob2xkZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ29udHJvbHNTZWN0aW9uKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdignY29udHJvbHMtc2VjdGlvbicpO1xuICAgIFxuICAgIGNvbnN0IGNvbnRyb2xzID0gc2VjdGlvbi5jcmVhdGVEaXYoJ2Rhc2hib2FyZC1jb250cm9scycpO1xuICAgIFxuICAgIC8vIFJlZnJlc2ggYnV0dG9uXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGNvbnRyb2xzLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICfwn5SEIFJlZnJlc2gnLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1hbnVhbFJlZnJlc2goKTtcbiAgICBcbiAgICAvLyBFeHBvcnQgYnV0dG9uXG4gICAgY29uc3QgZXhwb3J0QnV0dG9uID0gY29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ/Cfk4ogRXhwb3J0IERhdGEnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgIGV4cG9ydEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5leHBvcnREYXRhKCk7XG4gICAgXG4gICAgLy8gU2V0dGluZ3MgYnV0dG9uXG4gICAgY29uc3Qgc2V0dGluZ3NCdXR0b24gPSBjb250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAn4pqZ77iPIFNldHRpbmdzJywgY2xzOiAnbW9kLW11dGVkJyB9KTtcbiAgICBzZXR0aW5nc0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5vcGVuRGFzaGJvYXJkU2V0dGluZ3MoKTtcbiAgICBcbiAgICAvLyBSZWFsLXRpbWUgdG9nZ2xlXG4gICAgY29uc3QgcmVhbHRpbWVUb2dnbGUgPSBjb250cm9scy5jcmVhdGVEaXYoJ3JlYWx0aW1lLXRvZ2dsZScpO1xuICAgIHJlYWx0aW1lVG9nZ2xlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVhbC10aW1lIHVwZGF0ZXM6ICcgfSk7XG4gICAgXG4gICAgY29uc3QgdG9nZ2xlID0gcmVhbHRpbWVUb2dnbGUuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIHRvZ2dsZS5jaGVja2VkID0gdGhpcy5pc1JlYWxUaW1lRW5hYmxlZDtcbiAgICB0b2dnbGUub25jaGFuZ2UgPSAoKSA9PiB0aGlzLnRvZ2dsZVJlYWxUaW1lVXBkYXRlcyh0b2dnbGUuY2hlY2tlZCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZURhc2hib2FyZCgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVXBkYXRlIHN5c3RlbSBoZWFsdGhcbiAgICAgIHRoaXMuY3VycmVudEhlYWx0aCA9IGF3YWl0IHRoaXMuZ2V0U3lzdGVtSGVhbHRoKCk7XG4gICAgICB0aGlzLnJlbmRlclN5c3RlbUhlYWx0aCh0aGlzLmN1cnJlbnRIZWFsdGgpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdHJhbnNwb3J0IHN0YXR1c2VzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRyYW5zcG9ydFN0YXR1c2VzKCk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgICB0aGlzLmN1cnJlbnRNZXRyaWNzID0gYXdhaXQgdGhpcy5nZXRQZXJmb3JtYW5jZU1ldHJpY3MoKTtcbiAgICAgIHRoaXMucmVuZGVyUGVyZm9ybWFuY2VNZXRyaWNzKHRoaXMuY3VycmVudE1ldHJpY3MpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgdGltZXN0YW1wXG4gICAgICB0aGlzLnVwZGF0ZVRpbWVzdGFtcCgpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgZGFzaGJvYXJkOicsIGVycm9yKTtcbiAgICAgIHRoaXMucmVuZGVyRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgZGFzaGJvYXJkIGRhdGEnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFN5c3RlbUhlYWx0aCgpOiBQcm9taXNlPFN5c3RlbUhlYWx0aD4ge1xuICAgIC8vIEdldCBoZWFsdGggZnJvbSB0cmFuc3BvcnQgbWFuYWdlclxuICAgIGNvbnN0IHRyYW5zcG9ydE1hbmFnZXIgPSB0aGlzLnRyYW5zcG9ydE1hbmFnZXI7XG4gICAgXG4gICAgLy8gU2ltdWxhdGUgZ2V0dGluZyBjb21wcmVoZW5zaXZlIGhlYWx0aCBkYXRhXG4gICAgY29uc3QgaGVhbHRoOiBTeXN0ZW1IZWFsdGggPSB7XG4gICAgICBvdmVyYWxsOiAnZ29vZCcsXG4gICAgICBhY3RpdmVUcmFuc3BvcnQ6ICdodHRwJyBhcyBUcmFuc3BvcnRUeXBlLFxuICAgICAgYXZhaWxhYmxlVHJhbnNwb3J0czogWydodHRwJywgJ3dlYnNvY2tldCddIGFzIFRyYW5zcG9ydFR5cGVbXSxcbiAgICAgIGxhc3RIZWFsdGhDaGVjazogbmV3IERhdGUoKSxcbiAgICAgIHVwdGltZTogRGF0ZS5ub3coKSAtICh0aGlzLnBsdWdpbi5hcHAgYXMgYW55KS52YXVsdC5hZGFwdGVyLnN0YXJ0ZWQgfHwgMCxcbiAgICAgIHRvdGFsUmVxdWVzdHM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSxcbiAgICAgIHRvdGFsRXJyb3JzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXG4gICAgfTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgb3ZlcmFsbCBoZWFsdGggYmFzZWQgb24gZXJyb3IgcmF0ZVxuICAgIGNvbnN0IGVycm9yUmF0ZSA9IGhlYWx0aC50b3RhbEVycm9ycyAvIGhlYWx0aC50b3RhbFJlcXVlc3RzO1xuICAgIGlmIChlcnJvclJhdGUgPCAwLjAxKSB7XG4gICAgICBoZWFsdGgub3ZlcmFsbCA9ICdleGNlbGxlbnQnO1xuICAgIH0gZWxzZSBpZiAoZXJyb3JSYXRlIDwgMC4wNSkge1xuICAgICAgaGVhbHRoLm92ZXJhbGwgPSAnZ29vZCc7XG4gICAgfSBlbHNlIGlmIChlcnJvclJhdGUgPCAwLjEpIHtcbiAgICAgIGhlYWx0aC5vdmVyYWxsID0gJ2ZhaXInO1xuICAgIH0gZWxzZSBpZiAoZXJyb3JSYXRlIDwgMC4yKSB7XG4gICAgICBoZWFsdGgub3ZlcmFsbCA9ICdwb29yJztcbiAgICB9IGVsc2Uge1xuICAgICAgaGVhbHRoLm92ZXJhbGwgPSAnY3JpdGljYWwnO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaGVhbHRoO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRQZXJmb3JtYW5jZU1ldHJpY3MoKTogUHJvbWlzZTxQZXJmb3JtYW5jZU1ldHJpY3M+IHtcbiAgICAvLyBHZXQgbWV0cmljcyBmcm9tIHRyYW5zcG9ydCBtYW5hZ2VyXG4gICAgY29uc3QgbWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzID0ge1xuICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMTUwICsgTWF0aC5yYW5kb20oKSAqIDEwMCxcbiAgICAgIHA5NVJlc3BvbnNlVGltZTogMzAwICsgTWF0aC5yYW5kb20oKSAqIDIwMCxcbiAgICAgIHJlcXVlc3RzUGVyTWludXRlOiAxMDAgKyBNYXRoLnJhbmRvbSgpICogNTAsXG4gICAgICBlcnJvclJhdGU6IE1hdGgucmFuZG9tKCkgKiAwLjA1LFxuICAgICAgdHJhbnNwb3J0RGlzdHJpYnV0aW9uOiB7XG4gICAgICAgICdodHRwJzogMC43LFxuICAgICAgICAnd2Vic29ja2V0JzogMC4yNSxcbiAgICAgICAgJ2ZpbGVzeXN0ZW0nOiAwLjA1XG4gICAgICB9LFxuICAgICAgdHJlbmRzOiB7XG4gICAgICAgIHJlc3BvbnNlVGltZTogdGhpcy5nZW5lcmF0ZVRyZW5kRGF0YSgxNTAsIDIwKSxcbiAgICAgICAgZXJyb3JSYXRlOiB0aGlzLmdlbmVyYXRlVHJlbmREYXRhKDAuMDIsIDAuMDEpLFxuICAgICAgICB0aHJvdWdocHV0OiB0aGlzLmdlbmVyYXRlVHJlbmREYXRhKDEwMCwgMjApLFxuICAgICAgICB0aW1lc3RhbXBzOiB0aGlzLmdlbmVyYXRlVGltZXN0YW1wcygyMClcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHJldHVybiBtZXRyaWNzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVRyZW5kRGF0YShiYXNlbGluZTogbnVtYmVyLCB2YXJpYW5jZTogbnVtYmVyLCBwb2ludHM6IG51bWJlciA9IDIwKTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGRhdGE6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHM7IGkrKykge1xuICAgICAgZGF0YS5wdXNoKGJhc2VsaW5lICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogdmFyaWFuY2UgKiAyKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlVGltZXN0YW1wcyhwb2ludHM6IG51bWJlcik6IERhdGVbXSB7XG4gICAgY29uc3QgdGltZXN0YW1wczogRGF0ZVtdID0gW107XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBmb3IgKGxldCBpID0gcG9pbnRzIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRpbWVzdGFtcHMucHVzaChuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gaSAqIDYwMDAwKSk7IC8vIDEgbWludXRlIGludGVydmFsc1xuICAgIH1cbiAgICByZXR1cm4gdGltZXN0YW1wcztcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVHJhbnNwb3J0U3RhdHVzZXMoKSB7XG4gICAgY29uc3Qgc3VwcG9ydGVkVHJhbnNwb3J0cyA9IFtUcmFuc3BvcnRUeXBlLkhUVFAsIFRyYW5zcG9ydFR5cGUuV0VCU09DS0VULCBUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU1dO1xuICAgIFxuICAgIGZvciAoY29uc3QgdHJhbnNwb3J0VHlwZSBvZiBzdXBwb3J0ZWRUcmFuc3BvcnRzKSB7XG4gICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLmdldFRyYW5zcG9ydFN0YXR1cyh0cmFuc3BvcnRUeXBlKTtcbiAgICAgIHRoaXMudXBkYXRlVHJhbnNwb3J0Q2FyZCh0cmFuc3BvcnRUeXBlLCBzdGF0dXMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0VHJhbnNwb3J0U3RhdHVzKHRyYW5zcG9ydFR5cGU6IFRyYW5zcG9ydFR5cGUpOiBQcm9taXNlPFRyYW5zcG9ydFN0YXR1c0RhdGE+IHtcbiAgICAvLyBTaW11bGF0ZSBnZXR0aW5nIHRyYW5zcG9ydCBzdGF0dXNcbiAgICBjb25zdCBpc0FjdGl2ZSA9IE1hdGgucmFuZG9tKCkgPiAwLjI7IC8vIDgwJSBjaGFuY2Ugb2YgYmVpbmcgYWN0aXZlXG4gICAgY29uc3QgcmVzcG9uc2VUaW1lID0gMTAwICsgTWF0aC5yYW5kb20oKSAqIDIwMDtcbiAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IDAuOSArIE1hdGgucmFuZG9tKCkgKiAwLjE7XG4gICAgXG4gICAgY29uc3Qgc3RhdHVzOiBUcmFuc3BvcnRTdGF0dXNEYXRhID0ge1xuICAgICAgdHlwZTogdHJhbnNwb3J0VHlwZSxcbiAgICAgIHN0YXR1czogaXNBY3RpdmUgPyAoc3VjY2Vzc1JhdGUgPiAwLjk1ID8gJ2hlYWx0aHknIDogJ2RlZ3JhZGVkJykgOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgIGxhc3RSZXNwb25zZVRpbWU6IHJlc3BvbnNlVGltZSxcbiAgICAgIHN1Y2Nlc3NSYXRlOiBzdWNjZXNzUmF0ZSxcbiAgICAgIGVycm9yQ291bnQ6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSxcbiAgICAgIGNhcGFiaWxpdGllczogdGhpcy5nZXRUcmFuc3BvcnRDYXBhYmlsaXRpZXModHJhbnNwb3J0VHlwZSksXG4gICAgICBjb25uZWN0aW9uU3RhdGU6IGlzQWN0aXZlID8gJ2Nvbm5lY3RlZCcgOiAnZGlzY29ubmVjdGVkJ1xuICAgIH07XG4gICAgXG4gICAgaWYgKCFpc0FjdGl2ZSkge1xuICAgICAgc3RhdHVzLmxhc3RFcnJvciA9ICdDb25uZWN0aW9uIHRpbWVvdXQnO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc3RhdHVzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUcmFuc3BvcnRDYXBhYmlsaXRpZXModHJhbnNwb3J0VHlwZTogVHJhbnNwb3J0VHlwZSk6IHN0cmluZ1tdIHtcbiAgICBzd2l0Y2ggKHRyYW5zcG9ydFR5cGUpIHtcbiAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5IVFRQOlxuICAgICAgICByZXR1cm4gWydSRVNUZnVsIEFQSScsICdDb25uZWN0aW9uIFBvb2xpbmcnLCAnUmV0cnkgTG9naWMnXTtcbiAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQ6XG4gICAgICAgIHJldHVybiBbJ1JlYWwtdGltZScsICdCaWRpcmVjdGlvbmFsJywgJ0F1dG8tcmVjb25uZWN0J107XG4gICAgICBjYXNlIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTTpcbiAgICAgICAgcmV0dXJuIFsnTG9jYWwgU3RvcmFnZScsICdGaWxlIExvY2tpbmcnLCAnT2ZmbGluZSBTdXBwb3J0J107XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUcmFuc3BvcnRDYXJkKHRyYW5zcG9ydFR5cGU6IFRyYW5zcG9ydFR5cGUsIHN0YXR1czogVHJhbnNwb3J0U3RhdHVzRGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSB0aGlzLnN0YXR1c0NhcmRzLmdldCh0cmFuc3BvcnRUeXBlKTtcbiAgICBpZiAoIWNhcmQpIHJldHVybjtcbiAgICBcbiAgICAvLyBVcGRhdGUgc3RhdHVzIGNsYXNzXG4gICAgY2FyZC5jbGFzc05hbWUgPSBgdHJhbnNwb3J0LXN0YXR1cy1jYXJkIHRyYW5zcG9ydC0ke3RyYW5zcG9ydFR5cGV9IHN0YXR1cy0ke3N0YXR1cy5zdGF0dXN9YDtcbiAgICBcbiAgICAvLyBVcGRhdGUgc3RhdHVzIGJhZGdlXG4gICAgY29uc3Qgc3RhdHVzQmFkZ2UgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5zdGF0dXMtYmFkZ2UnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBzdGF0dXNCYWRnZS50ZXh0Q29udGVudCA9IHN0YXR1cy5zdGF0dXMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdGF0dXMuc3RhdHVzLnNsaWNlKDEpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBtZXRyaWNzXG4gICAgY29uc3QgcmVzcG9uc2VUaW1lRWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXNwb25zZS10aW1lJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgcmVzcG9uc2VUaW1lRWwudGV4dENvbnRlbnQgPSBgJHtzdGF0dXMubGFzdFJlc3BvbnNlVGltZS50b0ZpeGVkKDApfW1zYDtcbiAgICBcbiAgICBjb25zdCBzdWNjZXNzUmF0ZUVsID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuc3VjY2Vzcy1yYXRlJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgc3VjY2Vzc1JhdGVFbC50ZXh0Q29udGVudCA9IGAkeyhzdGF0dXMuc3VjY2Vzc1JhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWA7XG4gICAgXG4gICAgY29uc3QgZXJyb3JDb3VudEVsID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItY291bnQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBlcnJvckNvdW50RWwudGV4dENvbnRlbnQgPSBzdGF0dXMuZXJyb3JDb3VudC50b1N0cmluZygpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjb25uZWN0aW9uIHN0YXRlXG4gICAgY29uc3QgY29ubmVjdGlvbkVsID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY29ubmVjdGlvbi1zdGF0dXMnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25uZWN0aW9uRWwudGV4dENvbnRlbnQgPSBzdGF0dXMuY29ubmVjdGlvblN0YXRlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RhdHVzLmNvbm5lY3Rpb25TdGF0ZS5zbGljZSgxKTtcbiAgICBjb25uZWN0aW9uRWwuY2xhc3NOYW1lID0gYGNvbm5lY3Rpb24tc3RhdHVzIHN0YXRlLSR7c3RhdHVzLmNvbm5lY3Rpb25TdGF0ZX1gO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBhY3Rpb24gYnV0dG9uc1xuICAgIGNvbnN0IHN3aXRjaEJ1dHRvbiA9IGNhcmQucXVlcnlTZWxlY3RvcignLm1vZC1jdGEnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBzd2l0Y2hCdXR0b24uZGlzYWJsZWQgPSBzdGF0dXMuc3RhdHVzID09PSAnZmFpbGluZycgfHwgc3RhdHVzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCc7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN5c3RlbUhlYWx0aChoZWFsdGg6IFN5c3RlbUhlYWx0aCkge1xuICAgIHRoaXMuc3lzdGVtSGVhbHRoQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgY29uc3QgaGVhbHRoR3JpZCA9IHRoaXMuc3lzdGVtSGVhbHRoQ29udGFpbmVyLmNyZWF0ZURpdignaGVhbHRoLWdyaWQnKTtcbiAgICBcbiAgICAvLyBPdmVyYWxsIGhlYWx0aFxuICAgIGNvbnN0IG92ZXJhbGxIZWFsdGggPSBoZWFsdGhHcmlkLmNyZWF0ZURpdignaGVhbHRoLWl0ZW0gb3ZlcmFsbC1oZWFsdGgnKTtcbiAgICBvdmVyYWxsSGVhbHRoLmFkZENsYXNzKGBoZWFsdGgtJHtoZWFsdGgub3ZlcmFsbH1gKTtcbiAgICBvdmVyYWxsSGVhbHRoLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ092ZXJhbGwgSGVhbHRoJyB9KTtcbiAgICBvdmVyYWxsSGVhbHRoLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIHRleHQ6IGhlYWx0aC5vdmVyYWxsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaGVhbHRoLm92ZXJhbGwuc2xpY2UoMSksXG4gICAgICBjbHM6ICdoZWFsdGgtdmFsdWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQWN0aXZlIHRyYW5zcG9ydFxuICAgIGNvbnN0IGFjdGl2ZVRyYW5zcG9ydCA9IGhlYWx0aEdyaWQuY3JlYXRlRGl2KCdoZWFsdGgtaXRlbScpO1xuICAgIGFjdGl2ZVRyYW5zcG9ydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBY3RpdmUgVHJhbnNwb3J0JyB9KTtcbiAgICBhY3RpdmVUcmFuc3BvcnQuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogaGVhbHRoLmFjdGl2ZVRyYW5zcG9ydC50b1VwcGVyQ2FzZSgpLFxuICAgICAgY2xzOiAnaGVhbHRoLXZhbHVlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFVwdGltZVxuICAgIGNvbnN0IHVwdGltZSA9IGhlYWx0aEdyaWQuY3JlYXRlRGl2KCdoZWFsdGgtaXRlbScpO1xuICAgIHVwdGltZS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdVcHRpbWUnIH0pO1xuICAgIHVwdGltZS5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICB0ZXh0OiB0aGlzLmZvcm1hdFVwdGltZShoZWFsdGgudXB0aW1lKSxcbiAgICAgIGNsczogJ2hlYWx0aC12YWx1ZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBUb3RhbCByZXF1ZXN0c1xuICAgIGNvbnN0IHJlcXVlc3RzID0gaGVhbHRoR3JpZC5jcmVhdGVEaXYoJ2hlYWx0aC1pdGVtJyk7XG4gICAgcmVxdWVzdHMuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnVG90YWwgUmVxdWVzdHMnIH0pO1xuICAgIHJlcXVlc3RzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIHRleHQ6IGhlYWx0aC50b3RhbFJlcXVlc3RzLnRvTG9jYWxlU3RyaW5nKCksXG4gICAgICBjbHM6ICdoZWFsdGgtdmFsdWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gRXJyb3IgcmF0ZVxuICAgIGNvbnN0IGVycm9yUmF0ZSA9IGhlYWx0aEdyaWQuY3JlYXRlRGl2KCdoZWFsdGgtaXRlbScpO1xuICAgIGVycm9yUmF0ZS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdFcnJvciBSYXRlJyB9KTtcbiAgICBjb25zdCByYXRlID0gKGhlYWx0aC50b3RhbEVycm9ycyAvIGhlYWx0aC50b3RhbFJlcXVlc3RzICogMTAwKTtcbiAgICBlcnJvclJhdGUuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogYCR7cmF0ZS50b0ZpeGVkKDIpfSVgLFxuICAgICAgY2xzOiAnaGVhbHRoLXZhbHVlJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQZXJmb3JtYW5jZU1ldHJpY3MobWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNzKSB7XG4gICAgdGhpcy5tZXRyaWNzQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgY29uc3QgbWV0cmljc0dyaWQgPSB0aGlzLm1ldHJpY3NDb250YWluZXIuY3JlYXRlRGl2KCdtZXRyaWNzLWdyaWQnKTtcbiAgICBcbiAgICAvLyBBdmVyYWdlIHJlc3BvbnNlIHRpbWVcbiAgICBjb25zdCBhdmdSZXNwb25zZSA9IG1ldHJpY3NHcmlkLmNyZWF0ZURpdignbWV0cmljLWl0ZW0nKTtcbiAgICBhdmdSZXNwb25zZS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBdmcgUmVzcG9uc2UgVGltZScgfSk7XG4gICAgYXZnUmVzcG9uc2UuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogYCR7bWV0cmljcy5hdmVyYWdlUmVzcG9uc2VUaW1lLnRvRml4ZWQoMCl9bXNgLFxuICAgICAgY2xzOiAnbWV0cmljLXZhbHVlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFA5NSByZXNwb25zZSB0aW1lXG4gICAgY29uc3QgcDk1UmVzcG9uc2UgPSBtZXRyaWNzR3JpZC5jcmVhdGVEaXYoJ21ldHJpYy1pdGVtJyk7XG4gICAgcDk1UmVzcG9uc2UuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUDk1IFJlc3BvbnNlIFRpbWUnIH0pO1xuICAgIHA5NVJlc3BvbnNlLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIHRleHQ6IGAke21ldHJpY3MucDk1UmVzcG9uc2VUaW1lLnRvRml4ZWQoMCl9bXNgLFxuICAgICAgY2xzOiAnbWV0cmljLXZhbHVlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlcXVlc3RzIHBlciBtaW51dGVcbiAgICBjb25zdCBycG0gPSBtZXRyaWNzR3JpZC5jcmVhdGVEaXYoJ21ldHJpYy1pdGVtJyk7XG4gICAgcnBtLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1JlcXVlc3RzL01pbicgfSk7XG4gICAgcnBtLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIHRleHQ6IG1ldHJpY3MucmVxdWVzdHNQZXJNaW51dGUudG9GaXhlZCgwKSxcbiAgICAgIGNsczogJ21ldHJpYy12YWx1ZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBFcnJvciByYXRlXG4gICAgY29uc3QgZXJyb3JSYXRlID0gbWV0cmljc0dyaWQuY3JlYXRlRGl2KCdtZXRyaWMtaXRlbScpO1xuICAgIGVycm9yUmF0ZS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdFcnJvciBSYXRlJyB9KTtcbiAgICBlcnJvclJhdGUuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogYCR7KG1ldHJpY3MuZXJyb3JSYXRlICogMTAwKS50b0ZpeGVkKDIpfSVgLFxuICAgICAgY2xzOiAnbWV0cmljLXZhbHVlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFRyYW5zcG9ydCBkaXN0cmlidXRpb25cbiAgICBjb25zdCBkaXN0cmlidXRpb24gPSB0aGlzLm1ldHJpY3NDb250YWluZXIuY3JlYXRlRGl2KCd0cmFuc3BvcnQtZGlzdHJpYnV0aW9uJyk7XG4gICAgZGlzdHJpYnV0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1RyYW5zcG9ydCBVc2FnZSBEaXN0cmlidXRpb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IGRpc3RyaWJ1dGlvbkJhcnMgPSBkaXN0cmlidXRpb24uY3JlYXRlRGl2KCdkaXN0cmlidXRpb24tYmFycycpO1xuICAgIE9iamVjdC5lbnRyaWVzKG1ldHJpY3MudHJhbnNwb3J0RGlzdHJpYnV0aW9uKS5mb3JFYWNoKChbdHJhbnNwb3J0LCBwZXJjZW50YWdlXSkgPT4ge1xuICAgICAgY29uc3QgYmFyID0gZGlzdHJpYnV0aW9uQmFycy5jcmVhdGVEaXYoJ2Rpc3RyaWJ1dGlvbi1iYXInKTtcbiAgICAgIGJhci5jcmVhdGVTcGFuKHsgdGV4dDogdHJhbnNwb3J0LnRvVXBwZXJDYXNlKCksIGNsczogJ3RyYW5zcG9ydC1sYWJlbCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckNvbnRhaW5lciA9IGJhci5jcmVhdGVEaXYoJ2Jhci1jb250YWluZXInKTtcbiAgICAgIGNvbnN0IGJhckZpbGwgPSBiYXJDb250YWluZXIuY3JlYXRlRGl2KCdiYXItZmlsbCcpO1xuICAgICAgYmFyRmlsbC5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2UgKiAxMDB9JWA7XG4gICAgICBcbiAgICAgIGJhci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7KHBlcmNlbnRhZ2UgKiAxMDApLnRvRml4ZWQoMSl9JWAsIGNsczogJ3BlcmNlbnRhZ2UtbGFiZWwnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTeXN0ZW1IZWFsdGhQbGFjZWhvbGRlcigpIHtcbiAgICB0aGlzLnN5c3RlbUhlYWx0aENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnTG9hZGluZyBzeXN0ZW0gaGVhbHRoIGRhdGEuLi4nLFxuICAgICAgY2xzOiAncGxhY2Vob2xkZXItdGV4dCdcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUGVyZm9ybWFuY2VNZXRyaWNzUGxhY2Vob2xkZXIoKSB7XG4gICAgdGhpcy5tZXRyaWNzQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdMb2FkaW5nIHBlcmZvcm1hbmNlIG1ldHJpY3MuLi4nLFxuICAgICAgY2xzOiAncGxhY2Vob2xkZXItdGV4dCdcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQ2hhcnRzUGxhY2Vob2xkZXIoKSB7XG4gICAgdGhpcy5jaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1BlcmZvcm1hbmNlIGNoYXJ0cyB3aWxsIGJlIGRpc3BsYXllZCBoZXJlJyxcbiAgICAgIGNsczogJ3BsYWNlaG9sZGVyLXRleHQnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdignZGFzaGJvYXJkLWVycm9yJyk7XG4gICAgZXJyb3JFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYEVycm9yOiAke21lc3NhZ2V9YCwgY2xzOiAnZXJyb3ItbWVzc2FnZScgfSk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFVwdGltZSh1cHRpbWU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IodXB0aW1lIC8gMTAwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IobWludXRlcyAvIDYwKTtcbiAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcihob3VycyAvIDI0KTtcbiAgICBcbiAgICBpZiAoZGF5cyA+IDApIHtcbiAgICAgIHJldHVybiBgJHtkYXlzfWQgJHtob3VycyAlIDI0fWhgO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7aG91cnN9aCAke21pbnV0ZXMgJSA2MH1tYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGAke21pbnV0ZXN9bSAke3NlY29uZHMgJSA2MH1zYDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRpbWVzdGFtcCgpIHtcbiAgICBjb25zdCB0aW1lc3RhbXBFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnRpbWVzdGFtcCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0aW1lc3RhbXBFbCkge1xuICAgICAgdGltZXN0YW1wRWwudGV4dENvbnRlbnQgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRSZWFsVGltZVVwZGF0ZXMoKSB7XG4gICAgaWYgKHRoaXMudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVEYXNoYm9hcmQoKTtcbiAgICB9LCB0aGlzLmNvbmZpZy51cGRhdGVJbnRlcnZhbCk7XG4gIH1cblxuICBwcml2YXRlIHN0b3BSZWFsVGltZVVwZGF0ZXMoKSB7XG4gICAgaWYgKHRoaXMudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XG4gICAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBMaXN0ZW4gZm9yIHRyYW5zcG9ydCBldmVudHMgaWYgdHJhbnNwb3J0IG1hbmFnZXIgaXMgYXZhaWxhYmxlXG4gICAgaWYgKHRoaXMudHJhbnNwb3J0TWFuYWdlcikge1xuICAgICAgLy8gTm90ZTogQWN0dWFsIGV2ZW50IGhhbmRsaW5nIHdpbGwgZGVwZW5kIG9uIHRoZSBUcmFuc3BvcnRNYW5hZ2VyIGltcGxlbWVudGF0aW9uXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCB1c2UgYSBzaW1wbGVyIGFwcHJvYWNoXG4gICAgICBjb25zb2xlLmxvZygnU2V0dGluZyB1cCB0cmFuc3BvcnQgZXZlbnQgbGlzdGVuZXJzJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBSZW1vdmUgdHJhbnNwb3J0IGV2ZW50IGxpc3RlbmVycyBpZiBuZWVkZWRcbiAgICBpZiAodGhpcy50cmFuc3BvcnRNYW5hZ2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnUmVtb3ZpbmcgdHJhbnNwb3J0IGV2ZW50IGxpc3RlbmVycycpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25UcmFuc3BvcnRTd2l0Y2hlZChldmVudDogYW55KSB7XG4gICAgbmV3IE5vdGljZShgVHJhbnNwb3J0IHN3aXRjaGVkIHRvICR7ZXZlbnQudHJhbnNwb3J0Py50b1VwcGVyQ2FzZSgpIHx8ICd1bmtub3duJ31gKTtcbiAgICB0aGlzLnVwZGF0ZURhc2hib2FyZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkhlYWx0aENoYW5nZWQoZXZlbnQ6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKCdIZWFsdGggY2hhbmdlZDonLCBldmVudCk7XG4gICAgdGhpcy51cGRhdGVEYXNoYm9hcmQoKTtcbiAgfVxuXG4gIHByaXZhdGUgb25FcnJvck9jY3VycmVkKGV2ZW50OiBhbnkpIHtcbiAgICBjb25zb2xlLndhcm4oJ1RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZDonLCBldmVudCk7XG4gICAgdGhpcy51cGRhdGVEYXNoYm9hcmQoKTtcbiAgfVxuXG4gIHByaXZhdGUgdG9nZ2xlUmVhbFRpbWVVcGRhdGVzKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmlzUmVhbFRpbWVFbmFibGVkID0gZW5hYmxlZDtcbiAgICB0aGlzLmNvbmZpZy5lbmFibGVSZWFsVGltZVVwZGF0ZXMgPSBlbmFibGVkO1xuICAgIFxuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0UmVhbFRpbWVVcGRhdGVzKCk7XG4gICAgICBuZXcgTm90aWNlKCdSZWFsLXRpbWUgdXBkYXRlcyBlbmFibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RvcFJlYWxUaW1lVXBkYXRlcygpO1xuICAgICAgbmV3IE5vdGljZSgnUmVhbC10aW1lIHVwZGF0ZXMgZGlzYWJsZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVXBkYXRlIGluZGljYXRvclxuICAgIGNvbnN0IGluZGljYXRvciA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnJlYWx0aW1lLWluZGljYXRvcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChpbmRpY2F0b3IpIHtcbiAgICAgIGluZGljYXRvci5lbXB0eSgpO1xuICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgaW5kaWNhdG9yLmNyZWF0ZVNwYW4oeyB0ZXh0OiAn8J+foiBSZWFsLXRpbWUnLCBjbHM6ICdyZWFsdGltZS1hY3RpdmUnIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLmNyZWF0ZVNwYW4oeyB0ZXh0OiAn4pqqIE1hbnVhbCByZWZyZXNoJywgY2xzOiAncmVhbHRpbWUtaW5hY3RpdmUnIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFudWFsUmVmcmVzaCgpIHtcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5tb2QtY3RhJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgaWYgKGJ1dHRvbikge1xuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfwn5SEIFJlZnJlc2hpbmcuLi4nO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGVEYXNoYm9hcmQoKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0Rhc2hib2FyZCByZWZyZXNoZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byByZWZyZXNoIGRhc2hib2FyZCcpO1xuICAgICAgY29uc29sZS5lcnJvcignTWFudWFsIHJlZnJlc2ggZmFpbGVkOicsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKGJ1dHRvbikge1xuICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ/CflIQgUmVmcmVzaCc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0VHJhbnNwb3J0KHRyYW5zcG9ydFR5cGU6IFRyYW5zcG9ydFR5cGUpIHtcbiAgICBuZXcgTm90aWNlKGBUZXN0aW5nICR7dHJhbnNwb3J0VHlwZX0gdHJhbnNwb3J0Li4uYCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRlc3QgdGhlIHNwZWNpZmljIHRyYW5zcG9ydFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wZXJmb3JtVHJhbnNwb3J0VGVzdCh0cmFuc3BvcnRUeXBlKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKchSAke3RyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydCB0ZXN0IHN1Y2Nlc3NmdWxgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCAke3RyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydCB0ZXN0IGZhaWxlZDogJHtyZXN1bHQuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgc3BlY2lmaWMgY2FyZFxuICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgdGhpcy5nZXRUcmFuc3BvcnRTdGF0dXModHJhbnNwb3J0VHlwZSk7XG4gICAgICB0aGlzLnVwZGF0ZVRyYW5zcG9ydENhcmQodHJhbnNwb3J0VHlwZSwgc3RhdHVzKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGDinYwgJHt0cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnQgdGVzdCBmYWlsZWRgKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFRyYW5zcG9ydCB0ZXN0IGZhaWxlZCBmb3IgJHt0cmFuc3BvcnRUeXBlfTpgLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwZXJmb3JtVHJhbnNwb3J0VGVzdCh0cmFuc3BvcnRUeXBlOiBUcmFuc3BvcnRUeXBlKTogUHJvbWlzZTx7c3VjY2VzczogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmd9PiB7XG4gICAgLy8gU2ltdWxhdGUgdHJhbnNwb3J0IHRlc3RcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xuICAgIFxuICAgIC8vIFJhbmRvbSBzdWNjZXNzL2ZhaWx1cmUgZm9yIGRlbW9uc3RyYXRpb25cbiAgICBjb25zdCBzdWNjZXNzID0gTWF0aC5yYW5kb20oKSA+IDAuMjtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzcyxcbiAgICAgIGVycm9yOiBzdWNjZXNzID8gdW5kZWZpbmVkIDogJ0Nvbm5lY3Rpb24gdGltZW91dCdcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzd2l0Y2hUb1RyYW5zcG9ydCh0cmFuc3BvcnRUeXBlOiBUcmFuc3BvcnRUeXBlKSB7XG4gICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybShgU3dpdGNoIHRvICR7dHJhbnNwb3J0VHlwZX0gdHJhbnNwb3J0IGFzIHByaW1hcnk/YCk7XG4gICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gU3dpdGNoIHRyYW5zcG9ydCB2aWEgdHJhbnNwb3J0IG1hbmFnZXJcbiAgICAgIC8vIGF3YWl0IHRoaXMudHJhbnNwb3J0TWFuYWdlci5zd2l0Y2hQcmltYXJ5VHJhbnNwb3J0KHRyYW5zcG9ydFR5cGUpO1xuICAgICAgXG4gICAgICBuZXcgTm90aWNlKGDinIUgU3dpdGNoZWQgdG8gJHt0cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnRgKTtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlRGFzaGJvYXJkKCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShg4p2MIEZhaWxlZCB0byBzd2l0Y2ggdG8gJHt0cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnRgKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zcG9ydCBzd2l0Y2ggZmFpbGVkOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV4cG9ydERhdGEoKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc3lzdGVtSGVhbHRoOiB0aGlzLmN1cnJlbnRIZWFsdGgsXG4gICAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHRoaXMuY3VycmVudE1ldHJpY3MsXG4gICAgICBleHBvcnRlZEJ5OiAnVmF1bHRQaWxvdCBUcmFuc3BvcnQgRGFzaGJvYXJkJ1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pO1xuICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhLmhyZWYgPSB1cmw7XG4gICAgYS5kb3dubG9hZCA9IGB2YXVsdHBpbG90LWRhc2hib2FyZC0ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfS5qc29uYDtcbiAgICBhLmNsaWNrKCk7XG4gICAgXG4gICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgIG5ldyBOb3RpY2UoJ0Rhc2hib2FyZCBkYXRhIGV4cG9ydGVkIHN1Y2Nlc3NmdWxseScpO1xuICB9XG5cbiAgcHJpdmF0ZSBvcGVuRGFzaGJvYXJkU2V0dGluZ3MoKSB7XG4gICAgbmV3IE5vdGljZSgnRGFzaGJvYXJkIHNldHRpbmdzIHdpbGwgb3BlbiBpbiBhIGZ1dHVyZSB1cGRhdGUnKTtcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnQgZGFzaGJvYXJkIHNldHRpbmdzIG1vZGFsXG4gIH1cbn1cbiIsIi8qKlxuICogQWR2YW5jZWRTZXR0aW5ncyAtIFZpc3VhbCBjb25maWd1cmF0aW9uIGludGVyZmFjZSBmb3IgVmF1bHRQaWxvdFxuICovXG5cbmltcG9ydCB7IFNldHRpbmcsIENvbXBvbmVudCwgTm90aWNlLCBNb2RhbCwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVHJhbnNwb3J0VHlwZSB9IGZyb20gJy4uL2RldnBpcGUvdHJhbnNwb3J0cy9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCB7IFRyYW5zcG9ydE1hbmFnZXJDb25maWcgfSBmcm9tICcuLi9kZXZwaXBlL1RyYW5zcG9ydE1hbmFnZXInO1xuaW1wb3J0IFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR2YW5jZWRTZXR0aW5nc0NvbmZpZyB7XG4gIHNob3dFeHBlcnRPcHRpb25zOiBib29sZWFuO1xuICBlbmFibGVSZWFsVGltZVZhbGlkYXRpb246IGJvb2xlYW47XG4gIGFsbG93SW1wb3J0RXhwb3J0OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ3VyYXRpb25Qcm9maWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb25maWc6IFZhdWx0UGlsb3RDb25maWd1cmF0aW9uO1xuICBjcmVhdGVkOiBEYXRlO1xuICBsYXN0TW9kaWZpZWQ6IERhdGU7XG4gIGlzRGVmYXVsdDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFBpbG90Q29uZmlndXJhdGlvbiB7XG4gIHRyYW5zcG9ydDoge1xuICAgIHByaW1hcnlUcmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGU7XG4gICAgZmFsbGJhY2tDaGFpbjogVHJhbnNwb3J0VHlwZVtdO1xuICAgIHNlbGVjdGlvbkNyaXRlcmlhOiB7XG4gICAgICBsYXRlbmN5V2VpZ2h0OiBudW1iZXI7XG4gICAgICByZWxpYWJpbGl0eVdlaWdodDogbnVtYmVyO1xuICAgICAgY2FwYWJpbGl0eVdlaWdodDogbnVtYmVyO1xuICAgICAgY29zdFdlaWdodDogbnVtYmVyO1xuICAgIH07XG4gICAgdGltZW91dHM6IHtcbiAgICAgIGNvbm5lY3Rpb246IG51bWJlcjtcbiAgICAgIHJlcXVlc3Q6IG51bWJlcjtcbiAgICAgIHJldHJ5OiBudW1iZXI7XG4gICAgfTtcbiAgICByZXRyeVBvbGljeToge1xuICAgICAgbWF4QXR0ZW1wdHM6IG51bWJlcjtcbiAgICAgIGJhY2tvZmZNdWx0aXBsaWVyOiBudW1iZXI7XG4gICAgICBtYXhCYWNrb2ZmVGltZTogbnVtYmVyO1xuICAgIH07XG4gIH07XG4gIHBlcmZvcm1hbmNlOiB7XG4gICAgbW9kZTogJ3BlcmZvcm1hbmNlJyB8ICdiYWxhbmNlZCcgfCAncmVsaWFiaWxpdHknO1xuICAgIGVuYWJsZUNvbm5lY3Rpb25Qb29saW5nOiBib29sZWFuO1xuICAgIG1heENvbmN1cnJlbnRSZXF1ZXN0czogbnVtYmVyO1xuICAgIGVuYWJsZUNvbXByZXNzaW9uOiBib29sZWFuO1xuICAgIGVuYWJsZUNhY2hpbmc6IGJvb2xlYW47XG4gICAgY2FjaGVTaXplOiBudW1iZXI7XG4gIH07XG4gIG1vbml0b3Jpbmc6IHtcbiAgICBlbmFibGVIZWFsdGhDaGVja3M6IGJvb2xlYW47XG4gICAgaGVhbHRoQ2hlY2tJbnRlcnZhbDogbnVtYmVyO1xuICAgIGVuYWJsZU1ldHJpY3M6IGJvb2xlYW47XG4gICAgbWV0cmljc1JldGVudGlvbjogbnVtYmVyO1xuICAgIGVuYWJsZVByZWRpY3RpdmVBbGVydHM6IGJvb2xlYW47XG4gIH07XG4gIHVpOiB7XG4gICAgdGhlbWU6ICdhdXRvJyB8ICdsaWdodCcgfCAnZGFyayc7XG4gICAgZW5hYmxlQW5pbWF0aW9uczogYm9vbGVhbjtcbiAgICBzaG93QWR2YW5jZWRNZXRyaWNzOiBib29sZWFuO1xuICAgIGRhc2hib2FyZFJlZnJlc2hSYXRlOiBudW1iZXI7XG4gICAgZW5hYmxlTm90aWZpY2F0aW9uczogYm9vbGVhbjtcbiAgfTtcbiAgcHJpdmFjeToge1xuICAgIGVuYWJsZUFuYWx5dGljczogYm9vbGVhbjtcbiAgICBzaGFyZVVzYWdlRGF0YTogYm9vbGVhbjtcbiAgICBkYXRhUmV0ZW50aW9uRGF5czogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpZ3VyYXRpb25WYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JbXTtcbiAgd2FybmluZ3M6IFZhbGlkYXRpb25XYXJuaW5nW107XG4gIGVzdGltYXRlZEltcGFjdDoge1xuICAgIHBlcmZvcm1hbmNlQ2hhbmdlOiBudW1iZXI7XG4gICAgcmVsaWFiaWxpdHlDaGFuZ2U6IG51bWJlcjtcbiAgICByZXNvdXJjZVVzYWdlOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvbkVycm9yIHtcbiAgZmllbGQ6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBzZXZlcml0eTogJ2Vycm9yJyB8ICd3YXJuaW5nJztcbiAgc3VnZ2VzdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0aW9uV2FybmluZyB7XG4gIGZpZWxkOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgaW1wYWN0OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICByZWNvbW1lbmRhdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEFkdmFuY2VkU2V0dGluZ3MgZXh0ZW5kcyBDb21wb25lbnQge1xuICBwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY29uZmlnOiBBZHZhbmNlZFNldHRpbmdzQ29uZmlnO1xuICBwcml2YXRlIGN1cnJlbnRDb25maWd1cmF0aW9uOiBWYXVsdFBpbG90Q29uZmlndXJhdGlvbjtcbiAgcHJpdmF0ZSBwcm9maWxlczogQ29uZmlndXJhdGlvblByb2ZpbGVbXSA9IFtdO1xuICBwcml2YXRlIHZhbGlkYXRpb25SZXN1bHQ/OiBDb25maWd1cmF0aW9uVmFsaWRhdGlvblJlc3VsdDtcbiAgXG4gIC8vIFVJIEVsZW1lbnRzXG4gIHByaXZhdGUgcHJvZmlsZVNlbGVjdG9yITogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gIHByaXZhdGUgdmFsaWRhdGlvbkNvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGNvbmZpZ3VyYXRpb25Db250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBwcmV2aWV3Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIFxuICBwcml2YXRlIHZhbGlkYXRpb25UaW1lb3V0PzogbnVtYmVyO1xuICBwcml2YXRlIGhhc1Vuc2F2ZWRDaGFuZ2VzOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxuICAgIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbixcbiAgICBjb25maWc6IEFkdmFuY2VkU2V0dGluZ3NDb25maWcgPSB7XG4gICAgICBzaG93RXhwZXJ0T3B0aW9uczogZmFsc2UsXG4gICAgICBlbmFibGVSZWFsVGltZVZhbGlkYXRpb246IHRydWUsXG4gICAgICBhbGxvd0ltcG9ydEV4cG9ydDogdHJ1ZVxuICAgIH1cbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IHRoaXMuZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb24oKTtcbiAgICB0aGlzLmxvYWRQcm9maWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZUludGVyZmFjZSgpO1xuICAgIGF3YWl0IHRoaXMubG9hZEN1cnJlbnRDb25maWd1cmF0aW9uKCk7XG4gICAgdGhpcy5yZW5kZXJTZXR0aW5ncygpO1xuICAgIFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVSZWFsVGltZVZhbGlkYXRpb24pIHtcbiAgICAgIHRoaXMuc3RhcnRSZWFsVGltZVZhbGlkYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBpZiAodGhpcy52YWxpZGF0aW9uVGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudmFsaWRhdGlvblRpbWVvdXQpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5oYXNVbnNhdmVkQ2hhbmdlcykge1xuICAgICAgY29uc3Qgc2hvdWxkU2F2ZSA9IGNvbmZpcm0oJ1lvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcy4gV291bGQgeW91IGxpa2UgdG8gc2F2ZSB0aGVtPycpO1xuICAgICAgaWYgKHNob3VsZFNhdmUpIHtcbiAgICAgICAgdGhpcy5zYXZlQ29uZmlndXJhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUludGVyZmFjZSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnYWR2YW5jZWQtc2V0dGluZ3MnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgaGVhZGVyXG4gICAgdGhpcy5jcmVhdGVIZWFkZXIoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcHJvZmlsZSBtYW5hZ2VtZW50IHNlY3Rpb25cbiAgICB0aGlzLmNyZWF0ZVByb2ZpbGVNYW5hZ2VtZW50KCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHZhbGlkYXRpb24gc2VjdGlvblxuICAgIHRoaXMuY3JlYXRlVmFsaWRhdGlvblNlY3Rpb24oKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY29uZmlndXJhdGlvbiBzZWN0aW9uc1xuICAgIHRoaXMuY3JlYXRlQ29uZmlndXJhdGlvblNlY3Rpb25zKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHByZXZpZXcgc2VjdGlvblxuICAgIHRoaXMuY3JlYXRlUHJldmlld1NlY3Rpb24oKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYWN0aW9uIGJ1dHRvbnNcbiAgICB0aGlzLmNyZWF0ZUFjdGlvbkJ1dHRvbnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlSGVhZGVyKCkge1xuICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5ncy1oZWFkZXInKTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQWR2YW5jZWQgU2V0dGluZ3MnIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnRmluZS10dW5lIFZhdWx0UGlsb3QgY29uZmlndXJhdGlvbiBmb3Igb3B0aW1hbCBwZXJmb3JtYW5jZScsXG4gICAgICBjbHM6ICdzZXR0aW5ncy1zdWJ0aXRsZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBFeHBlcnQgbW9kZSB0b2dnbGVcbiAgICBjb25zdCBleHBlcnRUb2dnbGUgPSBoZWFkZXIuY3JlYXRlRGl2KCdleHBlcnQtdG9nZ2xlJyk7XG4gICAgY29uc3QgZXhwZXJ0TGFiZWwgPSBleHBlcnRUb2dnbGUuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgZXhwZXJ0TGFiZWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdFeHBlcnQgTW9kZScgfSk7XG4gICAgY29uc3QgZXhwZXJ0Q2hlY2tib3ggPSBleHBlcnRMYWJlbC5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgZXhwZXJ0Q2hlY2tib3guY2hlY2tlZCA9IHRoaXMuY29uZmlnLnNob3dFeHBlcnRPcHRpb25zO1xuICAgIGV4cGVydENoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIHRoaXMuY29uZmlnLnNob3dFeHBlcnRPcHRpb25zID0gZXhwZXJ0Q2hlY2tib3guY2hlY2tlZDtcbiAgICAgIHRoaXMudXBkYXRlRXhwZXJ0T3B0aW9uc1Zpc2liaWxpdHkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUHJvZmlsZU1hbmFnZW1lbnQoKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwcm9maWxlLW1hbmFnZW1lbnQtc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29uZmlndXJhdGlvbiBQcm9maWxlcycgfSk7XG4gICAgXG4gICAgY29uc3QgcHJvZmlsZUNvbnRyb2xzID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3Byb2ZpbGUtY29udHJvbHMnKTtcbiAgICBcbiAgICAvLyBQcm9maWxlIHNlbGVjdG9yXG4gICAgY29uc3Qgc2VsZWN0b3JDb250YWluZXIgPSBwcm9maWxlQ29udHJvbHMuY3JlYXRlRGl2KCdwcm9maWxlLXNlbGVjdG9yLWNvbnRhaW5lcicpO1xuICAgIHNlbGVjdG9yQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnQ3VycmVudCBQcm9maWxlOicsIGNsczogJ3Byb2ZpbGUtbGFiZWwnIH0pO1xuICAgIHRoaXMucHJvZmlsZVNlbGVjdG9yID0gc2VsZWN0b3JDb250YWluZXIuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAncHJvZmlsZS1zZWxlY3RvcicgfSk7XG4gICAgdGhpcy51cGRhdGVQcm9maWxlU2VsZWN0b3IoKTtcbiAgICBcbiAgICB0aGlzLnByb2ZpbGVTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICB0aGlzLmxvYWRQcm9maWxlKHRoaXMucHJvZmlsZVNlbGVjdG9yLnZhbHVlKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBQcm9maWxlIGFjdGlvbiBidXR0b25zXG4gICAgY29uc3QgcHJvZmlsZUFjdGlvbnMgPSBwcm9maWxlQ29udHJvbHMuY3JlYXRlRGl2KCdwcm9maWxlLWFjdGlvbnMnKTtcbiAgICBcbiAgICBjb25zdCBzYXZlUHJvZmlsZUJ0biA9IHByb2ZpbGVBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTYXZlIGFzIE5ldyBQcm9maWxlJywgY2xzOiAnbW9kLW11dGVkJyB9KTtcbiAgICBzYXZlUHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd1NhdmVQcm9maWxlTW9kYWwoKSk7XG4gICAgXG4gICAgY29uc3QgZGVsZXRlUHJvZmlsZUJ0biA9IHByb2ZpbGVBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEZWxldGUgUHJvZmlsZScsIGNsczogJ21vZC13YXJuaW5nJyB9KTtcbiAgICBkZWxldGVQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5kZWxldGVDdXJyZW50UHJvZmlsZSgpKTtcbiAgICBcbiAgICBpZiAodGhpcy5jb25maWcuYWxsb3dJbXBvcnRFeHBvcnQpIHtcbiAgICAgIGNvbnN0IGltcG9ydEJ0biA9IHByb2ZpbGVBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdJbXBvcnQnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgICAgaW1wb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5pbXBvcnRDb25maWd1cmF0aW9uKCkpO1xuICAgICAgXG4gICAgICBjb25zdCBleHBvcnRCdG4gPSBwcm9maWxlQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRXhwb3J0JywgY2xzOiAnbW9kLW11dGVkJyB9KTtcbiAgICAgIGV4cG9ydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZXhwb3J0Q29uZmlndXJhdGlvbigpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVZhbGlkYXRpb25TZWN0aW9uKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigndmFsaWRhdGlvbi1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25maWd1cmF0aW9uIFN0YXR1cycgfSk7XG4gICAgXG4gICAgdGhpcy52YWxpZGF0aW9uQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3ZhbGlkYXRpb24tY29udGFpbmVyJyk7XG4gICAgdGhpcy5yZW5kZXJWYWxpZGF0aW9uUGxhY2Vob2xkZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ29uZmlndXJhdGlvblNlY3Rpb25zKCkge1xuICAgIHRoaXMuY29uZmlndXJhdGlvbkNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjb25maWd1cmF0aW9uLXNlY3Rpb25zJyk7XG4gICAgXG4gICAgLy8gVHJhbnNwb3J0IHNldHRpbmdzXG4gICAgdGhpcy5jcmVhdGVUcmFuc3BvcnRTZXR0aW5ncygpO1xuICAgIFxuICAgIC8vIFBlcmZvcm1hbmNlIHNldHRpbmdzXG4gICAgdGhpcy5jcmVhdGVQZXJmb3JtYW5jZVNldHRpbmdzKCk7XG4gICAgXG4gICAgLy8gTW9uaXRvcmluZyBzZXR0aW5nc1xuICAgIHRoaXMuY3JlYXRlTW9uaXRvcmluZ1NldHRpbmdzKCk7XG4gICAgXG4gICAgLy8gVUkgc2V0dGluZ3NcbiAgICB0aGlzLmNyZWF0ZVVJU2V0dGluZ3MoKTtcbiAgICBcbiAgICAvLyBQcml2YWN5IHNldHRpbmdzXG4gICAgdGhpcy5jcmVhdGVQcml2YWN5U2V0dGluZ3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVHJhbnNwb3J0U2V0dGluZ3MoKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29uZmlndXJhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2NvbmZpZy1zZWN0aW9uIHRyYW5zcG9ydC1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfwn5qAIFRyYW5zcG9ydCBDb25maWd1cmF0aW9uJyB9KTtcbiAgICBcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdzZXR0aW5ncy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBQcmltYXJ5IHRyYW5zcG9ydCBzZWxlY3Rpb25cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdQcmltYXJ5IFRyYW5zcG9ydCcpXG4gICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBwcmVmZXJyZWQgdHJhbnNwb3J0IG1ldGhvZCcpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oVHJhbnNwb3J0VHlwZS5IVFRQLCAnSFRUUCAoUmVsaWFibGUpJyk7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCwgJ1dlYlNvY2tldCAoUmVhbC10aW1lKScpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNLCAnRmlsZVN5c3RlbSAoT2ZmbGluZSknKTtcbiAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQucHJpbWFyeVRyYW5zcG9ydCk7XG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5wcmltYXJ5VHJhbnNwb3J0ID0gdmFsdWUgYXMgVHJhbnNwb3J0VHlwZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIEZhbGxiYWNrIGNoYWluIGNvbmZpZ3VyYXRpb25cbiAgICB0aGlzLmNyZWF0ZUZhbGxiYWNrQ2hhaW5Db25maWcoc2V0dGluZ3NDb250YWluZXIpO1xuICAgIFxuICAgIC8vIFNlbGVjdGlvbiBjcml0ZXJpYSBzbGlkZXJzXG4gICAgdGhpcy5jcmVhdGVTZWxlY3Rpb25Dcml0ZXJpYUNvbmZpZyhzZXR0aW5nc0NvbnRhaW5lcik7XG4gICAgXG4gICAgLy8gVGltZW91dCBjb25maWd1cmF0aW9uXG4gICAgdGhpcy5jcmVhdGVUaW1lb3V0Q29uZmlnKHNldHRpbmdzQ29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBSZXRyeSBwb2xpY3kgY29uZmlndXJhdGlvblxuICAgIHRoaXMuY3JlYXRlUmV0cnlQb2xpY3lDb25maWcoc2V0dGluZ3NDb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVGYWxsYmFja0NoYWluQ29uZmlnKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBmYWxsYmFja1NldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnRmFsbGJhY2sgQ2hhaW4nKVxuICAgICAgLnNldERlc2MoJ0NvbmZpZ3VyZSB0cmFuc3BvcnQgZmFsbGJhY2sgb3JkZXInKTtcbiAgICBcbiAgICBjb25zdCBmYWxsYmFja0NvbnRhaW5lciA9IGZhbGxiYWNrU2V0dGluZy5jb250cm9sRWwuY3JlYXRlRGl2KCdmYWxsYmFjay1jaGFpbi1jb25maWcnKTtcbiAgICBcbiAgICAvLyBDdXJyZW50IGZhbGxiYWNrIGNoYWluIGRpc3BsYXlcbiAgICBjb25zdCBjaGFpbkRpc3BsYXkgPSBmYWxsYmFja0NvbnRhaW5lci5jcmVhdGVEaXYoJ2NoYWluLWRpc3BsYXknKTtcbiAgICB0aGlzLnVwZGF0ZUZhbGxiYWNrQ2hhaW5EaXNwbGF5KGNoYWluRGlzcGxheSk7XG4gICAgXG4gICAgLy8gQWRkIHRyYW5zcG9ydCBidXR0b25zXG4gICAgY29uc3QgYWRkQnV0dG9ucyA9IGZhbGxiYWNrQ29udGFpbmVyLmNyZWF0ZURpdignYWRkLXRyYW5zcG9ydC1idXR0b25zJyk7XG4gICAgW1RyYW5zcG9ydFR5cGUuSFRUUCwgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTV0uZm9yRWFjaCh0cmFuc3BvcnQgPT4ge1xuICAgICAgY29uc3QgYnV0dG9uID0gYWRkQnV0dG9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogYEFkZCAke3RyYW5zcG9ydC50b1VwcGVyQ2FzZSgpfWAsXG4gICAgICAgIGNsczogJ21vZC1tdXRlZCBhZGQtdHJhbnNwb3J0LWJ0bidcbiAgICAgIH0pO1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LmZhbGxiYWNrQ2hhaW4uaW5jbHVkZXModHJhbnNwb3J0KSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LmZhbGxiYWNrQ2hhaW4ucHVzaCh0cmFuc3BvcnQpO1xuICAgICAgICAgIHRoaXMudXBkYXRlRmFsbGJhY2tDaGFpbkRpc3BsYXkoY2hhaW5EaXNwbGF5KTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRmFsbGJhY2tDaGFpbkRpc3BsYXkoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnN0IGNoYWluID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQuZmFsbGJhY2tDaGFpbjtcbiAgICBjaGFpbi5mb3JFYWNoKCh0cmFuc3BvcnQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdignY2hhaW4taXRlbScpO1xuICAgICAgaXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogYCR7aW5kZXggKyAxfS4gJHt0cmFuc3BvcnQudG9VcHBlckNhc2UoKX1gLCBjbHM6ICdjaGFpbi1sYWJlbCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdignY2hhaW4tYWN0aW9ucycpO1xuICAgICAgXG4gICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgIGNvbnN0IG1vdmVVcEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ+KGkScsIGNsczogJ21vZC1tdXRlZCBjaGFpbi1idG4nIH0pO1xuICAgICAgICBtb3ZlVXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgW2NoYWluW2luZGV4XSwgY2hhaW5baW5kZXggLSAxXV0gPSBbY2hhaW5baW5kZXggLSAxXSwgY2hhaW5baW5kZXhdXTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUZhbGxiYWNrQ2hhaW5EaXNwbGF5KGNvbnRhaW5lcik7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChpbmRleCA8IGNoYWluLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgY29uc3QgbW92ZURvd25CdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICfihpMnLCBjbHM6ICdtb2QtbXV0ZWQgY2hhaW4tYnRuJyB9KTtcbiAgICAgICAgbW92ZURvd25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgW2NoYWluW2luZGV4XSwgY2hhaW5baW5kZXggKyAxXV0gPSBbY2hhaW5baW5kZXggKyAxXSwgY2hhaW5baW5kZXhdXTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUZhbGxiYWNrQ2hhaW5EaXNwbGF5KGNvbnRhaW5lcik7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ+KclScsIGNsczogJ21vZC13YXJuaW5nIGNoYWluLWJ0bicgfSk7XG4gICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNoYWluLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlRmFsbGJhY2tDaGFpbkRpc3BsYXkoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTZWxlY3Rpb25Dcml0ZXJpYUNvbmZpZyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgY3JpdGVyaWFDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdzZWxlY3Rpb24tY3JpdGVyaWEtY29udGFpbmVyJyk7XG4gICAgY3JpdGVyaWFDb250YWluZXIuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnVHJhbnNwb3J0IFNlbGVjdGlvbiBDcml0ZXJpYScgfSk7XG4gICAgXG4gICAgY29uc3QgY3JpdGVyaWEgPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5zZWxlY3Rpb25Dcml0ZXJpYTtcbiAgICBcbiAgICAvLyBMYXRlbmN5IHdlaWdodFxuICAgIG5ldyBTZXR0aW5nKGNyaXRlcmlhQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0xhdGVuY3kgUHJpb3JpdHknKVxuICAgICAgLnNldERlc2MoJ0hvdyBtdWNoIHRvIHByaW9yaXRpemUgbG93IGxhdGVuY3kgKDAtMTAwJSknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDAsIDEwMCwgNSk7XG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZShjcml0ZXJpYS5sYXRlbmN5V2VpZ2h0ICogMTAwKTtcbiAgICAgICAgc2xpZGVyLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICBjcml0ZXJpYS5sYXRlbmN5V2VpZ2h0ID0gdmFsdWUgLyAxMDA7XG4gICAgICAgICAgdGhpcy5ub3JtYWxpemVTZWxlY3Rpb25Dcml0ZXJpYSgpO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIFJlbGlhYmlsaXR5IHdlaWdodFxuICAgIG5ldyBTZXR0aW5nKGNyaXRlcmlhQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1JlbGlhYmlsaXR5IFByaW9yaXR5JylcbiAgICAgIC5zZXREZXNjKCdIb3cgbXVjaCB0byBwcmlvcml0aXplIHJlbGlhYmlsaXR5ICgwLTEwMCUpJylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgc2xpZGVyLnNldExpbWl0cygwLCAxMDAsIDUpO1xuICAgICAgICBzbGlkZXIuc2V0VmFsdWUoY3JpdGVyaWEucmVsaWFiaWxpdHlXZWlnaHQgKiAxMDApO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIGNyaXRlcmlhLnJlbGlhYmlsaXR5V2VpZ2h0ID0gdmFsdWUgLyAxMDA7XG4gICAgICAgICAgdGhpcy5ub3JtYWxpemVTZWxlY3Rpb25Dcml0ZXJpYSgpO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIENhcGFiaWxpdHkgd2VpZ2h0XG4gICAgbmV3IFNldHRpbmcoY3JpdGVyaWFDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnRmVhdHVyZSBQcmlvcml0eScpXG4gICAgICAuc2V0RGVzYygnSG93IG11Y2ggdG8gcHJpb3JpdGl6ZSBhZHZhbmNlZCBmZWF0dXJlcyAoMC0xMDAlKScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMCwgMTAwLCA1KTtcbiAgICAgICAgc2xpZGVyLnNldFZhbHVlKGNyaXRlcmlhLmNhcGFiaWxpdHlXZWlnaHQgKiAxMDApO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIGNyaXRlcmlhLmNhcGFiaWxpdHlXZWlnaHQgPSB2YWx1ZSAvIDEwMDtcbiAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVNlbGVjdGlvbkNyaXRlcmlhKCk7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gQ29zdCB3ZWlnaHRcbiAgICBuZXcgU2V0dGluZyhjcml0ZXJpYUNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdFZmZpY2llbmN5IFByaW9yaXR5JylcbiAgICAgIC5zZXREZXNjKCdIb3cgbXVjaCB0byBwcmlvcml0aXplIHJlc291cmNlIGVmZmljaWVuY3kgKDAtMTAwJSknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDAsIDEwMCwgNSk7XG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZShjcml0ZXJpYS5jb3N0V2VpZ2h0ICogMTAwKTtcbiAgICAgICAgc2xpZGVyLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICBjcml0ZXJpYS5jb3N0V2VpZ2h0ID0gdmFsdWUgLyAxMDA7XG4gICAgICAgICAgdGhpcy5ub3JtYWxpemVTZWxlY3Rpb25Dcml0ZXJpYSgpO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUaW1lb3V0Q29uZmlnKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLnNob3dFeHBlcnRPcHRpb25zKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdGltZW91dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3RpbWVvdXQtY29uZmlnLWNvbnRhaW5lciBleHBlcnQtb3B0aW9uJyk7XG4gICAgdGltZW91dENvbnRhaW5lci5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdUaW1lb3V0IENvbmZpZ3VyYXRpb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IHRpbWVvdXRzID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQudGltZW91dHM7XG4gICAgXG4gICAgbmV3IFNldHRpbmcodGltZW91dENvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdDb25uZWN0aW9uIFRpbWVvdXQnKVxuICAgICAgLnNldERlc2MoJ01heGltdW0gdGltZSB0byB3YWl0IGZvciBpbml0aWFsIGNvbm5lY3Rpb24gKG1zKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aW1lb3V0cy5jb25uZWN0aW9uLnRvU3RyaW5nKCkpO1xuICAgICAgICB0ZXh0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkKSAmJiBwYXJzZWQgPiAwKSB7XG4gICAgICAgICAgICB0aW1lb3V0cy5jb25uZWN0aW9uID0gcGFyc2VkO1xuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgbmV3IFNldHRpbmcodGltZW91dENvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdSZXF1ZXN0IFRpbWVvdXQnKVxuICAgICAgLnNldERlc2MoJ01heGltdW0gdGltZSB0byB3YWl0IGZvciByZXF1ZXN0IGNvbXBsZXRpb24gKG1zKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aW1lb3V0cy5yZXF1ZXN0LnRvU3RyaW5nKCkpO1xuICAgICAgICB0ZXh0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkKSAmJiBwYXJzZWQgPiAwKSB7XG4gICAgICAgICAgICB0aW1lb3V0cy5yZXF1ZXN0ID0gcGFyc2VkO1xuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVJldHJ5UG9saWN5Q29uZmlnKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLnNob3dFeHBlcnRPcHRpb25zKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgcmV0cnlDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdyZXRyeS1wb2xpY3ktY29udGFpbmVyIGV4cGVydC1vcHRpb24nKTtcbiAgICByZXRyeUNvbnRhaW5lci5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdSZXRyeSBQb2xpY3knIH0pO1xuICAgIFxuICAgIGNvbnN0IHJldHJ5ID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQucmV0cnlQb2xpY3k7XG4gICAgXG4gICAgbmV3IFNldHRpbmcocmV0cnlDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnTWF4IFJldHJ5IEF0dGVtcHRzJylcbiAgICAgIC5zZXREZXNjKCdNYXhpbXVtIG51bWJlciBvZiByZXRyeSBhdHRlbXB0cyBmb3IgZmFpbGVkIHJlcXVlc3RzJylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgc2xpZGVyLnNldExpbWl0cygwLCAxMCwgMSk7XG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZShyZXRyeS5tYXhBdHRlbXB0cyk7XG4gICAgICAgIHNsaWRlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgcmV0cnkubWF4QXR0ZW1wdHMgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICB9KTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyhyZXRyeUNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdCYWNrb2ZmIE11bHRpcGxpZXInKVxuICAgICAgLnNldERlc2MoJ0V4cG9uZW50aWFsIGJhY2tvZmYgbXVsdGlwbGllciBmb3IgcmV0cnkgZGVsYXlzJylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgc2xpZGVyLnNldExpbWl0cygxLCA1LCAwLjEpO1xuICAgICAgICBzbGlkZXIuc2V0VmFsdWUocmV0cnkuYmFja29mZk11bHRpcGxpZXIpO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHJldHJ5LmJhY2tvZmZNdWx0aXBsaWVyID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVBlcmZvcm1hbmNlU2V0dGluZ3MoKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29uZmlndXJhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2NvbmZpZy1zZWN0aW9uIHBlcmZvcm1hbmNlLXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ+KaoSBQZXJmb3JtYW5jZSBDb25maWd1cmF0aW9uJyB9KTtcbiAgICBcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdzZXR0aW5ncy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBQZXJmb3JtYW5jZSBtb2RlXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUGVyZm9ybWFuY2UgTW9kZScpXG4gICAgICAuc2V0RGVzYygnQmFsYW5jZSBiZXR3ZWVuIHNwZWVkLCByZWxpYWJpbGl0eSwgYW5kIHJlc291cmNlIHVzYWdlJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbigncGVyZm9ybWFuY2UnLCAnUGVyZm9ybWFuY2UgKFByaW9yaXRpemUgU3BlZWQpJyk7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignYmFsYW5jZWQnLCAnQmFsYW5jZWQgKFJlY29tbWVuZGVkKScpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3JlbGlhYmlsaXR5JywgJ1JlbGlhYmlsaXR5IChQcmlvcml0aXplIFN0YWJpbGl0eSknKTtcbiAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5tb2RlKTtcbiAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UubW9kZSA9IHZhbHVlIGFzIGFueTtcbiAgICAgICAgICB0aGlzLmFwcGx5UGVyZm9ybWFuY2VNb2RlUHJlc2V0KHZhbHVlIGFzIGFueSk7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBDb25uZWN0aW9uIHBvb2xpbmdcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdDb25uZWN0aW9uIFBvb2xpbmcnKVxuICAgICAgLnNldERlc2MoJ1JldXNlIGNvbm5lY3Rpb25zIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5lbmFibGVDb25uZWN0aW9uUG9vbGluZyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5lbmFibGVDb25uZWN0aW9uUG9vbGluZyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gQ29tcHJlc3Npb25cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdDb21wcmVzc2lvbicpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRhdGEgY29tcHJlc3Npb24gdG8gcmVkdWNlIGJhbmR3aWR0aCB1c2FnZScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmVuYWJsZUNvbXByZXNzaW9uKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmVuYWJsZUNvbXByZXNzaW9uID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBDYWNoaW5nXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUmVzcG9uc2UgQ2FjaGluZycpXG4gICAgICAuc2V0RGVzYygnQ2FjaGUgcmVzcG9uc2VzIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5lbmFibGVDYWNoaW5nKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmVuYWJsZUNhY2hpbmcgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLmNvbmZpZy5zaG93RXhwZXJ0T3B0aW9ucykge1xuICAgICAgLy8gTWF4IGNvbmN1cnJlbnQgcmVxdWVzdHNcbiAgICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnTWF4IENvbmN1cnJlbnQgUmVxdWVzdHMnKVxuICAgICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2Ygc2ltdWx0YW5lb3VzIHJlcXVlc3RzJylcbiAgICAgICAgLnNldENsYXNzKCdleHBlcnQtb3B0aW9uJylcbiAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMSwgMjAsIDEpO1xuICAgICAgICAgIHNsaWRlci5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLm1heENvbmN1cnJlbnRSZXF1ZXN0cyk7XG4gICAgICAgICAgc2xpZGVyLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UubWF4Q29uY3VycmVudFJlcXVlc3RzID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ2FjaGUgc2l6ZVxuICAgICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdDYWNoZSBTaXplIChNQiknKVxuICAgICAgICAuc2V0RGVzYygnTWF4aW11bSBjYWNoZSBzaXplIGluIG1lZ2FieXRlcycpXG4gICAgICAgIC5zZXRDbGFzcygnZXhwZXJ0LW9wdGlvbicpXG4gICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDEsIDEwMCwgNSk7XG4gICAgICAgICAgc2xpZGVyLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UuY2FjaGVTaXplKTtcbiAgICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5jYWNoZVNpemUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTW9uaXRvcmluZ1NldHRpbmdzKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbmZpZ3VyYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCdjb25maWctc2VjdGlvbiBtb25pdG9yaW5nLXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ/Cfk4ogTW9uaXRvcmluZyBDb25maWd1cmF0aW9uJyB9KTtcbiAgICBcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdzZXR0aW5ncy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBIZWFsdGggY2hlY2tzXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnSGVhbHRoIENoZWNrcycpXG4gICAgICAuc2V0RGVzYygnTW9uaXRvciB0cmFuc3BvcnQgaGVhbHRoIGF1dG9tYXRpY2FsbHknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5tb25pdG9yaW5nLmVuYWJsZUhlYWx0aENoZWNrcyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5tb25pdG9yaW5nLmVuYWJsZUhlYWx0aENoZWNrcyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gTWV0cmljcyBjb2xsZWN0aW9uXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUGVyZm9ybWFuY2UgTWV0cmljcycpXG4gICAgICAuc2V0RGVzYygnQ29sbGVjdCBkZXRhaWxlZCBwZXJmb3JtYW5jZSBtZXRyaWNzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ubW9uaXRvcmluZy5lbmFibGVNZXRyaWNzKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLm1vbml0b3JpbmcuZW5hYmxlTWV0cmljcyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gUHJlZGljdGl2ZSBhbGVydHNcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdQcmVkaWN0aXZlIEFsZXJ0cycpXG4gICAgICAuc2V0RGVzYygnR2V0IGVhcmx5IHdhcm5pbmdzIGFib3V0IHBvdGVudGlhbCBpc3N1ZXMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5tb25pdG9yaW5nLmVuYWJsZVByZWRpY3RpdmVBbGVydHMpO1xuICAgICAgICB0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ubW9uaXRvcmluZy5lbmFibGVQcmVkaWN0aXZlQWxlcnRzID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVUlTZXR0aW5ncygpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb25maWd1cmF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdignY29uZmlnLXNlY3Rpb24gdWktc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn8J+OqCBVc2VyIEludGVyZmFjZScgfSk7XG4gICAgXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBzZWN0aW9uLmNyZWF0ZURpdignc2V0dGluZ3MtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gVGhlbWVcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdUaGVtZScpXG4gICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBpbnRlcmZhY2UgdGhlbWUnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdhdXRvJywgJ0F1dG8gKEZvbGxvdyBPYnNpZGlhbiknKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdsaWdodCcsICdMaWdodCcpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2RhcmsnLCAnRGFyaycpO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnVpLnRoZW1lKTtcbiAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkudGhlbWUgPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBBbmltYXRpb25zXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnQW5pbWF0aW9ucycpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIFVJIGFuaW1hdGlvbnMgYW5kIHRyYW5zaXRpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkuZW5hYmxlQW5pbWF0aW9ucyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51aS5lbmFibGVBbmltYXRpb25zID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBBZHZhbmNlZCBtZXRyaWNzXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnQWR2YW5jZWQgTWV0cmljcycpXG4gICAgICAuc2V0RGVzYygnU2hvdyBkZXRhaWxlZCBtZXRyaWNzIGluIGRhc2hib2FyZCcpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnVpLnNob3dBZHZhbmNlZE1ldHJpY3MpO1xuICAgICAgICB0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkuc2hvd0FkdmFuY2VkTWV0cmljcyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gRGFzaGJvYXJkIHJlZnJlc2ggcmF0ZVxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0Rhc2hib2FyZCBSZWZyZXNoIFJhdGUnKVxuICAgICAgLnNldERlc2MoJ0hvdyBvZnRlbiB0byB1cGRhdGUgdGhlIGRhc2hib2FyZCAoc2Vjb25kcyknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDEsIDYwLCAxKTtcbiAgICAgICAgc2xpZGVyLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkuZGFzaGJvYXJkUmVmcmVzaFJhdGUpO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkuZGFzaGJvYXJkUmVmcmVzaFJhdGUgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUHJpdmFjeVNldHRpbmdzKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbmZpZ3VyYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCdjb25maWctc2VjdGlvbiBwcml2YWN5LXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ/CflJIgUHJpdmFjeSAmIERhdGEnIH0pO1xuICAgIFxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3NldHRpbmdzLWNvbnRhaW5lcicpO1xuICAgIFxuICAgIC8vIEFuYWx5dGljc1xuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1VzYWdlIEFuYWx5dGljcycpXG4gICAgICAuc2V0RGVzYygnSGVscCBpbXByb3ZlIFZhdWx0UGlsb3QgYnkgc2hhcmluZyBhbm9ueW1vdXMgdXNhZ2UgZGF0YScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnByaXZhY3kuZW5hYmxlQW5hbHl0aWNzKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnByaXZhY3kuZW5hYmxlQW5hbHl0aWNzID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBEYXRhIHJldGVudGlvblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0RhdGEgUmV0ZW50aW9uJylcbiAgICAgIC5zZXREZXNjKCdIb3cgbG9uZyB0byBrZWVwIHBlcmZvcm1hbmNlIGFuZCB1c2FnZSBkYXRhIChkYXlzKScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMSwgOTAsIDEpO1xuICAgICAgICBzbGlkZXIuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wcml2YWN5LmRhdGFSZXRlbnRpb25EYXlzKTtcbiAgICAgICAgc2xpZGVyLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnByaXZhY3kuZGF0YVJldGVudGlvbkRheXMgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUHJldmlld1NlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdwcmV2aWV3LXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbmZpZ3VyYXRpb24gUHJldmlldycgfSk7XG4gICAgXG4gICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3ByZXZpZXctY29udGFpbmVyJyk7XG4gICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFjdGlvbkJ1dHRvbnMoKSB7XG4gICAgY29uc3QgYWN0aW9ucyA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5ncy1hY3Rpb25zJyk7XG4gICAgXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1NhdmUgQ29uZmlndXJhdGlvbicsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCkpO1xuICAgIFxuICAgIGNvbnN0IHJlc2V0QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUmVzZXQgdG8gRGVmYXVsdHMnLCBjbHM6ICdtb2Qtd2FybmluZycgfSk7XG4gICAgcmVzZXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnJlc2V0VG9EZWZhdWx0cygpKTtcbiAgICBcbiAgICBjb25zdCB0ZXN0QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnVGVzdCBDb25maWd1cmF0aW9uJywgY2xzOiAnbW9kLW11dGVkJyB9KTtcbiAgICB0ZXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy50ZXN0Q29uZmlndXJhdGlvbigpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2V0dGluZ3MoKSB7XG4gICAgLy8gVHJpZ2dlciBpbml0aWFsIHJlbmRlcmluZyBhbmQgdmFsaWRhdGlvblxuICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDdXJyZW50Q29uZmlndXJhdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgLy8gTG9hZCBjb25maWd1cmF0aW9uIGZyb20gcGx1Z2luIHNldHRpbmdzXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWR2YW5jZWRDb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gPSB7IC4uLnRoaXMucGx1Z2luLnNldHRpbmdzLmFkdmFuY2VkQ29uZmlndXJhdGlvbiB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjdXJyZW50IGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGxvYWQgY29uZmlndXJhdGlvbiwgdXNpbmcgZGVmYXVsdHMnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRDb25maWd1cmF0aW9uKCk6IFZhdWx0UGlsb3RDb25maWd1cmF0aW9uIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHJhbnNwb3J0OiB7XG4gICAgICAgIHByaW1hcnlUcmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUuSFRUUCxcbiAgICAgICAgZmFsbGJhY2tDaGFpbjogW1RyYW5zcG9ydFR5cGUuSFRUUCwgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVRdLFxuICAgICAgICBzZWxlY3Rpb25Dcml0ZXJpYToge1xuICAgICAgICAgIGxhdGVuY3lXZWlnaHQ6IDAuMyxcbiAgICAgICAgICByZWxpYWJpbGl0eVdlaWdodDogMC4zLFxuICAgICAgICAgIGNhcGFiaWxpdHlXZWlnaHQ6IDAuMixcbiAgICAgICAgICBjb3N0V2VpZ2h0OiAwLjJcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dHM6IHtcbiAgICAgICAgICBjb25uZWN0aW9uOiA1MDAwLFxuICAgICAgICAgIHJlcXVlc3Q6IDMwMDAwLFxuICAgICAgICAgIHJldHJ5OiAxMDAwXG4gICAgICAgIH0sXG4gICAgICAgIHJldHJ5UG9saWN5OiB7XG4gICAgICAgICAgbWF4QXR0ZW1wdHM6IDMsXG4gICAgICAgICAgYmFja29mZk11bHRpcGxpZXI6IDIsXG4gICAgICAgICAgbWF4QmFja29mZlRpbWU6IDEwMDAwXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICBtb2RlOiAnYmFsYW5jZWQnLFxuICAgICAgICBlbmFibGVDb25uZWN0aW9uUG9vbGluZzogdHJ1ZSxcbiAgICAgICAgbWF4Q29uY3VycmVudFJlcXVlc3RzOiA1LFxuICAgICAgICBlbmFibGVDb21wcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlQ2FjaGluZzogdHJ1ZSxcbiAgICAgICAgY2FjaGVTaXplOiAxMFxuICAgICAgfSxcbiAgICAgIG1vbml0b3Jpbmc6IHtcbiAgICAgICAgZW5hYmxlSGVhbHRoQ2hlY2tzOiB0cnVlLFxuICAgICAgICBoZWFsdGhDaGVja0ludGVydmFsOiAzMDAwMCxcbiAgICAgICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICAgICAgbWV0cmljc1JldGVudGlvbjogNyxcbiAgICAgICAgZW5hYmxlUHJlZGljdGl2ZUFsZXJ0czogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHVpOiB7XG4gICAgICAgIHRoZW1lOiAnYXV0bycsXG4gICAgICAgIGVuYWJsZUFuaW1hdGlvbnM6IHRydWUsXG4gICAgICAgIHNob3dBZHZhbmNlZE1ldHJpY3M6IGZhbHNlLFxuICAgICAgICBkYXNoYm9hcmRSZWZyZXNoUmF0ZTogMixcbiAgICAgICAgZW5hYmxlTm90aWZpY2F0aW9uczogdHJ1ZVxuICAgICAgfSxcbiAgICAgIHByaXZhY3k6IHtcbiAgICAgICAgZW5hYmxlQW5hbHl0aWNzOiB0cnVlLFxuICAgICAgICBzaGFyZVVzYWdlRGF0YTogZmFsc2UsXG4gICAgICAgIGRhdGFSZXRlbnRpb25EYXlzOiAzMFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIG9uQ29uZmlndXJhdGlvbkNoYW5nZSgpIHtcbiAgICB0aGlzLmhhc1Vuc2F2ZWRDaGFuZ2VzID0gdHJ1ZTtcbiAgICBcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlUmVhbFRpbWVWYWxpZGF0aW9uKSB7XG4gICAgICB0aGlzLnNjaGVkdWxlVmFsaWRhdGlvbigpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGVWYWxpZGF0aW9uKCkge1xuICAgIGlmICh0aGlzLnZhbGlkYXRpb25UaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy52YWxpZGF0aW9uVGltZW91dCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMudmFsaWRhdGlvblRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnZhbGlkYXRlQ29uZmlndXJhdGlvbigpO1xuICAgIH0sIDUwMCk7IC8vIERlYm91bmNlIHZhbGlkYXRpb25cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVDb25maWd1cmF0aW9uKCk6IFByb21pc2U8Q29uZmlndXJhdGlvblZhbGlkYXRpb25SZXN1bHQ+IHtcbiAgICBjb25zdCBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdID0gW107XG4gICAgY29uc3Qgd2FybmluZ3M6IFZhbGlkYXRpb25XYXJuaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSB0cmFuc3BvcnQgY29uZmlndXJhdGlvblxuICAgIGlmICh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5mYWxsYmFja0NoYWluLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBmaWVsZDogJ3RyYW5zcG9ydC5mYWxsYmFja0NoYWluJyxcbiAgICAgICAgbWVzc2FnZTogJ0F0IGxlYXN0IG9uZSB0cmFuc3BvcnQgbXVzdCBiZSBjb25maWd1cmVkIGluIHRoZSBmYWxsYmFjayBjaGFpbicsXG4gICAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxuICAgICAgICBzdWdnZXN0aW9uOiAnQWRkIGF0IGxlYXN0IG9uZSB0cmFuc3BvcnQgdG8gdGhlIGZhbGxiYWNrIGNoYWluJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHNlbGVjdGlvbiBjcml0ZXJpYVxuICAgIGNvbnN0IGNyaXRlcmlhID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQuc2VsZWN0aW9uQ3JpdGVyaWE7XG4gICAgY29uc3QgdG90YWxXZWlnaHQgPSBjcml0ZXJpYS5sYXRlbmN5V2VpZ2h0ICsgY3JpdGVyaWEucmVsaWFiaWxpdHlXZWlnaHQgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgY3JpdGVyaWEuY2FwYWJpbGl0eVdlaWdodCArIGNyaXRlcmlhLmNvc3RXZWlnaHQ7XG4gICAgXG4gICAgaWYgKE1hdGguYWJzKHRvdGFsV2VpZ2h0IC0gMSkgPiAwLjAxKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgZmllbGQ6ICd0cmFuc3BvcnQuc2VsZWN0aW9uQ3JpdGVyaWEnLFxuICAgICAgICBtZXNzYWdlOiAnU2VsZWN0aW9uIGNyaXRlcmlhIHdlaWdodHMgc2hvdWxkIHN1bSB0byAxMDAlJyxcbiAgICAgICAgaW1wYWN0OiAnbWVkaXVtJyxcbiAgICAgICAgcmVjb21tZW5kYXRpb246ICdBZGp1c3QgdGhlIHdlaWdodHMgc28gdGhleSB0b3RhbCAxMDAlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRpbWVvdXRzXG4gICAgY29uc3QgdGltZW91dHMgPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC50aW1lb3V0cztcbiAgICBpZiAodGltZW91dHMuY29ubmVjdGlvbiA+PSB0aW1lb3V0cy5yZXF1ZXN0KSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgZmllbGQ6ICd0cmFuc3BvcnQudGltZW91dHMnLFxuICAgICAgICBtZXNzYWdlOiAnQ29ubmVjdGlvbiB0aW1lb3V0IHNob3VsZCBiZSBsZXNzIHRoYW4gcmVxdWVzdCB0aW1lb3V0JyxcbiAgICAgICAgaW1wYWN0OiAnbG93JyxcbiAgICAgICAgcmVjb21tZW5kYXRpb246ICdTZXQgY29ubmVjdGlvbiB0aW1lb3V0IHRvIGJlIGxlc3MgdGhhbiByZXF1ZXN0IHRpbWVvdXQnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcGVyZm9ybWFuY2Ugc2V0dGluZ3NcbiAgICBpZiAodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5tYXhDb25jdXJyZW50UmVxdWVzdHMgPiAxMCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIGZpZWxkOiAncGVyZm9ybWFuY2UubWF4Q29uY3VycmVudFJlcXVlc3RzJyxcbiAgICAgICAgbWVzc2FnZTogJ0hpZ2ggY29uY3VycmVudCByZXF1ZXN0IGxpbWl0IG1heSBpbXBhY3QgcGVyZm9ybWFuY2UnLFxuICAgICAgICBpbXBhY3Q6ICdtZWRpdW0nLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogJ0NvbnNpZGVyIHJlZHVjaW5nIHRvIDUtMTAgZm9yIG9wdGltYWwgcGVyZm9ybWFuY2UnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gRXN0aW1hdGUgaW1wYWN0XG4gICAgY29uc3QgZXN0aW1hdGVkSW1wYWN0ID0gdGhpcy5lc3RpbWF0ZUNvbmZpZ3VyYXRpb25JbXBhY3QoKTtcbiAgICBcbiAgICBjb25zdCByZXN1bHQ6IENvbmZpZ3VyYXRpb25WYWxpZGF0aW9uUmVzdWx0ID0ge1xuICAgICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgIGVycm9ycyxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgZXN0aW1hdGVkSW1wYWN0XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnZhbGlkYXRpb25SZXN1bHQgPSByZXN1bHQ7XG4gICAgdGhpcy5yZW5kZXJWYWxpZGF0aW9uUmVzdWx0KHJlc3VsdCk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgZXN0aW1hdGVDb25maWd1cmF0aW9uSW1wYWN0KCkge1xuICAgIC8vIFNpbXBsZSBoZXVyaXN0aWMtYmFzZWQgaW1wYWN0IGVzdGltYXRpb25cbiAgICBsZXQgcGVyZm9ybWFuY2VDaGFuZ2UgPSAwO1xuICAgIGxldCByZWxpYWJpbGl0eUNoYW5nZSA9IDA7XG4gICAgbGV0IHJlc291cmNlVXNhZ2UgPSAwO1xuICAgIFxuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb247XG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2UgbW9kZSBpbXBhY3RcbiAgICBzd2l0Y2ggKGNvbmZpZy5wZXJmb3JtYW5jZS5tb2RlKSB7XG4gICAgICBjYXNlICdwZXJmb3JtYW5jZSc6XG4gICAgICAgIHBlcmZvcm1hbmNlQ2hhbmdlICs9IDIwO1xuICAgICAgICByZWxpYWJpbGl0eUNoYW5nZSAtPSA1O1xuICAgICAgICByZXNvdXJjZVVzYWdlICs9IDE1O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlbGlhYmlsaXR5JzpcbiAgICAgICAgcGVyZm9ybWFuY2VDaGFuZ2UgLT0gNTtcbiAgICAgICAgcmVsaWFiaWxpdHlDaGFuZ2UgKz0gMjA7XG4gICAgICAgIHJlc291cmNlVXNhZ2UgKz0gNTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OiAvLyBiYWxhbmNlZFxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgXG4gICAgLy8gQ29ubmVjdGlvbiBwb29saW5nIGltcGFjdFxuICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UuZW5hYmxlQ29ubmVjdGlvblBvb2xpbmcpIHtcbiAgICAgIHBlcmZvcm1hbmNlQ2hhbmdlICs9IDE1O1xuICAgICAgcmVzb3VyY2VVc2FnZSArPSAxMDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ29tcHJlc3Npb24gaW1wYWN0XG4gICAgaWYgKGNvbmZpZy5wZXJmb3JtYW5jZS5lbmFibGVDb21wcmVzc2lvbikge1xuICAgICAgcGVyZm9ybWFuY2VDaGFuZ2UgKz0gNTtcbiAgICAgIHJlc291cmNlVXNhZ2UgKz0gNTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FjaGluZyBpbXBhY3RcbiAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlLmVuYWJsZUNhY2hpbmcpIHtcbiAgICAgIHBlcmZvcm1hbmNlQ2hhbmdlICs9IDEwO1xuICAgICAgcmVzb3VyY2VVc2FnZSArPSBjb25maWcucGVyZm9ybWFuY2UuY2FjaGVTaXplO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcGVyZm9ybWFuY2VDaGFuZ2U6IE1hdGgubWF4KC01MCwgTWF0aC5taW4oNTAsIHBlcmZvcm1hbmNlQ2hhbmdlKSksXG4gICAgICByZWxpYWJpbGl0eUNoYW5nZTogTWF0aC5tYXgoLTUwLCBNYXRoLm1pbig1MCwgcmVsaWFiaWxpdHlDaGFuZ2UpKSxcbiAgICAgIHJlc291cmNlVXNhZ2U6IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgcmVzb3VyY2VVc2FnZSkpXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVmFsaWRhdGlvblJlc3VsdChyZXN1bHQ6IENvbmZpZ3VyYXRpb25WYWxpZGF0aW9uUmVzdWx0KSB7XG4gICAgdGhpcy52YWxpZGF0aW9uQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgaWYgKHJlc3VsdC5pc1ZhbGlkICYmIHJlc3VsdC53YXJuaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSB0aGlzLnZhbGlkYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLXN1Y2Nlc3MnKTtcbiAgICAgIHN1Y2Nlc3MuY3JlYXRlU3Bhbih7IHRleHQ6ICfinIUgQ29uZmlndXJhdGlvbiBpcyB2YWxpZCcsIGNsczogJ3ZhbGlkYXRpb24tbWVzc2FnZScgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3cgZXJyb3JzXG4gICAgICByZXN1bHQuZXJyb3JzLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsID0gdGhpcy52YWxpZGF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdigndmFsaWRhdGlvbi1lcnJvcicpO1xuICAgICAgICBlcnJvckVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAn4p2MJywgY2xzOiAndmFsaWRhdGlvbi1pY29uJyB9KTtcbiAgICAgICAgZXJyb3JFbC5jcmVhdGVTcGFuKHsgdGV4dDogZXJyb3IubWVzc2FnZSwgY2xzOiAndmFsaWRhdGlvbi1tZXNzYWdlJyB9KTtcbiAgICAgICAgaWYgKGVycm9yLnN1Z2dlc3Rpb24pIHtcbiAgICAgICAgICBlcnJvckVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBlcnJvci5zdWdnZXN0aW9uLCBjbHM6ICd2YWxpZGF0aW9uLXN1Z2dlc3Rpb24nIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdyB3YXJuaW5nc1xuICAgICAgcmVzdWx0Lndhcm5pbmdzLmZvckVhY2god2FybmluZyA9PiB7XG4gICAgICAgIGNvbnN0IHdhcm5pbmdFbCA9IHRoaXMudmFsaWRhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ3ZhbGlkYXRpb24td2FybmluZycpO1xuICAgICAgICB3YXJuaW5nRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICfimqDvuI8nLCBjbHM6ICd2YWxpZGF0aW9uLWljb24nIH0pO1xuICAgICAgICB3YXJuaW5nRWwuY3JlYXRlU3Bhbih7IHRleHQ6IHdhcm5pbmcubWVzc2FnZSwgY2xzOiAndmFsaWRhdGlvbi1tZXNzYWdlJyB9KTtcbiAgICAgICAgaWYgKHdhcm5pbmcucmVjb21tZW5kYXRpb24pIHtcbiAgICAgICAgICB3YXJuaW5nRWwuY3JlYXRlU3Bhbih7IHRleHQ6IHdhcm5pbmcucmVjb21tZW5kYXRpb24sIGNsczogJ3ZhbGlkYXRpb24tc3VnZ2VzdGlvbicgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaG93IGVzdGltYXRlZCBpbXBhY3RcbiAgICBjb25zdCBpbXBhY3QgPSByZXN1bHQuZXN0aW1hdGVkSW1wYWN0O1xuICAgIGNvbnN0IGltcGFjdEVsID0gdGhpcy52YWxpZGF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdigndmFsaWRhdGlvbi1pbXBhY3QnKTtcbiAgICBpbXBhY3RFbC5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdFc3RpbWF0ZWQgSW1wYWN0OicgfSk7XG4gICAgXG4gICAgY29uc3QgaW1wYWN0R3JpZCA9IGltcGFjdEVsLmNyZWF0ZURpdignaW1wYWN0LWdyaWQnKTtcbiAgICBcbiAgICBjb25zdCBwZXJmSW1wYWN0ID0gaW1wYWN0R3JpZC5jcmVhdGVEaXYoJ2ltcGFjdC1pdGVtJyk7XG4gICAgcGVyZkltcGFjdC5jcmVhdGVTcGFuKHsgdGV4dDogJ1BlcmZvcm1hbmNlOicsIGNsczogJ2ltcGFjdC1sYWJlbCcgfSk7XG4gICAgcGVyZkltcGFjdC5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgJHtpbXBhY3QucGVyZm9ybWFuY2VDaGFuZ2UgPiAwID8gJysnIDogJyd9JHtpbXBhY3QucGVyZm9ybWFuY2VDaGFuZ2V9JWAsXG4gICAgICBjbHM6IGBpbXBhY3QtdmFsdWUgJHtpbXBhY3QucGVyZm9ybWFuY2VDaGFuZ2UgPiAwID8gJ3Bvc2l0aXZlJyA6IGltcGFjdC5wZXJmb3JtYW5jZUNoYW5nZSA8IDAgPyAnbmVnYXRpdmUnIDogJ25ldXRyYWwnfWBcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCByZWxpYWJpbGl0eUltcGFjdCA9IGltcGFjdEdyaWQuY3JlYXRlRGl2KCdpbXBhY3QtaXRlbScpO1xuICAgIHJlbGlhYmlsaXR5SW1wYWN0LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVsaWFiaWxpdHk6JywgY2xzOiAnaW1wYWN0LWxhYmVsJyB9KTtcbiAgICByZWxpYWJpbGl0eUltcGFjdC5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgJHtpbXBhY3QucmVsaWFiaWxpdHlDaGFuZ2UgPiAwID8gJysnIDogJyd9JHtpbXBhY3QucmVsaWFiaWxpdHlDaGFuZ2V9JWAsXG4gICAgICBjbHM6IGBpbXBhY3QtdmFsdWUgJHtpbXBhY3QucmVsaWFiaWxpdHlDaGFuZ2UgPiAwID8gJ3Bvc2l0aXZlJyA6IGltcGFjdC5yZWxpYWJpbGl0eUNoYW5nZSA8IDAgPyAnbmVnYXRpdmUnIDogJ25ldXRyYWwnfWBcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCByZXNvdXJjZUltcGFjdCA9IGltcGFjdEdyaWQuY3JlYXRlRGl2KCdpbXBhY3QtaXRlbScpO1xuICAgIHJlc291cmNlSW1wYWN0LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVzb3VyY2UgVXNhZ2U6JywgY2xzOiAnaW1wYWN0LWxhYmVsJyB9KTtcbiAgICByZXNvdXJjZUltcGFjdC5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgJHtpbXBhY3QucmVzb3VyY2VVc2FnZX0lYCxcbiAgICAgIGNsczogYGltcGFjdC12YWx1ZSAke2ltcGFjdC5yZXNvdXJjZVVzYWdlID4gNzAgPyAnaGlnaCcgOiBpbXBhY3QucmVzb3VyY2VVc2FnZSA+IDMwID8gJ21lZGl1bScgOiAnbG93J31gXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclZhbGlkYXRpb25QbGFjZWhvbGRlcigpIHtcbiAgICB0aGlzLnZhbGlkYXRpb25Db250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0NvbmZpZ3VyYXRpb24gdmFsaWRhdGlvbiB3aWxsIGFwcGVhciBoZXJlLi4uJyxcbiAgICAgIGNsczogJ3ZhbGlkYXRpb24tcGxhY2Vob2xkZXInXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVByZXZpZXcoKSB7XG4gICAgdGhpcy5wcmV2aWV3Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgY29uc3QgcHJldmlldyA9IHRoaXMucHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgncHJlJywgeyBjbHM6ICdjb25maWctcHJldmlldycgfSk7XG4gICAgcHJldmlldy50ZXh0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24sIG51bGwsIDIpO1xuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVTZWxlY3Rpb25Dcml0ZXJpYSgpIHtcbiAgICBjb25zdCBjcml0ZXJpYSA9IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LnNlbGVjdGlvbkNyaXRlcmlhO1xuICAgIGNvbnN0IHRvdGFsID0gY3JpdGVyaWEubGF0ZW5jeVdlaWdodCArIGNyaXRlcmlhLnJlbGlhYmlsaXR5V2VpZ2h0ICsgXG4gICAgICAgICAgICAgICAgICBjcml0ZXJpYS5jYXBhYmlsaXR5V2VpZ2h0ICsgY3JpdGVyaWEuY29zdFdlaWdodDtcbiAgICBcbiAgICBpZiAodG90YWwgPiAwKSB7XG4gICAgICBjcml0ZXJpYS5sYXRlbmN5V2VpZ2h0IC89IHRvdGFsO1xuICAgICAgY3JpdGVyaWEucmVsaWFiaWxpdHlXZWlnaHQgLz0gdG90YWw7XG4gICAgICBjcml0ZXJpYS5jYXBhYmlsaXR5V2VpZ2h0IC89IHRvdGFsO1xuICAgICAgY3JpdGVyaWEuY29zdFdlaWdodCAvPSB0b3RhbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFwcGx5UGVyZm9ybWFuY2VNb2RlUHJlc2V0KG1vZGU6ICdwZXJmb3JtYW5jZScgfCAnYmFsYW5jZWQnIHwgJ3JlbGlhYmlsaXR5Jykge1xuICAgIGNvbnN0IHBlcmYgPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlO1xuICAgIFxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAncGVyZm9ybWFuY2UnOlxuICAgICAgICBwZXJmLmVuYWJsZUNvbm5lY3Rpb25Qb29saW5nID0gdHJ1ZTtcbiAgICAgICAgcGVyZi5tYXhDb25jdXJyZW50UmVxdWVzdHMgPSAxMDtcbiAgICAgICAgcGVyZi5lbmFibGVDb21wcmVzc2lvbiA9IGZhbHNlO1xuICAgICAgICBwZXJmLmVuYWJsZUNhY2hpbmcgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlbGlhYmlsaXR5JzpcbiAgICAgICAgcGVyZi5lbmFibGVDb25uZWN0aW9uUG9vbGluZyA9IHRydWU7XG4gICAgICAgIHBlcmYubWF4Q29uY3VycmVudFJlcXVlc3RzID0gMztcbiAgICAgICAgcGVyZi5lbmFibGVDb21wcmVzc2lvbiA9IHRydWU7XG4gICAgICAgIHBlcmYuZW5hYmxlQ2FjaGluZyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vIGJhbGFuY2VkXG4gICAgICAgIHBlcmYuZW5hYmxlQ29ubmVjdGlvblBvb2xpbmcgPSB0cnVlO1xuICAgICAgICBwZXJmLm1heENvbmN1cnJlbnRSZXF1ZXN0cyA9IDU7XG4gICAgICAgIHBlcmYuZW5hYmxlQ29tcHJlc3Npb24gPSB0cnVlO1xuICAgICAgICBwZXJmLmVuYWJsZUNhY2hpbmcgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUV4cGVydE9wdGlvbnNWaXNpYmlsaXR5KCkge1xuICAgIGNvbnN0IGV4cGVydE9wdGlvbnMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5leHBlcnQtb3B0aW9uJyk7XG4gICAgZXhwZXJ0T3B0aW9ucy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5zaG93RXhwZXJ0T3B0aW9ucykge1xuICAgICAgICBlbC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVByb2ZpbGVTZWxlY3RvcigpIHtcbiAgICB0aGlzLnByb2ZpbGVTZWxlY3Rvci5lbXB0eSgpO1xuICAgIFxuICAgIC8vIEFkZCBkZWZhdWx0IHByb2ZpbGVcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9uID0gdGhpcy5wcm9maWxlU2VsZWN0b3IuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICdkZWZhdWx0JyB9KTtcbiAgICBkZWZhdWx0T3B0aW9uLnRleHRDb250ZW50ID0gJ0RlZmF1bHQgQ29uZmlndXJhdGlvbic7XG4gICAgXG4gICAgLy8gQWRkIGN1c3RvbSBwcm9maWxlc1xuICAgIHRoaXMucHJvZmlsZXMuZm9yRWFjaChwcm9maWxlID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMucHJvZmlsZVNlbGVjdG9yLmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiBwcm9maWxlLmlkIH0pO1xuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gcHJvZmlsZS5uYW1lO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2FkUHJvZmlsZXMoKSB7XG4gICAgLy8gTG9hZCBzYXZlZCBwcm9maWxlcyBmcm9tIHN0b3JhZ2VcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2F2ZWRQcm9maWxlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpZ3VyYXRpb25Qcm9maWxlcyB8fCBbXTtcbiAgICAgIHRoaXMucHJvZmlsZXMgPSBzYXZlZFByb2ZpbGVzLm1hcCgocDogYW55KSA9PiAoe1xuICAgICAgICAuLi5wLFxuICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZShwLmNyZWF0ZWQpLFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKHAubGFzdE1vZGlmaWVkKVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb25maWd1cmF0aW9uIHByb2ZpbGVzOicsIGVycm9yKTtcbiAgICAgIHRoaXMucHJvZmlsZXMgPSBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxvYWRQcm9maWxlKHByb2ZpbGVJZDogc3RyaW5nKSB7XG4gICAgaWYgKHByb2ZpbGVJZCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uID0gdGhpcy5nZXREZWZhdWx0Q29uZmlndXJhdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9maWxlID0gdGhpcy5wcm9maWxlcy5maW5kKHAgPT4gcC5pZCA9PT0gcHJvZmlsZUlkKTtcbiAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gPSB7IC4uLnByb2ZpbGUuY29uZmlnIH07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyU2V0dGluZ3MoKTtcbiAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93U2F2ZVByb2ZpbGVNb2RhbCgpIHtcbiAgICBjb25zdCBuYW1lID0gcHJvbXB0KCdFbnRlciBwcm9maWxlIG5hbWU6Jyk7XG4gICAgaWYgKCFuYW1lKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBwcm9tcHQoJ0VudGVyIHByb2ZpbGUgZGVzY3JpcHRpb24gKG9wdGlvbmFsKTonKSB8fCAnJztcbiAgICB0aGlzLnNhdmVBc1Byb2ZpbGUobmFtZSwgZGVzY3JpcHRpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBzYXZlQXNQcm9maWxlKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZykge1xuICAgIGNvbnN0IHByb2ZpbGU6IENvbmZpZ3VyYXRpb25Qcm9maWxlID0ge1xuICAgICAgaWQ6IGBwcm9maWxlLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgY29uZmlnOiB7IC4uLnRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gfSxcbiAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKCksXG4gICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICBpc0RlZmF1bHQ6IGZhbHNlXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnByb2ZpbGVzLnB1c2gocHJvZmlsZSk7XG4gICAgdGhpcy51cGRhdGVQcm9maWxlU2VsZWN0b3IoKTtcbiAgICB0aGlzLnNhdmVQcm9maWxlcygpO1xuICAgIFxuICAgIG5ldyBOb3RpY2UoYFByb2ZpbGUgXCIke25hbWV9XCIgc2F2ZWQgc3VjY2Vzc2Z1bGx5YCk7XG4gIH1cblxuICBwcml2YXRlIGRlbGV0ZUN1cnJlbnRQcm9maWxlKCkge1xuICAgIGNvbnN0IGN1cnJlbnRQcm9maWxlSWQgPSB0aGlzLnByb2ZpbGVTZWxlY3Rvci52YWx1ZTtcbiAgICBpZiAoY3VycmVudFByb2ZpbGVJZCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICBuZXcgTm90aWNlKCdDYW5ub3QgZGVsZXRlIHRoZSBkZWZhdWx0IHByb2ZpbGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcHJvZmlsZSA9IHRoaXMucHJvZmlsZXMuZmluZChwID0+IHAuaWQgPT09IGN1cnJlbnRQcm9maWxlSWQpO1xuICAgIGlmICghcHJvZmlsZSkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGNvbmZpcm1lZCA9IGNvbmZpcm0oYERlbGV0ZSBwcm9maWxlIFwiJHtwcm9maWxlLm5hbWV9XCI/YCk7XG4gICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgdGhpcy5wcm9maWxlcyA9IHRoaXMucHJvZmlsZXMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gY3VycmVudFByb2ZpbGVJZCk7XG4gICAgICB0aGlzLnVwZGF0ZVByb2ZpbGVTZWxlY3RvcigpO1xuICAgICAgdGhpcy5zYXZlUHJvZmlsZXMoKTtcbiAgICAgIHRoaXMubG9hZFByb2ZpbGUoJ2RlZmF1bHQnKTtcbiAgICAgIFxuICAgICAgbmV3IE5vdGljZShgUHJvZmlsZSBcIiR7cHJvZmlsZS5uYW1lfVwiIGRlbGV0ZWRgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVDb25maWd1cmF0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0ZUNvbmZpZ3VyYXRpb24oKTtcbiAgICAgIFxuICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgY29uc3QgcHJvY2VlZCA9IGNvbmZpcm0oJ0NvbmZpZ3VyYXRpb24gaGFzIGVycm9ycy4gU2F2ZSBhbnl3YXk/Jyk7XG4gICAgICAgIGlmICghcHJvY2VlZCkgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTYXZlIHRvIHBsdWdpbiBzZXR0aW5nc1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWR2YW5jZWRDb25maWd1cmF0aW9uID0geyAuLi50aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uIH07XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIFxuICAgICAgdGhpcy5oYXNVbnNhdmVkQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgbmV3IE5vdGljZSgn4pyFIENvbmZpZ3VyYXRpb24gc2F2ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgY29uZmlndXJhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCfinYwgRmFpbGVkIHRvIHNhdmUgY29uZmlndXJhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRUb0RlZmF1bHRzKCkge1xuICAgIGNvbnN0IGNvbmZpcm1lZCA9IGNvbmZpcm0oJ1Jlc2V0IGFsbCBzZXR0aW5ncyB0byBkZWZhdWx0IHZhbHVlcz8gVGhpcyBjYW5ub3QgYmUgdW5kb25lLicpO1xuICAgIGlmIChjb25maXJtZWQpIHtcbiAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gPSB0aGlzLmdldERlZmF1bHRDb25maWd1cmF0aW9uKCk7XG4gICAgICB0aGlzLnJlbmRlclNldHRpbmdzKCk7XG4gICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgbmV3IE5vdGljZSgnQ29uZmlndXJhdGlvbiByZXNldCB0byBkZWZhdWx0cycpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdGVzdENvbmZpZ3VyYXRpb24oKSB7XG4gICAgbmV3IE5vdGljZSgnVGVzdGluZyBjb25maWd1cmF0aW9uLi4uJyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbXVsYXRlIGNvbmZpZ3VyYXRpb24gdGVzdFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgIFxuICAgICAgY29uc3QgdGVzdFJlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogTWF0aC5yYW5kb20oKSA+IDAuMiwgLy8gODAlIHN1Y2Nlc3MgcmF0ZSBmb3IgZGVtb1xuICAgICAgICBsYXRlbmN5OiBNYXRoLnJhbmRvbSgpICogMjAwICsgNTAsXG4gICAgICAgIGVycm9yczogTWF0aC5yYW5kb20oKSA+IDAuOCA/IFsnQ29ubmVjdGlvbiB0aW1lb3V0J10gOiBbXVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgaWYgKHRlc3RSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKGDinIUgQ29uZmlndXJhdGlvbiB0ZXN0IHBhc3NlZCAoJHt0ZXN0UmVzdWx0LmxhdGVuY3kudG9GaXhlZCgwKX1tcyBhdmVyYWdlKWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShg4p2MIENvbmZpZ3VyYXRpb24gdGVzdCBmYWlsZWQ6ICR7dGVzdFJlc3VsdC5lcnJvcnMuam9pbignLCAnKX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb25maWd1cmF0aW9uIHRlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KdjCBDb25maWd1cmF0aW9uIHRlc3QgZmFpbGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBleHBvcnRDb25maWd1cmF0aW9uKCkge1xuICAgIGNvbnN0IGV4cG9ydERhdGEgPSB7XG4gICAgICB2ZXJzaW9uOiAnMS4wJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgY29uZmlndXJhdGlvbjogdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbixcbiAgICAgIHByb2ZpbGVzOiB0aGlzLnByb2ZpbGVzXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGV4cG9ydERhdGEsIG51bGwsIDIpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGEuaHJlZiA9IHVybDtcbiAgICBhLmRvd25sb2FkID0gYHZhdWx0cGlsb3QtY29uZmlnLSR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19Lmpzb25gO1xuICAgIGEuY2xpY2soKTtcbiAgICBcbiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgbmV3IE5vdGljZSgnQ29uZmlndXJhdGlvbiBleHBvcnRlZCBzdWNjZXNzZnVsbHknKTtcbiAgfVxuXG4gIHByaXZhdGUgaW1wb3J0Q29uZmlndXJhdGlvbigpIHtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgaW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICBpbnB1dC5hY2NlcHQgPSAnLmpzb24nO1xuICAgIFxuICAgIGlucHV0Lm9uY2hhbmdlID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXM/LlswXTtcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZS50YXJnZXQ/LnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkYXRhLmNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gPSBkYXRhLmNvbmZpZ3VyYXRpb247XG4gICAgICAgICAgICB0aGlzLnJlbmRlclNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29uZmlndXJhdGlvbiBpbXBvcnRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRhdGEucHJvZmlsZXMpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZmlsZXMgPSBkYXRhLnByb2ZpbGVzLm1hcCgocDogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAuLi5wLFxuICAgICAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZShwLmNyZWF0ZWQpLFxuICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKHAubGFzdE1vZGlmaWVkKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9maWxlU2VsZWN0b3IoKTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZVByb2ZpbGVzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbXBvcnQgY29uZmlndXJhdGlvbjonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZSgn4p2MIEZhaWxlZCB0byBpbXBvcnQgY29uZmlndXJhdGlvbjogSW52YWxpZCBmaWxlIGZvcm1hdCcpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICB9O1xuICAgIFxuICAgIGlucHV0LmNsaWNrKCk7XG4gIH1cblxuICBwcml2YXRlIHNhdmVQcm9maWxlcygpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlndXJhdGlvblByb2ZpbGVzID0gdGhpcy5wcm9maWxlcztcbiAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBwcm9maWxlczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFJlYWxUaW1lVmFsaWRhdGlvbigpIHtcbiAgICAvLyBSZWFsLXRpbWUgdmFsaWRhdGlvbiBpcyBoYW5kbGVkIGJ5IG9uQ29uZmlndXJhdGlvbkNoYW5nZVxuICAgIC8vIFRoaXMgY291bGQgYmUgZXh0ZW5kZWQgd2l0aCBtb3JlIHNvcGhpc3RpY2F0ZWQgdmFsaWRhdGlvblxuICAgIGNvbnNvbGUubG9nKCdSZWFsLXRpbWUgdmFsaWRhdGlvbiBlbmFibGVkJyk7XG4gIH1cbn1cbiIsIi8qKlxuICogUGhhc2UzSW50ZWdyYXRpb24gLSBNYWluIGludGVncmF0aW9uIGNvbXBvbmVudCBmb3IgVmF1bHRQaWxvdCBQaGFzZSAzIGZlYXR1cmVzXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBTZXR0aW5nLCBOb3RpY2UsIFdvcmtzcGFjZUxlYWYsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBPbmJvYXJkaW5nV2l6YXJkIH0gZnJvbSAnLi9PbmJvYXJkaW5nV2l6YXJkJztcbmltcG9ydCB7IFRyYW5zcG9ydERhc2hib2FyZCB9IGZyb20gJy4vVHJhbnNwb3J0RGFzaGJvYXJkJztcbmltcG9ydCB7IEFkdmFuY2VkU2V0dGluZ3MgfSBmcm9tICcuL0FkdmFuY2VkU2V0dGluZ3MnO1xuaW1wb3J0IHsgUmVjb21tZW5kYXRpb25FbmdpbmUsIFJlY29tbWVuZGF0aW9uQ29udGV4dCwgUmVjb21tZW5kYXRpb24gfSBmcm9tICcuLi9zZXJ2aWNlcy9SZWNvbW1lbmRhdGlvbkVuZ2luZSc7XG5pbXBvcnQgeyBUcmFuc3BvcnRUeXBlIH0gZnJvbSAnLi4vZGV2cGlwZS90cmFuc3BvcnRzL0RldlBpcGVUcmFuc3BvcnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBoYXNlM0NvbmZpZyB7XG4gIGVuYWJsZU9uYm9hcmRpbmc6IGJvb2xlYW47XG4gIGVuYWJsZURhc2hib2FyZDogYm9vbGVhbjtcbiAgZW5hYmxlUmVjb21tZW5kYXRpb25zOiBib29sZWFuO1xuICBlbmFibGVBZHZhbmNlZFNldHRpbmdzOiBib29sZWFuO1xuICBhdXRvU2hvd09uYm9hcmRpbmc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBQaGFzZTNJbnRlZ3JhdGlvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGNvbmZpZzogUGhhc2UzQ29uZmlnO1xuICBwcml2YXRlIHJlY29tbWVuZGF0aW9uRW5naW5lOiBSZWNvbW1lbmRhdGlvbkVuZ2luZTtcbiAgXG4gIC8vIENvbXBvbmVudCBpbnN0YW5jZXNcbiAgcHJpdmF0ZSBvbmJvYXJkaW5nV2l6YXJkPzogT25ib2FyZGluZ1dpemFyZDtcbiAgcHJpdmF0ZSB0cmFuc3BvcnREYXNoYm9hcmQ/OiBUcmFuc3BvcnREYXNoYm9hcmQ7XG4gIHByaXZhdGUgYWR2YW5jZWRTZXR0aW5ncz86IEFkdmFuY2VkU2V0dGluZ3M7XG4gIFxuICAvLyBVSSBjb250YWluZXJzXG4gIHByaXZhdGUgZGFzaGJvYXJkQ29udGFpbmVyPzogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgc2V0dGluZ3NDb250YWluZXI/OiBIVE1MRWxlbWVudDtcbiAgXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbiwgY29uZmlnOiBQYXJ0aWFsPFBoYXNlM0NvbmZpZz4gPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBlbmFibGVPbmJvYXJkaW5nOiB0cnVlLFxuICAgICAgZW5hYmxlRGFzaGJvYXJkOiB0cnVlLFxuICAgICAgZW5hYmxlUmVjb21tZW5kYXRpb25zOiB0cnVlLFxuICAgICAgZW5hYmxlQWR2YW5jZWRTZXR0aW5nczogdHJ1ZSxcbiAgICAgIGF1dG9TaG93T25ib2FyZGluZzogIXBsdWdpbi5zZXR0aW5ncy5vbmJvYXJkaW5nQ29tcGxldGUsXG4gICAgICAuLi5jb25maWdcbiAgICB9O1xuICAgIFxuICAgIHRoaXMucmVjb21tZW5kYXRpb25FbmdpbmUgPSBuZXcgUmVjb21tZW5kYXRpb25FbmdpbmUoKTtcbiAgfVxuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnUGhhc2UgMyBJbnRlZ3JhdGlvbiBsb2FkaW5nLi4uJyk7XG4gICAgXG4gICAgLy8gUmVnaXN0ZXIgY29tbWFuZHNcbiAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZHMoKTtcbiAgICBcbiAgICAvLyBTZXR1cCBVSSBjb21wb25lbnRzXG4gICAgYXdhaXQgdGhpcy5zZXR1cENvbXBvbmVudHMoKTtcbiAgICBcbiAgICAvLyBTaG93IG9uYm9hcmRpbmcgaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMuY29uZmlnLmF1dG9TaG93T25ib2FyZGluZykge1xuICAgICAgdGhpcy5zaG93T25ib2FyZGluZygpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdGFydCByZWNvbW1lbmRhdGlvbiBlbmdpbmVcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlUmVjb21tZW5kYXRpb25zKSB7XG4gICAgICB0aGlzLnN0YXJ0UmVjb21tZW5kYXRpb25FbmdpbmUoKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1BoYXNlIDMgSW50ZWdyYXRpb24gbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1BoYXNlIDMgSW50ZWdyYXRpb24gdW5sb2FkaW5nLi4uJyk7XG4gICAgXG4gICAgLy8gQ2xlYW51cCBjb21wb25lbnRzXG4gICAgdGhpcy5jbGVhbnVwKCk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyQ29tbWFuZHMoKSB7XG4gICAgLy8gT25ib2FyZGluZyBjb21tYW5kXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZU9uYm9hcmRpbmcpIHtcbiAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogJ3Nob3ctb25ib2FyZGluZycsXG4gICAgICAgIG5hbWU6ICdTaG93IFNldHVwIFdpemFyZCcsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNob3dPbmJvYXJkaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBEYXNoYm9hcmQgY29tbWFuZFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVEYXNoYm9hcmQpIHtcbiAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogJ3Nob3ctZGFzaGJvYXJkJyxcbiAgICAgICAgbmFtZTogJ1Nob3cgVHJhbnNwb3J0IERhc2hib2FyZCcsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNob3dEYXNoYm9hcmQoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkdmFuY2VkIHNldHRpbmdzIGNvbW1hbmRcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlQWR2YW5jZWRTZXR0aW5ncykge1xuICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2hvdy1hZHZhbmNlZC1zZXR0aW5ncycsXG4gICAgICAgIG5hbWU6ICdTaG93IEFkdmFuY2VkIFNldHRpbmdzJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2hvd0FkdmFuY2VkU2V0dGluZ3MoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlY29tbWVuZGF0aW9ucyBjb21tYW5kXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZVJlY29tbWVuZGF0aW9ucykge1xuICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2hvdy1yZWNvbW1lbmRhdGlvbnMnLFxuICAgICAgICBuYW1lOiAnU2hvdyBBSSBSZWNvbW1lbmRhdGlvbnMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zaG93UmVjb21tZW5kYXRpb25zKClcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBRdWljayBvcHRpbWl6YXRpb24gY29tbWFuZFxuICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdxdWljay1vcHRpbWl6ZScsXG4gICAgICBuYW1lOiAnUXVpY2sgUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnF1aWNrT3B0aW1pemUoKVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZXR1cENvbXBvbmVudHMoKSB7XG4gICAgLy8gTG9hZCB0aGUgUGhhc2UgMyBDU1NcbiAgICB0aGlzLmxvYWRQaGFzZTNTdHlsZXMoKTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGRhc2hib2FyZCBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZURhc2hib2FyZCkge1xuICAgICAgdGhpcy5zZXR1cERhc2hib2FyZCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIGFkdmFuY2VkIHNldHRpbmdzIGlmIGVuYWJsZWRcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlQWR2YW5jZWRTZXR0aW5ncykge1xuICAgICAgdGhpcy5zZXR1cEFkdmFuY2VkU2V0dGluZ3MoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxvYWRQaGFzZTNTdHlsZXMoKSB7XG4gICAgLy8gQWRkIHRoZSBQaGFzZSAzIHN0eWxlcyBkaXJlY3RseSBhcyBpbmxpbmUgc3R5bGVzXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXBoYXNlMy1zdHlsZXMnKSkge1xuICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IGxvYWRlZFxuICAgIH1cbiAgICBcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3QtcGhhc2UzLXN0eWxlcyc7XG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbi8qIFZhdWx0UGlsb3QgUGhhc2UgMyBDb21wb25lbnQgU3R5bGVzICovXG5cbi8qIE9uYm9hcmRpbmcgV2l6YXJkIFN0eWxlcyAqL1xuLnZhdWx0cGlsb3Qtb25ib2FyZGluZy1tb2RhbCB7XG4gIHdpZHRoOiA2MDBweDtcbiAgbWF4LXdpZHRoOiA5MHZ3O1xufVxuXG4udmF1bHRwaWxvdC1vbmJvYXJkaW5nIHtcbiAgbWF4LWhlaWdodDogODB2aDtcbiAgb3ZlcmZsb3cteTogYXV0bztcbn1cblxuLm9uYm9hcmRpbmctaGVhZGVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLm9uYm9hcmRpbmctc3VidGl0bGUge1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIG1hcmdpbi10b3A6IDVweDtcbn1cblxuLm9uYm9hcmRpbmctcHJvZ3Jlc3Mge1xuICBtYXJnaW4tYm90dG9tOiAyNXB4O1xufVxuXG4ucHJvZ3Jlc3Mtc3RlcHMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZ2FwOiAxNXB4O1xuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xufVxuXG4ucHJvZ3Jlc3Mtc3RlcCB7XG4gIHdpZHRoOiAzMnB4O1xuICBoZWlnaHQ6IDMycHg7XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBmb250LXNpemU6IDE0cHg7XG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XG59XG5cbi5wcm9ncmVzcy1zdGVwLmFjdGl2ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG59XG5cbi5wcm9ncmVzcy1zdGVwLmNvbXBsZXRlZCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ucHJvZ3Jlc3Mtc3RlcC5pbmFjdGl2ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4ucHJvZ3Jlc3MtYmFyIHtcbiAgaGVpZ2h0OiA0cHg7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4ucHJvZ3Jlc3MtZmlsbCB7XG4gIGhlaWdodDogMTAwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xufVxuXG4ub25ib2FyZGluZy1zdGVwLWNvbnRhaW5lciB7XG4gIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG4ub25ib2FyZGluZy1zdGVwIHtcbiAgcGFkZGluZzogMjBweCAwO1xufVxuXG4ub25ib2FyZGluZy1uYXZpZ2F0aW9uIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBnYXA6IDEwcHg7XG4gIHBhZGRpbmctdG9wOiAyMHB4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4vKiBUcmFuc3BvcnQgRGFzaGJvYXJkIFN0eWxlcyAqL1xuLnRyYW5zcG9ydC1kYXNoYm9hcmQge1xuICBwYWRkaW5nOiAyMHB4O1xuICBtYXgtd2lkdGg6IDEwMCU7XG4gIG92ZXJmbG93LXg6IGF1dG87XG59XG5cbi5kYXNoYm9hcmQtaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAyNXB4O1xuICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLnN0YXR1cy1jYXJkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogMTZweDtcbiAgbWFyZ2luOiA4cHggMDtcbn1cblxuLnN0YXR1cy1jYXJkLmhlYWx0aHkge1xuICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvbG9yLWdyZWVuKTtcbn1cblxuLnN0YXR1cy1jYXJkLndhcm5pbmcge1xuICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvbG9yLW9yYW5nZSk7XG59XG5cbi5zdGF0dXMtY2FyZC5lcnJvciB7XG4gIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29sb3ItcmVkKTtcbn1cblxuLm1ldHJpY3MtZ3JpZCB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpO1xuICBnYXA6IDE1cHg7XG4gIG1hcmdpbjogMjBweCAwO1xufVxuXG4ubWV0cmljLWNhcmQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgcGFkZGluZzogMTVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ubWV0cmljLXZhbHVlIHtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi5tZXRyaWMtbGFiZWwge1xuICBmb250LXNpemU6IDEycHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgbWFyZ2luLXRvcDogNXB4O1xufVxuXG4vKiBBZHZhbmNlZCBTZXR0aW5ncyBTdHlsZXMgKi9cbi5hZHZhbmNlZC1zZXR0aW5ncyB7XG4gIHBhZGRpbmc6IDIwcHg7XG59XG5cbi5zZXR0aW5ncy1zZWN0aW9uIHtcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgcGFkZGluZy1ib3R0b206IDIwcHg7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi5zZXR0aW5ncy1zZWN0aW9uOmxhc3QtY2hpbGQge1xuICBib3JkZXItYm90dG9tOiBub25lO1xufVxuXG4uc2VjdGlvbi1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XG59XG5cbi5zZWN0aW9uLXRpdGxlIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBmb250LXdlaWdodDogNjAwO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4ucHJvZmlsZS1tYW5hZ2VyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIHBhZGRpbmc6IDE1cHg7XG4gIG1hcmdpbjogMTVweCAwO1xufVxuXG4ucHJvZmlsZXMtbGlzdCB7XG4gIG1hcmdpbjogMTVweCAwO1xufVxuXG4ucHJvZmlsZS1pdGVtIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiA4cHggMTJweDtcbiAgbWFyZ2luOiA1cHggMDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG59XG5cbi5wcm9maWxlLWl0ZW0uYWN0aXZlIHtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLmNvbmZpZy1ncm91cCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBwYWRkaW5nOiAxNXB4O1xuICBtYXJnaW46IDEwcHggMDtcbn1cblxuLmNvbmZpZy1yb3cge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbjogMTBweCAwO1xufVxuXG4udmFsaWRhdGlvbi1zdGF0dXMge1xuICBmb250LXNpemU6IDEycHg7XG4gIHBhZGRpbmc6IDRweCA4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG5cbi52YWxpZGF0aW9uLXN0YXR1cy52YWxpZCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2Vzcyk7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG59XG5cbi52YWxpZGF0aW9uLXN0YXR1cy5pbnZhbGlkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xufVxuXG4vKiBNb2RhbCBTdHlsZXMgKi9cbi52YXVsdHBpbG90LXBoYXNlMy1tb2RhbCB7XG4gIHdpZHRoOiA3MDBweDtcbiAgbWF4LXdpZHRoOiA5NXZ3O1xufVxuXG4ubW9kYWwtaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLm1vZGFsLWFjdGlvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDEwcHg7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG4gIHBhZGRpbmctdG9wOiAxNXB4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4vKiBSZWNvbW1lbmRhdGlvbiBFbmdpbmUgU3R5bGVzICovXG4ucmVjb21tZW5kYXRpb25zLWNvbnRhaW5lciB7XG4gIG1hcmdpbjogMjBweCAwO1xufVxuXG4ucmVjb21tZW5kYXRpb24tY2FyZCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIHBhZGRpbmc6IDE2cHg7XG4gIG1hcmdpbjogMTJweCAwO1xufVxuXG4ucmVjb21tZW5kYXRpb24tY2FyZC5oaWdoLXByaW9yaXR5IHtcbiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB2YXIoLS1jb2xvci1yZWQpO1xufVxuXG4ucmVjb21tZW5kYXRpb24tY2FyZC5tZWRpdW0tcHJpb3JpdHkge1xuICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvbG9yLW9yYW5nZSk7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi1jYXJkLmxvdy1wcmlvcml0eSB7XG4gIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29sb3ItZ3JlZW4pO1xufVxuXG4ucmVjb21tZW5kYXRpb24taGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufVxuXG4ucmVjb21tZW5kYXRpb24tdGl0bGUge1xuICBmb250LXdlaWdodDogNjAwO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4ucmVjb21tZW5kYXRpb24tYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogOHB4O1xuICBtYXJnaW4tdG9wOiAxNXB4O1xufVxuXG4vKiBSZXNwb25zaXZlIERlc2lnbiAqL1xuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gIC52YXVsdHBpbG90LW9uYm9hcmRpbmctbW9kYWwsXG4gIC52YXVsdHBpbG90LXBoYXNlMy1tb2RhbCB7XG4gICAgd2lkdGg6IDk1dnc7XG4gIH1cbiAgXG4gIC5tZXRyaWNzLWdyaWQge1xuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICB9XG4gIFxuICAuZGFzaGJvYXJkLWhlYWRlcixcbiAgLm1vZGFsLWhlYWRlciB7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBnYXA6IDEwcHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG4gIFxuICAuY29uZmlnLXJvdyB7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICBnYXA6IDEwcHg7XG4gIH1cbn1cbmA7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBEYXNoYm9hcmQoKSB7XG4gICAgLy8gRGFzaGJvYXJkIHdpbGwgYmUgY3JlYXRlZCB3aGVuIG5lZWRlZFxuICAgIGNvbnNvbGUubG9nKCdEYXNoYm9hcmQgc2V0dXAgcmVhZHknKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBBZHZhbmNlZFNldHRpbmdzKCkge1xuICAgIC8vIEFkdmFuY2VkIHNldHRpbmdzIHdpbGwgYmUgY3JlYXRlZCB3aGVuIG5lZWRlZFxuICAgIGNvbnNvbGUubG9nKCdBZHZhbmNlZCBzZXR0aW5ncyBzZXR1cCByZWFkeScpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93T25ib2FyZGluZygpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZU9uYm9hcmRpbmcpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ09uYm9hcmRpbmcgaXMgZGlzYWJsZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMub25ib2FyZGluZ1dpemFyZCkge1xuICAgICAgLy8gQ2xvc2UgZXhpc3Rpbmcgd2l6YXJkXG4gICAgICB0aGlzLm9uYm9hcmRpbmdXaXphcmQuY2xvc2UoKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5vbmJvYXJkaW5nV2l6YXJkID0gbmV3IE9uYm9hcmRpbmdXaXphcmQodGhpcy5wbHVnaW4uYXBwLCB0aGlzLnBsdWdpbik7XG4gICAgdGhpcy5vbmJvYXJkaW5nV2l6YXJkLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0Rhc2hib2FyZCgpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZURhc2hib2FyZCkge1xuICAgICAgbmV3IE5vdGljZSgnRGFzaGJvYXJkIGlzIGRpc2FibGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBvciBzaG93IGRhc2hib2FyZCBtb2RhbFxuICAgIGNvbnN0IG1vZGFsID0gbmV3IERhc2hib2FyZE1vZGFsKHRoaXMucGx1Z2luKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBZHZhbmNlZFNldHRpbmdzKCkge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlQWR2YW5jZWRTZXR0aW5ncykge1xuICAgICAgbmV3IE5vdGljZSgnQWR2YW5jZWQgc2V0dGluZ3MgYXJlIGRpc2FibGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBvciBzaG93IGFkdmFuY2VkIHNldHRpbmdzIG1vZGFsXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQWR2YW5jZWRTZXR0aW5nc01vZGFsKHRoaXMucGx1Z2luKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNob3dSZWNvbW1lbmRhdGlvbnMoKSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVSZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1JlY29tbWVuZGF0aW9ucyBhcmUgZGlzYWJsZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgbmV3IE5vdGljZSgnR2VuZXJhdGluZyBBSSByZWNvbW1lbmRhdGlvbnMuLi4nKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGV4dCA9IGF3YWl0IHRoaXMuYnVpbGRSZWNvbW1lbmRhdGlvbkNvbnRleHQoKTtcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IHRoaXMucmVjb21tZW5kYXRpb25FbmdpbmUuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoY29udGV4dCk7XG4gICAgICBcbiAgICAgIGlmIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBSZWNvbW1lbmRhdGlvbnNNb2RhbCh0aGlzLnBsdWdpbiwgcmVjb21tZW5kYXRpb25zLCB0aGlzLnJlY29tbWVuZGF0aW9uRW5naW5lKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gcmVjb21tZW5kYXRpb25zIGF2YWlsYWJsZSBhdCB0aGlzIHRpbWUnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIHJlY29tbWVuZGF0aW9uczonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVjb21tZW5kYXRpb25zJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBxdWlja09wdGltaXplKCkge1xuICAgIG5ldyBOb3RpY2UoJ1J1bm5pbmcgcXVpY2sgb3B0aW1pemF0aW9uLi4uJyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCB0aGlzLmJ1aWxkUmVjb21tZW5kYXRpb25Db250ZXh0KCk7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCB0aGlzLnJlY29tbWVuZGF0aW9uRW5naW5lLmdlbmVyYXRlUmVjb21tZW5kYXRpb25zKGNvbnRleHQpO1xuICAgICAgXG4gICAgICAvLyBGaW5kIHF1aWNrLCBhdXRvbWF0aWMgb3B0aW1pemF0aW9uc1xuICAgICAgY29uc3QgcXVpY2tSZWNzID0gcmVjb21tZW5kYXRpb25zLmZpbHRlcihyZWMgPT4gXG4gICAgICAgIHJlYy5pbXBsZW1lbnRhdGlvbi5kaWZmaWN1bHR5ID09PSAnZWFzeScgJiYgXG4gICAgICAgIHJlYy5pbXBsZW1lbnRhdGlvbi5zdGVwcy5zb21lKHN0ZXAgPT4gc3RlcC5hY3Rpb24gPT09ICdhdXRvbWF0aWMnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKHF1aWNrUmVjcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEFwcGx5IHRoZSBmaXJzdCBxdWljayByZWNvbW1lbmRhdGlvblxuICAgICAgICBjb25zdCByZWMgPSBxdWlja1JlY3NbMF07XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlSZWNvbW1lbmRhdGlvbihyZWMpO1xuICAgICAgICBuZXcgTm90aWNlKGDinIUgQXBwbGllZDogJHtyZWMudGl0bGV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdObyBxdWljayBvcHRpbWl6YXRpb25zIGF2YWlsYWJsZS4gVXNlIFwiU2hvdyBBSSBSZWNvbW1lbmRhdGlvbnNcIiBmb3IgbWFudWFsIG9wdGltaXphdGlvbnMuJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1F1aWNrIG9wdGltaXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnUXVpY2sgb3B0aW1pemF0aW9uIGZhaWxlZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYnVpbGRSZWNvbW1lbmRhdGlvbkNvbnRleHQoKTogUHJvbWlzZTxSZWNvbW1lbmRhdGlvbkNvbnRleHQ+IHtcbiAgICAvLyBCdWlsZCBjb250ZXh0IGZvciByZWNvbW1lbmRhdGlvbiBlbmdpbmVcbiAgICBjb25zdCBjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQgPSB7XG4gICAgICBzZXNzaW9uSWQ6IGBzZXNzaW9uLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgY3VycmVudFRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZS5IVFRQLCAvLyBEZWZhdWx0LCBzaG91bGQgYmUgZHluYW1pY1xuICAgICAgYXZhaWxhYmxlVHJhbnNwb3J0czogW1RyYW5zcG9ydFR5cGUuSFRUUCwgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTV0sXG4gICAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICAgICAgYXZlcmFnZUxhdGVuY3k6IDE1MCArIE1hdGgucmFuZG9tKCkgKiAxMDAsXG4gICAgICAgIGVycm9yUmF0ZTogTWF0aC5yYW5kb20oKSAqIDAuMDUsXG4gICAgICAgIHRocm91Z2hwdXQ6IDEwMCArIE1hdGgucmFuZG9tKCkgKiA1MCxcbiAgICAgICAgcmVsaWFiaWxpdHk6IDAuOTUgKyBNYXRoLnJhbmRvbSgpICogMC4wNSxcbiAgICAgICAgdHJhbnNwb3J0VXNhZ2U6IHtcbiAgICAgICAgICBbVHJhbnNwb3J0VHlwZS5IVFRQXTogMC43LFxuICAgICAgICAgIFtUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVF06IDAuMjUsXG4gICAgICAgICAgW1RyYW5zcG9ydFR5cGUuRklMRVNZU1RFTV06IDAuMDVcbiAgICAgICAgfSxcbiAgICAgICAgdGltZVdpbmRvdzogJzFoJ1xuICAgICAgfSxcbiAgICAgIHVzZXJCZWhhdmlvcjoge1xuICAgICAgICB1c2FnZUZyZXF1ZW5jeTogJ21lZGl1bScsXG4gICAgICAgIHBlYWtVc2FnZUhvdXJzOiBbOSwgMTAsIDExLCAxNCwgMTUsIDE2XSxcbiAgICAgICAgcHJlZmVycmVkRmVhdHVyZXM6IFsnZGFzaGJvYXJkJywgJ3JlY29tbWVuZGF0aW9ucyddLFxuICAgICAgICBlcnJvclRvbGVyYW5jZTogJ21lZGl1bScsXG4gICAgICAgIHBlcmZvcm1hbmNlU2Vuc2l0aXZpdHk6ICdtZWRpdW0nXG4gICAgICB9LFxuICAgICAgZW52aXJvbm1lbnRDb250ZXh0OiB7XG4gICAgICAgIHBsYXRmb3JtOiAnb2JzaWRpYW4nLFxuICAgICAgICBjb25uZWN0aXZpdHk6ICdnb29kJyxcbiAgICAgICAgYmFuZHdpZHRoOiA1MCxcbiAgICAgICAgbGF0ZW5jeTogMzAsXG4gICAgICAgIHN0YWJpbGl0eTogMC45NVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFwcGx5UmVjb21tZW5kYXRpb24ocmVjb21tZW5kYXRpb246IFJlY29tbWVuZGF0aW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBBcHBseWluZyByZWNvbW1lbmRhdGlvbjogJHtyZWNvbW1lbmRhdGlvbi50aXRsZX1gKTtcbiAgICAgIFxuICAgICAgLy8gRmluZCBhdXRvbWF0aWMgc3RlcHNcbiAgICAgIGNvbnN0IGF1dG9TdGVwcyA9IHJlY29tbWVuZGF0aW9uLmltcGxlbWVudGF0aW9uLnN0ZXBzLmZpbHRlcihzdGVwID0+IHN0ZXAuYWN0aW9uID09PSAnYXV0b21hdGljJyk7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiBhdXRvU3RlcHMpIHtcbiAgICAgICAgc3dpdGNoIChzdGVwLmlkKSB7XG4gICAgICAgICAgY2FzZSAnc3dpdGNoLXRyYW5zcG9ydCc6XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSB0cmFuc3BvcnQgc3dpdGNoXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3dpdGNoaW5nIHRyYW5zcG9ydCBhcyByZWNvbW1lbmRlZCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZW5hYmxlLXBvb2xpbmcnOlxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgZW5hYmxpbmcgY29ubmVjdGlvbiBwb29saW5nXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRW5hYmxpbmcgY29ubmVjdGlvbiBwb29saW5nJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdlbmFibGUtbW9uaXRvcmluZyc6XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBlbmFibGluZyBlbmhhbmNlZCBtb25pdG9yaW5nXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRW5hYmxpbmcgZW5oYW5jZWQgbW9uaXRvcmluZycpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVbmtub3duIGF1dG9tYXRpYyBzdGVwOiAke3N0ZXAuaWR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJhY2sgZWZmZWN0aXZlbmVzc1xuICAgICAgdGhpcy5yZWNvbW1lbmRhdGlvbkVuZ2luZS50cmFja1JlY29tbWVuZGF0aW9uRWZmZWN0aXZlbmVzcyhyZWNvbW1lbmRhdGlvbi5pZCwgMC44KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBhcHBseSByZWNvbW1lbmRhdGlvbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFJlY29tbWVuZGF0aW9uRW5naW5lKCkge1xuICAgIC8vIFN0YXJ0IGJhY2tncm91bmQgcmVjb21tZW5kYXRpb24gYW5hbHlzaXNcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgcmVjb21tZW5kYXRpb24gZW5naW5lLi4uJyk7XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgaW5pdGlhbCByZWNvbW1lbmRhdGlvbnNcbiAgICB0aGlzLmdlbmVyYXRlQmFja2dyb3VuZFJlY29tbWVuZGF0aW9ucygpO1xuICAgIFxuICAgIC8vIFNldCB1cCBwZXJpb2RpYyByZWNvbW1lbmRhdGlvbiB1cGRhdGVzXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5nZW5lcmF0ZUJhY2tncm91bmRSZWNvbW1lbmRhdGlvbnMoKTtcbiAgICB9LCAzMCAqIDYwICogMTAwMCk7IC8vIEV2ZXJ5IDMwIG1pbnV0ZXNcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhdGVCYWNrZ3JvdW5kUmVjb21tZW5kYXRpb25zKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgdGhpcy5idWlsZFJlY29tbWVuZGF0aW9uQ29udGV4dCgpO1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgdGhpcy5yZWNvbW1lbmRhdGlvbkVuZ2luZS5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhjb250ZXh0KTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGNyaXRpY2FsIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgY3JpdGljYWxSZWNzID0gcmVjb21tZW5kYXRpb25zLmZpbHRlcihyZWMgPT4gcmVjLnByaW9yaXR5ID09PSAnY3JpdGljYWwnKTtcbiAgICAgIGlmIChjcml0aWNhbFJlY3MubGVuZ3RoID4gMCkge1xuICAgICAgICBuZXcgTm90aWNlKGDimqDvuI8gJHtjcml0aWNhbFJlY3MubGVuZ3RofSBjcml0aWNhbCBvcHRpbWl6YXRpb24ocykgYXZhaWxhYmxlLiBVc2UgQ29tbWFuZCBQYWxldHRlID4gXCJTaG93IEFJIFJlY29tbWVuZGF0aW9uc1wiYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBHZW5lcmF0ZWQgJHtyZWNvbW1lbmRhdGlvbnMubGVuZ3RofSByZWNvbW1lbmRhdGlvbnMgKCR7Y3JpdGljYWxSZWNzLmxlbmd0aH0gY3JpdGljYWwpYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhY2tncm91bmQgcmVjb21tZW5kYXRpb24gZ2VuZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2xlYW51cCgpIHtcbiAgICAvLyBDbGVhbnVwIGNvbXBvbmVudCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5vbmJvYXJkaW5nV2l6YXJkKSB7XG4gICAgICB0aGlzLm9uYm9hcmRpbmdXaXphcmQuY2xvc2UoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudHJhbnNwb3J0RGFzaGJvYXJkKSB7XG4gICAgICB0aGlzLnRyYW5zcG9ydERhc2hib2FyZC51bmxvYWQoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuYWR2YW5jZWRTZXR0aW5ncykge1xuICAgICAgdGhpcy5hZHZhbmNlZFNldHRpbmdzLnVubG9hZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1YmxpYyBBUEkgbWV0aG9kcyBmb3Igb3RoZXIgY29tcG9uZW50c1xuICBwdWJsaWMgYXN5bmMgc2hvd09uYm9hcmRpbmdJZk5lZWRlZCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm9uYm9hcmRpbmdDb21wbGV0ZSAmJiB0aGlzLmNvbmZpZy5lbmFibGVPbmJvYXJkaW5nKSB7XG4gICAgICB0aGlzLnNob3dPbmJvYXJkaW5nKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGdldFJlY29tbWVuZGF0aW9uRW5naW5lKCk6IFJlY29tbWVuZGF0aW9uRW5naW5lIHtcbiAgICByZXR1cm4gdGhpcy5yZWNvbW1lbmRhdGlvbkVuZ2luZTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyByZWZyZXNoRGFzaGJvYXJkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLnRyYW5zcG9ydERhc2hib2FyZCkge1xuICAgICAgLy8gUmVmcmVzaCBkYXNoYm9hcmQgZGF0YVxuICAgICAgY29uc29sZS5sb2coJ1JlZnJlc2hpbmcgZGFzaGJvYXJkLi4uJyk7XG4gICAgfVxuICB9XG59XG5cbi8vIE1vZGFsIGZvciBkaXNwbGF5aW5nIHRoZSB0cmFuc3BvcnQgZGFzaGJvYXJkXG5jbGFzcyBEYXNoYm9hcmRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgZGFzaGJvYXJkPzogVHJhbnNwb3J0RGFzaGJvYXJkO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygnZGFzaGJvYXJkLW1vZGFsJyk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGRhc2hib2FyZFxuICAgIHRoaXMuZGFzaGJvYXJkID0gbmV3IFRyYW5zcG9ydERhc2hib2FyZChjb250ZW50RWwsIHRoaXMucGx1Z2luKTtcbiAgICB0aGlzLmRhc2hib2FyZC5sb2FkKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGlmICh0aGlzLmRhc2hib2FyZCkge1xuICAgICAgdGhpcy5kYXNoYm9hcmQudW5sb2FkKCk7XG4gICAgfVxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbi8vIE1vZGFsIGZvciBkaXNwbGF5aW5nIGFkdmFuY2VkIHNldHRpbmdzXG5jbGFzcyBBZHZhbmNlZFNldHRpbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIHNldHRpbmdzPzogQWR2YW5jZWRTZXR0aW5ncztcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ2FkdmFuY2VkLXNldHRpbmdzLW1vZGFsJyk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGFkdmFuY2VkIHNldHRpbmdzXG4gICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBBZHZhbmNlZFNldHRpbmdzKGNvbnRlbnRFbCwgdGhpcy5wbHVnaW4pO1xuICAgIHRoaXMuc2V0dGluZ3MubG9hZCgpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncykge1xuICAgICAgdGhpcy5zZXR0aW5ncy51bmxvYWQoKTtcbiAgICB9XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLy8gTW9kYWwgZm9yIGRpc3BsYXlpbmcgQUkgcmVjb21tZW5kYXRpb25zXG5jbGFzcyBSZWNvbW1lbmRhdGlvbnNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgcmVjb21tZW5kYXRpb25zOiBSZWNvbW1lbmRhdGlvbltdO1xuICBwcml2YXRlIGVuZ2luZTogUmVjb21tZW5kYXRpb25FbmdpbmU7XG5cbiAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luLCByZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW10sIGVuZ2luZTogUmVjb21tZW5kYXRpb25FbmdpbmUpIHtcbiAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnJlY29tbWVuZGF0aW9ucyA9IHJlY29tbWVuZGF0aW9ucztcbiAgICB0aGlzLmVuZ2luZSA9IGVuZ2luZTtcbiAgICB0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ3JlY29tbWVuZGF0aW9ucy1tb2RhbCcpO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIFxuICAgIC8vIEhlYWRlclxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIEFJLVBvd2VyZWQgUmVjb21tZW5kYXRpb25zJyB9KTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0hlcmUgYXJlIHBlcnNvbmFsaXplZCByZWNvbW1lbmRhdGlvbnMgdG8gb3B0aW1pemUgeW91ciBWYXVsdFBpbG90IGV4cGVyaWVuY2U6JyxcbiAgICAgIGNsczogJ3JlY29tbWVuZGF0aW9ucy1zdWJ0aXRsZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBSZWNvbW1lbmRhdGlvbnMgbGlzdFxuICAgIGNvbnN0IHJlY3NMaXN0ID0gY29udGVudEVsLmNyZWF0ZURpdigncmVjb21tZW5kYXRpb25zLWxpc3QnKTtcbiAgICBcbiAgICB0aGlzLnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKChyZWMsIGluZGV4KSA9PiB7XG4gICAgICB0aGlzLnJlbmRlclJlY29tbWVuZGF0aW9uKHJlY3NMaXN0LCByZWMsIGluZGV4KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGb290ZXJcbiAgICBjb25zdCBmb290ZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdyZWNvbW1lbmRhdGlvbnMtZm9vdGVyJyk7XG4gICAgZm9vdGVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6IGBHZW5lcmF0ZWQgJHt0aGlzLnJlY29tbWVuZGF0aW9ucy5sZW5ndGh9IHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiB5b3VyIHVzYWdlIHBhdHRlcm5zYCxcbiAgICAgIGNsczogJ3JlY29tbWVuZGF0aW9ucy1zdGF0cydcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDbG9zZSBidXR0b25cbiAgICBjb25zdCBjbG9zZUJ0biA9IGZvb3Rlci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xvc2UnLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclJlY29tbWVuZGF0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJlYzogUmVjb21tZW5kYXRpb24sIGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCByZWNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3JlY29tbWVuZGF0aW9uLWl0ZW0nKTtcbiAgICByZWNFbC5hZGRDbGFzcyhgcHJpb3JpdHktJHtyZWMucHJpb3JpdHl9YCk7XG4gICAgXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyID0gcmVjRWwuY3JlYXRlRGl2KCdyZWMtaGVhZGVyJyk7XG4gICAgY29uc3QgdGl0bGUgPSBoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiByZWMudGl0bGUgfSk7XG4gICAgdGl0bGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHJlYy5wcmlvcml0eS50b1VwcGVyQ2FzZSgpLCBjbHM6IGBwcmlvcml0eS1iYWRnZSAke3JlYy5wcmlvcml0eX1gIH0pO1xuICAgIFxuICAgIC8vIERlc2NyaXB0aW9uXG4gICAgcmVjRWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHJlYy5kZXNjcmlwdGlvbiwgY2xzOiAncmVjLWRlc2NyaXB0aW9uJyB9KTtcbiAgICBcbiAgICAvLyBFeHBlY3RlZCBpbXBhY3RcbiAgICBjb25zdCBpbXBhY3QgPSByZWNFbC5jcmVhdGVEaXYoJ3JlYy1pbXBhY3QnKTtcbiAgICBpbXBhY3QuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRXhwZWN0ZWQgSW1wYWN0OicgfSk7XG4gICAgY29uc3QgaW1wYWN0TGlzdCA9IGltcGFjdC5jcmVhdGVFbCgndWwnKTtcbiAgICBpbXBhY3RMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYFBlcmZvcm1hbmNlOiArJHtyZWMuZXhwZWN0ZWRJbXBhY3QucGVyZm9ybWFuY2VJbXByb3ZlbWVudH0lYCB9KTtcbiAgICBpbXBhY3RMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYEVycm9yIFJlZHVjdGlvbjogJHtyZWMuZXhwZWN0ZWRJbXBhY3QuZXJyb3JSZWR1Y3Rpb259JWAgfSk7XG4gICAgaW1wYWN0TGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGBSZWxpYWJpbGl0eTogKyR7cmVjLmV4cGVjdGVkSW1wYWN0LnJlbGlhYmlsaXR5SW1wcm92ZW1lbnR9JWAgfSk7XG4gICAgaW1wYWN0TGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGBDb25maWRlbmNlOiAkeyhyZWMuZXhwZWN0ZWRJbXBhY3QuY29uZmlkZW5jZVNjb3JlICogMTAwKS50b0ZpeGVkKDApfSVgIH0pO1xuICAgIFxuICAgIC8vIEltcGxlbWVudGF0aW9uIGRldGFpbHNcbiAgICBjb25zdCBpbXBsID0gcmVjRWwuY3JlYXRlRGl2KCdyZWMtaW1wbGVtZW50YXRpb24nKTtcbiAgICBpbXBsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0ltcGxlbWVudGF0aW9uOicgfSk7XG4gICAgaW1wbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYERpZmZpY3VsdHk6ICR7cmVjLmltcGxlbWVudGF0aW9uLmRpZmZpY3VsdHl9IHwgVGltZTogJHtyZWMuaW1wbGVtZW50YXRpb24uZXN0aW1hdGVkVGltZX1gIH0pO1xuICAgIFxuICAgIC8vIFN0ZXBzXG4gICAgaWYgKHJlYy5pbXBsZW1lbnRhdGlvbi5zdGVwcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdGVwc0xpc3QgPSBpbXBsLmNyZWF0ZUVsKCdvbCcpO1xuICAgICAgcmVjLmltcGxlbWVudGF0aW9uLnN0ZXBzLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgIGNvbnN0IHN0ZXBFbCA9IHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknKTtcbiAgICAgICAgc3RlcEVsLmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6IHN0ZXAudGl0bGUgfSk7XG4gICAgICAgIHN0ZXBFbC5jcmVhdGVTcGFuKHsgdGV4dDogYCAtICR7c3RlcC5kZXNjcmlwdGlvbn1gIH0pO1xuICAgICAgICBpZiAoc3RlcC5hY3Rpb24gPT09ICdhdXRvbWF0aWMnKSB7XG4gICAgICAgICAgc3RlcEVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIChBdXRvbWF0aWMpJywgY2xzOiAnc3RlcC1hdXRvbWF0aWMnIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWN0aW9uc1xuICAgIGNvbnN0IGFjdGlvbnMgPSByZWNFbC5jcmVhdGVEaXYoJ3JlYy1hY3Rpb25zJyk7XG4gICAgXG4gICAgaWYgKHJlYy5pbXBsZW1lbnRhdGlvbi5zdGVwcy5zb21lKHN0ZXAgPT4gc3RlcC5hY3Rpb24gPT09ICdhdXRvbWF0aWMnKSkge1xuICAgICAgY29uc3QgYXBwbHlCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdBcHBseSBBdXRvbWF0aWNhbGx5JywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgICBhcHBseUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXBwbHlCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBhcHBseUJ0bi50ZXh0Q29udGVudCA9ICdBcHBseWluZy4uLic7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLmFwcGx5UmVjb21tZW5kYXRpb24ocmVjKTtcbiAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgYXBwbHlCdG4udGV4dENvbnRlbnQgPSAn4pyFIEFwcGxpZWQnO1xuICAgICAgICAgICAgYXBwbHlCdG4ucmVtb3ZlQ2xhc3MoJ21vZC1jdGEnKTtcbiAgICAgICAgICAgIGFwcGx5QnRuLmFkZENsYXNzKCdtb2Qtc3VjY2VzcycpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcHBseUJ0bi50ZXh0Q29udGVudCA9ICfinYwgRmFpbGVkJztcbiAgICAgICAgICAgIGFwcGx5QnRuLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGFwcGx5QnRuLnRleHRDb250ZW50ID0gJ+KdjCBFcnJvcic7XG4gICAgICAgICAgYXBwbHlCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGRpc21pc3NCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEaXNtaXNzJywgY2xzOiAnbW9kLW11dGVkJyB9KTtcbiAgICBkaXNtaXNzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgcmVjRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9KTtcbiAgICBcbiAgICAvLyBSYXRpb25hbGUgKGNvbGxhcHNpYmxlKVxuICAgIGNvbnN0IHJhdGlvbmFsZSA9IHJlY0VsLmNyZWF0ZURpdigncmVjLXJhdGlvbmFsZScpO1xuICAgIGNvbnN0IHJhdGlvbmFsZVRvZ2dsZSA9IHJhdGlvbmFsZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU2hvdyBSYXRpb25hbGUnLCBjbHM6ICdyYXRpb25hbGUtdG9nZ2xlJyB9KTtcbiAgICBjb25zdCByYXRpb25hbGVDb250ZW50ID0gcmF0aW9uYWxlLmNyZWF0ZURpdigncmF0aW9uYWxlLWNvbnRlbnQnKTtcbiAgICByYXRpb25hbGVDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgcmF0aW9uYWxlQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogcmVjLnJhdGlvbmFsZSB9KTtcbiAgICBcbiAgICByYXRpb25hbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAocmF0aW9uYWxlQ29udGVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgcmF0aW9uYWxlQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmF0aW9uYWxlVG9nZ2xlLnRleHRDb250ZW50ID0gJ0hpZGUgUmF0aW9uYWxlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhdGlvbmFsZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgcmF0aW9uYWxlVG9nZ2xlLnRleHRDb250ZW50ID0gJ1Nob3cgUmF0aW9uYWxlJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlSZWNvbW1lbmRhdGlvbihyZWM6IFJlY29tbWVuZGF0aW9uKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNpbXVsYXRlIGFwcGx5aW5nIHRoZSByZWNvbW1lbmRhdGlvblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICAgIFxuICAgICAgLy8gVHJhY2sgZWZmZWN0aXZlbmVzc1xuICAgICAgdGhpcy5lbmdpbmUudHJhY2tSZWNvbW1lbmRhdGlvbkVmZmVjdGl2ZW5lc3MocmVjLmlkLCAwLjgpO1xuICAgICAgXG4gICAgICBuZXcgTm90aWNlKGDinIUgQXBwbGllZCByZWNvbW1lbmRhdGlvbjogJHtyZWMudGl0bGV9YCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGFwcGx5IHJlY29tbWVuZGF0aW9uOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBGYWlsZWQgdG8gYXBwbHkgcmVjb21tZW5kYXRpb246ICR7cmVjLnRpdGxlfWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsIi8qKlxuICogRW5oYW5jZWQgVUkgQ29tcG9uZW50cyBmb3IgVmF1bHRQaWxvdFxuICogUHJvdmlkZXMgcHJvZ3Jlc3MgaW5kaWNhdG9ycyBhbmQgcmVzcG9uc2Ugb3B0aW1pemF0aW9uXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBOb3RpY2UsIENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzQ29uZmlnIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgbWVzc2FnZT86IHN0cmluZztcbiAgICBwZXJjZW50YWdlPzogbnVtYmVyO1xuICAgIGV0YT86IG51bWJlcjtcbiAgICBjYW5jZWxhYmxlPzogYm9vbGVhbjtcbiAgICBwb3NpdGlvbj86ICd0b3AtcmlnaHQnIHwgJ2JvdHRvbS1yaWdodCcgfCAnY2VudGVyJztcbiAgICB0aW1lb3V0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlRW50cnk8VCA9IGFueT4ge1xuICAgIGRhdGE6IFQ7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gICAgdHRsOiBudW1iZXI7XG4gICAgaGl0Q291bnQ6IG51bWJlcjtcbiAgICBzaXplOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgICB0b3RhbFJlcXVlc3RzOiBudW1iZXI7XG4gICAgY2FjaGVIaXRzOiBudW1iZXI7XG4gICAgY2FjaGVNaXNzZXM6IG51bWJlcjtcbiAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gICAgc2xvd2VzdFJlc3BvbnNlOiBudW1iZXI7XG4gICAgZmFzdGVzdFJlc3BvbnNlOiBudW1iZXI7XG4gICAgY3VycmVudENhY2hlU2l6ZTogbnVtYmVyO1xuICAgIG1lbW9yeVVzYWdlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0TWVzc2FnZSB7XG4gICAgdHlwZTogJ3Byb2dyZXNzX3VwZGF0ZScgfCAncGVyZm9ybWFuY2Vfc3RhdHMnIHwgJ3Nob3J0Y3V0cycgfCAncGluZycgfCAncG9uZycgfCAnZXJyb3InO1xuICAgIGRhdGE6IGFueTtcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICBpZD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBQcm9ncmVzcyBJbmRpY2F0b3IgVUkgQ2xhc3NcbiAqIEhhbmRsZXMgcmVhbC10aW1lIHByb2dyZXNzIGJhcnMgd2l0aCBhbmltYXRpb25zIGFuZCBFVEEgY2FsY3VsYXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFByb2dyZXNzSW5kaWNhdG9yVUkgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICAgIHByaXZhdGUgYXBwOiBBcHA7XG4gICAgcHJpdmF0ZSBhY3RpdmVQcm9ncmVzczogTWFwPHN0cmluZywgUHJvZ3Jlc3NDb25maWc+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSB1cGRhdGVJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbnRhaW5lcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lcic7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIHRvcDogMjBweDtcbiAgICAgICAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgei1pbmRleDogMTAwMDA7XG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIG1heC13aWR0aDogNDAwcHg7XG4gICAgICAgIGA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5wcm9ncmVzc0NvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgc2hvd1Byb2dyZXNzKGNvbmZpZzogUHJvZ3Jlc3NDb25maWcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hY3RpdmVQcm9ncmVzcy5zZXQoY29uZmlnLmlkLCBjb25maWcpO1xuICAgICAgICB0aGlzLnJlbmRlclByb2dyZXNzKGNvbmZpZyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLnRpbWVvdXQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKGNvbmZpZy5pZCk7XG4gICAgICAgICAgICB9LCBjb25maWcudGltZW91dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVQcm9ncmVzcyhpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFByb2dyZXNzQ29uZmlnPik6IHZvaWQge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYWN0aXZlUHJvZ3Jlc3MuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkID0geyAuLi5leGlzdGluZywgLi4udXBkYXRlcyB9O1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVQcm9ncmVzcy5zZXQoaWQsIHVwZGF0ZWQpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9ncmVzcyh1cGRhdGVkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhpZGVQcm9ncmVzcyhpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWN0aXZlUHJvZ3Jlc3MuZGVsZXRlKGlkKTtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwcm9ncmVzcy0ke2lkfWApO1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5hbmltYXRpb24gPSAnc2xpZGVPdXRSaWdodCAwLjNzIGVhc2UtaW4nO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclByb2dyZXNzKGNvbmZpZzogUHJvZ3Jlc3NDb25maWcpOiB2b2lkIHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcHJvZ3Jlc3MtJHtjb25maWcuaWR9YCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmNyZWF0ZVByb2dyZXNzRWxlbWVudChjb25maWcpO1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lcj8uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzRWxlbWVudChlbGVtZW50LCBjb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQcm9ncmVzc0VsZW1lbnQoY29uZmlnOiBQcm9ncmVzc0NvbmZpZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbGVtZW50LmlkID0gYHByb2dyZXNzLSR7Y29uZmlnLmlkfWA7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbSc7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgICAgICBhbmltYXRpb246IHNsaWRlSW5SaWdodCAwLjNzIGVhc2Utb3V0O1xuICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICBtaW4td2lkdGg6IDMwMHB4O1xuICAgICAgICBgO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzc0VsZW1lbnQoZWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzc0VsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbmZpZzogUHJvZ3Jlc3NDb25maWcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGNvbmZpZy5wZXJjZW50YWdlIHx8IDA7XG4gICAgICAgIGNvbnN0IGV0YSA9IGNvbmZpZy5ldGEgPyB0aGlzLmZvcm1hdEVUQShjb25maWcuZXRhKSA6ICcnO1xuICAgICAgICBcbiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtaGVhZGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDhweDtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtdGl0bGVcIiBzdHlsZT1cImZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XCI+XG4gICAgICAgICAgICAgICAgICAgICR7Y29uZmlnLnRpdGxlfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICR7Y29uZmlnLmNhbmNlbGFibGUgPyAnPGJ1dHRvbiBjbGFzcz1cInByb2dyZXNzLWNhbmNlbFwiIHN0eWxlPVwiYmFja2dyb3VuZDogbm9uZTsgYm9yZGVyOiBub25lOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IGN1cnNvcjogcG9pbnRlcjtcIj7DlzwvYnV0dG9uPicgOiAnJ31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgJHtjb25maWcubWVzc2FnZSA/IGA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtbWVzc2FnZVwiIHN0eWxlPVwiY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyBmb250LXNpemU6IDAuOWVtOyBtYXJnaW4tYm90dG9tOiA4cHg7XCI+JHtjb25maWcubWVzc2FnZX08L2Rpdj5gIDogJyd9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyLWNvbnRhaW5lclwiIHN0eWxlPVwiYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpOyBib3JkZXItcmFkaXVzOiA0cHg7IGhlaWdodDogNnB4OyBvdmVyZmxvdzogaGlkZGVuO1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIiBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAke3BlcmNlbnRhZ2V9JTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1pbmZvXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi10b3A6IDhweDsgZm9udC1zaXplOiAwLjhlbTsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1wiPlxuICAgICAgICAgICAgICAgIDxzcGFuPiR7TWF0aC5yb3VuZChwZXJjZW50YWdlKX0lPC9zcGFuPlxuICAgICAgICAgICAgICAgICR7ZXRhID8gYDxzcGFuPkVUQTogJHtldGF9PC9zcGFuPmAgOiAnJ31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgICAgIC8vIEFkZCBjYW5jZWwgaGFuZGxlciBpZiBjYW5jZWxhYmxlXG4gICAgICAgIGlmIChjb25maWcuY2FuY2VsYWJsZSkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtY2FuY2VsJyk7XG4gICAgICAgICAgICBjYW5jZWxCdG4/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKGNvbmZpZy5pZCk7XG4gICAgICAgICAgICAgICAgLy8gRW1pdCBjYW5jZWwgZXZlbnRcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ3ZhdWx0cGlsb3Q6cHJvZ3Jlc3MtY2FuY2VsbGVkJywgY29uZmlnLmlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRFVEEoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHNlY29uZHMgPCA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQoc2Vjb25kcyl9c2A7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Vjb25kcyA8IDM2MDApIHtcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgICAgICAgICBjb25zdCBzZWNzID0gTWF0aC5yb3VuZChzZWNvbmRzICUgNjApO1xuICAgICAgICAgICAgcmV0dXJuIGAke21pbnV0ZXN9bSAke3NlY3N9c2A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICAgICAgICAgIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlc31tYDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFjdGl2ZVByb2dyZXNzKCk6IFByb2dyZXNzQ29uZmlnW10ge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFjdGl2ZVByb2dyZXNzLnZhbHVlcygpKTtcbiAgICB9XG5cbiAgICBjbGVhckFsbFByb2dyZXNzKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIHRoaXMuYWN0aXZlUHJvZ3Jlc3Mua2V5cygpKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVQcm9ncmVzcyhpZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMucHJvZ3Jlc3NDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy51cGRhdGVJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogUmVzcG9uc2UgVGltZSBPcHRpbWl6ZXIgQ2xhc3NcbiAqIEhhbmRsZXMgY2xpZW50LXNpZGUgY2FjaGluZywgcmVxdWVzdCBkZWR1cGxpY2F0aW9uLCBhbmQgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNwb25zZVRpbWVPcHRpbWl6ZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICAgIHByaXZhdGUgY2FjaGU6IE1hcDxzdHJpbmcsIENhY2hlRW50cnk+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgcmVxdWVzdFF1ZXVlOiBNYXA8c3RyaW5nLCBQcm9taXNlPGFueT4+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgbWV0cmljcyE6IFBlcmZvcm1hbmNlTWV0cmljcztcbiAgICBwcml2YXRlIG1heENhY2hlU2l6ZSA9IDEwMDsgLy8gTWF4aW11bSBudW1iZXIgb2YgY2FjaGVkIGVudHJpZXNcbiAgICBwcml2YXRlIGRlZmF1bHRUVEwgPSAzMDAwMDA7IC8vIDUgbWludXRlcyBkZWZhdWx0IFRUTFxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVNZXRyaWNzKCk7XG4gICAgICAgIHRoaXMuc3RhcnRDbGVhbnVwSW50ZXJ2YWwoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRpYWxpemVNZXRyaWNzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1ldHJpY3MgPSB7XG4gICAgICAgICAgICB0b3RhbFJlcXVlc3RzOiAwLFxuICAgICAgICAgICAgY2FjaGVIaXRzOiAwLFxuICAgICAgICAgICAgY2FjaGVNaXNzZXM6IDAsXG4gICAgICAgICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAwLFxuICAgICAgICAgICAgc2xvd2VzdFJlc3BvbnNlOiAwLFxuICAgICAgICAgICAgZmFzdGVzdFJlc3BvbnNlOiBJbmZpbml0eSxcbiAgICAgICAgICAgIGN1cnJlbnRDYWNoZVNpemU6IDAsXG4gICAgICAgICAgICBtZW1vcnlVc2FnZTogMFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIG9wdGltaXplZFJlcXVlc3Q8VD4oXG4gICAgICAgIGtleTogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Rm46ICgpID0+IFByb21pc2U8VD4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHR0bD86IG51bWJlcjtcbiAgICAgICAgICAgIHNraXBDYWNoZT86IGJvb2xlYW47XG4gICAgICAgICAgICBwcmlvcml0eT86ICdoaWdoJyB8ICdub3JtYWwnIHwgJ2xvdyc7XG4gICAgICAgIH0gPSB7fVxuICAgICk6IFByb21pc2U8VD4ge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgdGhpcy5tZXRyaWNzLnRvdGFsUmVxdWVzdHMrKztcblxuICAgICAgICAvLyBDaGVjayBjYWNoZSBmaXJzdCAodW5sZXNzIHNraXBwZWQpXG4gICAgICAgIGlmICghb3B0aW9ucy5za2lwQ2FjaGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0RnJvbUNhY2hlPFQ+KGtleSk7XG4gICAgICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXRyaWNzLmNhY2hlSGl0cysrO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVzcG9uc2VUaW1lTWV0cmljcyhwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWV0cmljcy5jYWNoZU1pc3NlcysrO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHJlcXVlc3QgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcyAoZGVkdXBsaWNhdGlvbilcbiAgICAgICAgY29uc3QgZXhpc3RpbmdSZXF1ZXN0ID0gdGhpcy5yZXF1ZXN0UXVldWUuZ2V0KGtleSk7XG4gICAgICAgIGlmIChleGlzdGluZ1JlcXVlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1JlcXVlc3QgYXMgUHJvbWlzZTxUPjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ha2UgdGhlIHJlcXVlc3RcbiAgICAgICAgY29uc3QgcmVxdWVzdFByb21pc2UgPSB0aGlzLmV4ZWN1dGVSZXF1ZXN0KHJlcXVlc3RGbiwga2V5LCBvcHRpb25zLnR0bCB8fCB0aGlzLmRlZmF1bHRUVEwpO1xuICAgICAgICB0aGlzLnJlcXVlc3RRdWV1ZS5zZXQoa2V5LCByZXF1ZXN0UHJvbWlzZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcXVlc3RQcm9taXNlO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSZXNwb25zZVRpbWVNZXRyaWNzKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RRdWV1ZS5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVJlcXVlc3Q8VD4oXG4gICAgICAgIHJlcXVlc3RGbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIHR0bDogbnVtYmVyXG4gICAgKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0Rm4oKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2FjaGUoa2V5LCByZXN1bHQsIHR0bCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gRG9uJ3QgY2FjaGUgZXJyb3JzLCBidXQgc3RpbGwgcmVtb3ZlIGZyb20gcXVldWVcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGcm9tQ2FjaGU8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBleHBpcmVkXG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gZW50cnkudGltZXN0YW1wID4gZW50cnkudHRsKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgaGl0IGNvdW50XG4gICAgICAgIGVudHJ5LmhpdENvdW50Kys7XG4gICAgICAgIHJldHVybiBlbnRyeS5kYXRhIGFzIFQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRDYWNoZTxUPihrZXk6IHN0cmluZywgZGF0YTogVCwgdHRsOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgLy8gRW5mb3JjZSBjYWNoZSBzaXplIGxpbWl0XG4gICAgICAgIGlmICh0aGlzLmNhY2hlLnNpemUgPj0gdGhpcy5tYXhDYWNoZVNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuZXZpY3RMZWFzdFVzZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVudHJ5OiBDYWNoZUVudHJ5PFQ+ID0ge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHR0bCxcbiAgICAgICAgICAgIGhpdENvdW50OiAwLFxuICAgICAgICAgICAgc2l6ZTogdGhpcy5lc3RpbWF0ZVNpemUoZGF0YSlcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIGVudHJ5KTtcbiAgICAgICAgdGhpcy51cGRhdGVDYWNoZU1ldHJpY3MoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGV2aWN0TGVhc3RVc2VkKCk6IHZvaWQge1xuICAgICAgICBsZXQgbGVhc3RVc2VkS2V5ID0gJyc7XG4gICAgICAgIGxldCBsZWFzdFVzZWRDb3VudCA9IEluZmluaXR5O1xuXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoZW50cnkuaGl0Q291bnQgPCBsZWFzdFVzZWRDb3VudCkge1xuICAgICAgICAgICAgICAgIGxlYXN0VXNlZENvdW50ID0gZW50cnkuaGl0Q291bnQ7XG4gICAgICAgICAgICAgICAgbGVhc3RVc2VkS2V5ID0ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxlYXN0VXNlZEtleSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUobGVhc3RVc2VkS2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZXN0aW1hdGVTaXplKGRhdGE6IGFueSk6IG51bWJlciB7XG4gICAgICAgIC8vIFJvdWdoIGVzdGltYXRpb24gb2Ygb2JqZWN0IHNpemUgaW4gYnl0ZXNcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpLmxlbmd0aCAqIDI7IC8vIEFwcHJveGltYXRlIFVURi0xNiBlbmNvZGluZ1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlUmVzcG9uc2VUaW1lTWV0cmljcyhyZXNwb25zZVRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBjdXJyZW50QXZnID0gdGhpcy5tZXRyaWNzLmF2ZXJhZ2VSZXNwb25zZVRpbWU7XG4gICAgICAgIGNvbnN0IHRvdGFsUmVxdWVzdHMgPSB0aGlzLm1ldHJpY3MudG90YWxSZXF1ZXN0cztcbiAgICAgICAgXG4gICAgICAgIHRoaXMubWV0cmljcy5hdmVyYWdlUmVzcG9uc2VUaW1lID0gXG4gICAgICAgICAgICAoY3VycmVudEF2ZyAqICh0b3RhbFJlcXVlc3RzIC0gMSkgKyByZXNwb25zZVRpbWUpIC8gdG90YWxSZXF1ZXN0cztcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZVRpbWUgPiB0aGlzLm1ldHJpY3Muc2xvd2VzdFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLm1ldHJpY3Muc2xvd2VzdFJlc3BvbnNlID0gcmVzcG9uc2VUaW1lO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2VUaW1lIDwgdGhpcy5tZXRyaWNzLmZhc3Rlc3RSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5tZXRyaWNzLmZhc3Rlc3RSZXNwb25zZSA9IHJlc3BvbnNlVGltZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQ2FjaGVNZXRyaWNzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1ldHJpY3MuY3VycmVudENhY2hlU2l6ZSA9IHRoaXMuY2FjaGUuc2l6ZTtcbiAgICAgICAgdGhpcy5tZXRyaWNzLm1lbW9yeVVzYWdlID0gQXJyYXkuZnJvbSh0aGlzLmNhY2hlLnZhbHVlcygpKVxuICAgICAgICAgICAgLnJlZHVjZSgodG90YWwsIGVudHJ5KSA9PiB0b3RhbCArIGVudHJ5LnNpemUsIDApO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhcnRDbGVhbnVwSW50ZXJ2YWwoKTogdm9pZCB7XG4gICAgICAgIC8vIENsZWFuIHVwIGV4cGlyZWQgZW50cmllcyBldmVyeSBtaW51dGVcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwRXhwaXJlZEVudHJpZXMoKTtcbiAgICAgICAgfSwgNjAwMDApO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYW51cEV4cGlyZWRFbnRyaWVzKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiB0aGlzLmNhY2hlLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgaWYgKG5vdyAtIGVudHJ5LnRpbWVzdGFtcCA+IGVudHJ5LnR0bCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVDYWNoZU1ldHJpY3MoKTtcbiAgICB9XG5cbiAgICBnZXRNZXRyaWNzKCk6IFBlcmZvcm1hbmNlTWV0cmljcyB7XG4gICAgICAgIHJldHVybiB7IC4uLnRoaXMubWV0cmljcyB9O1xuICAgIH1cblxuICAgIGdldENhY2hlSGl0UmF0ZSgpOiBudW1iZXIge1xuICAgICAgICBjb25zdCB0b3RhbCA9IHRoaXMubWV0cmljcy5jYWNoZUhpdHMgKyB0aGlzLm1ldHJpY3MuY2FjaGVNaXNzZXM7XG4gICAgICAgIHJldHVybiB0b3RhbCA+IDAgPyAodGhpcy5tZXRyaWNzLmNhY2hlSGl0cyAvIHRvdGFsKSAqIDEwMCA6IDA7XG4gICAgfVxuXG4gICAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlTWV0cmljcygpO1xuICAgIH1cblxuICAgIHNldENhY2hlQ29uZmlnKG1heFNpemU6IG51bWJlciwgZGVmYXVsdFRUTDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplID0gbWF4U2l6ZTtcbiAgICAgICAgdGhpcy5kZWZhdWx0VFRMID0gZGVmYXVsdFRUTDtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdlYlNvY2tldCBIYW5kbGVyIGZvciBSZWFsLXRpbWUgVXBkYXRlc1xuICovXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0SGFuZGxlciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gICAgcHJpdmF0ZSB3czogV2ViU29ja2V0IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSByZWNvbm5lY3RJbnRlcnZhbDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBpc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgbWVzc2FnZUhhbmRsZXJzID0gbmV3IE1hcDxzdHJpbmcsIChkYXRhOiBhbnkpID0+IHZvaWQ+KCk7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0dXBNZXNzYWdlSGFuZGxlcnMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwTWVzc2FnZUhhbmRsZXJzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5zZXQoJ3Byb2dyZXNzX3VwZGF0ZScsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBlbmhhbmNlbWVudCBtYW5hZ2VyIGluc3RhbmNlXG4gICAgICAgICAgICBjb25zdCBlbmhhbmNlbWVudE1hbmFnZXIgPSAodGhpcy5wbHVnaW4gYXMgYW55KS5lbmhhbmNlbWVudE1hbmFnZXI7XG4gICAgICAgICAgICBpZiAoZW5oYW5jZW1lbnRNYW5hZ2VyPy5wcm9ncmVzc0luZGljYXRvcikge1xuICAgICAgICAgICAgICAgIGVuaGFuY2VtZW50TWFuYWdlci5wcm9ncmVzc0luZGljYXRvci51cGRhdGVQcm9ncmVzcyhcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogZGF0YS5wZXJjZW50YWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXRhOiBkYXRhLmV0YVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMuc2V0KCdwZXJmb3JtYW5jZV9zdGF0cycsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgcGVyZm9ybWFuY2Ugc3RhdGlzdGljcyB1cGRhdGVzXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUGVyZm9ybWFuY2Ugc3RhdHM6JywgZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzLnNldCgncGluZycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VuZCh7IHR5cGU6ICdwb25nJywgZGF0YToge30sIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29ubmVjdCh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQodXJsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy53cy5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3QgV2ViU29ja2V0IGNvbm5lY3RlZCcpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY29ubmVjdEludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZWNvbm5lY3RJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjb25uZWN0SW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud3Mub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgV2ViU29ja2V0IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud3Mub25jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3QgV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRSZWNvbm5lY3QodXJsKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud3Mub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3QgV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29ubmVjdCBXZWJTb2NrZXQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5zdGFydFJlY29ubmVjdCh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVNZXNzYWdlKG1lc3NhZ2U6IFdlYlNvY2tldE1lc3NhZ2UpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMubWVzc2FnZUhhbmRsZXJzLmdldChtZXNzYWdlLnR5cGUpO1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgaGFuZGxlcihtZXNzYWdlLmRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydFJlY29ubmVjdCh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5yZWNvbm5lY3RJbnRlcnZhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWNvbm5lY3RJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byByZWNvbm5lY3QgVmF1bHRQaWxvdCBXZWJTb2NrZXQuLi4nKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdCh1cmwpO1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG5cbiAgICBzZW5kKG1lc3NhZ2U6IFdlYlNvY2tldE1lc3NhZ2UpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMud3MgJiYgdGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgICAgICAgdGhpcy53cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5yZWNvbm5lY3RJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlY29ubmVjdEludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0SW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMud3MpIHtcbiAgICAgICAgICAgIHRoaXMud3MuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMud3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpc1NvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb25uZWN0ZWQ7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNYWluIEVuaGFuY2VtZW50IE1hbmFnZXJcbiAqIE9yY2hlc3RyYXRlcyBhbGwgZW5oYW5jZW1lbnQgZmVhdHVyZXNcbiAqL1xuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RFbmhhbmNlbWVudE1hbmFnZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHB1YmxpYyBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gICAgcHVibGljIHByb2dyZXNzSW5kaWNhdG9yOiBQcm9ncmVzc0luZGljYXRvclVJO1xuICAgIHB1YmxpYyByZXNwb25zZU9wdGltaXplcjogUmVzcG9uc2VUaW1lT3B0aW1pemVyO1xuICAgIHB1YmxpYyB3ZWJTb2NrZXRIYW5kbGVyOiBXZWJTb2NrZXRIYW5kbGVyO1xuICAgIHByaXZhdGUgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnByb2dyZXNzSW5kaWNhdG9yID0gbmV3IFByb2dyZXNzSW5kaWNhdG9yVUkocGx1Z2luKTtcbiAgICAgICAgdGhpcy5yZXNwb25zZU9wdGltaXplciA9IG5ldyBSZXNwb25zZVRpbWVPcHRpbWl6ZXIocGx1Z2luKTtcbiAgICAgICAgdGhpcy53ZWJTb2NrZXRIYW5kbGVyID0gbmV3IFdlYlNvY2tldEhhbmRsZXIocGx1Z2luKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBwcm9ncmVzcyBpbmRpY2F0b3JcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5wcm9ncmVzc0luZGljYXRvcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgcmVzcG9uc2Ugb3B0aW1pemVyXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMucmVzcG9uc2VPcHRpbWl6ZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIFdlYlNvY2tldCBjb25uZWN0aW9uXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMud2ViU29ja2V0SGFuZGxlcik7XG4gICAgICAgICAgICBjb25zdCB3c1VybCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwucmVwbGFjZSgvXmh0dHAvLCAnd3MnKSArICcvYXBpL29ic2lkaWFuL3dzL2VuaGFuY2VkJztcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0SGFuZGxlci5jb25uZWN0KHdzVXJsKTtcblxuICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90IEVuaGFuY2VtZW50IE1hbmFnZXIgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIEVuaGFuY2VtZW50IE1hbmFnZXI6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvd1Byb2dyZXNzKGNvbmZpZzogUHJvZ3Jlc3NDb25maWcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0luZGljYXRvci5zaG93UHJvZ3Jlc3MoY29uZmlnKTtcbiAgICB9XG5cbiAgICBhc3luYyBvcHRpbWl6ZWRBUElDYWxsPFQ+KFxuICAgICAgICBlbmRwb2ludDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Rm46ICgpID0+IFByb21pc2U8VD4sXG4gICAgICAgIG9wdGlvbnM/OiB7IHR0bD86IG51bWJlcjsgc2tpcENhY2hlPzogYm9vbGVhbiB9XG4gICAgKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlT3B0aW1pemVyLm9wdGltaXplZFJlcXVlc3QoZW5kcG9pbnQsIHJlcXVlc3RGbiwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk6IFBlcmZvcm1hbmNlTWV0cmljcyB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlT3B0aW1pemVyLmdldE1ldHJpY3MoKTtcbiAgICB9XG5cbiAgICBnZXRDYWNoZUhpdFJhdGUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VPcHRpbWl6ZXIuZ2V0Q2FjaGVIaXRSYXRlKCk7XG4gICAgfVxuXG4gICAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZXNwb25zZU9wdGltaXplci5jbGVhckNhY2hlKCk7XG4gICAgfVxuXG4gICAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLndlYlNvY2tldEhhbmRsZXIuaXNTb2NrZXRDb25uZWN0ZWQoKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHN1cGVyLm9udW5sb2FkKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUHJvZ3Jlc3NJbmRpY2F0b3JVSSxcbiAgICBSZXNwb25zZVRpbWVPcHRpbWl6ZXIsXG4gICAgV2ViU29ja2V0SGFuZGxlcixcbiAgICBWYXVsdFBpbG90RW5oYW5jZW1lbnRNYW5hZ2VyXG59O1xuIiwiLyoqXG4gKiBFbmhhbmNlZCBDb21tYW5kcyBTeXN0ZW0gZm9yIFZhdWx0UGlsb3RcbiAqIFByb3ZpZGVzIGtleWJvYXJkIHNob3J0Y3V0cyBhbmQgZW5oYW5jZWQgY29tbWFuZCBkZWZpbml0aW9uc1xuICovXG5cbmltcG9ydCB7IEFwcCwgTm90aWNlLCBFZGl0b3IsIFRGaWxlLCBNb2RhbCwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgS2V5Ym9hcmRTaG9ydGN1dCB7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgbW9kaWZpZXJzOiBzdHJpbmdbXTtcbiAgICBjb21tYW5kOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBjb250ZXh0PzogJ2VkaXRvcicgfCAnZ2xvYmFsJyB8ICdtb2RhbCc7XG4gICAgZW5hYmxlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW5oYW5jZWRDb21tYW5kIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGNhbGxiYWNrPzogKCkgPT4gdm9pZDtcbiAgICBlZGl0b3JDYWxsYmFjaz86IChlZGl0b3I6IEVkaXRvciwgdmlldzogYW55KSA9PiB2b2lkO1xuICAgIGNoZWNrQ2FsbGJhY2s/OiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IGJvb2xlYW4gfCB2b2lkO1xuICAgIGhvdGtleXM/OiBLZXlib2FyZFNob3J0Y3V0W107XG4gICAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gICAgcHJpb3JpdHk/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBLZXlib2FyZFNob3J0Y3V0SGFuZGxlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcbiAgICBwcml2YXRlIHNob3J0Y3V0czogTWFwPHN0cmluZywgS2V5Ym9hcmRTaG9ydGN1dD4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBjb250ZXh0TWVudUVuYWJsZWQgPSB0cnVlO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0U2hvcnRjdXRzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplRGVmYXVsdFNob3J0Y3V0cygpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFNob3J0Y3V0czogS2V5Ym9hcmRTaG9ydGN1dFtdID0gW1xuICAgICAgICAgICAgLy8gQ29yZSBWYXVsdFBpbG90IHNob3J0Y3V0c1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0VudGVyJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90Om9wZW4tY2hhdCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdPcGVuIFZhdWx0UGlsb3QgQ2hhdCcsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5UycsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpzbWFydC1zZWFyY2gnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU21hcnQgU2VhcmNoJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlDJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnF1aWNrLWNoYXQnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUXVpY2sgQ2hhdCB3aXRoIFNlbGVjdGlvbicsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2VkaXRvcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnU3BhY2UnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJ10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6Y29waWxvdC1jb21wbGV0ZScsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdHZXQgQUkgQ29tcGxldGlvbicsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2VkaXRvcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5VycsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpleGVjdXRlLXdvcmtmbG93JyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUEnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6YW5hbHl6ZS12YXVsdCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBbmFseXplIEN1cnJlbnQgVmF1bHQnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUQnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6b3Blbi1kYXNoYm9hcmQnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT3BlbiBWYXVsdFBpbG90IERhc2hib2FyZCcsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5UCcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpwbGFuLW15LWRheScsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdQbGFuIE15IERheScsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBWYXVsdCBNYW5hZ2VtZW50IHNob3J0Y3V0c1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleVYnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6dmF1bHQtc3RydWN0dXJlJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZpZXcgVmF1bHQgU3RydWN0dXJlJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlGJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OmZpbGUtb3BlcmF0aW9ucycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdGaWxlIE9wZXJhdGlvbnMnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleU8nLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6dmF1bHQtb3JnYW5pemVyJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZhdWx0IE9yZ2FuaXplcicsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5QicsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpiYXRjaC1vcGVyYXRpb25zJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0JhdGNoIE9wZXJhdGlvbnMnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gRW5oYW5jZWQgc2hvcnRjdXRzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5SCcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpzaG93LXNob3J0Y3V0cycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTaG93IEtleWJvYXJkIFNob3J0Y3V0cycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5UicsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpyZWZyZXNoLWNhY2hlJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1JlZnJlc2ggQ2FjaGUnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleU0nLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6cGVyZm9ybWFuY2UtbWV0cmljcycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTaG93IFBlcmZvcm1hbmNlIE1ldHJpY3MnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gQWdlbnQgbWFuYWdlbWVudFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUcnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6YWdlbnQtbWFya2V0cGxhY2UnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWdlbnQgTWFya2V0cGxhY2UnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUUnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6YWdlbnQtZXZvbHV0aW9uJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FnZW50IEV2b2x1dGlvbiBTdGF0dXMnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gUXVpY2sgYWN0aW9uc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleVEnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydBbHQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpxdWljay1ub3RlJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1F1aWNrIE5vdGUgQ3JlYXRpb24nLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUknLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ0FsdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90Omluc2VydC10ZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdJbnNlcnQgVGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdlZGl0b3InXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUwnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6bGluay1hbmFseXplcicsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBbmFseXplIExpbmtzJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZWRpdG9yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlUJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnRhZy1tYW5hZ2VyJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RhZyBNYW5hZ2VyJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIERlbW8gc2hvcnRjdXRcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlaJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OmVuaGFuY2VtZW50LWRlbW8nLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW5oYW5jZW1lbnQgRmVhdHVyZXMgRGVtbycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICBkZWZhdWx0U2hvcnRjdXRzLmZvckVhY2goc2hvcnRjdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRTaG9ydGN1dChzaG9ydGN1dCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZFNob3J0Y3V0KHNob3J0Y3V0OiBLZXlib2FyZFNob3J0Y3V0KSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0U2hvcnRjdXRLZXkoc2hvcnRjdXQpO1xuICAgICAgICB0aGlzLnNob3J0Y3V0cy5zZXQoa2V5LCBzaG9ydGN1dCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlU2hvcnRjdXQoc2hvcnRjdXQ6IEtleWJvYXJkU2hvcnRjdXQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5nZXRTaG9ydGN1dEtleShzaG9ydGN1dCk7XG4gICAgICAgIHRoaXMuc2hvcnRjdXRzLmRlbGV0ZShrZXkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U2hvcnRjdXRLZXkoc2hvcnRjdXQ6IEtleWJvYXJkU2hvcnRjdXQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7c2hvcnRjdXQubW9kaWZpZXJzLnNvcnQoKS5qb2luKCcrJyl9XyR7c2hvcnRjdXQua2V5fWA7XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBtb2RpZmllcnMgPSBbXTtcbiAgICAgICAgaWYgKGV2ZW50LmN0cmxLZXkpIG1vZGlmaWVycy5wdXNoKCdDdHJsJyk7XG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSkgbW9kaWZpZXJzLnB1c2goJ1NoaWZ0Jyk7XG4gICAgICAgIGlmIChldmVudC5hbHRLZXkpIG1vZGlmaWVycy5wdXNoKCdBbHQnKTtcbiAgICAgICAgaWYgKGV2ZW50Lm1ldGFLZXkpIG1vZGlmaWVycy5wdXNoKCdNZXRhJyk7XG5cbiAgICAgICAgY29uc3Qga2V5ID0gZXZlbnQuY29kZTtcbiAgICAgICAgY29uc3Qgc2hvcnRjdXRLZXkgPSBgJHttb2RpZmllcnMuc29ydCgpLmpvaW4oJysnKX1fJHtrZXl9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNob3J0Y3V0ID0gdGhpcy5zaG9ydGN1dHMuZ2V0KHNob3J0Y3V0S2V5KTtcbiAgICAgICAgaWYgKHNob3J0Y3V0ICYmIChzaG9ydGN1dC5lbmFibGVkICE9PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmdldEN1cnJlbnRDb250ZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Nob3J0Y3V0VmFsaWRGb3JDb250ZXh0KHNob3J0Y3V0LCBjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlQ29tbWFuZChzaG9ydGN1dC5jb21tYW5kKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q3VycmVudENvbnRleHQoKTogJ2VkaXRvcicgfCAnZ2xvYmFsJyB8ICdtb2RhbCcge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgIHJldHVybiAnZWRpdG9yJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgbW9kYWwgaXMgb3BlblxuICAgICAgICBjb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwnKTtcbiAgICAgICAgaWYgKG1vZGFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJ21vZGFsJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICdnbG9iYWwnO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNTaG9ydGN1dFZhbGlkRm9yQ29udGV4dChzaG9ydGN1dDogS2V5Ym9hcmRTaG9ydGN1dCwgY29udGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghc2hvcnRjdXQuY29udGV4dCkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBzaG9ydGN1dC5jb250ZXh0ID09PSBjb250ZXh0IHx8IHNob3J0Y3V0LmNvbnRleHQgPT09ICdnbG9iYWwnO1xuICAgIH1cblxuICAgIHByaXZhdGUgZXhlY3V0ZUNvbW1hbmQoY29tbWFuZElkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IGNvbW1hbmRJZC5yZXBsYWNlKCd2YXVsdHBpbG90OicsICcnKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAoY29tbWFuZCkge1xuICAgICAgICAgICAgY2FzZSAnb3Blbi1jaGF0JzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5vcGVuQ2hhdE1vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzbWFydC1zZWFyY2gnOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm9wZW5TbWFydFNlYXJjaE1vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdxdWljay1jaGF0JzpcbiAgICAgICAgICAgICAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG4gICAgICAgICAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5xdWlja0NoYXRXaXRoU2VsZWN0aW9uKGVkaXRvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY29waWxvdC1jb21wbGV0ZSc6XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRWRpdG9yID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZWRpdG9yO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oYWN0aXZlRWRpdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdleGVjdXRlLXdvcmtmbG93JzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYW5hbHl6ZS12YXVsdCc6XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYW5hbHl6ZVZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdvcGVuLWRhc2hib2FyZCc6XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVGdWxsVGFiVmlldygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncGxhbi1teS1kYXknOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnBsYW5NeURheSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndmF1bHQtc3RydWN0dXJlJzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5vcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZmlsZS1vcGVyYXRpb25zJzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5vcGVuRmlsZU9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndmF1bHQtb3JnYW5pemVyJzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5vcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYmF0Y2gtb3BlcmF0aW9ucyc6XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ub3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzaG93LXNob3J0Y3V0cyc6XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U2hvcnRjdXRzSGVscCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmVmcmVzaC1jYWNoZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3BlcmZvcm1hbmNlLW1ldHJpY3MnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWdlbnQtbWFya2V0cGxhY2UnOlxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkFnZW50TWFya2V0cGxhY2UoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FnZW50LWV2b2x1dGlvbic6XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QWdlbnRFdm9sdXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3F1aWNrLW5vdGUnOlxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUXVpY2tOb3RlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbnNlcnQtdGVtcGxhdGUnOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0VGVtcGxhdGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2xpbmstYW5hbHl6ZXInOlxuICAgICAgICAgICAgICAgIHRoaXMuYW5hbHl6ZUxpbmtzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YWctbWFuYWdlcic6XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuVGFnTWFuYWdlcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZW5oYW5jZW1lbnQtZGVtbyc6XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuRW5oYW5jZW1lbnREZW1vKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFVua25vd24gY29tbWFuZDogJHtjb21tYW5kfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93U2hvcnRjdXRzSGVscCgpIHtcbiAgICAgICAgY29uc3Qgc2hvcnRjdXRzID0gQXJyYXkuZnJvbSh0aGlzLnNob3J0Y3V0cy52YWx1ZXMoKSk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmdlbmVyYXRlU2hvcnRjdXRzSGVscENvbnRlbnQoc2hvcnRjdXRzKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgbW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9ICdWYXVsdFBpbG90IEtleWJvYXJkIFNob3J0Y3V0cyc7XG4gICAgICAgIG1vZGFsLmNvbnRlbnRFbC5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVNob3J0Y3V0c0hlbHBDb250ZW50KHNob3J0Y3V0czogS2V5Ym9hcmRTaG9ydGN1dFtdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgY2F0ZWdvcml6ZWQgPSB0aGlzLmNhdGVnb3JpemVTaG9ydGN1dHMoc2hvcnRjdXRzKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBodG1sID0gJzxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXNob3J0Y3V0cy1oZWxwXCI+JztcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgW2NhdGVnb3J5LCBjYXRlZ29yeVNob3J0Y3V0c10gb2YgT2JqZWN0LmVudHJpZXMoY2F0ZWdvcml6ZWQpKSB7XG4gICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwic2hvcnRjdXQtY2F0ZWdvcnlcIj5gO1xuICAgICAgICAgICAgaHRtbCArPSBgPGgzPiR7Y2F0ZWdvcnl9PC9oMz5gO1xuICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInNob3J0Y3V0LWxpc3RcIj5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXRlZ29yeVNob3J0Y3V0cy5mb3JFYWNoKHNob3J0Y3V0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlDb21ibyA9IGAke3Nob3J0Y3V0Lm1vZGlmaWVycy5qb2luKCcgKyAnKX0gKyAke3Nob3J0Y3V0LmtleS5yZXBsYWNlKCdLZXknLCAnJyl9YDtcbiAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwic2hvcnRjdXQtaXRlbVwiPmA7XG4gICAgICAgICAgICAgICAgaHRtbCArPSBgPHNwYW4gY2xhc3M9XCJzaG9ydGN1dC1rZXlzXCI+JHtrZXlDb21ib308L3NwYW4+YDtcbiAgICAgICAgICAgICAgICBodG1sICs9IGA8c3BhbiBjbGFzcz1cInNob3J0Y3V0LWRlc2NcIj4ke3Nob3J0Y3V0LmRlc2NyaXB0aW9ufTwvc3Bhbj5gO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gYDwvZGl2PmA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaHRtbCArPSBgPC9kaXY+PC9kaXY+YDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgICAgcmV0dXJuIGh0bWw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYXRlZ29yaXplU2hvcnRjdXRzKHNob3J0Y3V0czogS2V5Ym9hcmRTaG9ydGN1dFtdKTogUmVjb3JkPHN0cmluZywgS2V5Ym9hcmRTaG9ydGN1dFtdPiB7XG4gICAgICAgIGNvbnN0IGNhdGVnb3JpZXM6IFJlY29yZDxzdHJpbmcsIEtleWJvYXJkU2hvcnRjdXRbXT4gPSB7XG4gICAgICAgICAgICAnQ29yZSBGZWF0dXJlcyc6IFtdLFxuICAgICAgICAgICAgJ1ZhdWx0IE1hbmFnZW1lbnQnOiBbXSxcbiAgICAgICAgICAgICdBZ2VudCBGZWF0dXJlcyc6IFtdLFxuICAgICAgICAgICAgJ1F1aWNrIEFjdGlvbnMnOiBbXSxcbiAgICAgICAgICAgICdTeXN0ZW0nOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHNob3J0Y3V0cy5mb3JFYWNoKHNob3J0Y3V0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBzaG9ydGN1dC5jb21tYW5kLnJlcGxhY2UoJ3ZhdWx0cGlsb3Q6JywgJycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoWydvcGVuLWNoYXQnLCAnY29waWxvdC1jb21wbGV0ZScsICdleGVjdXRlLXdvcmtmbG93JywgJ2FuYWx5emUtdmF1bHQnXS5pbmNsdWRlcyhjb21tYW5kKSkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNbJ0NvcmUgRmVhdHVyZXMnXS5wdXNoKHNob3J0Y3V0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWyd2YXVsdC1zdHJ1Y3R1cmUnLCAnZmlsZS1vcGVyYXRpb25zJywgJ3ZhdWx0LW9yZ2FuaXplcicsICdiYXRjaC1vcGVyYXRpb25zJ10uaW5jbHVkZXMoY29tbWFuZCkpIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzWydWYXVsdCBNYW5hZ2VtZW50J10ucHVzaChzaG9ydGN1dCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFsnYWdlbnQtbWFya2V0cGxhY2UnLCAnYWdlbnQtZXZvbHV0aW9uJ10uaW5jbHVkZXMoY29tbWFuZCkpIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzWydBZ2VudCBGZWF0dXJlcyddLnB1c2goc2hvcnRjdXQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChbJ3F1aWNrLW5vdGUnLCAnaW5zZXJ0LXRlbXBsYXRlJywgJ2xpbmstYW5hbHl6ZXInLCAndGFnLW1hbmFnZXInXS5pbmNsdWRlcyhjb21tYW5kKSkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNbJ1F1aWNrIEFjdGlvbnMnXS5wdXNoKHNob3J0Y3V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllc1snU3lzdGVtJ10ucHVzaChzaG9ydGN1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjYXRlZ29yaWVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVmcmVzaENhY2hlKCkge1xuICAgICAgICAvLyBJbXBsZW1lbnQgY2FjaGUgcmVmcmVzaCBmdW5jdGlvbmFsaXR5XG4gICAgICAgIG5ldyBOb3RpY2UoJ0NhY2hlIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dQZXJmb3JtYW5jZU1ldHJpY3MoKSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSBpbXBsZW1lbnRlZCB3aXRoIFByb2dyZXNzSW5kaWNhdG9yVUlcbiAgICAgICAgbmV3IE5vdGljZSgnUGVyZm9ybWFuY2UgbWV0cmljcyBmZWF0dXJlIGNvbWluZyBzb29uJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuQWdlbnRNYXJrZXRwbGFjZSgpIHtcbiAgICAgICAgLy8gVXNlIGV4aXN0aW5nIGFnZW50IG1hcmtldHBsYWNlIGlmIGF2YWlsYWJsZVxuICAgICAgICBuZXcgTm90aWNlKCdBZ2VudCBtYXJrZXRwbGFjZSBmZWF0dXJlIGNvbWluZyBzb29uJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93QWdlbnRFdm9sdXRpb24oKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0FnZW50IGV2b2x1dGlvbiBzdGF0dXMgZmVhdHVyZSBjb21pbmcgc29vbicpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUXVpY2tOb3RlKCkge1xuICAgICAgICBjb25zdCBuZXdGaWxlID0gdGhpcy5hcHAudmF1bHQuY3JlYXRlKFxuICAgICAgICAgICAgYFF1aWNrIE5vdGUgJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTkpfS5tZGAsXG4gICAgICAgICAgICAnIyBRdWljayBOb3RlXFxuXFxuJ1xuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgbmV3RmlsZS50aGVuKGZpbGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbnNlcnRUZW1wbGF0ZSgpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnVGVtcGxhdGUgaW5zZXJ0aW9uIGZlYXR1cmUgY29taW5nIHNvb24nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFuYWx5emVMaW5rcygpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTGluayBhbmFseXplciBmZWF0dXJlIGNvbWluZyBzb29uJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuVGFnTWFuYWdlcigpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnVGFnIG1hbmFnZXIgZmVhdHVyZSBjb21pbmcgc29vbicpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbkVuaGFuY2VtZW50RGVtbygpIHtcbiAgICAgICAgLy8gSW1wb3J0IGRlbW8gY2xhc3MgZHluYW1pY2FsbHkgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXG4gICAgICAgIGltcG9ydCgnLi9lbmhhbmNlbWVudC1kZW1vJykudGhlbigoeyBWYXVsdFBpbG90RW5oYW5jZW1lbnREZW1vIH0pID0+IHtcbiAgICAgICAgICAgIG5ldyBWYXVsdFBpbG90RW5oYW5jZW1lbnREZW1vKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBlbmhhbmNlbWVudCBkZW1vOicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VuaGFuY2VtZW50IGRlbW8gZmFpbGVkIHRvIGxvYWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0U2hvcnRjdXRzKCk6IEtleWJvYXJkU2hvcnRjdXRbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc2hvcnRjdXRzLnZhbHVlcygpKTtcbiAgICB9XG5cbiAgICBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHRNZW51RW5hYmxlZDtcbiAgICB9XG5cbiAgICBzZXRFbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudUVuYWJsZWQgPSBlbmFibGVkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmhhbmNlZCBDb21tYW5kcyBGYWN0b3J5XG4gKiBDcmVhdGVzIGVuaGFuY2VkIGNvbW1hbmQgZGVmaW5pdGlvbnMgZm9yIFZhdWx0UGlsb3RcbiAqL1xuZXhwb3J0IGNsYXNzIEVuaGFuY2VkQ29tbWFuZHNGYWN0b3J5IHtcbiAgICBzdGF0aWMgY3JlYXRlRW5oYW5jZWRDb21tYW5kcyhwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pOiBFbmhhbmNlZENvbW1hbmRbXSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICd2YXVsdHBpbG90LWVuaGFuY2VkLWNoYXQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdFbmhhbmNlZCBBSSBDaGF0JyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wZW4gZW5oYW5jZWQgQUkgY2hhdCB3aXRoIHJlYWwtdGltZSBwcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHBsdWdpbi5vcGVuQ2hhdE1vZGFsKCksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdBSSBGZWF0dXJlcycsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDFcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBSS1wb3dlcmVkIHNlYXJjaCB3aXRoIGNvbnRleHQgYXdhcmVuZXNzJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gcGx1Z2luLm9wZW5TbWFydFNlYXJjaE1vZGFsKCksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdTZWFyY2gnLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAndmF1bHRwaWxvdC1xdWljay1jb21wbGV0aW9uJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnUXVpY2sgQUkgQ29tcGxldGlvbicsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdHZXQgQUkgY29tcGxldGlvbiBmb3IgY3VycmVudCBjb250ZXh0JyxcbiAgICAgICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiBwbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yKSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ0FJIEZlYXR1cmVzJyxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogM1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZW5oYW5jZWQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdFbmhhbmNlZCBXb3JrZmxvdyBFeGVjdXRpb24nLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRXhlY3V0ZSB3b3JrZmxvd3Mgd2l0aCBwcm9ncmVzcyB0cmFja2luZycsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnQXV0b21hdGlvbicsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWFuYWx5c2lzJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnRW5oYW5jZWQgVmF1bHQgQW5hbHlzaXMnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcHJlaGVuc2l2ZSB2YXVsdCBhbmFseXNpcyB3aXRoIG9wdGltaXphdGlvbicsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHBsdWdpbi5hbmFseXplVmF1bHQoKSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ0FuYWx5dGljcycsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICd2YXVsdHBpbG90LWVuaGFuY2VtZW50LWRlbW8nLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdFbmhhbmNlbWVudCBGZWF0dXJlcyBEZW1vJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0RlbW9uc3RyYXRlIGtleWJvYXJkIHNob3J0Y3V0cywgcHJvZ3Jlc3MgaW5kaWNhdG9ycywgYW5kIHBlcmZvcm1hbmNlIGZlYXR1cmVzJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbXBvcnQoJy4vZW5oYW5jZW1lbnQtZGVtbycpLnRoZW4oKHsgVmF1bHRQaWxvdEVuaGFuY2VtZW50RGVtbyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVmF1bHRQaWxvdEVuaGFuY2VtZW50RGVtbyhwbHVnaW4uYXBwLCBwbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgZW5oYW5jZW1lbnQgZGVtbzonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFbmhhbmNlbWVudCBkZW1vIGZhaWxlZCB0byBsb2FkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdEZW1vJyxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogMTBcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgS2V5Ym9hcmRTaG9ydGN1dEhhbmRsZXIsIEVuaGFuY2VkQ29tbWFuZHNGYWN0b3J5IH07XG4iLCJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgRWRpdG9yLCBNYXJrZG93blZpZXcsIFRGaWxlLCBFZGl0b3JQb3NpdGlvbiwgcmVxdWVzdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5nVGFiLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFVTFRQSUxPVCwgVmF1bHRQaWxvdFZpZXcgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIsIFZhdWx0UGlsb3RGdWxsVGFiVmlldyB9IGZyb20gJy4vZnVsbC10YWItdmlldyc7XG5pbXBvcnQgeyBDaGF0TW9kYWwgfSBmcm9tICcuL2NoYXQtbW9kYWwnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RhbCB9IGZyb20gJy4vd29ya2Zsb3ctbW9kYWwnO1xuaW1wb3J0IHsgRXZvQWdlbnRYQ2xpZW50IH0gZnJvbSAnLi9hcGktY2xpZW50JztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncywgQ29waWxvdFJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmZXRjaFNjaGVkdWxlLCBpbmplY3RTY2hlZHVsZSwgdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duLCBmaW5kU2NoZWR1bGVTZWN0aW9uLCBmaW5kUGxhblNlY3Rpb24gfSBmcm9tICcuL3BsYW5uZXInO1xuaW1wb3J0IHsgcGxhbk15RGF5RGVidWdnZXIgfSBmcm9tICcuL3BsYW4tbXktZGF5LWRlYnVnJztcbmltcG9ydCB7IHNldEFwcCB9IGZyb20gJy4vdmF1bHQtdXRpbHMnO1xuaW1wb3J0IHsgVmF1bHRNYW5hZ2VtZW50Q2xpZW50IH0gZnJvbSAnLi92YXVsdC1hcGktY2xpZW50JztcbmltcG9ydCB7IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzIH0gZnJvbSAnLi92YXVsdC1jb21tYW5kcyc7XG5pbXBvcnQgeyBNb2RlbFNlbGVjdGlvblNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL01vZGVsU2VsZWN0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudERldGVjdG9yIH0gZnJvbSAnLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcbmltcG9ydCB7IFxuICBWYXVsdFN0cnVjdHVyZU1vZGFsLCBcbiAgU21hcnRTZWFyY2hNb2RhbCwgXG4gIEZpbGVPcGVyYXRpb25zTW9kYWxcbn0gZnJvbSAnLi92YXVsdC1tb2RhbHMnO1xuaW1wb3J0IHsgUGhhc2UzSW50ZWdyYXRpb24gfSBmcm9tICcuL2NvbXBvbmVudHMvUGhhc2UzSW50ZWdyYXRpb24nO1xuLy8gRW5oYW5jZWQgVUkgQ29tcG9uZW50c1xuaW1wb3J0IHsgVmF1bHRQaWxvdEVuaGFuY2VtZW50TWFuYWdlciB9IGZyb20gJy4vdmF1bHQtbWFuYWdlbWVudC9lbmhhbmNlZC11aS1jb21wb25lbnRzJztcbmltcG9ydCB7IEtleWJvYXJkU2hvcnRjdXRIYW5kbGVyLCBFbmhhbmNlZENvbW1hbmRzRmFjdG9yeSB9IGZyb20gJy4vdmF1bHQtbWFuYWdlbWVudC9lbmhhbmNlZC1jb21tYW5kcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhdWx0UGlsb3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5ncyE6IFZhdWx0UGlsb3RTZXR0aW5ncztcbiAgYXBpQ2xpZW50ITogRXZvQWdlbnRYQ2xpZW50O1xuICB2YXVsdENsaWVudCE6IFZhdWx0TWFuYWdlbWVudENsaWVudDtcbiAgbW9kZWxTZWxlY3Rpb25TZXJ2aWNlPzogTW9kZWxTZWxlY3Rpb25TZXJ2aWNlO1xuICBwaGFzZTNJbnRlZ3JhdGlvbj86IFBoYXNlM0ludGVncmF0aW9uO1xuICBlbmhhbmNlbWVudE1hbmFnZXI/OiBWYXVsdFBpbG90RW5oYW5jZW1lbnRNYW5hZ2VyO1xuICBrZXlib2FyZEhhbmRsZXI/OiBLZXlib2FyZFNob3J0Y3V0SGFuZGxlcjtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb3BpbG90RW5hYmxlZCA9IGZhbHNlO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gTG9hZCBlbmhhbmNlZCBVSSBzdHlsZXNcbiAgICB0aGlzLmxvYWRFbmhhbmNlZFVJU3R5bGVzKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIGFwcCBpbnN0YW5jZSBmb3IgdmF1bHQtdXRpbHNcbiAgICBzZXRBcHAodGhpcy5hcHApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBBUEkgY2xpZW50XG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB2YXVsdCBtYW5hZ2VtZW50IGlmIGVuYWJsZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBtb2RlbCBzZWxlY3Rpb24gaWYgZW5hYmxlZCAod2l0aCBlcnJvciBoYW5kbGluZylcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCkge1xuICAgICAgLy8gRG9uJ3QgYXdhaXQgLSBpbml0aWFsaXplIGluIGJhY2tncm91bmQgdG8gYXZvaWQgYmxvY2tpbmcgcGx1Z2luIGxvYWRcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ01vZGVsIHNlbGVjdGlvbiBpbml0aWFsaXphdGlvbiBmYWlsZWQgZHVyaW5nIHBsdWdpbiBsb2FkOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaWxlbnRseSBmYWlsIGR1cmluZyBwbHVnaW4gaW5pdGlhbGl6YXRpb25cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFRlc3QgYmFja2VuZCBjb25uZWN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIFZhdWx0UGlsb3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcsIDMwMDApO1xuICAgICAgICAvLyBDb25uZWN0IFdlYlNvY2tldCBpZiBlbmFibGVkXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCkge1xuICAgICAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkOicsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIEV2b0FnZW50WCBiYWNrZW5kIG9mZmxpbmUgLSBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yaycsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4pqg77iPIENhbm5vdCBjb25uZWN0IHRvIEV2b0FnZW50WCBiYWNrZW5kJywgNTAwMCk7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgdmlld3NcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgKGxlYWYpID0+IG5ldyBWYXVsdFBpbG90VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG4gICAgXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQixcbiAgICAgIChsZWFmKSA9PiBuZXcgVmF1bHRQaWxvdEZ1bGxUYWJWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignYm90JywgJ1ZhdWx0UGlsb3QnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZ0LmN0cmxLZXkgfHwgZXZ0Lm1ldGFLZXkpIHtcbiAgICAgICAgLy8gT3BlbiBmdWxsIHRhYiB2aWV3IG9uIEN0cmwvQ21kICsgY2xpY2tcbiAgICAgICAgdGhpcy5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEZWZhdWx0IGFjdGlvbjogb3BlbiBjaGF0IG1vZGFsXG4gICAgICAgIHRoaXMub3BlbkNoYXRNb2RhbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJpYmJvbkljb25FbC5hZGRDbGFzcygndmF1bHRwaWxvdC1yaWJib24tY2xhc3MnKTtcbiAgICByaWJib25JY29uRWwudGl0bGUgPSAnVmF1bHRQaWxvdCAoQ3RybCtjbGljayBmb3IgRGFzaGJvYXJkKSc7XG5cbiAgICAvLyBSZWdpc3RlciBjb21tYW5kc1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tY2hhdCcsXG4gICAgICBuYW1lOiAnT3BlbiBDaGF0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5DaGF0TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnZXhlY3V0ZS13b3JrZmxvdycsXG4gICAgICBuYW1lOiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuV29ya2Zsb3dNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhbmFseXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBbmFseXplIEN1cnJlbnQgVmF1bHQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYW5hbHl6ZVZhdWx0KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NvcGlsb3QtY29tcGxldGUnLFxuICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMuZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncXVpY2stY2hhdCcsXG4gICAgICBuYW1lOiAnUXVpY2sgQ2hhdCB3aXRoIFNlbGVjdGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi10YXNrcycsXG4gICAgICBuYW1lOiAnUGxhbiBUYXNrcyBmcm9tIE5vdGUnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5wbGFuVGFza3NGcm9tTm90ZShlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLW15LWRheScsXG4gICAgICBuYW1lOiAnUGxhbiBNeSBEYXknLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucGxhbk15RGF5KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tbXktZGF5LWRlYnVnJyxcbiAgICAgIG5hbWU6ICdQbGFuIE15IERheSAtIERlYnVnIENvbm5lY3Rpb24nLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZGVidWdQbGFuTXlEYXkoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAndGVzdC1tb2RlbC1zZWxlY3Rpb24nLFxuICAgICAgbmFtZTogJ1Rlc3QgU21hcnQgTW9kZWwgU2VsZWN0aW9uJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnRlc3RNb2RlbFNlbGVjdGlvbigpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdzaG93LW1vZGVsLWhlYWx0aCcsXG4gICAgICBuYW1lOiAnU2hvdyBNb2RlbCBIZWFsdGggU3RhdHVzJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNob3dNb2RlbEhlYWx0aCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdyZXRyeS1tb2RlbC1zZWxlY3Rpb24nLFxuICAgICAgbmFtZTogJ1JldHJ5IE1vZGVsIFNlbGVjdGlvbiBJbml0aWFsaXphdGlvbicsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5yZXRyeU1vZGVsU2VsZWN0aW9uTWFudWFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NoZWNrLXNlcnZpY2Utc3RhdHVzJyxcbiAgICAgIG5hbWU6ICdDaGVjayBWYXVsdFBpbG90IFNlcnZpY2UgU3RhdHVzJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmNoZWNrU2VydmljZVN0YXR1cygpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLXZhdWx0cGlsb3QtdmlldycsXG4gICAgICBuYW1lOiAnT3BlbiBWYXVsdFBpbG90IFZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tdmF1bHRwaWxvdC1mdWxsLXRhYicsXG4gICAgICBuYW1lOiAnT3BlbiBWYXVsdFBpbG90IERhc2hib2FyZCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZUZ1bGxUYWJWaWV3KClcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIHZhdWx0IG1hbmFnZW1lbnQgY29tbWFuZHNcbiAgICB0aGlzLnJlZ2lzdGVyVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcblxuICAgIC8vIEluaXRpYWxpemUgUGhhc2UgMyBmZWF0dXJlc1xuICAgIHRoaXMuaW5pdGlhbGl6ZVBoYXNlMygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBFbmhhbmNlbWVudCBNYW5hZ2VyIGFuZCBLZXlib2FyZCBTaG9ydGN1dHNcbiAgICB0aGlzLmluaXRpYWxpemVFbmhhbmNlbWVudE1hbmFnZXIoKTtcblxuICAgIC8vIFJlZ2lzdGVyIGVkaXRvciBldmVudHMgZm9yIGNvcGlsb3RcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90ICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVmF1bHRQaWxvdFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgfVxuXG4gIGFzeW5jIG9udW5sb2FkKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIpO1xuICAgIHRoaXMuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIGF3YWl0IHRoaXMuZGlzY29ubmVjdE1vZGVsU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5kaXNhYmxlUGhhc2UzKCk7XG4gICAgdGhpcy5kaXNhYmxlRW5oYW5jZW1lbnRNYW5hZ2VyKCk7XG4gIH1cblxuICAvLyBXZWJTb2NrZXQgTWFuYWdlbWVudFxuICBjb25uZWN0V2ViU29ja2V0KCkge1xuICAgIGlmICh0aGlzLndlYnNvY2tldENvbm5lY3RlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5hcGlDbGllbnQuY29ubmVjdFdlYlNvY2tldCh7XG4gICAgICBvbkNoYXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY2hhdCB1cGRhdGVzXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2hhdCB1cGRhdGU6JywgZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25Xb3JrZmxvd1Byb2dyZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICBuZXcgTm90aWNlKGBXb3JrZmxvdzogJHtkYXRhLnN0ZXB9YCwgMjAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db3BpbG90OiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgY29waWxvdCBzdWdnZXN0aW9uc1xuICAgICAgICB0aGlzLmhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uVmF1bHRTeW5jOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgdmF1bHQgc3luY2hyb25pemF0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdCBzeW5jIHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbkludGVudERlYnVnOiAoZGVidWcpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGludGVudCBkZWJ1ZyBpbmZvIChvbmx5IGluIGRlYnVnIG1vZGUpXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1ZyAmJiB0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnRlbnQgZGVidWc6JywgZGVidWcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgIG5ldyBOb3RpY2UoYFdlYlNvY2tldCBlcnJvcjogJHtlcnJvcn1gLCA1MDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkRpc2Nvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCkge1xuICAgIHRoaXMuYXBpQ2xpZW50LmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkO1xuICB9XG5cbiAgLy8gTW9kYWwgTWFuYWdlbWVudFxuICBvcGVuQ2hhdE1vZGFsKCkge1xuICAgIG5ldyBDaGF0TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5Xb3JrZmxvd01vZGFsKCkge1xuICAgIG5ldyBXb3JrZmxvd01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICAvLyBDb21tYW5kIEltcGxlbWVudGF0aW9uc1xuICBhc3luYyBhbmFseXplVmF1bHQoKSB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnQW5hbHl6aW5nIHZhdWx0Li4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBhbGwgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgIFxuICAgICAgLy8gSW5jbHVkZSB1cCB0byAxMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDEwKSkge1xuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtmaWxlQ29udGVudH1cXG5cXG5gO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmFuYWx5emVWYXVsdENvbnRleHQoe1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBhbmFseXNpc190eXBlOiAnaW5zaWdodHMnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgYW5hbHlzaXMgbm90ZVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHQgQW5hbHlzaXMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCBhbmFseXNpc0NvbnRlbnQgPSBgIyBWYXVsdCBBbmFseXNpcyAtICR7dGltZXN0YW1wfVxcblxcbmA7XG4gICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgQW5hbHlzaXNcXG5cXG4ke3Jlc3BvbnNlLmRhdGEuYW5hbHlzaXN9XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmluc2lnaHRzICYmIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgS2V5IEluc2lnaHRzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLmluc2lnaHRzLmZvckVhY2goaW5zaWdodCA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtpbnNpZ2h0fVxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zICYmIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIFJlY29tbWVuZGF0aW9uc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7cmVjfVxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGFuYWx5c2lzQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFZhdWx0IGFuYWx5c2lzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ0FuYWx5c2lzIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShgQW5hbHlzaXMgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCkge1xuICAgICAgbmV3IE5vdGljZSgnQ29waWxvdCBpcyBkaXNhYmxlZCBpbiBzZXR0aW5ncycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gY3VycmVudExpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICAgIC8vIENsaWVudC1zaWRlIHZhbGlkYXRpb24gdG8gcHJldmVudCA0MjIgZXJyb3JzXG4gICAgaWYgKCFmdWxsVGV4dCB8fCBmdWxsVGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdDYW5ub3QgY29tcGxldGUgZW1wdHkgdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvcGlsb3RDb21wbGV0aW9uKHtcbiAgICAgICAgdGV4dDogZnVsbFRleHQsXG4gICAgICAgIGN1cnNvcl9wb3NpdGlvbjogZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnNvciksXG4gICAgICAgIGZpbGVfdHlwZTogJ21hcmtkb3duJyxcbiAgICAgICAgY29udGV4dDogdGV4dEJlZm9yZUN1cnNvclxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGNvbXBsZXRpb24gYXQgY3Vyc29yXG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UocmVzcG9uc2UuZGF0YS5jb21wbGV0aW9uLCBjdXJzb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdDb21wbGV0aW9uIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDb3BpbG90IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDb3BpbG90IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jaGF0KHtcbiAgICAgICAgbWVzc2FnZTogYFBsZWFzZSBleHBsYWluIG9yIGFuYWx5emUgdGhpcyB0ZXh0OiBcIiR7c2VsZWN0aW9ufVwiYCxcbiAgICAgICAgdmF1bHRfY29udGV4dDogZWRpdG9yLmdldFZhbHVlKClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCByZXNwb25zZSBiZWxvdyBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcbiAgICAgICAgY29uc3QgbmV3TGluZSA9IGBcXG5cXG4qKlZhdWx0UGlsb3QgQW5hbHlzaXM6KipcXG4ke3Jlc3BvbnNlLmRhdGEucmVzcG9uc2V9XFxuXFxuYDtcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdMaW5lLCBjdXJzb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdBbmFseXNpcyBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwbGFuVGFza3NGcm9tTm90ZShlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBjb250ZW50IHRvIGFuYWx5emUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdQbGFubmluZyB0YXNrcy4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQucGxhblRhc2tzKHtcbiAgICAgICAgZ29hbDogYENyZWF0ZSBhIHRhc2sgcGxhbiBiYXNlZCBvbiB0aGlzIG5vdGU6ICR7YWN0aXZlRmlsZT8ubmFtZSB8fCAnVW50aXRsZWQnfWAsXG4gICAgICAgIGNvbnRleHQ6IGNvbnRlbnQsXG4gICAgICAgIHRpbWVmcmFtZTogJzEgd2VlaydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0YXNrIHBsYW4gbm90ZVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVGFzayBQbGFuIC0gJHthY3RpdmVGaWxlPy5iYXNlbmFtZSB8fCAnVW50aXRsZWQnfSAtICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFza0NvbnRlbnQgPSBgIyAke3Jlc3BvbnNlLmRhdGEucGxhbi50aXRsZX1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgJHtyZXNwb25zZS5kYXRhLnBsYW4uZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCoqRXN0aW1hdGVkIER1cmF0aW9uOioqICR7cmVzcG9uc2UuZGF0YS5wbGFuLmVzdGltYXRlZF9kdXJhdGlvbn1cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcyAmJiByZXNwb25zZS5kYXRhLnBsYW4udGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAjIyBUYXNrc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmZvckVhY2goKHRhc2s6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAnW3hdJyA6ICdbIF0nO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7Y2hlY2tib3h9ICoqJHt0YXNrLnRpdGxlfSoqICgke3Rhc2sucHJpb3JpdHl9IHByaW9yaXR5KVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAgJHt0YXNrLmRlc2NyaXB0aW9ufVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAgKkVzdGltYXRlZCB0aW1lOiAke3Rhc2suZXN0aW1hdGVkX3RpbWV9KlxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzICYmIHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIE1pbGVzdG9uZXNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcy5mb3JFYWNoKChtaWxlc3RvbmU6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYC0gKioke21pbGVzdG9uZS50aXRsZX0qKiAoJHttaWxlc3RvbmUudGFyZ2V0X2RhdGV9KVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAke21pbGVzdG9uZS5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCB0YXNrQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgcGxhbiBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdUYXNrIHBsYW5uaW5nIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFubmluZyBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwbGFuTXlEYXkoKSB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgW1BsYW4gTXkgRGF5XSBDb21tYW5kIHN0YXJ0ZWQnKTtcbiAgICBcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFtQbGFuIE15IERheV0gTm8gYWN0aXZlIGZpbGUgZm91bmQnKTtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBub3Rl4oCUb3BlbiB0b2RheVxcJ3MgZGFpbHkgbm90ZSBmaXJzdC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+TgSBbUGxhbiBNeSBEYXldIEFjdGl2ZSBmaWxlOicsIHtcbiAgICAgIG5hbWU6IGFjdGl2ZUZpbGUubmFtZSxcbiAgICAgIHBhdGg6IGFjdGl2ZUZpbGUucGF0aCxcbiAgICAgIGV4dGVuc2lvbjogYWN0aXZlRmlsZS5leHRlbnNpb25cbiAgICB9KTtcblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHlvdXIgZGF5IHdpdGggQUkuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TliBbUGxhbiBNeSBEYXldIFJlYWRpbmcgZmlsZSBjb250ZW50Li4uJyk7XG4gICAgICBcbiAgICAgIC8vIFJlYWQgdGhlIGVudGlyZSBmaWxlIGNvbnRlbnRcbiAgICAgIGNvbnN0IGZpbGVUZXh0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/Cfk50gW1BsYW4gTXkgRGF5XSBGaWxlIGNvbnRlbnQgcmVhZDonLCB7XG4gICAgICAgIGxlbmd0aDogZmlsZVRleHQubGVuZ3RoLFxuICAgICAgICBoYXNDb250ZW50OiBmaWxlVGV4dC50cmltKCkubGVuZ3RoID4gMCxcbiAgICAgICAgZmlyc3RMaW5lOiBmaWxlVGV4dC5zcGxpdCgnXFxuJylbMF0sXG4gICAgICAgIGxpbmVDb3VudDogZmlsZVRleHQuc3BsaXQoJ1xcbicpLmxlbmd0aFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gQ2hlY2tpbmcgQVBJIGNsaWVudC4uLicpO1xuICAgICAgY29uc29sZS5sb2coJ/CflJcgW1BsYW4gTXkgRGF5XSBBUEkgY2xpZW50IHN0YXR1czonLCB7XG4gICAgICAgIGV4aXN0czogISF0aGlzLmFwaUNsaWVudCxcbiAgICAgICAgdHlwZTogdHlwZW9mIHRoaXMuYXBpQ2xpZW50LFxuICAgICAgICBpc0Nvbm5lY3RlZDogdGhpcy5hcGlDbGllbnQgPyAnYXZhaWxhYmxlJyA6ICdub3QgYXZhaWxhYmxlJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghdGhpcy5hcGlDbGllbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAnQVBJIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQuIENoZWNrIFZhdWx0UGlsb3Qgc2V0dGluZ3MgYW5kIGNvbm5lY3Rpb24uJztcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn8J+TpCBbUGxhbiBNeSBEYXldIEZldGNoaW5nIHNjaGVkdWxlIGZyb20gRXZvQWdlbnRYLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIEZldGNoIHNjaGVkdWxlIGZyb20gRXZvQWdlbnRYIGluc3RlYWQgb2YgbG9jYWxob3N0OjMwMDBcbiAgICAgIGNvbnN0IHsgc2NoZWR1bGVNYXJrZG93biwgaGVhZGxpbmUgfSA9IGF3YWl0IGZldGNoU2NoZWR1bGUoZmlsZVRleHQsIHRoaXMuYXBpQ2xpZW50KTtcblxuICAgICAgY29uc29sZS5sb2coJ/Cfk4sgW1BsYW4gTXkgRGF5XSBTY2hlZHVsZSByZWNlaXZlZDonLCB7XG4gICAgICAgIG1hcmtkb3duTGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLmxlbmd0aCxcbiAgICAgICAgaGVhZGxpbmU6IGhlYWRsaW5lLFxuICAgICAgICBmaXJzdExpbmU6IHNjaGVkdWxlTWFya2Rvd24uc3BsaXQoJ1xcbicpWzBdXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFZhbGlkYXRpbmcgc2NoZWR1bGUuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgdGhlIHJldHVybmVkIHNjaGVkdWxlXG4gICAgICBpZiAoIXZhbGlkYXRlU2NoZWR1bGVNYXJrZG93bihzY2hlZHVsZU1hcmtkb3duKSkge1xuICAgICAgICBjb25zdCBlcnJvciA9ICdJbnZhbGlkIHNjaGVkdWxlIGRhdGEgcmVjZWl2ZWQgZnJvbSBBUEknO1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBWYWxpZGF0aW9uIGZhaWxlZDonLCB7XG4gICAgICAgICAgc2NoZWR1bGVNYXJrZG93bjogc2NoZWR1bGVNYXJrZG93bi5zdWJzdHJpbmcoMCwgMjAwKSxcbiAgICAgICAgICBsZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIEluamVjdGluZyBzY2hlZHVsZSBpbnRvIG5vdGUuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgbm90ZSBhbHJlYWR5IGhhcyBhIHBsYW4gc2VjdGlvbiAoY29tbWVudCB3cmFwcGVyKSBvciBzY2hlZHVsZSBzZWN0aW9uXG4gICAgICBjb25zdCBleGlzdGluZ1BsYW5TZWN0aW9uID0gZmluZFBsYW5TZWN0aW9uKGZpbGVUZXh0KTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nU2NoZWR1bGVTZWN0aW9uID0gZmluZFNjaGVkdWxlU2VjdGlvbihmaWxlVGV4dCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gRXhpc3Rpbmcgc2VjdGlvbnM6Jywge1xuICAgICAgICBoYXNQbGFuV3JhcHBlcjogISFleGlzdGluZ1BsYW5TZWN0aW9uLFxuICAgICAgICBoYXNTY2hlZHVsZVNlY3Rpb246ICEhZXhpc3RpbmdTY2hlZHVsZVNlY3Rpb24sXG4gICAgICAgIHBsYW5Db250ZW50OiBleGlzdGluZ1BsYW5TZWN0aW9uPy5bMl0/LnN1YnN0cmluZygwLCA1MCksXG4gICAgICAgIHNjaGVkdWxlSGVhZGluZzogZXhpc3RpbmdTY2hlZHVsZVNlY3Rpb24/LlsxXT8uc3Vic3RyaW5nKDAsIDUwKVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEluamVjdCB0aGUgc2NoZWR1bGUgaW50byB0aGUgbm90ZVxuICAgICAgY29uc3QgdXBkYXRlZFRleHQgPSBpbmplY3RTY2hlZHVsZShmaWxlVGV4dCwgc2NoZWR1bGVNYXJrZG93bik7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5K+IFtQbGFuIE15IERheV0gVXBkYXRpbmcgZmlsZS4uLicsIHtcbiAgICAgICAgb3JpZ2luYWxMZW5ndGg6IGZpbGVUZXh0Lmxlbmd0aCxcbiAgICAgICAgdXBkYXRlZExlbmd0aDogdXBkYXRlZFRleHQubGVuZ3RoLFxuICAgICAgICBjaGFuZ2VkOiBmaWxlVGV4dCAhPT0gdXBkYXRlZFRleHRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGZpbGVcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCB1cGRhdGVkVGV4dCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBGaWxlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAgIC8vIEhpZGUgdGhlIHByb2dyZXNzIG5vdGljZVxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgLy8gU2hvdyBzdWNjZXNzIG5vdGljZVxuICAgICAgY29uc3Qgc3VjY2Vzc01lc3NhZ2UgPSBoZWFkbGluZSA/IGAke2hlYWRsaW5lfSDinIVgIDogJ1NjaGVkdWxlIGluc2VydGVkIOKchSc7XG4gICAgICBjb25zb2xlLmxvZygn8J+OiSBbUGxhbiBNeSBEYXldIFN1Y2Nlc3M6Jywgc3VjY2Vzc01lc3NhZ2UpO1xuICAgICAgbmV3IE5vdGljZShzdWNjZXNzTWVzc2FnZSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gT3BlcmF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmVycm9yKCfwn5SNIFtQbGFuIE15IERheV0gRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgc3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZScsXG4gICAgICAgIHR5cGU6IHR5cGVvZiBlcnJvcixcbiAgICAgICAgbmFtZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm5hbWUgOiAnVW5rbm93bidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHR5cGVzIG9mIGVycm9ycyBmcm9tIEV2b0FnZW50WFxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBBbmFseXppbmcgZXJyb3IgbWVzc2FnZTonLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnQVBJIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEFQSSBjbGllbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IFZhdWx0UGlsb3Qgbm90IGNvbm5lY3RlZCB0byBFdm9BZ2VudFguIENoZWNrIHNldHRpbmdzIGFuZCByZXN0YXJ0IHBsdWdpbi4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2RvZXMgbm90IGhhdmUgcGxhblRhc2tzIG1ldGhvZCcpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gQVBJIGNsaWVudCBtaXNzaW5nIHBsYW5UYXNrcyBtZXRob2QnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogRXZvQWdlbnRYIEFQSSBjbGllbnQgb3V0ZGF0ZWQuIFBsZWFzZSB1cGRhdGUgVmF1bHRQaWxvdCBwbHVnaW4uJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdKU09OJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdJbnZhbGlkIHNjaGVkdWxlIGRhdGEnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IEludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gRXZvQWdlbnRYJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCcpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnbmV0d29yaycpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBOZXR3b3JrIGVycm9yJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IFVuYWJsZSB0byBjb25uZWN0IHRvIEV2b0FnZW50WCBzZXJ2ZXIuIENoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgc2VydmVyIHN0YXR1cy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBnZW5lcmF0ZSBzY2hlZHVsZScpIHx8IGVycm9yTWVzc2FnZS5pbmNsdWRlcygnU2NoZWR1bGUgZmV0Y2ggZmFpbGVkJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBTY2hlZHVsZSBnZW5lcmF0aW9uIGZhaWxlZCcpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBFdm9BZ2VudFggdGFzayBwbGFubmluZyBmYWlsZWQuIENoZWNrIHNlcnZlciBsb2dzIGZvciBkZXRhaWxzLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnTm8gZGF0YSBpbiBBUEkgcmVzcG9uc2UnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEVtcHR5IEFQSSByZXNwb25zZScpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBFdm9BZ2VudFggcmV0dXJuZWQgZW1wdHkgcmVzcG9uc2UuIFRyeSBhZ2FpbiBvciBjaGVjayBzZXJ2ZXIgc3RhdHVzLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIFVuaGFuZGxlZCBlcnJvcicpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoYFBsYW5uaW5nIGVycm9yOiAke2Vycm9yTWVzc2FnZS5zdWJzdHJpbmcoMCwgMTAwKX0ke2Vycm9yTWVzc2FnZS5sZW5ndGggPiAxMDAgPyAnLi4uJyA6ICcnfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBOb24tRXJyb3Igb2JqZWN0IHRocm93bicpO1xuICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogVW5rbm93biBlcnJvciBvY2N1cnJlZCB3aXRoIEV2b0FnZW50WCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBbHdheXMgbG9nIHRoZSBmdWxsIGVycm9yIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gRnVsbCBlcnJvciBsb2cgY29tcGxldGVkJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVidWdQbGFuTXlEYXkoKSB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5IERlYnVnXSBTdGFydGluZyBjb21wcmVoZW5zaXZlIGRlYnVnLi4uJyk7XG4gICAgcGxhbk15RGF5RGVidWdnZXIuY2xlYXJMb2dzKCk7XG4gICAgXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUnVubmluZyBQbGFuIE15IERheSBkaWFnbm9zdGljcy4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFRlc3QgMTogQ2hlY2sgYWN0aXZlIGZpbGVcbiAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgcGxhbk15RGF5RGVidWdnZXIubG9nKCfwn5OBIEFjdGl2ZSBmaWxlIGNoZWNrJywge1xuICAgICAgICBoYXNBY3RpdmVGaWxlOiAhIWFjdGl2ZUZpbGUsXG4gICAgICAgIGZpbGVOYW1lOiBhY3RpdmVGaWxlPy5uYW1lLFxuICAgICAgICBmaWxlRXh0ZW5zaW9uOiBhY3RpdmVGaWxlPy5leHRlbnNpb25cbiAgICAgIH0pO1xuXG4gICAgICAvLyBUZXN0IDI6IEFuYWx5emUgQVBJIGNsaWVudFxuICAgICAgY29uc3QgYXBpQW5hbHlzaXMgPSBwbGFuTXlEYXlEZWJ1Z2dlci5hbmFseXplQXBpQ2xpZW50KHRoaXMuYXBpQ2xpZW50KTtcbiAgICAgIHBsYW5NeURheURlYnVnZ2VyLmxvZygn8J+UlyBBUEkgY2xpZW50IGFuYWx5c2lzJywgYXBpQW5hbHlzaXMpO1xuXG4gICAgICAvLyBUZXN0IDM6IFRlc3QgRXZvQWdlbnRYIGNvbm5lY3Rpb25cbiAgICAgIGlmICh0aGlzLmFwaUNsaWVudCkge1xuICAgICAgICBjb25zdCBjb25uZWN0aW9uVGVzdCA9IGF3YWl0IHBsYW5NeURheURlYnVnZ2VyLnRlc3RDb25uZWN0aW9uKHRoaXMuYXBpQ2xpZW50KTtcbiAgICAgICAgcGxhbk15RGF5RGVidWdnZXIubG9nKCfwn4yQIENvbm5lY3Rpb24gdGVzdCByZXN1bHQnLCBjb25uZWN0aW9uVGVzdCk7XG5cbiAgICAgICAgLy8gVGVzdCA0OiBUZXN0IHRhc2sgcGxhbm5pbmcgZnVuY3Rpb25hbGl0eVxuICAgICAgICBpZiAoY29ubmVjdGlvblRlc3Quc3VjY2Vzcykge1xuICAgICAgICAgIGNvbnN0IHBsYW5uaW5nVGVzdCA9IGF3YWl0IHBsYW5NeURheURlYnVnZ2VyLnRlc3RUYXNrUGxhbm5pbmcoXG4gICAgICAgICAgICB0aGlzLmFwaUNsaWVudCwgXG4gICAgICAgICAgICAnVGVzdCBub3RlIHdpdGggc29tZSB0YXNrczpcXG4tIFdyaXRlIGNvZGVcXG4tIFRlc3QgZnVuY3Rpb25hbGl0eVxcbi0gUmV2aWV3IHJlc3VsdHMnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ/Cfk4sgVGFzayBwbGFubmluZyB0ZXN0IHJlc3VsdCcsIHBsYW5uaW5nVGVzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCA1OiBDaGVjayBzZXR0aW5nc1xuICAgICAgcGxhbk15RGF5RGVidWdnZXIubG9nKCfimpnvuI8gUGx1Z2luIHNldHRpbmdzJywge1xuICAgICAgICBiYWNrZW5kVXJsOiB0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsXG4gICAgICAgIGhhc0FwaUtleTogISF0aGlzLnNldHRpbmdzLmFwaUtleSxcbiAgICAgICAgZGVidWdNb2RlOiB0aGlzLnNldHRpbmdzLmRlYnVnTW9kZVxuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIC8vIFNob3cgcmVzdWx0cyBpbiBhIG1vZGFsIG9yIGNvbnNvbGVcbiAgICAgIGNvbnN0IGxvZ3MgPSBwbGFuTXlEYXlEZWJ1Z2dlci5nZXRMb2dzKCk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXkgRGVidWddIENvbXBsZXRlIGRpYWdub3N0aWMgbG9nOicsIGxvZ3MpO1xuICAgICAgXG4gICAgICBjb25zdCBsb2dTdW1tYXJ5ID0gbG9ncy5zbGljZSgtNSkuam9pbignXFxuJyk7IC8vIExhc3QgNSBlbnRyaWVzXG4gICAgICBuZXcgTm90aWNlKGBEZWJ1ZyBjb21wbGV0ZSEgQ2hlY2sgY29uc29sZSBmb3IgZnVsbCBsb2dzLlxcblxcbkxhc3QgZW50cmllczpcXG4ke2xvZ1N1bW1hcnl9YCwgMTAwMDApO1xuXG4gICAgICAvLyBDcmVhdGUgYSBkZWJ1ZyBmaWxlIGlmIGFjdGl2ZSBmaWxlIGV4aXN0c1xuICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgZGVidWdDb250ZW50ID0gYCMgUGxhbiBNeSBEYXkgRGVidWcgUmVwb3J0XFxuXFxuR2VuZXJhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cXG5cXG4jIyBEaWFnbm9zdGljIFJlc3VsdHNcXG5cXG5cXGBcXGBcXGBcXG4ke3BsYW5NeURheURlYnVnZ2VyLmV4cG9ydExvZ3MoKX1cXG5cXGBcXGBcXGBgO1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoYFBsYW4gTXkgRGF5IERlYnVnIC0gJHtEYXRlLm5vdygpfS5tZGAsIGRlYnVnQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0RlYnVnIHJlcG9ydCBzYXZlZCBhcyBuZXcgbm90ZSEnKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgcGxhbk15RGF5RGVidWdnZXIuZXJyb3IoJ0RlYnVnIHByb2Nlc3MgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgRGVidWcgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVCk7XG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IHJpZ2h0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgaWYgKHJpZ2h0TGVhZikge1xuICAgICAgICBhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfVkFVTFRQSUxPVCxcbiAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVGdWxsVGFiVmlldygpIHtcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCKTtcbiAgICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHRhYiBpbiB0aGUgbWFpbiB3b3Jrc3BhY2VcbiAgICAgIGNvbnN0IG5ld0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG4gICAgICBpZiAobmV3TGVhZikge1xuICAgICAgICBhd2FpdCBuZXdMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgdHlwZTogVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIsXG4gICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWF2ZXNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PSBWQVVMVCBNQU5BR0VNRU5UIE1FVEhPRFMgPT09XG5cbiAgaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVWYXVsdE1hbmFnZW1lbnQpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLnZhdWx0Q2xpZW50ID0gbmV3IFZhdWx0TWFuYWdlbWVudENsaWVudChcbiAgICAgIHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCxcbiAgICAgIHRoaXMuc2V0dGluZ3MuYXBpS2V5XG4gICAgKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50cyBhcmUgYXZhaWxhYmxlXG4gICAgdGhpcy5jaGVja1ZhdWx0TWFuYWdlbWVudEF2YWlsYWJpbGl0eSgpO1xuICAgIFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IG1hbmFnZW1lbnQgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja1ZhdWx0TWFuYWdlbWVudEF2YWlsYWJpbGl0eSgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IGEgc2ltcGxlIHRlc3QgY2FsbCB0byBzZWUgaWYgdmF1bHQgZW5kcG9pbnRzIGV4aXN0XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2V0dGluZ3MuYmFja2VuZFVybH0vYXBpL29ic2lkaWFuL3ZhdWx0L3N0cnVjdHVyZWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgIC4uLih0aGlzLnNldHRpbmdzLmFwaUtleSAmJiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuc2V0dGluZ3MuYXBpS2V5fWAgfSlcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlLCBtYXhfZGVwdGg6IDEgfSlcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgLy8gRW5kcG9pbnQgZG9lc24ndCBleGlzdCAtIGRpc2FibGUgdmF1bHQgbWFuYWdlbWVudFxuICAgICAgICB0aGlzLmRpc2FibGVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFZhdWx0IG1hbmFnZW1lbnQgZW5kcG9pbnRzIG5vdCBhdmFpbGFibGUsIGRpc2FibGluZyBmZWF0dXJlcycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gTmV0d29yayBlcnJvciBvciBvdGhlciBpc3N1ZSAtIGtlZXAgdmF1bHQgbWFuYWdlbWVudCBidXQgbG9nIHdhcm5pbmdcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogQ291bGQgbm90IGNoZWNrIHZhdWx0IG1hbmFnZW1lbnQgYXZhaWxhYmlsaXR5OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBkaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCkge1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBudWxsIGFzIGFueTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdCBtYW5hZ2VtZW50IGRpc2FibGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcygpIHtcbiAgICBjb25zdCBjb21tYW5kcyA9IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG4gICAgY29tbWFuZHMuZm9yRWFjaChjb21tYW5kID0+IHtcbiAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgIC4uLmNvbW1hbmQsXG4gICAgICAgIGNhbGxiYWNrOiBjb21tYW5kLmNhbGxiYWNrPy5iaW5kKHRoaXMpLFxuICAgICAgICBlZGl0b3JDYWxsYmFjazogY29tbWFuZC5lZGl0b3JDYWxsYmFjaz8uYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBNb2RhbCBvcGVuaW5nIG1ldGhvZHMgZm9yIHZhdWx0IG1hbmFnZW1lbnRcbiAgb3BlblZhdWx0U3RydWN0dXJlTW9kYWwoKSB7XG4gICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmV3IFZhdWx0U3RydWN0dXJlTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5TbWFydFNlYXJjaE1vZGFsKHF1ZXJ5Pzogc3RyaW5nLCB0eXBlPzogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgU21hcnRTZWFyY2hNb2RhbCh0aGlzLmFwcCwgdGhpcyk7XG4gICAgaWYgKHF1ZXJ5KSBtb2RhbC5zZXRJbml0aWFsUXVlcnkocXVlcnksIHR5cGUgYXMgYW55KTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBvcGVuRmlsZU9wZXJhdGlvbnNNb2RhbChwYXRoPzogc3RyaW5nLCBvcGVyYXRpb24/OiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGaWxlT3BlcmF0aW9uc01vZGFsKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBpZiAocGF0aCkgbW9kYWwuc2V0SW5pdGlhbFBhdGgocGF0aCk7XG4gICAgaWYgKG9wZXJhdGlvbikgbW9kYWwuc2V0T3BlcmF0aW9uKG9wZXJhdGlvbik7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgb3BlblZhdWx0T3JnYW5pemVyTW9kYWwoKSB7XG4gICAgbmV3IE5vdGljZSgnVmF1bHQgb3JnYW5pemVyIG1vZGFsIG5vdCB5ZXQgaW1wbGVtZW50ZWQnKTtcbiAgfVxuXG4gIG9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCgpIHtcbiAgICBuZXcgTm90aWNlKCdCYXRjaCBvcGVyYXRpb25zIG1vZGFsIG5vdCB5ZXQgaW1wbGVtZW50ZWQnKTtcbiAgfVxuXG4gIC8vID09PSBFTkQgVkFVTFQgTUFOQUdFTUVOVCBNRVRIT0RTID09PVxuXG4gIC8vID09PSBQSEFTRSAzIElOVEVHUkFUSU9OID09PVxuXG4gIGluaXRpYWxpemVQaGFzZTMoKSB7XG4gICAgLy8gRm9yIG5vdywgYWx3YXlzIGluaXRpYWxpemUgUGhhc2UgMyBmZWF0dXJlc1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnBoYXNlM0ludGVncmF0aW9uID0gbmV3IFBoYXNlM0ludGVncmF0aW9uKHRoaXMsIHtcbiAgICAgICAgYXV0b1Nob3dPbmJvYXJkaW5nOiAhdGhpcy5zZXR0aW5ncy5vbmJvYXJkaW5nQ29tcGxldGVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBMb2FkIHRoZSBQaGFzZSAzIGludGVncmF0aW9uXG4gICAgICB0aGlzLnBoYXNlM0ludGVncmF0aW9uLm9ubG9hZCgpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1BoYXNlIDMgZmVhdHVyZXMgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3cgb25ib2FyZGluZyBmb3IgZmlyc3QtdGltZSB1c2Vyc1xuICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLm9uYm9hcmRpbmdDb21wbGV0ZSkge1xuICAgICAgICAvLyBEZWxheSBvbmJvYXJkaW5nIHNsaWdodGx5IHRvIGxldCBwbHVnaW4gZnVsbHkgbG9hZFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBoYXNlM0ludGVncmF0aW9uPy5zaG93T25ib2FyZGluZ0lmTmVlZGVkKCk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBQaGFzZSAzIGZlYXR1cmVzOicsIGVycm9yKTtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBuZXcgTm90aWNlKCdQaGFzZSAzIGZlYXR1cmVzIGZhaWxlZCB0byBpbml0aWFsaXplIC0gY2hlY2sgY29uc29sZSBmb3IgZGV0YWlscycsIDUwMDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRpc2FibGVQaGFzZTMoKSB7XG4gICAgaWYgKHRoaXMucGhhc2UzSW50ZWdyYXRpb24pIHtcbiAgICAgIHRoaXMucGhhc2UzSW50ZWdyYXRpb24ub251bmxvYWQoKTtcbiAgICAgIHRoaXMucGhhc2UzSW50ZWdyYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ1BoYXNlIDMgZmVhdHVyZXMgZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT0gRU5EIFBIQVNFIDMgSU5URUdSQVRJT04gPT09XG5cbiAgLy8gPT09IEVOSEFOQ0VNRU5UIE1BTkFHRVIgSU5URUdSQVRJT04gPT09XG5cbiAgaW5pdGlhbGl6ZUVuaGFuY2VtZW50TWFuYWdlcigpIHtcbiAgICB0cnkge1xuICAgICAgLy8gSW5pdGlhbGl6ZSBFbmhhbmNlbWVudCBNYW5hZ2VyXG4gICAgICB0aGlzLmVuaGFuY2VtZW50TWFuYWdlciA9IG5ldyBWYXVsdFBpbG90RW5oYW5jZW1lbnRNYW5hZ2VyKHRoaXMpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRoZSBlbmhhbmNlbWVudCBtYW5hZ2VyXG4gICAgICB0aGlzLmVuaGFuY2VtZW50TWFuYWdlci5pbml0aWFsaXplKCkudGhlbigoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90IEVuaGFuY2VtZW50IE1hbmFnZXIgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgRW5oYW5jZW1lbnQgTWFuYWdlcjonLCBlcnJvcik7XG4gICAgICB9KTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBLZXlib2FyZCBTaG9ydGN1dCBIYW5kbGVyXG4gICAgICB0aGlzLmtleWJvYXJkSGFuZGxlciA9IG5ldyBLZXlib2FyZFNob3J0Y3V0SGFuZGxlcih0aGlzKTtcbiAgICAgIFxuICAgICAgLy8gUmVnaXN0ZXIgZ2xvYmFsIGtleWJvYXJkIGV2ZW50IGxpc3RlbmVyXG4gICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmtleWJvYXJkSGFuZGxlcj8uaGFuZGxlS2V5RG93bihldmVudCkpIHtcbiAgICAgICAgICAvLyBFdmVudCB3YXMgaGFuZGxlZCBieSBrZXlib2FyZCBzaG9ydGN1dHNcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZWdpc3RlciBlbmhhbmNlZCBjb21tYW5kc1xuICAgICAgY29uc3QgZW5oYW5jZWRDb21tYW5kcyA9IEVuaGFuY2VkQ29tbWFuZHNGYWN0b3J5LmNyZWF0ZUVuaGFuY2VkQ29tbWFuZHModGhpcyk7XG4gICAgICBlbmhhbmNlZENvbW1hbmRzLmZvckVhY2goY29tbWFuZCA9PiB7XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgaWQ6IGNvbW1hbmQuaWQsXG4gICAgICAgICAgbmFtZTogY29tbWFuZC5uYW1lLFxuICAgICAgICAgIGNhbGxiYWNrOiBjb21tYW5kLmNhbGxiYWNrLFxuICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrLFxuICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IGNvbW1hbmQuY2hlY2tDYWxsYmFja1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0tleWJvYXJkIHNob3J0Y3V0cyBhbmQgZW5oYW5jZWQgY29tbWFuZHMgaW5pdGlhbGl6ZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgRW5oYW5jZW1lbnQgTWFuYWdlcjonLCBlcnJvcik7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnRW5oYW5jZW1lbnQgZmVhdHVyZXMgZmFpbGVkIHRvIGluaXRpYWxpemUgLSBjaGVjayBjb25zb2xlIGZvciBkZXRhaWxzJywgNTAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZUVuaGFuY2VtZW50TWFuYWdlcigpIHtcbiAgICBpZiAodGhpcy5lbmhhbmNlbWVudE1hbmFnZXIpIHtcbiAgICAgIHRoaXMuZW5oYW5jZW1lbnRNYW5hZ2VyLnVubG9hZCgpO1xuICAgICAgdGhpcy5lbmhhbmNlbWVudE1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmtleWJvYXJkSGFuZGxlcikge1xuICAgICAgdGhpcy5rZXlib2FyZEhhbmRsZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygnRW5oYW5jZW1lbnQgTWFuYWdlciBkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PSBFTkQgRU5IQU5DRU1FTlQgTUFOQUdFUiBJTlRFR1JBVElPTiA9PT1cblxuICAvLyBBdXRvLWNvbXBsZXRpb24gaGFuZGxpbmdcbiAgcHJpdmF0ZSBoYW5kbGVLZXlVcChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUgfHwgIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NtLWNvbnRlbnQnKSkgcmV0dXJuO1xuXG4gICAgLy8gT25seSB0cmlnZ2VyIG9uIHNwZWNpZmljIGtleXMgYW5kIGNvbmRpdGlvbnNcbiAgICBpZiAoIXRoaXMuc2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZShldmVudCkpIHJldHVybjtcblxuICAgIC8vIERlYm91bmNlIGF1dG8tY29tcGxldGlvbiByZXF1ZXN0cyB3aXRoIGxvbmdlciBkZWxheVxuICAgIGNsZWFyVGltZW91dCgodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQpO1xuICAgICh0aGlzIGFzIGFueSkuYXV0b0NvbXBsZXRlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyQXV0b0NvbXBsZXRpb24oKTtcbiAgICB9LCAzMDAwKTsgLy8gSW5jcmVhc2VkIHRvIDMgc2Vjb25kc1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRUcmlnZ2VyQXV0b0NvbXBsZXRlKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciBvbiBuYXZpZ2F0aW9uIG9yIG1vZGlmaWVyIGtleXNcbiAgICBjb25zdCBub25UcmlnZ2VyS2V5cyA9IFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnLCAnVGFiJywgJ1NoaWZ0JywgJ0NvbnRyb2wnLCAnQWx0JywgJ01ldGEnLCAnRXNjYXBlJ107XG4gICAgaWYgKG5vblRyaWdnZXJLZXlzLmluZGV4T2YoZXZlbnQua2V5KSAhPT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBcbiAgICAvLyBPbmx5IHRyaWdnZXIgYXQgdGhlIGVuZCBvZiBhIGxpbmVcbiAgICBpZiAoY3Vyc29yLmNoICE9PSBjdXJyZW50TGluZS5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3Igc2VudGVuY2UtZW5kaW5nIHRyaWdnZXJzXG4gICAgY29uc3QgdHJpZ2dlckNoYXJzID0gWycuJywgJyEnLCAnPycsICc6JywgJ1xcbiddO1xuICAgIGNvbnN0IGxhc3RDaGFyID0gY3VycmVudExpbmUuc2xpY2UoLTEpO1xuICAgIFxuICAgIC8vIFRyaWdnZXIgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyB3aXRoIHNwYWNlXG4gICAgaWYgKHRyaWdnZXJDaGFycy5pbmRleE9mKGxhc3RDaGFyKSAhPT0gLTEgJiYgZXZlbnQua2V5ID09PSAnICcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcmlnZ2VyIGFmdGVyIEVudGVyIGtleSAobmV3IGxpbmUpXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiBjdXJyZW50TGluZS50cmltKCkubGVuZ3RoID4gMTApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRyaWdnZXJBdXRvQ29tcGxldGlvbigpIHtcbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcblxuICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCBmdWxsVGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIFxuICAgIC8vIE1vcmUgcmVzdHJpY3RpdmUgY29uZGl0aW9ucyBmb3IgYXV0by1jb21wbGV0aW9uXG4gICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKS5sZW5ndGggPCAxMCB8fCBjdXJzb3IuY2ggIT09IGN1cnJlbnRMaW5lLmxlbmd0aCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFByZXZlbnQgNDIyIGVycm9ycyBmcm9tIGVtcHR5IHRleHRcbiAgICBpZiAoIWZ1bGxUZXh0IHx8IGZ1bGxUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIC8vIEFkZCBjb29sZG93biB0byBwcmV2ZW50IHRvbyBmcmVxdWVudCByZXF1ZXN0c1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgbGFzdFJlcXVlc3QgPSAodGhpcyBhcyBhbnkpLmxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0IHx8IDA7XG4gICAgaWYgKG5vdyAtIGxhc3RSZXF1ZXN0IDwgMTAwMDApIHJldHVybjsgLy8gMTAgc2Vjb25kIGNvb2xkb3duXG4gICAgXG4gICAgKHRoaXMgYXMgYW55KS5sYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCA9IG5vdztcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvcGlsb3RDb21wbGV0aW9uKHtcbiAgICAgICAgdGV4dDogZnVsbFRleHQsXG4gICAgICAgIGN1cnNvcl9wb3NpdGlvbjogZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnNvciksXG4gICAgICAgIGZpbGVfdHlwZTogJ21hcmtkb3duJ1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNob3cgc3VnZ2VzdGlvbnMgKGZvciBub3cganVzdCBzaG93IGZpcnN0IHN1Z2dlc3Rpb24pXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYEF1dG8tc3VnZ2VzdGlvbjogJHtyZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zWzBdfWAsIDMwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgZm9yIGF1dG8tY29tcGxldGlvblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dG8tY29tcGxldGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbihkYXRhOiBDb3BpbG90UmVzcG9uc2UpIHtcbiAgICAvLyBIYW5kbGUgcmVhbC10aW1lIGNvcGlsb3Qgc3VnZ2VzdGlvbnMgZnJvbSBXZWJTb2NrZXRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoYExpdmUgc3VnZ2VzdGlvbjogJHtkYXRhLmNvbXBsZXRpb259YCwgMjAwMCk7XG4gICAgfVxuICB9XG5cbiAgLy8gU2V0dGluZ3MgbWFuYWdlbWVudFxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgQVBJIGNsaWVudCBpZiBVUkwgY2hhbmdlZFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcbiAgICBcbiAgICAvLyBSZWluaXRpYWxpemUgdmF1bHQgbWFuYWdlbWVudCBpZiBzZXR0aW5ncyBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVWYXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVpbml0aWFsaXplIG1vZGVsIHNlbGVjdGlvbiBpZiBzZXR0aW5ncyBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmVuYWJsZWQpIHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuZGlzY29ubmVjdE1vZGVsU2VsZWN0aW9uKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlY29ubmVjdCBXZWJTb2NrZXQgaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiAhdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBNb2RlbCBTZWxlY3Rpb24gTWFuYWdlbWVudCBNZXRob2RzXG4gIGFzeW5jIGluaXRpYWxpemVNb2RlbFNlbGVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmVuYWJsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgc2VsZWN0aW9uIGRpc2FibGVkIGluIHNldHRpbmdzJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIGVudmlyb25tZW50XG4gICAgICBjb25zdCBlbnYgPSBFbnZpcm9ubWVudERldGVjdG9yLmRldGVjdCgpO1xuICAgICAgaWYgKCFlbnYuaGFzSFRUUCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgdHJhbnNwb3J0IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIH1cblxuICAgICAgLy8gSW5pdGlhbGl6ZSBzZXJ2aWNlIHdpdGggZXJyb3IgYm91bmRhcnlcbiAgICAgIHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlID0gbmV3IE1vZGVsU2VsZWN0aW9uU2VydmljZShcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLFxuICAgICAgICB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmRldnBpcGVQYXRoLFxuICAgICAgICB7XG4gICAgICAgICAgbW9uaXRvcmluZ19pbnRlcnZhbDogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5tb25pdG9yaW5nSW50ZXJ2YWwsXG4gICAgICAgICAgZmFsbGJhY2tfZW5hYmxlZDogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5mYWxsYmFja0VuYWJsZWQsXG4gICAgICAgICAgY2FjaGVfZHVyYXRpb246IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uY2FjaGVEdXJhdGlvbixcbiAgICAgICAgICByZXRyeV9hdHRlbXB0czogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5yZXRyeUF0dGVtcHRzLFxuICAgICAgICAgIHRpbWVvdXQ6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udGltZW91dCxcbiAgICAgICAgICBkZWJ1Z19tb2RlOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmRlYnVnTW9kZVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS51cGRhdGVQcmVmZXJlbmNlcyh7XG4gICAgICAgIHByaW9yaXR5OiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnVzZXJQcmVmZXJlbmNlcy5wcmlvcml0eSxcbiAgICAgICAgbWF4X2Nvc3RfcGVyX3JlcXVlc3Q6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udXNlclByZWZlcmVuY2VzLm1heENvc3RQZXJSZXF1ZXN0LFxuICAgICAgICBwcmVmZXJyZWRfcHJvdmlkZXJzOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnVzZXJQcmVmZXJlbmNlcy5wcmVmZXJyZWRQcm92aWRlcnMsXG4gICAgICAgIGZhbGxiYWNrX2VuYWJsZWQ6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZmFsbGJhY2tFbmFibGVkLFxuICAgICAgICBxdWFsaXR5X3RocmVzaG9sZDogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi51c2VyUHJlZmVyZW5jZXMucXVhbGl0eVRocmVzaG9sZCxcbiAgICAgICAgdGltZW91dF9wcmVmZXJlbmNlOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnRpbWVvdXRcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5pbml0aWFsaXplKCk7XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kZWxTZWxlY3Rpb25TZXJ2aWNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKCfwn6SWIFNtYXJ0IG1vZGVsIHNlbGVjdGlvbiBlbmFibGVkJywgMzAwMCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgTW9kZWxTZWxlY3Rpb25TZXJ2aWNlOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdyB1c2VyLWZyaWVuZGx5IGVycm9yIG1lc3NhZ2VcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdub3QgYWNjZXNzaWJsZScpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gTW9kZWwgc2VsZWN0aW9uIHNlcnZpY2UgdW5hdmFpbGFibGUgLSB1c2luZyBmYWxsYmFjayBtb2RlJywgNDAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIERvbid0IHNob3cgZXJyb3IgdG8gdXNlciBpbiBwcm9kdWN0aW9uIC0ganVzdCBsb2cgaXRcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0cmFuc3BvcnQgbm90IGF2YWlsYWJsZScpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIE1vZGVsIHNlbGVjdGlvbiBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnLCA1MDAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBNb2RlbCBzZWxlY3Rpb24gaW5pdGlhbGl6YXRpb24gZmFpbGVkJywgMzAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCByZXRyeSBtZWNoYW5pc21cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnJldHJ5QXR0ZW1wdHMgPiAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmV0cnlNb2RlbFNlbGVjdGlvbkluaXQoMSk7XG4gICAgICAgIH0sIDEwMDAwKTsgLy8gUmV0cnkgYWZ0ZXIgMTAgc2Vjb25kc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmV0cnlNb2RlbFNlbGVjdGlvbkluaXQoYXR0ZW1wdDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKGF0dGVtcHQgPiAodGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8ucmV0cnlBdHRlbXB0cyB8fCAzKSkge1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzZWxlY3Rpb24gaW5pdGlhbGl6YXRpb24gcmV0cnkgbGltaXQgcmVhY2hlZCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFJldHJ5aW5nIG1vZGVsIHNlbGVjdGlvbiBpbml0aWFsaXphdGlvbiAoYXR0ZW1wdCAke2F0dGVtcHR9KWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVNb2RlbFNlbGVjdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmIGZvciByZXRyaWVzXG4gICAgICBjb25zdCBkZWxheSA9IE1hdGgubWluKDMwMDAwLCA1MDAwICogTWF0aC5wb3coMiwgYXR0ZW1wdCAtIDEpKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnJldHJ5TW9kZWxTZWxlY3Rpb25Jbml0KGF0dGVtcHQgKyAxKTtcbiAgICAgIH0sIGRlbGF5KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja1NlcnZpY2VTdGF0dXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnQ2hlY2tpbmcgVmF1bHRQaWxvdCBzZXJ2aWNlIHN0YXR1cy4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgc3RhdHVzVGV4dCA9ICfwn5SNIFZhdWx0UGlsb3QgU2VydmljZSBTdGF0dXM6XFxuXFxuJztcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgbWFpbiBiYWNrZW5kIGNvbm5lY3Rpb25cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBzdGF0dXNUZXh0ICs9ICfinIUgTWFpbiBCYWNrZW5kOiBDb25uZWN0ZWRcXG4nO1xuICAgICAgICAgIHN0YXR1c1RleHQgKz0gYCAgIFNlcnZlcjogJHt0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmx9XFxuYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0dXNUZXh0ICs9ICfinYwgTWFpbiBCYWNrZW5kOiBGYWlsZWRcXG4nO1xuICAgICAgICAgIHN0YXR1c1RleHQgKz0gYCAgIEVycm9yOiAke3Jlc3BvbnNlLmVycm9yfVxcbmA7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHN0YXR1c1RleHQgKz0gJ+KdjCBNYWluIEJhY2tlbmQ6IENvbm5lY3Rpb24gRXJyb3JcXG4nO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBXZWJTb2NrZXQgY29ubmVjdGlvblxuICAgICAgaWYgKHRoaXMuaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSkge1xuICAgICAgICBzdGF0dXNUZXh0ICs9ICfinIUgV2ViU29ja2V0OiBDb25uZWN0ZWRcXG4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHVzVGV4dCArPSAn4p2MIFdlYlNvY2tldDogRGlzY29ubmVjdGVkXFxuJztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgbW9kZWwgc2VsZWN0aW9uIHNlcnZpY2VcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5lbmFibGVkKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSAmJiB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgc3RhdHVzVGV4dCArPSAn4pyFIE1vZGVsIFNlbGVjdGlvbjogQ29ubmVjdGVkXFxuJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0dXNUZXh0ICs9ICfinYwgTW9kZWwgU2VsZWN0aW9uOiBOb3QgQXZhaWxhYmxlXFxuJztcbiAgICAgICAgICBpZiAoIXRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgICAgICBzdGF0dXNUZXh0ICs9ICcgICBSZWFzb246IFNlcnZpY2Ugbm90IGluaXRpYWxpemVkXFxuJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhdHVzVGV4dCArPSAnICAgUmVhc29uOiBTZXJ2aWNlIGRpc2Nvbm5lY3RlZFxcbic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXNUZXh0ICs9ICfimqDvuI8gTW9kZWwgU2VsZWN0aW9uOiBEaXNhYmxlZCBpbiBzZXR0aW5nc1xcbic7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHZhdWx0IG1hbmFnZW1lbnRcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgc3RhdHVzVGV4dCArPSAn4pyFIFZhdWx0IE1hbmFnZW1lbnQ6IEVuYWJsZWRcXG4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXR1c1RleHQgKz0gJ+KdjCBWYXVsdCBNYW5hZ2VtZW50OiBGYWlsZWQgdG8gaW5pdGlhbGl6ZVxcbic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1c1RleHQgKz0gJ+KaoO+4jyBWYXVsdCBNYW5hZ2VtZW50OiBEaXNhYmxlZCBpbiBzZXR0aW5nc1xcbic7XG4gICAgICB9XG4gICAgICBcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKHN0YXR1c1RleHQsIDE1MDAwKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90IFNlcnZpY2UgU3RhdHVzOicsIHN0YXR1c1RleHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGDinYwgRmFpbGVkIHRvIGNoZWNrIHNlcnZpY2Ugc3RhdHVzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJldHJ5TW9kZWxTZWxlY3Rpb25NYW51YWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlICYmIHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ01vZGVsIHNlbGVjdGlvbiBhbHJlYWR5IGNvbm5lY3RlZCcsIDMwMDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1JldHJ5aW5nIG1vZGVsIHNlbGVjdGlvbiBpbml0aWFsaXphdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVNb2RlbFNlbGVjdGlvbigpO1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KchSBNb2RlbCBzZWxlY3Rpb24gY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScsIDMwMDApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShg4p2MIE1vZGVsIHNlbGVjdGlvbiByZXRyeSBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGlzY29ubmVjdE1vZGVsU2VsZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbFNlbGVjdGlvblNlcnZpY2UgZGlzY29ubmVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRpc2Nvbm5lY3RpbmcgTW9kZWxTZWxlY3Rpb25TZXJ2aWNlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB0ZXN0TW9kZWxTZWxlY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgbmV3IE5vdGljZSgn4p2MIE1vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIG5vdCBpbml0aWFsaXplZCcsIDUwMDApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ/CfpJYgVGVzdGluZyBtb2RlbCBzZWxlY3Rpb24uLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0YXNrcyA9IFtcbiAgICAgICAgeyB0eXBlOiAndGV4dC1nZW5lcmF0aW9uJywgcXVhbGl0eTogJ21lZGl1bScgYXMgY29uc3QgfSxcbiAgICAgICAgeyB0eXBlOiAnY29kZS1nZW5lcmF0aW9uJywgcXVhbGl0eTogJ2hpZ2gnIGFzIGNvbnN0IH0sXG4gICAgICAgIHsgdHlwZTogJ2NoYXQnLCBxdWFsaXR5OiAnbG93JyBhcyBjb25zdCB9LFxuICAgICAgICB7IHR5cGU6ICdzdW1tYXJpemF0aW9uJywgcXVhbGl0eTogJ21lZGl1bScgYXMgY29uc3QgfVxuICAgICAgXTtcblxuICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdEZvclRhc2sodGFzay50eXBlLCB0YXNrLnF1YWxpdHkpO1xuICAgICAgICAgIHJlc3VsdHMucHVzaChg4pyFICR7dGFzay50eXBlfTogJHtzZWxlY3Rpb24uc2VsZWN0ZWRfbW9kZWwubmFtZX0gKCQke3NlbGVjdGlvbi5lc3RpbWF0ZWRfY29zdC50b0ZpeGVkKDQpfSlgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goYOKdjCAke3Rhc2sudHlwZX06IEZhaWxlZCAtICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIGNvbnN0IHJlc3VsdFRleHQgPSByZXN1bHRzLmpvaW4oJ1xcbicpO1xuICAgICAgbmV3IE5vdGljZShgTW9kZWwgU2VsZWN0aW9uIFRlc3QgUmVzdWx0czpcXG4ke3Jlc3VsdFRleHR9YCwgMTAwMDApO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIHNlbGVjdGlvbiB0ZXN0IHJlc3VsdHM6JywgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGDinYwgTW9kZWwgc2VsZWN0aW9uIHRlc3QgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNob3dNb2RlbEhlYWx0aCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICBuZXcgTm90aWNlKCfinYwgTW9kZWwgc2VsZWN0aW9uIHNlcnZpY2Ugbm90IGluaXRpYWxpemVkJywgNTAwMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgn8J+PpSBDaGVja2luZyBtb2RlbCBoZWFsdGguLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5nZXRNb2RlbEhlYWx0aCgpO1xuICAgICAgXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAoaGVhbHRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gTm8gbW9kZWwgaGVhbHRoIGluZm9ybWF0aW9uIGF2YWlsYWJsZScsIDUwMDApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhlYWx0aEluZm8gPSBoZWFsdGgubWFwKGggPT4ge1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBoLnN0YXR1cyA9PT0gJ2hlYWx0aHknID8gJ+KchScgOiBoLnN0YXR1cyA9PT0gJ2RlZ3JhZGVkJyA/ICfimqDvuI8nIDogJ+KdjCc7XG4gICAgICAgIHJldHVybiBgJHtzdGF0dXN9ICR7aC5tb2RlbF9pZH06ICR7aC5zdGF0dXN9ICgke2gucmVzcG9uc2VfdGltZX1tcywgJHtoLmF2YWlsYWJpbGl0eV9wZXJjZW50YWdlfSUpYDtcbiAgICAgIH0pLmpvaW4oJ1xcbicpO1xuXG4gICAgICBuZXcgTm90aWNlKGBNb2RlbCBIZWFsdGggU3RhdHVzOlxcbiR7aGVhbHRoSW5mb31gLCAxNTAwMCk7XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgaGVhbHRoIHN0YXR1czonLCBoZWFsdGgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShg4p2MIEZhaWxlZCB0byBnZXQgbW9kZWwgaGVhbHRoOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEJlc3RNb2RlbEZvclRhc2sodGFza1R5cGU6IHN0cmluZywgcXVhbGl0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyA9ICdtZWRpdW0nKSB7XG4gICAgLy8gQ2hlY2sgaWYgbW9kZWwgc2VsZWN0aW9uIHNlcnZpY2UgaXMgYXZhaWxhYmxlIGFuZCBjb25uZWN0ZWRcbiAgICBpZiAodGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UgJiYgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXdhaXQgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0Rm9yVGFzayh0YXNrVHlwZSwgcXVhbGl0eSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgU2VsZWN0ZWQgbW9kZWwgJHtzZWxlY3Rpb24uc2VsZWN0ZWRfbW9kZWwubmFtZX0gZm9yICR7dGFza1R5cGV9IHRhc2tgKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTW9kZWwgc2VsZWN0aW9uIGZhaWxlZCwgdXNpbmcgZGVmYXVsdDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIGVuYWJsZWQsIHRyeSB0byByZWluaXRpYWxpemUgdGhlIHNlcnZpY2VcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmVuYWJsZWQgJiYgIXRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICB0aGlzLnJldHJ5TW9kZWxTZWxlY3Rpb25Jbml0KDEpLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbGVudGx5IGZhaWwgcmV0cnlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCAmJiAhdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgIC8vIFNlcnZpY2Ugbm90IGluaXRpYWxpemVkLCB0cnkgdG8gaW5pdGlhbGl6ZSBpdFxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzZWxlY3Rpb24gc2VydmljZSBub3QgaW5pdGlhbGl6ZWQsIGF0dGVtcHRpbmcgaW5pdGlhbGl6YXRpb24uLi4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAvLyBTaWxlbnRseSBmYWlsIGluaXRpYWxpemF0aW9uXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyA9PT0gRU5IQU5DRUQgVUkgU1RZTEVTID09PVxuXG4gIHByaXZhdGUgbG9hZEVuaGFuY2VkVUlTdHlsZXMoKSB7XG4gICAgLy8gTG9hZCBlbmhhbmNlZCBVSSBzdHlsZXMgZm9yIHByb2dyZXNzIGluZGljYXRvcnMgYW5kIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGNvbnN0IHN0eWxlSWQgPSAndmF1bHRwaWxvdC1lbmhhbmNlZC11aS1zdHlsZXMnO1xuICAgIFxuICAgIC8vIFJlbW92ZSBleGlzdGluZyBzdHlsZXMgaWYgdGhleSBleGlzdFxuICAgIGNvbnN0IGV4aXN0aW5nU3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHlsZUlkKTtcbiAgICBpZiAoZXhpc3RpbmdTdHlsZSkge1xuICAgICAgZXhpc3RpbmdTdHlsZS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgbmV3IHN0eWxlIGVsZW1lbnRcbiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGUuaWQgPSBzdHlsZUlkO1xuICAgIHN0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgLyogVmF1bHRQaWxvdCBFbmhhbmNlZCBVSSBTdHlsZXMgKi9cbiAgICAgIEBpbXBvcnQgdXJsKFwiYXBwOi8vb2JzaWRpYW4ubWQvdmF1bHQtbWFuYWdlbWVudC9lbmhhbmNlZC11aS1zdHlsZXMuY3NzXCIpO1xuICAgICAgXG4gICAgICAvKiBGYWxsYmFjayBzdHlsZXMgaW4gY2FzZSBpbXBvcnQgZmFpbHMgKi9cbiAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lciB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdG9wOiAyMHB4O1xuICAgICAgICByaWdodDogMjBweDtcbiAgICAgICAgei1pbmRleDogMTAwMDA7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICBtYXgtd2lkdGg6IDQwMHB4O1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC1pbnRlcmZhY2UpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgIG1pbi13aWR0aDogMzAwcHg7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICBhbmltYXRpb246IHNsaWRlSW5SaWdodCAwLjNzIGVhc2Utb3V0O1xuICAgICAgfVxuICAgICAgXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlSW5SaWdodCB7XG4gICAgICAgIGZyb20geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwJSk7IG9wYWNpdHk6IDA7IH1cbiAgICAgICAgdG8geyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMCk7IG9wYWNpdHk6IDE7IH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgQGtleWZyYW1lcyBzbGlkZU91dFJpZ2h0IHtcbiAgICAgICAgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgb3BhY2l0eTogMTsgfVxuICAgICAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsgb3BhY2l0eTogMDsgfVxuICAgICAgfVxuICAgIGA7XG4gICAgXG4gICAgLy8gQWRkIHRvIGRvY3VtZW50IGhlYWRcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICBcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFbmhhbmNlZCBVSSBzdHlsZXMgbG9hZGVkJyk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvbW1hbmQgRGVmaW5pdGlvbnMgZm9yIFZhdWx0UGlsb3QgVmF1bHQgTWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IENvbW1hbmQsIE5vdGljZSwgRWRpdG9yIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciBwbHVnaW4gaW5zdGFuY2Ugd2l0aCB2YXVsdCBtYW5hZ2VtZW50IG1ldGhvZHNcbmludGVyZmFjZSBWYXVsdE1hbmFnZW1lbnRQbHVnaW4ge1xuICBhcHA6IGFueTtcbiAgdmF1bHRDbGllbnQ/OiBhbnk7XG4gIG9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsPzogKCkgPT4gdm9pZDtcbiAgb3BlblNtYXJ0U2VhcmNoTW9kYWw/OiAocXVlcnk/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9wZW5GaWxlT3BlcmF0aW9uc01vZGFsPzogKCkgPT4gdm9pZDtcbiAgb3BlblZhdWx0T3JnYW5pemVyTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWw/OiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIFZhdWx0IE1hbmFnZW1lbnQgQ29tbWFuZHNcbiAqIFRoZXNlIHdpbGwgYmUgcmVnaXN0ZXJlZCBpbiB0aGUgbWFpbiBwbHVnaW4gZmlsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTogQ29tbWFuZFtdIHtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJyxcbiAgICAgIG5hbWU6ICdWaWV3IFZhdWx0IFN0cnVjdHVyZScsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHZhdWx0IHN0cnVjdHVyZSBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblZhdWx0U3RydWN0dXJlTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBzdHJ1Y3R1cmUgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnLFxuICAgICAgbmFtZTogJ1NtYXJ0IFZhdWx0IFNlYXJjaCcsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHNtYXJ0IHNlYXJjaCBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdTbWFydCBzZWFyY2ggZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnLFxuICAgICAgbmFtZTogJ0ZpbGUgT3BlcmF0aW9ucyBNYW5hZ2VyJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgZmlsZSBvcGVyYXRpb25zIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuRmlsZU9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgb3BlcmF0aW9ucyBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LW9yZ2FuaXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBSSBWYXVsdCBPcmdhbml6YXRpb24nLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyB2YXVsdCBvcmdhbml6ZXIgbW9kYWwnKTtcbiAgICAgICAgaWYgKHRoaXMub3BlblZhdWx0T3JnYW5pemVyTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5WYXVsdE9yZ2FuaXplck1vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgb3JnYW5pemVyIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtYmF0Y2gtb3BlcmF0aW9ucycsXG4gICAgICBuYW1lOiAnQmF0Y2ggRmlsZSBPcGVyYXRpb25zJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgYmF0Y2ggb3BlcmF0aW9ucyBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ0JhdGNoIG9wZXJhdGlvbnMgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1xdWljay1zZWFyY2gtc2VsZWN0aW9uJyxcbiAgICAgIG5hbWU6ICdRdWljayBTZWFyY2ggU2VsZWN0ZWQgVGV4dCcsXG4gICAgICBlZGl0b3JDYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luLCBlZGl0b3I6IEVkaXRvcikge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmIChzZWxlY3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1F1aWNrIHNlYXJjaCBmb3I6Jywgc2VsZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgICAgaWYgKHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoc2VsZWN0aW9uLnRyaW0oKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIHNlbGVjdCB0ZXh0IHRvIHNlYXJjaCBmb3InKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWhlYWx0aC1jaGVjaycsXG4gICAgICBuYW1lOiAnVmF1bHQgSGVhbHRoIENoZWNrJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoJ1J1bm5pbmcgdmF1bHQgaGVhbHRoIGNoZWNrLi4uJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVzdCBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3QgY29ubmVjdGlvblRlc3QgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgaWYgKCFjb25uZWN0aW9uVGVzdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBIZWFsdGggY2hlY2sgZmFpbGVkOiAke2Nvbm5lY3Rpb25UZXN0Lm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCBiYXNpYyBzdHJ1Y3R1cmUgdG8gdGVzdCBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7IFxuICAgICAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSwgXG4gICAgICAgICAgICBtYXhfZGVwdGg6IDEgXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVGVzdCBzZWFyY2ggZnVuY3Rpb25hbGl0eVxuICAgICAgICAgIGNvbnN0IHNlYXJjaFRlc3QgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LnNlYXJjaFZhdWx0KHsgXG4gICAgICAgICAgICBxdWVyeTogJ3Rlc3QnLCBcbiAgICAgICAgICAgIG1heF9yZXN1bHRzOiAxIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoYOKchSBWYXVsdCBIZWFsdGggQ2hlY2sgUGFzc2VkXG7wn5OBICR7c3RydWN0dXJlLnRvdGFsX2ZpbGVzfSBmaWxlcywgJHtzdHJ1Y3R1cmUudG90YWxfZm9sZGVyc30gZm9sZGVyc1xu8J+UjSBTZWFyY2g6ICR7c2VhcmNoVGVzdC5yZXN1bHRzLmxlbmd0aH0gcmVzdWx0c1xu8J+SviBTaXplOiAkeyhzdHJ1Y3R1cmUudG90YWxfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQmAsIDgwMDApO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVmF1bHQgaGVhbHRoIGNoZWNrIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZShg4p2MIEhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXZhdWx0LWJhY2t1cCcsXG4gICAgICBuYW1lOiAnQ3JlYXRlIFZhdWx0IEJhY2t1cCcsXG4gICAgICBjYWxsYmFjazogYXN5bmMgZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKCdDcmVhdGluZyB2YXVsdCBiYWNrdXAuLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBiYWNrdXAgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmJhY2t1cFZhdWx0KHtcbiAgICAgICAgICAgIGluY2x1ZGVfc2V0dGluZ3M6IHRydWUsXG4gICAgICAgICAgICBjb21wcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgICAgIGJhY2t1cF9uYW1lOiBgdmF1bHRwaWxvdC1iYWNrdXAtJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1gXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg4pyFIEJhY2t1cCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVxu8J+TpiAke2JhY2t1cC5maWxlc19iYWNrZWRfdXB9IGZpbGVzXG7wn5K+IFNpemU6ICR7KGJhY2t1cC5iYWNrdXBfc2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQlxu8J+TgSBMb2NhdGlvbjogJHtiYWNrdXAuYmFja3VwX3BhdGh9YCwgODAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdCYWNrdXAgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGDinYwgQmFja3VwIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtc2VhcmNoLWNvbnRlbnQnLFxuICAgICAgbmFtZTogJ1NlYXJjaCBDb250ZW50JyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBzZWxlY3Rpb24udHJpbSgpIHx8ICdFbnRlciBzZWFyY2ggcXVlcnknO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKHF1ZXJ5LCAnY29udGVudCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXNlYXJjaC1maWxlbmFtZXMnLFxuICAgICAgbmFtZTogJ1NlYXJjaCBGaWxlbmFtZXMnLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwoJycsICdmaWxlbmFtZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycsXG4gICAgICBuYW1lOiAnVmlldyBSZWNlbnQgRmlsZXMnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jIGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5nZXRWYXVsdFN0cnVjdHVyZSh7IFxuICAgICAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc3RydWN0dXJlLnJlY2VudF9maWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHJlY2VudCBmaWxlcyBmb3VuZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCByZWNlbnRMaXN0ID0gc3RydWN0dXJlLnJlY2VudF9maWxlc1xuICAgICAgICAgICAgLnNsaWNlKDAsIDEwKVxuICAgICAgICAgICAgLm1hcCgoZmlsZTogYW55KSA9PiBg4oCiICR7ZmlsZS5uYW1lfSAoJHtmaWxlLm1vZGlmaWVkfSlgKVxuICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoYPCfk50gUmVjZW50IEZpbGVzOlxcbiR7cmVjZW50TGlzdH1gLCAxMDAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHJlY2VudCBmaWxlczonLCBlcnJvcik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIFwiTm90IEZvdW5kXCIgZXJyb3IgLSBwcm92aWRlIGZhbGxiYWNrXG4gICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdOb3QgRm91bmQnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGxvY2FsIHJlY2VudCBmaWxlc1xuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAgICAgLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpXG4gICAgICAgICAgICAgIC5zbGljZSgwLCAxMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gcmVjZW50IGZpbGVzIGZvdW5kJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVjZW50TGlzdCA9IGZpbGVzXG4gICAgICAgICAgICAgIC5tYXAoKGZpbGU6IGFueSkgPT4gYOKAoiAke2ZpbGUuYmFzZW5hbWV9ICgke25ldyBEYXRlKGZpbGUuc3RhdC5tdGltZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9KWApXG4gICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3IE5vdGljZShg8J+TnSBSZWNlbnQgRmlsZXMgKExvY2FsKTpcXG4ke3JlY2VudExpc3R9YCwgMTAwMDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGDinYwgRmFpbGVkIHRvIGdldCByZWNlbnQgZmlsZXM6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIF07XG59XG5cbi8qKlxuICogSG90a2V5IGRlZmluaXRpb25zIGZvciB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gKi9cbmV4cG9ydCBjb25zdCBWQVVMVF9NQU5BR0VNRU5UX0hPVEtFWVM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICd2YXVsdHBpbG90LXZhdWx0LXN0cnVjdHVyZSc6ICdDdHJsK1NoaWZ0K1YnLFxuICAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnOiAnQ3RybCtTaGlmdCtGJyxcbiAgJ3ZhdWx0cGlsb3QtcXVpY2stc2VhcmNoLXNlbGVjdGlvbic6ICdDdHJsK1NoaWZ0K1MnLFxuICAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnOiAnQ3RybCtTaGlmdCtPJyxcbiAgJ3ZhdWx0cGlsb3Qtb3JnYW5pemUtdmF1bHQnOiAnQ3RybCtTaGlmdCtHJyxcbiAgJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJzogJ0N0cmwrU2hpZnQrSCdcbn07XG5cbi8qKlxuICogUmliYm9uIGljb24gZGVmaW5pdGlvbnMgZm9yIGNvbW1vbmx5IHVzZWQgY29tbWFuZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfUklCQk9OX0lDT05TID0gW1xuICB7XG4gICAgaWNvbjogJ2ZvbGRlci10cmVlJyxcbiAgICB0aXRsZTogJ1ZhdWx0IFN0cnVjdHVyZScsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnXG4gIH0sXG4gIHtcbiAgICBpY29uOiAnc2VhcmNoJyxcbiAgICB0aXRsZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnXG4gIH0sXG4gIHtcbiAgICBpY29uOiAnZm9sZGVyLXBsdXMnLFxuICAgIHRpdGxlOiAnRmlsZSBPcGVyYXRpb25zJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucydcbiAgfVxuXTtcblxuLyoqXG4gKiBDb21tYW5kIG1lbnUgaXRlbXMgZm9yIGNvbnRleHQgbWVudXNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfTUVOVV9JVEVNUyA9IFtcbiAge1xuICAgIHRpdGxlOiAnQW5hbHl6ZSBTdHJ1Y3R1cmUnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtYW5hbHlzaXMnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ1NtYXJ0IFNlYXJjaCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1zbWFydC1zZWFyY2gnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1zZWFyY2gnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0ZpbGUgT3BlcmF0aW9ucycsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1maWxlLW9wZXJhdGlvbnMnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1vcGVyYXRpb25zJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdPcmdhbml6ZSBWYXVsdCcsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC1vcmdhbml6ZS12YXVsdCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW9yZ2FuaXphdGlvbidcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnSGVhbHRoIENoZWNrJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LWhlYWx0aC1jaGVjaycsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW1haW50ZW5hbmNlJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdDcmVhdGUgQmFja3VwJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LWJhY2t1cCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW1haW50ZW5hbmNlJ1xuICB9XG5dO1xuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZWdpc3RlciBhbGwgdmF1bHQgbWFuYWdlbWVudCBjb21tYW5kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcyhwbHVnaW46IGFueSkge1xuICBjb25zdCBjb21tYW5kcyA9IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG4gIGNvbW1hbmRzLmZvckVhY2goKGNvbW1hbmQ6IENvbW1hbmQpID0+IHtcbiAgICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAuLi5jb21tYW5kLFxuICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2s/LmJpbmQocGx1Z2luKSxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrPy5iaW5kKHBsdWdpbilcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBBZGQgaG90a2V5cyBpZiBkZWZpbmVkXG4gIE9iamVjdC5lbnRyaWVzKFZBVUxUX01BTkFHRU1FTlRfSE9US0VZUykuZm9yRWFjaCgoW2NvbW1hbmRJZCwgaG90a2V5XSkgPT4ge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uY29tbWFuZHM/Lltjb21tYW5kSWRdO1xuICAgIGlmIChjb21tYW5kKSB7XG4gICAgICBjb21tYW5kLmhvdGtleXMgPSBbeyBtb2RpZmllcnM6IFtdLCBrZXk6IGhvdGtleSB9XTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBhZGQgdmF1bHQgbWFuYWdlbWVudCByaWJib24gaWNvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFZhdWx0TWFuYWdlbWVudFJpYmJvbkljb25zKHBsdWdpbjogYW55KSB7XG4gIFZBVUxUX01BTkFHRU1FTlRfUklCQk9OX0lDT05TLmZvckVhY2goKHsgaWNvbiwgdGl0bGUsIGNvbW1hbmRJZCB9KSA9PiB7XG4gICAgY29uc3QgcmliYm9uSWNvbiA9IHBsdWdpbi5hZGRSaWJib25JY29uKGljb24sIHRpdGxlLCAoKSA9PiB7XG4gICAgICBwbHVnaW4uYXBwLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChjb21tYW5kSWQpO1xuICAgIH0pO1xuICAgIHJpYmJvbkljb24uYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtdmF1bHQtbWFuYWdlbWVudC1yaWJib24nKTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIFZhdWx0UGlsb3QgRW5oYW5jZW1lbnQgRmVhdHVyZXMgRGVtb1xuICogRGVtb25zdHJhdGVzIHRoZSBuZXcga2V5Ym9hcmQgc2hvcnRjdXRzLCBwcm9ncmVzcyBpbmRpY2F0b3JzLCBhbmQgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90RW5oYW5jZW1lbnREZW1vIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHRQaWxvdCBFbmhhbmNlbWVudCBGZWF0dXJlcyBEZW1vJyB9KTtcblxuICAgICAgICAvLyBEZW1vIFNlY3Rpb24gMTogS2V5Ym9hcmQgU2hvcnRjdXRzXG4gICAgICAgIHRoaXMuY3JlYXRlS2V5Ym9hcmRTaG9ydGN1dHNEZW1vKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gRGVtbyBTZWN0aW9uIDI6IFByb2dyZXNzIEluZGljYXRvcnNcbiAgICAgICAgdGhpcy5jcmVhdGVQcm9ncmVzc0luZGljYXRvckRlbW8oY29udGVudEVsKTtcblxuICAgICAgICAvLyBEZW1vIFNlY3Rpb24gMzogUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uXG4gICAgICAgIHRoaXMuY3JlYXRlUGVyZm9ybWFuY2VEZW1vKGNvbnRlbnRFbCk7XG5cbiAgICAgICAgLy8gRGVtbyBTZWN0aW9uIDQ6IFdlYlNvY2tldCBGZWF0dXJlc1xuICAgICAgICB0aGlzLmNyZWF0ZVdlYlNvY2tldERlbW8oY29udGVudEVsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUtleWJvYXJkU2hvcnRjdXRzRGVtbyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW5oYW5jZW1lbnQtZGVtby1zZWN0aW9uJyB9KTtcbiAgICAgICAgc2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfijKjvuI8gS2V5Ym9hcmQgU2hvcnRjdXRzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2VjdGlvbi5jcmVhdGVFbCgncCcpO1xuICAgICAgICBkZXNjcmlwdGlvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8c3Ryb25nPjIwKyBrZXlib2FyZCBzaG9ydGN1dHMgYXJlIG5vdyBhdmFpbGFibGUhPC9zdHJvbmc+PGJyPlxuICAgICAgICAgICAgVHJ5IHRoZXNlIHNob3J0Y3V0czpcbiAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICA8bGk+PGNvZGU+Q3RybCtTaGlmdCtFbnRlcjwvY29kZT4gLSBPcGVuIFZhdWx0UGlsb3QgQ2hhdDwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPjxjb2RlPkN0cmwrU2hpZnQrUzwvY29kZT4gLSBTbWFydCBTZWFyY2g8L2xpPlxuICAgICAgICAgICAgICAgIDxsaT48Y29kZT5DdHJsK1NwYWNlPC9jb2RlPiAtIEFJIENvbXBsZXRpb248L2xpPlxuICAgICAgICAgICAgICAgIDxsaT48Y29kZT5DdHJsK1NoaWZ0K0g8L2NvZGU+IC0gU2hvdyBBbGwgU2hvcnRjdXRzPC9saT5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gc2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU2hvdyBBbGwgS2V5Ym9hcmQgU2hvcnRjdXRzJyB9KTtcbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4ua2V5Ym9hcmRIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ua2V5Ym9hcmRIYW5kbGVyLmdldFNob3J0Y3V0cygpO1xuICAgICAgICAgICAgICAgIC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIHNob3J0Y3V0cyBoZWxwXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvcnRjdXRzID0gdGhpcy5wbHVnaW4ua2V5Ym9hcmRIYW5kbGVyLmdldFNob3J0Y3V0cygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlbHBNb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgICAgaGVscE1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSAnVmF1bHRQaWxvdCBLZXlib2FyZCBTaG9ydGN1dHMnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBoZWxwTW9kYWwuY29udGVudEVsO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gJzcwdmgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNob3J0Y3V0cy5mb3JFYWNoKHNob3J0Y3V0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnc2hvcnRjdXQtaXRlbScgfSk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IFxuICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDRweCAwOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlzID0gaXRlbS5jcmVhdGVTcGFuKHsgY2xzOiAnc2hvcnRjdXQta2V5cycgfSk7XG4gICAgICAgICAgICAgICAgICAgIGtleXMudGV4dENvbnRlbnQgPSBgJHtzaG9ydGN1dC5tb2RpZmllcnMuam9pbignICsgJyl9ICsgJHtzaG9ydGN1dC5rZXkucmVwbGFjZSgnS2V5JywgJycpfWA7XG4gICAgICAgICAgICAgICAgICAgIGtleXMuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMnB4IDZweDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXNjID0gaXRlbS5jcmVhdGVTcGFuKHsgY2xzOiAnc2hvcnRjdXQtZGVzYycgfSk7XG4gICAgICAgICAgICAgICAgICAgIGRlc2MudGV4dENvbnRlbnQgPSBzaG9ydGN1dC5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBoZWxwTW9kYWwub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUHJvZ3Jlc3NJbmRpY2F0b3JEZW1vKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbmhhbmNlbWVudC1kZW1vLXNlY3Rpb24nIH0pO1xuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ/Cfk4ogUHJvZ3Jlc3MgSW5kaWNhdG9ycycgfSk7XG4gICAgICAgIFxuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdSZWFsLXRpbWUgcHJvZ3Jlc3MgYmFycyB3aXRoIGFuaW1hdGlvbnMsIEVUQSBjYWxjdWxhdGlvbiwgYW5kIFdlYlNvY2tldCB1cGRhdGVzLicgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNEaXYgPSBzZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2RlbW8tYnV0dG9ucycgfSk7XG4gICAgICAgIGJ1dHRvbnNEaXYuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGZsZXgtd3JhcDogd3JhcDsnO1xuXG4gICAgICAgIC8vIFF1aWNrIFByb2dyZXNzIERlbW9cbiAgICAgICAgY29uc3QgcXVpY2tQcm9ncmVzc0J0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1F1aWNrIFByb2dyZXNzICgzcyknIH0pO1xuICAgICAgICBxdWlja1Byb2dyZXNzQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRlbW9RdWlja1Byb2dyZXNzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTG9uZyBQcm9ncmVzcyBEZW1vXG4gICAgICAgIGNvbnN0IGxvbmdQcm9ncmVzc0J0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0xvbmcgUHJvZ3Jlc3MgKDEwcyknIH0pO1xuICAgICAgICBsb25nUHJvZ3Jlc3NCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVtb0xvbmdQcm9ncmVzcygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIE11bHRpcGxlIFByb2dyZXNzIERlbW9cbiAgICAgICAgY29uc3QgbXVsdGlQcm9ncmVzc0J0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ011bHRpcGxlIFByb2dyZXNzJyB9KTtcbiAgICAgICAgbXVsdGlQcm9ncmVzc0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kZW1vTXVsdGlwbGVQcm9ncmVzcygpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUGVyZm9ybWFuY2VEZW1vKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbmhhbmNlbWVudC1kZW1vLXNlY3Rpb24nIH0pO1xuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KaoSBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgc2VjdGlvbi5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnSW50ZWxsaWdlbnQgY2FjaGluZywgcmVxdWVzdCBkZWR1cGxpY2F0aW9uLCBhbmQgcGVyZm9ybWFuY2UgbWV0cmljcy4nIFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBidXR0b25zRGl2ID0gc2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdkZW1vLWJ1dHRvbnMnIH0pO1xuICAgICAgICBidXR0b25zRGl2LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBmbGV4LXdyYXA6IHdyYXA7JztcblxuICAgICAgICAvLyBDYWNoZSBEZW1vXG4gICAgICAgIGNvbnN0IGNhY2hlQnRuID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnVGVzdCBDYWNoaW5nJyB9KTtcbiAgICAgICAgY2FjaGVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVtb0NhY2hpbmcoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQZXJmb3JtYW5jZSBNZXRyaWNzXG4gICAgICAgIGNvbnN0IG1ldHJpY3NCdG4gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTaG93IE1ldHJpY3MnIH0pO1xuICAgICAgICBtZXRyaWNzQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNob3dQZXJmb3JtYW5jZU1ldHJpY3MoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBDbGVhciBDYWNoZVxuICAgICAgICBjb25zdCBjbGVhckJ0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NsZWFyIENhY2hlJyB9KTtcbiAgICAgICAgY2xlYXJCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIuY2xlYXJDYWNoZSgpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NhY2hlIGNsZWFyZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVXZWJTb2NrZXREZW1vKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbmhhbmNlbWVudC1kZW1vLXNlY3Rpb24nIH0pO1xuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ/CflJcgV2ViU29ja2V0IEZlYXR1cmVzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXR1c0RpdiA9IHNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICAgIGNvbnN0IGlzQ29ubmVjdGVkID0gdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyPy5pc1dlYlNvY2tldENvbm5lY3RlZCgpIHx8IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgc3RhdHVzRGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxwPldlYlNvY2tldCBTdGF0dXM6IFxuICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6ICR7aXNDb25uZWN0ZWQgPyAndmFyKC0tY29sb3ItZ3JlZW4pJyA6ICd2YXIoLS1jb2xvci1yZWQpJ307XCI+XG4gICAgICAgICAgICAgICAgICAgICR7aXNDb25uZWN0ZWQgPyAn8J+foiBDb25uZWN0ZWQnIDogJ/CflLQgRGlzY29ubmVjdGVkJ31cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8cD5SZWFsLXRpbWUgZmVhdHVyZXM6IFByb2dyZXNzIHVwZGF0ZXMsIFBlcmZvcm1hbmNlIG1ldHJpY3MsIER5bmFtaWMgc2hvcnRjdXRzPC9wPlxuICAgICAgICBgO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1Rlc3QgV2ViU29ja2V0IENvbm5lY3Rpb24nIH0pO1xuICAgICAgICBidXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RlZCA9IHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcj8uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFdlYlNvY2tldCBpcyAke2Nvbm5lY3RlZCA/ICdjb25uZWN0ZWQnIDogJ2Rpc2Nvbm5lY3RlZCd9YCwgMzAwMCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZW1vUXVpY2tQcm9ncmVzcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VuaGFuY2VtZW50IE1hbmFnZXIgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9ncmVzc0lkID0gJ2RlbW8tcXVpY2stJyArIERhdGUubm93KCk7XG4gICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlci5zaG93UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgaWQ6IHByb2dyZXNzSWQsXG4gICAgICAgICAgICB0aXRsZTogJ1F1aWNrIERlbW8gVGFzaycsXG4gICAgICAgICAgICBtZXNzYWdlOiAnUHJvY2Vzc2luZy4uLicsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgICAgICAgZXRhOiAzLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSAwO1xuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHByb2dyZXNzICs9IDMzLjMzO1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzID49IDEwMCkge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzID0gMTAwO1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yLmhpZGVQcm9ncmVzcyhwcm9ncmVzc0lkKTtcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yLnVwZGF0ZVByb2dyZXNzKHByb2dyZXNzSWQsIHtcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiBwcm9ncmVzcyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBwcm9ncmVzcyA8IDEwMCA/ICdQcm9jZXNzaW5nLi4uJyA6ICdDb21wbGV0ZSEnLFxuICAgICAgICAgICAgICAgIGV0YTogcHJvZ3Jlc3MgPCAxMDAgPyAoMTAwIC0gcHJvZ3Jlc3MpIC8gMzMuMzMgOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZW1vTG9uZ1Byb2dyZXNzKCkge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRW5oYW5jZW1lbnQgTWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb2dyZXNzSWQgPSAnZGVtby1sb25nLScgKyBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIuc2hvd1Byb2dyZXNzKHtcbiAgICAgICAgICAgIGlkOiBwcm9ncmVzc0lkLFxuICAgICAgICAgICAgdGl0bGU6ICdMb25nIFJ1bm5pbmcgVGFzaycsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQW5hbHl6aW5nIHZhdWx0IHN0cnVjdHVyZS4uLicsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgICAgICAgZXRhOiAxMCxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc3RhZ2VzID0gW1xuICAgICAgICAgICAgeyBtc2c6ICdBbmFseXppbmcgdmF1bHQgc3RydWN0dXJlLi4uJywgZHVyYXRpb246IDIwMDAgfSxcbiAgICAgICAgICAgIHsgbXNnOiAnUHJvY2Vzc2luZyBmaWxlcy4uLicsIGR1cmF0aW9uOiAzMDAwIH0sXG4gICAgICAgICAgICB7IG1zZzogJ0dlbmVyYXRpbmcgaW5zaWdodHMuLi4nLCBkdXJhdGlvbjogMjAwMCB9LFxuICAgICAgICAgICAgeyBtc2c6ICdPcHRpbWl6aW5nIHBlcmZvcm1hbmNlLi4uJywgZHVyYXRpb246IDIwMDAgfSxcbiAgICAgICAgICAgIHsgbXNnOiAnRmluYWxpemluZyByZXN1bHRzLi4uJywgZHVyYXRpb246IDEwMDAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGxldCBjdXJyZW50U3RhZ2UgPSAwO1xuICAgICAgICBsZXQgdG90YWxQcm9ncmVzcyA9IDA7XG5cbiAgICAgICAgY29uc3QgcnVuU3RhZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFN0YWdlID49IHN0YWdlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yLnVwZGF0ZVByb2dyZXNzKHByb2dyZXNzSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogMTAwLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29tcGxldGUhJyxcbiAgICAgICAgICAgICAgICAgICAgZXRhOiAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcj8ucHJvZ3Jlc3NJbmRpY2F0b3IuaGlkZVByb2dyZXNzKHByb2dyZXNzSWQpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhZ2UgPSBzdGFnZXNbY3VycmVudFN0YWdlXTtcbiAgICAgICAgICAgIGNvbnN0IHN0YWdlUHJvZ3Jlc3MgPSAxMDAgLyBzdGFnZXMubGVuZ3RoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yLnVwZGF0ZVByb2dyZXNzKHByb2dyZXNzSWQsIHtcbiAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiB0b3RhbFByb2dyZXNzLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN0YWdlLm1zZyxcbiAgICAgICAgICAgICAgICBldGE6IChzdGFnZXMubGVuZ3RoIC0gY3VycmVudFN0YWdlKSAqIDJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0b3RhbFByb2dyZXNzICs9IHN0YWdlUHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgY3VycmVudFN0YWdlKys7XG4gICAgICAgICAgICAgICAgcnVuU3RhZ2UoKTtcbiAgICAgICAgICAgIH0sIHN0YWdlLmR1cmF0aW9uKTtcbiAgICAgICAgfTtcblxuICAgICAgICBydW5TdGFnZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVtb011bHRpcGxlUHJvZ3Jlc3MoKSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFbmhhbmNlbWVudCBNYW5hZ2VyIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3RhcnQgMyBkaWZmZXJlbnQgcHJvZ3Jlc3MgaW5kaWNhdG9yc1xuICAgICAgICBjb25zdCB0YXNrcyA9IFtcbiAgICAgICAgICAgIHsgaWQ6ICd0YXNrMScsIHRpdGxlOiAnQmFja3VwIENyZWF0aW9uJywgZHVyYXRpb246IDUwMDAgfSxcbiAgICAgICAgICAgIHsgaWQ6ICd0YXNrMicsIHRpdGxlOiAnRmlsZSBBbmFseXNpcycsIGR1cmF0aW9uOiA3MDAwIH0sXG4gICAgICAgICAgICB7IGlkOiAndGFzazMnLCB0aXRsZTogJ0luZGV4IFVwZGF0ZScsIGR1cmF0aW9uOiAzMDAwIH1cbiAgICAgICAgXTtcblxuICAgICAgICB0YXNrcy5mb3JFYWNoKCh0YXNrLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NJZCA9IGBkZW1vLW11bHRpLSR7dGFzay5pZH0tJHtEYXRlLm5vdygpfWA7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyPy5zaG93UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgICAgICBpZDogcHJvZ3Jlc3NJZCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRhc2sudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTdGFydGluZy4uLicsXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDAsXG4gICAgICAgICAgICAgICAgICAgIGV0YTogdGFzay5kdXJhdGlvbiAvIDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGxldCBwcm9ncmVzcyA9IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICs9IDEwO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPj0gMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IDEwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyPy5wcm9ncmVzc0luZGljYXRvci5oaWRlUHJvZ3Jlc3MocHJvZ3Jlc3NJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyPy5wcm9ncmVzc0luZGljYXRvci51cGRhdGVQcm9ncmVzcyhwcm9ncmVzc0lkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiBwcm9ncmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHByb2dyZXNzIDwgMTAwID8gJ1Byb2Nlc3NpbmcuLi4nIDogJ0NvbXBsZXRlIScsXG4gICAgICAgICAgICAgICAgICAgICAgICBldGE6IHByb2dyZXNzIDwgMTAwID8gKCgxMDAgLSBwcm9ncmVzcykgLyAxMCkgKiAodGFzay5kdXJhdGlvbiAvIDEwMDAwKSA6IDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgdGFzay5kdXJhdGlvbiAvIDEwKTtcbiAgICAgICAgICAgIH0sIGluZGV4ICogMTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZGVtb0NhY2hpbmcoKSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFbmhhbmNlbWVudCBNYW5hZ2VyIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGVzdEVuZHBvaW50ID0gJ2RlbW8tY2FjaGUtdGVzdCc7XG4gICAgICAgIFxuICAgICAgICAvLyBGaXJzdCByZXF1ZXN0IChjYWNoZSBtaXNzKVxuICAgICAgICBjb25zdCBzdGFydDEgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlci5vcHRpbWl6ZWRBUElDYWxsKFxuICAgICAgICAgICAgICAgIHRlc3RFbmRwb2ludCxcbiAgICAgICAgICAgICAgICAoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSh7IGRhdGE6ICd0ZXN0IHJlc3BvbnNlJyB9KSwgMTAwMCkpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdGltZTEgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0MTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2Vjb25kIHJlcXVlc3QgKGNhY2hlIGhpdClcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0MiA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyLm9wdGltaXplZEFQSUNhbGwoXG4gICAgICAgICAgICAgICAgdGVzdEVuZHBvaW50LFxuICAgICAgICAgICAgICAgICgpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHsgZGF0YTogJ3Rlc3QgcmVzcG9uc2UnIH0pLCAxMDAwKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB0aW1lMiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGaXJzdCByZXF1ZXN0OiAke01hdGgucm91bmQodGltZTEpfW1zIChjYWNoZSBtaXNzKVxcblNlY29uZCByZXF1ZXN0OiAke01hdGgucm91bmQodGltZTIpfW1zIChjYWNoZSBoaXQpYCwgNTAwMCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDYWNoZSB0ZXN0IGZhaWxlZDogJyArIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1BlcmZvcm1hbmNlTWV0cmljcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VuaGFuY2VtZW50IE1hbmFnZXIgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgICBjb25zdCBjYWNoZUhpdFJhdGUgPSB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIuZ2V0Q2FjaGVIaXRSYXRlKCk7XG5cbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gJ1BlcmZvcm1hbmNlIE1ldHJpY3MnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1tZXRyaWNzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWNzLWdyaWRcIiBzdHlsZT1cImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpOyBnYXA6IDE2cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA2cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+VG90YWwgUmVxdWVzdHM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke21ldHJpY3MudG90YWxSZXF1ZXN0c308L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA2cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+Q2FjaGUgSGl0IFJhdGU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke01hdGgucm91bmQoY2FjaGVIaXRSYXRlKX0lPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWl0ZW1cIiBzdHlsZT1cImJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgcGFkZGluZzogMTJweDsgYm9yZGVyLXJhZGl1czogNnB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPkF2ZyBSZXNwb25zZSBUaW1lPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHtNYXRoLnJvdW5kKG1ldHJpY3MuYXZlcmFnZVJlc3BvbnNlVGltZSl9bXM8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA2cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+Q2FjaGUgU2l6ZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7bWV0cmljcy5jdXJyZW50Q2FjaGVTaXplfSBpdGVtczwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5NZW1vcnkgVXNhZ2U8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke01hdGgucm91bmQobWV0cmljcy5tZW1vcnlVc2FnZSAvIDEwMjQpfSBLQjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5GYXN0ZXN0IFJlc3BvbnNlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHtNYXRoLnJvdW5kKG1ldHJpY3MuZmFzdGVzdFJlc3BvbnNlKX1tczwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICBcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIEFkZCBzdHlsZXMgZm9yIHRoZSBkZW1vXG5jb25zdCBkZW1vU3R5bGVzID0gYFxuLmVuaGFuY2VtZW50LWRlbW8tc2VjdGlvbiB7XG4gICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgcGFkZGluZzogMTVweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbn1cblxuLmVuaGFuY2VtZW50LWRlbW8tc2VjdGlvbiBoMyB7XG4gICAgbWFyZ2luLXRvcDogMDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xufVxuXG4uZGVtby1idXR0b25zIHtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuXG4uZGVtby1idXR0b25zIGJ1dHRvbiB7XG4gICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgbWFyZ2luOiA0cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbn1cblxuLmRlbW8tYnV0dG9ucyBidXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbn1cblxuLnNob3J0Y3V0LWl0ZW0ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIG1hcmdpbjogNHB4IDA7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLm1ldHJpYy1sYWJlbCB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xufVxuXG4ubWV0cmljLXZhbHVlIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cbmA7XG5cbi8vIEluamVjdCBkZW1vIHN0eWxlc1xuY29uc3Qgc3R5bGVJZCA9ICd2YXVsdHBpbG90LWRlbW8tc3R5bGVzJztcbmlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3R5bGVJZCkpIHtcbiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGUuaWQgPSBzdHlsZUlkO1xuICAgIHN0eWxlLnRleHRDb250ZW50ID0gZGVtb1N0eWxlcztcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbiJdLCJuYW1lcyI6WyJERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MiLCJlbmFibGVWYXVsdE1hbmFnZW1lbnQiLCJhdXRvU3luY1ZhdWx0U3RydWN0dXJlIiwic2VhcmNoUmVzdWx0c0xpbWl0IiwiZW5hYmxlU21hcnRTZWFyY2giLCJiYXRjaE9wZXJhdGlvblRpbWVvdXQiLCJzaG93VmF1bHRTdGF0cyIsIm1heFNlYXJjaFJlc3VsdHMiLCJkZWZhdWx0U2VhcmNoVHlwZSIsImVuYWJsZUZpbGVPcGVyYXRpb25zIiwiY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9ucyIsImF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zIiwiREVGQVVMVF9TRVRUSU5HUyIsImJhY2tlbmRVcmwiLCJhcGlLZXkiLCJlbmFibGVXZWJTb2NrZXQiLCJlbmFibGVDb3BpbG90IiwiZW5hYmxlQXV0b0NvbXBsZXRlIiwiZGVmYXVsdEFnZW50IiwiZGVmYXVsdE1vZGUiLCJjaGF0SGlzdG9yeUxpbWl0IiwiZGVidWdNb2RlIiwic2hvd0ludGVudERlYnVnIiwidmF1bHRNYW5hZ2VtZW50IiwibW9kZWxTZWxlY3Rpb24iLCJlbmFibGVkIiwiZGV2cGlwZVBhdGgiLCJtb25pdG9yaW5nSW50ZXJ2YWwiLCJmYWxsYmFja0VuYWJsZWQiLCJjYWNoZUR1cmF0aW9uIiwicmV0cnlBdHRlbXB0cyIsInRpbWVvdXQiLCJ1c2VyUHJlZmVyZW5jZXMiLCJwcmlvcml0eSIsIm1heENvc3RQZXJSZXF1ZXN0IiwicHJlZmVycmVkUHJvdmlkZXJzIiwicXVhbGl0eVRocmVzaG9sZCIsIlZhdWx0UGlsb3RTZXR0aW5nVGFiIiwiUGx1Z2luU2V0dGluZ1RhYiIsImNvbnN0cnVjdG9yIiwiYXBwIiwicGx1Z2luIiwic3VwZXIiLCJ0aGlzIiwiZGlzcGxheSIsImNvbnRhaW5lckVsIiwiZW1wdHkiLCJjcmVhdGVFbCIsInRleHQiLCJTZXR0aW5nIiwic2V0TmFtZSIsInNldERlc2MiLCJhZGRUZXh0Iiwic2V0UGxhY2Vob2xkZXIiLCJzZXRWYWx1ZSIsInNldHRpbmdzIiwib25DaGFuZ2UiLCJ2YWx1ZSIsIl9fYXdhaXRlciIsInNhdmVTZXR0aW5ncyIsImFkZEJ1dHRvbiIsImJ1dHRvbiIsInNldEJ1dHRvblRleHQiLCJvbkNsaWNrIiwidGVzdENvbm5lY3Rpb24iLCJhZGRUb2dnbGUiLCJ0b2dnbGUiLCJjb25uZWN0V2ViU29ja2V0IiwiZGlzY29ubmVjdFdlYlNvY2tldCIsImFkZERyb3Bkb3duIiwiZHJvcGRvd24iLCJhZGRPcHRpb24iLCJhZGRTbGlkZXIiLCJzbGlkZXIiLCJzZXRMaW1pdHMiLCJzZXREeW5hbWljVG9vbHRpcCIsIl9iIiwiX2EiLCJPYmplY3QiLCJhc3NpZ24iLCJpbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50IiwiZGlzYWJsZVZhdWx0TWFuYWdlbWVudCIsIlN0cmluZyIsInBhcnNlSW50Iiwic2V0Q3RhIiwidmF1bHRDbGllbnQiLCJzZXRUaW1lb3V0Iiwic2V0RGlzYWJsZWQiLCJzdWNjZXNzIiwiZXJyb3IiLCJzZXRXYXJuaW5nIiwic2V0dGluZ3NUYWIiLCJzZXR0aW5nIiwiYWN0aXZlVGFiIiwiYWRkVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MiLCJpbml0aWFsaXplTW9kZWxTZWxlY3Rpb24iLCJkaXNjb25uZWN0TW9kZWxTZWxlY3Rpb24iLCJjbHMiLCJpbm5lckhUTUwiLCJub3RpY2UiLCJOb3RpY2UiLCJyZXNwb25zZSIsImFwaUNsaWVudCIsImhlYWx0aENoZWNrIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInNpbXBsZVJlc3BvbnNlIiwic2ltcGxlSGVhbHRoQ2hlY2siLCJkYXRhIiwic3RhdHVzIiwidmVyc2lvbiIsImhpZGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVCIsIlZhdWx0UGlsb3RWaWV3IiwiSXRlbVZpZXciLCJsZWFmIiwiZ2V0Vmlld1R5cGUiLCJnZXREaXNwbGF5VGV4dCIsImdldEljb24iLCJvbk9wZW4iLCJjb250YWluZXIiLCJhZGRDbGFzcyIsImhlYWRlckVsIiwic3RhdHVzRWwiLCJ1cGRhdGVTdGF0dXMiLCJxdWlja0FjdGlvbnNFbCIsImNyZWF0ZVF1aWNrQWN0aW9ucyIsInZhdWx0U3RhdHNFbCIsInVwZGF0ZVZhdWx0U3RhdHMiLCJhY3Rpdml0aWVzRWwiLCJhZGRTdHlsZXMiLCJzdGF0dXNDb250YWluZXIiLCJiYWNrZW5kU3RhdHVzIiwiYmFja2VuZEluZGljYXRvciIsIndzU3RhdHVzIiwiaXNXZWJTb2NrZXRDb25uZWN0ZWQiLCJjaGVja0JhY2tlbmRTdGF0dXMiLCJpbmRpY2F0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTmFtZSIsImFjdGlvbnNHcmlkIiwib25jbGljayIsIm9wZW5DaGF0TW9kYWwiLCJhY3RpdmF0ZUZ1bGxUYWJWaWV3Iiwib3BlbldvcmtmbG93TW9kYWwiLCJhbmFseXplVmF1bHQiLCJhY3RpdmVWaWV3Iiwid29ya3NwYWNlIiwiZ2V0QWN0aXZlVmlld09mVHlwZSIsIk1hcmtkb3duVmlldyIsImdldENvcGlsb3RDb21wbGV0aW9uIiwiZWRpdG9yIiwic3RhdHNDb250YWluZXIiLCJmaWxlcyIsInZhdWx0IiwiZ2V0RmlsZXMiLCJtYXJrZG93bkZpbGVzIiwiZ2V0TWFya2Rvd25GaWxlcyIsImxhYmVsIiwibGVuZ3RoIiwidG9TdHJpbmciLCJnZXRBbGxMb2FkZWRGaWxlcyIsImZpbHRlciIsImYiLCJURm9sZGVyIiwiZm9yRWFjaCIsInN0YXQiLCJzdGF0RWwiLCJsb2FkQWdlbnRJbmZvIiwibG9nIiwiZ2V0QWdlbnRzIiwiYWdlbnRzIiwiQXJyYXkiLCJpc0FycmF5IiwiZGF0YU9iaiIsImFnZW50Q291bnQiLCJhY3RpdmVBZ2VudHMiLCJhZ2VudCIsImFjdGl2ZSIsImFnZW50U3RhdHNFbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZUVsIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiaGVhZCIsImFwcGVuZENoaWxkIiwib25DbG9zZSIsIlZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCIiwiVmF1bHRQaWxvdEZ1bGxUYWJWaWV3Iiwic3R5bGUiLCJoZWlnaHQiLCJvdmVyZmxvdyIsIm1haW5MYXlvdXQiLCJsZWZ0U2lkZWJhciIsImNyZWF0ZUxlZnRTaWRlYmFyIiwibWFpbkNvbnRlbnQiLCJjcmVhdGVNYWluQ29udGVudCIsInJpZ2h0U2lkZWJhciIsImNyZWF0ZVJpZ2h0U2lkZWJhciIsImFkZEZ1bGxUYWJTdHlsZXMiLCJzaWRlYmFyIiwiY29udGVudCIsInRhYk5hdiIsImNoYXRUYWIiLCJ3b3JrZmxvd1RhYiIsImFuYWx5dGljc1RhYiIsInRhYkNvbnRlbnQiLCJjaGF0RWwiLCJjcmVhdGVDaGF0U2VjdGlvbiIsIndvcmtmbG93RWwiLCJjcmVhdGVXb3JrZmxvd1NlY3Rpb24iLCJhbmFseXRpY3NFbCIsImNyZWF0ZUFuYWx5dGljc1NlY3Rpb24iLCJzd2l0Y2hUYWIiLCJyZWNlbnRGaWxlc0VsIiwidXBkYXRlUmVjZW50RmlsZXMiLCJhZ2VudFN0YXR1c0VsIiwidXBkYXRlQWdlbnRTdGF0dXMiLCJhY3Rpdml0eUVsIiwiY3JlYXRlQWN0aXZpdHlGZWVkIiwiY2hhdENvbnRlbnQiLCJjaGF0SGlzdG9yeSIsImNoYXRJbnB1dCIsInRleHRhcmVhIiwicGxhY2Vob2xkZXIiLCJzZW5kQnV0dG9uIiwidHJpbSIsInNlbmRDaGF0TWVzc2FnZSIsIm9ua2V5ZG93biIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiY2xpY2siLCJ3b3JrZmxvd0NvbnRlbnQiLCJ3b3JrZmxvd0dyaWQiLCJuYW1lIiwiaWNvbiIsImRlc2NyaXB0aW9uIiwid29ya2Zsb3ciLCJ3b3JrZmxvd0NhcmQiLCJydW5Xb3JrZmxvdyIsImFuYWx5dGljc0NvbnRlbnQiLCJjaGFydHNDb250YWluZXIiLCJmaWxlVHlwZUNoYXJ0IiwidGltZWxpbmVDaGFydCIsInRhZ0NoYXJ0Iiwid29yZENvdW50Q2hhcnQiLCJsaW5rQ2hhcnQiLCJhY3Rpdml0eUNoYXJ0IiwidGFiTmFtZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidG4iLCJyZW1vdmVDbGFzcyIsInNlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwidGhpbmtpbmdNZXNzYWdlIiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0Iiwic2VuZENoYXQiLCJjb250ZXh0IiwicmVtb3ZlIiwid29ya2Zsb3dOYW1lIiwicnVuQW5hbHl6ZVZhdWx0V29ya2Zsb3ciLCJwbGFuTXlEYXkiLCJydW5TdW1tYXJ5V29ya2Zsb3ciLCJydW5MaW5rQW5hbHlzaXNXb3JrZmxvdyIsInJ1bkNvbnRlbnRTZWFyY2hXb3JrZmxvdyIsInJ1bkdlbmVyaWNXb3JrZmxvdyIsInN0cnVjdHVyZSIsImdldFZhdWx0U3RydWN0dXJlIiwiaW5jbHVkZV9jb250ZW50IiwibWF4X2RlcHRoIiwidG90YWxfZmlsZXMiLCJ0b3RhbF9mb2xkZXJzIiwicnVuTG9jYWxWYXVsdEFuYWx5c2lzIiwiZm9sZGVycyIsImFjdGl2ZUZpbGUiLCJnZXRBY3RpdmVGaWxlIiwicmVhZCIsInRvdGFsTGlua3MiLCJsaW5rZWRGaWxlcyIsIlNldCIsImZpbGUiLCJsaW5rTWF0Y2hlcyIsIm1hdGNoIiwibGlua1RhcmdldCIsInNsaWNlIiwiYWRkIiwib3JwaGFuZWRGaWxlcyIsInNpemUiLCJvcGVuU21hcnRTZWFyY2hNb2RhbCIsImFjdGl2YXRlVmlldyIsInNvcnQiLCJhIiwiYiIsIm10aW1lIiwiZmlsZUVsIiwiYmFzZW5hbWUiLCJvcGVuTGlua1RleHQiLCJwYXRoIiwiYWdlbnRJbmZvIiwiYWdlbnRFbCIsInRpbWUiLCJhY3Rpdml0eSIsImdldEFjdGl2ZU1hcmtkb3duIiwiRGV2ZWxvcG1lbnRDb250ZXh0U2VydmljZSIsImNvbnRleHRDYWNoZSIsIk1hcCIsImNhY2hlVGltZW91dCIsImdldEZ1bGxDb250ZXh0IiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJnZXRDYWNoZWRSZXN1bHQiLCJnZXRXb3Jrc3BhY2VDb250ZXh0IiwiZ2V0QWN0aXZlRmlsZUNvbnRleHQiLCJzZWxlY3Rpb24iLCJnZXRTZWxlY3Rpb25Db250ZXh0IiwicHJvamVjdCIsImdldFByb2plY3RDb250ZXh0IiwiZ2l0IiwiZ2V0R2l0Q29udGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJzZXRDYWNoZWRSZXN1bHQiLCJhbGxGaWxlcyIsInJlY2VudEZpbGVzIiwiZ2V0UmVjZW50RmlsZXMiLCJmaWxlVHlwZXMiLCJleHQiLCJleHRlbnNpb24iLCJ0YWdzIiwiZXh0cmFjdEFsbFRhZ3MiLCJidWlsZEZvbGRlclN0cnVjdHVyZSIsInRvdGFsRmlsZXMiLCJ2YXVsdFBhdGgiLCJhZGFwdGVyIiwiYmFzZVBhdGgiLCJnZXROYW1lIiwiY2FsbCIsIm1ldGFkYXRhIiwibWV0YWRhdGFDYWNoZSIsImdldEZpbGVDYWNoZSIsImxhbmd1YWdlIiwiZGV0ZWN0TGFuZ3VhZ2UiLCJsYXN0TW9kaWZpZWQiLCJmcm9udG1hdHRlciIsImV4dHJhY3RUYWdzIiwibGlua3MiLCJleHRyYWN0TGlua3MiLCJiYWNrbGlua3MiLCJnZXRCYWNrbGlua3MiLCJoZWFkaW5ncyIsImV4dHJhY3RIZWFkaW5ncyIsIndvcmRDb3VudCIsInNwbGl0Iiwic3ltYm9scyIsImV4dHJhY3RDb2RlU3ltYm9scyIsImRlcGVuZGVuY2llcyIsImV4dHJhY3REZXBlbmRlbmNpZXMiLCJhY3RpdmVMZWFmIiwidmlldyIsImdldFNlbGVjdGlvbiIsInNlbGVjdGlvblJhbmdlIiwibGlzdFNlbGVjdGlvbnMiLCJzdGFydFBvcyIsImFuY2hvciIsImVuZFBvcyIsImFjdHVhbFN0YXJ0IiwibGluZSIsImNoIiwiYWN0dWFsRW5kIiwiZ2V0TGluZSIsImNvbnRleHRTdGFydExpbmUiLCJNYXRoIiwibWF4IiwiY29udGV4dEVuZExpbmUiLCJtaW4iLCJsaW5lQ291bnQiLCJzdXJyb3VuZGluZ0xpbmVzIiwiaSIsInB1c2giLCJzdGFydExpbmUiLCJlbmRMaW5lIiwic3RhcnRDb2wiLCJlbmRDb2wiLCJzdXJyb3VuZGluZ0NvbnRleHQiLCJqb2luIiwibGluZUNvbnRleHQiLCJ0eXBlIiwiZGV0ZWN0UHJvamVjdFR5cGUiLCJhbmFseXplUHJvamVjdFN0cnVjdHVyZSIsImFuYWx5emVEZXBlbmRlbmNpZXMiLCJidWlsZFN5c3RlbSIsImRldGVjdEJ1aWxkU3lzdGVtIiwidGVzdEZyYW1ld29yayIsImRldGVjdFRlc3RGcmFtZXdvcmsiLCJkb2N1bWVudGF0aW9uIiwiZmluZERvY3VtZW50YXRpb24iLCJnZXRBYnN0cmFjdEZpbGVCeVBhdGgiLCJpc1JlcG9zaXRvcnkiLCJjdXJyZW50QnJhbmNoIiwidW5jb21taXR0ZWRDaGFuZ2VzIiwibGFzdENvbW1pdCIsInJlbW90ZVVybCIsInVuZGVmaW5lZCIsImdldCIsImRlbGV0ZSIsInNldCIsImxpbWl0IiwiaXRlcmF0ZUFsbExlYXZlcyIsImZpbGVQYXRoIiwiZ2V0TGFzdE9wZW5GaWxlcyIsImNhY2hlIiwidGFnIiwiZnJvbSIsImZvbGRlck1hcCIsInBhdGhQYXJ0cyIsImZvbGRlclBhdGgiLCJoYXMiLCJmaWxlQ291bnQiLCJzdWJmb2xkZXJzIiwiZm9sZGVySW5mbyIsImluZm8iLCJwb3AiLCJsb2NhbGVDb21wYXJlIiwidHMiLCJqcyIsInRzeCIsImpzeCIsInB5IiwiamF2YSIsImNwcCIsImMiLCJjcyIsInBocCIsInJiIiwiZ28iLCJycyIsImt0Iiwic3dpZnQiLCJtZCIsImpzb24iLCJ5YW1sIiwieW1sIiwieG1sIiwiaHRtbCIsImNzcyIsInNjc3MiLCJsZXNzIiwibWFwIiwibGluayIsIm90aGVyRmlsZSIsImhlYWRpbmciLCJsZXZlbCIsInBvc2l0aW9uIiwic3RhcnQiLCJsaW5lcyIsImluZGV4IiwiZnVuY3Rpb25NYXRjaCIsInNjb3BlIiwic2lnbmF0dXJlIiwiY2xhc3NNYXRjaCIsImltcG9ydE1hdGNoIiwicmVxdWlyZU1hdGNoIiwicHl0aG9uTWF0Y2giLCJoYXNQYWNrYWdlSnNvbiIsInNvbWUiLCJoYXNNYW5pZmVzdEpzb24iLCJoYXNUc0NvbmZpZyIsImhhc1B5UHJvamVjdCIsIlRGaWxlIiwicm9vdEZpbGVzIiwic291cmNlRGlyZWN0b3JpZXMiLCJ0ZXN0RGlyZWN0b3JpZXMiLCJjb25maWdGaWxlcyIsImRvY3VtZW50YXRpb25GaWxlcyIsInRvTG93ZXJDYXNlIiwiZGVwdGgiLCJlc3RpbWF0ZWRTaXplIiwicGFja2FnZUpzb25GaWxlIiwicGFja2FnZURhdGEiLCJKU09OIiwicGFyc2UiLCJlbnRyaWVzIiwic291cmNlIiwiZGV2RGVwZW5kZW5jaWVzIiwicGVlckRlcGVuZGVuY2llcyIsImNvbmZpZ0ZpbGUiLCJzY3JpcHRzIiwia2V5cyIsInRlc3RQYXR0ZXJucyIsImFsbERlcHMiLCJqZXN0IiwibW9jaGEiLCJweXRlc3QiLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJkb2NzIiwibGFzdFVwZGF0ZWQiLCJjbGVhckNhY2hlIiwiY2xlYXIiLCJnZXRDb250ZXh0U3VtbWFyeSIsInN1bW1hcnkiLCJyb3VuZCIsInN1YnN0cmluZyIsIkNoYXRNb2RhbCIsIk1vZGFsIiwiY3VycmVudENvbnZlcnNhdGlvbklkIiwibWVzc2FnZXMiLCJjb250ZXh0U2VydmljZSIsImNvbnRlbnRFbCIsInRvb2xiYXJFbCIsImNsZWFyQ2hhdCIsImFnZW50U2VsZWN0IiwibG9hZEFnZW50cyIsImNoYXRDb250YWluZXIiLCJtZXNzYWdlc0VsIiwiaW5wdXRDb250YWluZXIiLCJpbnB1dEVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwiZGlzYWJsZWQiLCJnZXRDb252ZXJzYXRpb25IaXN0b3J5IiwicmVuZGVyTWVzc2FnZXMiLCJhZGRNZXNzYWdlIiwibWFya2Rvd25Db250ZXh0IiwiaW50ZW50UmVzIiwiZGV2Q29udGV4dCIsIlByb21pc2UiLCJhbGwiLCJjbGFzc2lmeUludGVudCIsImNvbnRleHRTdW1tYXJ5IiwiZnVsbENvbnRleHQiLCJwYXlsb2FkIiwiZGV2ZWxvcG1lbnRfY29udGV4dCIsImludGVudCIsInJlc3VsdCIsImhhbmRsZVN0cmVhbWluZ1Jlc3BvbnNlIiwiY29udGV4dEluZm8iLCJlcnJvck1zZyIsInN0cmVhbWluZ01lc3NhZ2VFbCIsImFkZFN0cmVhbWluZ01lc3NhZ2UiLCJzdHJlYW0iLCJzdHJlYW1DaGF0IiwiY29udmVyc2F0aW9uX2lkIiwiYWdlbnRfaWQiLCJnZXRTZWxlY3RlZEFnZW50IiwicHJvY2Vzc1N0cmVhbWluZ1Jlc3BvbnNlIiwicm9sZSIsIm1lc3NhZ2VFbCIsInRvTG9jYWxlVGltZVN0cmluZyIsInNjcm9sbFRvQm90dG9tIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwidHlwaW5nRWwiLCJhY2N1bXVsYXRlZENvbnRlbnQiLCJkb25lIiwiZGVjb2RlIiwicmVuZGVyTWFya2Rvd24iLCJwYXJzZUVycm9yIiwidG9JU09TdHJpbmciLCJyZWxlYXNlTG9jayIsInJlbmRlck1lc3NhZ2UiLCJyZXBsYWNlIiwiZGVidWdFbCIsInNob3dDb250ZXh0RGV0YWlscyIsImNvbnRleHRNb2RhbCIsInRpdGxlRWwiLCJzZXRUZXh0IiwiZGV0YWlsc0VsIiwic3RyaW5naWZ5Iiwib3BlbiIsIldvcmtmbG93TW9kYWwiLCJpc0V4ZWN1dGluZyIsImZvcm1FbCIsImdvYWxDb250YWluZXIiLCJnb2FsSW5wdXQiLCJjb250ZXh0Q29udGFpbmVyIiwiY29udGV4dElucHV0Iiwib3B0aW9uc0NvbnRhaW5lciIsImluY2x1ZGVBY3RpdmVGaWxlIiwiYWN0aXZlRmlsZUNoZWNrYm94IiwiY3JlYXRlU3BhbiIsImluY2x1ZGVBbGxGaWxlcyIsImFsbEZpbGVzQ2hlY2tib3giLCJleGVjdXRlQnV0dG9uIiwiZXhlY3V0ZVdvcmtmbG93IiwiY2hlY2tlZCIsInByb2dyZXNzQ29udGFpbmVyIiwicmVzdWx0c0NvbnRhaW5lciIsImdvYWwiLCJ2YXVsdENvbnRlbnQiLCJyZXF1ZXN0IiwidmF1bHRfY29udGVudCIsInNldHVwUHJvZ3Jlc3NMaXN0ZW5lciIsImRpc3BsYXlSZXN1bHRzIiwiZGlzcGxheUVycm9yIiwiZGlzcGxheVByb2dyZXNzIiwiZXhlY3V0aW9uX3RpbWUiLCJyZXN1bHRFbCIsInN0ZXBzX3Rha2VuIiwic3RlcHNFbCIsInN0ZXBzTGlzdCIsInN0ZXAiLCJhcnRpZmFjdHMiLCJhcnRpZmFjdHNFbCIsImFydGlmYWN0IiwiYXJ0aWZhY3RFbCIsInRpdGxlIiwic2F2ZUFydGlmYWN0QXNOb3RlIiwic2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSIsImZpbGVuYW1lIiwiY3JlYXRlIiwiRXZvQWdlbnRYQ2xpZW50IiwiYmFzZVVybCIsIndzQ2FsbGJhY2tzIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludF8xIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsIkFjY2VwdCIsImZldGNoIiwibW9kZSIsImNyZWRlbnRpYWxzIiwiY29udGVudFR5cGUiLCJvayIsImVycm9yTWVzc2FnZSIsInN0YXR1c1RleHQiLCJtZXRob2QiLCJjaGF0IiwiYm9keSIsImNvbnZlcnNhdGlvbklkXzEiLCJjb252ZXJzYXRpb25JZCIsInJlcXVlc3RCb2R5IiwiaW5jbHVkZV9tZXNzYWdlcyIsImRlbGV0ZUNvbnZlcnNhdGlvbiIsInZhdWx0X2NvbnRleHQiLCJjcmVhdGVBZ2VudCIsImV4ZWN1dGVBZ2VudCIsImFuYWx5emVWYXVsdENvbnRleHQiLCJwbGFuVGFza3MiLCJwYXJzZUludGVsbGlnZW5jZSIsImNvbmZpZGVuY2UiLCJleHBsYWluSW50ZW50IiwiaW5jbHVkZV9kZWJ1ZyIsInJlYXNvbmluZyIsInVwZGF0ZU1lbW9yeSIsImNhbGxiYWNrcyIsIndzVXJsIiwid2Vic29ja2V0IiwiV2ViU29ja2V0Iiwib25vcGVuIiwib25Db25uZWN0Iiwib25tZXNzYWdlIiwiZXZlbnQiLCJvbkNoYXQiLCJvbldvcmtmbG93UHJvZ3Jlc3MiLCJfYyIsIm9uQ29waWxvdCIsIl9kIiwib25WYXVsdFN5bmMiLCJfZSIsIm9uSW50ZW50RGVidWciLCJfZiIsIm9uRXJyb3IiLCJfZyIsIm9uY2xvc2UiLCJjb2RlIiwicmVhc29uIiwib25EaXNjb25uZWN0Iiwib25lcnJvciIsImNsb3NlIiwic2VuZFdlYlNvY2tldE1lc3NhZ2UiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJmaW5kUGxhblNlY3Rpb24iLCJmaW5kU2NoZWR1bGVTZWN0aW9uIiwic2NoZWR1bGVSZWdleCIsIlBsYW5NeURheURlYnVnZ2VyIiwibG9ncyIsIm1heExvZ3MiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwibG9nRW50cnkiLCJlcnJvckRhdGEiLCJzdGFjayIsImdldExvZ3MiLCJjbGVhckxvZ3MiLCJleHBvcnRMb2dzIiwiYW5hbHl6ZUFwaUNsaWVudCIsImF2YWlsYWJsZSIsIm1ldGhvZHMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2V0UHJvdG90eXBlT2YiLCJoYXNQbGFuVGFza3MiLCJoYXNIZWFsdGhDaGVjayIsInRlc3RUYXNrUGxhbm5pbmciLCJhcGlDbGllbnRfMSIsInRlc3ROb3RlIiwidGltZWZyYW1lIiwiaGFzRGF0YSIsImhhc1BsYW4iLCJwbGFuIiwidGFza0NvdW50IiwidGFza3MiLCJwbGFuTXlEYXlEZWJ1Z2dlciIsIlZhdWx0TWFuYWdlbWVudEVycm9yIiwiZmVhdHVyZSIsIlZhdWx0TWFuYWdlbWVudENsaWVudCIsInZhdWx0X25hbWUiLCJ0b3RhbF9zaXplIiwiY2hpbGRyZW4iLCJyZWNlbnRfZmlsZXMiLCJvcnBoYW5lZF9maWxlcyIsImhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yIiwicGVyZm9ybUZpbGVPcGVyYXRpb24iLCJ2YWxpZGF0ZUZpbGVPcGVyYXRpb25SZXF1ZXN0IiwicGVyZm9ybUJhdGNoT3BlcmF0aW9ucyIsIm9wZXJhdGlvbnMiLCJvcCIsImVyciIsInNlYXJjaFZhdWx0IiwicXVlcnkiLCJvcmdhbml6ZVZhdWx0IiwiYmFja3VwVmF1bHQiLCJjcmVhdGVGaWxlIiwiZmlsZVBhdGhfMSIsImNvbnRlbnRfMSIsImFyZ3VtZW50cyIsImJhY2t1cCIsIm9wZXJhdGlvbiIsImZpbGVfcGF0aCIsInVwZGF0ZUZpbGUiLCJkZWxldGVGaWxlIiwibW92ZUZpbGUiLCJmcm9tUGF0aF8xIiwidG9QYXRoXzEiLCJmcm9tUGF0aCIsInRvUGF0aCIsIm5ld19wYXRoIiwiY29weUZpbGUiLCJxdWlja1NlYXJjaCIsInF1ZXJ5XzEiLCJtYXhSZXN1bHRzIiwic2VhcmNoX3R5cGUiLCJtYXhfcmVzdWx0cyIsInJlcXVlc3RPcHRpb25zIiwiRW52aXJvbm1lbnREZXRlY3RvciIsImRldGVjdCIsInBsYXRmb3JtIiwiaGFzRmlsZVN5c3RlbSIsImhhc1dlYlNvY2tldCIsImhhc0hUVFAiLCJjYXBhYmlsaXRpZXMiLCJ3aW5kb3ciLCJnbG9iYWxUaGlzIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsInJlcXVpcmUiLCJpc09ic2lkaWFuIiwiY2FuVXNlRmlsZVN5c3RlbSIsImNhblVzZVdlYlNvY2tldCIsImdldE9wdGltYWxUcmFuc3BvcnQiLCJlbnYiLCJEZXZQaXBlQ2xpZW50IiwiY29uZmlnIiwiaXNDb25uZWN0ZWQiLCJtZXNzYWdlSWQiLCJwZW5kaW5nUmVxdWVzdHMiLCJldmVudExpc3RlbmVycyIsImVudmlyb25tZW50Iiwic2VydmVyVXJsIiwic2VydmVyX3VybCIsImRlYnVnX21vZGUiLCJvbiIsImxpc3RlbmVyIiwib2ZmIiwibGlzdGVuZXJzIiwiaW5kZXhPZiIsInNwbGljZSIsImVtaXQiLCJpbml0aWFsaXplIiwidHJhbnNwb3J0Iiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJmYWxsYmFja0Vycm9yIiwidHlwZV8xIiwicGF5bG9hZF8xIiwiZ2VuZXJhdGVNZXNzYWdlSWQiLCJzZW5kZXIiLCJyZWNpcGllbnQiLCJyZXNvbHZlIiwicmVqZWN0IiwidGltZW91dEhhbmRsZSIsInNlbmRNZXNzYWdlVG9TZXJ2ZXIiLCJjYXRjaCIsImNsZWFyVGltZW91dCIsInBlbmRpbmdSZXF1ZXN0IiwiZGlzY29ubmVjdCIsInBlbmRpbmdFbnRyaWVzIiwiaXNSZWFkeSIsImdldFBlbmRpbmdSZXF1ZXN0Q291bnQiLCJNb2RlbFNlbGVjdGlvbkVycm9yIiwiZGV0YWlscyIsInN1Z2dlc3Rpb25zIiwiTW9kZWxTZWxlY3Rpb25TZXJ2aWNlIiwiZGV2UGlwZVBhdGgiLCJjYWNoZWRIZWFsdGgiLCJsYXN0SGVhbHRoVXBkYXRlIiwiZGV2cGlwZV9wYXRoIiwibW9uaXRvcmluZ19pbnRlcnZhbCIsImZhbGxiYWNrX2VuYWJsZWQiLCJjYWNoZV9kdXJhdGlvbiIsInJldHJ5X2F0dGVtcHRzIiwiZGV2UGlwZUNsaWVudCIsIm1heF9jb3N0X3Blcl9yZXF1ZXN0IiwicHJlZmVycmVkX3Byb3ZpZGVycyIsInF1YWxpdHlfdGhyZXNob2xkIiwidGltZW91dF9wcmVmZXJlbmNlIiwic2V0dXBFdmVudExpc3RlbmVycyIsImhlYWx0aERhdGEiLCJtZXRyaWNzIiwicmVmcmVzaE1vZGVsSGVhbHRoIiwic3RhcnRIZWFsdGhNb25pdG9yaW5nIiwic2VsZWN0TW9kZWwiLCJwZXJmb3JtU2VsZWN0aW9uIiwiZmFsbGJhY2tTZWxlY3Rpb24iLCJlbmhhbmNlZFJlcXVlc3QiLCJ1c2VyX3ByZWZlcmVuY2VzIiwidGltZW91dF9tcyIsIm9yaWdpbmFsRXJyb3IiLCJnZXRDYWNoZWRTZWxlY3Rpb24iLCJzdGF0aWNNb2RlbFNlbGVjdGlvbiIsImRlZmF1bHRNb2RlbHMiLCJjb3N0Iiwic3VtbWFyaXphdGlvbiIsInRyYW5zbGF0aW9uIiwiZGVmYXVsdE1vZGVsIiwidGFza190eXBlIiwic2VsZWN0ZWRfbW9kZWwiLCJwcm92aWRlciIsInNjb3JlIiwiY29zdF9wZXJfdG9rZW4iLCJtYXhfdG9rZW5zIiwicmVzcG9uc2VfdGltZV9hdmdfbXMiLCJhdmFpbGFiaWxpdHlfc2NvcmUiLCJxdWFsaXR5X3Njb3JlIiwiZmFsbGJhY2tfbW9kZWxzIiwiZXN0aW1hdGVkX2Nvc3QiLCJlc3RpbWF0ZWRfdGltZV9tcyIsInNlbGVjdGlvbl9tZXRhZGF0YSIsInNlbGVjdGlvbl90aW1lX21zIiwiZmFjdG9yc19jb25zaWRlcmVkIiwiY29uZmlkZW5jZV9zY29yZSIsInNlbGVjdE1vZGVsX09MRCIsImdldE1vZGVsSGVhbHRoIiwiaGVhbHRoIiwidXBkYXRlUHJlZmVyZW5jZXMiLCJwcmVmZXJlbmNlcyIsImdldFByZWZlcmVuY2VzIiwic2V0SW50ZXJ2YWwiLCJzZWxlY3RGb3JUYXNrIiwidGFza1R5cGVfMSIsInRhc2tUeXBlIiwicXVhbGl0eSIsInF1YWxpdHlfcmVxdWlyZW1lbnQiLCJzZWxlY3RDb3N0T3B0aW1pemVkIiwibWF4Q29zdCIsIm1heF9jb3N0Iiwic2VsZWN0SGlnaFBlcmZvcm1hbmNlIiwiZ2V0Q29uZmlnIiwiVmF1bHRTdHJ1Y3R1cmVNb2RhbCIsInNldEZvY3VzUGF0aCIsImZvY3VzUGF0aCIsInJlZnJlc2hCdXR0b24iLCJsb2FkaW5nRWwiLCJjcmVhdGVEaXYiLCJyZW5kZXJTdHJ1Y3R1cmUiLCJyZW5kZXJGYWxsYmFja1N0cnVjdHVyZSIsInRvRml4ZWQiLCJ0cmVlQ29udGFpbmVyIiwidHJlZUVsIiwicmVuZGVyRm9sZGVyIiwicmVjZW50Q29udGFpbmVyIiwicmVjZW50RWwiLCJtb2RpZmllZCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIm9ycGhhbmVkQ29udGFpbmVyIiwib3JwaGFuZWRFbCIsImZvbGRlciIsImZvbGRlckVsIiwiYXR0ciIsImNoaWxkcmVuRWwiLCJ0b2dnbGVFbCIsImlzT3BlbiIsImNoaWxkIiwiZmFsbGJhY2tFbCIsInJlY2VudExpc3QiLCJTbWFydFNlYXJjaE1vZGFsIiwic2V0SW5pdGlhbFF1ZXJ5IiwiaW5pdGlhbFF1ZXJ5Iiwic2VhcmNoVHlwZSIsInNlYXJjaEZvcm0iLCJxdWVyeUlucHV0Iiwic2VhcmNoVHlwZVNlbGVjdCIsIm9wdGlvbiIsInNlbGVjdGVkIiwic2VhcmNoQnV0dG9uIiwicGVyZm9ybVNlYXJjaCIsInJlc3VsdHMiLCJyZW5kZXJTZWFyY2hSZXN1bHRzIiwidG90YWxfZm91bmQiLCJpbnNpZ2h0cyIsInJlc3VsdHNMaXN0IiwiZmlsZV9uYW1lIiwibWF0Y2hfdHlwZSIsInByZXZpZXciLCJtYXRjaGVzIiwic3VnZ2VzdGVkX3F1ZXJpZXMiLCJzdWdnZXN0aW9uc0VsIiwic3VnZ2VzdGlvbnNMaXN0Iiwic3VnZ2VzdGlvbiIsImRpc3BhdGNoRXZlbnQiLCJLZXlib2FyZEV2ZW50IiwiRmlsZU9wZXJhdGlvbnNNb2RhbCIsInNldEluaXRpYWxQYXRoIiwiaW5pdGlhbFBhdGgiLCJzZXRPcGVyYXRpb24iLCJ1cGRhdGVPcGVyYXRpb25Gb3JtIiwiZm9ybUNvbnRhaW5lciIsImFkZFRleHRBcmVhIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJleGVjdXRlT3BlcmF0aW9uIiwicGF0aElucHV0IiwibmV3UGF0aElucHV0IiwiY29udGVudFRleHRhcmVhIiwiYmFja3VwVG9nZ2xlIiwiVHJhbnNwb3J0VHlwZSIsIlRyYW5zcG9ydEV2ZW50IiwiT25ib2FyZGluZ1N0ZXAiLCJSZWNvbW1lbmRhdGlvblR5cGUiLCJDaXJjdWl0QnJlYWtlciIsInN0YXRlIiwiZmFpbHVyZUNvdW50IiwibGFzdEZhaWx1cmVUaW1lIiwibmV4dEF0dGVtcHQiLCJleGVjdXRlIiwib25TdWNjZXNzIiwib25GYWlsdXJlIiwiZmFpbHVyZVRocmVzaG9sZCIsInJlc2V0VGltZW91dCIsImdldFN0YXRlIiwiQmFzZVRyYW5zcG9ydCIsImNvbm5lY3RlZCIsImluaXRpYWxpemVkIiwicmFuZG9tIiwic3Vic3RyIiwiaGVhbHRoU3RhdHVzIiwibGFzdENoZWNrIiwibGF0ZW5jeSIsImVycm9yUmF0ZSIsImNvbnNlY3V0aXZlRmFpbHVyZXMiLCJ1cHRpbWUiLCJjaXJjdWl0QnJlYWtlciIsIm1vbml0b3JpbmdQZXJpb2QiLCJtZXNzYWdlc1NlbnQiLCJtZXNzYWdlc1JlY2VpdmVkIiwiZXJyb3JzIiwidG90YWxMYXRlbmN5IiwibGFzdEFjdGl2aXR5IiwiZGVidWciLCJldmVudEtleSIsInBlcmZvcm1IZWFsdGhDaGVjayIsInN0YXJ0VGltZSIsImRvSGVhbHRoQ2hlY2siLCJIRUFMVEhfQ0hFQ0siLCJleGVjdXRlV2l0aENpcmN1aXRCcmVha2VyIiwib3BlcmF0aW9uTmFtZSIsInVwZGF0ZU1ldHJpY3MiLCJhcmdzIiwiY2FsY3VsYXRlUmVsaWFiaWxpdHkiLCJ0b3RhbCIsImlzQXZhaWxhYmxlIiwiZ2V0SGVhbHRoU3RhdHVzIiwiZG9Jbml0aWFsaXplIiwiZGVzdHJveSIsIkNvbm5lY3Rpb25Qb29sIiwiYWN0aXZlQ29ubmVjdGlvbnMiLCJxdWV1ZSIsIm1heENvbm5lY3Rpb25zIiwiYWNxdWlyZSIsIm5leHQiLCJzaGlmdCIsIkhUVFBUcmFuc3BvcnQiLCJIVFRQIiwibWVzc2FnZVF1ZXVlIiwicHJvY2Vzc2luZ1F1ZXVlIiwiaHR0cENvbmZpZyIsImh0dHAiLCJlbmFibGVTU0UiLCJrZWVwQWxpdmUiLCJjb21wcmVzc2lvbiIsImNvbm5lY3Rpb25Qb29sIiwiY29ubmVjdCIsInNldHVwU1NFIiwiQ09OTkVDVEVEIiwiRVJST1IiLCJyZXF1ZXN0cyIsInZhbHVlcyIsInNzZUNvbm5lY3Rpb24iLCJESVNDT05ORUNURUQiLCJzZW5kSHR0cFJlcXVlc3QiLCJwZXJmb3JtSHR0cFJlcXVlc3QiLCJmZXRjaFJlc3BvbnNlIiwiZGV2UGlwZVJlc3BvbnNlIiwic3NlVXJsIiwiRXZlbnRTb3VyY2UiLCJoYW5kbGVTU0VNZXNzYWdlIiwiQ09OTkVDVElORyIsIlJFQ09OTkVDVElORyIsIk1FU1NBR0UiLCJnZXRDYXBhYmlsaXRpZXMiLCJzdXBwb3J0c1JlYWx0aW1lIiwic3VwcG9ydHNCaWRpcmVjdGlvbmFsIiwic3VwcG9ydHNGaWxlU3lzdGVtIiwic3VwcG9ydHNTdHJlYW1pbmciLCJtYXhNZXNzYWdlU2l6ZSIsImF2ZXJhZ2VMYXRlbmN5IiwibWF4Q29uY3VycmVudENvbm5lY3Rpb25zIiwicmVsaWFiaWxpdHkiLCJzdXBwb3J0ZWRFbnZpcm9ubWVudHMiLCJSZWNvbm5lY3RpbmdXZWJTb2NrZXQiLCJwcm90b2NvbHMiLCJyZWNvbm5lY3RBdHRlbXB0cyIsInNob3VsZFJlY29ubmVjdCIsIm1heFJlY29ubmVjdEF0dGVtcHRzIiwicmVjb25uZWN0RGVsYXkiLCJ3cyIsInJlY29ubmVjdCIsInBvdyIsIkV2ZW50IiwiQ0xPU0VEIiwiV2ViU29ja2V0VHJhbnNwb3J0IiwiV0VCU09DS0VUIiwicmVzcG9uc2VIYW5kbGVycyIsIndzQ29uZmlnIiwiaGVhcnRiZWF0SW50ZXJ2YWwiLCJwZXJzaXN0TWVzc2FnZXMiLCJtYXhTaXplIiwicGVyc2lzdFRvRGlzayIsImNvbm5lY3Rpb25UaW1lb3V0Iiwic3RhcnRIZWFydGJlYXQiLCJoYW5kbGVNZXNzYWdlIiwic3RvcEhlYXJ0YmVhdCIsImhhbmRsZXJzIiwiaGFuZGxlciIsInJlcGx5VG8iLCJjbGVhckludGVydmFsIiwicGluZ0lkIiwiRmlsZUxvY2tNYW5hZ2VyIiwibG9ja1RpbWVvdXQiLCJsb2NrcyIsImFjcXVpcmVMb2NrIiwiYXR0ZW1wdExvY2siLCJGaWxlV2F0Y2hlciIsIndhdGNoZXJzIiwid2F0Y2giLCJjYWxsYmFjayIsIndhdGNoZXIiLCJmaWxlRXhpc3RzIiwicmVhZEZpbGUiLCJ1bndhdGNoIiwiZXhpc3RzIiwiZnMiLCJwcm9taXNlcyIsImFjY2VzcyIsIkZpbGVTeXN0ZW1UcmFuc3BvcnQiLCJGSUxFU1lTVEVNIiwiZnNDb25maWciLCJmaWxlc3lzdGVtIiwid2F0Y2hJbnRlcnZhbCIsIm1heFF1ZXVlU2l6ZSIsImZpbGVXYXRjaGVyIiwibG9ja01hbmFnZXIiLCJlbnN1cmVEaXJlY3RvcnlFeGlzdHMiLCJzZXR1cEluY29taW5nTWVzc2FnZVdhdGNoZXIiLCJyZXNwb25zZUZpbGUiLCJzZW5kRmlsZU1lc3NhZ2UiLCJyZXF1ZXN0RmlsZSIsIndyaXRlUmVxdWVzdEZpbGUiLCJ3cml0ZUZpbGUiLCJta2RpciIsInJlY3Vyc2l2ZSIsIndyaXRlIiwidGVzdEZpbGUiLCJ1bmxpbmsiLCJEZWZhdWx0TWV0cmljc0NvbGxlY3RvciIsImxhdGVuY3lIaXN0b3J5IiwiTUFYX0hJU1RPUllfU0laRSIsInJlY29yZExhdGVuY3kiLCJnZXRPckNyZWF0ZU1ldHJpY3MiLCJoaXN0b3J5IiwiZ2V0T3JDcmVhdGVIaXN0b3J5IiwicmVkdWNlIiwic3VtIiwidmFsIiwibWluTGF0ZW5jeSIsIm1heExhdGVuY3kiLCJyZWNvcmRTdWNjZXNzIiwidG90YWxSZXF1ZXN0cyIsInN1Y2Nlc3NmdWxSZXF1ZXN0cyIsInJlY29yZEZhaWx1cmUiLCJmYWlsZWRSZXF1ZXN0cyIsImdldE1ldHJpY3MiLCJJbmZpbml0eSIsIlRyYW5zcG9ydEhlYWx0aE1vbml0b3IiLCJtZXRyaWNzQ29sbGVjdG9yIiwic2NoZWR1bGVzIiwic3RhcnRNb25pdG9yaW5nIiwiaW50ZXJ2YWwiLCJzY2hlZHVsZSIsImFzc2Vzc1RyYW5zcG9ydEhlYWx0aCIsInN0YXJ0UGVyaW9kaWNDaGVja3MiLCJzdG9wTW9uaXRvcmluZyIsImF2YWlsYWJpbGl0eSIsImNhbGN1bGF0ZUF2YWlsYWJpbGl0eVNjb3JlIiwiY2FsY3VsYXRlTGF0ZW5jeVNjb3JlIiwiY2FsY3VsYXRlUmVsaWFiaWxpdHlTY29yZSIsImNhbGN1bGF0ZUVycm9yUmF0ZVNjb3JlIiwicmVjb21tZW5kYXRpb24iLCJmYWlsdXJlUGVuYWx0eSIsImdldE1ldHJpY3NDb2xsZWN0b3IiLCJUcmFuc3BvcnRTZWxlY3RvciIsImNyaXRlcmlhIiwiY2FsY3VsYXRlU2NvcmUiLCJjYXBhYmlsaXR5U2NvcmUiLCJyZXF1aXJlc1JlYWx0aW1lIiwibGF0ZW5jeVNjb3JlIiwicmVsaWFiaWxpdHlTY29yZSIsImNvc3RTY29yZSIsImF2YWlsYWJpbGl0eU11bHRpcGxpZXIiLCJ3ZWlnaHRlZFNjb3JlIiwibGF0ZW5jeVdlaWdodCIsInJlbGlhYmlsaXR5V2VpZ2h0IiwiY2FwYWJpbGl0eVdlaWdodCIsImNvc3RXZWlnaHQiLCJzZWxlY3RCZXN0Iiwic2NvcmVkVHJhbnNwb3J0cyIsIlRyYW5zcG9ydE1hbmFnZXIiLCJ0cmFuc3BvcnRzIiwiZmFpbG92ZXJJblByb2dyZXNzIiwiZmFsbGJhY2tDaGFpbiIsImhlYWx0aE1vbml0b3IiLCJzZWxlY3RvciIsInNlbGVjdGlvbkNyaXRlcmlhIiwiaW5pdGlhbGl6ZVRyYW5zcG9ydHMiLCJzZXR1cEhlYWx0aE1vbml0b3JpbmciLCJodHRwVHJhbnNwb3J0IiwidHJhbnNwb3J0Q29uZmlncyIsIndzVHJhbnNwb3J0IiwiZnNUcmFuc3BvcnQiLCJzZXR1cFRyYW5zcG9ydEV2ZW50SGFuZGxlcnMiLCJhY3RpdmVUcmFuc3BvcnQiLCJhdXRvRmFpbG92ZXIiLCJoYW5kbGVUcmFuc3BvcnRGYWlsdXJlIiwiaGVhbHRoQ2hlY2tJbnRlcnZhbCIsImFzc2Vzc21lbnQiLCJzZWxlY3RPcHRpbWFsVHJhbnNwb3J0IiwiYXZhaWxhYmxlVHJhbnNwb3J0cyIsInNlbGVjdGVkVHJhbnNwb3J0Iiwic3dpdGNoVHJhbnNwb3J0IiwibmV3VHJhbnNwb3J0Iiwib2xkVHJhbnNwb3J0IiwidG8iLCJmYWlsZWRUcmFuc3BvcnQiLCJ0cmFuc3BvcnRUeXBlIiwiZmFsbGJhY2tUcmFuc3BvcnQiLCJkaXNjb25uZWN0UHJvbWlzZXMiLCJnZXRBY3RpdmVUcmFuc3BvcnQiLCJnZXRBdmFpbGFibGVUcmFuc3BvcnRzIiwiZ2V0VHJhbnNwb3J0SGVhbHRoIiwiYXNzZXNzbWVudHMiLCJPbmJvYXJkaW5nV2l6YXJkIiwiY3VycmVudFN0ZXAiLCJ0b3RhbFN0ZXBzIiwic3RlcEVsZW1lbnRzIiwidHJhbnNwb3J0Q29uZmlnIiwidHJhbnNwb3J0TWFuYWdlciIsInByb2dyZXNzIiwiY29tcGxldGVkU3RlcHMiLCJmaWxsIiwiZW5hYmxlUmVhbFRpbWVVcGRhdGVzIiwicGVyZm9ybWFuY2VNb2RlIiwiZW5hYmxlQW5hbHl0aWNzIiwibW9kYWxFbCIsImNyZWF0ZUhlYWRlciIsImNyZWF0ZVByb2dyZXNzQmFyIiwiY3JlYXRlTmF2aWdhdGlvbiIsInJlbmRlckN1cnJlbnRTdGVwIiwiaGVhZGVyIiwic3RlcHNDb250YWluZXIiLCJwcm9ncmVzc0JhciIsIndpZHRoIiwibmF2aWdhdGlvbiIsInByZXZpb3VzQnV0dG9uIiwiQnV0dG9uQ29tcG9uZW50Iiwic2V0Q2xhc3MiLCJwcmV2aW91c1N0ZXAiLCJza2lwQnV0dG9uIiwic2tpcE9uYm9hcmRpbmciLCJuZXh0QnV0dG9uIiwibmV4dFN0ZXAiLCJ1cGRhdGVOYXZpZ2F0aW9uU3RhdGUiLCJzdGVwQ29udGFpbmVyIiwidXBkYXRlUHJvZ3Jlc3NJbmRpY2F0b3JzIiwiV0VMQ09NRSIsInJlbmRlcldlbGNvbWVTdGVwIiwiRU5WSVJPTk1FTlRfREVURUNUSU9OIiwicmVuZGVyRW52aXJvbm1lbnRTdGVwIiwiUFJFRkVSRU5DRVMiLCJyZW5kZXJQcmVmZXJlbmNlc1N0ZXAiLCJWQUxJREFUSU9OIiwicmVuZGVyVmFsaWRhdGlvblN0ZXAiLCJDT01QTEVUSU9OIiwicmVuZGVyQ29tcGxldGlvblN0ZXAiLCJmZWF0dXJlcyIsImZlYXR1cmVMaXN0Iiwic2tpcEVudmlyb25tZW50RGV0ZWN0aW9uIiwiZGV0ZWN0ZWRDYXBhYmlsaXRpZXMiLCJyZW5kZXJFbnZpcm9ubWVudFJlc3VsdHMiLCJkZXRlY3RFbnZpcm9ubWVudCIsInJlbmRlckVudmlyb25tZW50RXJyb3IiLCJlbnZJbmZvIiwid2ViU29ja2V0U3VwcG9ydGVkIiwiZmlsZVN5c3RlbUFjY2VzcyIsImh0dHBDYXBhYmlsaXRpZXMiLCJyZWNvbW1lbmRlZFRyYW5zcG9ydCIsInBlcmZvcm1hbmNlRXN0aW1hdGUiLCJjYXBhYmlsaXRpZXNMaXN0Iiwid3NDYXBhYmlsaXR5IiwiaHR0cENhcGFiaWxpdHkiLCJmc0NhcGFiaWxpdHkiLCJlcnJvckNvbnRhaW5lciIsInByZWZlcmVuY2VzQ29udGFpbmVyIiwic2tpcFZhbGlkYXRpb24iLCJ2YWxpZGF0aW9uUmVzdWx0cyIsInJlbmRlclZhbGlkYXRpb25SZXN1bHRzIiwidmFsaWRhdGVDb25maWd1cmF0aW9uIiwicmVuZGVyVmFsaWRhdGlvbkVycm9yIiwidHJhbnNwb3J0c1dvcmtpbmciLCJ0cmFuc3BvcnRzRmFpbGluZyIsInJlY29tbWVuZGVkQ29uZmlndXJhdGlvbiIsInBlcmZvcm1hbmNlQmFzZWxpbmUiLCJhdmdSZXNwb25zZVRpbWUiLCJ0aHJvdWdocHV0Iiwid29ya2luZ0NvbnRhaW5lciIsIndvcmtpbmdMaXN0IiwicGVyZm9ybWFuY2VDb250YWluZXIiLCJwZXJmTGlzdCIsInN1bW1hcnlMaXN0IiwibmV4dFN0ZXBzIiwibmV4dExpc3QiLCJlbGVtZW50IiwicHJvZ3Jlc3NGaWxsIiwiYnV0dG9uRWwiLCJmaW5pc2hPbmJvYXJkaW5nIiwiY29uZmlybSIsInNraXBwZWQiLCJhcHBseUNvbmZpZ3VyYXRpb24iLCJvbmJvYXJkaW5nQ29tcGxldGUiLCJnZXRTZWxlY3Rpb25Dcml0ZXJpYUZvck1vZGUiLCJidWlsZEZhbGxiYWNrQ2hhaW4iLCJ3ZWJTb2NrZXRVcmwiLCJjaGFpbiIsIlRyYW5zcG9ydERhc2hib2FyZCIsIkNvbXBvbmVudCIsInVwZGF0ZUludGVydmFsIiwic2hvd0FkdmFuY2VkTWV0cmljcyIsInN0YXR1c0NhcmRzIiwiaXNSZWFsVGltZUVuYWJsZWQiLCJvbmxvYWQiLCJpbml0aWFsaXplRGFzaGJvYXJkIiwic3RhcnRSZWFsVGltZVVwZGF0ZXMiLCJ1cGRhdGVEYXNoYm9hcmQiLCJvbnVubG9hZCIsInN0b3BSZWFsVGltZVVwZGF0ZXMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsImNyZWF0ZVN5c3RlbUhlYWx0aFNlY3Rpb24iLCJjcmVhdGVUcmFuc3BvcnRTdGF0dXNTZWN0aW9uIiwiY3JlYXRlUGVyZm9ybWFuY2VNZXRyaWNzU2VjdGlvbiIsImNyZWF0ZUNoYXJ0c1NlY3Rpb24iLCJjcmVhdGVDb250cm9sc1NlY3Rpb24iLCJsYXN0VXBkYXRlIiwic3lzdGVtSGVhbHRoQ29udGFpbmVyIiwicmVuZGVyU3lzdGVtSGVhbHRoUGxhY2Vob2xkZXIiLCJjYXJkc0NvbnRhaW5lciIsImNhcmQiLCJjcmVhdGVUcmFuc3BvcnRDYXJkIiwicmVzcG9uc2VUaW1lIiwic3VjY2Vzc1JhdGUiLCJlcnJvckNvdW50IiwiYWN0aW9ucyIsInRlc3RUcmFuc3BvcnQiLCJzd2l0Y2hUb1RyYW5zcG9ydCIsIm1ldHJpY3NDb250YWluZXIiLCJyZW5kZXJQZXJmb3JtYW5jZU1ldHJpY3NQbGFjZWhvbGRlciIsInJlbmRlckNoYXJ0c1BsYWNlaG9sZGVyIiwiY29udHJvbHMiLCJtYW51YWxSZWZyZXNoIiwiZXhwb3J0RGF0YSIsIm9wZW5EYXNoYm9hcmRTZXR0aW5ncyIsInJlYWx0aW1lVG9nZ2xlIiwib25jaGFuZ2UiLCJ0b2dnbGVSZWFsVGltZVVwZGF0ZXMiLCJjdXJyZW50SGVhbHRoIiwiZ2V0U3lzdGVtSGVhbHRoIiwicmVuZGVyU3lzdGVtSGVhbHRoIiwidXBkYXRlVHJhbnNwb3J0U3RhdHVzZXMiLCJjdXJyZW50TWV0cmljcyIsImdldFBlcmZvcm1hbmNlTWV0cmljcyIsInJlbmRlclBlcmZvcm1hbmNlTWV0cmljcyIsInVwZGF0ZVRpbWVzdGFtcCIsInJlbmRlckVycm9yIiwib3ZlcmFsbCIsImxhc3RIZWFsdGhDaGVjayIsInN0YXJ0ZWQiLCJmbG9vciIsInRvdGFsRXJyb3JzIiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsInA5NVJlc3BvbnNlVGltZSIsInJlcXVlc3RzUGVyTWludXRlIiwidHJhbnNwb3J0RGlzdHJpYnV0aW9uIiwidHJlbmRzIiwiZ2VuZXJhdGVUcmVuZERhdGEiLCJ0aW1lc3RhbXBzIiwiZ2VuZXJhdGVUaW1lc3RhbXBzIiwiYmFzZWxpbmUiLCJ2YXJpYW5jZSIsInBvaW50cyIsImdldFRpbWUiLCJzdXBwb3J0ZWRUcmFuc3BvcnRzIiwiZ2V0VHJhbnNwb3J0U3RhdHVzIiwidXBkYXRlVHJhbnNwb3J0Q2FyZCIsImlzQWN0aXZlIiwibGFzdFJlc3BvbnNlVGltZSIsImdldFRyYW5zcG9ydENhcGFiaWxpdGllcyIsImNvbm5lY3Rpb25TdGF0ZSIsImxhc3RFcnJvciIsImNvbm5lY3Rpb25FbCIsImhlYWx0aEdyaWQiLCJvdmVyYWxsSGVhbHRoIiwiZm9ybWF0VXB0aW1lIiwidG9Mb2NhbGVTdHJpbmciLCJyYXRlIiwibWV0cmljc0dyaWQiLCJhdmdSZXNwb25zZSIsInA5NVJlc3BvbnNlIiwicnBtIiwiZGlzdHJpYnV0aW9uIiwiZGlzdHJpYnV0aW9uQmFycyIsInBlcmNlbnRhZ2UiLCJiYXIiLCJzZWNvbmRzIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsInRpbWVzdGFtcEVsIiwib25UcmFuc3BvcnRTd2l0Y2hlZCIsIm9uSGVhbHRoQ2hhbmdlZCIsIm9uRXJyb3JPY2N1cnJlZCIsInBlcmZvcm1UcmFuc3BvcnRUZXN0Iiwic3lzdGVtSGVhbHRoIiwicGVyZm9ybWFuY2VNZXRyaWNzIiwiZXhwb3J0ZWRCeSIsImJsb2IiLCJCbG9iIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiaHJlZiIsImRvd25sb2FkIiwicmV2b2tlT2JqZWN0VVJMIiwiQWR2YW5jZWRTZXR0aW5ncyIsInNob3dFeHBlcnRPcHRpb25zIiwiZW5hYmxlUmVhbFRpbWVWYWxpZGF0aW9uIiwiYWxsb3dJbXBvcnRFeHBvcnQiLCJwcm9maWxlcyIsImhhc1Vuc2F2ZWRDaGFuZ2VzIiwiY3VycmVudENvbmZpZ3VyYXRpb24iLCJnZXREZWZhdWx0Q29uZmlndXJhdGlvbiIsImxvYWRQcm9maWxlcyIsImluaXRpYWxpemVJbnRlcmZhY2UiLCJsb2FkQ3VycmVudENvbmZpZ3VyYXRpb24iLCJyZW5kZXJTZXR0aW5ncyIsInN0YXJ0UmVhbFRpbWVWYWxpZGF0aW9uIiwidmFsaWRhdGlvblRpbWVvdXQiLCJzYXZlQ29uZmlndXJhdGlvbiIsImNyZWF0ZVByb2ZpbGVNYW5hZ2VtZW50IiwiY3JlYXRlVmFsaWRhdGlvblNlY3Rpb24iLCJjcmVhdGVDb25maWd1cmF0aW9uU2VjdGlvbnMiLCJjcmVhdGVQcmV2aWV3U2VjdGlvbiIsImNyZWF0ZUFjdGlvbkJ1dHRvbnMiLCJleHBlcnRMYWJlbCIsImV4cGVydENoZWNrYm94IiwidXBkYXRlRXhwZXJ0T3B0aW9uc1Zpc2liaWxpdHkiLCJwcm9maWxlQ29udHJvbHMiLCJzZWxlY3RvckNvbnRhaW5lciIsInByb2ZpbGVTZWxlY3RvciIsInVwZGF0ZVByb2ZpbGVTZWxlY3RvciIsImxvYWRQcm9maWxlIiwicHJvZmlsZUFjdGlvbnMiLCJzaG93U2F2ZVByb2ZpbGVNb2RhbCIsImRlbGV0ZUN1cnJlbnRQcm9maWxlIiwiaW1wb3J0Q29uZmlndXJhdGlvbiIsImV4cG9ydENvbmZpZ3VyYXRpb24iLCJ2YWxpZGF0aW9uQ29udGFpbmVyIiwicmVuZGVyVmFsaWRhdGlvblBsYWNlaG9sZGVyIiwiY29uZmlndXJhdGlvbkNvbnRhaW5lciIsImNyZWF0ZVRyYW5zcG9ydFNldHRpbmdzIiwiY3JlYXRlUGVyZm9ybWFuY2VTZXR0aW5ncyIsImNyZWF0ZU1vbml0b3JpbmdTZXR0aW5ncyIsImNyZWF0ZVVJU2V0dGluZ3MiLCJjcmVhdGVQcml2YWN5U2V0dGluZ3MiLCJzZXR0aW5nc0NvbnRhaW5lciIsInByaW1hcnlUcmFuc3BvcnQiLCJvbkNvbmZpZ3VyYXRpb25DaGFuZ2UiLCJjcmVhdGVGYWxsYmFja0NoYWluQ29uZmlnIiwiY3JlYXRlU2VsZWN0aW9uQ3JpdGVyaWFDb25maWciLCJjcmVhdGVUaW1lb3V0Q29uZmlnIiwiY3JlYXRlUmV0cnlQb2xpY3lDb25maWciLCJmYWxsYmFja0NvbnRhaW5lciIsImNvbnRyb2xFbCIsImNoYWluRGlzcGxheSIsInVwZGF0ZUZhbGxiYWNrQ2hhaW5EaXNwbGF5IiwiYWRkQnV0dG9ucyIsIml0ZW0iLCJjcml0ZXJpYUNvbnRhaW5lciIsIm5vcm1hbGl6ZVNlbGVjdGlvbkNyaXRlcmlhIiwidGltZW91dENvbnRhaW5lciIsInRpbWVvdXRzIiwiY29ubmVjdGlvbiIsInBhcnNlZCIsImlzTmFOIiwicmV0cnlDb250YWluZXIiLCJyZXRyeSIsInJldHJ5UG9saWN5IiwibWF4QXR0ZW1wdHMiLCJiYWNrb2ZmTXVsdGlwbGllciIsInBlcmZvcm1hbmNlIiwiYXBwbHlQZXJmb3JtYW5jZU1vZGVQcmVzZXQiLCJlbmFibGVDb25uZWN0aW9uUG9vbGluZyIsImVuYWJsZUNvbXByZXNzaW9uIiwiZW5hYmxlQ2FjaGluZyIsIm1heENvbmN1cnJlbnRSZXF1ZXN0cyIsImNhY2hlU2l6ZSIsIm1vbml0b3JpbmciLCJlbmFibGVIZWFsdGhDaGVja3MiLCJlbmFibGVNZXRyaWNzIiwiZW5hYmxlUHJlZGljdGl2ZUFsZXJ0cyIsInVpIiwidGhlbWUiLCJlbmFibGVBbmltYXRpb25zIiwiZGFzaGJvYXJkUmVmcmVzaFJhdGUiLCJwcml2YWN5IiwiZGF0YVJldGVudGlvbkRheXMiLCJwcmV2aWV3Q29udGFpbmVyIiwidXBkYXRlUHJldmlldyIsInJlc2V0VG9EZWZhdWx0cyIsInRlc3RDb25maWd1cmF0aW9uIiwiYWR2YW5jZWRDb25maWd1cmF0aW9uIiwibWF4QmFja29mZlRpbWUiLCJtZXRyaWNzUmV0ZW50aW9uIiwiZW5hYmxlTm90aWZpY2F0aW9ucyIsInNoYXJlVXNhZ2VEYXRhIiwic2NoZWR1bGVWYWxpZGF0aW9uIiwid2FybmluZ3MiLCJmaWVsZCIsInNldmVyaXR5IiwidG90YWxXZWlnaHQiLCJhYnMiLCJpbXBhY3QiLCJlc3RpbWF0ZWRJbXBhY3QiLCJlc3RpbWF0ZUNvbmZpZ3VyYXRpb25JbXBhY3QiLCJpc1ZhbGlkIiwidmFsaWRhdGlvblJlc3VsdCIsInJlbmRlclZhbGlkYXRpb25SZXN1bHQiLCJwZXJmb3JtYW5jZUNoYW5nZSIsInJlbGlhYmlsaXR5Q2hhbmdlIiwicmVzb3VyY2VVc2FnZSIsImVycm9yRWwiLCJ3YXJuaW5nIiwid2FybmluZ0VsIiwiaW1wYWN0RWwiLCJpbXBhY3RHcmlkIiwicGVyZkltcGFjdCIsInJlbGlhYmlsaXR5SW1wYWN0IiwicmVzb3VyY2VJbXBhY3QiLCJwZXJmIiwiZWwiLCJwcm9maWxlIiwic2F2ZWRQcm9maWxlcyIsImNvbmZpZ3VyYXRpb25Qcm9maWxlcyIsInAiLCJjcmVhdGVkIiwicHJvZmlsZUlkIiwiZmluZCIsInByb21wdCIsInNhdmVBc1Byb2ZpbGUiLCJpc0RlZmF1bHQiLCJzYXZlUHJvZmlsZXMiLCJjdXJyZW50UHJvZmlsZUlkIiwidGVzdFJlc3VsdCIsImNvbmZpZ3VyYXRpb24iLCJpbnB1dCIsImFjY2VwdCIsInRhcmdldCIsIkZpbGVSZWFkZXIiLCJyZWFkQXNUZXh0IiwiUmVjb21tZW5kYXRpb25FbmdpbmUiLCJwZXJmb3JtYW5jZUhpc3RvcnkiLCJiZWhhdmlvclBhdHRlcm5zIiwiYXBwbGllZFJlY29tbWVuZGF0aW9ucyIsImluc2lnaHRDYWNoZSIsInByZWRpY3Rpb25Nb2RlbHMiLCJBTkFMWVNJU19XSU5ET1ciLCJNSU5fREFUQV9QT0lOVFMiLCJDT05GSURFTkNFX1RIUkVTSE9MRCIsImluaXRpYWxpemVQcmVkaWN0aW9uTW9kZWxzIiwiZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMiLCJyZWNvbW1lbmRhdGlvbnMiLCJvcHBvcnR1bml0aWVzIiwiYW5hbHl6ZU9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMiLCJ0cmFuc3BvcnRSZWNzIiwiZ2VuZXJhdGVUcmFuc3BvcnRSZWNvbW1lbmRhdGlvbnMiLCJwZXJmb3JtYW5jZVJlY3MiLCJnZW5lcmF0ZVBlcmZvcm1hbmNlUmVjb21tZW5kYXRpb25zIiwiY29uZmlnUmVjcyIsImdlbmVyYXRlQ29uZmlndXJhdGlvblJlY29tbWVuZGF0aW9ucyIsIm1haW50ZW5hbmNlUmVjcyIsImdlbmVyYXRlTWFpbnRlbmFuY2VSZWNvbW1lbmRhdGlvbnMiLCJzb3J0ZWRSZWNvbW1lbmRhdGlvbnMiLCJwcmlvcml0aXplUmVjb21tZW5kYXRpb25zIiwicmVjIiwiYXJlYSIsImVmZm9ydCIsImN1cnJlbnRWYWx1ZSIsInBvdGVudGlhbFZhbHVlIiwiaW1wcm92ZW1lbnQiLCJ0cmFuc3BvcnRVc2FnZSIsIm1heFVzYWdlIiwibWluVXNhZ2UiLCJvcHRpbWFsVHJhbnNwb3J0IiwiZGV0ZXJtaW5lT3B0aW1hbFRyYW5zcG9ydCIsImN1cnJlbnRUcmFuc3BvcnQiLCJUUkFOU1BPUlRfT1BUSU1JWkFUSU9OIiwicmF0aW9uYWxlIiwiZ2VuZXJhdGVUcmFuc3BvcnRTd2l0Y2hSYXRpb25hbGUiLCJleHBlY3RlZEltcGFjdCIsInBlcmZvcm1hbmNlSW1wcm92ZW1lbnQiLCJlcnJvclJlZHVjdGlvbiIsInJlbGlhYmlsaXR5SW1wcm92ZW1lbnQiLCJjb25maWRlbmNlU2NvcmUiLCJpbXBsZW1lbnRhdGlvbiIsImRpZmZpY3VsdHkiLCJlc3RpbWF0ZWRUaW1lIiwic3RlcHMiLCJhY3Rpb24iLCJyZXZlcnNpYmxlIiwicmlza0xldmVsIiwiY2F0ZWdvcnkiLCJQRVJGT1JNQU5DRV9UVU5JTkciLCJDT05GSUdVUkFUSU9OX0lNUFJPVkVNRU5UIiwiaGVhbHRoTW9uaXRvcmluZ1JlY29tbWVuZGF0aW9uIiwiUFJPQUNUSVZFX01BSU5URU5BTkNFIiwiZW52aXJvbm1lbnRDb250ZXh0IiwiYmVoYXZpb3IiLCJ1c2VyQmVoYXZpb3IiLCJzY29yZXMiLCJjb25uZWN0aXZpdHkiLCJwZXJmb3JtYW5jZVNlbnNpdGl2aXR5IiwidXNhZ2VGcmVxdWVuY3kiLCJlcnJvclRvbGVyYW5jZSIsImN1cnJlbnQiLCJwcmlvcml0eU9yZGVyIiwiY3JpdGljYWwiLCJoaWdoIiwibWVkaXVtIiwibG93IiwicHJpb3JpdHlEaWZmIiwiaW1wYWN0QSIsImdlbmVyYXRlSW5zaWdodHMiLCJnZW5lcmF0ZUluc2lnaHRDYWNoZUtleSIsInBlcmZvcm1hbmNlSW5zaWdodHMiLCJnZW5lcmF0ZVBlcmZvcm1hbmNlSW5zaWdodHMiLCJ1c2FnZUluc2lnaHRzIiwiZ2VuZXJhdGVVc2FnZUluc2lnaHRzIiwidHJhbnNwb3J0SW5zaWdodHMiLCJnZW5lcmF0ZVRyYW5zcG9ydEluc2lnaHRzIiwiYWN0aW9uYWJsZSIsInJlbGF0ZWQiLCJnZXRVc2FnZUZyZXF1ZW5jeUFkdmljZSIsImZyZXF1ZW5jeSIsInBlYWtVc2FnZUhvdXJzIiwicGVha0hvdXJzIiwidXNhZ2UiLCJ0b3RhbFVzYWdlIiwiZG9taW5hbnRUcmFuc3BvcnQiLCJkb21pbmFudFBlcmNlbnRhZ2UiLCJkb21pbmFudCIsImdlbmVyYXRlUHJlZGljdGl2ZUFsZXJ0cyIsImFsZXJ0cyIsInBlcmZvcm1hbmNlVHJlbmQiLCJhbmFseXplUGVyZm9ybWFuY2VUcmVuZCIsImRlY2xpbmluZyIsInByb2JhYmlsaXR5IiwicHJldmVudGl2ZUFjdGlvbnMiLCJ0cmlnZ2VycyIsInJlY2VudExhdGVuY3kiLCJyZWNlbnRFcnJvclJhdGUiLCJzZXNzaW9uSWQiLCJ0cmFpbmVkIiwidHJhY2tSZWNvbW1lbmRhdGlvbkVmZmVjdGl2ZW5lc3MiLCJyZWNvbW1lbmRhdGlvbklkIiwiZWZmZWN0aXZlbmVzcyIsImFwcGxpZWRBdCIsImdldFJlY29tbWVuZGF0aW9uU3RhdHMiLCJhcHBsaWVkIiwiciIsImJ5VHlwZSIsImF2ZXJhZ2VFZmZlY3RpdmVuZXNzIiwiUGhhc2UzSW50ZWdyYXRpb24iLCJlbmFibGVPbmJvYXJkaW5nIiwiZW5hYmxlRGFzaGJvYXJkIiwiZW5hYmxlUmVjb21tZW5kYXRpb25zIiwiZW5hYmxlQWR2YW5jZWRTZXR0aW5ncyIsImF1dG9TaG93T25ib2FyZGluZyIsInJlY29tbWVuZGF0aW9uRW5naW5lIiwicmVnaXN0ZXJDb21tYW5kcyIsInNldHVwQ29tcG9uZW50cyIsInNob3dPbmJvYXJkaW5nIiwic3RhcnRSZWNvbW1lbmRhdGlvbkVuZ2luZSIsImNsZWFudXAiLCJhZGRDb21tYW5kIiwic2hvd0Rhc2hib2FyZCIsInNob3dBZHZhbmNlZFNldHRpbmdzIiwic2hvd1JlY29tbWVuZGF0aW9ucyIsInF1aWNrT3B0aW1pemUiLCJsb2FkUGhhc2UzU3R5bGVzIiwic2V0dXBEYXNoYm9hcmQiLCJzZXR1cEFkdmFuY2VkU2V0dGluZ3MiLCJvbmJvYXJkaW5nV2l6YXJkIiwiRGFzaGJvYXJkTW9kYWwiLCJBZHZhbmNlZFNldHRpbmdzTW9kYWwiLCJidWlsZFJlY29tbWVuZGF0aW9uQ29udGV4dCIsIlJlY29tbWVuZGF0aW9uc01vZGFsIiwicXVpY2tSZWNzIiwiYXBwbHlSZWNvbW1lbmRhdGlvbiIsInRpbWVXaW5kb3ciLCJwcmVmZXJyZWRGZWF0dXJlcyIsImJhbmR3aWR0aCIsInN0YWJpbGl0eSIsImF1dG9TdGVwcyIsImdlbmVyYXRlQmFja2dyb3VuZFJlY29tbWVuZGF0aW9ucyIsImNyaXRpY2FsUmVjcyIsInRyYW5zcG9ydERhc2hib2FyZCIsInVubG9hZCIsImFkdmFuY2VkU2V0dGluZ3MiLCJzaG93T25ib2FyZGluZ0lmTmVlZGVkIiwiZ2V0UmVjb21tZW5kYXRpb25FbmdpbmUiLCJyZWZyZXNoRGFzaGJvYXJkIiwiZGFzaGJvYXJkIiwibG9hZCIsImVuZ2luZSIsInJlY3NMaXN0IiwicmVuZGVyUmVjb21tZW5kYXRpb24iLCJmb290ZXIiLCJyZWNFbCIsImltcGFjdExpc3QiLCJpbXBsIiwic3RlcEVsIiwiYXBwbHlCdG4iLCJyYXRpb25hbGVUb2dnbGUiLCJyYXRpb25hbGVDb250ZW50IiwiUHJvZ3Jlc3NJbmRpY2F0b3JVSSIsImFjdGl2ZVByb2dyZXNzIiwiaW5pdGlhbGl6ZUNvbnRhaW5lciIsImNzc1RleHQiLCJzaG93UHJvZ3Jlc3MiLCJyZW5kZXJQcm9ncmVzcyIsImhpZGVQcm9ncmVzcyIsInVwZGF0ZVByb2dyZXNzIiwidXBkYXRlcyIsImV4aXN0aW5nIiwidXBkYXRlZCIsImFuaW1hdGlvbiIsInVwZGF0ZVByb2dyZXNzRWxlbWVudCIsImNyZWF0ZVByb2dyZXNzRWxlbWVudCIsImV0YSIsImZvcm1hdEVUQSIsImNhbmNlbGFibGUiLCJjYW5jZWxCdG4iLCJ0cmlnZ2VyIiwiZ2V0QWN0aXZlUHJvZ3Jlc3MiLCJjbGVhckFsbFByb2dyZXNzIiwiUmVzcG9uc2VUaW1lT3B0aW1pemVyIiwicmVxdWVzdFF1ZXVlIiwibWF4Q2FjaGVTaXplIiwiZGVmYXVsdFRUTCIsImluaXRpYWxpemVNZXRyaWNzIiwic3RhcnRDbGVhbnVwSW50ZXJ2YWwiLCJjYWNoZUhpdHMiLCJjYWNoZU1pc3NlcyIsInNsb3dlc3RSZXNwb25zZSIsImZhc3Rlc3RSZXNwb25zZSIsImN1cnJlbnRDYWNoZVNpemUiLCJtZW1vcnlVc2FnZSIsIm9wdGltaXplZFJlcXVlc3QiLCJrZXlfMSIsInJlcXVlc3RGbl8xIiwicmVxdWVzdEZuIiwic2tpcENhY2hlIiwiZ2V0RnJvbUNhY2hlIiwidXBkYXRlUmVzcG9uc2VUaW1lTWV0cmljcyIsImV4aXN0aW5nUmVxdWVzdCIsInJlcXVlc3RQcm9taXNlIiwiZXhlY3V0ZVJlcXVlc3QiLCJ0dGwiLCJzZXRDYWNoZSIsImVudHJ5IiwiaGl0Q291bnQiLCJldmljdExlYXN0VXNlZCIsImVzdGltYXRlU2l6ZSIsInVwZGF0ZUNhY2hlTWV0cmljcyIsImxlYXN0VXNlZEtleSIsImxlYXN0VXNlZENvdW50IiwiY3VycmVudEF2ZyIsImNsZWFudXBFeHBpcmVkRW50cmllcyIsImdldENhY2hlSGl0UmF0ZSIsInNldENhY2hlQ29uZmlnIiwiV2ViU29ja2V0SGFuZGxlciIsInJlY29ubmVjdEludGVydmFsIiwibWVzc2FnZUhhbmRsZXJzIiwic2V0dXBNZXNzYWdlSGFuZGxlcnMiLCJlbmhhbmNlbWVudE1hbmFnZXIiLCJwcm9ncmVzc0luZGljYXRvciIsInN0YXJ0UmVjb25uZWN0IiwiaXNTb2NrZXRDb25uZWN0ZWQiLCJWYXVsdFBpbG90RW5oYW5jZW1lbnRNYW5hZ2VyIiwiaXNJbml0aWFsaXplZCIsInJlc3BvbnNlT3B0aW1pemVyIiwid2ViU29ja2V0SGFuZGxlciIsImFkZENoaWxkIiwib3B0aW1pemVkQVBJQ2FsbCIsIktleWJvYXJkU2hvcnRjdXRIYW5kbGVyIiwic2hvcnRjdXRzIiwiY29udGV4dE1lbnVFbmFibGVkIiwiaW5pdGlhbGl6ZURlZmF1bHRTaG9ydGN1dHMiLCJtb2RpZmllcnMiLCJjb21tYW5kIiwic2hvcnRjdXQiLCJhZGRTaG9ydGN1dCIsImdldFNob3J0Y3V0S2V5IiwicmVtb3ZlU2hvcnRjdXQiLCJoYW5kbGVLZXlEb3duIiwiY3RybEtleSIsImFsdEtleSIsIm1ldGFLZXkiLCJzaG9ydGN1dEtleSIsImdldEN1cnJlbnRDb250ZXh0IiwiaXNTaG9ydGN1dFZhbGlkRm9yQ29udGV4dCIsInN0b3BQcm9wYWdhdGlvbiIsImV4ZWN1dGVDb21tYW5kIiwiY29tbWFuZElkIiwicXVpY2tDaGF0V2l0aFNlbGVjdGlvbiIsImFjdGl2ZUVkaXRvciIsIm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsIiwib3BlbkZpbGVPcGVyYXRpb25zTW9kYWwiLCJvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCIsIm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCIsInNob3dTaG9ydGN1dHNIZWxwIiwicmVmcmVzaENhY2hlIiwic2hvd1BlcmZvcm1hbmNlTWV0cmljcyIsIm9wZW5BZ2VudE1hcmtldHBsYWNlIiwic2hvd0FnZW50RXZvbHV0aW9uIiwiY3JlYXRlUXVpY2tOb3RlIiwiaW5zZXJ0VGVtcGxhdGUiLCJhbmFseXplTGlua3MiLCJvcGVuVGFnTWFuYWdlciIsIm9wZW5FbmhhbmNlbWVudERlbW8iLCJnZW5lcmF0ZVNob3J0Y3V0c0hlbHBDb250ZW50IiwibW9kYWwiLCJjYXRlZ29yaXplZCIsImNhdGVnb3JpemVTaG9ydGN1dHMiLCJjYXRlZ29yeVNob3J0Y3V0cyIsImtleUNvbWJvIiwiY2F0ZWdvcmllcyIsIlN5c3RlbSIsInRoZW4iLCJnZXRMZWFmIiwib3BlbkZpbGUiLCJlbmhhbmNlbWVudERlbW8iLCJWYXVsdFBpbG90RW5oYW5jZW1lbnREZW1vIiwiZ2V0U2hvcnRjdXRzIiwiaXNFbmFibGVkIiwic2V0RW5hYmxlZCIsIkVuaGFuY2VkQ29tbWFuZHNGYWN0b3J5IiwiY3JlYXRlRW5oYW5jZWRDb21tYW5kcyIsImVkaXRvckNhbGxiYWNrIiwiVmF1bHRQaWxvdFBsdWdpbiIsIlBsdWdpbiIsIndlYnNvY2tldENvbm5lY3RlZCIsImNvcGlsb3RFbmFibGVkIiwiYXBwSW5zdGFuY2UiLCJsb2FkU2V0dGluZ3MiLCJsb2FkRW5oYW5jZWRVSVN0eWxlcyIsInJlZ2lzdGVyVmlldyIsInJpYmJvbkljb25FbCIsImFkZFJpYmJvbkljb24iLCJldnQiLCJwbGFuVGFza3NGcm9tTm90ZSIsImRlYnVnUGxhbk15RGF5IiwidGVzdE1vZGVsU2VsZWN0aW9uIiwic2hvd01vZGVsSGVhbHRoIiwicmV0cnlNb2RlbFNlbGVjdGlvbk1hbnVhbCIsImNoZWNrU2VydmljZVN0YXR1cyIsInJlZ2lzdGVyVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMiLCJpbml0aWFsaXplUGhhc2UzIiwiaW5pdGlhbGl6ZUVuaGFuY2VtZW50TWFuYWdlciIsInJlZ2lzdGVyRG9tRXZlbnQiLCJoYW5kbGVLZXlVcCIsImJpbmQiLCJhZGRTZXR0aW5nVGFiIiwiZGV0YWNoTGVhdmVzT2ZUeXBlIiwiZGlzYWJsZVBoYXNlMyIsImRpc2FibGVFbmhhbmNlbWVudE1hbmFnZXIiLCJoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbiIsImZpbGVDb250ZW50IiwiYW5hbHlzaXNfdHlwZSIsImFuYWx5c2lzQ29udGVudCIsImFuYWx5c2lzIiwiaW5zaWdodCIsImN1cnNvciIsImdldEN1cnNvciIsInRleHRCZWZvcmVDdXJzb3IiLCJmdWxsVGV4dCIsImdldFZhbHVlIiwiY3Vyc29yX3Bvc2l0aW9uIiwicG9zVG9PZmZzZXQiLCJmaWxlX3R5cGUiLCJyZXBsYWNlUmFuZ2UiLCJjb21wbGV0aW9uIiwibmV3TGluZSIsInRhc2tDb250ZW50IiwiZXN0aW1hdGVkX2R1cmF0aW9uIiwidGFzayIsImNoZWNrYm94IiwiZXN0aW1hdGVkX3RpbWUiLCJtaWxlc3RvbmVzIiwibWlsZXN0b25lIiwidGFyZ2V0X2RhdGUiLCJmaWxlVGV4dCIsImhhc0NvbnRlbnQiLCJmaXJzdExpbmUiLCJzY2hlZHVsZU1hcmtkb3duIiwiaGVhZGxpbmUiLCJub3RlVGV4dCIsImFjdHVhbERhdGEiLCJwbGFuS2V5cyIsImhhc1Rhc2tzIiwidGltZU1hdGNoIiwibWFya2Rvd25MZW5ndGgiLCJmZXRjaFNjaGVkdWxlIiwidHJpbW1lZExlbmd0aCIsImlzU3RyaW5nIiwidmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIiwiZXhpc3RpbmdQbGFuU2VjdGlvbiIsImV4aXN0aW5nU2NoZWR1bGVTZWN0aW9uIiwiaGFzUGxhbldyYXBwZXIiLCJoYXNTY2hlZHVsZVNlY3Rpb24iLCJwbGFuQ29udGVudCIsInNjaGVkdWxlSGVhZGluZyIsInVwZGF0ZWRUZXh0Iiwib3JpZ2luYWxUZXh0Iiwib3JpZ2luYWxMZW5ndGgiLCJzY2hlZHVsZUxlbmd0aCIsImhhc09yaWdpbmFsQ29udGVudCIsInBsYW5NYXRjaCIsInN0YXJ0Q29tbWVudCIsImNvbnRlbnRMZW5ndGgiLCJlbmRDb21tZW50IiwiZnVsbE1hdGNoIiwicmVwbGFjZW1lbnQiLCJzY2hlZHVsZU1hdGNoIiwiaGVhZGluZ01hdGNoIiwiY29udGVudE1hdGNoIiwiaW5qZWN0U2NoZWR1bGUiLCJ1cGRhdGVkTGVuZ3RoIiwiY2hhbmdlZCIsIm1vZGlmeSIsInN1Y2Nlc3NNZXNzYWdlIiwiaGFzQWN0aXZlRmlsZSIsImZpbGVOYW1lIiwiZmlsZUV4dGVuc2lvbiIsImFwaUFuYWx5c2lzIiwiY29ubmVjdGlvblRlc3QiLCJwbGFubmluZ1Rlc3QiLCJoYXNBcGlLZXkiLCJsb2dTdW1tYXJ5IiwiZGVidWdDb250ZW50IiwibGVhdmVzIiwiZ2V0TGVhdmVzT2ZUeXBlIiwicmlnaHRMZWFmIiwiZ2V0UmlnaHRMZWFmIiwic2V0Vmlld1N0YXRlIiwicmV2ZWFsTGVhZiIsIm5ld0xlYWYiLCJjaGVja1ZhdWx0TWFuYWdlbWVudEF2YWlsYWJpbGl0eSIsIkF1dGhvcml6YXRpb24iLCJzZWFyY2hUZXN0IiwiaW5jbHVkZV9zZXR0aW5ncyIsImJhY2t1cF9uYW1lIiwiZmlsZXNfYmFja2VkX3VwIiwiYmFja3VwX3NpemUiLCJiYWNrdXBfcGF0aCIsInBoYXNlM0ludGVncmF0aW9uIiwia2V5Ym9hcmRIYW5kbGVyIiwiY2hlY2tDYWxsYmFjayIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZSIsImF1dG9Db21wbGV0ZVRpbWVvdXQiLCJ0cmlnZ2VyQXV0b0NvbXBsZXRpb24iLCJjdXJyZW50TGluZSIsImxhc3RDaGFyIiwibGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QiLCJsb2FkRGF0YSIsInNhdmVEYXRhIiwibW9kZWxTZWxlY3Rpb25TZXJ2aWNlIiwicmV0cnlNb2RlbFNlbGVjdGlvbkluaXQiLCJhdHRlbXB0IiwiZGVsYXkiLCJyZXN1bHRUZXh0IiwiaGVhbHRoSW5mbyIsImgiLCJtb2RlbF9pZCIsInJlc3BvbnNlX3RpbWUiLCJhdmFpbGFiaWxpdHlfcGVyY2VudGFnZSIsImdldEJlc3RNb2RlbEZvclRhc2siLCJzdHlsZUlkIiwiZXhpc3RpbmdTdHlsZSIsImNyZWF0ZUtleWJvYXJkU2hvcnRjdXRzRGVtbyIsImNyZWF0ZVByb2dyZXNzSW5kaWNhdG9yRGVtbyIsImNyZWF0ZVBlcmZvcm1hbmNlRGVtbyIsImNyZWF0ZVdlYlNvY2tldERlbW8iLCJoZWxwTW9kYWwiLCJtYXhIZWlnaHQiLCJvdmVyZmxvd1kiLCJidXR0b25zRGl2IiwiZGVtb1F1aWNrUHJvZ3Jlc3MiLCJkZW1vTG9uZ1Byb2dyZXNzIiwiZGVtb011bHRpcGxlUHJvZ3Jlc3MiLCJkZW1vQ2FjaGluZyIsInN0YXR1c0RpdiIsInByb2dyZXNzSWQiLCJzdGFnZXMiLCJtc2ciLCJkdXJhdGlvbiIsImN1cnJlbnRTdGFnZSIsInRvdGFsUHJvZ3Jlc3MiLCJydW5TdGFnZSIsInN0YWdlIiwic3RhZ2VQcm9ncmVzcyIsInRlc3RFbmRwb2ludCIsInN0YXJ0MSIsInRpbWUxIiwic3RhcnQyIiwidGltZTIiLCJjYWNoZUhpdFJhdGUiXSwibWFwcGluZ3MiOiI0WEFPTyxNQUFNQSxFQUE2RCxDQUN4RUMsdUJBQXVCLEVBQ3ZCQyx3QkFBd0IsRUFDeEJDLG1CQUFvQixHQUNwQkMsbUJBQW1CLEVBQ25CQyxzQkFBdUIsSUFDdkJDLGdCQUFnQixFQUNoQkMsaUJBQWtCLElBQ2xCQyxrQkFBbUIsVUFDbkJDLHNCQUFzQixFQUN0QkMsOEJBQThCLEVBQzlCQyw0QkFBNEIsR0NidkIsTUFBTUMsRUFBdUMsQ0FDbERDLFdBQVksd0JBQ1pDLE9BQVEsR0FDUkMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLG9CQUFvQixFQUNwQkMsYUFBYyxHQUNkQyxZQUFhLE1BQ2JDLGlCQUFrQixJQUNsQkMsV0FBVyxFQUNYQyxpQkFBaUIsRUFDakJDLGdCQUFpQnZCLEVBQ2pCd0IsZUFBZ0IsQ0FDZEMsU0FBUyxFQUNUQyxZQUFhLGNBQ2JDLG1CQUFvQixJQUNwQkMsaUJBQWlCLEVBQ2pCQyxjQUFlLElBQ2ZDLGNBQWUsRUFDZkMsUUFBUyxJQUNUVixXQUFXLEVBQ1hXLGdCQUFpQixDQUNmQyxTQUFVLFdBQ1ZDLGtCQUFtQixHQUNuQkMsbUJBQW9CLEdBQ3BCQyxpQkFBa0IsTUFLbEIsTUFBT0MsVUFBNkJDLEVBQUFBLGlCQUd4QyxXQUFBQyxDQUFZQyxFQUFVQyxHQUNwQkMsTUFBTUYsRUFBS0MsR0FDWEUsS0FBS0YsT0FBU0EsQ0FDZixDQUVELE9BQUFHLEdBQ0UsTUFBTUMsWUFBRUEsR0FBZ0JGLEtBQ3hCRSxFQUFZQyxRQUVaRCxFQUFZRSxTQUFTLEtBQU0sQ0FBRUMs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
