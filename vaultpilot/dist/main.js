"use strict";var t=require("obsidian");function e(t,e,n,a){return new(n||(n=Promise))(function(i,o){function s(t){try{r(a.next(t))}catch(t){o(t)}}function l(t){try{r(a.throw(t))}catch(t){o(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,l)}r((a=a.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={enableVaultManagement:!0,autoSyncVaultStructure:!1,searchResultsLimit:50,enableSmartSearch:!0,batchOperationTimeout:3e4,showVaultStats:!0,maxSearchResults:100,defaultSearchType:"content",enableFileOperations:!0,confirmDestructiveOperations:!0,autoBackupBeforeOperations:!1};const a={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1,vaultManagement:n};class i extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:a}=this;a.empty(),a.createEl("h2",{text:"VaultPilot Settings"}),a.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),a.createEl("h3",{text:"Connection"}),new t.Setting(a).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),a.createEl("h3",{text:"Features"}),new t.Setting(a).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(a).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Agent Configuration"}),new t.Setting(a).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(t=>t.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Advanced"}),new t.Setting(a).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),new t.Setting(a).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(t=>t.setValue(this.plugin.settings.showIntentDebug).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=t,yield this.plugin.saveSettings()}))),a.createEl("h3",{text:"Vault Management"}),function(a,i){a.createEl("h2",{text:"Vault Management"}),a.createEl("p",{text:"Configure AI-powered vault structure analysis and file operations."}),new t.Setting(a).setName("Enable Vault Management").setDesc("Enable AI-powered vault structure analysis and file operations").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.enableVaultManagement)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.enableVaultManagement=t,yield i.saveSettings(),t?i.initializeVaultManagement():i.disableVaultManagement()}))}),new t.Setting(a).setName("Auto Sync Vault Structure").setDesc("Automatically update vault structure analysis when files change").addToggle(t=>{var a,o;return t.setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.autoSyncVaultStructure)&&void 0!==o&&o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.autoSyncVaultStructure=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Enable Smart Search").setDesc("Use AI-powered search with context and insights").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.enableSmartSearch)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.enableSmartSearch=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Search Results Limit").setDesc("Maximum number of search results to display").addSlider(t=>{var a,o;return t.setLimits(10,200,10).setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.searchResultsLimit)&&void 0!==o?o:50).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.searchResultsLimit=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Default Search Type").setDesc("Default search mode for smart search").addDropdown(t=>{var a,o;return t.addOption("content","Content Search").addOption("filename","Filename Search").addOption("tags","Tag Search").addOption("links","Link Search").addOption("comprehensive","Comprehensive Search").setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.defaultSearchType)&&void 0!==o?o:"content").onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.defaultSearchType=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Enable File Operations").setDesc("Allow file creation, deletion, and modification through the interface").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.enableFileOperations)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.enableFileOperations=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Confirm Destructive Operations").setDesc("Show confirmation dialog for file deletion and destructive operations").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.confirmDestructiveOperations)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.confirmDestructiveOperations=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Auto Backup Before Operations").setDesc("Automatically create backups before destructive file operations").addToggle(t=>{var a,o;return t.setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.autoBackupBeforeOperations)&&void 0!==o&&o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.autoBackupBeforeOperations=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Batch Operation Timeout").setDesc("Timeout for batch operations in milliseconds").addText(t=>{var a,o;return t.setPlaceholder("30000").setValue(String(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.batchOperationTimeout)&&void 0!==o?o:3e4)).onChange(t=>e(this,void 0,void 0,function*(){const e=parseInt(t)||3e4;i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.batchOperationTimeout=e,yield i.saveSettings()}))}),new t.Setting(a).setName("Show Vault Statistics").setDesc("Display vault statistics in modals and interfaces").addToggle(t=>{var a,o;return t.setValue(null===(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.showVaultStats)||void 0===o||o).onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.showVaultStats=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Test Vault Management Connection").setDesc("Test connection to vault management endpoints").addButton(t=>t.setButtonText("Test Connection").setCta().onClick(()=>e(this,void 0,void 0,function*(){if(!i.vaultClient)return t.setButtonText("Not Available"),void setTimeout(()=>t.setButtonText("Test Connection"),2e3);t.setButtonText("Testing..."),t.setDisabled(!0);try{(yield i.vaultClient.testConnection()).success?t.setButtonText("âœ… Connected"):t.setButtonText("âŒ Failed")}catch(e){t.setButtonText("âŒ Error")}t.setDisabled(!1),setTimeout(()=>t.setButtonText("Test Connection"),3e3)}))),a.createEl("h3",{text:"Advanced Vault Management"}),new t.Setting(a).setName("Maximum Search Results").setDesc("Absolute maximum number of search results to fetch from backend").addSlider(t=>{var a,o;return t.setLimits(50,500,25).setValue(null!==(o=null===(a=i.settings.vaultManagement)||void 0===a?void 0:a.maxSearchResults)&&void 0!==o?o:100).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){i.settings.vaultManagement||(i.settings.vaultManagement=Object.assign({},n)),i.settings.vaultManagement.maxSearchResults=t,yield i.saveSettings()}))}),new t.Setting(a).setName("Reset Vault Management Settings").setDesc("Reset all vault management settings to their default values").addButton(t=>t.setButtonText("Reset to Defaults").setWarning().onClick(()=>e(this,void 0,void 0,function*(){i.settings.vaultManagement=Object.assign({},n),yield i.saveSettings();const t=i.app.setting.activeTab;t&&t.display&&t.display()})))}(a,this.plugin),a.createEl("h2",{text:"Help & Documentation"}),a.createEl("h3",{text:"Information"});a.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let a=yield this.plugin.apiClient.healthCheck();if(!a.success&&(null===(e=a.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(a={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),a.success?new t.Notice("âœ… Connection successful!",3e3):new t.Notice(`âŒ Connection failed: ${a.error}`,5e3)}catch(e){n.hide(),new t.Notice(`âŒ Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const o="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return o}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),a=t.createEl("div",{cls:"vaultpilot-status-item"});a.createEl("span",{text:"WebSocket: "}),a.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="ðŸŸ¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="ðŸ”´ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="ðŸ”´ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"ðŸ’¬ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"ðŸ“Š Open Dashboard",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateFullTabView();e.createEl("button",{text:"âš™ï¸ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"ðŸ” Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"âœ¨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"ðŸ”„ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),a=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:a.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in view...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in view:",t),t.success&&t.data){let e=[];if(Array.isArray(t.data))e=t.data;else if(t.data&&"object"==typeof t.data){const n=t.data;n.agents&&Array.isArray(n.agents)?(e=n.agents,console.log("VaultPilot: Found agents array in view, using response.data.agents")):n.data&&Array.isArray(n.data)?(e=n.data,console.log("VaultPilot: Found nested data in view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof t.data,t.data)}const n=e.length,a=e.filter(t=>t.active).length,i=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});i.createEl("h4",{text:"Available Agents"});i.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${a}/${n} active`})}}catch(t){console.error("Failed to load agents in view:",t)}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}const l="vaultpilot-full-tab-view";class r extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return l}getDisplayText(){return"VaultPilot Dashboard"}getIcon(){return"layout-dashboard"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-full-tab-view"),t.style.height="100%",t.style.overflow="hidden";const e=t.createEl("div",{cls:"vaultpilot-main-layout"}),n=e.createEl("div",{cls:"vaultpilot-left-sidebar"});this.createLeftSidebar(n);const a=e.createEl("div",{cls:"vaultpilot-main-content"});this.createMainContent(a);const i=e.createEl("div",{cls:"vaultpilot-right-sidebar"});this.createRightSidebar(i),this.addFullTabStyles()})}createLeftSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-sidebar-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot"}),e.createEl("p",{text:"AI Assistant Dashboard",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats()}createMainContent(t){const e=t.createEl("div",{cls:"vaultpilot-tab-nav"}),n=e.createEl("button",{text:"ðŸ’¬ Chat",cls:"vaultpilot-tab-button active"}),a=e.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-tab-button"}),i=e.createEl("button",{text:"ðŸ“Š Analytics",cls:"vaultpilot-tab-button"}),o=t.createEl("div",{cls:"vaultpilot-tab-content"});this.chatEl=o.createEl("div",{cls:"vaultpilot-chat-section active"}),this.createChatSection(this.chatEl),this.workflowEl=o.createEl("div",{cls:"vaultpilot-workflow-section"}),this.createWorkflowSection(this.workflowEl);const s=o.createEl("div",{cls:"vaultpilot-analytics-section"});this.createAnalyticsSection(s),n.onclick=()=>this.switchTab("chat",n),a.onclick=()=>this.switchTab("workflow",a),i.onclick=()=>this.switchTab("analytics",i)}createRightSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-recent-files"});e.createEl("h3",{text:"Recent Files"}),this.updateRecentFiles(e);const n=t.createEl("div",{cls:"vaultpilot-agent-status"});n.createEl("h3",{text:"Agent Status"}),this.updateAgentStatus(n);const a=t.createEl("div",{cls:"vaultpilot-activity-feed"});a.createEl("h3",{text:"Activity Feed"}),this.createActivityFeed(a)}createChatSection(t){const e=t.createEl("div",{cls:"vaultpilot-chat-content"});e.createEl("div",{cls:"vaultpilot-chat-header"}).createEl("h3",{text:"AI Chat Interface"});const n=e.createEl("div",{cls:"vaultpilot-chat-history"});n.createEl("div",{text:"Welcome! Start a conversation with your AI assistant.",cls:"vaultpilot-chat-welcome"});const a=e.createEl("div",{cls:"vaultpilot-chat-input"}),i=a.createEl("textarea",{placeholder:"Type your message here...",cls:"vaultpilot-chat-textarea"}),o=a.createEl("button",{text:"Send",cls:"vaultpilot-chat-send-button"});o.onclick=()=>{const t=i.value.trim();t&&(this.sendChatMessage(t,n),i.value="")},i.onkeydown=t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),o.click())}}createWorkflowSection(t){const e=t.createEl("div",{cls:"vaultpilot-workflow-content"});e.createEl("div",{cls:"vaultpilot-workflow-header"}).createEl("h3",{text:"Workflow Management"});const n=e.createEl("div",{cls:"vaultpilot-workflow-grid"});[{name:"Analyze Vault",icon:"ðŸ”",description:"Analyze your vault structure and content"},{name:"Generate Summary",icon:"ðŸ“",description:"Create summaries of your notes"},{name:"Link Analysis",icon:"ðŸ”—",description:"Analyze note connections and relationships"},{name:"Tag Management",icon:"ðŸ·ï¸",description:"Organize and manage your tags"},{name:"Daily Planning",icon:"ðŸ“…",description:"Plan your day based on your notes"},{name:"Knowledge Graph",icon:"ðŸ•¸ï¸",description:"Visualize your knowledge connections"},{name:"Content Search",icon:"ðŸ”Ž",description:"Advanced search across your vault"},{name:"Note Templates",icon:"ðŸ“„",description:"Create and manage note templates"},{name:"Link Assistant",icon:"ðŸ”—",description:"Intelligent link suggestions and management"}].forEach(t=>{const e=n.createEl("div",{cls:"vaultpilot-workflow-card"});e.createEl("div",{text:t.icon,cls:"vaultpilot-workflow-icon"}),e.createEl("h4",{text:t.name}),e.createEl("p",{text:t.description});e.createEl("button",{text:"Run",cls:"vaultpilot-workflow-run-button"}).onclick=()=>this.runWorkflow(t.name)})}createAnalyticsSection(t){const e=t.createEl("div",{cls:"vaultpilot-analytics-content"});e.createEl("div",{cls:"vaultpilot-analytics-header"}).createEl("h3",{text:"Vault Analytics"});const n=e.createEl("div",{cls:"vaultpilot-charts-container"}),a=n.createEl("div",{cls:"vaultpilot-chart-card"});a.createEl("h4",{text:"File Type Distribution"}),a.createEl("div",{text:"Chart visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const i=n.createEl("div",{cls:"vaultpilot-chart-card"});i.createEl("h4",{text:"Note Creation Timeline"}),i.createEl("div",{text:"Timeline visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const o=n.createEl("div",{cls:"vaultpilot-chart-card"});o.createEl("h4",{text:"Tag Usage"}),o.createEl("div",{text:"Tag analytics coming soon...",cls:"vaultpilot-chart-placeholder"});const s=n.createEl("div",{cls:"vaultpilot-chart-card"});s.createEl("h4",{text:"Word Count Analysis"}),s.createEl("div",{text:"Word count visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const l=n.createEl("div",{cls:"vaultpilot-chart-card"});l.createEl("h4",{text:"Link Density"}),l.createEl("div",{text:"Link analysis coming soon...",cls:"vaultpilot-chart-placeholder"});const r=n.createEl("div",{cls:"vaultpilot-chart-card"});r.createEl("h4",{text:"Activity Heatmap"}),r.createEl("div",{text:"Activity heatmap coming soon...",cls:"vaultpilot-chart-placeholder"})}switchTab(t,e){var n;this.containerEl.querySelectorAll(".vaultpilot-tab-button").forEach(t=>{t.removeClass("active")}),this.containerEl.querySelectorAll(".vaultpilot-chat-section, .vaultpilot-workflow-section, .vaultpilot-analytics-section").forEach(t=>{t.removeClass("active")}),e.addClass("active"),"chat"===t?this.chatEl.addClass("active"):"workflow"===t?this.workflowEl.addClass("active"):"analytics"===t&&(null===(n=this.containerEl.querySelector(".vaultpilot-analytics-section"))||void 0===n||n.addClass("active"))}sendChatMessage(t,n){return e(this,void 0,void 0,function*(){n.createEl("div",{cls:"vaultpilot-chat-message user"}).createEl("div",{text:t});const e=n.createEl("div",{cls:"vaultpilot-chat-message assistant thinking"});e.createEl("div",{text:"Thinking..."}),n.scrollTop=n.scrollHeight;try{const a=yield this.plugin.apiClient.sendChat({message:t,context:null});if(e.remove(),a.success&&a.data){n.createEl("div",{cls:"vaultpilot-chat-message assistant"}).createEl("div",{text:a.data.response})}else{n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Could not get response from AI"})}}catch(t){e.remove();n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Connection failed"})}n.scrollTop=n.scrollHeight})}runWorkflow(n){return e(this,void 0,void 0,function*(){new t.Notice(`Running workflow: ${n}`);try{switch(n){case"Analyze Vault":yield this.plugin.analyzeVault();break;case"Daily Planning":yield this.plugin.planMyDay();break;default:new t.Notice(`${n} workflow is coming soon!`)}}catch(e){new t.Notice(`Error running workflow: ${n}`)}})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),a=t.createEl("div",{cls:"vaultpilot-status-item"});a.createEl("span",{text:"WebSocket: "}),a.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="ðŸŸ¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="ðŸ”´ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="ðŸ”´ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const t=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});t.createEl("button",{text:"ðŸ”„ Refresh",cls:"vaultpilot-action-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()};t.createEl("button",{text:"ðŸ“‹ Sidebar View",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateView();t.createEl("button",{text:"ðŸ’¬ Modal Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();t.createEl("button",{text:"âš™ï¸ Workflows",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal()}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),a=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:a.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})})}updateRecentFiles(t){this.app.vault.getMarkdownFiles().sort((t,e)=>e.stat.mtime-t.stat.mtime).slice(0,5).forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-recent-file"});n.createEl("span",{text:e.basename}),n.onclick=()=>{this.app.workspace.openLinkText(e.path,"",!1)}})}updateAgentStatus(t){this.loadAgentInfo(t)}loadAgentInfo(t){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in full-tab-view...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in full-tab-view:",e),e.success&&e.data&&t){let n=[];if(Array.isArray(e.data))n=e.data;else if(e.data&&"object"==typeof e.data){const t=e.data;t.agents&&Array.isArray(t.agents)?(n=t.agents,console.log("VaultPilot: Found agents array in full-tab-view, using response.data.agents")):t.data&&Array.isArray(t.data)?(n=t.data,console.log("VaultPilot: Found nested data in full-tab-view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof e.data,e.data)}const a=n.length,i=n.filter(t=>t.active).length,o=t.createEl("div",{cls:"vaultpilot-agent-info"});o.createEl("div",{text:`${i}/${a} active`}),n.forEach(t=>{const e=o.createEl("div",{cls:"vaultpilot-agent-item"});e.createEl("span",{text:t.name}),e.createEl("span",{text:t.active?"ðŸŸ¢":"ðŸ”´",cls:"vaultpilot-agent-status"})})}}catch(t){console.error("Failed to load agents in full tab view:",t)}})}createActivityFeed(t){[{time:"Just now",activity:"VaultPilot started"},{time:"5 min ago",activity:"Connection established"},{time:"1 hour ago",activity:"Last vault analysis"}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-activity-item"});n.createEl("div",{text:e.activity}),n.createEl("div",{text:e.time,cls:"vaultpilot-activity-time"})})}addFullTabStyles(){if(!document.getElementById("vaultpilot-full-tab-styles")){const t=document.createElement("style");t.id="vaultpilot-full-tab-styles",t.textContent='\n        /* Ensure the full tab view fills available space */\n        .workspace-leaf-content[data-type="vaultpilot-full-tab-view"] {\n          height: 100%;\n        }\n        .vaultpilot-full-tab-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-main-layout {\n          display: flex;\n          flex: 1;\n          gap: 1px;\n          background: var(--background-modifier-border);\n          min-height: 0;\n        }\n        .vaultpilot-left-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-main-content {\n          flex: 1;\n          background: var(--background-primary);\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n        }\n        .vaultpilot-right-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-sidebar-header {\n          text-align: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-nav {\n          display: flex;\n          background: var(--background-secondary);\n          border-bottom: 1px solid var(--background-modifier-border);\n          flex-shrink: 0;\n        }\n        .vaultpilot-tab-button {\n          flex: 1;\n          padding: 12px 16px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .vaultpilot-tab-button:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-tab-button.active {\n          background: var(--background-primary);\n          color: var(--text-normal);\n          border-bottom: 2px solid var(--interactive-accent);\n        }\n        .vaultpilot-tab-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n          height: 100%;\n        }\n        /* Sections just flex-grow and hold their children */\n        .vaultpilot-chat-section,\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          display: none;           /* hidden by default */\n          flex: 1 1 0;             /* flex-grow, flex-shrink, base 0 */\n          flex-direction: column;\n          min-height: 0;           /* allow children to shrink/scroll */\n        }\n\n        /* Active section shows and flexes */\n        .vaultpilot-chat-section.active,\n        .vaultpilot-workflow-section.active,\n        .vaultpilot-analytics-section.active {\n          display: flex;           /* show & flex when active */\n        }\n\n        /* Content panels handle the scrolling */\n        .vaultpilot-chat-content,\n        .vaultpilot-workflow-content,\n        .vaultpilot-analytics-content {\n          flex: 1 1 0;             /* fill remaining space */\n          min-height: 0;           /* critical to allow overflow */\n          overflow-y: auto;        /* now *this* container scrolls */\n          padding: 16px;\n        }\n\n        /* keep special chat gaps */\n        .vaultpilot-chat-content {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        .vaultpilot-chat-history {\n          flex: 1;\n          overflow-y: auto;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          background: var(--background-secondary);\n          min-height: 0;\n        }\n        .vaultpilot-chat-input {\n          display: flex;\n          gap: 8px;\n        }\n        .vaultpilot-chat-textarea {\n          flex: 1;\n          min-height: 60px;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-chat-send-button {\n          padding: 8px 16px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          height: fit-content;\n          align-self: flex-end;\n        }\n        .vaultpilot-chat-message {\n          margin-bottom: 12px;\n          padding: 8px 12px;\n          border-radius: 8px;\n          max-width: 80%;\n        }\n        .vaultpilot-chat-message.user {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          margin-left: auto;\n        }\n        .vaultpilot-chat-message.assistant {\n          background: var(--background-primary);\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-message.thinking {\n          opacity: 0.7;\n          font-style: italic;\n        }\n        .vaultpilot-chat-message.error {\n          background: var(--background-modifier-error);\n          color: var(--text-error);\n        }\n        .vaultpilot-chat-header,\n        .vaultpilot-workflow-header,\n        .vaultpilot-analytics-header {\n          margin-bottom: 16px;\n          padding-bottom: 8px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-header h3,\n        .vaultpilot-workflow-header h3,\n        .vaultpilot-analytics-header h3 {\n          margin: 0;\n          color: var(--text-normal);\n        }\n        .vaultpilot-workflow-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-workflow-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          text-align: center;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-workflow-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-workflow-icon {\n          font-size: 32px;\n          margin-bottom: 8px;\n        }\n        .vaultpilot-workflow-run-button {\n          margin-top: 8px;\n          padding: 6px 12px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .vaultpilot-charts-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-chart-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-chart-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-chart-placeholder {\n          text-align: center;\n          color: var(--text-muted);\n          font-style: italic;\n          padding: 20px;\n        }\n        .vaultpilot-recent-file {\n          padding: 4px 8px;\n          margin-bottom: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-recent-file:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-agent-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px 0;\n        }\n        .vaultpilot-activity-item {\n          margin-bottom: 8px;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-activity-time {\n          font-size: 11px;\n          color: var(--text-muted);\n          margin-top: 2px;\n        }\n        /* Inherit styles from original view */\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3 {\n          margin-bottom: 12px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 4px;\n          font-size: 14px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n          font-size: 11px;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-action-button {\n          padding: 8px 6px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 11px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 8px;\n          background: var(--background-secondary);\n          border-radius: 4px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 2px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 10px;\n          color: var(--text-muted);\n        }\n      ',document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}let c;function d(){return e(this,void 0,void 0,function*(){const t=c.workspace.getActiveFile();if(!t)return null;return(yield c.vault.read(t)).slice(0,8e3)})}class u extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ðŸ¤– VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"âš¡ Automatic mode detection enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const a=n.createEl("select",{cls:"vaultpilot-agent-select"});a.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(a),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response:",e),e.success&&e.data){console.log("VaultPilot: response.data type:",typeof e.data),console.log("VaultPilot: response.data content:",e.data);let n=[];if(Array.isArray(e.data))n=e.data;else if(e.data&&"object"==typeof e.data){const t=e.data;t.agents&&Array.isArray(t.agents)?n=t.agents:t.data&&Array.isArray(t.data)&&(n=t.data)}if(n.length>0)console.log("VaultPilot: Found",n.length,"agents"),n.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})});else{console.log("VaultPilot: No agents found in response");t.createEl("option",{text:"No agents available",value:""}).disabled=!0}}else console.error("Failed to load agents: API returned error or no data:",e)}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const[n,a]=yield Promise.all([d(),this.plugin.apiClient.classifyIntent(e)]),i={message:e,context:n};let o;this.plugin.settings.showIntentDebug&&this.showIntentDebug(a.intent),"agent"===a.intent?(o=yield this.plugin.apiClient.runWorkflow(i),o.success&&o.data?this.addMessage("assistant",`âš™ï¸ Agent Mode (auto-detected)\n\n${o.data.result}`):this.addMessage("assistant",`Error in agent mode: ${o.error||"Failed to get response"}`)):(o=yield this.plugin.apiClient.sendChat(i,{conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent()}),o.success&&o.data?(this.currentConversationId=o.data.conversation_id,this.addMessage("assistant",o.data.response)):this.addMessage("assistant",`Error: ${o.error||"Failed to get response"}`)),(null==n?void 0:n.length)||new t.Notice("âš ï¸ No vault content was sent; replies may be generic."),o.success||new t.Notice(`Chat error: ${o.error}`)}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(t)}}showIntentDebug(t){const e=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"ðŸ” Intent detected: "+("agent"===t?"âš™ï¸ Agent Mode":"ðŸ’¬ Ask Mode")});setTimeout(()=>{e.remove()},3e3)}onClose(){const{contentEl:t}=this;t.empty()}}class p extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"âš™ï¸ Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=a.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const r=o.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,a){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(a){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const o=yield this.plugin.apiClient.executeWorkflow(i);if(!o.success||!o.data)throw new Error(o.error||"Workflow execution failed");yield this.displayResults(o.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"âœ… Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const a=e.createEl("div",{cls:"vaultpilot-artifact"});a.createEl("h5",{text:t.title}),a.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});a.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,a){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,a=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,a),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let a="# VaultPilot Workflow Results\n\n";a+=`**Goal:** ${this.goalInput.value}\n\n`,a+=`**Execution Time:** ${n.execution_time}s\n\n`,a+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(a+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{a+=`${e+1}. ${t}\n`}),a+="\n"),n.artifacts&&n.artifacts.length>0&&(a+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{a+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,a),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>âŒ Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class h{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,a=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(a.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:a,mode:"cors",credentials:"omit"}));let i;const o=t.headers.get("content-type");if(i=o&&o.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/status`);const t=yield this.makeRequest("/status",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/status`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}runWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:t.message,context:t.context||void 0})})})}sendChat(t,n){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:t.message,vault_context:t.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}classifyIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5}})}explainIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t,include_debug:!0})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,a,i,o,s,l,r;try{const r=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",r.type),r.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,r.data);break;case"workflow_progress":null===(a=t.onWorkflowProgress)||void 0===a||a.call(t,r.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,r.data);break;case"vault_sync":null===(o=t.onVaultSync)||void 0===o||o.call(t,r.data);break;case"intent_debug":null===(s=t.onIntentDebug)||void 0===s||s.call(t,r.data);break;case"error":null===(l=t.onError)||void 0===l||l.call(t,r.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(r=t.onError)||void 0===r||r.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}function g(t){return t.match(/(<!-- vp:plan:start -->)([\s\S]*?)(<!-- vp:plan:end -->)/i)}function v(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im,n=t.match(e);return n||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}class m{constructor(){this.logs=[],this.maxLogs=100}static getInstance(){return m.instance||(m.instance=new m),m.instance}log(t,e){const n=`[${(new Date).toISOString()}] ${t}${e?` | ${JSON.stringify(e)}`:""}`;console.log(n),this.logs.push(n),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}error(t,e){const n=(new Date).toISOString(),a=e instanceof Error?{message:e.message,stack:e.stack,name:e.name}:e,i=`[${n}] ERROR: ${t}${a?` | ${JSON.stringify(a)}`:""}`;console.error(i),this.logs.push(i),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return this.logs.join("\n")}analyzeApiClient(t){return t?{status:"available",available:!0,type:typeof t,methods:Object.getOwnPropertyNames(Object.getPrototypeOf(t)).filter(e=>"function"==typeof t[e]),hasPlanTasks:"function"==typeof t.planTasks,hasHealthCheck:"function"==typeof t.healthCheck}:{status:"null",available:!1}}testConnection(t){return e(this,void 0,void 0,function*(){try{if(this.log("ðŸ”— Testing EvoAgentX connection..."),!t)throw new Error("API client is null or undefined");if(!t.healthCheck)throw new Error("API client does not have healthCheck method");const e=yield t.healthCheck();return this.log("âœ… Connection test successful",e),{success:!0,result:e}}catch(t){return this.error("âŒ Connection test failed",t),{success:!1,error:t instanceof Error?t.message:String(t)}}})}testTaskPlanning(t){return e(this,arguments,void 0,function*(t,e="Test note for schedule generation"){var n,a,i,o;try{if(this.log("ðŸ“‹ Testing task planning..."),!t)throw new Error("API client is null or undefined");if(!t.planTasks)throw new Error("API client does not have planTasks method");const s=yield t.planTasks({goal:"Create a test schedule",context:e,timeframe:"1 day"});return this.log("âœ… Task planning test successful",{success:s.success,hasData:!!s.data,hasPlan:!!(null===(n=s.data)||void 0===n?void 0:n.plan),taskCount:(null===(o=null===(i=null===(a=s.data)||void 0===a?void 0:a.plan)||void 0===i?void 0:i.tasks)||void 0===o?void 0:o.length)||0}),{success:!0,result:s}}catch(t){return this.error("âŒ Task planning test failed",t),{success:!1,error:t instanceof Error?t.message:String(t)}}})}}const f=m.getInstance();class y extends Error{constructor(t,e,n){super(t),this.name="VaultManagementError",this.code=e,this.feature=n}}class b{constructor(t,e){this.baseUrl=t,this.apiKey=e}getVaultStructure(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Failed to get vault structure: ${e.statusText}`,"STRUCTURE_FETCH_FAILED","structure");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"structure"),t}})}performFileOperation(t){return e(this,void 0,void 0,function*(){try{this.validateFileOperationRequest(t);const e=yield this.makeRequest("/api/obsidian/vault/file/operation",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`File operation failed: ${e.statusText}`,"FILE_OPERATION_FAILED","file-operations");const n=yield e.json();if(!n.success)throw new y(n.message||"File operation failed","FILE_OPERATION_FAILED","file-operations");return n}catch(t){throw this.handleVaultManagementError(t,"file-operations"),t}})}performBatchOperations(t){return e(this,void 0,void 0,function*(){try{if(!t.operations||0===t.operations.length)throw new y("No operations specified for batch request","INVALID_BATCH_REQUEST","batch-operations");t.operations.forEach((t,e)=>{try{this.validateFileOperationRequest(t)}catch(t){throw new y(`Invalid operation at index ${e}: ${t.message||t}`,"INVALID_BATCH_OPERATION","batch-operations")}});const e=yield this.makeRequest("/api/obsidian/vault/file/batch",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Batch operations failed: ${e.statusText}`,"BATCH_OPERATION_FAILED","batch-operations");const n=yield e.json();if(!n.success)throw new y(n.message||"Batch operations failed","BATCH_OPERATION_FAILED","batch-operations");return n}catch(t){throw this.handleVaultManagementError(t,"batch-operations"),t}})}searchVault(t){return e(this,void 0,void 0,function*(){try{if(!t.query||0===t.query.trim().length)throw new y("Search query cannot be empty","INVALID_SEARCH_QUERY","search");const e=yield this.makeRequest("/api/obsidian/vault/search",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Search failed: ${e.statusText}`,"SEARCH_FAILED","search");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"search"),t}})}organizeVault(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/organize",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Organization analysis failed: ${e.statusText}`,"ORGANIZATION_FAILED","organization");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"organization"),t}})}backupVault(t){return e(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/backup",{method:"POST",body:JSON.stringify(t)});if(!e.ok)throw new y(`Backup failed: ${e.statusText}`,"BACKUP_FAILED","backup");return yield e.json()}catch(t){throw this.handleVaultManagementError(t,"backup"),t}})}createFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!1){return this.performFileOperation({operation:"create",file_path:t,content:e,backup:n})})}updateFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!0){return this.performFileOperation({operation:"update",file_path:t,content:e,backup:n})})}deleteFile(t){return e(this,arguments,void 0,function*(t,e=!0){return this.performFileOperation({operation:"delete",file_path:t,backup:e})})}moveFile(t,n){return e(this,arguments,void 0,function*(t,e,n=!0){return this.performFileOperation({operation:"move",file_path:t,new_path:e,backup:n})})}copyFile(t,n){return e(this,void 0,void 0,function*(){return this.performFileOperation({operation:"copy",file_path:t,new_path:n})})}quickSearch(t){return e(this,arguments,void 0,function*(t,e=20){return this.searchVault({query:t,search_type:"comprehensive",max_results:e,include_content:!0})})}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl.replace(/\/$/,"")}${t}`,a=Object.assign({"Content-Type":"application/json"},e.headers||{});this.apiKey&&(a.Authorization=`Bearer ${this.apiKey}`);const i=Object.assign(Object.assign({},e),{headers:a});try{return yield fetch(n,i)}catch(t){throw new y(`Network request failed: ${t.message||t}`,"NETWORK_ERROR","api")}})}validateFileOperationRequest(t){if(!t.file_path||0===t.file_path.trim().length)throw new y("File path is required","INVALID_FILE_PATH","validation");if(!("move"!==t.operation&&"copy"!==t.operation||t.new_path&&0!==t.new_path.trim().length))throw new y("New path is required for move/copy operations","INVALID_NEW_PATH","validation");if(("create"===t.operation||"update"===t.operation)&&void 0===t.content)throw new y("Content is required for create/update operations","INVALID_CONTENT","validation")}handleVaultManagementError(e,n){console.error(`Vault management error in ${n}:`,e),e instanceof y?new t.Notice(`Vault ${n} error: ${e.message}`,5e3):new t.Notice(`Vault ${n} operation failed`,3e3)}testConnection(){return e(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify({include_content:!1,max_depth:1})});return t.ok?{success:!0,message:"Vault management connection successful"}:{success:!1,message:`Connection failed: ${t.status} ${t.statusText}`}}catch(t){return{success:!1,message:`Connection error: ${t.message||t}`}}})}}class k extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setFocusPath(t){return this.focusPath=t,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:t}=this;t.empty(),t.addClass("vault-structure-modal");const e=t.createEl("div",{cls:"modal-header"});e.createEl("h2",{text:"Vault Structure Analysis"});const n=e.createEl("button",{text:"ðŸ”„ Refresh",cls:"mod-cta"}),a=t.createDiv({cls:"vault-loading"});a.setText("ðŸ” Analyzing vault structure...");try{const e=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:5});a.remove(),this.renderStructure(t,e),n.onclick=()=>{this.onOpen()}}catch(e){a.setText("âŒ Failed to load vault structure"),console.error(e);t.createEl("button",{text:"Retry",cls:"mod-cta"}).onclick=()=>this.onOpen()}})}renderStructure(t,e){t.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“</span>\n          <span class="stat-label">Files</span>\n          <span class="stat-value">${e.total_files}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ“‚</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${e.total_folders}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">ðŸ’¾</span>\n          <span class="stat-label">Size</span>\n          <span class="stat-value">${(e.total_size/1024/1024).toFixed(2)} MB</span>\n        </div>\n      </div>\n    `;const n=t.createDiv({cls:"vault-tree-container"});n.createEl("h3",{text:"Folder Structure"});const a=n.createDiv({cls:"vault-tree"});if(this.renderFolder(a,e.structure,0),e.recent_files.length>0){const n=t.createDiv({cls:"recent-files-container"});n.createEl("h3",{text:"Recent Files"});const a=n.createDiv({cls:"recent-files"});e.recent_files.slice(0,10).forEach(t=>{a.createDiv({cls:"recent-file"}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${t.name}</span>\n          <span class="file-date">${new Date(t.modified).toLocaleDateString()}</span>\n        `})}if(e.orphaned_files.length>0){const n=t.createDiv({cls:"orphaned-files-container"});n.createEl("h3",{text:"âš ï¸ Orphaned Files"});const a=n.createDiv({cls:"orphaned-files"});e.orphaned_files.forEach(t=>{a.createDiv({cls:"orphaned-file"}).innerHTML=`\n          <span class="file-icon">ðŸ”—</span>\n          <span class="file-path">${t.path}</span>\n        `})}}renderFolder(t,e,n){const a=t.createDiv({cls:"folder-item",attr:{"data-level":n.toString()}});a.innerHTML=`\n      <span class="folder-toggle">â–¶</span>\n      <span class="folder-icon">ðŸ“</span>\n      <span class="folder-name">${e.name}</span>\n      <span class="folder-count">(${e.children.length})</span>\n    `;const i=t.createDiv({cls:"folder-children",attr:{style:"display: none;"}}),o=a.querySelector(".folder-toggle");o.onclick=()=>{const t="none"!==i.style.display;i.style.display=t?"none":"block",o.textContent=t?"â–¶":"â–¼"},e.children.forEach(t=>{if("folder"===t.type)this.renderFolder(i,t,n+1);else{i.createDiv({cls:"file-item",attr:{"data-level":(n+1).toString()}}).innerHTML=`\n          <span class="file-icon">ðŸ“„</span>\n          <span class="file-name">${t.name}</span>\n          <span class="file-size">${(t.size/1024).toFixed(1)}KB</span>\n        `}})}onClose(){const{contentEl:t}=this;t.empty()}}class x extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setInitialQuery(t,e){return this.initialQuery=t,this.searchType=e,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:n}=this;n.empty(),n.addClass("smart-search-modal"),n.createEl("h2",{text:"ðŸ” Smart Vault Search"});const a=n.createDiv({cls:"search-form"}),i=a.createEl("input",{type:"text",placeholder:"Enter search query...",cls:"search-query-input"});this.initialQuery&&(i.value=this.initialQuery);const o=a.createEl("select",{cls:"search-type-select"});[{value:"comprehensive",label:"Comprehensive"},{value:"content",label:"Content"},{value:"filename",label:"Filename"},{value:"tags",label:"Tags"},{value:"links",label:"Links"}].forEach(t=>{const e=o.createEl("option",{value:t.value});e.textContent=t.label,t.value===(this.searchType||"comprehensive")&&(e.selected=!0)});const s=a.createEl("button",{text:"Search",cls:"mod-cta search-button"}),l=n.createDiv({cls:"search-results-container"}),r=()=>e(this,void 0,void 0,function*(){var e;const n=i.value.trim();if(!n)return void new t.Notice("Please enter a search query");s.textContent="Searching...",s.disabled=!0,l.empty();const a=l.createDiv({cls:"search-loading"});a.textContent="ðŸ” Searching vault...";try{const t=yield this.vaultClient.searchVault({query:n,search_type:o.value,max_results:(null===(e=this.plugin.settings.vaultManagement)||void 0===e?void 0:e.searchResultsLimit)||50,include_content:!0});a.remove(),this.renderSearchResults(l,t)}catch(t){a.textContent="âŒ Search failed",console.error("Search error:",t)}finally{s.textContent="Search",s.disabled=!1}});s.onclick=r,i.addEventListener("keypress",t=>{"Enter"===t.key&&r()}),this.initialQuery&&r(),i.focus()})}renderSearchResults(t,e){if(t.createEl("h3",{text:`Search Results (${e.total_found})`}),e.insights){t.createDiv({cls:"search-insights"}).innerHTML=`\n        <div class="insights-header">ðŸ§  AI Insights</div>\n        <div class="insights-content">${e.insights}</div>\n      `}if(0===e.results.length)return void t.createDiv({cls:"no-results",text:"No results found. Try a different search term or type."});const n=t.createDiv({cls:"search-results-list"});if(e.results.forEach(t=>{const e=n.createDiv({cls:"search-result"});e.innerHTML=`\n        <div class="result-header">\n          <span class="result-file-name">${t.file_name}</span>\n          <span class="result-match-type">${t.match_type}</span>\n          <span class="result-score">${(100*t.score).toFixed(0)}%</span>\n        </div>\n        <div class="result-path">${t.file_path}</div>\n        <div class="result-preview">${t.preview}</div>\n        ${t.matches.length>0?`\n          <div class="result-matches">\n            <strong>Matches:</strong> ${t.matches.join(", ")}\n          </div>\n        `:""}\n      `,e.onclick=()=>{this.app.workspace.openLinkText(t.file_path,""),this.close()}}),e.suggested_queries&&e.suggested_queries.length>0){const n=t.createDiv({cls:"suggested-queries"});n.createEl("h4",{text:"ðŸ’¡ Suggested Queries"});const a=n.createDiv({cls:"suggestions-list"});e.suggested_queries.forEach(t=>{a.createEl("button",{text:t,cls:"suggestion-button"}).onclick=()=>{const e=this.contentEl.querySelector(".search-query-input");e&&(e.value=t,e.dispatchEvent(new KeyboardEvent("keypress",{key:"Enter"})))}})}}onClose(){const{contentEl:t}=this;t.empty()}}class w extends t.Modal{constructor(t,e){super(t),this.plugin=e,this.vaultClient=e.vaultClient}setInitialPath(t){return this.initialPath=t,this}setOperation(t){return this.operation=t,this}onOpen(){return e(this,void 0,void 0,function*(){const{contentEl:e}=this;e.empty(),e.addClass("file-operations-modal"),e.createEl("h2",{text:"ðŸ“ File Operations Manager"}),new t.Setting(e).setName("Operation").setDesc("Select the file operation to perform").addDropdown(t=>t.addOption("create","Create File").addOption("update","Update File").addOption("delete","Delete File").addOption("move","Move File").addOption("copy","Copy File").setValue(this.operation||"create").onChange(t=>{this.operation=t,this.updateOperationForm()})),e.createDiv({cls:"operation-form"}),this.updateOperationForm()})}updateOperationForm(){const e=this.contentEl.querySelector(".operation-form");if(!e)return;e.empty();const n=this.operation||"create";new t.Setting(e).setName("File Path").setDesc("Path to the file (including filename)").addText(t=>t.setPlaceholder("path/to/file.md").setValue(this.initialPath||"").onChange(t=>this.initialPath=t)),"move"!==n&&"copy"!==n||new t.Setting(e).setName("New Path").setDesc("Destination path for the file").addText(t=>t.setPlaceholder("new/path/to/file.md")),"create"!==n&&"update"!==n||new t.Setting(e).setName("Content").setDesc("File content").addTextArea(t=>{t.setPlaceholder("Enter file content..."),"create"===n&&t.setValue("# New File\n\nContent goes here...")}),"create"!==n&&new t.Setting(e).setName("Create Backup").setDesc("Create a backup before performing the operation").addToggle(t=>t.setValue(!0)),new t.Setting(e).addButton(t=>t.setButtonText(`Execute ${n.charAt(0).toUpperCase()+n.slice(1)}`).setCta().onClick(()=>this.executeOperation()))}executeOperation(){return e(this,void 0,void 0,function*(){var e;const n=this.operation||"create",a=this.contentEl.querySelector('input[placeholder*="path/to/file"]'),i=this.contentEl.querySelector('input[placeholder*="new/path"]'),o=this.contentEl.querySelector("textarea"),s=this.contentEl.querySelector('input[type="checkbox"]');if(!(null==a?void 0:a.value))return void new t.Notice("File path is required");const l={operation:n,file_path:a.value,backup:null===(e=null==s?void 0:s.checked)||void 0===e||e};(null==i?void 0:i.value)&&(l.new_path=i.value),(null==o?void 0:o.value)&&(l.content=o.value);try{new t.Notice(`Performing ${n}...`);const e=yield this.vaultClient.performFileOperation(l);new t.Notice(`âœ… ${n} successful: ${e.message}`),this.close()}catch(e){new t.Notice(`âŒ ${n} failed: ${e.message}`)}})}onClose(){const{contentEl:t}=this;t.empty()}}class E extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e,n,a;yield this.loadSettings(),a=this.app,c=a,this.apiClient=new h(this.settings.backendUrl,this.settings.apiKey),(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)&&this.initializeVaultManagement();try{let e=yield this.apiClient.healthCheck();if(!e.success&&(null===(n=e.error)||void 0===n?void 0:n.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(e={success:!0,data:{status:t.data.status,version:"unknown"}})}e.success?(new t.Notice("âœ… VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",e.error),new t.Notice("âš ï¸ EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("âš ï¸ Cannot connect to EvoAgentX backend",5e3)}this.registerView(o,t=>new s(t,this)),this.registerView(l,t=>new r(t,this));const d=this.addRibbonIcon("bot","VaultPilot",t=>{t.ctrlKey||t.metaKey?this.activateFullTabView():this.openChatModal()});d.addClass("vaultpilot-ribbon-class"),d.title="VaultPilot (Ctrl+click for Dashboard)",this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"plan-my-day-debug",name:"Plan My Day - Debug Connection",callback:()=>this.debugPlanMyDay()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.addCommand({id:"open-vaultpilot-full-tab",name:"Open VaultPilot Dashboard",callback:()=>this.activateFullTabView()}),this.registerVaultManagementCommands(),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new i(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(o),this.app.workspace.detachLeavesOfType(l),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onIntentDebug:t=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new u(this.app,this).open()}openWorkflowModal(){new p(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let a="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);a+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:a,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let a=`# Vault Analysis - ${e}\n\n`;a+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(a+="## Key Insights\n\n",i.data.insights.forEach(t=>{a+=`- ${t}\n`}),a+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(a+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{a+=`- ${t}\n`})),yield this.app.vault.create(n,a),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),a=n.getLine(e.line).substring(0,e.ch),i=n.getValue();if(i&&0!==i.trim().length)try{const o=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:a});o.success&&o.data?(n.replaceRange(o.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${o.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const a=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(a.success&&a.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${a.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${a.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),a=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==a?void 0:a.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==a?void 0:a.basename)||"Untitled"} - ${e}.md`;let o=`# ${n.data.plan.title}\n\n`;o+=`${n.data.plan.description}\n\n`,o+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(o+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";o+=`${e} **${t.title}** (${t.priority} priority)\n`,o+=`   ${t.description}\n`,o+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(o+="## Milestones\n\n",n.data.milestones.forEach(t=>{o+=`- **${t.title}** (${t.target_date})\n`,o+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,o),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){var n,a;console.log("ðŸš€ [Plan My Day] Command started");const i=this.app.workspace.getActiveFile();if(!i)return console.warn("âš ï¸ [Plan My Day] No active file found"),void new t.Notice("No active noteâ€”open today's daily note first.");console.log("ðŸ“ [Plan My Day] Active file:",{name:i.name,path:i.path,extension:i.extension});const o=new t.Notice("Planning your day with AI...",0);try{console.log("ðŸ“– [Plan My Day] Reading file content...");const s=yield this.app.vault.read(i);if(console.log("ðŸ“ [Plan My Day] File content read:",{length:s.length,hasContent:s.trim().length>0,firstLine:s.split("\n")[0],lineCount:s.split("\n").length}),console.log("ðŸ” [Plan My Day] Checking API client..."),console.log("ðŸ”— [Plan My Day] API client status:",{exists:!!this.apiClient,type:typeof this.apiClient,isConnected:this.apiClient?"available":"not available"}),!this.apiClient){const t="API client not initialized. Check VaultPilot settings and connection.";throw console.error("âŒ [Plan My Day] Error:",t),new Error(t)}console.log("ðŸ“¤ [Plan My Day] Fetching schedule from EvoAgentX...");const{scheduleMarkdown:l,headline:r}=yield function(t,n){return e(this,void 0,void 0,function*(){var e,a,i;if(console.log("ðŸ”„ [Plan My Day] Starting schedule fetch..."),console.log("ðŸ“ [Plan My Day] Note text length:",t.length),console.log("ðŸ”— [Plan My Day] API client type:",typeof n),!n){const t="API client is null or undefined";throw console.error("âŒ [Plan My Day] Error:",t),new Error(t)}if(!n.planTasks){const t="API client does not have planTasks method";throw console.error("âŒ [Plan My Day] Error:",t),console.log("ðŸ” [Plan My Day] Available methods:",Object.getOwnPropertyNames(n)),new Error(t)}try{console.log("ðŸ“¤ [Plan My Day] Sending request to EvoAgentX...");const o=yield n.planTasks({goal:"Create a daily schedule based on this note content",context:t,timeframe:"1 day"});if(console.log("ðŸ“¥ [Plan My Day] Received response:",{success:o.success,hasData:!!o.data,error:o.error}),console.log("ðŸ” [Plan My Day] Raw response data:",JSON.stringify(o.data,null,2)),console.log("ðŸ” [Plan My Day] Response data type:",typeof o.data),console.log("ðŸ” [Plan My Day] Response data keys:",o.data?Object.keys(o.data):"no data"),!o.success){const t=o.error||"Failed to generate schedule";throw console.error("âŒ [Plan My Day] API Error:",t),new Error(t)}if(!o.data){const t="No data in API response";throw console.error("âŒ [Plan My Day] Error:",t),console.log("ðŸ” [Plan My Day] Full response:",o),new Error(t)}const s=o.data.data||o.data;if(console.log("ðŸ“‹ [Plan My Day] Response data structure:",{hasPlan:!!s.plan,planKeys:s.plan?Object.keys(s.plan):null,hasTasks:!!(null===(e=s.plan)||void 0===e?void 0:e.tasks),taskCount:(null===(i=null===(a=s.plan)||void 0===a?void 0:a.tasks)||void 0===i?void 0:i.length)||0}),!s.plan){const t="No plan data in API response";throw console.error("âŒ [Plan My Day] Error:",t),console.log("ðŸ” [Plan My Day] Full response data:",o.data),console.log("ðŸ” [Plan My Day] Actual data:",s),new Error(t)}const l=s.plan.tasks||[];if(console.log("ðŸ“ [Plan My Day] Processing tasks:",l.length),0===l.length)return console.warn("âš ï¸ [Plan My Day] No tasks in response, creating fallback schedule"),{scheduleMarkdown:"| Time | Task |\n|------|------|\n| 9:00 AM | Plan your day |\n| 10:00 AM | Start working |\n| 12:00 PM | Lunch break |",headline:"ðŸ“… Basic schedule created (no tasks found in note)"};let r="| Time | Task |\n|------|------|\n";l.forEach((t,e)=>{var n,a;console.log(`ðŸ“‹ [Plan My Day] Processing task ${e+1}:`,{title:t.title,description:null===(n=t.description)||void 0===n?void 0:n.substring(0,100),priority:t.priority,estimatedTime:t.estimated_time});const i=null===(a=t.description)||void 0===a?void 0:a.match(/(\d{1,2}:\d{2})/),o=i?i[1]:`${9+Math.floor(1.5*e)}:${30*e%60||"00"}`;r+=`| ${o} | ${t.title} |\n`});const c={scheduleMarkdown:r,headline:`âœ¨ Smart schedule created with ${l.length} tasks!`};return console.log("âœ… [Plan My Day] Schedule generated successfully:",{markdownLength:r.length,taskCount:l.length,headline:c.headline}),c}catch(t){throw console.error("âŒ [Plan My Day] Fetch error:",t),console.error("ðŸ” [Plan My Day] Error stack:",t instanceof Error?t.stack:"No stack trace"),t instanceof Error?new Error(`Schedule fetch failed: ${t.message}`):new Error(`Schedule fetch failed: ${String(t)}`)}})}(s,this.apiClient);if(console.log("ðŸ“‹ [Plan My Day] Schedule received:",{markdownLength:l.length,headline:r,firstLine:l.split("\n")[0]}),console.log("âœ… [Plan My Day] Validating schedule..."),!function(t){console.log("ðŸ” [Plan My Day] Validating schedule markdown:",{length:t.length,trimmedLength:t.trim().length,isString:"string"==typeof t,preview:t.substring(0,100)});const e=t.trim().length>0;return console.log("âœ… [Plan My Day] Validation result:",e),e}(l)){const t="Invalid schedule data received from API";throw console.error("âŒ [Plan My Day] Validation failed:",{scheduleMarkdown:l.substring(0,200),length:l.length}),new Error(t)}console.log("ðŸ“ [Plan My Day] Injecting schedule into note...");const c=g(s),d=v(s);console.log("ðŸ” [Plan My Day] Existing sections:",{hasPlanWrapper:!!c,hasScheduleSection:!!d,planContent:null===(n=null==c?void 0:c[2])||void 0===n?void 0:n.substring(0,50),scheduleHeading:null===(a=null==d?void 0:d[1])||void 0===a?void 0:a.substring(0,50)});const u=function(t,e){var n,a,i;console.log("ðŸ“ [Plan My Day] Injecting schedule:",{originalLength:t.length,scheduleLength:e.length,hasOriginalContent:t.trim().length>0});const o=g(t);if(o){console.log("ðŸ”„ [Plan My Day] Replacing existing plan section with comment wrapper"),console.log("ðŸ“‹ [Plan My Day] Found wrapped plan section:",{startComment:o[1],contentLength:(null===(n=o[2])||void 0===n?void 0:n.length)||0,endComment:o[3]});const[a,i,,s]=o,l=`${i}\n${e}\n${s}`,r=t.replace(a,l);return console.log("âœ… [Plan My Day] Plan section replaced within comment wrapper"),r}const s=v(t);if(s){console.log("ðŸ”„ [Plan My Day] Replacing existing schedule section"),console.log("ðŸ“‹ [Plan My Day] Found section:",{headingMatch:null===(a=s[1])||void 0===a?void 0:a.substring(0,50),contentMatch:null===(i=s[2])||void 0===i?void 0:i.substring(0,100)});const[n,o]=s,l=o+e,r=t.replace(n,l);return console.log("âœ… [Plan My Day] Schedule section replaced"),r}{console.log("âž• [Plan My Day] Adding new plan section with comment wrapper at top");const n=`\x3c!-- vp:plan:start --\x3e\n${e}\n\x3c!-- vp:plan:end --\x3e\n\n`+t;return console.log("âœ… [Plan My Day] New plan section with wrapper added at top"),n}}(s,l);console.log("ðŸ’¾ [Plan My Day] Updating file...",{originalLength:s.length,updatedLength:u.length,changed:s!==u}),yield this.app.vault.modify(i,u),console.log("âœ… [Plan My Day] File updated successfully"),o.hide();const p=r?`${r} âœ…`:"Schedule inserted âœ…";console.log("ðŸŽ‰ [Plan My Day] Success:",p),new t.Notice(p)}catch(e){if(console.error("âŒ [Plan My Day] Operation failed:",e),console.error("ðŸ” [Plan My Day] Error details:",{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:"No stack trace",type:typeof e,name:e instanceof Error?e.name:"Unknown"}),o.hide(),e instanceof Error){const n=e.message;console.log("ðŸ” [Plan My Day] Analyzing error message:",n),n.includes("API client not initialized")?(console.error("âŒ [Plan My Day] API client not initialized"),new t.Notice("Planning error: VaultPilot not connected to EvoAgentX. Check settings and restart plugin.")):n.includes("does not have planTasks method")?(console.error("âŒ [Plan My Day] API client missing planTasks method"),new t.Notice("Planning error: EvoAgentX API client outdated. Please update VaultPilot plugin.")):n.includes("JSON")||n.includes("Invalid schedule data")?(console.error("âŒ [Plan My Day] Invalid response format"),new t.Notice("Planning error: Invalid response format from EvoAgentX")):n.includes("fetch")||n.includes("network")||n.includes("Failed to fetch")?(console.error("âŒ [Plan My Day] Network error"),new t.Notice("Planning error: Unable to connect to EvoAgentX server. Check your connection and server status.")):n.includes("Failed to generate schedule")||n.includes("Schedule fetch failed")?(console.error("âŒ [Plan My Day] Schedule generation failed"),new t.Notice("Planning error: EvoAgentX task planning failed. Check server logs for details.")):n.includes("No data in API response")?(console.error("âŒ [Plan My Day] Empty API response"),new t.Notice("Planning error: EvoAgentX returned empty response. Try again or check server status.")):(console.error("âŒ [Plan My Day] Unhandled error"),new t.Notice(`Planning error: ${n.substring(0,100)}${n.length>100?"...":""}`))}else console.error("âŒ [Plan My Day] Non-Error object thrown"),new t.Notice("Planning error: Unknown error occurred with EvoAgentX");console.log("ðŸ” [Plan My Day] Full error log completed")}})}debugPlanMyDay(){return e(this,void 0,void 0,function*(){console.log("ðŸ” [Plan My Day Debug] Starting comprehensive debug..."),f.clearLogs();const e=new t.Notice("Running Plan My Day diagnostics...",0);try{const n=this.app.workspace.getActiveFile();f.log("ðŸ“ Active file check",{hasActiveFile:!!n,fileName:null==n?void 0:n.name,fileExtension:null==n?void 0:n.extension});const a=f.analyzeApiClient(this.apiClient);if(f.log("ðŸ”— API client analysis",a),this.apiClient){const t=yield f.testConnection(this.apiClient);if(f.log("ðŸŒ Connection test result",t),t.success){const t=yield f.testTaskPlanning(this.apiClient,"Test note with some tasks:\n- Write code\n- Test functionality\n- Review results");f.log("ðŸ“‹ Task planning test result",t)}}f.log("âš™ï¸ Plugin settings",{backendUrl:this.settings.backendUrl,hasApiKey:!!this.settings.apiKey,debugMode:this.settings.debugMode}),e.hide();const i=f.getLogs();console.log("ðŸ” [Plan My Day Debug] Complete diagnostic log:",i);const o=i.slice(-5).join("\n");if(new t.Notice(`Debug complete! Check console for full logs.\n\nLast entries:\n${o}`,1e4),n){const e=`# Plan My Day Debug Report\n\nGenerated: ${(new Date).toISOString()}\n\n## Diagnostic Results\n\n\`\`\`\n${f.exportLogs()}\n\`\`\``;yield this.app.vault.create(`Plan My Day Debug - ${Date.now()}.md`,e),new t.Notice("Debug report saved as new note!")}}catch(n){e.hide(),f.error("Debug process failed",n),new t.Notice(`Debug failed: ${n instanceof Error?n.message:String(n)}`)}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(o);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:o,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}activateFullTabView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(l);if(0===t.length){const t=this.app.workspace.getLeaf("tab");t&&(yield t.setViewState({type:l,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}initializeVaultManagement(){var t;(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)&&(this.vaultClient=new b(this.settings.backendUrl,this.settings.apiKey),this.settings.debugMode&&console.log("Vault management initialized"))}disableVaultManagement(){this.vaultClient=null,this.settings.debugMode&&console.log("Vault management disabled")}registerVaultManagementCommands(){[{id:"vaultpilot-vault-structure",name:"View Vault Structure",callback:function(){console.log("Opening vault structure modal"),this.openVaultStructureModal?this.openVaultStructureModal():new t.Notice("Vault structure feature not available")}},{id:"vaultpilot-smart-search",name:"Smart Vault Search",callback:function(){console.log("Opening smart search modal"),this.openSmartSearchModal?this.openSmartSearchModal():new t.Notice("Smart search feature not available")}},{id:"vaultpilot-file-operations",name:"File Operations Manager",callback:function(){console.log("Opening file operations modal"),this.openFileOperationsModal?this.openFileOperationsModal():new t.Notice("File operations feature not available")}},{id:"vaultpilot-organize-vault",name:"AI Vault Organization",callback:function(){console.log("Opening vault organizer modal"),this.openVaultOrganizerModal?this.openVaultOrganizerModal():new t.Notice("Vault organizer feature not available")}},{id:"vaultpilot-batch-operations",name:"Batch File Operations",callback:function(){console.log("Opening batch operations modal"),this.openBatchOperationsModal?this.openBatchOperationsModal():new t.Notice("Batch operations feature not available")}},{id:"vaultpilot-quick-search-selection",name:"Quick Search Selected Text",editorCallback:function(e){const n=e.getSelection();n.trim()?(console.log("Quick search for:",n.trim()),this.openSmartSearchModal?this.openSmartSearchModal(n.trim()):new t.Notice("Smart search feature not available")):new t.Notice("Please select text to search for")}},{id:"vaultpilot-vault-health-check",name:"Vault Health Check",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");new t.Notice("Running vault health check...");const e=yield this.vaultClient.testConnection();if(!e.success)return void new t.Notice(`Health check failed: ${e.message}`,5e3);const n=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:1}),a=yield this.vaultClient.searchVault({query:"test",max_results:1});new t.Notice(`âœ… Vault Health Check Passed\nðŸ“ ${n.total_files} files, ${n.total_folders} folders\nðŸ” Search: ${a.results.length} results\nðŸ’¾ Size: ${(n.total_size/1024/1024).toFixed(2)} MB`,8e3)}catch(e){console.error("Vault health check failed:",e),new t.Notice(`âŒ Health check failed: ${e.message}`,5e3)}})}},{id:"vaultpilot-vault-backup",name:"Create Vault Backup",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");new t.Notice("Creating vault backup...");const e=yield this.vaultClient.backupVault({include_settings:!0,compression:!0,backup_name:`vaultpilot-backup-${(new Date).toISOString().split("T")[0]}`});new t.Notice(`âœ… Backup created successfully\nðŸ“¦ ${e.files_backed_up} files\nðŸ’¾ Size: ${(e.backup_size/1024/1024).toFixed(2)} MB\nðŸ“ Location: ${e.backup_path}`,8e3)}catch(e){console.error("Backup failed:",e),new t.Notice(`âŒ Backup failed: ${e.message}`,5e3)}})}},{id:"vaultpilot-search-content",name:"Search Content",editorCallback:function(e){const n=e.getSelection().trim()||"Enter search query";this.openSmartSearchModal?this.openSmartSearchModal(n,"content"):new t.Notice("Smart search feature not available")}},{id:"vaultpilot-search-filenames",name:"Search Filenames",callback:function(){this.openSmartSearchModal?this.openSmartSearchModal("","filename"):new t.Notice("Smart search feature not available")}},{id:"vaultpilot-recent-files",name:"View Recent Files",callback:function(){return e(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new t.Notice("Vault management not initialized");const e=yield this.vaultClient.getVaultStructure({include_content:!1});if(0===e.recent_files.length)return void new t.Notice("No recent files found");const n=e.recent_files.slice(0,10).map(t=>`â€¢ ${t.name} (${t.modified})`).join("\n");new t.Notice(`ðŸ“ Recent Files:\n${n}`,1e4)}catch(e){console.error("Failed to get recent files:",e),new t.Notice(`âŒ Failed to get recent files: ${e.message}`,5e3)}})}}].forEach(t=>{var e,n;this.addCommand(Object.assign(Object.assign({},t),{callback:null===(e=t.callback)||void 0===e?void 0:e.bind(this),editorCallback:null===(n=t.editorCallback)||void 0===n?void 0:n.bind(this)}))})}openVaultStructureModal(){this.vaultClient?new k(this.app,this).open():new t.Notice("Vault management not available")}openSmartSearchModal(e,n){if(!this.vaultClient)return void new t.Notice("Vault management not available");const a=new x(this.app,this);e&&a.setInitialQuery(e,n),a.open()}openFileOperationsModal(e,n){if(!this.vaultClient)return void new t.Notice("Vault management not available");const a=new w(this.app,this);e&&a.setInitialPath(e),n&&a.setOperation(n),a.open()}openVaultOrganizerModal(){new t.Notice("Vault organizer modal not yet implemented")}openBatchOperationsModal(){new t.Notice("Batch operations modal not yet implemented")}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(t)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(e){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(e.key))return!1;const n=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!n)return!1;const a=n.editor,i=a.getCursor(),o=a.getLine(i.line);if(i.ch!==o.length)return!1;const s=o.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===e.key||"Enter"===e.key&&o.trim().length>10}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,a=n.getCursor(),i=n.getLine(a.line),o=n.getValue();if(i.trim().length<10||a.ch!==i.length)return;if(!o||0===o.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const e=yield this.apiClient.getCopilotCompletion({text:o,cursor_position:n.posToOffset(a),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Auto-suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},a,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){var t;yield this.saveData(this.settings),this.apiClient=new h(this.settings.backendUrl,this.settings.apiKey),(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)?this.initializeVaultManagement():this.disableVaultManagement(),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=E;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3ZhdWx0LXNldHRpbmdzLnRzIiwiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvZnVsbC10YWItdmlldy50cyIsIi4uL3NyYy92YXVsdC11dGlscy50cyIsIi4uL3NyYy9jaGF0LW1vZGFsLnRzIiwiLi4vc3JjL3dvcmtmbG93LW1vZGFsLnRzIiwiLi4vc3JjL2FwaS1jbGllbnQudHMiLCIuLi9zcmMvcGxhbm5lci50cyIsIi4uL3NyYy9wbGFuLW15LWRheS1kZWJ1Zy50cyIsIi4uL3NyYy92YXVsdC10eXBlcy50cyIsIi4uL3NyYy92YXVsdC1hcGktY2xpZW50LnRzIiwiLi4vc3JjL3ZhdWx0LW1vZGFscy50cyIsIi4uL3NyYy9tYWluLnRzIiwiLi4vc3JjL3ZhdWx0LWNvbW1hbmRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2V0dGluZ3MgRXh0ZW5zaW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIH0gZnJvbSAnLi92YXVsdC10eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1M6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzID0ge1xuICBlbmFibGVWYXVsdE1hbmFnZW1lbnQ6IHRydWUsXG4gIGF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmU6IGZhbHNlLFxuICBzZWFyY2hSZXN1bHRzTGltaXQ6IDUwLFxuICBlbmFibGVTbWFydFNlYXJjaDogdHJ1ZSxcbiAgYmF0Y2hPcGVyYXRpb25UaW1lb3V0OiAzMDAwMCxcbiAgc2hvd1ZhdWx0U3RhdHM6IHRydWUsXG4gIG1heFNlYXJjaFJlc3VsdHM6IDEwMCxcbiAgZGVmYXVsdFNlYXJjaFR5cGU6ICdjb250ZW50JyxcbiAgZW5hYmxlRmlsZU9wZXJhdGlvbnM6IHRydWUsXG4gIGNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnM6IHRydWUsXG4gIGF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zOiBmYWxzZVxufTtcblxuLyoqXG4gKiBBZGQgdmF1bHQgbWFuYWdlbWVudCBzZXR0aW5ncyB0byB0aGUgc2V0dGluZ3MgdGFiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogYW55KSB7XG4gIC8vIFZhdWx0IE1hbmFnZW1lbnQgU2VjdGlvbiBIZWFkZXJcbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHQgTWFuYWdlbWVudCcgfSk7XG4gIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICB0ZXh0OiAnQ29uZmlndXJlIEFJLXBvd2VyZWQgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIGFuZCBmaWxlIG9wZXJhdGlvbnMuJyBcbiAgfSk7XG5cbiAgLy8gRW5hYmxlIFZhdWx0IE1hbmFnZW1lbnRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBWYXVsdCBNYW5hZ2VtZW50JylcbiAgICAuc2V0RGVzYygnRW5hYmxlIEFJLXBvd2VyZWQgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIGFuZCBmaWxlIG9wZXJhdGlvbnMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZVZhdWx0TWFuYWdlbWVudCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBwbHVnaW4uaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBsdWdpbi5kaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcblxuICAvLyBBdXRvIFN5bmMgVmF1bHQgU3RydWN0dXJlXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdBdXRvIFN5bmMgVmF1bHQgU3RydWN0dXJlJylcbiAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSB1cGRhdGUgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIHdoZW4gZmlsZXMgY2hhbmdlJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5hdXRvU3luY1ZhdWx0U3RydWN0dXJlID8/IGZhbHNlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmUgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEVuYWJsZSBTbWFydCBTZWFyY2hcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBTbWFydCBTZWFyY2gnKVxuICAgIC5zZXREZXNjKCdVc2UgQUktcG93ZXJlZCBzZWFyY2ggd2l0aCBjb250ZXh0IGFuZCBpbnNpZ2h0cycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlU21hcnRTZWFyY2ggPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5lbmFibGVTbWFydFNlYXJjaCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gU2VhcmNoIFJlc3VsdHMgTGltaXRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ1NlYXJjaCBSZXN1bHRzIExpbWl0JylcbiAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gZGlzcGxheScpXG4gICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAuc2V0TGltaXRzKDEwLCAyMDAsIDEwKVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LnNlYXJjaFJlc3VsdHNMaW1pdCA/PyA1MClcbiAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuc2VhcmNoUmVzdWx0c0xpbWl0ID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBEZWZhdWx0IFNlYXJjaCBUeXBlXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdEZWZhdWx0IFNlYXJjaCBUeXBlJylcbiAgICAuc2V0RGVzYygnRGVmYXVsdCBzZWFyY2ggbW9kZSBmb3Igc21hcnQgc2VhcmNoJylcbiAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgIC5hZGRPcHRpb24oJ2NvbnRlbnQnLCAnQ29udGVudCBTZWFyY2gnKVxuICAgICAgLmFkZE9wdGlvbignZmlsZW5hbWUnLCAnRmlsZW5hbWUgU2VhcmNoJylcbiAgICAgIC5hZGRPcHRpb24oJ3RhZ3MnLCAnVGFnIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdsaW5rcycsICdMaW5rIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdjb21wcmVoZW5zaXZlJywgJ0NvbXByZWhlbnNpdmUgU2VhcmNoJylcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5kZWZhdWx0U2VhcmNoVHlwZSA/PyAnY29udGVudCcpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuZGVmYXVsdFNlYXJjaFR5cGUgPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBFbmFibGUgRmlsZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdFbmFibGUgRmlsZSBPcGVyYXRpb25zJylcbiAgICAuc2V0RGVzYygnQWxsb3cgZmlsZSBjcmVhdGlvbiwgZGVsZXRpb24sIGFuZCBtb2RpZmljYXRpb24gdGhyb3VnaCB0aGUgaW50ZXJmYWNlJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVGaWxlT3BlcmF0aW9ucyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZUZpbGVPcGVyYXRpb25zID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBDb25maXJtIERlc3RydWN0aXZlIE9wZXJhdGlvbnNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0NvbmZpcm0gRGVzdHJ1Y3RpdmUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ1Nob3cgY29uZmlybWF0aW9uIGRpYWxvZyBmb3IgZmlsZSBkZWxldGlvbiBhbmQgZGVzdHJ1Y3RpdmUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9ucyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEF1dG8gQmFja3VwIEJlZm9yZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdBdXRvIEJhY2t1cCBCZWZvcmUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgY3JlYXRlIGJhY2t1cHMgYmVmb3JlIGRlc3RydWN0aXZlIGZpbGUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMgPz8gZmFsc2UpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEJhdGNoIE9wZXJhdGlvbiBUaW1lb3V0XG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdCYXRjaCBPcGVyYXRpb24gVGltZW91dCcpXG4gICAgLnNldERlc2MoJ1RpbWVvdXQgZm9yIGJhdGNoIG9wZXJhdGlvbnMgaW4gbWlsbGlzZWNvbmRzJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgIC5zZXRQbGFjZWhvbGRlcignMzAwMDAnKVxuICAgICAgLnNldFZhbHVlKFN0cmluZyhwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPz8gMzAwMDApKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gcGFyc2VJbnQodmFsdWUpIHx8IDMwMDAwO1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmJhdGNoT3BlcmF0aW9uVGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBTaG93IFZhdWx0IFN0YXRzXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdTaG93IFZhdWx0IFN0YXRpc3RpY3MnKVxuICAgIC5zZXREZXNjKCdEaXNwbGF5IHZhdWx0IHN0YXRpc3RpY3MgaW4gbW9kYWxzIGFuZCBpbnRlcmZhY2VzJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5zaG93VmF1bHRTdGF0cyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LnNob3dWYXVsdFN0YXRzID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBUZXN0IENvbm5lY3Rpb24gQnV0dG9uXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdUZXN0IFZhdWx0IE1hbmFnZW1lbnQgQ29ubmVjdGlvbicpXG4gICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbiB0byB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50cycpXG4gICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJylcbiAgICAgIC5zZXRDdGEoKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi52YXVsdENsaWVudCkge1xuICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdOb3QgQXZhaWxhYmxlJyk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJyksIDIwMDApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0aW5nLi4uJyk7XG4gICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBsdWdpbi52YXVsdENsaWVudC50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KchSBDb25uZWN0ZWQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KdjCBGYWlsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KdjCBFcnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJyksIDMwMDApO1xuICAgICAgfSkpO1xuXG4gIC8vIEFkdmFuY2VkIFNldHRpbmdzIFNlY3Rpb25cbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQgVmF1bHQgTWFuYWdlbWVudCcgfSk7XG5cbiAgLy8gTWF4IFNlYXJjaCBSZXN1bHRzXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdNYXhpbXVtIFNlYXJjaCBSZXN1bHRzJylcbiAgICAuc2V0RGVzYygnQWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gZmV0Y2ggZnJvbSBiYWNrZW5kJylcbiAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgIC5zZXRMaW1pdHMoNTAsIDUwMCwgMjUpXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8ubWF4U2VhcmNoUmVzdWx0cyA/PyAxMDApXG4gICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Lm1heFNlYXJjaFJlc3VsdHMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIFJlc2V0IHRvIERlZmF1bHRzIEJ1dHRvblxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnUmVzZXQgVmF1bHQgTWFuYWdlbWVudCBTZXR0aW5ncycpXG4gICAgLnNldERlc2MoJ1Jlc2V0IGFsbCB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHQgdmFsdWVzJylcbiAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXNldCB0byBEZWZhdWx0cycpXG4gICAgICAuc2V0V2FybmluZygpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyBkaXNwbGF5XG4gICAgICAgIGNvbnN0IHNldHRpbmdzVGFiID0gcGx1Z2luLmFwcC5zZXR0aW5nLmFjdGl2ZVRhYjtcbiAgICAgICAgaWYgKHNldHRpbmdzVGFiICYmIHNldHRpbmdzVGFiLmRpc3BsYXkpIHtcbiAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVZhdWx0TWFuYWdlbWVudFNldHRpbmdzKHNldHRpbmdzOiBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChzZXR0aW5ncy5zZWFyY2hSZXN1bHRzTGltaXQgPCAxIHx8IHNldHRpbmdzLnNlYXJjaFJlc3VsdHNMaW1pdCA+IDEwMDApIHtcbiAgICBlcnJvcnMucHVzaCgnU2VhcmNoIHJlc3VsdHMgbGltaXQgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMDAnKTtcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5tYXhTZWFyY2hSZXN1bHRzIDwgc2V0dGluZ3Muc2VhcmNoUmVzdWx0c0xpbWl0KSB7XG4gICAgZXJyb3JzLnB1c2goJ01heGltdW0gc2VhcmNoIHJlc3VsdHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gc2VhcmNoIHJlc3VsdHMgbGltaXQnKTtcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPCAxMDAwIHx8IHNldHRpbmdzLmJhdGNoT3BlcmF0aW9uVGltZW91dCA+IDMwMDAwMCkge1xuICAgIGVycm9ycy5wdXNoKCdCYXRjaCBvcGVyYXRpb24gdGltZW91dCBtdXN0IGJlIGJldHdlZW4gMSBzZWNvbmQgYW5kIDUgbWludXRlcycpO1xuICB9XG5cbiAgY29uc3QgdmFsaWRTZWFyY2hUeXBlcyA9IFsnY29udGVudCcsICdmaWxlbmFtZScsICd0YWdzJywgJ2xpbmtzJywgJ2NvbXByZWhlbnNpdmUnXTtcbiAgaWYgKCF2YWxpZFNlYXJjaFR5cGVzLmluY2x1ZGVzKHNldHRpbmdzLmRlZmF1bHRTZWFyY2hUeXBlKSkge1xuICAgIGVycm9ycy5wdXNoKCdJbnZhbGlkIGRlZmF1bHQgc2VhcmNoIHR5cGUnKTtcbiAgfVxuXG4gIHJldHVybiBlcnJvcnM7XG59XG5cbi8qKlxuICogR2V0IHZhdWx0IG1hbmFnZW1lbnQgc2V0dGluZ3Mgd2l0aCBkZWZhdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MocGx1Z2luU2V0dGluZ3M6IGFueSk6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MsXG4gICAgLi4uKHBsdWdpblNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCB8fCB7fSlcbiAgfTtcbn1cbiIsImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncywgREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH0gZnJvbSAnLi92YXVsdC1zZXR0aW5ncyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWYXVsdFBpbG90U2V0dGluZ3MgPSB7XG4gIGJhY2tlbmRVcmw6ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnLFxuICBhcGlLZXk6ICcnLFxuICBlbmFibGVXZWJTb2NrZXQ6IHRydWUsXG4gIGVuYWJsZUNvcGlsb3Q6IHRydWUsXG4gIGVuYWJsZUF1dG9Db21wbGV0ZTogZmFsc2UsIC8vIERpc2FibGVkIGJ5IGRlZmF1bHQgdG8gcHJldmVudCBmcmVxdWVudCByZXF1ZXN0c1xuICBkZWZhdWx0QWdlbnQ6ICcnLFxuICBkZWZhdWx0TW9kZTogJ2FzaycsXG4gIGNoYXRIaXN0b3J5TGltaXQ6IDEwMCxcbiAgZGVidWdNb2RlOiBmYWxzZSxcbiAgc2hvd0ludGVudERlYnVnOiBmYWxzZSxcbiAgdmF1bHRNYW5hZ2VtZW50OiBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1Ncbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyBhbmQgbmV3IGxpbmVzICh3aXRoIDEwcyBjb29sZG93biknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQ2hhdCBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IG1vZGUgZm9yIG5ldyBjaGF0IHNlc3Npb25zOiBBc2sgZm9yIHNpbXBsZSBRJkEsIEFnZW50IGZvciBjb21wbGV4IHdvcmtmbG93cycpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdhc2snLCAnQXNrIE1vZGUgLSBTaW1wbGUgUSZBJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdhZ2VudCcsICdBZ2VudCBNb2RlIC0gQ29tcGxleCBXb3JrZmxvd3MnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1vZGUgPSB2YWx1ZSBhcyAnYXNrJyB8ICdhZ2VudCc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdTaG93IEludGVudCBEZWJ1ZyBPdmVybGF5JylcbiAgICAgIC5zZXREZXNjKCdEaXNwbGF5IGF1dG9tYXRpYyBpbnRlbnQgZGV0ZWN0aW9uIGluIGNoYXQgKEFzayB2cyBBZ2VudCBtb2RlKScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gVmF1bHQgTWFuYWdlbWVudCBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IE1hbmFnZW1lbnQnIH0pO1xuICAgIGFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzKGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbik7XG5cbiAgICAvLyBIZWxwIHNlY3Rpb25cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdIZWxwICYgRG9jdW1lbnRhdGlvbicgfSk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRGFzaGJvYXJkIGFjdGlvbiAobmV3KVxuICAgIGNvbnN0IGRhc2hib2FyZEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiiBPcGVuIERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgZGFzaGJvYXJkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG5cbiAgICAvLyBXb3JrZmxvdyBhY3Rpb25cbiAgICBjb25zdCB3b3JrZmxvd0J1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pqZ77iPIEV4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuXG4gICAgLy8gQW5hbHl6ZSB2YXVsdCBhY3Rpb25cbiAgICBjb25zdCBhbmFseXplQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SNIEFuYWx5emUgVmF1bHQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGFuYWx5emVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuXG4gICAgLy8gQ29waWxvdCBhY3Rpb25cbiAgICBjb25zdCBjb3BpbG90QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfinKggR2V0IENvbXBsZXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvcGlsb3RCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGVkaXRvciBmb3VuZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZWZyZXNoIGJ1dHRvblxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoIFN0YXR1cycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFnZW50IGluZm8gaWYgYXZhaWxhYmxlXG4gICAgdGhpcy5sb2FkQWdlbnRJbmZvKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudEluZm8oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cyBpbiB2aWV3Li4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBnZXRBZ2VudHMgcmVzcG9uc2UgaW4gdmlldzonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgbGV0IGFnZW50czogYW55W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkge1xuICAgICAgICAgIC8vIERpcmVjdCBhcnJheSByZXNwb25zZVxuICAgICAgICAgIGFnZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBDaGVjayBmb3Igd3JhcHBlZCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgICAgY29uc3QgZGF0YU9iaiA9IHJlc3BvbnNlLmRhdGEgYXMgYW55O1xuICAgICAgICAgIGlmIChkYXRhT2JqLmFnZW50cyAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouYWdlbnRzKSkge1xuICAgICAgICAgICAgLy8gUmVzcG9uc2UgZm9ybWF0OiB7YWdlbnRzOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouYWdlbnRzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kIGFnZW50cyBhcnJheSBpbiB2aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmFnZW50cycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YU9iai5kYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5kYXRhKSkge1xuICAgICAgICAgICAgLy8gUmVzcG9uc2UgZm9ybWF0OiB7ZGF0YTogWy4uLl19XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgbmVzdGVkIGRhdGEgaW4gdmlldywgdXNpbmcgcmVzcG9uc2UuZGF0YS5kYXRhJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVmF1bHRQaWxvdDogVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQ6JywgdHlwZW9mIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGxheSBhZ2VudCBpbmZvcm1hdGlvblxuICAgICAgICBjb25zdCBhZ2VudENvdW50ID0gYWdlbnRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYWN0aXZlQWdlbnRzID0gYWdlbnRzLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudFN0YXRzRWwgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXRzJyB9KTtcbiAgICAgICAgYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2YWlsYWJsZSBBZ2VudHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50cyBpbiB2aWV3OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXZpZXctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXZpZXctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXZpZXcge1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN1YnRpdGxlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyBoMyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1lcnJvcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgMWZyKTtcbiAgICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1pdGVtIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LXZhbHVlIHtcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMgaDQge1xuICAgICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1pbmZvIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIgPSAndmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RGdWxsVGFiVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIHN0YXR1c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcXVpY2tBY3Rpb25zRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB2YXVsdFN0YXRzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBjaGF0RWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB3b3JrZmxvd0VsITogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQjtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdWYXVsdFBpbG90IERhc2hib2FyZCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtZGFzaGJvYXJkJztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygndmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3Jyk7XG5cbiAgICAvLyBGb3JjZSB0aGUgY29udGFpbmVyIHRvIHRha2UgZnVsbCBoZWlnaHRcbiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gICAgLy8gQ3JlYXRlIG1haW4gbGF5b3V0XG4gICAgY29uc3QgbWFpbkxheW91dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tbGF5b3V0JyB9KTtcblxuICAgIC8vIExlZnQgc2lkZWJhclxuICAgIGNvbnN0IGxlZnRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWxlZnQtc2lkZWJhcicgfSk7XG4gICAgdGhpcy5jcmVhdGVMZWZ0U2lkZWJhcihsZWZ0U2lkZWJhcik7XG5cbiAgICAvLyBNYWluIGNvbnRlbnQgYXJlYVxuICAgIGNvbnN0IG1haW5Db250ZW50ID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tY29udGVudCcgfSk7XG4gICAgdGhpcy5jcmVhdGVNYWluQ29udGVudChtYWluQ29udGVudCk7XG5cbiAgICAvLyBSaWdodCBzaWRlYmFyXG4gICAgY29uc3QgcmlnaHRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJpZ2h0LXNpZGViYXInIH0pO1xuICAgIHRoaXMuY3JlYXRlUmlnaHRTaWRlYmFyKHJpZ2h0U2lkZWJhcik7XG5cbiAgICB0aGlzLmFkZEZ1bGxUYWJTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTGVmdFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zaWRlYmFyLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90JyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQUkgQXNzaXN0YW50IERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN1YnRpdGxlJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhdHVzIHNlY3Rpb25cbiAgICB0aGlzLnN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMnIH0pO1xuICAgIHRoaXMuY3JlYXRlUXVpY2tBY3Rpb25zKCk7XG5cbiAgICAvLyBWYXVsdCBzdGF0c1xuICAgIHRoaXMudmF1bHRTdGF0c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXZhdWx0LXN0YXRzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWFpbkNvbnRlbnQoY29udGVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBUYWIgbmF2aWdhdGlvblxuICAgIGNvbnN0IHRhYk5hdiA9IGNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC10YWItbmF2JyB9KTtcbiAgICBjb25zdCBjaGF0VGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/CfkqwgQ2hhdCcsIFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC10YWItYnV0dG9uIGFjdGl2ZSdcbiAgICB9KTtcbiAgICBjb25zdCB3b3JrZmxvd1RhYiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG4gICAgY29uc3QgYW5hbHl0aWNzVGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/Cfk4ogQW5hbHl0aWNzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBUYWIgY29udGVudFxuICAgIGNvbnN0IHRhYkNvbnRlbnQgPSBjb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdGFiLWNvbnRlbnQnIH0pO1xuXG4gICAgLy8gQ2hhdCBzZWN0aW9uXG4gICAgdGhpcy5jaGF0RWwgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uIGFjdGl2ZScgfSk7XG4gICAgdGhpcy5jcmVhdGVDaGF0U2VjdGlvbih0aGlzLmNoYXRFbCk7XG5cbiAgICAvLyBXb3JrZmxvdyBzZWN0aW9uXG4gICAgdGhpcy53b3JrZmxvd0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24nIH0pO1xuICAgIHRoaXMuY3JlYXRlV29ya2Zsb3dTZWN0aW9uKHRoaXMud29ya2Zsb3dFbCk7XG5cbiAgICAvLyBBbmFseXRpY3Mgc2VjdGlvblxuICAgIGNvbnN0IGFuYWx5dGljc0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWwpO1xuXG4gICAgLy8gVGFiIHN3aXRjaGluZ1xuICAgIGNoYXRUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdjaGF0JywgY2hhdFRhYik7XG4gICAgd29ya2Zsb3dUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCd3b3JrZmxvdycsIHdvcmtmbG93VGFiKTtcbiAgICBhbmFseXRpY3NUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdhbmFseXRpY3MnLCBhbmFseXRpY3NUYWIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSaWdodFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZWNlbnQgZmlsZXNcbiAgICBjb25zdCByZWNlbnRGaWxlc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycgfSk7XG4gICAgcmVjZW50RmlsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgIHRoaXMudXBkYXRlUmVjZW50RmlsZXMocmVjZW50RmlsZXNFbCk7XG5cbiAgICAvLyBBZ2VudCBzdGF0dXNcbiAgICBjb25zdCBhZ2VudFN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cycgfSk7XG4gICAgYWdlbnRTdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBTdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlQWdlbnRTdGF0dXMoYWdlbnRTdGF0dXNFbCk7XG5cbiAgICAvLyBBY3Rpdml0eSBmZWVkXG4gICAgY29uc3QgYWN0aXZpdHlFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS1mZWVkJyB9KTtcbiAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FjdGl2aXR5IEZlZWQnIH0pO1xuICAgIHRoaXMuY3JlYXRlQWN0aXZpdHlGZWVkKGFjdGl2aXR5RWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDaGF0U2VjdGlvbihjaGF0RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQ2hhdCBjb250ZW50IGNvbnRhaW5lciB3aXRoIHBhZGRpbmcgYW5kIHNjcm9sbGluZ1xuICAgIGNvbnN0IGNoYXRDb250ZW50ID0gY2hhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1jb250ZW50JyB9KTtcblxuICAgIC8vIENoYXQgaGVhZGVyIChub3cgaW5zaWRlIGNvbnRlbnQpXG4gICAgY29uc3QgY2hhdEhlYWRlciA9IGNoYXRDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGNoYXRIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQUkgQ2hhdCBJbnRlcmZhY2UnIH0pO1xuXG4gICAgLy8gQ2hhdCBoaXN0b3J5XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBjaGF0Q29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaGlzdG9yeScgfSk7XG4gICAgY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnV2VsY29tZSEgU3RhcnQgYSBjb252ZXJzYXRpb24gd2l0aCB5b3VyIEFJIGFzc2lzdGFudC4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXdlbGNvbWUnXG4gICAgfSk7XG5cbiAgICAvLyBDaGF0IGlucHV0XG4gICAgY29uc3QgY2hhdElucHV0ID0gY2hhdENvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0JyB9KTtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGNoYXRJbnB1dC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7IFxuICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgbWVzc2FnZSBoZXJlLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC10ZXh0YXJlYSdcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBzZW5kQnV0dG9uID0gY2hhdElucHV0LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ1NlbmQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXNlbmQtYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgc2VuZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHRleHRhcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMuc2VuZENoYXRNZXNzYWdlKG1lc3NhZ2UsIGNoYXRIaXN0b3J5KTtcbiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIEVudGVyIGtleVxuICAgIHRleHRhcmVhLm9ua2V5ZG93biA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZW5kQnV0dG9uLmNsaWNrKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlV29ya2Zsb3dTZWN0aW9uKHdvcmtmbG93RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gV29ya2Zsb3cgY29udGVudCBjb250YWluZXIgd2l0aCBwYWRkaW5nIGFuZCBzY3JvbGxpbmdcbiAgICBjb25zdCB3b3JrZmxvd0NvbnRlbnQgPSB3b3JrZmxvd0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctY29udGVudCcgfSk7XG4gICAgXG4gICAgLy8gV29ya2Zsb3cgaGVhZGVyIChub3cgaW5zaWRlIGNvbnRlbnQpXG4gICAgY29uc3Qgd29ya2Zsb3dIZWFkZXIgPSB3b3JrZmxvd0NvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIHdvcmtmbG93SGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1dvcmtmbG93IE1hbmFnZW1lbnQnIH0pO1xuXG4gICAgY29uc3Qgd29ya2Zsb3dHcmlkID0gd29ya2Zsb3dDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZ3JpZCcgfSk7XG5cbiAgICAvLyBQcmVkZWZpbmVkIHdvcmtmbG93c1xuICAgIGNvbnN0IHdvcmtmbG93cyA9IFtcbiAgICAgIHsgbmFtZTogJ0FuYWx5emUgVmF1bHQnLCBpY29uOiAn8J+UjScsIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSB5b3VyIHZhdWx0IHN0cnVjdHVyZSBhbmQgY29udGVudCcgfSxcbiAgICAgIHsgbmFtZTogJ0dlbmVyYXRlIFN1bW1hcnknLCBpY29uOiAn8J+TnScsIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIHN1bW1hcmllcyBvZiB5b3VyIG5vdGVzJyB9LFxuICAgICAgeyBuYW1lOiAnTGluayBBbmFseXNpcycsIGljb246ICfwn5SXJywgZGVzY3JpcHRpb246ICdBbmFseXplIG5vdGUgY29ubmVjdGlvbnMgYW5kIHJlbGF0aW9uc2hpcHMnIH0sXG4gICAgICB7IG5hbWU6ICdUYWcgTWFuYWdlbWVudCcsIGljb246ICfwn4+377iPJywgZGVzY3JpcHRpb246ICdPcmdhbml6ZSBhbmQgbWFuYWdlIHlvdXIgdGFncycgfSxcbiAgICAgIHsgbmFtZTogJ0RhaWx5IFBsYW5uaW5nJywgaWNvbjogJ/Cfk4UnLCBkZXNjcmlwdGlvbjogJ1BsYW4geW91ciBkYXkgYmFzZWQgb24geW91ciBub3RlcycgfSxcbiAgICAgIHsgbmFtZTogJ0tub3dsZWRnZSBHcmFwaCcsIGljb246ICfwn5W477iPJywgZGVzY3JpcHRpb246ICdWaXN1YWxpemUgeW91ciBrbm93bGVkZ2UgY29ubmVjdGlvbnMnIH0sXG4gICAgICB7IG5hbWU6ICdDb250ZW50IFNlYXJjaCcsIGljb246ICfwn5SOJywgZGVzY3JpcHRpb246ICdBZHZhbmNlZCBzZWFyY2ggYWNyb3NzIHlvdXIgdmF1bHQnIH0sXG4gICAgICB7IG5hbWU6ICdOb3RlIFRlbXBsYXRlcycsIGljb246ICfwn5OEJywgZGVzY3JpcHRpb246ICdDcmVhdGUgYW5kIG1hbmFnZSBub3RlIHRlbXBsYXRlcycgfSxcbiAgICAgIHsgbmFtZTogJ0xpbmsgQXNzaXN0YW50JywgaWNvbjogJ/CflJcnLCBkZXNjcmlwdGlvbjogJ0ludGVsbGlnZW50IGxpbmsgc3VnZ2VzdGlvbnMgYW5kIG1hbmFnZW1lbnQnIH1cbiAgICBdO1xuXG4gICAgd29ya2Zsb3dzLmZvckVhY2god29ya2Zsb3cgPT4ge1xuICAgICAgY29uc3Qgd29ya2Zsb3dDYXJkID0gd29ya2Zsb3dHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctY2FyZCcgfSk7XG4gICAgICB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogd29ya2Zsb3cuaWNvbiwgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1pY29uJyB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6IHdvcmtmbG93Lm5hbWUgfSk7XG4gICAgICB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHdvcmtmbG93LmRlc2NyaXB0aW9uIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBydW5CdXR0b24gPSB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgIHRleHQ6ICdSdW4nLFxuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LXJ1bi1idXR0b24nXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcnVuQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnJ1bldvcmtmbG93KHdvcmtmbG93Lm5hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBbmFseXRpY3NTZWN0aW9uKGFuYWx5dGljc0VsOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIEFuYWx5dGljcyBjb250ZW50IGNvbnRhaW5lciB3aXRoIHBhZGRpbmcgYW5kIHNjcm9sbGluZ1xuICAgIGNvbnN0IGFuYWx5dGljc0NvbnRlbnQgPSBhbmFseXRpY3NFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1jb250ZW50JyB9KTtcbiAgICBcbiAgICAvLyBBbmFseXRpY3MgaGVhZGVyIChub3cgaW5zaWRlIGNvbnRlbnQpXG4gICAgY29uc3QgYW5hbHl0aWNzSGVhZGVyID0gYW5hbHl0aWNzQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1oZWFkZXInIH0pO1xuICAgIGFuYWx5dGljc0hlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdWYXVsdCBBbmFseXRpY3MnIH0pO1xuXG4gICAgY29uc3QgY2hhcnRzQ29udGFpbmVyID0gYW5hbHl0aWNzQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0cy1jb250YWluZXInIH0pO1xuICAgIFxuICAgIC8vIEZpbGUgdHlwZSBkaXN0cmlidXRpb25cbiAgICBjb25zdCBmaWxlVHlwZUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgZmlsZVR5cGVDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxlIFR5cGUgRGlzdHJpYnV0aW9uJyB9KTtcbiAgICBmaWxlVHlwZUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ0NoYXJ0IHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIE5vdGUgY3JlYXRpb24gdGltZWxpbmVcbiAgICBjb25zdCB0aW1lbGluZUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgdGltZWxpbmVDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdOb3RlIENyZWF0aW9uIFRpbWVsaW5lJyB9KTtcbiAgICB0aW1lbGluZUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1RpbWVsaW5lIHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIFRhZyB1c2FnZVxuICAgIGNvbnN0IHRhZ0NoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgdGFnQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnVGFnIFVzYWdlJyB9KTtcbiAgICB0YWdDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdUYWcgYW5hbHl0aWNzIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBXb3JkIGNvdW50IGFuYWx5c2lzXG4gICAgY29uc3Qgd29yZENvdW50Q2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICB3b3JkQ291bnRDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdXb3JkIENvdW50IEFuYWx5c2lzJyB9KTtcbiAgICB3b3JkQ291bnRDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdXb3JkIGNvdW50IHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIExpbmsgZGVuc2l0eVxuICAgIGNvbnN0IGxpbmtDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIGxpbmtDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdMaW5rIERlbnNpdHknIH0pO1xuICAgIGxpbmtDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdMaW5rIGFuYWx5c2lzIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBBY3Rpdml0eSBoZWF0bWFwXG4gICAgY29uc3QgYWN0aXZpdHlDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIGFjdGl2aXR5Q2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQWN0aXZpdHkgSGVhdG1hcCcgfSk7XG4gICAgYWN0aXZpdHlDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdBY3Rpdml0eSBoZWF0bWFwIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN3aXRjaFRhYih0YWJOYW1lOiBzdHJpbmcsIGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIHRhYnNcbiAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52YXVsdHBpbG90LXRhYi1idXR0b24nKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLCAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLCAudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbicpLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICBzZWN0aW9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gY2xpY2tlZCB0YWJcbiAgICBidXR0b24uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgLy8gU2hvdyBjb3JyZXNwb25kaW5nIGNvbnRlbnRcbiAgICBpZiAodGFiTmFtZSA9PT0gJ2NoYXQnKSB7XG4gICAgICB0aGlzLmNoYXRFbC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfSBlbHNlIGlmICh0YWJOYW1lID09PSAnd29ya2Zsb3cnKSB7XG4gICAgICB0aGlzLndvcmtmbG93RWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ2FuYWx5dGljcycpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24nKT8uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZENoYXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZywgY2hhdEhpc3Rvcnk6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgdXNlcicgfSk7XG4gICAgdXNlck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbWVzc2FnZSB9KTtcblxuICAgIC8vIEFkZCB0aGlua2luZyBpbmRpY2F0b3JcbiAgICBjb25zdCB0aGlua2luZ01lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBhc3Npc3RhbnQgdGhpbmtpbmcnIH0pO1xuICAgIHRoaW5raW5nTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnVGhpbmtpbmcuLi4nIH0pO1xuXG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbVxuICAgIGNoYXRIaXN0b3J5LnNjcm9sbFRvcCA9IGNoYXRIaXN0b3J5LnNjcm9sbEhlaWdodDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZW5kQ2hhdCh7IG1lc3NhZ2UsIGNvbnRleHQ6IG51bGwgfSk7XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSB0aGlua2luZyBpbmRpY2F0b3JcbiAgICAgIHRoaW5raW5nTWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgYXNzaXN0YW50JyB9KTtcbiAgICAgICAgYXNzaXN0YW50TWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgZXJyb3InIH0pO1xuICAgICAgICBlcnJvck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yOiBDb3VsZCBub3QgZ2V0IHJlc3BvbnNlIGZyb20gQUknIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBSZW1vdmUgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgICB0aGlua2luZ01lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGVycm9yJyB9KTtcbiAgICAgIGVycm9yTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnRXJyb3I6IENvbm5lY3Rpb24gZmFpbGVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBTY3JvbGwgdG8gYm90dG9tXG4gICAgY2hhdEhpc3Rvcnkuc2Nyb2xsVG9wID0gY2hhdEhpc3Rvcnkuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5Xb3JrZmxvdyh3b3JrZmxvd05hbWU6IHN0cmluZykge1xuICAgIG5ldyBOb3RpY2UoYFJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfWApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBNYXAgd29ya2Zsb3cgbmFtZXMgdG8gYXBwcm9wcmlhdGUgYWN0aW9uc1xuICAgICAgc3dpdGNoICh3b3JrZmxvd05hbWUpIHtcbiAgICAgICAgY2FzZSAnQW5hbHl6ZSBWYXVsdCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5hbHl6ZVZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0RhaWx5IFBsYW5uaW5nJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5wbGFuTXlEYXkoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBGb3Igbm93LCBzaG93IGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICBuZXcgTm90aWNlKGAke3dvcmtmbG93TmFtZX0gd29ya2Zsb3cgaXMgY29taW5nIHNvb24hYCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzKCkge1xuICAgIHRoaXMuc3RhdHVzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24gU3RhdHVzJyB9KTtcblxuICAgIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEJhY2tlbmQgc3RhdHVzXG4gICAgY29uc3QgYmFja2VuZFN0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQmFja2VuZDogJyB9KTtcbiAgICBjb25zdCBiYWNrZW5kSW5kaWNhdG9yID0gYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogJ0NoZWNraW5nLi4uJ1xuICAgIH0pO1xuXG4gICAgLy8gV2ViU29ja2V0IHN0YXR1c1xuICAgIGNvbnN0IHdzU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnV2ViU29ja2V0OiAnIH0pO1xuICAgIGNvbnN0IHdzSW5kaWNhdG9yID0gd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6IHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkgPyAn8J+foiBDb25uZWN0ZWQnIDogJ/CflLQgRGlzY29ubmVjdGVkJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgYmFja2VuZCBzdGF0dXNcbiAgICB0aGlzLmNoZWNrQmFja2VuZFN0YXR1cyhiYWNrZW5kSW5kaWNhdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tCYWNrZW5kU3RhdHVzKGluZGljYXRvcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2gnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuXG4gICAgLy8gT3BlbiBzaWRlYmFyIHZpZXdcbiAgICBjb25zdCBzaWRlYmFyQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5OLIFNpZGViYXIgVmlldycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgc2lkZWJhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cbiAgICAvLyBPcGVuIG1vZGFsIGNoYXRcbiAgICBjb25zdCBtb2RhbENoYXRCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CfkqwgTW9kYWwgQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgbW9kYWxDaGF0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuQ2hhdE1vZGFsKCk7XG5cbiAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBXb3JrZmxvd3MnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVSZWNlbnRGaWxlcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcmVjZW50RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpXG4gICAgICAuc2xpY2UoMCwgNSk7XG5cbiAgICByZWNlbnRGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgY29uc3QgZmlsZUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVjZW50LWZpbGUnIH0pO1xuICAgICAgZmlsZUVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBmaWxlLmJhc2VuYW1lIH0pO1xuICAgICAgZmlsZUVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgZmFsc2UpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQWdlbnRTdGF0dXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMubG9hZEFnZW50SW5mbyhjb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKGNvbnRhaW5lcj86IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cyBpbiBmdWxsLXRhYi12aWV3Li4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBnZXRBZ2VudHMgcmVzcG9uc2UgaW4gZnVsbC10YWItdmlldzonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEgJiYgY29udGFpbmVyKSB7XG4gICAgICAgIGxldCBhZ2VudHM6IGFueVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YSkpIHtcbiAgICAgICAgICAvLyBEaXJlY3QgYXJyYXkgcmVzcG9uc2VcbiAgICAgICAgICBhZ2VudHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgJiYgdHlwZW9mIHJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIHdyYXBwZWQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICAgIGNvbnN0IGRhdGFPYmogPSByZXNwb25zZS5kYXRhIGFzIGFueTtcbiAgICAgICAgICBpZiAoZGF0YU9iai5hZ2VudHMgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmFnZW50cykpIHtcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZvcm1hdDoge2FnZW50czogWy4uLl19XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmFnZW50cztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBhZ2VudHMgYXJyYXkgaW4gZnVsbC10YWItdmlldywgdXNpbmcgcmVzcG9uc2UuZGF0YS5hZ2VudHMnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRhdGFPYmouZGF0YSAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouZGF0YSkpIHtcbiAgICAgICAgICAgIC8vIFJlc3BvbnNlIGZvcm1hdDoge2RhdGE6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5kYXRhO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kIG5lc3RlZCBkYXRhIGluIGZ1bGwtdGFiLXZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuZGF0YScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1ZhdWx0UGlsb3Q6IFVuZXhwZWN0ZWQgcmVzcG9uc2UgZm9ybWF0OicsIHR5cGVvZiByZXNwb25zZS5kYXRhLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERpc3BsYXkgYWdlbnQgaW5mb3JtYXRpb25cbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IGFnZW50cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUFnZW50cyA9IGFnZW50cy5maWx0ZXIoKGFnZW50OiBhbnkpID0+IGFnZW50LmFjdGl2ZSkubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgJHthY3RpdmVBZ2VudHN9LyR7YWdlbnRDb3VudH0gYWN0aXZlYCB9KTtcbiAgICAgICAgXG4gICAgICAgIGFnZW50cy5mb3JFYWNoKChhZ2VudDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgYWdlbnRFbCA9IGFnZW50SW5mby5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWl0ZW0nIH0pO1xuICAgICAgICAgIGFnZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGFnZW50Lm5hbWUgfSk7XG4gICAgICAgICAgYWdlbnRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBhZ2VudC5hY3RpdmUgPyAn8J+foicgOiAn8J+UtCcsXG4gICAgICAgICAgICBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50cyBpbiBmdWxsIHRhYiB2aWV3OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFjdGl2aXR5RmVlZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgYWN0aXZpdGllcyA9IFtcbiAgICAgIHsgdGltZTogJ0p1c3Qgbm93JywgYWN0aXZpdHk6ICdWYXVsdFBpbG90IHN0YXJ0ZWQnIH0sXG4gICAgICB7IHRpbWU6ICc1IG1pbiBhZ28nLCBhY3Rpdml0eTogJ0Nvbm5lY3Rpb24gZXN0YWJsaXNoZWQnIH0sXG4gICAgICB7IHRpbWU6ICcxIGhvdXIgYWdvJywgYWN0aXZpdHk6ICdMYXN0IHZhdWx0IGFuYWx5c2lzJyB9XG4gICAgXTtcblxuICAgIGFjdGl2aXRpZXMuZm9yRWFjaChhY3Rpdml0eSA9PiB7XG4gICAgICBjb25zdCBhY3Rpdml0eUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aXZpdHktaXRlbScgfSk7XG4gICAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGFjdGl2aXR5LmFjdGl2aXR5IH0pO1xuICAgICAgYWN0aXZpdHlFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhY3Rpdml0eS50aW1lLCBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXR5LXRpbWUnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRGdWxsVGFiU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtZnVsbC10YWItc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LWZ1bGwtdGFiLXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAvKiBFbnN1cmUgdGhlIGZ1bGwgdGFiIHZpZXcgZmlsbHMgYXZhaWxhYmxlIHNwYWNlICovXG4gICAgICAgIC53b3Jrc3BhY2UtbGVhZi1jb250ZW50W2RhdGEtdHlwZT1cInZhdWx0cGlsb3QtZnVsbC10YWItdmlld1wiXSB7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXcge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWFpbi1sYXlvdXQge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBnYXA6IDFweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1sZWZ0LXNpZGViYXIge1xuICAgICAgICAgIHdpZHRoOiAyNTBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tYWluLWNvbnRlbnQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yaWdodC1zaWRlYmFyIHtcbiAgICAgICAgICB3aWR0aDogMjUwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc2lkZWJhci1oZWFkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLW5hdiB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItYnV0dG9uIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItYnV0dG9uLmFjdGl2ZSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXRhYi1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAwO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAvKiBTZWN0aW9ucyBqdXN0IGZsZXgtZ3JvdyBhbmQgaG9sZCB0aGVpciBjaGlsZHJlbiAqL1xuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlY3Rpb24sXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24sXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lOyAgICAgICAgICAgLyogaGlkZGVuIGJ5IGRlZmF1bHQgKi9cbiAgICAgICAgICBmbGV4OiAxIDEgMDsgICAgICAgICAgICAgLyogZmxleC1ncm93LCBmbGV4LXNocmluaywgYmFzZSAwICovXG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBtaW4taGVpZ2h0OiAwOyAgICAgICAgICAgLyogYWxsb3cgY2hpbGRyZW4gdG8gc2hyaW5rL3Njcm9sbCAqL1xuICAgICAgICB9XG5cbiAgICAgICAgLyogQWN0aXZlIHNlY3Rpb24gc2hvd3MgYW5kIGZsZXhlcyAqL1xuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlY3Rpb24uYWN0aXZlLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLmFjdGl2ZSxcbiAgICAgICAgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24uYWN0aXZlIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4OyAgICAgICAgICAgLyogc2hvdyAmIGZsZXggd2hlbiBhY3RpdmUgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENvbnRlbnQgcGFuZWxzIGhhbmRsZSB0aGUgc2Nyb2xsaW5nICovXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGVudCxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctY29udGVudCxcbiAgICAgICAgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLWNvbnRlbnQge1xuICAgICAgICAgIGZsZXg6IDEgMSAwOyAgICAgICAgICAgICAvKiBmaWxsIHJlbWFpbmluZyBzcGFjZSAqL1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7ICAgICAgICAgICAvKiBjcml0aWNhbCB0byBhbGxvdyBvdmVyZmxvdyAqL1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87ICAgICAgICAvKiBub3cgKnRoaXMqIGNvbnRhaW5lciBzY3JvbGxzICovXG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGtlZXAgc3BlY2lhbCBjaGF0IGdhcHMgKi9cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1jb250ZW50IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGlzdG9yeSB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdGV4dGFyZWEge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1heC13aWR0aDogODAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS51c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLmFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLnRoaW5raW5nIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS5lcnJvciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGVhZGVyLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGVhZGVyIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1oZWFkZXIgaDMge1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctY2FyZDpob3ZlciB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaWNvbiB7XG4gICAgICAgICAgZm9udC1zaXplOiAzMnB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1ydW4tYnV0dG9uIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IHN0YXJ0O1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0LWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1jYXJkOmhvdmVyIHtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlciB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWNlbnQtZmlsZSB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVjZW50LWZpbGU6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdHktaXRlbSB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDZweCAwO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdHktdGltZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgICAgIH1cbiAgICAgICAgLyogSW5oZXJpdCBzdHlsZXMgZnJvbSBvcmlnaW5hbCB2aWV3ICovXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyBoMyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDRweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1lcnJvcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtaXRlbSB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LXZhbHVlIHtcbiAgICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzXG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gR2xvYmFsIGFwcCBpbnN0YW5jZSAtIHdpbGwgYmUgc2V0IGJ5IHRoZSBtYWluIHBsdWdpblxuZXhwb3J0IGxldCBhcHA6IEFwcDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldEFwcChhcHBJbnN0YW5jZTogQXBwKSB7XG4gIGFwcCA9IGFwcEluc3RhbmNlO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGNvbnRlbnQgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgbWFya2Rvd24gZmlsZVxuICogQHJldHVybnMgVGhlIG1hcmtkb3duIGNvbnRlbnQgKHRydW5jYXRlZCB0byA4MDAwIGNoYXJzKSBvciBudWxsIGlmIG5vIGZpbGUgaXMgYWN0aXZlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVNYXJrZG93bigpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICBpZiAoIWZpbGUpIHJldHVybiBudWxsO1xuICBcbiAgLy8gTGFyZ2Ugbm90ZXM/IFNuaXAgdG8gODAwMCBjaGFycyB0byBrZWVwIHRva2VucyByZWFzb25hYmxlXG4gIGNvbnN0IHRleHQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgcmV0dXJuIHRleHQuc2xpY2UoMCwgOF8wMDApO1xufVxuIiwiaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgQ2hhdE1lc3NhZ2UsIEludGVudCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgZ2V0QWN0aXZlTWFya2Rvd24gfSBmcm9tICcuL3ZhdWx0LXV0aWxzJztcblxuZXhwb3J0IGNsYXNzIENoYXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGNoYXRDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpbnB1dENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIG1lc3NhZ2VzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpbnB1dEVsITogSFRNTElucHV0RWxlbWVudDtcbiAgcHJpdmF0ZSBzZW5kQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgY3VycmVudENvbnZlcnNhdGlvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHRwaWxvdC1jaGF0LW1vZGFsJyk7XG5cbiAgICAvLyBNb2RhbCBoZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QgQ2hhdCcgfSk7XG4gICAgXG4gICAgY29uc3QgdG9vbGJhckVsID0gaGVhZGVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXRvb2xiYXInIH0pO1xuICAgIFxuICAgIC8vIEFkZCBpbmZvIGFib3V0IGF1dG9tYXRpYyBtb2RlIGRldGVjdGlvblxuICAgIGNvbnN0IGF1dG9Nb2RlSW5mbyA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYXV0by1tb2RlLWluZm8nLFxuICAgICAgdGV4dDogJ+KaoSBBdXRvbWF0aWMgbW9kZSBkZXRlY3Rpb24gZW5hYmxlZCdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDbGVhciBjaGF0IGJ1dHRvblxuICAgIGNvbnN0IGNsZWFyQnRuID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ0NsZWFyIENoYXQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBjbGVhckJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbGVhckNoYXQoKTtcblxuICAgIC8vIEFnZW50IHNlbGVjdG9yICh3aWxsIGJlIHBvcHVsYXRlZCB3aGVuIGFnZW50cyBhcmUgbG9hZGVkKVxuICAgIGNvbnN0IGFnZW50U2VsZWN0ID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JyB9KTtcbiAgICBhZ2VudFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB0ZXh0OiAnQXV0by1zZWxlY3QgQWdlbnQnLCB2YWx1ZTogJycgfSk7XG4gICAgdGhpcy5sb2FkQWdlbnRzKGFnZW50U2VsZWN0KTtcblxuICAgIC8vIENoYXQgY29udGFpbmVyXG4gICAgdGhpcy5jaGF0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1jb250YWluZXInIH0pO1xuICAgIFxuICAgIC8vIE1lc3NhZ2VzIGFyZWFcbiAgICB0aGlzLm1lc3NhZ2VzRWwgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2VzJyB9KTtcbiAgICBcbiAgICAvLyBJbnB1dCBjb250YWluZXJcbiAgICB0aGlzLmlucHV0Q29udGFpbmVyID0gdGhpcy5jaGF0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1pbnB1dC1jb250YWluZXInIH0pO1xuICAgIFxuICAgIHRoaXMuaW5wdXRFbCA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdBc2sgYSBxdWVzdGlvbiBvciBkZXNjcmliZSB3aGF0IHlvdSB3YW50IHRvIGFjY29tcGxpc2guLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZW5kQnV0dG9uID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1NlbmQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LXNlbmQtYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZW5kQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNlbmRNZXNzYWdlKCk7XG5cbiAgICAvLyBGb2N1cyB0aGUgaW5wdXRcbiAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcblxuICAgIC8vIExvYWQgY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgICB0aGlzLmxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCk7XG5cbiAgICAvLyBBZGQgc3R5bGVzXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50cyhzZWxlY3RFbDogSFRNTFNlbGVjdEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IExvYWRpbmcgYWdlbnRzLi4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBnZXRBZ2VudHMgcmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiByZXNwb25zZS5kYXRhIHR5cGU6JywgdHlwZW9mIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogcmVzcG9uc2UuZGF0YSBjb250ZW50OicsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICBcbiAgICAgICAgbGV0IGFnZW50czogYW55W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGRhdGEgaXMgZGlyZWN0bHkgYW4gYXJyYXlcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YSkpIHtcbiAgICAgICAgICBhZ2VudHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9IFxuICAgICAgICAvLyBDaGVjayBpZiBkYXRhIGhhcyBhbiAnYWdlbnRzJyBwcm9wZXJ0eSB3aXRoIGFuIGFycmF5XG4gICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEgJiYgdHlwZW9mIHJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgY29uc3QgZGF0YU9iaiA9IHJlc3BvbnNlLmRhdGEgYXMgYW55O1xuICAgICAgICAgIGlmIChkYXRhT2JqLmFnZW50cyAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouYWdlbnRzKSkge1xuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5hZ2VudHM7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhT2JqLmRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoYWdlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQnLCBhZ2VudHMubGVuZ3RoLCAnYWdlbnRzJyk7XG4gICAgICAgICAgYWdlbnRzLmZvckVhY2goYWdlbnQgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgICAgICAgdGV4dDogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgdmFsdWU6IGFnZW50LmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTm8gYWdlbnRzIGZvdW5kIGluIHJlc3BvbnNlJyk7XG4gICAgICAgICAgLy8gQWRkIGEgZGVmYXVsdCBvcHRpb24gaW5kaWNhdGluZyBubyBhZ2VudHNcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICAgICAgdGV4dDogJ05vIGFnZW50cyBhdmFpbGFibGUnLFxuICAgICAgICAgICAgdmFsdWU6ICcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzOiBBUEkgcmV0dXJuZWQgZXJyb3Igb3Igbm8gZGF0YTonLCByZXNwb25zZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50czonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSgpIHtcbiAgICAvLyBPbmx5IHRyeSB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGlmIHdlIGhhdmUgYSBjb252ZXJzYXRpb24gSURcbiAgICBpZiAodGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENvbnZlcnNhdGlvbkhpc3RvcnkodGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZXM7XG4gICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcygpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIElmIG5vIGNvbnZlcnNhdGlvbiBJRCwgc3RhcnQgZnJlc2ggKG5vIGhpc3RvcnkgdG8gbG9hZClcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZE1lc3NhZ2UoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuaW5wdXRFbC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm47XG5cbiAgICAvLyBEaXNhYmxlIGlucHV0IHdoaWxlIHByb2Nlc3NpbmdcbiAgICB0aGlzLmlucHV0RWwuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2VuZEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlbmRpbmcuLi4nO1xuXG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZSB0byBVSVxuICAgIHRoaXMuYWRkTWVzc2FnZSgndXNlcicsIG1lc3NhZ2UpO1xuICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9ICcnO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOKUgOKUgCBmZXRjaCBjb250ZXh0ICYgaW50ZW50IGluIHBhcmFsbGVsIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgICAgY29uc3QgW2NvbnRleHQsIGludGVudFJlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGdldEFjdGl2ZU1hcmtkb3duKCksICAgICAgICAgIC8vIHJldHVybnMgc3RyaW5nIHwgbnVsbFxuICAgICAgICB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY2xhc3NpZnlJbnRlbnQobWVzc2FnZSkgIC8vIFBPU1QgL2ludGVsbGlnZW5jZS9wYXJzZVxuICAgICAgXSk7XG5cbiAgICAgIC8vIGJ1aWxkIGEgZ2VuZXJpYyBwYXlsb2FkOyBjb250ZXh0IG1heSBiZSBudWxsL2VtcHR5XG4gICAgICBjb25zdCBwYXlsb2FkID0geyBtZXNzYWdlLCBjb250ZXh0IH07XG5cbiAgICAgIC8vIFNob3cgaW50ZW50IGRldGVjdGlvbiBpbiBVSSBpZiBkZWJ1ZyBtb2RlIGlzIGVuYWJsZWRcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcpIHtcbiAgICAgICAgdGhpcy5zaG93SW50ZW50RGVidWcoaW50ZW50UmVzLmludGVudCk7XG4gICAgICB9XG5cbiAgICAgIGxldCByZXNwb25zZTtcbiAgICAgIFxuICAgICAgaWYgKGludGVudFJlcy5pbnRlbnQgPT09IFwiYWdlbnRcIikge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5ydW5Xb3JrZmxvdyhwYXlsb2FkKTsgICAgIC8vIFBPU1QgL3dvcmtmbG93XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBg4pqZ77iPIEFnZW50IE1vZGUgKGF1dG8tZGV0ZWN0ZWQpXFxuXFxuJHtyZXNwb25zZS5kYXRhLnJlc3VsdH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvciBpbiBhZ2VudCBtb2RlOiAke3Jlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2V0IHJlc3BvbnNlJ31gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2VuZENoYXQocGF5bG9hZCwge1xuICAgICAgICAgIGNvbnZlcnNhdGlvbl9pZDogdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgIGFnZW50X2lkOiB0aGlzLmdldFNlbGVjdGVkQWdlbnQoKVxuICAgICAgICB9KTsgICAgICAgIC8vIFBPU1QgL2NoYXRcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCA9IHJlc3BvbnNlLmRhdGEuY29udmVyc2F0aW9uX2lkO1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgcmVzcG9uc2UuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7cmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UnfWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFdhcm4gdXNlciBpZiB0aGV5IGhhZCBjb250ZXh0IGRpc2FibGVkXG4gICAgICBpZiAoIWNvbnRleHQ/Lmxlbmd0aCkge1xuICAgICAgICBuZXcgTm90aWNlKFwi4pqg77iPIE5vIHZhdWx0IGNvbnRlbnQgd2FzIHNlbnQ7IHJlcGxpZXMgbWF5IGJlIGdlbmVyaWMuXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gUmUtZW5hYmxlIGlucHV0XG4gICAgICB0aGlzLmlucHV0RWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlbmQnO1xuICAgICAgdGhpcy5pbnB1dEVsLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRTZWxlY3RlZEFnZW50KCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3Qgc2VsZWN0RWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcudmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICByZXR1cm4gc2VsZWN0RWw/LnZhbHVlIHx8IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgYWRkTWVzc2FnZShyb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgbWVzc2FnZTogQ2hhdE1lc3NhZ2UgPSB7XG4gICAgICByb2xlLFxuICAgICAgY29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICB0aGlzLnJlbmRlck1lc3NhZ2UobWVzc2FnZSk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcygpIHtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuZW1wdHkoKTtcbiAgICB0aGlzLm1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB0aGlzLnJlbmRlck1lc3NhZ2UobWVzc2FnZSkpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSkge1xuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMubWVzc2FnZXNFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiBgdmF1bHRwaWxvdC1tZXNzYWdlIHZhdWx0cGlsb3QtbWVzc2FnZS0ke21lc3NhZ2Uucm9sZX1gXG4gICAgfSk7XG5cbiAgICBjb25zdCByb2xlRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlJyxcbiAgICAgIHRleHQ6IG1lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInID8gJ1lvdScgOiAnVmF1bHRQaWxvdCdcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLWNvbnRlbnQnXG4gICAgfSk7XG5cbiAgICAvLyBTaW1wbGUgbWFya2Rvd24gcmVuZGVyaW5nIGZvciBiYXNpYyBmb3JtYXR0aW5nXG4gICAgY29udGVudEVsLmlubmVySFRNTCA9IHRoaXMucmVuZGVyTWFya2Rvd24obWVzc2FnZS5jb250ZW50KTtcblxuICAgIGlmIChtZXNzYWdlLnRpbWVzdGFtcCkge1xuICAgICAgY29uc3QgdGltZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS10aW1lJyxcbiAgICAgICAgdGV4dDogbmV3IERhdGUobWVzc2FnZS50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+JylcbiAgICAgIC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKVxuICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuICB9XG5cbiAgcHJpdmF0ZSBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0VsLnNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJDaGF0KCkge1xuICAgIHRoaXMubWVzc2FnZXMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCA9IG51bGw7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgbmV3IE5vdGljZSgnQ2hhdCBjbGVhcmVkJyk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LWNoYXQtc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LWNoYXQtc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbW9kYWwge1xuICAgICAgICAgIHdpZHRoOiA2MDBweDtcbiAgICAgICAgICBoZWlnaHQ6IDcwMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGVhZGVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXRvb2xiYXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWF1dG8tbW9kZS1pbmZvIHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zZWxlY3Qge1xuICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDgwcHgpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZSB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXVzZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtYXNzaXN0YW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdGltZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc2VuZC1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1pbnRlbnQtZGVidWcge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2Vzcyk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXItaG92ZXIpO1xuICAgICAgICAgIGFuaW1hdGlvbjogZmFkZUluT3V0IDNzIGVhc2UtaW4tb3V0O1xuICAgICAgICB9XG4gICAgICAgIEBrZXlmcmFtZXMgZmFkZUluT3V0IHtcbiAgICAgICAgICAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7IH1cbiAgICAgICAgICAxMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH1cbiAgICAgICAgICA5MCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH1cbiAgICAgICAgICAxMDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfVxuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNob3dJbnRlbnREZWJ1ZyhpbnRlbnQ6IHN0cmluZykge1xuICAgIC8vIENyZWF0ZSBhIHN1YnRsZSBub3RpZmljYXRpb24gc2hvd2luZyB0aGUgZGV0ZWN0ZWQgaW50ZW50XG4gICAgY29uc3QgZGVidWdFbCA9IHRoaXMubWVzc2FnZXNFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1pbnRlbnQtZGVidWcnLFxuICAgICAgdGV4dDogYPCflI0gSW50ZW50IGRldGVjdGVkOiAke2ludGVudCA9PT0gJ2FnZW50JyA/ICfimpnvuI8gQWdlbnQgTW9kZScgOiAn8J+SrCBBc2sgTW9kZSd9YFxuICAgIH0pO1xuICAgIFxuICAgIC8vIEF1dG8tcmVtb3ZlIGFmdGVyIDMgc2Vjb25kc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGVidWdFbC5yZW1vdmUoKTtcbiAgICB9LCAzMDAwKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBXb3JrZmxvd1JlcXVlc3QsIFdvcmtmbG93UmVzcG9uc2UsIFdvcmtmbG93UHJvZ3Jlc3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFdvcmtmbG93TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBnb2FsSW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGNvbnRleHRJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgZXhlY3V0ZUJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIHByb2dyZXNzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcmVzdWx0c0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlzRXhlY3V0aW5nID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsJyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn4pqZ77iPIFdvcmtmbG93IEV4ZWN1dGlvbicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0RlZmluZSBhIGdvYWwgYW5kIGxldCBWYXVsdFBpbG90IGNyZWF0ZSBhbmQgZXhlY3V0ZSBhIGNvbXByZWhlbnNpdmUgd29ya2Zsb3cgdG8gYWNoaWV2ZSBpdC4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbidcbiAgICB9KTtcblxuICAgIC8vIEZvcm1cbiAgICBjb25zdCBmb3JtRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1mb3JtJyB9KTtcblxuICAgIC8vIEdvYWwgaW5wdXRcbiAgICBjb25zdCBnb2FsQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgZ29hbENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0dvYWwgKicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5nb2FsSW5wdXQgPSBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnZS5nLiwgXCJDcmVhdGUgYSBjb21wcmVoZW5zaXZlIHN0dWR5IHBsYW4gZm9yIG1hY2hpbmUgbGVhcm5pbmcgYmFzZWQgb24gbXkgbm90ZXNcIicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWdvYWwtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBDb250ZXh0IGlucHV0XG4gICAgY29uc3QgY29udGV4dENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdBZGRpdGlvbmFsIENvbnRleHQgKG9wdGlvbmFsKScsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0SW5wdXQgPSBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIHBsYWNlaG9sZGVyOiAnUHJvdmlkZSBhbnkgYWRkaXRpb25hbCBjb250ZXh0LCBjb25zdHJhaW50cywgb3IgcmVxdWlyZW1lbnRzLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIFZhdWx0IGNvbnRlbnQgb3B0aW9uc1xuICAgIGNvbnN0IG9wdGlvbnNDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnVmF1bHQgSW50ZWdyYXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFjdGl2ZUZpbGUgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWN0aXZlRmlsZUNoZWNrYm94ID0gaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhY3RpdmUgZmlsZSBjb250ZW50JyB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBbGxGaWxlcyA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhbGxGaWxlc0NoZWNrYm94ID0gaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFsbCB2YXVsdCBmaWxlcyAobWF5IHRha2UgbG9uZ2VyKScgfSk7XG5cbiAgICAvLyBFeGVjdXRlIGJ1dHRvblxuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbiA9IGZvcm1FbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0V4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5leGVjdXRlV29ya2Zsb3coYWN0aXZlRmlsZUNoZWNrYm94LmNoZWNrZWQsIGFsbEZpbGVzQ2hlY2tib3guY2hlY2tlZCk7XG5cbiAgICAvLyBQcm9ncmVzcyBjb250YWluZXJcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gUmVzdWx0cyBjb250YWluZXJcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gRm9jdXMgdGhlIGdvYWwgaW5wdXRcbiAgICB0aGlzLmdvYWxJbnB1dC5mb2N1cygpO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KGluY2x1ZGVBY3RpdmVGaWxlOiBib29sZWFuLCBpbmNsdWRlQWxsRmlsZXM6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBnb2FsID0gdGhpcy5nb2FsSW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGlmICghZ29hbCkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgZ29hbCBmb3IgdGhlIHdvcmtmbG93Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pc0V4ZWN1dGluZyA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0aW5nLi4uJztcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFByZXBhcmUgdmF1bHQgY29udGVudFxuICAgICAgbGV0IHZhdWx0Q29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICBpZiAoaW5jbHVkZUFjdGl2ZUZpbGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHthY3RpdmVGaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbmNsdWRlQWxsRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5zbGljZSgwLCAyMCkpIHsgLy8gTGltaXQgdG8gZmlyc3QgMjAgZmlsZXMgdG8gYXZvaWQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHdvcmtmbG93IHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCA9IHtcbiAgICAgICAgZ29hbCxcbiAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0SW5wdXQudmFsdWUudHJpbSgpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmF1bHRfY29udGVudDogdmF1bHRDb250ZW50IHx8IHVuZGVmaW5lZFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgV2ViU29ja2V0IGxpc3RlbmVyIGZvciBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICBpZiAodGhpcy5wbHVnaW4uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSkge1xuICAgICAgICAvLyBMaXN0ZW4gZm9yIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgdGhpcy5zZXR1cFByb2dyZXNzTGlzdGVuZXIoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQhLmV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRpc3BsYXlSZXN1bHRzKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdXb3JrZmxvdyBleGVjdXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IoZXJyb3JNc2cpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzRXhlY3V0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRlIFdvcmtmbG93JztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNvbm5lY3RlZCB0byB0aGUgV2ViU29ja2V0IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCBzaW11bGF0ZSBwcm9ncmVzc1xuICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdBbmFseXppbmcgZ29hbCBhbmQgY29udGV4dC4uLicpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ1BsYW5uaW5nIHdvcmtmbG93IHN0ZXBzLi4uJyk7XG4gICAgfSwgMTAwMCk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnRXhlY3V0aW5nIHdvcmtmbG93Li4uJyk7XG4gICAgfSwgMjAwMCk7XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlQcm9ncmVzcyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLWl0ZW1cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICA8c3Bhbj4ke21lc3NhZ2V9PC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGlzcGxheVJlc3VsdHMod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcmVzdWx0c1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn4pyFIFdvcmtmbG93IENvbXBsZXRlZCcgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYEV4ZWN1dGlvbiB0aW1lOiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNgLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSdcbiAgICB9KTtcblxuICAgIC8vIE1haW4gcmVzdWx0XG4gICAgY29uc3QgcmVzdWx0RWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCcgfSk7XG4gICAgcmVzdWx0RWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmVzdWx0JyB9KTtcbiAgICBjb25zdCByZXN1bHRDb250ZW50RWwgPSByZXN1bHRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC10ZXh0JyB9KTtcbiAgICByZXN1bHRDb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bih3b3JrZmxvdy5yZXN1bHQpO1xuXG4gICAgLy8gU3RlcHMgdGFrZW5cbiAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3RlcHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcicgfSk7XG4gICAgICBzdGVwc0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1N0ZXBzIFRha2VuJyB9KTtcbiAgICAgIGNvbnN0IHN0ZXBzTGlzdCA9IHN0ZXBzRWwuY3JlYXRlRWwoJ29sJywgeyBjbHM6ICd2YXVsdHBpbG90LXN0ZXBzLWxpc3QnIH0pO1xuICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaChzdGVwID0+IHtcbiAgICAgICAgc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogc3RlcCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFydGlmYWN0c1xuICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGFydGlmYWN0c0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lcicgfSk7XG4gICAgICBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdHZW5lcmF0ZWQgQXJ0aWZhY3RzJyB9KTtcbiAgICAgIFxuICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goKGFydGlmYWN0LCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBhcnRpZmFjdEVsID0gYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdCcgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiBhcnRpZmFjdC50aXRsZSB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgdGV4dDogYFR5cGU6ICR7YXJ0aWZhY3QudHlwZX1gLFxuICAgICAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYXJ0aWZhY3RFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdTYXZlIGFzIE5vdGUnLFxuICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdCwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBhbGwgYnV0dG9uXG4gICAgY29uc3QgYWN0aW9uc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zJyB9KTtcbiAgICBjb25zdCBzYXZlQWxsQnV0dG9uID0gYWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2F2ZSBDb21wbGV0ZSBSZXN1bHRzIGFzIE5vdGUnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQWxsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3cpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3Q6IGFueSwgaW5kZXg6IG51bWJlcikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGAke2FydGlmYWN0LnRpdGxlLnJlcGxhY2UoL1teYS16QS1aMC05XFxzXS9nLCAnJyl9Lm1kYDtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1gO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQXJ0aWZhY3Qgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgYXJ0aWZhY3Q6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICBcbiAgICAgIGxldCBjb250ZW50ID0gYCMgVmF1bHRQaWxvdCBXb3JrZmxvdyBSZXN1bHRzXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqR29hbDoqKiAke3RoaXMuZ29hbElucHV0LnZhbHVlfVxcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkV4ZWN1dGlvbiBUaW1lOioqICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAjIyBSZXN1bHRcXG5cXG4ke3dvcmtmbG93LnJlc3VsdH1cXG5cXG5gO1xuICAgICAgXG4gICAgICBpZiAod29ya2Zsb3cuc3RlcHNfdGFrZW4gJiYgd29ya2Zsb3cuc3RlcHNfdGFrZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBTdGVwcyBUYWtlblxcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgJHtpbmRleCArIDF9LiAke3N0ZXB9XFxuYDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbnQgKz0gJ1xcbic7XG4gICAgICB9XG5cbiAgICAgIGlmICh3b3JrZmxvdy5hcnRpZmFjdHMgJiYgd29ya2Zsb3cuYXJ0aWZhY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgR2VuZXJhdGVkIEFydGlmYWN0c1xcblxcbmA7XG4gICAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKGFydGlmYWN0ID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAjIyMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBDb21wbGV0ZSByZXN1bHRzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIHJlc3VsdHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5RXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtZXJyb3JcIj5cbiAgICAgICAgPGgzPuKdjCBXb3JrZmxvdyBGYWlsZWQ8L2gzPlxuICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwge1xuICAgICAgICAgIHdpZHRoOiA3MDBweDtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiA4MHZoO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24ge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1ncm91cCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWdvYWwtaW5wdXQsXG4gICAgICAgIC52YXVsdHBpbG90LWNvbnRleHQtaW5wdXQge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsIGlucHV0IHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3Mtc3Bpbm5lciB7XG4gICAgICAgICAgd2lkdGg6IDE2cHg7XG4gICAgICAgICAgaGVpZ2h0OiAxNnB4O1xuICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICB9XG4gICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC1jb250ZW50IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LXRleHQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXIsXG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtbGlzdCB7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0IHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXJyb3Ige1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFxuICBBUElSZXNwb25zZSwgXG4gIENoYXRSZXF1ZXN0LCBcbiAgQ2hhdFJlc3BvbnNlLCBcbiAgQ29udmVyc2F0aW9uSGlzdG9yeSxcbiAgQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QsXG4gIENvcGlsb3RSZXF1ZXN0LCBcbiAgQ29waWxvdFJlc3BvbnNlLFxuICBXb3JrZmxvd1JlcXVlc3QsXG4gIFdvcmtmbG93UmVzcG9uc2UsXG4gIEFnZW50LFxuICBBZ2VudENyZWF0ZVJlcXVlc3QsXG4gIEFnZW50RXhlY3V0ZVJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlcXVlc3QsXG4gIFZhdWx0Q29udGV4dFJlc3BvbnNlLFxuICBUYXNrUGxhbm5pbmdSZXF1ZXN0LFxuICBUYXNrUGxhbm5pbmdSZXNwb25zZSxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0LFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlLFxuICBNZW1vcnlVcGRhdGVSZXF1ZXN0LFxuICBXZWJTb2NrZXRNZXNzYWdlLFxuICBFcnJvclJlc3BvbnNlLFxuICBJbnRlbnQsXG4gIEludGVudFJlc3VsdCxcbiAgSW50ZW50RGVidWdcbn0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBFdm9BZ2VudFhDbGllbnQge1xuICBwcml2YXRlIGJhc2VVcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBhcGlLZXk/OiBzdHJpbmc7XG4gIHByaXZhdGUgd2Vic29ja2V0PzogV2ViU29ja2V0O1xuICBwcml2YXRlIHdzQ2FsbGJhY2tzOiBNYXA8c3RyaW5nLCAoZGF0YTogYW55KSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTsgLy8gUmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0PFQ+KFxuICAgIGVuZHBvaW50OiBzdHJpbmcsIFxuICAgIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge31cbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZTxUPj4ge1xuICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0ke2VuZHBvaW50fWA7XG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgLi4uKG9wdGlvbnMuaGVhZGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHx8IHt9KSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEhhbmRsZSBub24tSlNPTiByZXNwb25zZXMgZ3JhY2VmdWxseVxuICAgICAgbGV0IGRhdGE7XG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgIGlmIChjb250ZW50VHlwZSAmJiBjb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhLmVycm9yIFxuICAgICAgICAgID8gZGF0YS5lcnJvciBcbiAgICAgICAgICA6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWA7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmVycm9yKGBBUEkgRXJyb3IgWyR7cmVzcG9uc2Uuc3RhdHVzfV06YCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyB7IG1lc3NhZ2U6IGRhdGEgfSBhcyBUIDogZGF0YSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBSZXF1ZXN0IEVycm9yOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCcsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlYWx0aCBjaGVja1xuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmc7IHZlcnNpb246IHN0cmluZyB9Pj4ge1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIGhlYWx0aCBjaGVjayB0byAke3RoaXMuYmFzZVVybH0vc3RhdHVzYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4oJy9zdGF0dXMnLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBIZWFsdGggY2hlY2sgcmVzdWx0OicsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIEFsdGVybmF0aXZlIGhlYWx0aCBjaGVjayBtZXRob2QgaWYgdGhlIG1haW4gb25lIGZhaWxzXG4gIGFzeW5jIHNpbXBsZUhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZyB9Pj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L3N0YXR1c2A7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdIRUFEJyxcbiAgICAgICAgbW9kZTogJ2NvcnMnLFxuICAgICAgICBjcmVkZW50aWFsczogJ29taXQnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5vayB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQwNSkgeyAvLyA0MDUgbWVhbnMgc2VydmVyIGlzIHVwIGJ1dCBkb2Vzbid0IHN1cHBvcnQgSEVBRFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdvaycgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWBcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnQ29ubmVjdGlvbiBmYWlsZWQnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIENoYXQgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBjaGF0KHJlcXVlc3Q6IENoYXRSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDaGF0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY2hhdCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRDb252ZXJzYXRpb25IaXN0b3J5KGNvbnZlcnNhdGlvbklkOiBzdHJpbmcsIGxpbWl0OiBudW1iZXIgPSA1MCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29udmVyc2F0aW9uSGlzdG9yeT4+IHtcbiAgICBjb25zdCByZXF1ZXN0Qm9keTogQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QgPSB7XG4gICAgICBjb252ZXJzYXRpb25faWQ6IGNvbnZlcnNhdGlvbklkLFxuICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgaW5jbHVkZV9tZXNzYWdlczogdHJ1ZVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9uL2hpc3RvcnknLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KGAvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQ29waWxvdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKHJlcXVlc3Q6IENvcGlsb3RSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDb3BpbG90UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29waWxvdC9jb21wbGV0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBXb3JrZmxvdyBleGVjdXRpb25cbiAgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8V29ya2Zsb3dSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi93b3JrZmxvdycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBOZXcgdW5pZmllZCBBUEkgbWV0aG9kcyBmb3Igc2ltcGxpZmllZCBjb250ZXh0IHBhY2thZ2luZ1xuICBhc3luYyBydW5Xb3JrZmxvdyhwYXlsb2FkOiB7IG1lc3NhZ2U6IHN0cmluZzsgY29udGV4dDogc3RyaW5nIHwgbnVsbCB9KTogUHJvbWlzZTxBUElSZXNwb25zZTxXb3JrZmxvd1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3dvcmtmbG93Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGdvYWw6IHBheWxvYWQubWVzc2FnZSxcbiAgICAgICAgY29udGV4dDogcGF5bG9hZC5jb250ZXh0IHx8IHVuZGVmaW5lZFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzZW5kQ2hhdChwYXlsb2FkOiB7IG1lc3NhZ2U6IHN0cmluZzsgY29udGV4dDogc3RyaW5nIHwgbnVsbCB9LCBvcHRpb25zPzogeyBjb252ZXJzYXRpb25faWQ/OiBzdHJpbmc7IGFnZW50X2lkPzogc3RyaW5nIH0pOiBQcm9taXNlPEFQSVJlc3BvbnNlPENoYXRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jaGF0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1lc3NhZ2U6IHBheWxvYWQubWVzc2FnZSxcbiAgICAgICAgdmF1bHRfY29udGV4dDogcGF5bG9hZC5jb250ZXh0IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgY29udmVyc2F0aW9uX2lkOiBvcHRpb25zPy5jb252ZXJzYXRpb25faWQsXG4gICAgICAgIGFnZW50X2lkOiBvcHRpb25zPy5hZ2VudF9pZCxcbiAgICAgICAgbW9kZTogJ2FzaydcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQWdlbnQgbWFuYWdlbWVudFxuICBhc3luYyBnZXRBZ2VudHMoKTogUHJvbWlzZTxBUElSZXNwb25zZTxBZ2VudFtdPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cycpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQWdlbnQocmVxdWVzdDogQWdlbnRDcmVhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxBZ2VudD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudHMvY3JlYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVBZ2VudChyZXF1ZXN0OiBBZ2VudEV4ZWN1dGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxhbnk+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnQvZXhlY3V0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBWYXVsdCBhbmFseXNpc1xuICBhc3luYyBhbmFseXplVmF1bHRDb250ZXh0KHJlcXVlc3Q6IFZhdWx0Q29udGV4dFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFZhdWx0Q29udGV4dFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2NvbnRleHQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVGFzayBwbGFubmluZ1xuICBhc3luYyBwbGFuVGFza3MocmVxdWVzdDogVGFza1BsYW5uaW5nUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VGFza1BsYW5uaW5nUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vcGxhbm5pbmcvdGFza3MnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSW50ZWxsaWdlbmNlIHBhcnNpbmdcbiAgYXN5bmMgcGFyc2VJbnRlbGxpZ2VuY2UocmVxdWVzdDogSW50ZWxsaWdlbmNlUGFyc2VSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxJbnRlbGxpZ2VuY2VQYXJzZVJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbnQgY2xhc3NpZmljYXRpb25cbiAgYXN5bmMgY2xhc3NpZnlJbnRlbnQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxJbnRlbnRSZXN1bHQ+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8SW50ZW50UmVzdWx0PignL2FwaS9vYnNpZGlhbi9pbnRlbGxpZ2VuY2UvcGFyc2UnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZSB9KSxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gJ2FzaycgbW9kZSBpZiBjbGFzc2lmaWNhdGlvbiBmYWlsc1xuICAgIHJldHVybiB7IGludGVudDogJ2FzaycsIGNvbmZpZGVuY2U6IDAuNSB9O1xuICB9XG5cbiAgLy8gT3B0aW9uYWw6IERlYnVnIGludGVudCBjbGFzc2lmaWNhdGlvblxuICBhc3luYyBleHBsYWluSW50ZW50KG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8SW50ZW50RGVidWc+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8SW50ZW50RGVidWc+KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlLCBpbmNsdWRlX2RlYnVnOiB0cnVlIH0pLFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayBkZWJ1ZyBpbmZvXG4gICAgcmV0dXJuIHsgXG4gICAgICBpbnRlbnQ6ICdhc2snLCBcbiAgICAgIGNvbmZpZGVuY2U6IDAuNSwgXG4gICAgICByZWFzb25pbmc6ICdDbGFzc2lmaWNhdGlvbiBmYWlsZWQsIGRlZmF1bHRpbmcgdG8gYXNrIG1vZGUnIFxuICAgIH07XG4gIH1cblxuICAvLyBNZW1vcnkgbWFuYWdlbWVudFxuICBhc3luYyB1cGRhdGVNZW1vcnkocmVxdWVzdDogTWVtb3J5VXBkYXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9tZW1vcnkvdXBkYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBmdW5jdGlvbmFsaXR5XG4gIGNvbm5lY3RXZWJTb2NrZXQoY2FsbGJhY2tzOiB7XG4gICAgb25DaGF0PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbldvcmtmbG93UHJvZ3Jlc3M/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uQ29waWxvdD86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25WYXVsdFN5bmM/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uSW50ZW50RGVidWc/OiAoZGVidWc6IEludGVudERlYnVnKSA9PiB2b2lkO1xuICAgIG9uRXJyb3I/OiAoZXJyb3I6IHN0cmluZykgPT4gdm9pZDtcbiAgICBvbkNvbm5lY3Q/OiAoKSA9PiB2b2lkO1xuICAgIG9uRGlzY29ubmVjdD86ICgpID0+IHZvaWQ7XG4gIH0pOiB2b2lkIHtcbiAgICBjb25zdCB3c1VybCA9IHRoaXMuYmFzZVVybC5yZXBsYWNlKCdodHRwJywgJ3dzJykgKyAnL3dzL29ic2lkaWFuJztcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBXZWJTb2NrZXQgY29ubmVjdGlvbiB0byAke3dzVXJsfWApO1xuICAgIFxuICAgIHRoaXMud2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCh3c1VybCk7XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IGNvbm5lY3RlZCB0byBFdm9BZ2VudFgnKTtcbiAgICAgIGNhbGxiYWNrcy5vbkNvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IFdlYlNvY2tldE1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IG1lc3NhZ2UgcmVjZWl2ZWQ6JywgbWVzc2FnZS50eXBlKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY2hhdCc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25DaGF0Py4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3dvcmtmbG93X3Byb2dyZXNzJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbldvcmtmbG93UHJvZ3Jlc3M/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY29waWxvdCc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25Db3BpbG90Py4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3ZhdWx0X3N5bmMnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uVmF1bHRTeW5jPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2ludGVudF9kZWJ1Zyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25JbnRlbnREZWJ1Zz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25FcnJvcj8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVmF1bHRQaWxvdDogRXJyb3IgcGFyc2luZyBXZWJTb2NrZXQgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4oJ0ZhaWxlZCB0byBwYXJzZSBXZWJTb2NrZXQgbWVzc2FnZScpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmNsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCBmcm9tIEV2b0FnZW50WCcsIGV2ZW50LmNvZGUsIGV2ZW50LnJlYXNvbik7XG4gICAgICBjYWxsYmFja3Mub25EaXNjb25uZWN0Py4oKTtcbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignVmF1bHRQaWxvdDogV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcbiAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4oJ1dlYlNvY2tldCBjb25uZWN0aW9uIGVycm9yJyk7XG4gICAgfTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RXZWJTb2NrZXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0KSB7XG4gICAgICB0aGlzLndlYnNvY2tldC5jbG9zZSgpO1xuICAgICAgdGhpcy53ZWJzb2NrZXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgc2VuZFdlYlNvY2tldE1lc3NhZ2UodHlwZTogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlLCBkYXRhIH0pKTtcbiAgICB9XG4gIH1cblxuICBpc1dlYlNvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy53ZWJzb2NrZXQ/LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOO1xuICB9XG59XG4iLCIvLyBUeXBlIGRlZmluaXRpb25zIGZvciB0aGUgcGxhbm5lciBmZWF0dXJlXG5leHBvcnQgaW50ZXJmYWNlIFBsYW5uZXJSZXNwb25zZSB7XG4gIHNjaGVkdWxlTWFya2Rvd246IHN0cmluZztcbiAgaGVhZGxpbmU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQbGFubmVyUmVxdWVzdCB7XG4gIG5vdGU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBGZXRjaGVzIHNjaGVkdWxlIGRhdGEgZnJvbSB0aGUgRXZvQWdlbnRYIEFQSVxuICogQHBhcmFtIG5vdGVUZXh0IC0gVGhlIGZ1bGwgdGV4dCBvZiB0aGUgYWN0aXZlIG5vdGVcbiAqIEBwYXJhbSBhcGlDbGllbnQgLSBUaGUgRXZvQWdlbnRYIEFQSSBjbGllbnQgaW5zdGFuY2VcbiAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCB0aGUgc2NoZWR1bGUgbWFya2Rvd24gYW5kIGhlYWRsaW5lXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFNjaGVkdWxlKG5vdGVUZXh0OiBzdHJpbmcsIGFwaUNsaWVudDogYW55KTogUHJvbWlzZTxQbGFubmVyUmVzcG9uc2U+IHtcbiAgY29uc29sZS5sb2coJ/CflIQgW1BsYW4gTXkgRGF5XSBTdGFydGluZyBzY2hlZHVsZSBmZXRjaC4uLicpO1xuICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIE5vdGUgdGV4dCBsZW5ndGg6Jywgbm90ZVRleHQubGVuZ3RoKTtcbiAgY29uc29sZS5sb2coJ/CflJcgW1BsYW4gTXkgRGF5XSBBUEkgY2xpZW50IHR5cGU6JywgdHlwZW9mIGFwaUNsaWVudCk7XG4gIFxuICBpZiAoIWFwaUNsaWVudCkge1xuICAgIGNvbnN0IGVycm9yID0gJ0FQSSBjbGllbnQgaXMgbnVsbCBvciB1bmRlZmluZWQnO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICB9XG5cbiAgaWYgKCFhcGlDbGllbnQucGxhblRhc2tzKSB7XG4gICAgY29uc3QgZXJyb3IgPSAnQVBJIGNsaWVudCBkb2VzIG5vdCBoYXZlIHBsYW5UYXNrcyBtZXRob2QnO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEVycm9yOicsIGVycm9yKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEF2YWlsYWJsZSBtZXRob2RzOicsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFwaUNsaWVudCkpO1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5OkIFtQbGFuIE15IERheV0gU2VuZGluZyByZXF1ZXN0IHRvIEV2b0FnZW50WC4uLicpO1xuICAgIFxuICAgIC8vIFVzZSBFdm9BZ2VudFggdGFzayBwbGFubmluZyBlbmRwb2ludCBpbnN0ZWFkIG9mIGxvY2FsIHNlcnZlclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpQ2xpZW50LnBsYW5UYXNrcyh7XG4gICAgICBnb2FsOiBgQ3JlYXRlIGEgZGFpbHkgc2NoZWR1bGUgYmFzZWQgb24gdGhpcyBub3RlIGNvbnRlbnRgLFxuICAgICAgY29udGV4dDogbm90ZVRleHQsXG4gICAgICB0aW1lZnJhbWU6ICcxIGRheSdcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5OlIFtQbGFuIE15IERheV0gUmVjZWl2ZWQgcmVzcG9uc2U6Jywge1xuICAgICAgc3VjY2VzczogcmVzcG9uc2Uuc3VjY2VzcyxcbiAgICAgIGhhc0RhdGE6ICEhcmVzcG9uc2UuZGF0YSxcbiAgICAgIGVycm9yOiByZXNwb25zZS5lcnJvclxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBSYXcgcmVzcG9uc2UgZGF0YTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLCBudWxsLCAyKSk7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBSZXNwb25zZSBkYXRhIHR5cGU6JywgdHlwZW9mIHJlc3BvbnNlLmRhdGEpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gUmVzcG9uc2UgZGF0YSBrZXlzOicsIHJlc3BvbnNlLmRhdGEgPyBPYmplY3Qua2V5cyhyZXNwb25zZS5kYXRhKSA6ICdubyBkYXRhJyk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gcmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZW5lcmF0ZSBzY2hlZHVsZSc7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBBUEkgRXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gJ05vIGRhdGEgaW4gQVBJIHJlc3BvbnNlJztcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEVycm9yOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gRnVsbCByZXNwb25zZTonLCByZXNwb25zZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIC8vIFRoZSBFdm9BZ2VudFggQVBJIHJldHVybnMgYSBuZXN0ZWQgc3RydWN0dXJlOiByZXNwb25zZS5kYXRhLmRhdGEucGxhblxuICAgIGNvbnN0IGFjdHVhbERhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEgfHwgcmVzcG9uc2UuZGF0YTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIFJlc3BvbnNlIGRhdGEgc3RydWN0dXJlOicsIHtcbiAgICAgIGhhc1BsYW46ICEhYWN0dWFsRGF0YS5wbGFuLFxuICAgICAgcGxhbktleXM6IGFjdHVhbERhdGEucGxhbiA/IE9iamVjdC5rZXlzKGFjdHVhbERhdGEucGxhbikgOiBudWxsLFxuICAgICAgaGFzVGFza3M6IGFjdHVhbERhdGEucGxhbj8udGFza3MgPyB0cnVlIDogZmFsc2UsXG4gICAgICB0YXNrQ291bnQ6IGFjdHVhbERhdGEucGxhbj8udGFza3M/Lmxlbmd0aCB8fCAwXG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayBpZiBwbGFuIGV4aXN0cyBpbiByZXNwb25zZVxuICAgIGlmICghYWN0dWFsRGF0YS5wbGFuKSB7XG4gICAgICBjb25zdCBlcnJvciA9ICdObyBwbGFuIGRhdGEgaW4gQVBJIHJlc3BvbnNlJztcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIEVycm9yOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gRnVsbCByZXNwb25zZSBkYXRhOicsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBBY3R1YWwgZGF0YTonLCBhY3R1YWxEYXRhKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCBFdm9BZ2VudFggdGFzayBwbGFubmluZyByZXNwb25zZSB0byBzY2hlZHVsZSBmb3JtYXRcbiAgICBjb25zdCB0YXNrUGxhbiA9IGFjdHVhbERhdGEucGxhbjtcbiAgICBjb25zdCB0YXNrcyA9IHRhc2tQbGFuLnRhc2tzIHx8IFtdO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5OdIFtQbGFuIE15IERheV0gUHJvY2Vzc2luZyB0YXNrczonLCB0YXNrcy5sZW5ndGgpO1xuICAgIFxuICAgIGlmICh0YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFtQbGFuIE15IERheV0gTm8gdGFza3MgaW4gcmVzcG9uc2UsIGNyZWF0aW5nIGZhbGxiYWNrIHNjaGVkdWxlJyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzY2hlZHVsZU1hcmtkb3duOiAnfCBUaW1lIHwgVGFzayB8XFxufC0tLS0tLXwtLS0tLS18XFxufCA5OjAwIEFNIHwgUGxhbiB5b3VyIGRheSB8XFxufCAxMDowMCBBTSB8IFN0YXJ0IHdvcmtpbmcgfFxcbnwgMTI6MDAgUE0gfCBMdW5jaCBicmVhayB8JyxcbiAgICAgICAgaGVhZGxpbmU6ICfwn5OFIEJhc2ljIHNjaGVkdWxlIGNyZWF0ZWQgKG5vIHRhc2tzIGZvdW5kIGluIG5vdGUpJ1xuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJhdGUgc2NoZWR1bGUgbWFya2Rvd24gZnJvbSB0YXNrc1xuICAgIGxldCBzY2hlZHVsZU1hcmtkb3duID0gJ3wgVGltZSB8IFRhc2sgfFxcbnwtLS0tLS18LS0tLS0tfFxcbic7XG4gICAgXG4gICAgLy8gRXh0cmFjdCBzY2hlZHVsZWQgdGltZXMgZnJvbSB0YXNrIGRlc2NyaXB0aW9ucyBvciBnZW5lcmF0ZSB0aGVtXG4gICAgdGFza3MuZm9yRWFjaCgodGFzazogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+TiyBbUGxhbiBNeSBEYXldIFByb2Nlc3NpbmcgdGFzayAke2luZGV4ICsgMX06YCwge1xuICAgICAgICB0aXRsZTogdGFzay50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IHRhc2suZGVzY3JpcHRpb24/LnN1YnN0cmluZygwLCAxMDApLFxuICAgICAgICBwcmlvcml0eTogdGFzay5wcmlvcml0eSxcbiAgICAgICAgZXN0aW1hdGVkVGltZTogdGFzay5lc3RpbWF0ZWRfdGltZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRhc2suZGVzY3JpcHRpb24/Lm1hdGNoKC8oXFxkezEsMn06XFxkezJ9KS8pO1xuICAgICAgY29uc3QgdGltZSA9IHRpbWVNYXRjaCA/IHRpbWVNYXRjaFsxXSA6IGAkezkgKyBNYXRoLmZsb29yKGluZGV4ICogMS41KX06JHsoaW5kZXggKiAzMCkgJSA2MCB8fCAnMDAnfWA7XG4gICAgICBzY2hlZHVsZU1hcmtkb3duICs9IGB8ICR7dGltZX0gfCAke3Rhc2sudGl0bGV9IHxcXG5gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgc2NoZWR1bGVNYXJrZG93bixcbiAgICAgIGhlYWRsaW5lOiBg4pyoIFNtYXJ0IHNjaGVkdWxlIGNyZWF0ZWQgd2l0aCAke3Rhc2tzLmxlbmd0aH0gdGFza3MhYFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gU2NoZWR1bGUgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseTonLCB7XG4gICAgICBtYXJrZG93bkxlbmd0aDogc2NoZWR1bGVNYXJrZG93bi5sZW5ndGgsXG4gICAgICB0YXNrQ291bnQ6IHRhc2tzLmxlbmd0aCxcbiAgICAgIGhlYWRsaW5lOiByZXN1bHQuaGVhZGxpbmVcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBGZXRjaCBlcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcign8J+UjSBbUGxhbiBNeSBEYXldIEVycm9yIHN0YWNrOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZScpO1xuICAgIFxuICAgIC8vIFJlLXRocm93IHdpdGggbW9yZSBjb250ZXh0XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2NoZWR1bGUgZmV0Y2ggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2NoZWR1bGUgZmV0Y2ggZmFpbGVkOiAke1N0cmluZyhlcnJvcil9YCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRmluZHMgYW5kIGV4dHJhY3RzIHRoZSBWYXVsdFBpbG90IHBsYW4gc2VjdGlvbiBmcm9tIG5vdGUgdGV4dCB1c2luZyBjb21tZW50IHdyYXBwZXJcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIGZ1bGwgbm90ZSB0ZXh0XG4gKiBAcmV0dXJucyBNYXRjaCByZXN1bHQgd2l0aCBwbGFuIHNlY3Rpb24gZGV0YWlscyBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGxhblNlY3Rpb24odGV4dDogc3RyaW5nKTogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwge1xuICAvLyBMb29rIGZvciB0aGUgVmF1bHRQaWxvdCBwbGFuIGNvbW1lbnQgd3JhcHBlclxuICBjb25zdCBwbGFuUmVnZXggPSAvKDwhLS0gdnA6cGxhbjpzdGFydCAtLT4pKFtcXHNcXFNdKj8pKDwhLS0gdnA6cGxhbjplbmQgLS0+KS9pO1xuICByZXR1cm4gdGV4dC5tYXRjaChwbGFuUmVnZXgpO1xufVxuXG4vKipcbiAqIEZpbmRzIGFuZCBleHRyYWN0cyB0aGUgU2NoZWR1bGUgc2VjdGlvbiBmcm9tIG5vdGUgdGV4dFxuICogQHBhcmFtIHRleHQgLSBUaGUgZnVsbCBub3RlIHRleHRcbiAqIEByZXR1cm5zIE1hdGNoIHJlc3VsdCB3aXRoIHNjaGVkdWxlIHNlY3Rpb24gZGV0YWlscyBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kU2NoZWR1bGVTZWN0aW9uKHRleHQ6IHN0cmluZyk6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsIHtcbiAgLy8gRmlyc3QgdHJ5IHRvIG1hdGNoIGhlYWRpbmdzIHRoYXQgYXJlIGV4YWN0bHkgXCIjIyBTY2hlZHVsZVwiICh3aXRoIG9wdGlvbmFsIGNvbnRlbnQgYWZ0ZXIpXG4gIGxldCBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMrU2NoZWR1bGVcXGJbXlxcbl0qXFxuKShbXFxzXFxTXSo/KSg/PVxcbiMjXFxzfCQpL2ltO1xuICBsZXQgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xuICBcbiAgaWYgKG1hdGNoKSB7XG4gICAgcmV0dXJuIG1hdGNoO1xuICB9XG4gIFxuICAvLyBJZiBubyBleGFjdCBtYXRjaCwgdHJ5IHRvIG1hdGNoIGhlYWRpbmdzIHRoYXQgY29udGFpbiBcIlNjaGVkdWxlXCIgYXMgYSB3b3JkXG4gIHNjaGVkdWxlUmVnZXggPSAvKF4jI1xccyooPzouKlxccyk/XFxiU2NoZWR1bGVcXGIoPzpcXHMuKik/JFxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgcmV0dXJuIHRleHQubWF0Y2goc2NoZWR1bGVSZWdleCk7XG59XG5cbi8qKlxuICogSW5qZWN0cyBvciByZXBsYWNlcyB0aGUgc2NoZWR1bGUgc2VjdGlvbiBpbiB0aGUgbm90ZSB0ZXh0XG4gKiBAcGFyYW0gb3JpZ2luYWxUZXh0IC0gVGhlIG9yaWdpbmFsIG5vdGUgdGV4dFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgbmV3IHNjaGVkdWxlIGNvbnRlbnQgdG8gaW5qZWN0XG4gKiBAcmV0dXJucyBVcGRhdGVkIG5vdGUgdGV4dCB3aXRoIHRoZSBuZXcgc2NoZWR1bGUgc2VjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0U2NoZWR1bGUob3JpZ2luYWxUZXh0OiBzdHJpbmcsIHNjaGVkdWxlTWFya2Rvd246IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnNvbGUubG9nKCfwn5OdIFtQbGFuIE15IERheV0gSW5qZWN0aW5nIHNjaGVkdWxlOicsIHtcbiAgICBvcmlnaW5hbExlbmd0aDogb3JpZ2luYWxUZXh0Lmxlbmd0aCxcbiAgICBzY2hlZHVsZUxlbmd0aDogc2NoZWR1bGVNYXJrZG93bi5sZW5ndGgsXG4gICAgaGFzT3JpZ2luYWxDb250ZW50OiBvcmlnaW5hbFRleHQudHJpbSgpLmxlbmd0aCA+IDBcbiAgfSk7XG4gIFxuICAvLyBGaXJzdCwgY2hlY2sgZm9yIFZhdWx0UGlsb3QgY29tbWVudCB3cmFwcGVyXG4gIGNvbnN0IHBsYW5NYXRjaCA9IGZpbmRQbGFuU2VjdGlvbihvcmlnaW5hbFRleHQpO1xuICBcbiAgaWYgKHBsYW5NYXRjaCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFtQbGFuIE15IERheV0gUmVwbGFjaW5nIGV4aXN0aW5nIHBsYW4gc2VjdGlvbiB3aXRoIGNvbW1lbnQgd3JhcHBlcicpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIFtQbGFuIE15IERheV0gRm91bmQgd3JhcHBlZCBwbGFuIHNlY3Rpb246Jywge1xuICAgICAgc3RhcnRDb21tZW50OiBwbGFuTWF0Y2hbMV0sXG4gICAgICBjb250ZW50TGVuZ3RoOiBwbGFuTWF0Y2hbMl0/Lmxlbmd0aCB8fCAwLFxuICAgICAgZW5kQ29tbWVudDogcGxhbk1hdGNoWzNdXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVwbGFjZSBldmVyeXRoaW5nIGluc2lkZSB0aGUgY29tbWVudCB3cmFwcGVyXG4gICAgY29uc3QgW2Z1bGxNYXRjaCwgc3RhcnRDb21tZW50LCAsIGVuZENvbW1lbnRdID0gcGxhbk1hdGNoO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gYCR7c3RhcnRDb21tZW50fVxcbiR7c2NoZWR1bGVNYXJrZG93bn1cXG4ke2VuZENvbW1lbnR9YDtcbiAgICBjb25zdCByZXN1bHQgPSBvcmlnaW5hbFRleHQucmVwbGFjZShmdWxsTWF0Y2gsIHJlcGxhY2VtZW50KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gUGxhbiBzZWN0aW9uIHJlcGxhY2VkIHdpdGhpbiBjb21tZW50IHdyYXBwZXInKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIFxuICAvLyBGYWxsIGJhY2sgdG8gY2hlY2tpbmcgZm9yIFNjaGVkdWxlIHNlY3Rpb25cbiAgY29uc3Qgc2NoZWR1bGVNYXRjaCA9IGZpbmRTY2hlZHVsZVNlY3Rpb24ob3JpZ2luYWxUZXh0KTtcbiAgXG4gIGlmIChzY2hlZHVsZU1hdGNoKSB7XG4gICAgY29uc29sZS5sb2coJ/CflIQgW1BsYW4gTXkgRGF5XSBSZXBsYWNpbmcgZXhpc3Rpbmcgc2NoZWR1bGUgc2VjdGlvbicpO1xuICAgIGNvbnNvbGUubG9nKCfwn5OLIFtQbGFuIE15IERheV0gRm91bmQgc2VjdGlvbjonLCB7XG4gICAgICBoZWFkaW5nTWF0Y2g6IHNjaGVkdWxlTWF0Y2hbMV0/LnN1YnN0cmluZygwLCA1MCksXG4gICAgICBjb250ZW50TWF0Y2g6IHNjaGVkdWxlTWF0Y2hbMl0/LnN1YnN0cmluZygwLCAxMDApXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVwbGFjZSBleGlzdGluZyBzY2hlZHVsZSBzZWN0aW9uIChrZWVwIGhlYWRpbmcsIHJlcGxhY2UgY29udGVudClcbiAgICBjb25zdCBbZnVsbE1hdGNoLCBoZWFkaW5nXSA9IHNjaGVkdWxlTWF0Y2g7XG4gICAgY29uc3QgcmVwbGFjZW1lbnQgPSBoZWFkaW5nICsgc2NoZWR1bGVNYXJrZG93bjtcbiAgICBjb25zdCByZXN1bHQgPSBvcmlnaW5hbFRleHQucmVwbGFjZShmdWxsTWF0Y2gsIHJlcGxhY2VtZW50KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gU2NoZWR1bGUgc2VjdGlvbiByZXBsYWNlZCcpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ+KelSBbUGxhbiBNeSBEYXldIEFkZGluZyBuZXcgcGxhbiBzZWN0aW9uIHdpdGggY29tbWVudCB3cmFwcGVyIGF0IHRvcCcpO1xuICAgIFxuICAgIC8vIEluc2VydCBuZXcgcGxhbiBzZWN0aW9uIHdpdGggY29tbWVudCB3cmFwcGVyIGF0IHRoZSB0b3Agb2YgdGhlIG5vdGVcbiAgICBjb25zdCB3cmFwcGVkUGxhbiA9IGA8IS0tIHZwOnBsYW46c3RhcnQgLS0+XFxuJHtzY2hlZHVsZU1hcmtkb3dufVxcbjwhLS0gdnA6cGxhbjplbmQgLS0+XFxuXFxuYDtcbiAgICBjb25zdCByZXN1bHQgPSB3cmFwcGVkUGxhbiArIG9yaWdpbmFsVGV4dDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gTmV3IHBsYW4gc2VjdGlvbiB3aXRoIHdyYXBwZXIgYWRkZWQgYXQgdG9wJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiB0aGUgc2NoZWR1bGUgbWFya2Rvd24gaXMgcHJvcGVybHkgZm9ybWF0dGVkXG4gKiBAcGFyYW0gc2NoZWR1bGVNYXJrZG93biAtIFRoZSBzY2hlZHVsZSBjb250ZW50IHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU2NoZWR1bGVNYXJrZG93bihzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBWYWxpZGF0aW5nIHNjaGVkdWxlIG1hcmtkb3duOicsIHtcbiAgICBsZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgIHRyaW1tZWRMZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24udHJpbSgpLmxlbmd0aCxcbiAgICBpc1N0cmluZzogdHlwZW9mIHNjaGVkdWxlTWFya2Rvd24gPT09ICdzdHJpbmcnLFxuICAgIHByZXZpZXc6IHNjaGVkdWxlTWFya2Rvd24uc3Vic3RyaW5nKDAsIDEwMClcbiAgfSk7XG4gIFxuICAvLyBCYXNpYyB2YWxpZGF0aW9uIC0gY2hlY2sgaWYgaXQncyBub3QgZW1wdHkgYW5kIGNvbnRhaW5zIHNvbWUgY29udGVudFxuICBjb25zdCBpc1ZhbGlkID0gc2NoZWR1bGVNYXJrZG93bi50cmltKCkubGVuZ3RoID4gMDtcbiAgXG4gIGNvbnNvbGUubG9nKCfinIUgW1BsYW4gTXkgRGF5XSBWYWxpZGF0aW9uIHJlc3VsdDonLCBpc1ZhbGlkKTtcbiAgXG4gIHJldHVybiBpc1ZhbGlkO1xufVxuIiwiLy8gRGVidWcgdXRpbGl0aWVzIGZvciBQbGFuIE15IERheSBmZWF0dXJlXG5leHBvcnQgY2xhc3MgUGxhbk15RGF5RGVidWdnZXIge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogUGxhbk15RGF5RGVidWdnZXI7XG4gIHByaXZhdGUgbG9nczogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBtYXhMb2dzID0gMTAwO1xuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBQbGFuTXlEYXlEZWJ1Z2dlciB7XG4gICAgaWYgKCFQbGFuTXlEYXlEZWJ1Z2dlci5pbnN0YW5jZSkge1xuICAgICAgUGxhbk15RGF5RGVidWdnZXIuaW5zdGFuY2UgPSBuZXcgUGxhbk15RGF5RGVidWdnZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIFBsYW5NeURheURlYnVnZ2VyLmluc3RhbmNlO1xuICB9XG5cbiAgbG9nKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSAke21lc3NhZ2V9JHtkYXRhID8gYCB8ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCA6ICcnfWA7XG4gICAgXG4gICAgY29uc29sZS5sb2cobG9nRW50cnkpO1xuICAgIHRoaXMubG9ncy5wdXNoKGxvZ0VudHJ5KTtcbiAgICBcbiAgICAvLyBLZWVwIG9ubHkgdGhlIG1vc3QgcmVjZW50IGxvZ3NcbiAgICBpZiAodGhpcy5sb2dzLmxlbmd0aCA+IHRoaXMubWF4TG9ncykge1xuICAgICAgdGhpcy5sb2dzID0gdGhpcy5sb2dzLnNsaWNlKC10aGlzLm1heExvZ3MpO1xuICAgIH1cbiAgfVxuXG4gIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBhbnkpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHtcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgICBuYW1lOiBlcnJvci5uYW1lXG4gICAgfSA6IGVycm9yO1xuICAgIFxuICAgIGNvbnN0IGxvZ0VudHJ5ID0gYFske3RpbWVzdGFtcH1dIEVSUk9SOiAke21lc3NhZ2V9JHtlcnJvckRhdGEgPyBgIHwgJHtKU09OLnN0cmluZ2lmeShlcnJvckRhdGEpfWAgOiAnJ31gO1xuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IobG9nRW50cnkpO1xuICAgIHRoaXMubG9ncy5wdXNoKGxvZ0VudHJ5KTtcbiAgICBcbiAgICBpZiAodGhpcy5sb2dzLmxlbmd0aCA+IHRoaXMubWF4TG9ncykge1xuICAgICAgdGhpcy5sb2dzID0gdGhpcy5sb2dzLnNsaWNlKC10aGlzLm1heExvZ3MpO1xuICAgIH1cbiAgfVxuXG4gIGdldExvZ3MoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbLi4udGhpcy5sb2dzXTtcbiAgfVxuXG4gIGNsZWFyTG9ncygpIHtcbiAgICB0aGlzLmxvZ3MgPSBbXTtcbiAgfVxuXG4gIGV4cG9ydExvZ3MoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5sb2dzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgLy8gSGVscGVyIHRvIGFuYWx5emUgQVBJIGNsaWVudCBzdGF0ZVxuICBhbmFseXplQXBpQ2xpZW50KGFwaUNsaWVudDogYW55KTogYW55IHtcbiAgICBpZiAoIWFwaUNsaWVudCkge1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbnVsbCcsIGF2YWlsYWJsZTogZmFsc2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnYXZhaWxhYmxlJyxcbiAgICAgIGF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIHR5cGU6IHR5cGVvZiBhcGlDbGllbnQsXG4gICAgICBtZXRob2RzOiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXBpQ2xpZW50KSkuZmlsdGVyKG5hbWUgPT4gdHlwZW9mIGFwaUNsaWVudFtuYW1lXSA9PT0gJ2Z1bmN0aW9uJyksXG4gICAgICBoYXNQbGFuVGFza3M6IHR5cGVvZiBhcGlDbGllbnQucGxhblRhc2tzID09PSAnZnVuY3Rpb24nLFxuICAgICAgaGFzSGVhbHRoQ2hlY2s6IHR5cGVvZiBhcGlDbGllbnQuaGVhbHRoQ2hlY2sgPT09ICdmdW5jdGlvbidcbiAgICB9O1xuICB9XG5cbiAgLy8gSGVscGVyIHRvIHRlc3QgRXZvQWdlbnRYIGNvbm5lY3Rpb25cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oYXBpQ2xpZW50OiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZygn8J+UlyBUZXN0aW5nIEV2b0FnZW50WCBjb25uZWN0aW9uLi4uJyk7XG4gICAgICBcbiAgICAgIGlmICghYXBpQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGNsaWVudCBpcyBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWFwaUNsaWVudC5oZWFsdGhDaGVjaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBjbGllbnQgZG9lcyBub3QgaGF2ZSBoZWFsdGhDaGVjayBtZXRob2QnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICB0aGlzLmxvZygn4pyFIENvbm5lY3Rpb24gdGVzdCBzdWNjZXNzZnVsJywgcmVzdWx0KTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlc3VsdCB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IoJ+KdjCBDb25uZWN0aW9uIHRlc3QgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWxwZXIgdG8gdGVzdCB0YXNrIHBsYW5uaW5nIHNwZWNpZmljYWxseVxuICBhc3luYyB0ZXN0VGFza1BsYW5uaW5nKGFwaUNsaWVudDogYW55LCB0ZXN0Tm90ZTogc3RyaW5nID0gJ1Rlc3Qgbm90ZSBmb3Igc2NoZWR1bGUgZ2VuZXJhdGlvbicpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZygn8J+TiyBUZXN0aW5nIHRhc2sgcGxhbm5pbmcuLi4nKTtcbiAgICAgIFxuICAgICAgaWYgKCFhcGlDbGllbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY2xpZW50IGlzIG51bGwgb3IgdW5kZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXBpQ2xpZW50LnBsYW5UYXNrcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBjbGllbnQgZG9lcyBub3QgaGF2ZSBwbGFuVGFza3MgbWV0aG9kJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgICBnb2FsOiAnQ3JlYXRlIGEgdGVzdCBzY2hlZHVsZScsXG4gICAgICAgIGNvbnRleHQ6IHRlc3ROb3RlLFxuICAgICAgICB0aW1lZnJhbWU6ICcxIGRheSdcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmxvZygn4pyFIFRhc2sgcGxhbm5pbmcgdGVzdCBzdWNjZXNzZnVsJywge1xuICAgICAgICBzdWNjZXNzOiByZXN1bHQuc3VjY2VzcyxcbiAgICAgICAgaGFzRGF0YTogISFyZXN1bHQuZGF0YSxcbiAgICAgICAgaGFzUGxhbjogISFyZXN1bHQuZGF0YT8ucGxhbixcbiAgICAgICAgdGFza0NvdW50OiByZXN1bHQuZGF0YT8ucGxhbj8udGFza3M/Lmxlbmd0aCB8fCAwXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVzdWx0IH07XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvcign4p2MIFRhc2sgcGxhbm5pbmcgdGVzdCBmYWlsZWQnLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcGxhbk15RGF5RGVidWdnZXIgPSBQbGFuTXlEYXlEZWJ1Z2dlci5nZXRJbnN0YW5jZSgpO1xuIiwiLyoqXG4gKiBUeXBlU2NyaXB0IHR5cGUgZGVmaW5pdGlvbnMgZm9yIFZhdWx0UGlsb3QgdmF1bHQgbWFuYWdlbWVudCBpbnRlZ3JhdGlvblxuICovXG5cbmltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gPT09IFZBVUxUIFNUUlVDVFVSRSBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFN0cnVjdHVyZVJlcXVlc3Qge1xuICBpbmNsdWRlX2NvbnRlbnQ/OiBib29sZWFuO1xuICBtYXhfZGVwdGg/OiBudW1iZXI7XG4gIGZpbGVfdHlwZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEZpbGVJbmZvIHtcbiAgcGF0aDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNpemU6IG51bWJlcjtcbiAgbW9kaWZpZWQ6IHN0cmluZztcbiAgZmlsZV90eXBlOiBzdHJpbmc7XG4gIGNvbnRlbnRfcHJldmlldz86IHN0cmluZztcbiAgdGFncz86IHN0cmluZ1tdO1xuICBsaW5rcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0Rm9sZGVySW5mbyB7XG4gIG5hbWU6IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICBjaGlsZHJlbjogKFZhdWx0RmlsZUluZm8gfCBWYXVsdEZvbGRlckluZm8pW107XG4gIHR5cGU6ICdmb2xkZXInO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U3RydWN0dXJlUmVzcG9uc2Uge1xuICB2YXVsdF9uYW1lOiBzdHJpbmc7XG4gIHRvdGFsX2ZpbGVzOiBudW1iZXI7XG4gIHRvdGFsX2ZvbGRlcnM6IG51bWJlcjtcbiAgdG90YWxfc2l6ZTogbnVtYmVyO1xuICBzdHJ1Y3R1cmU6IFZhdWx0Rm9sZGVySW5mbztcbiAgcmVjZW50X2ZpbGVzOiBWYXVsdEZpbGVJbmZvW107XG4gIG9ycGhhbmVkX2ZpbGVzOiBWYXVsdEZpbGVJbmZvW107XG59XG5cbi8vID09PSBGSUxFIE9QRVJBVElPTiBUWVBFUyA9PT1cblxuZXhwb3J0IHR5cGUgRmlsZU9wZXJhdGlvblR5cGUgPSAnY3JlYXRlJyB8ICd1cGRhdGUnIHwgJ2RlbGV0ZScgfCAnbW92ZScgfCAnY29weSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU9wZXJhdGlvblJlcXVlc3Qge1xuICBvcGVyYXRpb246IEZpbGVPcGVyYXRpb25UeXBlO1xuICBmaWxlX3BhdGg6IHN0cmluZztcbiAgbmV3X3BhdGg/OiBzdHJpbmc7XG4gIGNvbnRlbnQ/OiBzdHJpbmc7XG4gIGJhY2t1cD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU9wZXJhdGlvblJlc3BvbnNlIHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBmaWxlX3BhdGg6IHN0cmluZztcbiAgYmFja3VwX3BhdGg/OiBzdHJpbmc7XG4gIG5ld19wYXRoPzogc3RyaW5nO1xufVxuXG4vLyA9PT0gQkFUQ0ggT1BFUkFUSU9OUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0IHtcbiAgb3BlcmF0aW9uczogRmlsZU9wZXJhdGlvblJlcXVlc3RbXTtcbiAgYXRvbWljPzogYm9vbGVhbjtcbiAgdGltZW91dD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGNvbXBsZXRlZDogbnVtYmVyO1xuICBmYWlsZWQ6IG51bWJlcjtcbiAgcmVzdWx0czogRmlsZU9wZXJhdGlvblJlc3BvbnNlW107XG4gIGVycm9ycz86IHN0cmluZ1tdO1xufVxuXG4vLyA9PT0gU0VBUkNIIFRZUEVTID09PVxuXG5leHBvcnQgdHlwZSBTZWFyY2hUeXBlID0gJ2NvbnRlbnQnIHwgJ2ZpbGVuYW1lJyB8ICd0YWdzJyB8ICdsaW5rcycgfCAnY29tcHJlaGVuc2l2ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTZWFyY2hSZXF1ZXN0IHtcbiAgcXVlcnk6IHN0cmluZztcbiAgc2VhcmNoX3R5cGU/OiBTZWFyY2hUeXBlO1xuICBtYXhfcmVzdWx0cz86IG51bWJlcjtcbiAgaW5jbHVkZV9jb250ZW50PzogYm9vbGVhbjtcbiAgZmlsZV90eXBlcz86IHN0cmluZ1tdO1xuICBmb2xkZXJzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTZWFyY2hSZXN1bHQge1xuICBmaWxlX3BhdGg6IHN0cmluZztcbiAgZmlsZV9uYW1lOiBzdHJpbmc7XG4gIG1hdGNoX3R5cGU6ICdjb250ZW50JyB8ICdmaWxlbmFtZScgfCAndGFnJyB8ICdsaW5rJztcbiAgbWF0Y2hlczogc3RyaW5nW107XG4gIHByZXZpZXc6IHN0cmluZztcbiAgc2NvcmU6IG51bWJlcjtcbiAgbGluZV9udW1iZXJzPzogbnVtYmVyW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTZWFyY2hSZXNwb25zZSB7XG4gIHJlc3VsdHM6IFZhdWx0U2VhcmNoUmVzdWx0W107XG4gIHRvdGFsX2ZvdW5kOiBudW1iZXI7XG4gIHNlYXJjaF90eXBlOiBTZWFyY2hUeXBlO1xuICBxdWVyeTogc3RyaW5nO1xuICBpbnNpZ2h0cz86IHN0cmluZztcbiAgc3VnZ2VzdGVkX3F1ZXJpZXM/OiBzdHJpbmdbXTtcbn1cblxuLy8gPT09IE9SR0FOSVpBVElPTiBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3Qge1xuICBmb2N1c19mb2xkZXJzPzogc3RyaW5nW107XG4gIG9yZ2FuaXphdGlvbl9tb2RlOiAnYnlfdG9waWMnIHwgJ2J5X2RhdGUnIHwgJ2J5X3R5cGUnIHwgJ2N1c3RvbSc7XG4gIGNyZWF0ZV9mb2xkZXJzPzogYm9vbGVhbjtcbiAgbW92ZV9maWxlcz86IGJvb2xlYW47XG4gIGN1c3RvbV9ydWxlcz86IE9yZ2FuaXphdGlvblJ1bGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcmdhbml6YXRpb25SdWxlIHtcbiAgcGF0dGVybjogc3RyaW5nO1xuICB0YXJnZXRfZm9sZGVyOiBzdHJpbmc7XG4gIHJ1bGVfdHlwZTogJ2ZpbGVuYW1lJyB8ICdjb250ZW50JyB8ICd0YWcnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2Uge1xuICBzdWdnZXN0ZWRfbW92ZXM6IEZpbGVNb3ZlT3BlcmF0aW9uW107XG4gIHN1Z2dlc3RlZF9mb2xkZXJzOiBzdHJpbmdbXTtcbiAgb3JnYW5pemF0aW9uX2luc2lnaHRzOiBzdHJpbmc7XG4gIGVzdGltYXRlZF9pbXByb3ZlbWVudHM6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWxlTW92ZU9wZXJhdGlvbiB7XG4gIGZyb21fcGF0aDogc3RyaW5nO1xuICB0b19wYXRoOiBzdHJpbmc7XG4gIHJlYXNvbjogc3RyaW5nO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG59XG5cbi8vID09PSBCQUNLVVAgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRCYWNrdXBSZXF1ZXN0IHtcbiAgaW5jbHVkZV9zZXR0aW5ncz86IGJvb2xlYW47XG4gIGNvbXByZXNzaW9uPzogYm9vbGVhbjtcbiAgYmFja3VwX25hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRCYWNrdXBSZXNwb25zZSB7XG4gIGJhY2t1cF9wYXRoOiBzdHJpbmc7XG4gIGJhY2t1cF9zaXplOiBudW1iZXI7XG4gIGZpbGVzX2JhY2tlZF91cDogbnVtYmVyO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbn1cblxuLy8gPT09IEVSUk9SIEhBTkRMSU5HID09PVxuXG5leHBvcnQgY2xhc3MgVmF1bHRNYW5hZ2VtZW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHB1YmxpYyBjb2RlOiBzdHJpbmc7XG4gIHB1YmxpYyBmZWF0dXJlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBzdHJpbmcsIGZlYXR1cmU6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdWYXVsdE1hbmFnZW1lbnRFcnJvcic7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLmZlYXR1cmUgPSBmZWF0dXJlO1xuICB9XG59XG5cbi8vID09PSBTRVRUSU5HUyBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyB7XG4gIGVuYWJsZVZhdWx0TWFuYWdlbWVudDogYm9vbGVhbjtcbiAgYXV0b1N5bmNWYXVsdFN0cnVjdHVyZTogYm9vbGVhbjtcbiAgc2VhcmNoUmVzdWx0c0xpbWl0OiBudW1iZXI7XG4gIGVuYWJsZVNtYXJ0U2VhcmNoOiBib29sZWFuO1xuICBiYXRjaE9wZXJhdGlvblRpbWVvdXQ6IG51bWJlcjtcbiAgc2hvd1ZhdWx0U3RhdHM6IGJvb2xlYW47XG4gIG1heFNlYXJjaFJlc3VsdHM6IG51bWJlcjtcbiAgZGVmYXVsdFNlYXJjaFR5cGU6IFNlYXJjaFR5cGU7XG4gIGVuYWJsZUZpbGVPcGVyYXRpb25zOiBib29sZWFuO1xuICBjb25maXJtRGVzdHJ1Y3RpdmVPcGVyYXRpb25zOiBib29sZWFuO1xuICBhdXRvQmFja3VwQmVmb3JlT3BlcmF0aW9uczogYm9vbGVhbjtcbn1cblxuLy8gPT09IEFQSSBJTlRFUkZBQ0UgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRNYW5hZ2VtZW50QVBJIHtcbiAgZ2V0VmF1bHRTdHJ1Y3R1cmUocmVxdWVzdDogVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFN0cnVjdHVyZVJlc3BvbnNlPjtcbiAgcGVyZm9ybUZpbGVPcGVyYXRpb24ocmVxdWVzdDogRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT47XG4gIHBlcmZvcm1CYXRjaE9wZXJhdGlvbnMocmVxdWVzdDogQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8QmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2U+O1xuICBzZWFyY2hWYXVsdChyZXF1ZXN0OiBWYXVsdFNlYXJjaFJlcXVlc3QpOiBQcm9taXNlPFZhdWx0U2VhcmNoUmVzcG9uc2U+O1xuICBvcmdhbml6ZVZhdWx0KHJlcXVlc3Q6IFZhdWx0T3JnYW5pemF0aW9uUmVxdWVzdCk6IFByb21pc2U8VmF1bHRPcmdhbml6YXRpb25SZXNwb25zZT47XG4gIGJhY2t1cFZhdWx0KHJlcXVlc3Q6IFZhdWx0QmFja3VwUmVxdWVzdCk6IFByb21pc2U8VmF1bHRCYWNrdXBSZXNwb25zZT47XG59XG5cbi8vID09PSBVVElMSVRZIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0TW9kYWxQcm9wcyB7XG4gIGFwcDogQXBwO1xuICBwbHVnaW46IGFueTtcbiAgb25DbG9zZT86ICgpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVRyZWVOb2RlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBwYXRoOiBzdHJpbmc7XG4gIHR5cGU6ICdmaWxlJyB8ICdmb2xkZXInO1xuICBjaGlsZHJlbj86IEZpbGVUcmVlTm9kZVtdO1xuICBzaXplPzogbnVtYmVyO1xuICBtb2RpZmllZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFN0YXRzIHtcbiAgdG90YWxGaWxlczogbnVtYmVyO1xuICB0b3RhbEZvbGRlcnM6IG51bWJlcjtcbiAgdG90YWxTaXplOiBudW1iZXI7XG4gIGF2ZXJhZ2VGaWxlU2l6ZTogbnVtYmVyO1xuICBsYXJnZXN0RmlsZTogVmF1bHRGaWxlSW5mbztcbiAgbW9zdFJlY2VudEZpbGU6IFZhdWx0RmlsZUluZm87XG4gIGZpbGVUeXBlRGlzdHJpYnV0aW9uOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlYXJjaEZpbHRlciB7XG4gIGZpbGVUeXBlcz86IHN0cmluZ1tdO1xuICBmb2xkZXJzPzogc3RyaW5nW107XG4gIGRhdGVSYW5nZT86IHtcbiAgICBzdGFydDogc3RyaW5nO1xuICAgIGVuZDogc3RyaW5nO1xuICB9O1xuICBzaXplUmFuZ2U/OiB7XG4gICAgbWluOiBudW1iZXI7XG4gICAgbWF4OiBudW1iZXI7XG4gIH07XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEhlYWx0aENoZWNrIHtcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnd2FybmluZycgfCAnZXJyb3InO1xuICBpc3N1ZXM6IEhlYWx0aElzc3VlW107XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIGxhc3RDaGVjazogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWx0aElzc3VlIHtcbiAgdHlwZTogJ29ycGhhbmVkX2ZpbGUnIHwgJ2Jyb2tlbl9saW5rJyB8ICdkdXBsaWNhdGVfbmFtZScgfCAnbGFyZ2VfZmlsZScgfCAnZW1wdHlfZm9sZGVyJztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZmlsZXM6IHN0cmluZ1tdO1xuICBzZXZlcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbn1cbiIsIi8qKlxuICogQVBJIENsaWVudCBFeHRlbnNpb25zIGZvciBWYXVsdFBpbG90IFZhdWx0IE1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge1xuICBWYXVsdFN0cnVjdHVyZVJlcXVlc3QsXG4gIFZhdWx0U3RydWN0dXJlUmVzcG9uc2UsXG4gIEZpbGVPcGVyYXRpb25SZXF1ZXN0LFxuICBGaWxlT3BlcmF0aW9uUmVzcG9uc2UsXG4gIEJhdGNoRmlsZU9wZXJhdGlvblJlcXVlc3QsXG4gIEJhdGNoRmlsZU9wZXJhdGlvblJlc3BvbnNlLFxuICBWYXVsdFNlYXJjaFJlcXVlc3QsXG4gIFZhdWx0U2VhcmNoUmVzcG9uc2UsXG4gIFZhdWx0T3JnYW5pemF0aW9uUmVxdWVzdCxcbiAgVmF1bHRPcmdhbml6YXRpb25SZXNwb25zZSxcbiAgVmF1bHRCYWNrdXBSZXF1ZXN0LFxuICBWYXVsdEJhY2t1cFJlc3BvbnNlLFxuICBWYXVsdE1hbmFnZW1lbnRFcnJvcixcbiAgVmF1bHRNYW5hZ2VtZW50QVBJXG59IGZyb20gJy4vdmF1bHQtdHlwZXMnO1xuXG4vKipcbiAqIFZhdWx0IE1hbmFnZW1lbnQgQVBJIENsaWVudFxuICovXG5leHBvcnQgY2xhc3MgVmF1bHRNYW5hZ2VtZW50Q2xpZW50IGltcGxlbWVudHMgVmF1bHRNYW5hZ2VtZW50QVBJIHtcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpS2V5Pzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmw6IHN0cmluZywgYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgfVxuXG4gIC8vID09PSBDT1JFIEFQSSBNRVRIT0RTID09PVxuXG4gIC8qKlxuICAgKiBHZXQgY29tcHJlaGVuc2l2ZSB2YXVsdCBzdHJ1Y3R1cmUgd2l0aCBBSSBhbmFseXNpc1xuICAgKi9cbiAgYXN5bmMgZ2V0VmF1bHRTdHJ1Y3R1cmUocmVxdWVzdDogVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFN0cnVjdHVyZVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9zdHJ1Y3R1cmUnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBGYWlsZWQgdG8gZ2V0IHZhdWx0IHN0cnVjdHVyZTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ1NUUlVDVFVSRV9GRVRDSF9GQUlMRUQnLFxuICAgICAgICAgICdzdHJ1Y3R1cmUnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdzdHJ1Y3R1cmUnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGluZGl2aWR1YWwgZmlsZSBvcGVyYXRpb24gKGNyZWF0ZSwgdXBkYXRlLCBkZWxldGUsIG1vdmUsIGNvcHkpXG4gICAqL1xuICBhc3luYyBwZXJmb3JtRmlsZU9wZXJhdGlvbihyZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMudmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChyZXF1ZXN0KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2ZpbGUvb3BlcmF0aW9uJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgRmlsZSBvcGVyYXRpb24gZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnRklMRV9PUEVSQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnZmlsZS1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIHJlc3VsdC5tZXNzYWdlIHx8ICdGaWxlIG9wZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgICdGSUxFX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdmaWxlLW9wZXJhdGlvbnMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdmaWxlLW9wZXJhdGlvbnMnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIG11bHRpcGxlIGZpbGUgb3BlcmF0aW9ucyBlZmZpY2llbnRseVxuICAgKi9cbiAgYXN5bmMgcGVyZm9ybUJhdGNoT3BlcmF0aW9ucyhyZXF1ZXN0OiBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogUHJvbWlzZTxCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcXVlc3Qub3BlcmF0aW9ucyB8fCByZXF1ZXN0Lm9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnTm8gb3BlcmF0aW9ucyBzcGVjaWZpZWQgZm9yIGJhdGNoIHJlcXVlc3QnLFxuICAgICAgICAgICdJTlZBTElEX0JBVENIX1JFUVVFU1QnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBlYWNoIG9wZXJhdGlvblxuICAgICAgcmVxdWVzdC5vcGVyYXRpb25zLmZvckVhY2goKG9wLCBpbmRleCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMudmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChvcCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICAgYEludmFsaWQgb3BlcmF0aW9uIGF0IGluZGV4ICR7aW5kZXh9OiAke2Vyci5tZXNzYWdlIHx8IGVycn1gLFxuICAgICAgICAgICAgJ0lOVkFMSURfQkFUQ0hfT1BFUkFUSU9OJyxcbiAgICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvZmlsZS9iYXRjaCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEJhdGNoIG9wZXJhdGlvbnMgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnQkFUQ0hfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhdGNoLW9wZXJhdGlvbnMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgcmVzdWx0Lm1lc3NhZ2UgfHwgJ0JhdGNoIG9wZXJhdGlvbnMgZmFpbGVkJyxcbiAgICAgICAgICAnQkFUQ0hfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhdGNoLW9wZXJhdGlvbnMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdiYXRjaC1vcGVyYXRpb25zJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoIHZhdWx0IHdpdGggQUktcG93ZXJlZCBpbnNpZ2h0c1xuICAgKi9cbiAgYXN5bmMgc2VhcmNoVmF1bHQocmVxdWVzdDogVmF1bHRTZWFyY2hSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFNlYXJjaFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcmVxdWVzdC5xdWVyeSB8fCByZXF1ZXN0LnF1ZXJ5LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdTZWFyY2ggcXVlcnkgY2Fubm90IGJlIGVtcHR5JyxcbiAgICAgICAgICAnSU5WQUxJRF9TRUFSQ0hfUVVFUlknLFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9zZWFyY2gnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBTZWFyY2ggZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnU0VBUkNIX0ZBSUxFRCcsXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvciwgJ3NlYXJjaCcpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBBSS1wb3dlcmVkIHZhdWx0IG9yZ2FuaXphdGlvbiBzdWdnZXN0aW9uc1xuICAgKi9cbiAgYXN5bmMgb3JnYW5pemVWYXVsdChyZXF1ZXN0OiBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QpOiBQcm9taXNlPFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L29yZ2FuaXplJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgT3JnYW5pemF0aW9uIGFuYWx5c2lzIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ09SR0FOSVpBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdvcmdhbml6YXRpb24nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdvcmdhbml6YXRpb24nKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgdmF1bHQgYmFja3VwXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdChyZXF1ZXN0OiBWYXVsdEJhY2t1cFJlcXVlc3QpOiBQcm9taXNlPFZhdWx0QmFja3VwUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2JhY2t1cCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEJhY2t1cCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdCQUNLVVBfRkFJTEVEJyxcbiAgICAgICAgICAnYmFja3VwJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnYmFja3VwJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyA9PT0gQ09OVkVOSUVOQ0UgTUVUSE9EUyA9PT1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZpbGUgd2l0aCBjb250ZW50XG4gICAqL1xuICBhc3luYyBjcmVhdGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ2NyZWF0ZScsXG4gICAgICBmaWxlX3BhdGg6IGZpbGVQYXRoLFxuICAgICAgY29udGVudCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBleGlzdGluZyBmaWxlIGNvbnRlbnRcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBiYWNrdXA6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICd1cGRhdGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmaWxlXG4gICAqL1xuICBhc3luYyBkZWxldGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ2RlbGV0ZScsXG4gICAgICBmaWxlX3BhdGg6IGZpbGVQYXRoLFxuICAgICAgYmFja3VwXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTW92ZSBhIGZpbGUgdG8gbmV3IGxvY2F0aW9uXG4gICAqL1xuICBhc3luYyBtb3ZlRmlsZShmcm9tUGF0aDogc3RyaW5nLCB0b1BhdGg6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyZm9ybUZpbGVPcGVyYXRpb24oe1xuICAgICAgb3BlcmF0aW9uOiAnbW92ZScsXG4gICAgICBmaWxlX3BhdGg6IGZyb21QYXRoLFxuICAgICAgbmV3X3BhdGg6IHRvUGF0aCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcHkgYSBmaWxlIHRvIG5ldyBsb2NhdGlvblxuICAgKi9cbiAgYXN5bmMgY29weUZpbGUoZnJvbVBhdGg6IHN0cmluZywgdG9QYXRoOiBzdHJpbmcpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ2NvcHknLFxuICAgICAgZmlsZV9wYXRoOiBmcm9tUGF0aCxcbiAgICAgIG5ld19wYXRoOiB0b1BhdGhcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWljayBzZWFyY2ggd2l0aCBkZWZhdWx0IHNldHRpbmdzXG4gICAqL1xuICBhc3luYyBxdWlja1NlYXJjaChxdWVyeTogc3RyaW5nLCBtYXhSZXN1bHRzOiBudW1iZXIgPSAyMCk6IFByb21pc2U8VmF1bHRTZWFyY2hSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaFZhdWx0KHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgc2VhcmNoX3R5cGU6ICdjb21wcmVoZW5zaXZlJyxcbiAgICAgIG1heF9yZXN1bHRzOiBtYXhSZXN1bHRzLFxuICAgICAgaW5jbHVkZV9jb250ZW50OiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvLyA9PT0gSEVMUEVSIE1FVEhPRFMgPT09XG5cbiAgLyoqXG4gICAqIE1ha2UgYXV0aGVudGljYXRlZCByZXF1ZXN0IHRvIHRoZSBBUElcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKX0ke2VuZHBvaW50fWA7XG4gICAgXG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi4oKG9wdGlvbnMuaGVhZGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB8fCB7fSlcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YDtcbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdEluaXQgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyc1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICBgTmV0d29yayByZXF1ZXN0IGZhaWxlZDogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YCxcbiAgICAgICAgJ05FVFdPUktfRVJST1InLFxuICAgICAgICAnYXBpJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgZmlsZSBvcGVyYXRpb24gcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUZpbGVPcGVyYXRpb25SZXF1ZXN0KHJlcXVlc3Q6IEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogdm9pZCB7XG4gICAgaWYgKCFyZXF1ZXN0LmZpbGVfcGF0aCB8fCByZXF1ZXN0LmZpbGVfcGF0aC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICdGaWxlIHBhdGggaXMgcmVxdWlyZWQnLFxuICAgICAgICAnSU5WQUxJRF9GSUxFX1BBVEgnLFxuICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Qub3BlcmF0aW9uID09PSAnbW92ZScgfHwgcmVxdWVzdC5vcGVyYXRpb24gPT09ICdjb3B5Jykge1xuICAgICAgaWYgKCFyZXF1ZXN0Lm5ld19wYXRoIHx8IHJlcXVlc3QubmV3X3BhdGgudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgJ05ldyBwYXRoIGlzIHJlcXVpcmVkIGZvciBtb3ZlL2NvcHkgb3BlcmF0aW9ucycsXG4gICAgICAgICAgJ0lOVkFMSURfTkVXX1BBVEgnLFxuICAgICAgICAgICd2YWxpZGF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lm9wZXJhdGlvbiA9PT0gJ2NyZWF0ZScgfHwgcmVxdWVzdC5vcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICBpZiAocmVxdWVzdC5jb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdDb250ZW50IGlzIHJlcXVpcmVkIGZvciBjcmVhdGUvdXBkYXRlIG9wZXJhdGlvbnMnLFxuICAgICAgICAgICdJTlZBTElEX0NPTlRFTlQnLFxuICAgICAgICAgICd2YWxpZGF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdmF1bHQgbWFuYWdlbWVudCBlcnJvcnMgd2l0aCB1c2VyIGZlZWRiYWNrXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yOiBhbnksIGZlYXR1cmU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnNvbGUuZXJyb3IoYFZhdWx0IG1hbmFnZW1lbnQgZXJyb3IgaW4gJHtmZWF0dXJlfTpgLCBlcnJvcik7XG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmF1bHRNYW5hZ2VtZW50RXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFZhdWx0ICR7ZmVhdHVyZX0gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgJHtmZWF0dXJlfSBvcGVyYXRpb24gZmFpbGVkYCwgMzAwMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgY29ubmVjdGlvbiB0byB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50c1xuICAgKi9cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRyeSBhIHNpbXBsZSB2YXVsdCBzdHJ1Y3R1cmUgcmVxdWVzdCB3aXRoIG1pbmltYWwgcGFyYW1ldGVyc1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L3N0cnVjdHVyZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaW5jbHVkZV9jb250ZW50OiBmYWxzZSwgbWF4X2RlcHRoOiAxIH0pXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdWYXVsdCBtYW5hZ2VtZW50IGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCcgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBtZXNzYWdlOiBgQ29ubmVjdGlvbiBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgbWVzc2FnZTogYENvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyfWAgXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyA9PT0gVVRJTElUWSBGVU5DVElPTlMgPT09XG5cbi8qKlxuICogRm9ybWF0IGZpbGUgc2l6ZSBpbiBodW1hbiByZWFkYWJsZSBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEZpbGVTaXplKGJ5dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcbiAgXG4gIGNvbnN0IGsgPSAxMDI0O1xuICBjb25zdCBzaXplcyA9IFsnQicsICdLQicsICdNQicsICdHQiddO1xuICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XG4gIFxuICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgyKSkgKyAnICcgKyBzaXplc1tpXTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBmaWxlIHBhdGggZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkRmlsZVBhdGgocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmICghcGF0aCB8fCBwYXRoLnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGZvciBpbnZhbGlkIGNoYXJhY3RlcnNcbiAgY29uc3QgaW52YWxpZENoYXJzID0gL1s8PjpcInw/Kl0vO1xuICBpZiAoaW52YWxpZENoYXJzLnRlc3QocGF0aCkpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGZvciByZXNlcnZlZCBuYW1lcyBvbiBXaW5kb3dzXG4gIGNvbnN0IHJlc2VydmVkTmFtZXMgPSAvXihDT058UFJOfEFVWHxOVUx8Q09NWzEtOV18TFBUWzEtOV0pJC9pO1xuICBjb25zdCBmaWxlTmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcbiAgaWYgKHJlc2VydmVkTmFtZXMudGVzdChmaWxlTmFtZS5zcGxpdCgnLicpWzBdKSkgcmV0dXJuIGZhbHNlO1xuICBcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogU2FuaXRpemUgZmlsZSBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUZpbGVQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoXG4gICAgLnJlcGxhY2UoL1s8PjpcInw/Kl0vZywgJ18nKVxuICAgIC5yZXBsYWNlKC9cXFxcL2csICcvJylcbiAgICAucmVwbGFjZSgvXFwvKy9nLCAnLycpXG4gICAgLnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcbn1cbiIsIi8qKlxuICogTW9kYWwgQ2xhc3NlcyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRNYW5hZ2VtZW50Q2xpZW50IH0gZnJvbSAnLi92YXVsdC1hcGktY2xpZW50JztcbmltcG9ydCB7IFxuICBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlLCBcbiAgVmF1bHRTZWFyY2hSZXNwb25zZSwgXG4gIEZpbGVPcGVyYXRpb25SZXF1ZXN0LFxuICBTZWFyY2hUeXBlLFxuICBWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlXG59IGZyb20gJy4vdmF1bHQtdHlwZXMnO1xuXG4vLyA9PT0gVkFVTFQgU1RSVUNUVVJFIE1PREFMID09PVxuXG5leHBvcnQgY2xhc3MgVmF1bHRTdHJ1Y3R1cmVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgcHJpdmF0ZSB2YXVsdENsaWVudDogVmF1bHRNYW5hZ2VtZW50Q2xpZW50O1xuICBwcml2YXRlIGZvY3VzUGF0aD86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBwbHVnaW4udmF1bHRDbGllbnQ7XG4gIH1cblxuICBzZXRGb2N1c1BhdGgocGF0aDogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5mb2N1c1BhdGggPSBwYXRoO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHQtc3RydWN0dXJlLW1vZGFsJyk7XG4gICAgXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbW9kYWwtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdWYXVsdCBTdHJ1Y3R1cmUgQW5hbHlzaXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSBoZWFkZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2gnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBMb2FkaW5nIHN0YXRlXG4gICAgY29uc3QgbG9hZGluZ0VsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LWxvYWRpbmcnIH0pO1xuICAgIGxvYWRpbmdFbC5zZXRUZXh0KCfwn5SNIEFuYWx5emluZyB2YXVsdCBzdHJ1Y3R1cmUuLi4nKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHtcbiAgICAgICAgaW5jbHVkZV9jb250ZW50OiBmYWxzZSxcbiAgICAgICAgbWF4X2RlcHRoOiA1XG4gICAgICB9KTtcblxuICAgICAgbG9hZGluZ0VsLnJlbW92ZSgpO1xuICAgICAgdGhpcy5yZW5kZXJTdHJ1Y3R1cmUoY29udGVudEVsLCBzdHJ1Y3R1cmUpO1xuICAgICAgXG4gICAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGxvYWRpbmdFbC5zZXRUZXh0KCfinYwgRmFpbGVkIHRvIGxvYWQgdmF1bHQgc3RydWN0dXJlJyk7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmV0cnlCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgIHRleHQ6ICdSZXRyeScsXG4gICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICB9KTtcbiAgICAgIHJldHJ5QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9uT3BlbigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU3RydWN0dXJlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHN0cnVjdHVyZTogVmF1bHRTdHJ1Y3R1cmVSZXNwb25zZSkge1xuICAgIC8vIFN0YXRzIG92ZXJ2aWV3XG4gICAgY29uc3Qgc3RhdHNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC1zdGF0cycgfSk7XG4gICAgc3RhdHNFbC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwic3RhdC1ncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfk4E8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+RmlsZXM8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtzdHJ1Y3R1cmUudG90YWxfZmlsZXN9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+Tgjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5Gb2xkZXJzPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7c3RydWN0dXJlLnRvdGFsX2ZvbGRlcnN9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+Svjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5TaXplPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7KHN0cnVjdHVyZS50b3RhbF9zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyBGb2xkZXIgdHJlZVxuICAgIGNvbnN0IHRyZWVDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtdHJlZS1jb250YWluZXInIH0pO1xuICAgIHRyZWVDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRm9sZGVyIFN0cnVjdHVyZScgfSk7XG4gICAgXG4gICAgY29uc3QgdHJlZUVsID0gdHJlZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC10cmVlJyB9KTtcbiAgICB0aGlzLnJlbmRlckZvbGRlcih0cmVlRWwsIHN0cnVjdHVyZS5zdHJ1Y3R1cmUsIDApO1xuXG4gICAgLy8gUmVjZW50IGZpbGVzXG4gICAgaWYgKHN0cnVjdHVyZS5yZWNlbnRfZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVjZW50Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlcy1jb250YWluZXInIH0pO1xuICAgICAgcmVjZW50Q29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlY2VudCBGaWxlcycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlY2VudEVsID0gcmVjZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlcycgfSk7XG4gICAgICBzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzLnNsaWNlKDAsIDEwKS5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICBjb25zdCBmaWxlRWwgPSByZWNlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZScgfSk7XG4gICAgICAgIGZpbGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5OEPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtmaWxlLm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1kYXRlXCI+JHtuZXcgRGF0ZShmaWxlLm1vZGlmaWVkKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBPcnBoYW5lZCBmaWxlc1xuICAgIGlmIChzdHJ1Y3R1cmUub3JwaGFuZWRfZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgb3JwaGFuZWRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3JwaGFuZWQtZmlsZXMtY29udGFpbmVyJyB9KTtcbiAgICAgIG9ycGhhbmVkQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KaoO+4jyBPcnBoYW5lZCBGaWxlcycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG9ycGhhbmVkRWwgPSBvcnBoYW5lZENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdvcnBoYW5lZC1maWxlcycgfSk7XG4gICAgICBzdHJ1Y3R1cmUub3JwaGFuZWRfZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgY29uc3Qgb3JwaGFuRWwgPSBvcnBoYW5lZEVsLmNyZWF0ZURpdih7IGNsczogJ29ycGhhbmVkLWZpbGUnIH0pO1xuICAgICAgICBvcnBoYW5FbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5SXPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1wYXRoXCI+JHtmaWxlLnBhdGh9PC9zcGFuPlxuICAgICAgICBgO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGb2xkZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZm9sZGVyOiBhbnksIGxldmVsOiBudW1iZXIpIHtcbiAgICBjb25zdCBmb2xkZXJFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogJ2ZvbGRlci1pdGVtJyxcbiAgICAgIGF0dHI6IHsgJ2RhdGEtbGV2ZWwnOiBsZXZlbC50b1N0cmluZygpIH1cbiAgICB9KTtcbiAgICBcbiAgICBmb2xkZXJFbC5pbm5lckhUTUwgPSBgXG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci10b2dnbGVcIj7ilrY8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci1pY29uXCI+8J+TgTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiZm9sZGVyLW5hbWVcIj4ke2ZvbGRlci5uYW1lfTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiZm9sZGVyLWNvdW50XCI+KCR7Zm9sZGVyLmNoaWxkcmVuLmxlbmd0aH0pPC9zcGFuPlxuICAgIGA7XG5cbiAgICAvLyBBZGQgY2hpbGRyZW4gY29udGFpbmVyXG4gICAgY29uc3QgY2hpbGRyZW5FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogJ2ZvbGRlci1jaGlsZHJlbicsXG4gICAgICBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogbm9uZTsnIH1cbiAgICB9KTtcblxuICAgIC8vIFRvZ2dsZSBmdW5jdGlvbmFsaXR5XG4gICAgY29uc3QgdG9nZ2xlRWwgPSBmb2xkZXJFbC5xdWVyeVNlbGVjdG9yKCcuZm9sZGVyLXRvZ2dsZScpIGFzIEhUTUxFbGVtZW50O1xuICAgIHRvZ2dsZUVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBpc09wZW4gPSBjaGlsZHJlbkVsLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgIGNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSA9IGlzT3BlbiA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICB0b2dnbGVFbC50ZXh0Q29udGVudCA9IGlzT3BlbiA/ICfilrYnIDogJ+KWvCc7XG4gICAgfTtcblxuICAgIC8vIFJlbmRlciBjaGlsZHJlblxuICAgIGZvbGRlci5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZDogYW55KSA9PiB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2ZvbGRlcicpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJGb2xkZXIoY2hpbGRyZW5FbCwgY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBmaWxlRWwgPSBjaGlsZHJlbkVsLmNyZWF0ZURpdih7IFxuICAgICAgICAgIGNsczogJ2ZpbGUtaXRlbScsXG4gICAgICAgICAgYXR0cjogeyAnZGF0YS1sZXZlbCc6IChsZXZlbCArIDEpLnRvU3RyaW5nKCkgfVxuICAgICAgICB9KTtcbiAgICAgICAgZmlsZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaWNvblwiPvCfk4Q8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLW5hbWVcIj4ke2NoaWxkLm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1zaXplXCI+JHsoY2hpbGQuc2l6ZSAvIDEwMjQpLnRvRml4ZWQoMSl9S0I8L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbi8vID09PSBTTUFSVCBTRUFSQ0ggTU9EQUwgPT09XG5cbmV4cG9ydCBjbGFzcyBTbWFydFNlYXJjaE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHZhdWx0Q2xpZW50OiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgaW5pdGlhbFF1ZXJ5Pzogc3RyaW5nO1xuICBwcml2YXRlIHNlYXJjaFR5cGU/OiBTZWFyY2hUeXBlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFueSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdENsaWVudCA9IHBsdWdpbi52YXVsdENsaWVudDtcbiAgfVxuXG4gIHNldEluaXRpYWxRdWVyeShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoVHlwZSk6IHRoaXMge1xuICAgIHRoaXMuaW5pdGlhbFF1ZXJ5ID0gcXVlcnk7XG4gICAgdGhpcy5zZWFyY2hUeXBlID0gdHlwZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3NtYXJ0LXNlYXJjaC1tb2RhbCcpO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn5SNIFNtYXJ0IFZhdWx0IFNlYXJjaCcgfSk7XG5cbiAgICAvLyBTZWFyY2ggZm9ybVxuICAgIGNvbnN0IHNlYXJjaEZvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWZvcm0nIH0pO1xuICAgIFxuICAgIGNvbnN0IHF1ZXJ5SW5wdXQgPSBzZWFyY2hGb3JtLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgc2VhcmNoIHF1ZXJ5Li4uJyxcbiAgICAgIGNsczogJ3NlYXJjaC1xdWVyeS1pbnB1dCdcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5pbml0aWFsUXVlcnkpIHtcbiAgICAgIHF1ZXJ5SW5wdXQudmFsdWUgPSB0aGlzLmluaXRpYWxRdWVyeTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hUeXBlU2VsZWN0ID0gc2VhcmNoRm9ybS5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdzZWFyY2gtdHlwZS1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IHNlYXJjaFR5cGVzID0gW1xuICAgICAgeyB2YWx1ZTogJ2NvbXByZWhlbnNpdmUnLCBsYWJlbDogJ0NvbXByZWhlbnNpdmUnIH0sXG4gICAgICB7IHZhbHVlOiAnY29udGVudCcsIGxhYmVsOiAnQ29udGVudCcgfSxcbiAgICAgIHsgdmFsdWU6ICdmaWxlbmFtZScsIGxhYmVsOiAnRmlsZW5hbWUnIH0sXG4gICAgICB7IHZhbHVlOiAndGFncycsIGxhYmVsOiAnVGFncycgfSxcbiAgICAgIHsgdmFsdWU6ICdsaW5rcycsIGxhYmVsOiAnTGlua3MnIH1cbiAgICBdO1xuICAgIFxuICAgIHNlYXJjaFR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBzZWFyY2hUeXBlU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiB0eXBlLnZhbHVlIH0pO1xuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gdHlwZS5sYWJlbDtcbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAodGhpcy5zZWFyY2hUeXBlIHx8ICdjb21wcmVoZW5zaXZlJykpIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IHNlYXJjaEZvcm0uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2VhcmNoJyxcbiAgICAgIGNsczogJ21vZC1jdGEgc2VhcmNoLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIC8vIFJlc3VsdHMgY29udGFpbmVyXG4gICAgY29uc3QgcmVzdWx0c0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtcmVzdWx0cy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gU2VhcmNoIGZ1bmN0aW9uXG4gICAgY29uc3QgcGVyZm9ybVNlYXJjaCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gcXVlcnlJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIHNlYXJjaCBxdWVyeScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlYXJjaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZWFyY2hpbmcuLi4nO1xuICAgICAgc2VhcmNoQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9hZGluZ0VsID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtbG9hZGluZycgfSk7XG4gICAgICBsb2FkaW5nRWwudGV4dENvbnRlbnQgPSAn8J+UjSBTZWFyY2hpbmcgdmF1bHQuLi4nO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5zZWFyY2hWYXVsdCh7XG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgc2VhcmNoX3R5cGU6IHNlYXJjaFR5cGVTZWxlY3QudmFsdWUgYXMgU2VhcmNoVHlwZSxcbiAgICAgICAgICBtYXhfcmVzdWx0czogdGhpcy5wbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5zZWFyY2hSZXN1bHRzTGltaXQgfHwgNTAsXG4gICAgICAgICAgaW5jbHVkZV9jb250ZW50OiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvYWRpbmdFbC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTZWFyY2hSZXN1bHRzKHJlc3VsdHNDb250YWluZXIsIHJlc3VsdHMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2FkaW5nRWwudGV4dENvbnRlbnQgPSAn4p2MIFNlYXJjaCBmYWlsZWQnO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2VhcmNoQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlYXJjaCc7XG4gICAgICAgIHNlYXJjaEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICBzZWFyY2hCdXR0b24ub25jbGljayA9IHBlcmZvcm1TZWFyY2g7XG4gICAgcXVlcnlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgcGVyZm9ybVNlYXJjaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQXV0by1zZWFyY2ggaWYgaW5pdGlhbCBxdWVyeSBwcm92aWRlZFxuICAgIGlmICh0aGlzLmluaXRpYWxRdWVyeSkge1xuICAgICAgcGVyZm9ybVNlYXJjaCgpO1xuICAgIH1cblxuICAgIC8vIEZvY3VzIGlucHV0XG4gICAgcXVlcnlJbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTZWFyY2hSZXN1bHRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJlc3VsdHM6IFZhdWx0U2VhcmNoUmVzcG9uc2UpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgU2VhcmNoIFJlc3VsdHMgKCR7cmVzdWx0cy50b3RhbF9mb3VuZH0pYCB9KTtcblxuICAgIGlmIChyZXN1bHRzLmluc2lnaHRzKSB7XG4gICAgICBjb25zdCBpbnNpZ2h0c0VsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1pbnNpZ2h0cycgfSk7XG4gICAgICBpbnNpZ2h0c0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImluc2lnaHRzLWhlYWRlclwiPvCfp6AgQUkgSW5zaWdodHM8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluc2lnaHRzLWNvbnRlbnRcIj4ke3Jlc3VsdHMuaW5zaWdodHN9PC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHRzLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICAgIGNsczogJ25vLXJlc3VsdHMnLFxuICAgICAgICB0ZXh0OiAnTm8gcmVzdWx0cyBmb3VuZC4gVHJ5IGEgZGlmZmVyZW50IHNlYXJjaCB0ZXJtIG9yIHR5cGUuJyBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdHNMaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1yZXN1bHRzLWxpc3QnIH0pO1xuICAgIFxuICAgIHJlc3VsdHMucmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICBjb25zdCByZXN1bHRFbCA9IHJlc3VsdHNMaXN0LmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1yZXN1bHQnIH0pO1xuICAgICAgXG4gICAgICByZXN1bHRFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtaGVhZGVyXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHQtZmlsZS1uYW1lXCI+JHtyZXN1bHQuZmlsZV9uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlc3VsdC1tYXRjaC10eXBlXCI+JHtyZXN1bHQubWF0Y2hfdHlwZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHQtc2NvcmVcIj4keyhyZXN1bHQuc2NvcmUgKiAxMDApLnRvRml4ZWQoMCl9JTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtcGF0aFwiPiR7cmVzdWx0LmZpbGVfcGF0aH08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdC1wcmV2aWV3XCI+JHtyZXN1bHQucHJldmlld308L2Rpdj5cbiAgICAgICAgJHtyZXN1bHQubWF0Y2hlcy5sZW5ndGggPiAwID8gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtbWF0Y2hlc1wiPlxuICAgICAgICAgICAgPHN0cm9uZz5NYXRjaGVzOjwvc3Ryb25nPiAke3Jlc3VsdC5tYXRjaGVzLmpvaW4oJywgJyl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgIGA7XG5cbiAgICAgIC8vIENsaWNrIHRvIG9wZW4gZmlsZVxuICAgICAgcmVzdWx0RWwub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChyZXN1bHQuZmlsZV9wYXRoLCAnJyk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBTdWdnZXN0ZWQgcXVlcmllc1xuICAgIGlmIChyZXN1bHRzLnN1Z2dlc3RlZF9xdWVyaWVzICYmIHJlc3VsdHMuc3VnZ2VzdGVkX3F1ZXJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3VnZ2VzdGlvbnNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0ZWQtcXVlcmllcycgfSk7XG4gICAgICBzdWdnZXN0aW9uc0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ/CfkqEgU3VnZ2VzdGVkIFF1ZXJpZXMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBzdWdnZXN0aW9uc0xpc3QgPSBzdWdnZXN0aW9uc0VsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb25zLWxpc3QnIH0pO1xuICAgICAgcmVzdWx0cy5zdWdnZXN0ZWRfcXVlcmllcy5mb3JFYWNoKHN1Z2dlc3Rpb24gPT4ge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWwgPSBzdWdnZXN0aW9uc0xpc3QuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgdGV4dDogc3VnZ2VzdGlvbixcbiAgICAgICAgICBjbHM6ICdzdWdnZXN0aW9uLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIHN1Z2dlc3Rpb25FbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5SW5wdXQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLXF1ZXJ5LWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICBpZiAocXVlcnlJbnB1dCkge1xuICAgICAgICAgICAgcXVlcnlJbnB1dC52YWx1ZSA9IHN1Z2dlc3Rpb247XG4gICAgICAgICAgICBxdWVyeUlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleXByZXNzJywgeyBrZXk6ICdFbnRlcicgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLy8gPT09IEZJTEUgT1BFUkFUSU9OUyBNT0RBTCA9PT1cblxuZXhwb3J0IGNsYXNzIEZpbGVPcGVyYXRpb25zTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBhbnk7XG4gIHByaXZhdGUgdmF1bHRDbGllbnQ6IFZhdWx0TWFuYWdlbWVudENsaWVudDtcbiAgcHJpdmF0ZSBpbml0aWFsUGF0aD86IHN0cmluZztcbiAgcHJpdmF0ZSBvcGVyYXRpb24/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogYW55KSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnZhdWx0Q2xpZW50ID0gcGx1Z2luLnZhdWx0Q2xpZW50O1xuICB9XG5cbiAgc2V0SW5pdGlhbFBhdGgocGF0aDogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5pbml0aWFsUGF0aCA9IHBhdGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRPcGVyYXRpb24ob3BlcmF0aW9uOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZpbGUtb3BlcmF0aW9ucy1tb2RhbCcpO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn5OBIEZpbGUgT3BlcmF0aW9ucyBNYW5hZ2VyJyB9KTtcblxuICAgIC8vIE9wZXJhdGlvbiBzZWxlY3Rpb25cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnT3BlcmF0aW9uJylcbiAgICAgIC5zZXREZXNjKCdTZWxlY3QgdGhlIGZpbGUgb3BlcmF0aW9uIHRvIHBlcmZvcm0nKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgIC5hZGRPcHRpb24oJ2NyZWF0ZScsICdDcmVhdGUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ3VwZGF0ZScsICdVcGRhdGUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ2RlbGV0ZScsICdEZWxldGUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ21vdmUnLCAnTW92ZSBGaWxlJylcbiAgICAgICAgLmFkZE9wdGlvbignY29weScsICdDb3B5IEZpbGUnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5vcGVyYXRpb24gfHwgJ2NyZWF0ZScpXG4gICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZU9wZXJhdGlvbkZvcm0oKTtcbiAgICAgICAgfSkpO1xuXG4gICAgLy8gT3BlcmF0aW9uIGZvcm0gY29udGFpbmVyXG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdvcGVyYXRpb24tZm9ybScgfSk7XG4gICAgdGhpcy51cGRhdGVPcGVyYXRpb25Gb3JtKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU9wZXJhdGlvbkZvcm0oKSB7XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5vcGVyYXRpb24tZm9ybScpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghZm9ybUNvbnRhaW5lcikgcmV0dXJuO1xuICAgIFxuICAgIGZvcm1Db250YWluZXIuZW1wdHkoKTtcblxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uIHx8ICdjcmVhdGUnO1xuICAgIFxuICAgIC8vIEZpbGUgcGF0aCBpbnB1dFxuICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnRmlsZSBQYXRoJylcbiAgICAgIC5zZXREZXNjKCdQYXRoIHRvIHRoZSBmaWxlIChpbmNsdWRpbmcgZmlsZW5hbWUpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3BhdGgvdG8vZmlsZS5tZCcpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLmluaXRpYWxQYXRoIHx8ICcnKVxuICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4gdGhpcy5pbml0aWFsUGF0aCA9IHZhbHVlKSk7XG5cbiAgICAvLyBBZGRpdGlvbmFsIGlucHV0cyBiYXNlZCBvbiBvcGVyYXRpb25cbiAgICBpZiAob3BlcmF0aW9uID09PSAnbW92ZScgfHwgb3BlcmF0aW9uID09PSAnY29weScpIHtcbiAgICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdOZXcgUGF0aCcpXG4gICAgICAgIC5zZXREZXNjKCdEZXN0aW5hdGlvbiBwYXRoIGZvciB0aGUgZmlsZScpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignbmV3L3BhdGgvdG8vZmlsZS5tZCcpKTtcbiAgICB9XG5cbiAgICBpZiAob3BlcmF0aW9uID09PSAnY3JlYXRlJyB8fCBvcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnQ29udGVudCcpXG4gICAgICAgIC5zZXREZXNjKCdGaWxlIGNvbnRlbnQnKVxuICAgICAgICAuYWRkVGV4dEFyZWEodGV4dGFyZWEgPT4ge1xuICAgICAgICAgIHRleHRhcmVhLnNldFBsYWNlaG9sZGVyKCdFbnRlciBmaWxlIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSAnY3JlYXRlJykge1xuICAgICAgICAgICAgdGV4dGFyZWEuc2V0VmFsdWUoJyMgTmV3IEZpbGVcXG5cXG5Db250ZW50IGdvZXMgaGVyZS4uLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQmFja3VwIG9wdGlvblxuICAgIGlmIChvcGVyYXRpb24gIT09ICdjcmVhdGUnKSB7XG4gICAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnQ3JlYXRlIEJhY2t1cCcpXG4gICAgICAgIC5zZXREZXNjKCdDcmVhdGUgYSBiYWNrdXAgYmVmb3JlIHBlcmZvcm1pbmcgdGhlIG9wZXJhdGlvbicpXG4gICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0cnVlKSk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSBidXR0b25cbiAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KGBFeGVjdXRlICR7b3BlcmF0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3BlcmF0aW9uLnNsaWNlKDEpfWApXG4gICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmV4ZWN1dGVPcGVyYXRpb24oKSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlT3BlcmF0aW9uKCkge1xuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uIHx8ICdjcmVhdGUnO1xuICAgIGNvbnN0IHBhdGhJbnB1dCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyKj1cInBhdGgvdG8vZmlsZVwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbmV3UGF0aElucHV0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignaW5wdXRbcGxhY2Vob2xkZXIqPVwibmV3L3BhdGhcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGNvbnRlbnRUZXh0YXJlYSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBjb25zdCBiYWNrdXBUb2dnbGUgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgaWYgKCFwYXRoSW5wdXQ/LnZhbHVlKSB7XG4gICAgICBuZXcgTm90aWNlKCdGaWxlIHBhdGggaXMgcmVxdWlyZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCA9IHtcbiAgICAgIG9wZXJhdGlvbjogb3BlcmF0aW9uIGFzIGFueSxcbiAgICAgIGZpbGVfcGF0aDogcGF0aElucHV0LnZhbHVlLFxuICAgICAgYmFja3VwOiBiYWNrdXBUb2dnbGU/LmNoZWNrZWQgPz8gdHJ1ZVxuICAgIH07XG5cbiAgICBpZiAobmV3UGF0aElucHV0Py52YWx1ZSkge1xuICAgICAgcmVxdWVzdC5uZXdfcGF0aCA9IG5ld1BhdGhJbnB1dC52YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoY29udGVudFRleHRhcmVhPy52YWx1ZSkge1xuICAgICAgcmVxdWVzdC5jb250ZW50ID0gY29udGVudFRleHRhcmVhLnZhbHVlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBuZXcgTm90aWNlKGBQZXJmb3JtaW5nICR7b3BlcmF0aW9ufS4uLmApO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5wZXJmb3JtRmlsZU9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgbmV3IE5vdGljZShg4pyFICR7b3BlcmF0aW9ufSBzdWNjZXNzZnVsOiAke3Jlc3VsdC5tZXNzYWdlfWApO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCAke29wZXJhdGlvbn0gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBURmlsZSwgRWRpdG9yUG9zaXRpb24sIHJlcXVlc3QgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ1RhYiwgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVklFV19UWVBFX1ZBVUxUUElMT1QsIFZhdWx0UGlsb3RWaWV3IH0gZnJvbSAnLi92aWV3JztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCLCBWYXVsdFBpbG90RnVsbFRhYlZpZXcgfSBmcm9tICcuL2Z1bGwtdGFiLXZpZXcnO1xuaW1wb3J0IHsgQ2hhdE1vZGFsIH0gZnJvbSAnLi9jaGF0LW1vZGFsJztcbmltcG9ydCB7IFdvcmtmbG93TW9kYWwgfSBmcm9tICcuL3dvcmtmbG93LW1vZGFsJztcbmltcG9ydCB7IEV2b0FnZW50WENsaWVudCB9IGZyb20gJy4vYXBpLWNsaWVudCc7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ3MsIENvcGlsb3RSZXNwb25zZSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgZmV0Y2hTY2hlZHVsZSwgaW5qZWN0U2NoZWR1bGUsIHZhbGlkYXRlU2NoZWR1bGVNYXJrZG93biwgZmluZFNjaGVkdWxlU2VjdGlvbiwgZmluZFBsYW5TZWN0aW9uIH0gZnJvbSAnLi9wbGFubmVyJztcbmltcG9ydCB7IHBsYW5NeURheURlYnVnZ2VyIH0gZnJvbSAnLi9wbGFuLW15LWRheS1kZWJ1Zyc7XG5pbXBvcnQgeyBzZXRBcHAgfSBmcm9tICcuL3ZhdWx0LXV0aWxzJztcbmltcG9ydCB7IFZhdWx0TWFuYWdlbWVudENsaWVudCB9IGZyb20gJy4vdmF1bHQtYXBpLWNsaWVudCc7XG5pbXBvcnQgeyBjcmVhdGVWYXVsdE1hbmFnZW1lbnRDb21tYW5kcyB9IGZyb20gJy4vdmF1bHQtY29tbWFuZHMnO1xuaW1wb3J0IHsgXG4gIFZhdWx0U3RydWN0dXJlTW9kYWwsIFxuICBTbWFydFNlYXJjaE1vZGFsLCBcbiAgRmlsZU9wZXJhdGlvbnNNb2RhbFxufSBmcm9tICcuL3ZhdWx0LW1vZGFscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhdWx0UGlsb3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5ncyE6IFZhdWx0UGlsb3RTZXR0aW5ncztcbiAgYXBpQ2xpZW50ITogRXZvQWdlbnRYQ2xpZW50O1xuICB2YXVsdENsaWVudCE6IFZhdWx0TWFuYWdlbWVudENsaWVudDtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb3BpbG90RW5hYmxlZCA9IGZhbHNlO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhcHAgaW5zdGFuY2UgZm9yIHZhdWx0LXV0aWxzXG4gICAgc2V0QXBwKHRoaXMuYXBwKTtcblxuICAgIC8vIEluaXRpYWxpemUgQVBJIGNsaWVudFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcblxuICAgIC8vIEluaXRpYWxpemUgdmF1bHQgbWFuYWdlbWVudCBpZiBlbmFibGVkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVWYXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgIH1cblxuICAgIC8vIFRlc3QgYmFja2VuZCBjb25uZWN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIFZhdWx0UGlsb3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcsIDMwMDApO1xuICAgICAgICAvLyBDb25uZWN0IFdlYlNvY2tldCBpZiBlbmFibGVkXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCkge1xuICAgICAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkOicsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIEV2b0FnZW50WCBiYWNrZW5kIG9mZmxpbmUgLSBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yaycsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4pqg77iPIENhbm5vdCBjb25uZWN0IHRvIEV2b0FnZW50WCBiYWNrZW5kJywgNTAwMCk7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgdmlld3NcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgKGxlYWYpID0+IG5ldyBWYXVsdFBpbG90VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG4gICAgXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQixcbiAgICAgIChsZWFmKSA9PiBuZXcgVmF1bHRQaWxvdEZ1bGxUYWJWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignYm90JywgJ1ZhdWx0UGlsb3QnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZ0LmN0cmxLZXkgfHwgZXZ0Lm1ldGFLZXkpIHtcbiAgICAgICAgLy8gT3BlbiBmdWxsIHRhYiB2aWV3IG9uIEN0cmwvQ21kICsgY2xpY2tcbiAgICAgICAgdGhpcy5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEZWZhdWx0IGFjdGlvbjogb3BlbiBjaGF0IG1vZGFsXG4gICAgICAgIHRoaXMub3BlbkNoYXRNb2RhbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJpYmJvbkljb25FbC5hZGRDbGFzcygndmF1bHRwaWxvdC1yaWJib24tY2xhc3MnKTtcbiAgICByaWJib25JY29uRWwudGl0bGUgPSAnVmF1bHRQaWxvdCAoQ3RybCtjbGljayBmb3IgRGFzaGJvYXJkKSc7XG5cbiAgICAvLyBSZWdpc3RlciBjb21tYW5kc1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tY2hhdCcsXG4gICAgICBuYW1lOiAnT3BlbiBDaGF0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5DaGF0TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnZXhlY3V0ZS13b3JrZmxvdycsXG4gICAgICBuYW1lOiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuV29ya2Zsb3dNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhbmFseXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBbmFseXplIEN1cnJlbnQgVmF1bHQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYW5hbHl6ZVZhdWx0KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NvcGlsb3QtY29tcGxldGUnLFxuICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMuZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncXVpY2stY2hhdCcsXG4gICAgICBuYW1lOiAnUXVpY2sgQ2hhdCB3aXRoIFNlbGVjdGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi10YXNrcycsXG4gICAgICBuYW1lOiAnUGxhbiBUYXNrcyBmcm9tIE5vdGUnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5wbGFuVGFza3NGcm9tTm90ZShlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLW15LWRheScsXG4gICAgICBuYW1lOiAnUGxhbiBNeSBEYXknLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucGxhbk15RGF5KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tbXktZGF5LWRlYnVnJyxcbiAgICAgIG5hbWU6ICdQbGFuIE15IERheSAtIERlYnVnIENvbm5lY3Rpb24nLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZGVidWdQbGFuTXlEYXkoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi12YXVsdHBpbG90LXZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBWaWV3JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLXZhdWx0cGlsb3QtZnVsbC10YWInLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBEYXNoYm9hcmQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVGdWxsVGFiVmlldygpXG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gICAgdGhpcy5yZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG5cbiAgICAvLyBSZWdpc3RlciBlZGl0b3IgZXZlbnRzIGZvciBjb3BpbG90XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCAmJiB0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZhdWx0UGlsb3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBNYW5hZ2VtZW50XG4gIGNvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSByZXR1cm47XG5cbiAgICB0aGlzLmFwaUNsaWVudC5jb25uZWN0V2ViU29ja2V0KHtcbiAgICAgIG9uQ2hhdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjaGF0IHVwZGF0ZXNcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjaGF0IHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbldvcmtmbG93UHJvZ3Jlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93OiAke2RhdGEuc3RlcH1gLCAyMDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvcGlsb3Q6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBjb3BpbG90IHN1Z2dlc3Rpb25zXG4gICAgICAgIHRoaXMuaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25WYXVsdFN5bmM6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB2YXVsdCBzeW5jaHJvbml6YXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IHN5bmMgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uSW50ZW50RGVidWc6IChkZWJ1ZykgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgaW50ZW50IGRlYnVnIGluZm8gKG9ubHkgaW4gZGVidWcgbW9kZSlcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ludGVudERlYnVnICYmIHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ludGVudCBkZWJ1ZzonLCBkZWJ1Zyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgbmV3IE5vdGljZShgV2ViU29ja2V0IGVycm9yOiAke2Vycm9yfWAsIDUwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRGlzY29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgZGlzY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgdGhpcy5hcGlDbGllbnQuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBpc1dlYlNvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBNb2RhbCBNYW5hZ2VtZW50XG4gIG9wZW5DaGF0TW9kYWwoKSB7XG4gICAgbmV3IENoYXRNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlbldvcmtmbG93TW9kYWwoKSB7XG4gICAgbmV3IFdvcmtmbG93TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIC8vIENvbW1hbmQgSW1wbGVtZW50YXRpb25zXG4gIGFzeW5jIGFuYWx5emVWYXVsdCgpIHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdBbmFseXppbmcgdmF1bHQuLi4nLCAwKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlc1xuICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICAvLyBJbmNsdWRlIHVwIHRvIDEwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMTApKSB7XG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgY29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2ZpbGVDb250ZW50fVxcblxcbmA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuYW5hbHl6ZVZhdWx0Q29udGV4dCh7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGFuYWx5c2lzX3R5cGU6ICdpbnNpZ2h0cydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhbmFseXNpcyBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdCBBbmFseXNpcyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IGFuYWx5c2lzQ29udGVudCA9IGAjIFZhdWx0IEFuYWx5c2lzIC0gJHt0aW1lc3RhbXB9XFxuXFxuYDtcbiAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBBbmFseXNpc1xcblxcbiR7cmVzcG9uc2UuZGF0YS5hbmFseXNpc31cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5zaWdodHMgJiYgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBLZXkgSW5zaWdodHNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMuZm9yRWFjaChpbnNpZ2h0ID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke2luc2lnaHR9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMgJiYgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgUmVjb21tZW5kYXRpb25zXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtyZWN9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgYW5hbHlzaXNDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVmF1bHQgYW5hbHlzaXMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBBbmFseXNpcyBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSB7XG4gICAgICBuZXcgTm90aWNlKCdDb3BpbG90IGlzIGRpc2FibGVkIGluIHNldHRpbmdzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSBjdXJyZW50TGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcbiAgICBjb25zdCBmdWxsVGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gICAgLy8gQ2xpZW50LXNpZGUgdmFsaWRhdGlvbiB0byBwcmV2ZW50IDQyMiBlcnJvcnNcbiAgICBpZiAoIWZ1bGxUZXh0IHx8IGZ1bGxUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBjb21wbGV0ZSBlbXB0eSB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBmdWxsVGV4dCxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nLFxuICAgICAgICBjb250ZXh0OiB0ZXh0QmVmb3JlQ3Vyc29yXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgY29tcGxldGlvbiBhdCBjdXJzb3JcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShyZXNwb25zZS5kYXRhLmNvbXBsZXRpb24sIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0NvbXBsZXRpb24gaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgbmV3IE5vdGljZSgnTm8gdGV4dCBzZWxlY3RlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNoYXQoe1xuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGV4cGxhaW4gb3IgYW5hbHl6ZSB0aGlzIHRleHQ6IFwiJHtzZWxlY3Rpb259XCJgLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBlZGl0b3IuZ2V0VmFsdWUoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IHJlc3BvbnNlIGJlbG93IHNlbGVjdGlvblxuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCd0bycpO1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gYFxcblxcbioqVmF1bHRQaWxvdCBBbmFseXNpczoqKlxcbiR7cmVzcG9uc2UuZGF0YS5yZXNwb25zZX1cXG5cXG5gO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0FuYWx5c2lzIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghY29udGVudC50cmltKCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGNvbnRlbnQgdG8gYW5hbHl6ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHRhc2tzLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgICBnb2FsOiBgQ3JlYXRlIGEgdGFzayBwbGFuIGJhc2VkIG9uIHRoaXMgbm90ZTogJHthY3RpdmVGaWxlPy5uYW1lIHx8ICdVbnRpdGxlZCd9YCxcbiAgICAgICAgY29udGV4dDogY29udGVudCxcbiAgICAgICAgdGltZWZyYW1lOiAnMSB3ZWVrJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRhc2sgcGxhbiBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBUYXNrIFBsYW4gLSAke2FjdGl2ZUZpbGU/LmJhc2VuYW1lIHx8ICdVbnRpdGxlZCd9IC0gJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXNrQ29udGVudCA9IGAjICR7cmVzcG9uc2UuZGF0YS5wbGFuLnRpdGxlfVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAke3Jlc3BvbnNlLmRhdGEucGxhbi5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgKipFc3RpbWF0ZWQgRHVyYXRpb246KiogJHtyZXNwb25zZS5kYXRhLnBsYW4uZXN0aW1hdGVkX2R1cmF0aW9ufVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzICYmIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIFRhc2tzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnBsYW4udGFza3MuZm9yRWFjaCgodGFzazogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2suc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICdbeF0nIDogJ1sgXSc7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgJHtjaGVja2JveH0gKioke3Rhc2sudGl0bGV9KiogKCR7dGFzay5wcmlvcml0eX0gcHJpb3JpdHkpXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAke3Rhc2suZGVzY3JpcHRpb259XFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAqRXN0aW1hdGVkIHRpbWU6ICR7dGFzay5lc3RpbWF0ZWRfdGltZX0qXFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMgJiYgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgTWlsZXN0b25lc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmZvckVhY2goKG1pbGVzdG9uZTogYW55KSA9PiB7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgLSAqKiR7bWlsZXN0b25lLnRpdGxlfSoqICgke21pbGVzdG9uZS50YXJnZXRfZGF0ZX0pXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICR7bWlsZXN0b25lLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIHRhc2tDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFuIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1Rhc2sgcGxhbm5pbmcgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW5uaW5nIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5NeURheSgpIHtcbiAgICBjb25zb2xlLmxvZygn8J+agCBbUGxhbiBNeSBEYXldIENvbW1hbmQgc3RhcnRlZCcpO1xuICAgIFxuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gW1BsYW4gTXkgRGF5XSBObyBhY3RpdmUgZmlsZSBmb3VuZCcpO1xuICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIG5vdGXigJRvcGVuIHRvZGF5XFwncyBkYWlseSBub3RlIGZpcnN0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfwn5OBIFtQbGFuIE15IERheV0gQWN0aXZlIGZpbGU6Jywge1xuICAgICAgbmFtZTogYWN0aXZlRmlsZS5uYW1lLFxuICAgICAgcGF0aDogYWN0aXZlRmlsZS5wYXRoLFxuICAgICAgZXh0ZW5zaW9uOiBhY3RpdmVGaWxlLmV4dGVuc2lvblxuICAgIH0pO1xuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgeW91ciBkYXkgd2l0aCBBSS4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OWIFtQbGFuIE15IERheV0gUmVhZGluZyBmaWxlIGNvbnRlbnQuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gUmVhZCB0aGUgZW50aXJlIGZpbGUgY29udGVudFxuICAgICAgY29uc3QgZmlsZVRleHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIEZpbGUgY29udGVudCByZWFkOicsIHtcbiAgICAgICAgbGVuZ3RoOiBmaWxlVGV4dC5sZW5ndGgsXG4gICAgICAgIGhhc0NvbnRlbnQ6IGZpbGVUZXh0LnRyaW0oKS5sZW5ndGggPiAwLFxuICAgICAgICBmaXJzdExpbmU6IGZpbGVUZXh0LnNwbGl0KCdcXG4nKVswXSxcbiAgICAgICAgbGluZUNvdW50OiBmaWxlVGV4dC5zcGxpdCgnXFxuJykubGVuZ3RoXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBDaGVja2luZyBBUEkgY2xpZW50Li4uJyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UlyBbUGxhbiBNeSBEYXldIEFQSSBjbGllbnQgc3RhdHVzOicsIHtcbiAgICAgICAgZXhpc3RzOiAhIXRoaXMuYXBpQ2xpZW50LFxuICAgICAgICB0eXBlOiB0eXBlb2YgdGhpcy5hcGlDbGllbnQsXG4gICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLmFwaUNsaWVudCA/ICdhdmFpbGFibGUnIDogJ25vdCBhdmFpbGFibGUnXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0aGlzLmFwaUNsaWVudCkge1xuICAgICAgICBjb25zdCBlcnJvciA9ICdBUEkgY2xpZW50IG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgVmF1bHRQaWxvdCBzZXR0aW5ncyBhbmQgY29ubmVjdGlvbi4nO1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OkIFtQbGFuIE15IERheV0gRmV0Y2hpbmcgc2NoZWR1bGUgZnJvbSBFdm9BZ2VudFguLi4nKTtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggc2NoZWR1bGUgZnJvbSBFdm9BZ2VudFggaW5zdGVhZCBvZiBsb2NhbGhvc3Q6MzAwMFxuICAgICAgY29uc3QgeyBzY2hlZHVsZU1hcmtkb3duLCBoZWFkbGluZSB9ID0gYXdhaXQgZmV0Y2hTY2hlZHVsZShmaWxlVGV4dCwgdGhpcy5hcGlDbGllbnQpO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIHJlY2VpdmVkOicsIHtcbiAgICAgICAgbWFya2Rvd25MZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgICAgICBoZWFkbGluZTogaGVhZGxpbmUsXG4gICAgICAgIGZpcnN0TGluZTogc2NoZWR1bGVNYXJrZG93bi5zcGxpdCgnXFxuJylbMF1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gVmFsaWRhdGluZyBzY2hlZHVsZS4uLicpO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgcmV0dXJuZWQgc2NoZWR1bGVcbiAgICAgIGlmICghdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duKHNjaGVkdWxlTWFya2Rvd24pKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gJ0ludmFsaWQgc2NoZWR1bGUgZGF0YSByZWNlaXZlZCBmcm9tIEFQSSc7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIFZhbGlkYXRpb24gZmFpbGVkOicsIHtcbiAgICAgICAgICBzY2hlZHVsZU1hcmtkb3duOiBzY2hlZHVsZU1hcmtkb3duLnN1YnN0cmluZygwLCAyMDApLFxuICAgICAgICAgIGxlbmd0aDogc2NoZWR1bGVNYXJrZG93bi5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OdIFtQbGFuIE15IERheV0gSW5qZWN0aW5nIHNjaGVkdWxlIGludG8gbm90ZS4uLicpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBub3RlIGFscmVhZHkgaGFzIGEgcGxhbiBzZWN0aW9uIChjb21tZW50IHdyYXBwZXIpIG9yIHNjaGVkdWxlIHNlY3Rpb25cbiAgICAgIGNvbnN0IGV4aXN0aW5nUGxhblNlY3Rpb24gPSBmaW5kUGxhblNlY3Rpb24oZmlsZVRleHQpO1xuICAgICAgY29uc3QgZXhpc3RpbmdTY2hlZHVsZVNlY3Rpb24gPSBmaW5kU2NoZWR1bGVTZWN0aW9uKGZpbGVUZXh0KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBFeGlzdGluZyBzZWN0aW9uczonLCB7XG4gICAgICAgIGhhc1BsYW5XcmFwcGVyOiAhIWV4aXN0aW5nUGxhblNlY3Rpb24sXG4gICAgICAgIGhhc1NjaGVkdWxlU2VjdGlvbjogISFleGlzdGluZ1NjaGVkdWxlU2VjdGlvbixcbiAgICAgICAgcGxhbkNvbnRlbnQ6IGV4aXN0aW5nUGxhblNlY3Rpb24/LlsyXT8uc3Vic3RyaW5nKDAsIDUwKSxcbiAgICAgICAgc2NoZWR1bGVIZWFkaW5nOiBleGlzdGluZ1NjaGVkdWxlU2VjdGlvbj8uWzFdPy5zdWJzdHJpbmcoMCwgNTApXG4gICAgICB9KTtcblxuICAgICAgLy8gSW5qZWN0IHRoZSBzY2hlZHVsZSBpbnRvIHRoZSBub3RlXG4gICAgICBjb25zdCB1cGRhdGVkVGV4dCA9IGluamVjdFNjaGVkdWxlKGZpbGVUZXh0LCBzY2hlZHVsZU1hcmtkb3duKTtcblxuICAgICAgY29uc29sZS5sb2coJ/Cfkr4gW1BsYW4gTXkgRGF5XSBVcGRhdGluZyBmaWxlLi4uJywge1xuICAgICAgICBvcmlnaW5hbExlbmd0aDogZmlsZVRleHQubGVuZ3RoLFxuICAgICAgICB1cGRhdGVkTGVuZ3RoOiB1cGRhdGVkVGV4dC5sZW5ndGgsXG4gICAgICAgIGNoYW5nZWQ6IGZpbGVUZXh0ICE9PSB1cGRhdGVkVGV4dFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHVwZGF0ZWRUZXh0KTtcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIEZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcblxuICAgICAgLy8gSGlkZSB0aGUgcHJvZ3Jlc3Mgbm90aWNlXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICAvLyBTaG93IHN1Y2Nlc3Mgbm90aWNlXG4gICAgICBjb25zdCBzdWNjZXNzTWVzc2FnZSA9IGhlYWRsaW5lID8gYCR7aGVhZGxpbmV9IOKchWAgOiAnU2NoZWR1bGUgaW5zZXJ0ZWQg4pyFJztcbiAgICAgIGNvbnNvbGUubG9nKCfwn46JIFtQbGFuIE15IERheV0gU3VjY2VzczonLCBzdWNjZXNzTWVzc2FnZSk7XG4gICAgICBuZXcgTm90aWNlKHN1Y2Nlc3NNZXNzYWdlKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBPcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CflI0gW1BsYW4gTXkgRGF5XSBFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBzdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogJ05vIHN0YWNrIHRyYWNlJyxcbiAgICAgICAgdHlwZTogdHlwZW9mIGVycm9yLFxuICAgICAgICBuYW1lOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubmFtZSA6ICdVbmtub3duJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdHlwZXMgb2YgZXJyb3JzIGZyb20gRXZvQWdlbnRYXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEFuYWx5emluZyBlcnJvciBtZXNzYWdlOicsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdBUEkgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gQVBJIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogVmF1bHRQaWxvdCBub3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WC4gQ2hlY2sgc2V0dGluZ3MgYW5kIHJlc3RhcnQgcGx1Z2luLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZG9lcyBub3QgaGF2ZSBwbGFuVGFza3MgbWV0aG9kJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBBUEkgY2xpZW50IG1pc3NpbmcgcGxhblRhc2tzIG1ldGhvZCcpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBFdm9BZ2VudFggQVBJIGNsaWVudCBvdXRkYXRlZC4gUGxlYXNlIHVwZGF0ZSBWYXVsdFBpbG90IHBsdWdpbi4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0pTT04nKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ludmFsaWQgc2NoZWR1bGUgZGF0YScpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gSW52YWxpZCByZXNwb25zZSBmb3JtYXQnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBFdm9BZ2VudFgnKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGYWlsZWQgdG8gZmV0Y2gnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIE5ldHdvcmsgZXJyb3InKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogVW5hYmxlIHRvIGNvbm5lY3QgdG8gRXZvQWdlbnRYIHNlcnZlci4gQ2hlY2sgeW91ciBjb25uZWN0aW9uIGFuZCBzZXJ2ZXIgc3RhdHVzLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGdlbmVyYXRlIHNjaGVkdWxlJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdTY2hlZHVsZSBmZXRjaCBmYWlsZWQnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIGdlbmVyYXRpb24gZmFpbGVkJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IEV2b0FnZW50WCB0YXNrIHBsYW5uaW5nIGZhaWxlZC4gQ2hlY2sgc2VydmVyIGxvZ3MgZm9yIGRldGFpbHMuJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdObyBkYXRhIGluIEFQSSByZXNwb25zZScpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRW1wdHkgQVBJIHJlc3BvbnNlJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IEV2b0FnZW50WCByZXR1cm5lZCBlbXB0eSByZXNwb25zZS4gVHJ5IGFnYWluIG9yIGNoZWNrIHNlcnZlciBzdGF0dXMuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gVW5oYW5kbGVkIGVycm9yJyk7XG4gICAgICAgICAgbmV3IE5vdGljZShgUGxhbm5pbmcgZXJyb3I6ICR7ZXJyb3JNZXNzYWdlLnN1YnN0cmluZygwLCAxMDApfSR7ZXJyb3JNZXNzYWdlLmxlbmd0aCA+IDEwMCA/ICcuLi4nIDogJyd9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIE5vbi1FcnJvciBvYmplY3QgdGhyb3duJyk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBVbmtub3duIGVycm9yIG9jY3VycmVkIHdpdGggRXZvQWdlbnRYJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFsd2F5cyBsb2cgdGhlIGZ1bGwgZXJyb3IgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBGdWxsIGVycm9yIGxvZyBjb21wbGV0ZWQnKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWJ1Z1BsYW5NeURheSgpIHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXkgRGVidWddIFN0YXJ0aW5nIGNvbXByZWhlbnNpdmUgZGVidWcuLi4nKTtcbiAgICBwbGFuTXlEYXlEZWJ1Z2dlci5jbGVhckxvZ3MoKTtcbiAgICBcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdSdW5uaW5nIFBsYW4gTXkgRGF5IGRpYWdub3N0aWNzLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCAxOiBDaGVjayBhY3RpdmUgZmlsZVxuICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ/Cfk4EgQWN0aXZlIGZpbGUgY2hlY2snLCB7XG4gICAgICAgIGhhc0FjdGl2ZUZpbGU6ICEhYWN0aXZlRmlsZSxcbiAgICAgICAgZmlsZU5hbWU6IGFjdGl2ZUZpbGU/Lm5hbWUsXG4gICAgICAgIGZpbGVFeHRlbnNpb246IGFjdGl2ZUZpbGU/LmV4dGVuc2lvblxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRlc3QgMjogQW5hbHl6ZSBBUEkgY2xpZW50XG4gICAgICBjb25zdCBhcGlBbmFseXNpcyA9IHBsYW5NeURheURlYnVnZ2VyLmFuYWx5emVBcGlDbGllbnQodGhpcy5hcGlDbGllbnQpO1xuICAgICAgcGxhbk15RGF5RGVidWdnZXIubG9nKCfwn5SXIEFQSSBjbGllbnQgYW5hbHlzaXMnLCBhcGlBbmFseXNpcyk7XG5cbiAgICAgIC8vIFRlc3QgMzogVGVzdCBFdm9BZ2VudFggY29ubmVjdGlvblxuICAgICAgaWYgKHRoaXMuYXBpQ2xpZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25UZXN0ID0gYXdhaXQgcGxhbk15RGF5RGVidWdnZXIudGVzdENvbm5lY3Rpb24odGhpcy5hcGlDbGllbnQpO1xuICAgICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ/CfjJAgQ29ubmVjdGlvbiB0ZXN0IHJlc3VsdCcsIGNvbm5lY3Rpb25UZXN0KTtcblxuICAgICAgICAvLyBUZXN0IDQ6IFRlc3QgdGFzayBwbGFubmluZyBmdW5jdGlvbmFsaXR5XG4gICAgICAgIGlmIChjb25uZWN0aW9uVGVzdC5zdWNjZXNzKSB7XG4gICAgICAgICAgY29uc3QgcGxhbm5pbmdUZXN0ID0gYXdhaXQgcGxhbk15RGF5RGVidWdnZXIudGVzdFRhc2tQbGFubmluZyhcbiAgICAgICAgICAgIHRoaXMuYXBpQ2xpZW50LCBcbiAgICAgICAgICAgICdUZXN0IG5vdGUgd2l0aCBzb21lIHRhc2tzOlxcbi0gV3JpdGUgY29kZVxcbi0gVGVzdCBmdW5jdGlvbmFsaXR5XFxuLSBSZXZpZXcgcmVzdWx0cydcbiAgICAgICAgICApO1xuICAgICAgICAgIHBsYW5NeURheURlYnVnZ2VyLmxvZygn8J+TiyBUYXNrIHBsYW5uaW5nIHRlc3QgcmVzdWx0JywgcGxhbm5pbmdUZXN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IDU6IENoZWNrIHNldHRpbmdzXG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ+Kame+4jyBQbHVnaW4gc2V0dGluZ3MnLCB7XG4gICAgICAgIGJhY2tlbmRVcmw6IHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCxcbiAgICAgICAgaGFzQXBpS2V5OiAhIXRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuICAgICAgICBkZWJ1Z01vZGU6IHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgLy8gU2hvdyByZXN1bHRzIGluIGEgbW9kYWwgb3IgY29uc29sZVxuICAgICAgY29uc3QgbG9ncyA9IHBsYW5NeURheURlYnVnZ2VyLmdldExvZ3MoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheSBEZWJ1Z10gQ29tcGxldGUgZGlhZ25vc3RpYyBsb2c6JywgbG9ncyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ1N1bW1hcnkgPSBsb2dzLnNsaWNlKC01KS5qb2luKCdcXG4nKTsgLy8gTGFzdCA1IGVudHJpZXNcbiAgICAgIG5ldyBOb3RpY2UoYERlYnVnIGNvbXBsZXRlISBDaGVjayBjb25zb2xlIGZvciBmdWxsIGxvZ3MuXFxuXFxuTGFzdCBlbnRyaWVzOlxcbiR7bG9nU3VtbWFyeX1gLCAxMDAwMCk7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGRlYnVnIGZpbGUgaWYgYWN0aXZlIGZpbGUgZXhpc3RzXG4gICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBkZWJ1Z0NvbnRlbnQgPSBgIyBQbGFuIE15IERheSBEZWJ1ZyBSZXBvcnRcXG5cXG5HZW5lcmF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfVxcblxcbiMjIERpYWdub3N0aWMgUmVzdWx0c1xcblxcblxcYFxcYFxcYFxcbiR7cGxhbk15RGF5RGVidWdnZXIuZXhwb3J0TG9ncygpfVxcblxcYFxcYFxcYGA7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShgUGxhbiBNeSBEYXkgRGVidWcgLSAke0RhdGUubm93KCl9Lm1kYCwgZGVidWdDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZSgnRGVidWcgcmVwb3J0IHNhdmVkIGFzIG5ldyBub3RlIScpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5lcnJvcignRGVidWcgcHJvY2VzcyBmYWlsZWQnLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBEZWJ1ZyBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgIGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUZ1bGxUYWJWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGUgYSBuZXcgdGFiIGluIHRoZSBtYWluIHdvcmtzcGFjZVxuICAgICAgY29uc3QgbmV3TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGlmIChuZXdMZWFmKSB7XG4gICAgICAgIGF3YWl0IG5ld0xlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQixcbiAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09IFZBVUxUIE1BTkFHRU1FTlQgTUVUSE9EUyA9PT1cblxuICBpbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50KCkge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMudmF1bHRDbGllbnQgPSBuZXcgVmF1bHRNYW5hZ2VtZW50Q2xpZW50KFxuICAgICAgdGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLFxuICAgICAgdGhpcy5zZXR0aW5ncy5hcGlLZXlcbiAgICApO1xuICAgIFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IG1hbmFnZW1lbnQgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCkge1xuICAgIHRoaXMudmF1bHRDbGllbnQgPSBudWxsIGFzIGFueTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdCBtYW5hZ2VtZW50IGRpc2FibGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcygpIHtcbiAgICBjb25zdCBjb21tYW5kcyA9IGNyZWF0ZVZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCk7XG4gICAgY29tbWFuZHMuZm9yRWFjaChjb21tYW5kID0+IHtcbiAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgIC4uLmNvbW1hbmQsXG4gICAgICAgIGNhbGxiYWNrOiBjb21tYW5kLmNhbGxiYWNrPy5iaW5kKHRoaXMpLFxuICAgICAgICBlZGl0b3JDYWxsYmFjazogY29tbWFuZC5lZGl0b3JDYWxsYmFjaz8uYmluZCh0aGlzKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBNb2RhbCBvcGVuaW5nIG1ldGhvZHMgZm9yIHZhdWx0IG1hbmFnZW1lbnRcbiAgb3BlblZhdWx0U3RydWN0dXJlTW9kYWwoKSB7XG4gICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmV3IFZhdWx0U3RydWN0dXJlTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5TbWFydFNlYXJjaE1vZGFsKHF1ZXJ5Pzogc3RyaW5nLCB0eXBlPzogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgU21hcnRTZWFyY2hNb2RhbCh0aGlzLmFwcCwgdGhpcyk7XG4gICAgaWYgKHF1ZXJ5KSBtb2RhbC5zZXRJbml0aWFsUXVlcnkocXVlcnksIHR5cGUgYXMgYW55KTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBvcGVuRmlsZU9wZXJhdGlvbnNNb2RhbChwYXRoPzogc3RyaW5nLCBvcGVyYXRpb24/OiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGaWxlT3BlcmF0aW9uc01vZGFsKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBpZiAocGF0aCkgbW9kYWwuc2V0SW5pdGlhbFBhdGgocGF0aCk7XG4gICAgaWYgKG9wZXJhdGlvbikgbW9kYWwuc2V0T3BlcmF0aW9uKG9wZXJhdGlvbik7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgb3BlblZhdWx0T3JnYW5pemVyTW9kYWwoKSB7XG4gICAgbmV3IE5vdGljZSgnVmF1bHQgb3JnYW5pemVyIG1vZGFsIG5vdCB5ZXQgaW1wbGVtZW50ZWQnKTtcbiAgfVxuXG4gIG9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCgpIHtcbiAgICBuZXcgTm90aWNlKCdCYXRjaCBvcGVyYXRpb25zIG1vZGFsIG5vdCB5ZXQgaW1wbGVtZW50ZWQnKTtcbiAgfVxuXG4gIC8vID09PSBFTkQgVkFVTFQgTUFOQUdFTUVOVCBNRVRIT0RTID09PVxuXG4gIC8vIEF1dG8tY29tcGxldGlvbiBoYW5kbGluZ1xuICBwcml2YXRlIGhhbmRsZUtleVVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20tY29udGVudCcpKSByZXR1cm47XG5cbiAgICAvLyBPbmx5IHRyaWdnZXIgb24gc3BlY2lmaWMga2V5cyBhbmQgY29uZGl0aW9uc1xuICAgIGlmICghdGhpcy5zaG91bGRUcmlnZ2VyQXV0b0NvbXBsZXRlKGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgLy8gRGVib3VuY2UgYXV0by1jb21wbGV0aW9uIHJlcXVlc3RzIHdpdGggbG9uZ2VyIGRlbGF5XG4gICAgY2xlYXJUaW1lb3V0KCh0aGlzIGFzIGFueSkuYXV0b0NvbXBsZXRlVGltZW91dCk7XG4gICAgKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXJBdXRvQ29tcGxldGlvbigpO1xuICAgIH0sIDMwMDApOyAvLyBJbmNyZWFzZWQgdG8gMyBzZWNvbmRzXG4gIH1cblxuICBwcml2YXRlIHNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIG9uIG5hdmlnYXRpb24gb3IgbW9kaWZpZXIga2V5c1xuICAgIGNvbnN0IG5vblRyaWdnZXJLZXlzID0gWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCcsICdUYWInLCAnU2hpZnQnLCAnQ29udHJvbCcsICdBbHQnLCAnTWV0YScsICdFc2NhcGUnXTtcbiAgICBpZiAobm9uVHJpZ2dlcktleXMuaW5kZXhPZihldmVudC5rZXkpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIFxuICAgIC8vIE9ubHkgdHJpZ2dlciBhdCB0aGUgZW5kIG9mIGEgbGluZVxuICAgIGlmIChjdXJzb3IuY2ggIT09IGN1cnJlbnRMaW5lLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBzZW50ZW5jZS1lbmRpbmcgdHJpZ2dlcnNcbiAgICBjb25zdCB0cmlnZ2VyQ2hhcnMgPSBbJy4nLCAnIScsICc/JywgJzonLCAnXFxuJ107XG4gICAgY29uc3QgbGFzdENoYXIgPSBjdXJyZW50TGluZS5zbGljZSgtMSk7XG4gICAgXG4gICAgLy8gVHJpZ2dlciBhZnRlciBzZW50ZW5jZSBlbmRpbmdzIHdpdGggc3BhY2VcbiAgICBpZiAodHJpZ2dlckNoYXJzLmluZGV4T2YobGFzdENoYXIpICE9PSAtMSAmJiBldmVudC5rZXkgPT09ICcgJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyaWdnZXIgYWZ0ZXIgRW50ZXIga2V5IChuZXcgbGluZSlcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGN1cnJlbnRMaW5lLnRyaW0oKS5sZW5ndGggPiAxMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHJpZ2dlckF1dG9Db21wbGV0aW9uKCkge1xuICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xuXG4gICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgXG4gICAgLy8gTW9yZSByZXN0cmljdGl2ZSBjb25kaXRpb25zIGZvciBhdXRvLWNvbXBsZXRpb25cbiAgICBpZiAoY3VycmVudExpbmUudHJpbSgpLmxlbmd0aCA8IDEwIHx8IGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm47XG4gICAgXG4gICAgLy8gUHJldmVudCA0MjIgZXJyb3JzIGZyb20gZW1wdHkgdGV4dFxuICAgIGlmICghZnVsbFRleHQgfHwgZnVsbFRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQWRkIGNvb2xkb3duIHRvIHByZXZlbnQgdG9vIGZyZXF1ZW50IHJlcXVlc3RzXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBsYXN0UmVxdWVzdCA9ICh0aGlzIGFzIGFueSkubGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QgfHwgMDtcbiAgICBpZiAobm93IC0gbGFzdFJlcXVlc3QgPCAxMDAwMCkgcmV0dXJuOyAvLyAxMCBzZWNvbmQgY29vbGRvd25cbiAgICBcbiAgICAodGhpcyBhcyBhbnkpLmxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0ID0gbm93O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBmdWxsVGV4dCxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2hvdyBzdWdnZXN0aW9ucyAoZm9yIG5vdyBqdXN0IHNob3cgZmlyc3Qgc3VnZ2VzdGlvbilcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgQXV0by1zdWdnZXN0aW9uOiAke3Jlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnNbMF19YCwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFpbCBmb3IgYXV0by1jb21wbGV0aW9uXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXV0by1jb21wbGV0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGE6IENvcGlsb3RSZXNwb25zZSkge1xuICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY29waWxvdCBzdWdnZXN0aW9ucyBmcm9tIFdlYlNvY2tldFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgbmV3IE5vdGljZShgTGl2ZSBzdWdnZXN0aW9uOiAke2RhdGEuY29tcGxldGlvbn1gLCAyMDAwKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXR0aW5ncyBtYW5hZ2VtZW50XG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBBUEkgY2xpZW50IGlmIFVSTCBjaGFuZ2VkXG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuICAgIFxuICAgIC8vIFJlaW5pdGlhbGl6ZSB2YXVsdCBtYW5hZ2VtZW50IGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZWNvbm5lY3QgV2ViU29ja2V0IGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgIXRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiB0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvbW1hbmQgRGVmaW5pdGlvbnMgZm9yIFZhdWx0UGlsb3QgVmF1bHQgTWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IENvbW1hbmQsIE5vdGljZSwgRWRpdG9yIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciBwbHVnaW4gaW5zdGFuY2Ugd2l0aCB2YXVsdCBtYW5hZ2VtZW50IG1ldGhvZHNcbmludGVyZmFjZSBWYXVsdE1hbmFnZW1lbnRQbHVnaW4ge1xuICB2YXVsdENsaWVudD86IGFueTtcbiAgb3BlblZhdWx0U3RydWN0dXJlTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuU21hcnRTZWFyY2hNb2RhbD86IChxdWVyeT86IHN0cmluZywgdHlwZT86IHN0cmluZykgPT4gdm9pZDtcbiAgb3BlbkZpbGVPcGVyYXRpb25zTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbD86ICgpID0+IHZvaWQ7XG4gIG9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbD86ICgpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogVmF1bHQgTWFuYWdlbWVudCBDb21tYW5kc1xuICogVGhlc2Ugd2lsbCBiZSByZWdpc3RlcmVkIGluIHRoZSBtYWluIHBsdWdpbiBmaWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWYXVsdE1hbmFnZW1lbnRDb21tYW5kcygpOiBDb21tYW5kW10ge1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnLFxuICAgICAgbmFtZTogJ1ZpZXcgVmF1bHQgU3RydWN0dXJlJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgdmF1bHQgc3RydWN0dXJlIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IHN0cnVjdHVyZSBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCcsXG4gICAgICBuYW1lOiAnU21hcnQgVmF1bHQgU2VhcmNoJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgc21hcnQgc2VhcmNoIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucycsXG4gICAgICBuYW1lOiAnRmlsZSBPcGVyYXRpb25zIE1hbmFnZXInLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyBmaWxlIG9wZXJhdGlvbnMgbW9kYWwnKTtcbiAgICAgICAgaWYgKHRoaXMub3BlbkZpbGVPcGVyYXRpb25zTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnRmlsZSBvcGVyYXRpb25zIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtb3JnYW5pemUtdmF1bHQnLFxuICAgICAgbmFtZTogJ0FJIFZhdWx0IE9yZ2FuaXphdGlvbicsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHZhdWx0IG9yZ2FuaXplciBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblZhdWx0T3JnYW5pemVyTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBvcmdhbml6ZXIgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1iYXRjaC1vcGVyYXRpb25zJyxcbiAgICAgIG5hbWU6ICdCYXRjaCBGaWxlIE9wZXJhdGlvbnMnLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyBiYXRjaCBvcGVyYXRpb25zIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnQmF0Y2ggb3BlcmF0aW9ucyBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXF1aWNrLXNlYXJjaC1zZWxlY3Rpb24nLFxuICAgICAgbmFtZTogJ1F1aWNrIFNlYXJjaCBTZWxlY3RlZCBUZXh0JyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlbGVjdGlvbi50cmltKCkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUXVpY2sgc2VhcmNoIGZvcjonLCBzZWxlY3Rpb24udHJpbSgpKTtcbiAgICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbChzZWxlY3Rpb24udHJpbSgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnU21hcnQgc2VhcmNoIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IHRleHQgdG8gc2VhcmNoIGZvcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJyxcbiAgICAgIG5hbWU6ICdWYXVsdCBIZWFsdGggQ2hlY2snLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jIGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZSgnUnVubmluZyB2YXVsdCBoZWFsdGggY2hlY2suLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUZXN0IGJhc2ljIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVGVzdCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgICAgICBpZiAoIWNvbm5lY3Rpb25UZXN0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7Y29ubmVjdGlvblRlc3QubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IGJhc2ljIHN0cnVjdHVyZSB0byB0ZXN0IGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHsgXG4gICAgICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlLCBcbiAgICAgICAgICAgIG1heF9kZXB0aDogMSBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUZXN0IHNlYXJjaCBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3Qgc2VhcmNoVGVzdCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuc2VhcmNoVmF1bHQoeyBcbiAgICAgICAgICAgIHF1ZXJ5OiAndGVzdCcsIFxuICAgICAgICAgICAgbWF4X3Jlc3VsdHM6IDEgXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg4pyFIFZhdWx0IEhlYWx0aCBDaGVjayBQYXNzZWRcbvCfk4EgJHtzdHJ1Y3R1cmUudG90YWxfZmlsZXN9IGZpbGVzLCAke3N0cnVjdHVyZS50b3RhbF9mb2xkZXJzfSBmb2xkZXJzXG7wn5SNIFNlYXJjaDogJHtzZWFyY2hUZXN0LnJlc3VsdHMubGVuZ3RofSByZXN1bHRzXG7wn5K+IFNpemU6ICR7KHN0cnVjdHVyZS50b3RhbF9zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CYCwgODAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdCBoZWFsdGggY2hlY2sgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGDinYwgSGVhbHRoIGNoZWNrIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtYmFja3VwJyxcbiAgICAgIG5hbWU6ICdDcmVhdGUgVmF1bHQgQmFja3VwJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoJ0NyZWF0aW5nIHZhdWx0IGJhY2t1cC4uLicpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGJhY2t1cCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuYmFja3VwVmF1bHQoe1xuICAgICAgICAgICAgaW5jbHVkZV9zZXR0aW5nczogdHJ1ZSxcbiAgICAgICAgICAgIGNvbXByZXNzaW9uOiB0cnVlLFxuICAgICAgICAgICAgYmFja3VwX25hbWU6IGB2YXVsdHBpbG90LWJhY2t1cC0ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKGDinIUgQmFja3VwIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG7wn5OmICR7YmFja3VwLmZpbGVzX2JhY2tlZF91cH0gZmlsZXNcbvCfkr4gU2l6ZTogJHsoYmFja3VwLmJhY2t1cF9zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CXG7wn5OBIExvY2F0aW9uOiAke2JhY2t1cC5iYWNrdXBfcGF0aH1gLCA4MDAwKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhY2t1cCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoYOKdjCBCYWNrdXAgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1zZWFyY2gtY29udGVudCcsXG4gICAgICBuYW1lOiAnU2VhcmNoIENvbnRlbnQnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbiwgZWRpdG9yOiBFZGl0b3IpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHNlbGVjdGlvbi50cmltKCkgfHwgJ0VudGVyIHNlYXJjaCBxdWVyeSc7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwocXVlcnksICdjb250ZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnU21hcnQgc2VhcmNoIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtc2VhcmNoLWZpbGVuYW1lcycsXG4gICAgICBuYW1lOiAnU2VhcmNoIEZpbGVuYW1lcycsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGlmICh0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCgnJywgJ2ZpbGVuYW1lJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnU21hcnQgc2VhcmNoIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtcmVjZW50LWZpbGVzJyxcbiAgICAgIG5hbWU6ICdWaWV3IFJlY2VudCBGaWxlcycsXG4gICAgICBjYWxsYmFjazogYXN5bmMgZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHsgXG4gICAgICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gcmVjZW50IGZpbGVzIGZvdW5kJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlY2VudExpc3QgPSBzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAgICAgICAubWFwKChmaWxlOiBhbnkpID0+IGDigKIgJHtmaWxlLm5hbWV9ICgke2ZpbGUubW9kaWZpZWR9KWApXG4gICAgICAgICAgICAuam9pbignXFxuJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg8J+TnSBSZWNlbnQgRmlsZXM6XFxuJHtyZWNlbnRMaXN0fWAsIDEwMDAwKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcmVjZW50IGZpbGVzOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGDinYwgRmFpbGVkIHRvIGdldCByZWNlbnQgZmlsZXM6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXTtcbn1cblxuLyoqXG4gKiBIb3RrZXkgZGVmaW5pdGlvbnMgZm9yIHZhdWx0IG1hbmFnZW1lbnQgY29tbWFuZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfSE9US0VZUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJzogJ0N0cmwrU2hpZnQrVicsXG4gICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCc6ICdDdHJsK1NoaWZ0K0YnLFxuICAndmF1bHRwaWxvdC1xdWljay1zZWFyY2gtc2VsZWN0aW9uJzogJ0N0cmwrU2hpZnQrUycsXG4gICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucyc6ICdDdHJsK1NoaWZ0K08nLFxuICAndmF1bHRwaWxvdC1vcmdhbml6ZS12YXVsdCc6ICdDdHJsK1NoaWZ0K0cnLFxuICAndmF1bHRwaWxvdC12YXVsdC1oZWFsdGgtY2hlY2snOiAnQ3RybCtTaGlmdCtIJ1xufTtcblxuLyoqXG4gKiBSaWJib24gaWNvbiBkZWZpbml0aW9ucyBmb3IgY29tbW9ubHkgdXNlZCBjb21tYW5kc1xuICovXG5leHBvcnQgY29uc3QgVkFVTFRfTUFOQUdFTUVOVF9SSUJCT05fSUNPTlMgPSBbXG4gIHtcbiAgICBpY29uOiAnZm9sZGVyLXRyZWUnLFxuICAgIHRpdGxlOiAnVmF1bHQgU3RydWN0dXJlJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LXN0cnVjdHVyZSdcbiAgfSxcbiAge1xuICAgIGljb246ICdzZWFyY2gnLFxuICAgIHRpdGxlOiAnU21hcnQgU2VhcmNoJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCdcbiAgfSxcbiAge1xuICAgIGljb246ICdmb2xkZXItcGx1cycsXG4gICAgdGl0bGU6ICdGaWxlIE9wZXJhdGlvbnMnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtZmlsZS1vcGVyYXRpb25zJ1xuICB9XG5dO1xuXG4vKipcbiAqIENvbW1hbmQgbWVudSBpdGVtcyBmb3IgY29udGV4dCBtZW51c1xuICovXG5leHBvcnQgY29uc3QgVkFVTFRfTUFOQUdFTUVOVF9NRU5VX0lURU1TID0gW1xuICB7XG4gICAgdGl0bGU6ICdBbmFseXplIFN0cnVjdHVyZScsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1hbmFseXNpcydcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnU21hcnQgU2VhcmNoJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LXNlYXJjaCdcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnRmlsZSBPcGVyYXRpb25zJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucycsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW9wZXJhdGlvbnMnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ09yZ2FuaXplIFZhdWx0JyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LW9yZ2FuaXplLXZhdWx0JyxcbiAgICBzZWN0aW9uOiAndmF1bHQtb3JnYW5pemF0aW9uJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdIZWFsdGggQ2hlY2snLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtbWFpbnRlbmFuY2UnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0NyZWF0ZSBCYWNrdXAnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtYmFja3VwJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtbWFpbnRlbmFuY2UnXG4gIH1cbl07XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIGFsbCB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKHBsdWdpbjogYW55KSB7XG4gIGNvbnN0IGNvbW1hbmRzID0gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcbiAgY29tbWFuZHMuZm9yRWFjaCgoY29tbWFuZDogQ29tbWFuZCkgPT4ge1xuICAgIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgIC4uLmNvbW1hbmQsXG4gICAgICBjYWxsYmFjazogY29tbWFuZC5jYWxsYmFjaz8uYmluZChwbHVnaW4pLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2s/LmJpbmQocGx1Z2luKVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIC8vIEFkZCBob3RrZXlzIGlmIGRlZmluZWRcbiAgT2JqZWN0LmVudHJpZXMoVkFVTFRfTUFOQUdFTUVOVF9IT1RLRVlTKS5mb3JFYWNoKChbY29tbWFuZElkLCBob3RrZXldKSA9PiB7XG4gICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5jb21tYW5kcz8uW2NvbW1hbmRJZF07XG4gICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgIGNvbW1hbmQuaG90a2V5cyA9IFt7IG1vZGlmaWVyczogW10sIGtleTogaG90a2V5IH1dO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCB2YXVsdCBtYW5hZ2VtZW50IHJpYmJvbiBpY29uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVmF1bHRNYW5hZ2VtZW50UmliYm9uSWNvbnMocGx1Z2luOiBhbnkpIHtcbiAgVkFVTFRfTUFOQUdFTUVOVF9SSUJCT05fSUNPTlMuZm9yRWFjaCgoeyBpY29uLCB0aXRsZSwgY29tbWFuZElkIH0pID0+IHtcbiAgICBjb25zdCByaWJib25JY29uID0gcGx1Z2luLmFkZFJpYmJvbkljb24oaWNvbiwgdGl0bGUsICgpID0+IHtcbiAgICAgIHBsdWdpbi5hcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKGNvbW1hbmRJZCk7XG4gICAgfSk7XG4gICAgcmliYm9uSWNvbi5hZGRDbGFzcygndmF1bHRwaWxvdC12YXVsdC1tYW5hZ2VtZW50LXJpYmJvbicpO1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MiLCJlbmFibGVWYXVsdE1hbmFnZW1lbnQiLCJhdXRvU3luY1ZhdWx0U3RydWN0dXJlIiwic2VhcmNoUmVzdWx0c0xpbWl0IiwiZW5hYmxlU21hcnRTZWFyY2giLCJiYXRjaE9wZXJhdGlvblRpbWVvdXQiLCJzaG93VmF1bHRTdGF0cyIsIm1heFNlYXJjaFJlc3VsdHMiLCJkZWZhdWx0U2VhcmNoVHlwZSIsImVuYWJsZUZpbGVPcGVyYXRpb25zIiwiY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9ucyIsImF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zIiwiREVGQVVMVF9TRVRUSU5HUyIsImJhY2tlbmRVcmwiLCJhcGlLZXkiLCJlbmFibGVXZWJTb2NrZXQiLCJlbmFibGVDb3BpbG90IiwiZW5hYmxlQXV0b0NvbXBsZXRlIiwiZGVmYXVsdEFnZW50IiwiZGVmYXVsdE1vZGUiLCJjaGF0SGlzdG9yeUxpbWl0IiwiZGVidWdNb2RlIiwic2hvd0ludGVudERlYnVnIiwidmF1bHRNYW5hZ2VtZW50IiwiVmF1bHRQaWxvdFNldHRpbmdUYWIiLCJQbHVnaW5TZXR0aW5nVGFiIiwiY29uc3RydWN0b3IiLCJhcHAiLCJwbHVnaW4iLCJzdXBlciIsInRoaXMiLCJkaXNwbGF5IiwiY29udGFpbmVyRWwiLCJlbXB0eSIsImNyZWF0ZUVsIiwidGV4dCIsIlNldHRpbmciLCJzZXROYW1lIiwic2V0RGVzYyIsImFkZFRleHQiLCJzZXRQbGFjZWhvbGRlciIsInNldFZhbHVlIiwic2V0dGluZ3MiLCJvbkNoYW5nZSIsInZhbHVlIiwiX19hd2FpdGVyIiwic2F2ZVNldHRpbmdzIiwiYWRkQnV0dG9uIiwiYnV0dG9uIiwic2V0QnV0dG9uVGV4dCIsIm9uQ2xpY2siLCJ0ZXN0Q29ubmVjdGlvbiIsImFkZFRvZ2dsZSIsInRvZ2dsZSIsImNvbm5lY3RXZWJTb2NrZXQiLCJkaXNjb25uZWN0V2ViU29ja2V0IiwiYWRkRHJvcGRvd24iLCJkcm9wZG93biIsImFkZE9wdGlvbiIsImFkZFNsaWRlciIsInNsaWRlciIsInNldExpbWl0cyIsInNldER5bmFtaWNUb29sdGlwIiwiX2IiLCJfYSIsIk9iamVjdCIsImFzc2lnbiIsImluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQiLCJkaXNhYmxlVmF1bHRNYW5hZ2VtZW50IiwiU3RyaW5nIiwidGltZW91dCIsInBhcnNlSW50Iiwic2V0Q3RhIiwidmF1bHRDbGllbnQiLCJzZXRUaW1lb3V0Iiwic2V0RGlzYWJsZWQiLCJzdWNjZXNzIiwiZXJyb3IiLCJzZXRXYXJuaW5nIiwic2V0dGluZ3NUYWIiLCJzZXR0aW5nIiwiYWN0aXZlVGFiIiwiYWRkVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MiLCJjbHMiLCJpbm5lckhUTUwiLCJub3RpY2UiLCJOb3RpY2UiLCJyZXNwb25zZSIsImFwaUNsaWVudCIsImhlYWx0aENoZWNrIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInNpbXBsZVJlc3BvbnNlIiwic2ltcGxlSGVhbHRoQ2hlY2siLCJkYXRhIiwic3RhdHVzIiwidmVyc2lvbiIsImhpZGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVCIsIlZhdWx0UGlsb3RWaWV3IiwiSXRlbVZpZXciLCJsZWFmIiwiZ2V0Vmlld1R5cGUiLCJnZXREaXNwbGF5VGV4dCIsImdldEljb24iLCJvbk9wZW4iLCJjb250YWluZXIiLCJhZGRDbGFzcyIsImhlYWRlckVsIiwic3RhdHVzRWwiLCJ1cGRhdGVTdGF0dXMiLCJxdWlja0FjdGlvbnNFbCIsImNyZWF0ZVF1aWNrQWN0aW9ucyIsInZhdWx0U3RhdHNFbCIsInVwZGF0ZVZhdWx0U3RhdHMiLCJhY3Rpdml0aWVzRWwiLCJhZGRTdHlsZXMiLCJzdGF0dXNDb250YWluZXIiLCJiYWNrZW5kU3RhdHVzIiwiYmFja2VuZEluZGljYXRvciIsIndzU3RhdHVzIiwiaXNXZWJTb2NrZXRDb25uZWN0ZWQiLCJjaGVja0JhY2tlbmRTdGF0dXMiLCJpbmRpY2F0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTmFtZSIsImFjdGlvbnNHcmlkIiwib25jbGljayIsIm9wZW5DaGF0TW9kYWwiLCJhY3RpdmF0ZUZ1bGxUYWJWaWV3Iiwib3BlbldvcmtmbG93TW9kYWwiLCJhbmFseXplVmF1bHQiLCJhY3RpdmVWaWV3Iiwid29ya3NwYWNlIiwiZ2V0QWN0aXZlVmlld09mVHlwZSIsIk1hcmtkb3duVmlldyIsImdldENvcGlsb3RDb21wbGV0aW9uIiwiZWRpdG9yIiwic3RhdHNDb250YWluZXIiLCJmaWxlcyIsInZhdWx0IiwiZ2V0RmlsZXMiLCJtYXJrZG93bkZpbGVzIiwiZ2V0TWFya2Rvd25GaWxlcyIsImxhYmVsIiwibGVuZ3RoIiwidG9TdHJpbmciLCJnZXRBbGxMb2FkZWRGaWxlcyIsImZpbHRlciIsImYiLCJURm9sZGVyIiwiZm9yRWFjaCIsInN0YXQiLCJzdGF0RWwiLCJsb2FkQWdlbnRJbmZvIiwibG9nIiwiZ2V0QWdlbnRzIiwiYWdlbnRzIiwiQXJyYXkiLCJpc0FycmF5IiwiZGF0YU9iaiIsImFnZW50Q291bnQiLCJhY3RpdmVBZ2VudHMiLCJhZ2VudCIsImFjdGl2ZSIsImFnZW50U3RhdHNFbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZUVsIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiaGVhZCIsImFwcGVuZENoaWxkIiwib25DbG9zZSIsIlZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCIiwiVmF1bHRQaWxvdEZ1bGxUYWJWaWV3Iiwic3R5bGUiLCJoZWlnaHQiLCJvdmVyZmxvdyIsIm1haW5MYXlvdXQiLCJsZWZ0U2lkZWJhciIsImNyZWF0ZUxlZnRTaWRlYmFyIiwibWFpbkNvbnRlbnQiLCJjcmVhdGVNYWluQ29udGVudCIsInJpZ2h0U2lkZWJhciIsImNyZWF0ZVJpZ2h0U2lkZWJhciIsImFkZEZ1bGxUYWJTdHlsZXMiLCJzaWRlYmFyIiwiY29udGVudCIsInRhYk5hdiIsImNoYXRUYWIiLCJ3b3JrZmxvd1RhYiIsImFuYWx5dGljc1RhYiIsInRhYkNvbnRlbnQiLCJjaGF0RWwiLCJjcmVhdGVDaGF0U2VjdGlvbiIsIndvcmtmbG93RWwiLCJjcmVhdGVXb3JrZmxvd1NlY3Rpb24iLCJhbmFseXRpY3NFbCIsImNyZWF0ZUFuYWx5dGljc1NlY3Rpb24iLCJzd2l0Y2hUYWIiLCJyZWNlbnRGaWxlc0VsIiwidXBkYXRlUmVjZW50RmlsZXMiLCJhZ2VudFN0YXR1c0VsIiwidXBkYXRlQWdlbnRTdGF0dXMiLCJhY3Rpdml0eUVsIiwiY3JlYXRlQWN0aXZpdHlGZWVkIiwiY2hhdENvbnRlbnQiLCJjaGF0SGlzdG9yeSIsImNoYXRJbnB1dCIsInRleHRhcmVhIiwicGxhY2Vob2xkZXIiLCJzZW5kQnV0dG9uIiwidHJpbSIsInNlbmRDaGF0TWVzc2FnZSIsIm9ua2V5ZG93biIsImUiLCJrZXkiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiY2xpY2siLCJ3b3JrZmxvd0NvbnRlbnQiLCJ3b3JrZmxvd0dyaWQiLCJuYW1lIiwiaWNvbiIsImRlc2NyaXB0aW9uIiwid29ya2Zsb3ciLCJ3b3JrZmxvd0NhcmQiLCJydW5Xb3JrZmxvdyIsImFuYWx5dGljc0NvbnRlbnQiLCJjaGFydHNDb250YWluZXIiLCJmaWxlVHlwZUNoYXJ0IiwidGltZWxpbmVDaGFydCIsInRhZ0NoYXJ0Iiwid29yZENvdW50Q2hhcnQiLCJsaW5rQ2hhcnQiLCJhY3Rpdml0eUNoYXJ0IiwidGFiTmFtZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidG4iLCJyZW1vdmVDbGFzcyIsInNlY3Rpb24iLCJxdWVyeVNlbGVjdG9yIiwidGhpbmtpbmdNZXNzYWdlIiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0Iiwic2VuZENoYXQiLCJjb250ZXh0IiwicmVtb3ZlIiwid29ya2Zsb3dOYW1lIiwicGxhbk15RGF5IiwiYWN0aXZhdGVWaWV3Iiwic29ydCIsImEiLCJiIiwibXRpbWUiLCJzbGljZSIsImZpbGUiLCJmaWxlRWwiLCJiYXNlbmFtZSIsIm9wZW5MaW5rVGV4dCIsInBhdGgiLCJhZ2VudEluZm8iLCJhZ2VudEVsIiwidGltZSIsImFjdGl2aXR5IiwiZ2V0QWN0aXZlTWFya2Rvd24iLCJnZXRBY3RpdmVGaWxlIiwicmVhZCIsIkNoYXRNb2RhbCIsIk1vZGFsIiwiY3VycmVudENvbnZlcnNhdGlvbklkIiwibWVzc2FnZXMiLCJjb250ZW50RWwiLCJ0b29sYmFyRWwiLCJjbGVhckNoYXQiLCJhZ2VudFNlbGVjdCIsImxvYWRBZ2VudHMiLCJjaGF0Q29udGFpbmVyIiwibWVzc2FnZXNFbCIsImlucHV0Q29udGFpbmVyIiwiaW5wdXRFbCIsInR5cGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2VuZE1lc3NhZ2UiLCJmb2N1cyIsImxvYWRDb252ZXJzYXRpb25IaXN0b3J5Iiwic2VsZWN0RWwiLCJkaXNhYmxlZCIsImdldENvbnZlcnNhdGlvbkhpc3RvcnkiLCJyZW5kZXJNZXNzYWdlcyIsImFkZE1lc3NhZ2UiLCJpbnRlbnRSZXMiLCJQcm9taXNlIiwiYWxsIiwiY2xhc3NpZnlJbnRlbnQiLCJwYXlsb2FkIiwiaW50ZW50IiwicmVzdWx0IiwiY29udmVyc2F0aW9uX2lkIiwidW5kZWZpbmVkIiwiYWdlbnRfaWQiLCJnZXRTZWxlY3RlZEFnZW50IiwiZXJyb3JNc2ciLCJyb2xlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHVzaCIsInJlbmRlck1lc3NhZ2UiLCJzY3JvbGxUb0JvdHRvbSIsIm1lc3NhZ2VFbCIsInJlbmRlck1hcmtkb3duIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwicmVwbGFjZSIsImRlYnVnRWwiLCJXb3JrZmxvd01vZGFsIiwiaXNFeGVjdXRpbmciLCJmb3JtRWwiLCJnb2FsQ29udGFpbmVyIiwiZ29hbElucHV0IiwiY29udGV4dENvbnRhaW5lciIsImNvbnRleHRJbnB1dCIsIm9wdGlvbnNDb250YWluZXIiLCJpbmNsdWRlQWN0aXZlRmlsZSIsImFjdGl2ZUZpbGVDaGVja2JveCIsImNyZWF0ZVNwYW4iLCJpbmNsdWRlQWxsRmlsZXMiLCJhbGxGaWxlc0NoZWNrYm94IiwiZXhlY3V0ZUJ1dHRvbiIsImV4ZWN1dGVXb3JrZmxvdyIsImNoZWNrZWQiLCJwcm9ncmVzc0NvbnRhaW5lciIsInJlc3VsdHNDb250YWluZXIiLCJnb2FsIiwidmF1bHRDb250ZW50IiwiYWN0aXZlRmlsZSIsInJlcXVlc3QiLCJ2YXVsdF9jb250ZW50Iiwic2V0dXBQcm9ncmVzc0xpc3RlbmVyIiwiZGlzcGxheVJlc3VsdHMiLCJkaXNwbGF5RXJyb3IiLCJkaXNwbGF5UHJvZ3Jlc3MiLCJleGVjdXRpb25fdGltZSIsInJlc3VsdEVsIiwic3RlcHNfdGFrZW4iLCJzdGVwc0VsIiwic3RlcHNMaXN0Iiwic3RlcCIsImFydGlmYWN0cyIsImFydGlmYWN0c0VsIiwiYXJ0aWZhY3QiLCJpbmRleCIsImFydGlmYWN0RWwiLCJ0aXRsZSIsInNhdmVBcnRpZmFjdEFzTm90ZSIsInNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUiLCJmaWxlbmFtZSIsImNyZWF0ZSIsInNwbGl0IiwiRXZvQWdlbnRYQ2xpZW50IiwiYmFzZVVybCIsIndzQ2FsbGJhY2tzIiwiTWFwIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludF8xIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsIkFjY2VwdCIsImZldGNoIiwibW9kZSIsImNyZWRlbnRpYWxzIiwiY29udGVudFR5cGUiLCJnZXQiLCJqc29uIiwib2siLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNUZXh0IiwibWV0aG9kIiwiY2hhdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udmVyc2F0aW9uSWRfMSIsImNvbnZlcnNhdGlvbklkIiwibGltaXQiLCJyZXF1ZXN0Qm9keSIsImluY2x1ZGVfbWVzc2FnZXMiLCJkZWxldGVDb252ZXJzYXRpb24iLCJ2YXVsdF9jb250ZXh0IiwiY3JlYXRlQWdlbnQiLCJleGVjdXRlQWdlbnQiLCJhbmFseXplVmF1bHRDb250ZXh0IiwicGxhblRhc2tzIiwicGFyc2VJbnRlbGxpZ2VuY2UiLCJjb25maWRlbmNlIiwiZXhwbGFpbkludGVudCIsImluY2x1ZGVfZGVidWciLCJyZWFzb25pbmciLCJ1cGRhdGVNZW1vcnkiLCJjYWxsYmFja3MiLCJ3c1VybCIsIndlYnNvY2tldCIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uQ29ubmVjdCIsImNhbGwiLCJvbm1lc3NhZ2UiLCJldmVudCIsInBhcnNlIiwib25DaGF0Iiwib25Xb3JrZmxvd1Byb2dyZXNzIiwiX2MiLCJvbkNvcGlsb3QiLCJfZCIsIm9uVmF1bHRTeW5jIiwiX2UiLCJvbkludGVudERlYnVnIiwiX2YiLCJvbkVycm9yIiwiX2ciLCJvbmNsb3NlIiwiY29kZSIsInJlYXNvbiIsIm9uRGlzY29ubmVjdCIsIm9uZXJyb3IiLCJjbG9zZSIsInNlbmRXZWJTb2NrZXRNZXNzYWdlIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwiZmluZFBsYW5TZWN0aW9uIiwibWF0Y2giLCJmaW5kU2NoZWR1bGVTZWN0aW9uIiwic2NoZWR1bGVSZWdleCIsIlBsYW5NeURheURlYnVnZ2VyIiwibG9ncyIsIm1heExvZ3MiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwibG9nRW50cnkiLCJlcnJvckRhdGEiLCJzdGFjayIsImdldExvZ3MiLCJjbGVhckxvZ3MiLCJleHBvcnRMb2dzIiwiam9pbiIsImFuYWx5emVBcGlDbGllbnQiLCJhdmFpbGFibGUiLCJtZXRob2RzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldFByb3RvdHlwZU9mIiwiaGFzUGxhblRhc2tzIiwiaGFzSGVhbHRoQ2hlY2siLCJ0ZXN0VGFza1BsYW5uaW5nIiwiYXBpQ2xpZW50XzEiLCJ0ZXN0Tm90ZSIsInRpbWVmcmFtZSIsImhhc0RhdGEiLCJoYXNQbGFuIiwicGxhbiIsInRhc2tDb3VudCIsInRhc2tzIiwicGxhbk15RGF5RGVidWdnZXIiLCJWYXVsdE1hbmFnZW1lbnRFcnJvciIsImZlYXR1cmUiLCJWYXVsdE1hbmFnZW1lbnRDbGllbnQiLCJnZXRWYXVsdFN0cnVjdHVyZSIsImhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yIiwicGVyZm9ybUZpbGVPcGVyYXRpb24iLCJ2YWxpZGF0ZUZpbGVPcGVyYXRpb25SZXF1ZXN0IiwicGVyZm9ybUJhdGNoT3BlcmF0aW9ucyIsIm9wZXJhdGlvbnMiLCJvcCIsImVyciIsInNlYXJjaFZhdWx0IiwicXVlcnkiLCJvcmdhbml6ZVZhdWx0IiwiYmFja3VwVmF1bHQiLCJjcmVhdGVGaWxlIiwiZmlsZVBhdGhfMSIsImNvbnRlbnRfMSIsImFyZ3VtZW50cyIsImZpbGVQYXRoIiwiYmFja3VwIiwib3BlcmF0aW9uIiwiZmlsZV9wYXRoIiwidXBkYXRlRmlsZSIsImRlbGV0ZUZpbGUiLCJtb3ZlRmlsZSIsImZyb21QYXRoXzEiLCJ0b1BhdGhfMSIsImZyb21QYXRoIiwidG9QYXRoIiwibmV3X3BhdGgiLCJjb3B5RmlsZSIsInF1aWNrU2VhcmNoIiwicXVlcnlfMSIsIm1heFJlc3VsdHMiLCJzZWFyY2hfdHlwZSIsIm1heF9yZXN1bHRzIiwiaW5jbHVkZV9jb250ZW50IiwicmVxdWVzdE9wdGlvbnMiLCJtYXhfZGVwdGgiLCJWYXVsdFN0cnVjdHVyZU1vZGFsIiwic2V0Rm9jdXNQYXRoIiwiZm9jdXNQYXRoIiwicmVmcmVzaEJ1dHRvbiIsImxvYWRpbmdFbCIsImNyZWF0ZURpdiIsInNldFRleHQiLCJzdHJ1Y3R1cmUiLCJyZW5kZXJTdHJ1Y3R1cmUiLCJ0b3RhbF9maWxlcyIsInRvdGFsX2ZvbGRlcnMiLCJ0b3RhbF9zaXplIiwidG9GaXhlZCIsInRyZWVDb250YWluZXIiLCJ0cmVlRWwiLCJyZW5kZXJGb2xkZXIiLCJyZWNlbnRfZmlsZXMiLCJyZWNlbnRDb250YWluZXIiLCJyZWNlbnRFbCIsIm1vZGlmaWVkIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwib3JwaGFuZWRfZmlsZXMiLCJvcnBoYW5lZENvbnRhaW5lciIsIm9ycGhhbmVkRWwiLCJmb2xkZXIiLCJsZXZlbCIsImZvbGRlckVsIiwiYXR0ciIsImNoaWxkcmVuIiwiY2hpbGRyZW5FbCIsInRvZ2dsZUVsIiwiaXNPcGVuIiwiY2hpbGQiLCJzaXplIiwiU21hcnRTZWFyY2hNb2RhbCIsInNldEluaXRpYWxRdWVyeSIsImluaXRpYWxRdWVyeSIsInNlYXJjaFR5cGUiLCJzZWFyY2hGb3JtIiwicXVlcnlJbnB1dCIsInNlYXJjaFR5cGVTZWxlY3QiLCJvcHRpb24iLCJzZWxlY3RlZCIsInNlYXJjaEJ1dHRvbiIsInBlcmZvcm1TZWFyY2giLCJyZXN1bHRzIiwicmVuZGVyU2VhcmNoUmVzdWx0cyIsInRvdGFsX2ZvdW5kIiwiaW5zaWdodHMiLCJyZXN1bHRzTGlzdCIsImZpbGVfbmFtZSIsIm1hdGNoX3R5cGUiLCJzY29yZSIsInByZXZpZXciLCJtYXRjaGVzIiwic3VnZ2VzdGVkX3F1ZXJpZXMiLCJzdWdnZXN0aW9uc0VsIiwic3VnZ2VzdGlvbnNMaXN0Iiwic3VnZ2VzdGlvbiIsImRpc3BhdGNoRXZlbnQiLCJLZXlib2FyZEV2ZW50IiwiRmlsZU9wZXJhdGlvbnNNb2RhbCIsInNldEluaXRpYWxQYXRoIiwiaW5pdGlhbFBhdGgiLCJzZXRPcGVyYXRpb24iLCJ1cGRhdGVPcGVyYXRpb25Gb3JtIiwiZm9ybUNvbnRhaW5lciIsImFkZFRleHRBcmVhIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJleGVjdXRlT3BlcmF0aW9uIiwicGF0aElucHV0IiwibmV3UGF0aElucHV0IiwiY29udGVudFRleHRhcmVhIiwiYmFja3VwVG9nZ2xlIiwiVmF1bHRQaWxvdFBsdWdpbiIsIlBsdWdpbiIsIndlYnNvY2tldENvbm5lY3RlZCIsImNvcGlsb3RFbmFibGVkIiwib25sb2FkIiwiYXBwSW5zdGFuY2UiLCJsb2FkU2V0dGluZ3MiLCJyZWdpc3RlclZpZXciLCJyaWJib25JY29uRWwiLCJhZGRSaWJib25JY29uIiwiZXZ0IiwiY3RybEtleSIsIm1ldGFLZXkiLCJhZGRDb21tYW5kIiwiY2FsbGJhY2siLCJlZGl0b3JDYWxsYmFjayIsInF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24iLCJwbGFuVGFza3NGcm9tTm90ZSIsImRlYnVnUGxhbk15RGF5IiwicmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcyIsInJlZ2lzdGVyRG9tRXZlbnQiLCJoYW5kbGVLZXlVcCIsImJpbmQiLCJhZGRTZXR0aW5nVGFiIiwib251bmxvYWQiLCJkZXRhY2hMZWF2ZXNPZlR5cGUiLCJoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbiIsImRlYnVnIiwib3BlbiIsImZpbGVDb250ZW50IiwiYW5hbHlzaXNfdHlwZSIsImFuYWx5c2lzQ29udGVudCIsImFuYWx5c2lzIiwiaW5zaWdodCIsInJlY29tbWVuZGF0aW9ucyIsInJlYyIsImN1cnNvciIsImdldEN1cnNvciIsInRleHRCZWZvcmVDdXJzb3IiLCJnZXRMaW5lIiwibGluZSIsInN1YnN0cmluZyIsImNoIiwiZnVsbFRleHQiLCJnZXRWYWx1ZSIsImN1cnNvcl9wb3NpdGlvbiIsInBvc1RvT2Zmc2V0IiwiZmlsZV90eXBlIiwicmVwbGFjZVJhbmdlIiwiY29tcGxldGlvbiIsInNlbGVjdGlvbiIsImdldFNlbGVjdGlvbiIsIm5ld0xpbmUiLCJ0YXNrQ29udGVudCIsImVzdGltYXRlZF9kdXJhdGlvbiIsInRhc2siLCJjaGVja2JveCIsInByaW9yaXR5IiwiZXN0aW1hdGVkX3RpbWUiLCJtaWxlc3RvbmVzIiwibWlsZXN0b25lIiwidGFyZ2V0X2RhdGUiLCJleHRlbnNpb24iLCJmaWxlVGV4dCIsImhhc0NvbnRlbnQiLCJmaXJzdExpbmUiLCJsaW5lQ291bnQiLCJleGlzdHMiLCJpc0Nvbm5lY3RlZCIsInNjaGVkdWxlTWFya2Rvd24iLCJoZWFkbGluZSIsIm5vdGVUZXh0Iiwia2V5cyIsImFjdHVhbERhdGEiLCJwbGFuS2V5cyIsImhhc1Rhc2tzIiwiZXN0aW1hdGVkVGltZSIsInRpbWVNYXRjaCIsIk1hdGgiLCJmbG9vciIsIm1hcmtkb3duTGVuZ3RoIiwiZmV0Y2hTY2hlZHVsZSIsInRyaW1tZWRMZW5ndGgiLCJpc1N0cmluZyIsImlzVmFsaWQiLCJ2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24iLCJleGlzdGluZ1BsYW5TZWN0aW9uIiwiZXhpc3RpbmdTY2hlZHVsZVNlY3Rpb24iLCJoYXNQbGFuV3JhcHBlciIsImhhc1NjaGVkdWxlU2VjdGlvbiIsInBsYW5Db250ZW50Iiwic2NoZWR1bGVIZWFkaW5nIiwidXBkYXRlZFRleHQiLCJvcmlnaW5hbFRleHQiLCJvcmlnaW5hbExlbmd0aCIsInNjaGVkdWxlTGVuZ3RoIiwiaGFzT3JpZ2luYWxDb250ZW50IiwicGxhbk1hdGNoIiwic3RhcnRDb21tZW50IiwiY29udGVudExlbmd0aCIsImVuZENvbW1lbnQiLCJmdWxsTWF0Y2giLCJyZXBsYWNlbWVudCIsInNjaGVkdWxlTWF0Y2giLCJoZWFkaW5nTWF0Y2giLCJjb250ZW50TWF0Y2giLCJoZWFkaW5nIiwiaW5qZWN0U2NoZWR1bGUiLCJ1cGRhdGVkTGVuZ3RoIiwiY2hhbmdlZCIsIm1vZGlmeSIsInN1Y2Nlc3NNZXNzYWdlIiwiaGFzQWN0aXZlRmlsZSIsImZpbGVOYW1lIiwiZmlsZUV4dGVuc2lvbiIsImFwaUFuYWx5c2lzIiwiY29ubmVjdGlvblRlc3QiLCJwbGFubmluZ1Rlc3QiLCJoYXNBcGlLZXkiLCJsb2dTdW1tYXJ5IiwiZGVidWdDb250ZW50Iiwibm93IiwibGVhdmVzIiwiZ2V0TGVhdmVzT2ZUeXBlIiwicmlnaHRMZWFmIiwiZ2V0UmlnaHRMZWFmIiwic2V0Vmlld1N0YXRlIiwicmV2ZWFsTGVhZiIsIm5ld0xlYWYiLCJnZXRMZWFmIiwib3BlblZhdWx0U3RydWN0dXJlTW9kYWwiLCJvcGVuU21hcnRTZWFyY2hNb2RhbCIsIm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsIiwib3BlblZhdWx0T3JnYW5pemVyTW9kYWwiLCJvcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWwiLCJzZWFyY2hUZXN0IiwiaW5jbHVkZV9zZXR0aW5ncyIsImNvbXByZXNzaW9uIiwiYmFja3VwX25hbWUiLCJmaWxlc19iYWNrZWRfdXAiLCJiYWNrdXBfc2l6ZSIsImJhY2t1cF9wYXRoIiwicmVjZW50TGlzdCIsIm1hcCIsImNvbW1hbmQiLCJtb2RhbCIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZSIsImNsZWFyVGltZW91dCIsImF1dG9Db21wbGV0ZVRpbWVvdXQiLCJ0cmlnZ2VyQXV0b0NvbXBsZXRpb24iLCJpbmRleE9mIiwiY3VycmVudExpbmUiLCJsYXN0Q2hhciIsImxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0Iiwic3VnZ2VzdGlvbnMiLCJsb2FkRGF0YSIsInNh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
