"use strict";var t=require("obsidian");function e(t,e,n,o){return new(n||(n=Promise))(function(i,s){function a(t){try{r(o.next(t))}catch(t){s(t)}}function l(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,l)}r((o=o.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!0,defaultAgent:"",chatHistoryLimit:100,debugMode:!1};class o extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"VaultPilot Settings"}),n.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),n.createEl("h3",{text:"Connection"}),new t.Setting(n).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),n.createEl("h3",{text:"Features"}),new t.Setting(n).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(n).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Enable Auto-Complete").setDesc("Automatically suggest completions as you type").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Agent Configuration"}),new t.Setting(n).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Advanced"}),new t.Setting(n).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Information"});n.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let o=yield this.plugin.apiClient.healthCheck();if(!o.success&&(null===(e=o.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(o={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),o.success?new t.Notice("‚úÖ Connection successful!",3e3):new t.Notice(`‚ùå Connection failed: ${o.error}`,5e3)}catch(e){n.hide(),new t.Notice(`‚ùå Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const i="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return i}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ü§ñ VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),o=t.createEl("div",{cls:"vaultpilot-status-item"});o.createEl("span",{text:"WebSocket: "}),o.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"üü¢ Connected":"üî¥ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="üü¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="üî¥ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="üî¥ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"üí¨ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"‚öôÔ∏è Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"üîç Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"‚ú® Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"üîÑ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),o=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:o.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getAgents();if(t.success&&t.data){const e=t.data.length,n=t.data.filter(t=>t.active).length,o=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});o.createEl("h4",{text:"Available Agents"});o.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${n}/${e} active`})}}catch(t){}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}class a extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ü§ñ VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const o=n.createEl("select",{cls:"vaultpilot-agent-select"});o.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(o),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask me anything about your vault...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();e.success&&e.data&&e.data.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})})}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getConversationHistory();if(t.success&&t.data&&t.data.length>0){const e=t.data[0];this.currentConversationId=e.conversation_id,this.messages=e.messages,this.renderMessages()}}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const n=this.app.workspace.getActiveFile();let o="";if(n){const t=yield this.app.vault.read(n);o=`Current file: ${n.name}\n\nContent:\n${t}`}const i=yield this.plugin.apiClient.chat({message:e,conversation_id:this.currentConversationId||void 0,vault_context:o,agent_id:this.getSelectedAgent()});i.success&&i.data?(this.currentConversationId=i.data.conversation_id,this.addMessage("assistant",i.data.response)):(this.addMessage("assistant",`Error: ${i.error||"Failed to get response"}`),new t.Notice(`Chat error: ${i.error}`))}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class l extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"‚öôÔ∏è Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=o.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const s=n.createEl("div",{cls:"vaultpilot-form-group"});s.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const a=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=a.createEl("input",{type:"checkbox"});a.createSpan({text:"Include active file content"});const r=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,o){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(o){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const s=yield this.plugin.apiClient.executeWorkflow(i);if(!s.success||!s.data)throw new Error(s.error||"Workflow execution failed");yield this.displayResults(s.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"‚úÖ Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const o=e.createEl("div",{cls:"vaultpilot-artifact"});o.createEl("h5",{text:t.title}),o.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});o.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,o){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,o=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,o),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let o="# VaultPilot Workflow Results\n\n";o+=`**Goal:** ${this.goalInput.value}\n\n`,o+=`**Execution Time:** ${n.execution_time}s\n\n`,o+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(o+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{o+=`${e+1}. ${t}\n`}),o+="\n"),n.artifacts&&n.artifacts.length>0&&(o+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{o+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,o),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>‚ùå Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class r{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,o=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(o.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:o,mode:"cors",credentials:"omit"}));let i;const s=t.headers.get("content-type");if(i=s&&s.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/api/obsidian/health`);const t=yield this.makeRequest("/api/obsidian/health",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/api/obsidian/health`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,void 0,void 0,function*(){const e={conversation_id:t,limit:50,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(e)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,o,i,s,a,l;try{const l=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",l.type),l.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,l.data);break;case"workflow_progress":null===(o=t.onWorkflowProgress)||void 0===o||o.call(t,l.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,l.data);break;case"vault_sync":null===(s=t.onVaultSync)||void 0===s||s.call(t,l.data);break;case"error":null===(a=t.onError)||void 0===a||a.call(t,l.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(l=t.onError)||void 0===l||l.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class c extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e;yield this.loadSettings(),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey);try{let n=yield this.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(new t.Notice("‚úÖ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",n.error),new t.Notice("‚ö†Ô∏è EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("‚ö†Ô∏è Cannot connect to EvoAgentX backend",5e3)}this.registerView(i,t=>new s(t,this));this.addRibbonIcon("bot","VaultPilot",t=>{this.openChatModal()}).addClass("vaultpilot-ribbon-class"),this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new o(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(i),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new a(this.app,this).open()}openWorkflowModal(){new l(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let o="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);o+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:o,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let o=`# Vault Analysis - ${e}\n\n`;o+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(o+="## Key Insights\n\n",i.data.insights.forEach(t=>{o+=`- ${t}\n`}),o+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(o+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{o+=`- ${t}\n`})),yield this.app.vault.create(n,o),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),o=n.getLine(e.line).substring(0,e.ch),i=n.getValue();try{const s=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:o});s.success&&s.data?(n.replaceRange(s.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${s.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const o=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(o.success&&o.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${o.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${o.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),o=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==o?void 0:o.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==o?void 0:o.basename)||"Untitled"} - ${e}.md`;let s=`# ${n.data.plan.title}\n\n`;s+=`${n.data.plan.description}\n\n`,s+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(s+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";s+=`${e} **${t.title}** (${t.priority} priority)\n`,s+=`   ${t.description}\n`,s+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(s+="## Milestones\n\n",n.data.milestones.forEach(t=>{s+=`- **${t.title}** (${t.target_date})\n`,s+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,s),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(i);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:i,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},1e3))}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,o=n.getCursor(),i=n.getLine(o.line);if(!(i.trim().length<3||o.ch!==i.length))try{const e=yield this.apiClient.getCopilotCompletion({text:n.getValue(),cursor_position:n.posToOffset(o),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},n,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){yield this.saveData(this.settings),this.apiClient=new r(this.settings.backendUrl,this.settings.apiKey),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=c;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvY2hhdC1tb2RhbC50cyIsIi4uL3NyYy93b3JrZmxvdy1tb2RhbC50cyIsIi4uL3NyYy9hcGktY2xpZW50LnRzIiwiLi4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFZhdWx0UGlsb3RTZXR0aW5ncyA9IHtcbiAgYmFja2VuZFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsXG4gIGFwaUtleTogJycsXG4gIGVuYWJsZVdlYlNvY2tldDogdHJ1ZSxcbiAgZW5hYmxlQ29waWxvdDogdHJ1ZSxcbiAgZW5hYmxlQXV0b0NvbXBsZXRlOiB0cnVlLFxuICBkZWZhdWx0QWdlbnQ6ICcnLFxuICBjaGF0SGlzdG9yeUxpbWl0OiAxMDAsXG4gIGRlYnVnTW9kZTogZmFsc2Vcbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYXMgeW91IHR5cGUnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gV29ya2Zsb3cgYWN0aW9uXG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcblxuICAgIC8vIEFuYWx5emUgdmF1bHQgYWN0aW9uXG4gICAgY29uc3QgYW5hbHl6ZUJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UjSBBbmFseXplIFZhdWx0JyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBhbmFseXplQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hbmFseXplVmF1bHQoKTtcblxuICAgIC8vIENvcGlsb3QgYWN0aW9uXG4gICAgY29uc3QgY29waWxvdEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pyoIEdldCBDb21wbGV0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICBjb3BpbG90QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmdldENvcGlsb3RDb21wbGV0aW9uKGFjdGl2ZVZpZXcuZWRpdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBlZGl0b3IgZm91bmQnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gdGhpcy5xdWlja0FjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CflIQgUmVmcmVzaCBTdGF0dXMnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhZ2VudCBpbmZvIGlmIGF2YWlsYWJsZVxuICAgIHRoaXMubG9hZEFnZW50SW5mbygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IHJlc3BvbnNlLmRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSByZXNwb25zZS5kYXRhLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudFN0YXRzRWwgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXRzJyB9KTtcbiAgICAgICAgYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2YWlsYWJsZSBBZ2VudHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgaWYgYWdlbnRzIGNhbid0IGJlIGxvYWRlZFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtdmlldy1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtdmlldyB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1oZWFkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3VidGl0bGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIGgzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yLFxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVmcmVzaC1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpO1xuICAgICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWl0ZW0ge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtdmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyBoNCB7XG4gICAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LWluZm8ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlc291cmNlc1xuICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY2hhdENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbWVzc2FnZXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0RWwhOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHNlbmRCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNoYXQtbW9kYWwnKTtcblxuICAgIC8vIE1vZGFsIGhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCBDaGF0JyB9KTtcbiAgICBcbiAgICBjb25zdCB0b29sYmFyRWwgPSBoZWFkZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdG9vbGJhcicgfSk7XG4gICAgXG4gICAgLy8gQ2xlYXIgY2hhdCBidXR0b25cbiAgICBjb25zdCBjbGVhckJ0biA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDbGVhciBDaGF0JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY2xlYXJCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xlYXJDaGF0KCk7XG5cbiAgICAvLyBBZ2VudCBzZWxlY3RvciAod2lsbCBiZSBwb3B1bGF0ZWQgd2hlbiBhZ2VudHMgYXJlIGxvYWRlZClcbiAgICBjb25zdCBhZ2VudFNlbGVjdCA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXNlbGVjdCcgfSk7XG4gICAgYWdlbnRTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0F1dG8tc2VsZWN0IEFnZW50JywgdmFsdWU6ICcnIH0pO1xuICAgIHRoaXMubG9hZEFnZW50cyhhZ2VudFNlbGVjdCk7XG5cbiAgICAvLyBDaGF0IGNvbnRhaW5lclxuICAgIHRoaXMuY2hhdENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBNZXNzYWdlcyBhcmVhXG4gICAgdGhpcy5tZXNzYWdlc0VsID0gdGhpcy5jaGF0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcycgfSk7XG4gICAgXG4gICAgLy8gSW5wdXQgY29udGFpbmVyXG4gICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICB0aGlzLmlucHV0RWwgPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQXNrIG1lIGFueXRoaW5nIGFib3V0IHlvdXIgdmF1bHQuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZW5kQnV0dG9uID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1NlbmQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSB2YXVsdHBpbG90LXNlbmQtYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5zZW5kQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNlbmRNZXNzYWdlKCk7XG5cbiAgICAvLyBGb2N1cyB0aGUgaW5wdXRcbiAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcblxuICAgIC8vIExvYWQgY29udmVyc2F0aW9uIGhpc3RvcnlcbiAgICB0aGlzLmxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCk7XG5cbiAgICAvLyBBZGQgc3R5bGVzXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50cyhzZWxlY3RFbDogSFRNTFNlbGVjdEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChhZ2VudCA9PiB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgICAgIHRleHQ6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogYWdlbnQuaWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50czonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSgpO1xuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbGF0ZXN0Q29udmVyc2F0aW9uID0gcmVzcG9uc2UuZGF0YVswXTtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSBsYXRlc3RDb252ZXJzYXRpb24uY29udmVyc2F0aW9uX2lkO1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gbGF0ZXN0Q29udmVyc2F0aW9uLm1lc3NhZ2VzO1xuICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRNZXNzYWdlKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmlucHV0RWwudmFsdWUudHJpbSgpO1xuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgLy8gRGlzYWJsZSBpbnB1dCB3aGlsZSBwcm9jZXNzaW5nXG4gICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kaW5nLi4uJztcblxuICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2UgdG8gVUlcbiAgICB0aGlzLmFkZE1lc3NhZ2UoJ3VzZXInLCBtZXNzYWdlKTtcbiAgICB0aGlzLmlucHV0RWwudmFsdWUgPSAnJztcblxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdmF1bHQgY29udGV4dCBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgbGV0IHZhdWx0Q29udGV4dCA9ICcnO1xuICAgICAgXG4gICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgdmF1bHRDb250ZXh0ID0gYEN1cnJlbnQgZmlsZTogJHthY3RpdmVGaWxlLm5hbWV9XFxuXFxuQ29udGVudDpcXG4ke2NvbnRlbnR9YDtcbiAgICAgIH1cblxuICAgICAgLy8gU2VuZCB0byBBUElcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNoYXQoe1xuICAgICAgICBtZXNzYWdlLFxuICAgICAgICBjb252ZXJzYXRpb25faWQ6IHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdmF1bHRfY29udGV4dDogdmF1bHRDb250ZXh0LFxuICAgICAgICBhZ2VudF9pZDogdGhpcy5nZXRTZWxlY3RlZEFnZW50KClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gcmVzcG9uc2UuZGF0YS5jb252ZXJzYXRpb25faWQ7XG4gICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgcmVzcG9uc2UuZGF0YS5yZXNwb25zZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dFxuICAgICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kJztcbiAgICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRBZ2VudCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHNlbGVjdEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcmV0dXJuIHNlbGVjdEVsPy52YWx1ZSB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5tZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpIHtcbiAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogYHZhdWx0cGlsb3QtbWVzc2FnZSB2YXVsdHBpbG90LW1lc3NhZ2UtJHttZXNzYWdlLnJvbGV9YFxuICAgIH0pO1xuXG4gICAgY29uc3Qgcm9sZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2Utcm9sZScsXG4gICAgICB0ZXh0OiBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdZb3UnIDogJ1ZhdWx0UGlsb3QnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmluZyBmb3IgYmFzaWMgZm9ybWF0dGluZ1xuICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKG1lc3NhZ2UuY29udGVudCk7XG5cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtdGltZScsXG4gICAgICAgIHRleHQ6IG5ldyBEYXRlKG1lc3NhZ2UudGltZXN0YW1wKS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyQ2hhdCgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIG5ldyBOb3RpY2UoJ0NoYXQgY2xlYXJlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC1jaGF0LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1jaGF0LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNjAwcHg7XG4gICAgICAgICAgaGVpZ2h0OiA3MDBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC10b29sYmFyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXNlbGVjdCB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gODBweCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcyB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdXNlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1hc3Npc3RhbnQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Utcm9sZSB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS40O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS10aW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zZW5kLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgV29ya2Zsb3dSZXF1ZXN0LCBXb3JrZmxvd1Jlc3BvbnNlLCBXb3JrZmxvd1Byb2dyZXNzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBXb3JrZmxvd01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgZ29hbElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBjb250ZXh0SW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGV4ZWN1dGVCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBwcm9ncmVzc0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlc3VsdHNDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpc0V4ZWN1dGluZyA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCcpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ+Kame+4jyBXb3JrZmxvdyBFeGVjdXRpb24nIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdEZWZpbmUgYSBnb2FsIGFuZCBsZXQgVmF1bHRQaWxvdCBjcmVhdGUgYW5kIGV4ZWN1dGUgYSBjb21wcmVoZW5zaXZlIHdvcmtmbG93IHRvIGFjaGlldmUgaXQuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24nXG4gICAgfSk7XG5cbiAgICAvLyBGb3JtXG4gICAgY29uc3QgZm9ybUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZm9ybScgfSk7XG5cbiAgICAvLyBHb2FsIGlucHV0XG4gICAgY29uc3QgZ29hbENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdHb2FsIConLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuICAgIHRoaXMuZ29hbElucHV0ID0gZ29hbENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ2UuZy4sIFwiQ3JlYXRlIGEgY29tcHJlaGVuc2l2ZSBzdHVkeSBwbGFuIGZvciBtYWNoaW5lIGxlYXJuaW5nIGJhc2VkIG9uIG15IG5vdGVzXCInLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1nb2FsLWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gQ29udGV4dCBpbnB1dFxuICAgIGNvbnN0IGNvbnRleHRDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnQWRkaXRpb25hbCBDb250ZXh0IChvcHRpb25hbCknLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dElucHV0ID0gY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ1Byb3ZpZGUgYW55IGFkZGl0aW9uYWwgY29udGV4dCwgY29uc3RyYWludHMsIG9yIHJlcXVpcmVtZW50cy4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNvbnRleHQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBWYXVsdCBjb250ZW50IG9wdGlvbnNcbiAgICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ1ZhdWx0IEludGVncmF0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBY3RpdmVGaWxlID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGVDaGVja2JveCA9IGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWN0aXZlIGZpbGUgY29udGVudCcgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWxsRmlsZXMgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWxsRmlsZXNDaGVja2JveCA9IGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhbGwgdmF1bHQgZmlsZXMgKG1heSB0YWtlIGxvbmdlciknIH0pO1xuXG4gICAgLy8gRXhlY3V0ZSBidXR0b25cbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24gPSBmb3JtRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ21vZC1jdGEgdmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbidcbiAgICB9KTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZXhlY3V0ZVdvcmtmbG93KGFjdGl2ZUZpbGVDaGVja2JveC5jaGVja2VkLCBhbGxGaWxlc0NoZWNrYm94LmNoZWNrZWQpO1xuXG4gICAgLy8gUHJvZ3Jlc3MgY29udGFpbmVyXG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIFJlc3VsdHMgY29udGFpbmVyXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIEZvY3VzIHRoZSBnb2FsIGlucHV0XG4gICAgdGhpcy5nb2FsSW5wdXQuZm9jdXMoKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhpbmNsdWRlQWN0aXZlRmlsZTogYm9vbGVhbiwgaW5jbHVkZUFsbEZpbGVzOiBib29sZWFuKSB7XG4gICAgY29uc3QgZ29hbCA9IHRoaXMuZ29hbElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIWdvYWwpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIGdvYWwgZm9yIHRoZSB3b3JrZmxvdycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaXNFeGVjdXRpbmcgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGluZy4uLic7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIHRyeSB7XG4gICAgICAvLyBQcmVwYXJlIHZhdWx0IGNvbnRlbnRcbiAgICAgIGxldCB2YXVsdENvbnRlbnQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGluY2x1ZGVBY3RpdmVGaWxlKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7YWN0aXZlRmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5jbHVkZUFsbEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMjApKSB7IC8vIExpbWl0IHRvIGZpcnN0IDIwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSB3b3JrZmxvdyByZXF1ZXN0XG4gICAgICBjb25zdCByZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QgPSB7XG4gICAgICAgIGdvYWwsXG4gICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dElucHV0LnZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHZhdWx0X2NvbnRlbnQ6IHZhdWx0Q29udGVudCB8fCB1bmRlZmluZWRcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIFdlYlNvY2tldCBsaXN0ZW5lciBmb3IgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgaWYgKHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkpIHtcbiAgICAgICAgLy8gTGlzdGVuIGZvciB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIHRoaXMuc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4ZWN1dGUgd29ya2Zsb3dcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50IS5leGVjdXRlV29ya2Zsb3cocmVxdWVzdCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5UmVzdWx0cyhyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnV29ya2Zsb3cgZXhlY3V0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICBuZXcgTm90aWNlKGBXb3JrZmxvdyBlcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKGVycm9yTXNnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0V4ZWN1dGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0ZSBXb3JrZmxvdyc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFByb2dyZXNzTGlzdGVuZXIoKSB7XG4gICAgLy8gVGhpcyB3b3VsZCBiZSBjb25uZWN0ZWQgdG8gdGhlIFdlYlNvY2tldCBwcm9ncmVzcyB1cGRhdGVzXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgcHJvZ3Jlc3NcbiAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnQW5hbHl6aW5nIGdvYWwgYW5kIGNvbnRleHQuLi4nKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdQbGFubmluZyB3b3JrZmxvdyBzdGVwcy4uLicpO1xuICAgIH0sIDEwMDApO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0V4ZWN1dGluZyB3b3JrZmxvdy4uLicpO1xuICAgIH0sIDIwMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5UHJvZ3Jlc3MobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgPHNwYW4+JHttZXNzYWdlfTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRpc3BsYXlSZXN1bHRzKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIC8vIENsZWFyIHByZXZpb3VzIHJlc3VsdHNcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KchSBXb3JrZmxvdyBDb21wbGV0ZWQnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6IGBFeGVjdXRpb24gdGltZTogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zYCxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUnXG4gICAgfSk7XG5cbiAgICAvLyBNYWluIHJlc3VsdFxuICAgIGNvbnN0IHJlc3VsdEVsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQnIH0pO1xuICAgIHJlc3VsdEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1Jlc3VsdCcgfSk7XG4gICAgY29uc3QgcmVzdWx0Q29udGVudEVsID0gcmVzdWx0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtdGV4dCcgfSk7XG4gICAgcmVzdWx0Q29udGVudEVsLmlubmVySFRNTCA9IHRoaXMucmVuZGVyTWFya2Rvd24od29ya2Zsb3cucmVzdWx0KTtcblxuICAgIC8vIFN0ZXBzIHRha2VuXG4gICAgaWYgKHdvcmtmbG93LnN0ZXBzX3Rha2VuICYmIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHN0ZXBzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXInIH0pO1xuICAgICAgc3RlcHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdTdGVwcyBUYWtlbicgfSk7XG4gICAgICBjb25zdCBzdGVwc0xpc3QgPSBzdGVwc0VsLmNyZWF0ZUVsKCdvbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGVwcy1saXN0JyB9KTtcbiAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgIHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHN0ZXAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBcnRpZmFjdHNcbiAgICBpZiAod29ya2Zsb3cuYXJ0aWZhY3RzICYmIHdvcmtmbG93LmFydGlmYWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhcnRpZmFjdHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXInIH0pO1xuICAgICAgYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnR2VuZXJhdGVkIEFydGlmYWN0cycgfSk7XG4gICAgICBcbiAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKChhcnRpZmFjdCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYXJ0aWZhY3RFbCA9IGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QnIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogYXJ0aWZhY3QudGl0bGUgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgIHRleHQ6IGBUeXBlOiAke2FydGlmYWN0LnR5cGV9YCxcbiAgICAgICAgICBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0LXR5cGUnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGFydGlmYWN0RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiAnU2F2ZSBhcyBOb3RlJyxcbiAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3QsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNhdmUgYWxsIGJ1dHRvblxuICAgIGNvbnN0IGFjdGlvbnNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucycgfSk7XG4gICAgY29uc3Qgc2F2ZUFsbEJ1dHRvbiA9IGFjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1NhdmUgQ29tcGxldGUgUmVzdWx0cyBhcyBOb3RlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUFsbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0OiBhbnksIGluZGV4OiBudW1iZXIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHthcnRpZmFjdC50aXRsZS5yZXBsYWNlKC9bXmEtekEtWjAtOVxcc10vZywgJycpfS5tZGA7XG4gICAgICBjb25zdCBjb250ZW50ID0gYCMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9YDtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYEFydGlmYWN0IHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIGFydGlmYWN0OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0UGlsb3QgV29ya2Zsb3cgUmVzdWx0cyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgXG4gICAgICBsZXQgY29udGVudCA9IGAjIFZhdWx0UGlsb3QgV29ya2Zsb3cgUmVzdWx0c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkdvYWw6KiogJHt0aGlzLmdvYWxJbnB1dC52YWx1ZX1cXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipFeGVjdXRpb24gVGltZToqKiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgIyMgUmVzdWx0XFxuXFxuJHt3b3JrZmxvdy5yZXN1bHR9XFxuXFxuYDtcbiAgICAgIFxuICAgICAgaWYgKHdvcmtmbG93LnN0ZXBzX3Rha2VuICYmIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgU3RlcHMgVGFrZW5cXG5cXG5gO1xuICAgICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCR7aW5kZXggKyAxfS4gJHtzdGVwfVxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xuICAgICAgfVxuXG4gICAgICBpZiAod29ya2Zsb3cuYXJ0aWZhY3RzICYmIHdvcmtmbG93LmFydGlmYWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIEdlbmVyYXRlZCBBcnRpZmFjdHNcXG5cXG5gO1xuICAgICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaChhcnRpZmFjdCA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgIyMjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fVxcblxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQ29tcGxldGUgcmVzdWx0cyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSByZXN1bHRzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheUVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LWVycm9yXCI+XG4gICAgICAgIDxoMz7inYwgV29ya2Zsb3cgRmFpbGVkPC9oMz5cbiAgICAgICAgPHA+JHttZXNzYWdlfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+JylcbiAgICAgIC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKVxuICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNzAwcHg7XG4gICAgICAgICAgbWF4LWhlaWdodDogODB2aDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tZ3JvdXAge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1sYWJlbCB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1nb2FsLWlucHV0LFxuICAgICAgICAudmF1bHRwaWxvdC1jb250ZXh0LWlucHV0IHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCBpbnB1dCB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLXNwaW5uZXIge1xuICAgICAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC10ZXh0IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyLFxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWxpc3Qge1xuICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWVycm9yIHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBcbiAgQVBJUmVzcG9uc2UsIFxuICBDaGF0UmVxdWVzdCwgXG4gIENoYXRSZXNwb25zZSwgXG4gIENvbnZlcnNhdGlvbkhpc3RvcnksXG4gIENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0LFxuICBDb3BpbG90UmVxdWVzdCwgXG4gIENvcGlsb3RSZXNwb25zZSxcbiAgV29ya2Zsb3dSZXF1ZXN0LFxuICBXb3JrZmxvd1Jlc3BvbnNlLFxuICBBZ2VudCxcbiAgQWdlbnRDcmVhdGVSZXF1ZXN0LFxuICBBZ2VudEV4ZWN1dGVSZXF1ZXN0LFxuICBWYXVsdENvbnRleHRSZXF1ZXN0LFxuICBWYXVsdENvbnRleHRSZXNwb25zZSxcbiAgVGFza1BsYW5uaW5nUmVxdWVzdCxcbiAgVGFza1BsYW5uaW5nUmVzcG9uc2UsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVxdWVzdCxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXNwb25zZSxcbiAgTWVtb3J5VXBkYXRlUmVxdWVzdCxcbiAgV2ViU29ja2V0TWVzc2FnZSxcbiAgRXJyb3JSZXNwb25zZVxufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEV2b0FnZW50WENsaWVudCB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ/OiBXZWJTb2NrZXQ7XG4gIHByaXZhdGUgd3NDYWxsYmFja3M6IE1hcDxzdHJpbmcsIChkYXRhOiBhbnkpID0+IHZvaWQ+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmw6IHN0cmluZywgYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3Q8VD4oXG4gICAgZW5kcG9pbnQ6IHN0cmluZywgXG4gICAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fVxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlPFQ+PiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZW5kcG9pbnR9YDtcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfHwge30pLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5hcGlLZXkpIHtcbiAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gSGFuZGxlIG5vbi1KU09OIHJlc3BvbnNlcyBncmFjZWZ1bGx5XG4gICAgICBsZXQgZGF0YTtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuZXJyb3IgXG4gICAgICAgICAgPyBkYXRhLmVycm9yIFxuICAgICAgICAgIDogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFQSSBFcnJvciBbJHtyZXNwb25zZS5zdGF0dXN9XTpgLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyA/IHsgbWVzc2FnZTogZGF0YSB9IGFzIFQgOiBkYXRhLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQVBJIFJlcXVlc3QgRXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSGVhbHRoIGNoZWNrXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+PiB7XG4gICAgY29uc29sZS5sb2coYFZhdWx0UGlsb3Q6IEF0dGVtcHRpbmcgaGVhbHRoIGNoZWNrIHRvICR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vaGVhbHRoYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4oJy9hcGkvb2JzaWRpYW4vaGVhbHRoJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogSGVhbHRoIGNoZWNrIHJlc3VsdDonLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBBbHRlcm5hdGl2ZSBoZWFsdGggY2hlY2sgbWV0aG9kIGlmIHRoZSBtYWluIG9uZSBmYWlsc1xuICBhc3luYyBzaW1wbGVIZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vaGVhbHRoYDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ0hFQUQnLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA1KSB7IC8vIDQwNSBtZWFucyBzZXJ2ZXIgaXMgdXAgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBIRUFEXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ29rJyB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYFNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdDb25uZWN0aW9uIGZhaWxlZCdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hhdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGNoYXQocmVxdWVzdDogQ2hhdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENoYXRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jaGF0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbnZlcnNhdGlvbkhpc3RvcnkoY29udmVyc2F0aW9uSWQ/OiBzdHJpbmcpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvbnZlcnNhdGlvbkhpc3RvcnlbXT4+IHtcbiAgICBjb25zdCByZXF1ZXN0Qm9keTogQ29udmVyc2F0aW9uSGlzdG9yeVJlcXVlc3QgPSB7XG4gICAgICBjb252ZXJzYXRpb25faWQ6IGNvbnZlcnNhdGlvbklkLFxuICAgICAgbGltaXQ6IDUwLFxuICAgICAgaW5jbHVkZV9tZXNzYWdlczogdHJ1ZVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9uL2hpc3RvcnknLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnZlcnNhdGlvbihjb252ZXJzYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KGAvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbnMvJHtjb252ZXJzYXRpb25JZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gQ29waWxvdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGdldENvcGlsb3RDb21wbGV0aW9uKHJlcXVlc3Q6IENvcGlsb3RSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxDb3BpbG90UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY29waWxvdC9jb21wbGV0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBXb3JrZmxvdyBleGVjdXRpb25cbiAgYXN5bmMgZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3Q6IFdvcmtmbG93UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8V29ya2Zsb3dSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi93b3JrZmxvdycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gIGFzeW5jIGdldEFnZW50cygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50W10+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVBZ2VudChyZXF1ZXN0OiBBZ2VudENyZWF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cy9jcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUFnZW50KHJlcXVlc3Q6IEFnZW50RXhlY3V0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudC9leGVjdXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhdWx0IGFuYWx5c2lzXG4gIGFzeW5jIGFuYWx5emVWYXVsdENvbnRleHQocmVxdWVzdDogVmF1bHRDb250ZXh0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VmF1bHRDb250ZXh0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvY29udGV4dCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBUYXNrIHBsYW5uaW5nXG4gIGFzeW5jIHBsYW5UYXNrcyhyZXF1ZXN0OiBUYXNrUGxhbm5pbmdSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxUYXNrUGxhbm5pbmdSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9wbGFubmluZy90YXNrcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbGxpZ2VuY2UgcGFyc2luZ1xuICBhc3luYyBwYXJzZUludGVsbGlnZW5jZShyZXF1ZXN0OiBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1lbW9yeSBtYW5hZ2VtZW50XG4gIGFzeW5jIHVwZGF0ZU1lbW9yeShyZXF1ZXN0OiBNZW1vcnlVcGRhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL21lbW9yeS91cGRhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IGZ1bmN0aW9uYWxpdHlcbiAgY29ubmVjdFdlYlNvY2tldChjYWxsYmFja3M6IHtcbiAgICBvbkNoYXQ/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uV29ya2Zsb3dQcm9ncmVzcz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Db3BpbG90PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvblZhdWx0U3luYz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIG9uQ29ubmVjdD86ICgpID0+IHZvaWQ7XG4gICAgb25EaXNjb25uZWN0PzogKCkgPT4gdm9pZDtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHdzVXJsID0gdGhpcy5iYXNlVXJsLnJlcGxhY2UoJ2h0dHAnLCAnd3MnKSArICcvd3Mvb2JzaWRpYW4nO1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvICR7d3NVcmx9YCk7XG4gICAgXG4gICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcpO1xuICAgICAgY2FsbGJhY2tzLm9uQ29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNoYXQ/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd29ya2Zsb3dfcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV29ya2Zsb3dQcm9ncmVzcz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3BpbG90JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNvcGlsb3Q/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndmF1bHRfc3luYyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25WYXVsdFN5bmM/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IEVycm9yIHBhcnNpbmcgV2ViU29ja2V0IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdGYWlsZWQgdG8gcGFyc2UgV2ViU29ja2V0IG1lc3NhZ2UnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBkaXNjb25uZWN0ZWQgZnJvbSBFdm9BZ2VudFgnLCBldmVudC5jb2RlLCBldmVudC5yZWFzb24pO1xuICAgICAgY2FsbGJhY2tzLm9uRGlzY29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvcicpO1xuICAgIH07XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCkge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuY2xvc2UoKTtcbiAgICAgIHRoaXMud2Vic29ja2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNlbmRXZWJTb2NrZXRNZXNzYWdlKHR5cGU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZSwgZGF0YSB9KSk7XG4gICAgfVxuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Py5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBURmlsZSwgRWRpdG9yUG9zaXRpb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXVsdFBpbG90U2V0dGluZ1RhYiwgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVklFV19UWVBFX1ZBVUxUUElMT1QsIFZhdWx0UGlsb3RWaWV3IH0gZnJvbSAnLi92aWV3JztcbmltcG9ydCB7IENoYXRNb2RhbCB9IGZyb20gJy4vY2hhdC1tb2RhbCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGFsIH0gZnJvbSAnLi93b3JrZmxvdy1tb2RhbCc7XG5pbXBvcnQgeyBFdm9BZ2VudFhDbGllbnQgfSBmcm9tICcuL2FwaS1jbGllbnQnO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzLCBDb3BpbG90UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmF1bHRQaWxvdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzITogVmF1bHRQaWxvdFNldHRpbmdzO1xuICBhcGlDbGllbnQhOiBFdm9BZ2VudFhDbGllbnQ7XG4gIHByaXZhdGUgd2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIHByaXZhdGUgY29waWxvdEVuYWJsZWQgPSBmYWxzZTtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIEluaXRpYWxpemUgQVBJIGNsaWVudFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcblxuICAgIC8vIFRlc3QgYmFja2VuZCBjb25uZWN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIFZhdWx0UGlsb3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcsIDMwMDApO1xuICAgICAgICAvLyBDb25uZWN0IFdlYlNvY2tldCBpZiBlbmFibGVkXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCkge1xuICAgICAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkOicsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIEV2b0FnZW50WCBiYWNrZW5kIG9mZmxpbmUgLSBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yaycsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4pqg77iPIENhbm5vdCBjb25uZWN0IHRvIEV2b0FnZW50WCBiYWNrZW5kJywgNTAwMCk7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgdmlld1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignYm90JywgJ1ZhdWx0UGlsb3QnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLm9wZW5DaGF0TW9kYWwoKTtcbiAgICB9KTtcbiAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtcmliYm9uLWNsYXNzJyk7XG5cbiAgICAvLyBSZWdpc3RlciBjb21tYW5kc1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tY2hhdCcsXG4gICAgICBuYW1lOiAnT3BlbiBDaGF0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5DaGF0TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnZXhlY3V0ZS13b3JrZmxvdycsXG4gICAgICBuYW1lOiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuV29ya2Zsb3dNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhbmFseXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBbmFseXplIEN1cnJlbnQgVmF1bHQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYW5hbHl6ZVZhdWx0KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NvcGlsb3QtY29tcGxldGUnLFxuICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMuZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncXVpY2stY2hhdCcsXG4gICAgICBuYW1lOiAnUXVpY2sgQ2hhdCB3aXRoIFNlbGVjdGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi10YXNrcycsXG4gICAgICBuYW1lOiAnUGxhbiBUYXNrcyBmcm9tIE5vdGUnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5wbGFuVGFza3NGcm9tTm90ZShlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLXZhdWx0cGlsb3QtdmlldycsXG4gICAgICBuYW1lOiAnT3BlbiBWYXVsdFBpbG90IFZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KClcbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdGVyIGVkaXRvciBldmVudHMgZm9yIGNvcGlsb3RcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90ICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHNldHRpbmdzIHRhYlxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgVmF1bHRQaWxvdFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIHRoaXMuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IE1hbmFnZW1lbnRcbiAgY29ubmVjdFdlYlNvY2tldCgpIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHJldHVybjtcblxuICAgIHRoaXMuYXBpQ2xpZW50LmNvbm5lY3RXZWJTb2NrZXQoe1xuICAgICAgb25DaGF0OiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgcmVhbC10aW1lIGNoYXQgdXBkYXRlc1xuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNoYXQgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uV29ya2Zsb3dQcm9ncmVzczogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHdvcmtmbG93IHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3c6ICR7ZGF0YS5zdGVwfWAsIDIwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29waWxvdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGNvcGlsb3Qgc3VnZ2VzdGlvbnNcbiAgICAgICAgdGhpcy5oYW5kbGVDb3BpbG90U3VnZ2VzdGlvbihkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvblZhdWx0U3luYzogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHZhdWx0IHN5bmNocm9uaXphdGlvblxuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHQgc3luYyB1cGRhdGU6JywgZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgIG5ldyBOb3RpY2UoYFdlYlNvY2tldCBlcnJvcjogJHtlcnJvcn1gLCA1MDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkRpc2Nvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCkge1xuICAgIHRoaXMuYXBpQ2xpZW50LmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkO1xuICB9XG5cbiAgLy8gTW9kYWwgTWFuYWdlbWVudFxuICBvcGVuQ2hhdE1vZGFsKCkge1xuICAgIG5ldyBDaGF0TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5Xb3JrZmxvd01vZGFsKCkge1xuICAgIG5ldyBXb3JrZmxvd01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICAvLyBDb21tYW5kIEltcGxlbWVudGF0aW9uc1xuICBhc3luYyBhbmFseXplVmF1bHQoKSB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnQW5hbHl6aW5nIHZhdWx0Li4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBhbGwgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgIFxuICAgICAgLy8gSW5jbHVkZSB1cCB0byAxMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDEwKSkge1xuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtmaWxlQ29udGVudH1cXG5cXG5gO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmFuYWx5emVWYXVsdENvbnRleHQoe1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBhbmFseXNpc190eXBlOiAnaW5zaWdodHMnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgYW5hbHlzaXMgbm90ZVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHQgQW5hbHlzaXMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCBhbmFseXNpc0NvbnRlbnQgPSBgIyBWYXVsdCBBbmFseXNpcyAtICR7dGltZXN0YW1wfVxcblxcbmA7XG4gICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgQW5hbHlzaXNcXG5cXG4ke3Jlc3BvbnNlLmRhdGEuYW5hbHlzaXN9XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmluc2lnaHRzICYmIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgS2V5IEluc2lnaHRzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLmluc2lnaHRzLmZvckVhY2goaW5zaWdodCA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtpbnNpZ2h0fVxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zICYmIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIFJlY29tbWVuZGF0aW9uc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7cmVjfVxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGFuYWx5c2lzQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFZhdWx0IGFuYWx5c2lzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ0FuYWx5c2lzIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShgQW5hbHlzaXMgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCkge1xuICAgICAgbmV3IE5vdGljZSgnQ29waWxvdCBpcyBkaXNhYmxlZCBpbiBzZXR0aW5ncycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gY3VycmVudExpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvcGlsb3RDb21wbGV0aW9uKHtcbiAgICAgICAgdGV4dDogZnVsbFRleHQsXG4gICAgICAgIGN1cnNvcl9wb3NpdGlvbjogZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnNvciksXG4gICAgICAgIGZpbGVfdHlwZTogJ21hcmtkb3duJyxcbiAgICAgICAgY29udGV4dDogdGV4dEJlZm9yZUN1cnNvclxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGNvbXBsZXRpb24gYXQgY3Vyc29yXG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UocmVzcG9uc2UuZGF0YS5jb21wbGV0aW9uLCBjdXJzb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdDb21wbGV0aW9uIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDb3BpbG90IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDb3BpbG90IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jaGF0KHtcbiAgICAgICAgbWVzc2FnZTogYFBsZWFzZSBleHBsYWluIG9yIGFuYWx5emUgdGhpcyB0ZXh0OiBcIiR7c2VsZWN0aW9ufVwiYCxcbiAgICAgICAgdmF1bHRfY29udGV4dDogZWRpdG9yLmdldFZhbHVlKClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCByZXNwb25zZSBiZWxvdyBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcbiAgICAgICAgY29uc3QgbmV3TGluZSA9IGBcXG5cXG4qKlZhdWx0UGlsb3QgQW5hbHlzaXM6KipcXG4ke3Jlc3BvbnNlLmRhdGEucmVzcG9uc2V9XFxuXFxuYDtcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdMaW5lLCBjdXJzb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdBbmFseXNpcyBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwbGFuVGFza3NGcm9tTm90ZShlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBjb250ZW50IHRvIGFuYWx5emUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdQbGFubmluZyB0YXNrcy4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQucGxhblRhc2tzKHtcbiAgICAgICAgZ29hbDogYENyZWF0ZSBhIHRhc2sgcGxhbiBiYXNlZCBvbiB0aGlzIG5vdGU6ICR7YWN0aXZlRmlsZT8ubmFtZSB8fCAnVW50aXRsZWQnfWAsXG4gICAgICAgIGNvbnRleHQ6IGNvbnRlbnQsXG4gICAgICAgIHRpbWVmcmFtZTogJzEgd2VlaydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0YXNrIHBsYW4gbm90ZVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVGFzayBQbGFuIC0gJHthY3RpdmVGaWxlPy5iYXNlbmFtZSB8fCAnVW50aXRsZWQnfSAtICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFza0NvbnRlbnQgPSBgIyAke3Jlc3BvbnNlLmRhdGEucGxhbi50aXRsZX1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgJHtyZXNwb25zZS5kYXRhLnBsYW4uZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCoqRXN0aW1hdGVkIER1cmF0aW9uOioqICR7cmVzcG9uc2UuZGF0YS5wbGFuLmVzdGltYXRlZF9kdXJhdGlvbn1cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcyAmJiByZXNwb25zZS5kYXRhLnBsYW4udGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAjIyBUYXNrc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2suc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICdbeF0nIDogJ1sgXSc7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgJHtjaGVja2JveH0gKioke3Rhc2sudGl0bGV9KiogKCR7dGFzay5wcmlvcml0eX0gcHJpb3JpdHkpXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAke3Rhc2suZGVzY3JpcHRpb259XFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAqRXN0aW1hdGVkIHRpbWU6ICR7dGFzay5lc3RpbWF0ZWRfdGltZX0qXFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMgJiYgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgTWlsZXN0b25lc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmZvckVhY2gobWlsZXN0b25lID0+IHtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAtICoqJHttaWxlc3RvbmUudGl0bGV9KiogKCR7bWlsZXN0b25lLnRhcmdldF9kYXRlfSlcXG5gO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCAgJHttaWxlc3RvbmUuZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgdGFza0NvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW4gc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnVGFzayBwbGFubmluZyBmYWlsZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFRhc2sgcGxhbm5pbmcgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1QpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgYXdhaXQgcmlnaHRMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgdHlwZTogVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWF2ZXNbMF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEF1dG8tY29tcGxldGlvbiBoYW5kbGluZ1xuICBwcml2YXRlIGhhbmRsZUtleVVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20tY29udGVudCcpKSByZXR1cm47XG5cbiAgICAvLyBEZWJvdW5jZSBhdXRvLWNvbXBsZXRpb24gcmVxdWVzdHNcbiAgICBjbGVhclRpbWVvdXQoKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0KTtcbiAgICAodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckF1dG9Db21wbGV0aW9uKCk7XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRyaWdnZXJBdXRvQ29tcGxldGlvbigpIHtcbiAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcblxuICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBcbiAgICAvLyBPbmx5IHRyaWdnZXIgaWYgbGluZSBoYXMgc29tZSBjb250ZW50IGFuZCBjdXJzb3IgaXMgYXQgZW5kXG4gICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKS5sZW5ndGggPCAzIHx8IGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGVkaXRvci5nZXRWYWx1ZSgpLFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIChmb3Igbm93IGp1c3Qgc2hvdyBmaXJzdCBzdWdnZXN0aW9uKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBTdWdnZXN0aW9uOiAke3Jlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnNbMF19YCwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFpbCBmb3IgYXV0by1jb21wbGV0aW9uXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXV0by1jb21wbGV0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGE6IENvcGlsb3RSZXNwb25zZSkge1xuICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY29waWxvdCBzdWdnZXN0aW9ucyBmcm9tIFdlYlNvY2tldFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgbmV3IE5vdGljZShgTGl2ZSBzdWdnZXN0aW9uOiAke2RhdGEuY29tcGxldGlvbn1gLCAyMDAwKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXR0aW5ncyBtYW5hZ2VtZW50XG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBBUEkgY2xpZW50IGlmIFVSTCBjaGFuZ2VkXG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuICAgIFxuICAgIC8vIFJlY29ubmVjdCBXZWJTb2NrZXQgaWYgc2V0dGluZ3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCAmJiAhdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSB7XG4gICAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJERUZBVUxUX1NFVFRJTkdTIiwiYmFja2VuZFVybCIsImFwaUtleSIsImVuYWJsZVdlYlNvY2tldCIsImVuYWJsZUNvcGlsb3QiLCJlbmFibGVBdXRvQ29tcGxldGUiLCJkZWZhdWx0QWdlbnQiLCJjaGF0SGlzdG9yeUxpbWl0IiwiZGVidWdNb2RlIiwiVmF1bHRQaWxvdFNldHRpbmdUYWIiLCJQbHVnaW5TZXR0aW5nVGFiIiwiY29uc3RydWN0b3IiLCJhcHAiLCJwbHVnaW4iLCJzdXBlciIsInRoaXMiLCJkaXNwbGF5IiwiY29udGFpbmVyRWwiLCJlbXB0eSIsImNyZWF0ZUVsIiwidGV4dCIsIlNldHRpbmciLCJzZXROYW1lIiwic2V0RGVzYyIsImFkZFRleHQiLCJzZXRQbGFjZWhvbGRlciIsInNldFZhbHVlIiwic2V0dGluZ3MiLCJvbkNoYW5nZSIsInZhbHVlIiwiX19hd2FpdGVyIiwic2F2ZVNldHRpbmdzIiwiYWRkQnV0dG9uIiwiYnV0dG9uIiwic2V0QnV0dG9uVGV4dCIsIm9uQ2xpY2siLCJ0ZXN0Q29ubmVjdGlvbiIsImFkZFRvZ2dsZSIsInRvZ2dsZSIsImNvbm5lY3RXZWJTb2NrZXQiLCJkaXNjb25uZWN0V2ViU29ja2V0IiwiYWRkU2xpZGVyIiwic2xpZGVyIiwic2V0TGltaXRzIiwic2V0RHluYW1pY1Rvb2x0aXAiLCJjbHMiLCJpbm5lckhUTUwiLCJub3RpY2UiLCJOb3RpY2UiLCJyZXNwb25zZSIsImFwaUNsaWVudCIsImhlYWx0aENoZWNrIiwic3VjY2VzcyIsImVycm9yIiwiX2EiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJ3YXJuIiwic2ltcGxlUmVzcG9uc2UiLCJzaW1wbGVIZWFsdGhDaGVjayIsImRhdGEiLCJzdGF0dXMiLCJ2ZXJzaW9uIiwiaGlkZSIsIkVycm9yIiwibWVzc2FnZSIsIlZJRVdfVFlQRV9WQVVMVFBJTE9UIiwiVmF1bHRQaWxvdFZpZXciLCJJdGVtVmlldyIsImxlYWYiLCJnZXRWaWV3VHlwZSIsImdldERpc3BsYXlUZXh0IiwiZ2V0SWNvbiIsIm9uT3BlbiIsImNvbnRhaW5lciIsImFkZENsYXNzIiwiaGVhZGVyRWwiLCJzdGF0dXNFbCIsInVwZGF0ZVN0YXR1cyIsInF1aWNrQWN0aW9uc0VsIiwiY3JlYXRlUXVpY2tBY3Rpb25zIiwidmF1bHRTdGF0c0VsIiwidXBkYXRlVmF1bHRTdGF0cyIsImFjdGl2aXRpZXNFbCIsImFkZFN0eWxlcyIsInN0YXR1c0NvbnRhaW5lciIsImJhY2tlbmRTdGF0dXMiLCJiYWNrZW5kSW5kaWNhdG9yIiwid3NTdGF0dXMiLCJpc1dlYlNvY2tldENvbm5lY3RlZCIsImNoZWNrQmFja2VuZFN0YXR1cyIsImluZGljYXRvciIsInRleHRDb250ZW50IiwiY2xhc3NOYW1lIiwiYWN0aW9uc0dyaWQiLCJvbmNsaWNrIiwib3BlbkNoYXRNb2RhbCIsIm9wZW5Xb3JrZmxvd01vZGFsIiwiYW5hbHl6ZVZhdWx0IiwiYWN0aXZlVmlldyIsIndvcmtzcGFjZSIsImdldEFjdGl2ZVZpZXdPZlR5cGUiLCJNYXJrZG93blZpZXciLCJnZXRDb3BpbG90Q29tcGxldGlvbiIsImVkaXRvciIsInN0YXRzQ29udGFpbmVyIiwiZmlsZXMiLCJ2YXVsdCIsImdldEZpbGVzIiwibWFya2Rvd25GaWxlcyIsImdldE1hcmtkb3duRmlsZXMiLCJsYWJlbCIsImxlbmd0aCIsInRvU3RyaW5nIiwiZ2V0QWxsTG9hZGVkRmlsZXMiLCJmaWx0ZXIiLCJmIiwiVEZvbGRlciIsImZvckVhY2giLCJzdGF0Iiwic3RhdEVsIiwibG9hZEFnZW50SW5mbyIsImdldEFnZW50cyIsImFnZW50Q291bnQiLCJhY3RpdmVBZ2VudHMiLCJhZ2VudCIsImFjdGl2ZSIsImFnZW50U3RhdHNFbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZUVsIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiaGVhZCIsImFwcGVuZENoaWxkIiwib25DbG9zZSIsIkNoYXRNb2RhbCIsIk1vZGFsIiwiY3VycmVudENvbnZlcnNhdGlvbklkIiwibWVzc2FnZXMiLCJjb250ZW50RWwiLCJ0b29sYmFyRWwiLCJjbGVhckNoYXQiLCJhZ2VudFNlbGVjdCIsImxvYWRBZ2VudHMiLCJjaGF0Q29udGFpbmVyIiwibWVzc2FnZXNFbCIsImlucHV0Q29udGFpbmVyIiwiaW5wdXRFbCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInNlbmRCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJzZW5kTWVzc2FnZSIsImZvY3VzIiwibG9hZENvbnZlcnNhdGlvbkhpc3RvcnkiLCJzZWxlY3RFbCIsIm5hbWUiLCJnZXRDb252ZXJzYXRpb25IaXN0b3J5IiwibGF0ZXN0Q29udmVyc2F0aW9uIiwiY29udmVyc2F0aW9uX2lkIiwicmVuZGVyTWVzc2FnZXMiLCJ0cmltIiwiZGlzYWJsZWQiLCJhZGRNZXNzYWdlIiwiYWN0aXZlRmlsZSIsImdldEFjdGl2ZUZpbGUiLCJ2YXVsdENvbnRleHQiLCJjb250ZW50IiwicmVhZCIsImNoYXQiLCJ1bmRlZmluZWQiLCJ2YXVsdF9jb250ZXh0IiwiYWdlbnRfaWQiLCJnZXRTZWxlY3RlZEFnZW50IiwiZXJyb3JNc2ciLCJxdWVyeVNlbGVjdG9yIiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJyZW5kZXJNZXNzYWdlIiwic2Nyb2xsVG9Cb3R0b20iLCJtZXNzYWdlRWwiLCJyZW5kZXJNYXJrZG93biIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlcGxhY2UiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJXb3JrZmxvd01vZGFsIiwiaXNFeGVjdXRpbmciLCJmb3JtRWwiLCJnb2FsQ29udGFpbmVyIiwiZ29hbElucHV0IiwiY29udGV4dENvbnRhaW5lciIsImNvbnRleHRJbnB1dCIsIm9wdGlvbnNDb250YWluZXIiLCJpbmNsdWRlQWN0aXZlRmlsZSIsImFjdGl2ZUZpbGVDaGVja2JveCIsImNyZWF0ZVNwYW4iLCJpbmNsdWRlQWxsRmlsZXMiLCJhbGxGaWxlc0NoZWNrYm94IiwiZXhlY3V0ZUJ1dHRvbiIsImV4ZWN1dGVXb3JrZmxvdyIsImNoZWNrZWQiLCJwcm9ncmVzc0NvbnRhaW5lciIsInN0eWxlIiwicmVzdWx0c0NvbnRhaW5lciIsImdvYWwiLCJ2YXVsdENvbnRlbnQiLCJmaWxlIiwic2xpY2UiLCJyZXF1ZXN0IiwiY29udGV4dCIsInZhdWx0X2NvbnRlbnQiLCJzZXR1cFByb2dyZXNzTGlzdGVuZXIiLCJkaXNwbGF5UmVzdWx0cyIsImRpc3BsYXlFcnJvciIsImRpc3BsYXlQcm9ncmVzcyIsInNldFRpbWVvdXQiLCJ3b3JrZmxvdyIsImV4ZWN1dGlvbl90aW1lIiwicmVzdWx0RWwiLCJyZXN1bHQiLCJzdGVwc190YWtlbiIsInN0ZXBzRWwiLCJzdGVwc0xpc3QiLCJzdGVwIiwiYXJ0aWZhY3RzIiwiYXJ0aWZhY3RzRWwiLCJhcnRpZmFjdCIsImluZGV4IiwiYXJ0aWZhY3RFbCIsInRpdGxlIiwic2F2ZUFydGlmYWN0QXNOb3RlIiwic2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSIsImZpbGVuYW1lIiwiY3JlYXRlIiwic3BsaXQiLCJFdm9BZ2VudFhDbGllbnQiLCJiYXNlVXJsIiwid3NDYWxsYmFja3MiLCJNYXAiLCJtYWtlUmVxdWVzdCIsImVuZHBvaW50XzEiLCJlbmRwb2ludCIsIm9wdGlvbnMiLCJ1cmwiLCJoZWFkZXJzIiwiT2JqZWN0IiwiYXNzaWduIiwiQWNjZXB0IiwiZmV0Y2giLCJtb2RlIiwiY3JlZGVudGlhbHMiLCJjb250ZW50VHlwZSIsImdldCIsImpzb24iLCJvayIsImVycm9yTWVzc2FnZSIsInN0YXR1c1RleHQiLCJsb2ciLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnZlcnNhdGlvbklkIiwicmVxdWVzdEJvZHkiLCJsaW1pdCIsImluY2x1ZGVfbWVzc2FnZXMiLCJkZWxldGVDb252ZXJzYXRpb24iLCJjcmVhdGVBZ2VudCIsImV4ZWN1dGVBZ2VudCIsImFuYWx5emVWYXVsdENvbnRleHQiLCJwbGFuVGFza3MiLCJwYXJzZUludGVsbGlnZW5jZSIsInVwZGF0ZU1lbW9yeSIsImNhbGxiYWNrcyIsIndzVXJsIiwid2Vic29ja2V0IiwiV2ViU29ja2V0Iiwib25vcGVuIiwib25Db25uZWN0IiwiY2FsbCIsIm9ubWVzc2FnZSIsImV2ZW50IiwicGFyc2UiLCJvbkNoYXQiLCJfYiIsIm9uV29ya2Zsb3dQcm9ncmVzcyIsIl9jIiwib25Db3BpbG90IiwiX2QiLCJvblZhdWx0U3luYyIsIl9lIiwib25FcnJvciIsIl9mIiwib25jbG9zZSIsImNvZGUiLCJyZWFzb24iLCJvbkRpc2Nvbm5lY3QiLCJvbmVycm9yIiwiY2xvc2UiLCJzZW5kV2ViU29ja2V0TWVzc2FnZSIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsIlZhdWx0UGlsb3RQbHVnaW4iLCJQbHVnaW4iLCJ3ZWJzb2NrZXRDb25uZWN0ZWQiLCJjb3BpbG90RW5hYmxlZCIsIm9ubG9hZCIsImxvYWRTZXR0aW5ncyIsInJlZ2lzdGVyVmlldyIsImFkZFJpYmJvbkljb24iLCJldnQiLCJhZGRDb21tYW5kIiwiY2FsbGJhY2siLCJlZGl0b3JDYWxsYmFjayIsInF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24iLCJwbGFuVGFza3NGcm9tTm90ZSIsImFjdGl2YXRlVmlldyIsInJlZ2lzdGVyRG9tRXZlbnQiLCJoYW5kbGVLZXlVcCIsImJpbmQiLCJhZGRTZXR0aW5nVGFiIiwib251bmxvYWQiLCJkZXRhY2hMZWF2ZXNPZlR5cGUiLCJoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbiIsIm9wZW4iLCJmaWxlQ29udGVudCIsImFuYWx5c2lzX3R5cGUiLCJhbmFseXNpc0NvbnRlbnQiLCJhbmFseXNpcyIsImluc2lnaHRzIiwiaW5zaWdodCIsInJlY29tbWVuZGF0aW9ucyIsInJlYyIsImN1cnNvciIsImdldEN1cnNvciIsInRleHRCZWZvcmVDdXJzb3IiLCJnZXRMaW5lIiwibGluZSIsInN1YnN0cmluZyIsImNoIiwiZnVsbFRleHQiLCJnZXRWYWx1ZSIsImN1cnNvcl9wb3NpdGlvbiIsInBvc1RvT2Zmc2V0IiwiZmlsZV90eXBlIiwicmVwbGFjZVJhbmdlIiwiY29tcGxldGlvbiIsInNlbGVjdGlvbiIsImdldFNlbGVjdGlvbiIsIm5ld0xpbmUiLCJ0aW1lZnJhbWUiLCJiYXNlbmFtZSIsInRhc2tDb250ZW50IiwicGxhbiIsImRlc2NyaXB0aW9uIiwiZXN0aW1hdGVkX2R1cmF0aW9uIiwidGFza3MiLCJ0YXNrIiwiY2hlY2tib3giLCJwcmlvcml0eSIsImVzdGltYXRlZF90aW1lIiwibWlsZXN0b25lcyIsIm1pbGVzdG9uZSIsInRhcmdldF9kYXRlIiwibGVhdmVzIiwiZ2V0TGVhdmVzT2ZUeXBlIiwicmlnaHRMZWFmIiwiZ2V0UmlnaHRMZWFmIiwic2V0Vmlld1N0YXRlIiwicmV2ZWFsTGVhZiIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiY2xlYXJUaW1lb3V0IiwiYXV0b0NvbXBsZXRlVGltZW91dCIsInRyaWdnZXJBdXRvQ29tcGxldGlvbiIsImN1cnJlbnRMaW5lIiwic3VnZ2VzdGlvbnMiLCJsb2FkRGF0YSIsInNhdmVEYXRhIl0sIm1hcHBpbmdzIjoiNFhBSU8sTUFBTUEsRUFBdUMsQ0FDbERDLFdBQVksd0JBQ1pDLE9BQVEsR0FDUkMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLG9CQUFvQixFQUNwQkMsYUFBYyxHQUNkQyxpQkFBa0IsSUFDbEJDLFdBQVcsR0FHUCxNQUFPQyxVQUE2QkMsRUFBQUEsaUJBR3hDLFdBQUFDLENBQVlDLEVBQVVDLEdBQ3BCQyxNQUFNRixFQUFLQyxHQUNYRSxLQUFLRixPQUFTQSxDQUNmLENBRUQsT0FBQUcsR0FDRSxNQUFNQyxZQUFFQSxHQUFnQkYsS0FDeEJFLEVBQVlDLFFBRVpELEVBQVlFLFNBQVMsS0FBTSxDQUFFQyxLQUFNLHdCQUNuQ0gsRUFBWUUsU0FBUyxJQUFLLENBQ3hCQyxLQUFNLG9FQUlSSCxFQUFZRSxTQUFTLEtBQU0sQ0FBRUMsS0FBTSxlQUVuQyxJQUFJQyxFQUFBQSxRQUFRSixHQUNUSyxRQUFRLGVBQ1JDLFFBQVEsbUNBQ1JDLFFBQVFKLEdBQ1BBLEVBQ0dLLGVBQWUseUJBQ2ZDLFNBQVNYLEtBQUtGLE9BQU9jLFNBQVMxQixZQUM5QjJCLFNBQWVDLEdBQVFDLEVBQUFmLFVBQUEsT0FBQSxFQUFBLFlBQ3RCQSxLQUFLRixPQUFPYyxTQUFTMUIsV0FBYTRCLFFBQzVCZCxLQUFLRixPQUFPa0IsY0FDbkIsS0FHUCxJQUFJVixFQUFBQSxRQUFRSixHQUNUSyxRQUFRLFdBQ1JDLFFBQVEsZ0VBQ1JDLFFBQVFKLEdBQ1BBLEVBQ0dLLGVBQWUsb0JBQ2ZDLFNBQVNYLEtBQUtGLE9BQU9jLFNBQVN6QixRQUFVLElBQ3hDMEIs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
