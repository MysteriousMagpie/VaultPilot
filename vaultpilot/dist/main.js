"use strict";var t=require("obsidian");function e(t,e,n,o){return new(n||(n=Promise))(function(i,s){function a(t){try{r(o.next(t))}catch(t){s(t)}}function l(t){try{r(o.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,l)}r((o=o.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1};class o extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"VaultPilot Settings"}),n.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),n.createEl("h3",{text:"Connection"}),new t.Setting(n).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),n.createEl("h3",{text:"Features"}),new t.Setting(n).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(n).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Agent Configuration"}),new t.Setting(n).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(t=>t.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Advanced"}),new t.Setting(n).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(t=>t.setValue(this.plugin.settings.showIntentDebug).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Information"});n.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let o=yield this.plugin.apiClient.healthCheck();if(!o.success&&(null===(e=o.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(o={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),o.success?new t.Notice("‚úÖ Connection successful!",3e3):new t.Notice(`‚ùå Connection failed: ${o.error}`,5e3)}catch(e){n.hide(),new t.Notice(`‚ùå Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const i="vaultpilot-view";class s extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return i}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ü§ñ VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),o=t.createEl("div",{cls:"vaultpilot-status-item"});o.createEl("span",{text:"WebSocket: "}),o.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"üü¢ Connected":"üî¥ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="üü¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="üî¥ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="üî¥ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"üí¨ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"‚öôÔ∏è Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"üîç Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"‚ú® Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"üîÑ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),o=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:o.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getAgents();if(t.success&&t.data){const e=t.data.length,n=t.data.filter(t=>t.active).length,o=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});o.createEl("h4",{text:"Available Agents"});o.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${n}/${e} active`})}}catch(t){}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}let a;function l(){return e(this,void 0,void 0,function*(){const t=a.workspace.getActiveFile();if(!t)return null;return(yield a.vault.read(t)).slice(0,8e3)})}class r extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ü§ñ VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"‚ö° Automatic mode detection enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const o=n.createEl("select",{cls:"vaultpilot-agent-select"});o.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(o),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();e.success&&e.data&&e.data.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})})}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const[n,o]=yield Promise.all([l(),this.plugin.apiClient.classifyIntent(e)]),i={message:e,context:n};let s;this.plugin.settings.showIntentDebug&&this.showIntentDebug(o.intent),"agent"===o.intent?(s=yield this.plugin.apiClient.runWorkflow(i),s.success&&s.data?this.addMessage("assistant",`‚öôÔ∏è Agent Mode (auto-detected)\n\n${s.data.result}`):this.addMessage("assistant",`Error in agent mode: ${s.error||"Failed to get response"}`)):(s=yield this.plugin.apiClient.sendChat(i,{conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent()}),s.success&&s.data?(this.currentConversationId=s.data.conversation_id,this.addMessage("assistant",s.data.response)):this.addMessage("assistant",`Error: ${s.error||"Failed to get response"}`)),(null==n?void 0:n.length)||new t.Notice("‚ö†Ô∏è No vault content was sent; replies may be generic."),s.success||new t.Notice(`Chat error: ${s.error}`)}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(t)}}showIntentDebug(t){const e=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"üîç Intent detected: "+("agent"===t?"‚öôÔ∏è Agent Mode":"üí¨ Ask Mode")});setTimeout(()=>{e.remove()},3e3)}onClose(){const{contentEl:t}=this;t.empty()}}class c extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"‚öôÔ∏è Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=o.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=i.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const s=n.createEl("div",{cls:"vaultpilot-form-group"});s.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const a=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=a.createEl("input",{type:"checkbox"});a.createSpan({text:"Include active file content"});const r=s.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,o){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(o){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const i={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const s=yield this.plugin.apiClient.executeWorkflow(i);if(!s.success||!s.data)throw new Error(s.error||"Workflow execution failed");yield this.displayResults(s.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"‚úÖ Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const o=e.createEl("div",{cls:"vaultpilot-artifact"});o.createEl("h5",{text:t.title}),o.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});o.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,o){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,o=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,o),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let o="# VaultPilot Workflow Results\n\n";o+=`**Goal:** ${this.goalInput.value}\n\n`,o+=`**Execution Time:** ${n.execution_time}s\n\n`,o+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(o+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{o+=`${e+1}. ${t}\n`}),o+="\n"),n.artifacts&&n.artifacts.length>0&&(o+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{o+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,o),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>‚ùå Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class d{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,o=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(o.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:o,mode:"cors",credentials:"omit"}));let i;const s=t.headers.get("content-type");if(i=s&&s.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof i&&i.error?i.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof i?{message:i}:i}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/api/obsidian/health`);const t=yield this.makeRequest("/api/obsidian/health",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/api/obsidian/health`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}runWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:t.message,context:t.context||void 0})})})}sendChat(t,n){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:t.message,vault_context:t.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}classifyIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5}})}explainIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t,include_debug:!0})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,o,i,s,a,l,r;try{const r=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",r.type),r.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,r.data);break;case"workflow_progress":null===(o=t.onWorkflowProgress)||void 0===o||o.call(t,r.data);break;case"copilot":null===(i=t.onCopilot)||void 0===i||i.call(t,r.data);break;case"vault_sync":null===(s=t.onVaultSync)||void 0===s||s.call(t,r.data);break;case"intent_debug":null===(a=t.onIntentDebug)||void 0===a||a.call(t,r.data);break;case"error":null===(l=t.onError)||void 0===l||l.call(t,r.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(r=t.onError)||void 0===r||r.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class u extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e,n;yield this.loadSettings(),n=this.app,a=n,this.apiClient=new d(this.settings.backendUrl,this.settings.apiKey);try{let n=yield this.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(new t.Notice("‚úÖ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",n.error),new t.Notice("‚ö†Ô∏è EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("‚ö†Ô∏è Cannot connect to EvoAgentX backend",5e3)}this.registerView(i,t=>new s(t,this));this.addRibbonIcon("bot","VaultPilot",t=>{this.openChatModal()}).addClass("vaultpilot-ribbon-class"),this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new o(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(i),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onIntentDebug:t=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new r(this.app,this).open()}openWorkflowModal(){new c(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let o="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);o+=`=== ${t.name} ===\n${e}\n\n`}const i=yield this.apiClient.analyzeVaultContext({content:o,analysis_type:"insights"});if(e.hide(),!i.success||!i.data)throw new Error(i.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let o=`# Vault Analysis - ${e}\n\n`;o+=`## Analysis\n\n${i.data.analysis}\n\n`,i.data.insights&&i.data.insights.length>0&&(o+="## Key Insights\n\n",i.data.insights.forEach(t=>{o+=`- ${t}\n`}),o+="\n"),i.data.recommendations&&i.data.recommendations.length>0&&(o+="## Recommendations\n\n",i.data.recommendations.forEach(t=>{o+=`- ${t}\n`})),yield this.app.vault.create(n,o),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),o=n.getLine(e.line).substring(0,e.ch),i=n.getValue();if(i&&0!==i.trim().length)try{const s=yield this.apiClient.getCopilotCompletion({text:i,cursor_position:n.posToOffset(e),file_type:"markdown",context:o});s.success&&s.data?(n.replaceRange(s.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${s.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const o=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(o.success&&o.data){const e=n.getCursor("to"),i=`\n\n**VaultPilot Analysis:**\n${o.data.response}\n\n`;n.replaceRange(i,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${o.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),o=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const i=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==o?void 0:o.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(i.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],i=`Task Plan - ${(null==o?void 0:o.basename)||"Untitled"} - ${e}.md`;let s=`# ${n.data.plan.title}\n\n`;s+=`${n.data.plan.description}\n\n`,s+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(s+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";s+=`${e} **${t.title}** (${t.priority} priority)\n`,s+=`   ${t.description}\n`,s+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(s+="## Milestones\n\n",n.data.milestones.forEach(t=>{s+=`- **${t.title}** (${t.target_date})\n`,s+=`  ${t.description}\n\n`})),yield this.app.vault.create(i,s),new t.Notice(`Task plan saved as ${i}`)}}catch(e){i.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){const n=this.app.workspace.getActiveFile();if(!n)return void new t.Notice("No active note‚Äîopen today's daily note first.");const o=new t.Notice("Planning your day...",0);try{const i=yield this.app.vault.read(n),{scheduleMarkdown:s,headline:a}=yield function(n){return e(this,void 0,void 0,function*(){const e=yield t.request({url:"http://localhost:3000/planday",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:n})});return JSON.parse(e)})}(i);if(!function(t){return t.trim().length>0}(s))throw new Error("Invalid schedule data received from API");const l=function(t,e){const n=function(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im;return t.match(e)||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}(t);if(n){const[o,i]=n,s=i+e;return t.replace(o,s)}return t+`\n\n## Schedule\n${e}`}(i,s);yield this.app.vault.modify(n,l),o.hide();const r=a?`${a} ‚úÖ`:"Schedule inserted ‚úÖ";new t.Notice(r)}catch(e){o.hide(),e instanceof Error?e.message.includes("JSON")?new t.Notice("Planner API error: Invalid response format"):e.message.includes("fetch")||e.message.includes("network")?new t.Notice("Planner API error: Unable to connect to localhost:3000"):new t.Notice(`Planner API error: ${e.message}`):new t.Notice("Planner API error: Unknown error occurred")}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(i);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:i,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(t)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(e){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(e.key))return!1;const n=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!n)return!1;const o=n.editor,i=o.getCursor(),s=o.getLine(i.line);if(i.ch!==s.length)return!1;const a=s.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(a)&&" "===e.key||"Enter"===e.key&&s.trim().length>10}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,o=n.getCursor(),i=n.getLine(o.line),s=n.getValue();if(i.trim().length<10||o.ch!==i.length)return;if(!s||0===s.trim().length)return;const a=Date.now();if(!(a-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=a;try{const e=yield this.apiClient.getCopilotCompletion({text:s,cursor_position:n.posToOffset(o),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Auto-suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},n,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){yield this.saveData(this.settings),this.apiClient=new d(this.settings.backendUrl,this.settings.apiKey),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=u;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvdmF1bHQtdXRpbHMudHMiLCIuLi9zcmMvY2hhdC1tb2RhbC50cyIsIi4uL3NyYy93b3JrZmxvdy1tb2RhbC50cyIsIi4uL3NyYy9hcGktY2xpZW50LnRzIiwiLi4vc3JjL21haW4udHMiLCIuLi9zcmMvcGxhbm5lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVmF1bHRQaWxvdFNldHRpbmdzID0ge1xuICBiYWNrZW5kVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJyxcbiAgYXBpS2V5OiAnJyxcbiAgZW5hYmxlV2ViU29ja2V0OiB0cnVlLFxuICBlbmFibGVDb3BpbG90OiB0cnVlLFxuICBlbmFibGVBdXRvQ29tcGxldGU6IGZhbHNlLCAvLyBEaXNhYmxlZCBieSBkZWZhdWx0IHRvIHByZXZlbnQgZnJlcXVlbnQgcmVxdWVzdHNcbiAgZGVmYXVsdEFnZW50OiAnJyxcbiAgZGVmYXVsdE1vZGU6ICdhc2snLFxuICBjaGF0SGlzdG9yeUxpbWl0OiAxMDAsXG4gIGRlYnVnTW9kZTogZmFsc2UsXG4gIHNob3dJbnRlbnREZWJ1ZzogZmFsc2Vcbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyBhbmQgbmV3IGxpbmVzICh3aXRoIDEwcyBjb29sZG93biknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQ2hhdCBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IG1vZGUgZm9yIG5ldyBjaGF0IHNlc3Npb25zOiBBc2sgZm9yIHNpbXBsZSBRJkEsIEFnZW50IGZvciBjb21wbGV4IHdvcmtmbG93cycpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdhc2snLCAnQXNrIE1vZGUgLSBTaW1wbGUgUSZBJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdhZ2VudCcsICdBZ2VudCBNb2RlIC0gQ29tcGxleCBXb3JrZmxvd3MnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1vZGUgPSB2YWx1ZSBhcyAnYXNrJyB8ICdhZ2VudCc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdTaG93IEludGVudCBEZWJ1ZyBPdmVybGF5JylcbiAgICAgIC5zZXREZXNjKCdEaXNwbGF5IGF1dG9tYXRpYyBpbnRlbnQgZGV0ZWN0aW9uIGluIGNoYXQgKEFzayB2cyBBZ2VudCBtb2RlKScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gSW5mb3JtYXRpb24gc2VjdGlvblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0luZm9ybWF0aW9uJyB9KTtcbiAgICBjb25zdCBpbmZvRWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nIH0pO1xuICAgIGluZm9FbC5pbm5lckhUTUwgPSBgXG4gICAgICA8cD48c3Ryb25nPlZhdWx0UGlsb3QgdjEuMC4wPC9zdHJvbmc+PC9wPlxuICAgICAgPHA+Q29tcHJlaGVuc2l2ZSBFdm9BZ2VudFggaW50ZWdyYXRpb24gZm9yIE9ic2lkaWFuPC9wPlxuICAgICAgPHA+RmVhdHVyZXM6IEFJIENoYXQsIENvcGlsb3QsIFdvcmtmbG93cywgVmF1bHQgQW5hbHlzaXMsIFRhc2sgUGxhbm5pbmc8L3A+XG4gICAgICA8cD5Gb3IgaGVscCBhbmQgZG9jdW1lbnRhdGlvbiwgdmlzaXQgdGhlIEdpdEh1YiByZXBvc2l0b3J5LjwvcD5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdUZXN0aW5nIGNvbm5lY3Rpb24uLi4nLCAwKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2ltcGxlSGVhbHRoQ2hlY2soKTtcbiAgICAgICAgaWYgKHNpbXBsZVJlc3BvbnNlLnN1Y2Nlc3MgJiYgc2ltcGxlUmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiBzaW1wbGVSZXNwb25zZS5kYXRhLnN0YXR1cywgdmVyc2lvbjogJ3Vua25vd24nIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KchSBDb25uZWN0aW9uIHN1Y2Nlc3NmdWwhJywgMzAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGDinYwgQ29ubmVjdGlvbiBmYWlsZWQ6ICR7cmVzcG9uc2UuZXJyb3J9YCwgNTAwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGDinYwgQ29ubmVjdGlvbiBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLCA1MDAwKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldywgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9WQVVMVFBJTE9UID0gJ3ZhdWx0cGlsb3Qtdmlldyc7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIHN0YXR1c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcXVpY2tBY3Rpb25zRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB2YXVsdFN0YXRzRWwhOiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9WQVVMVFBJTE9UO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ1ZhdWx0UGlsb3QnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYm90JztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygndmF1bHRwaWxvdC12aWV3Jyk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90JyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnWW91ciBBSSBhc3Npc3RhbnQgZm9yIE9ic2lkaWFuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3VidGl0bGUnXG4gICAgfSk7XG5cbiAgICAvLyBTdGF0dXMgc2VjdGlvblxuICAgIHRoaXMuc3RhdHVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG5cbiAgICAvLyBRdWljayBhY3Rpb25zXG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMnIH0pO1xuICAgIHRoaXMuY3JlYXRlUXVpY2tBY3Rpb25zKCk7XG5cbiAgICAvLyBWYXVsdCBzdGF0c1xuICAgIHRoaXMudmF1bHRTdGF0c0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdmF1bHQtc3RhdHMnIH0pO1xuICAgIHRoaXMudXBkYXRlVmF1bHRTdGF0cygpO1xuXG4gICAgLy8gUmVjZW50IGFjdGl2aXRpZXMgKHBsYWNlaG9sZGVyIGZvciBmdXR1cmUgaW1wbGVtZW50YXRpb24pXG4gICAgY29uc3QgYWN0aXZpdGllc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aXZpdGllcycgfSk7XG4gICAgYWN0aXZpdGllc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlY2VudCBBY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0FjdGl2aXR5IHRyYWNraW5nIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdGF0dXMoKSB7XG4gICAgdGhpcy5zdGF0dXNFbC5lbXB0eSgpO1xuICAgIHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29ubmVjdGlvbiBTdGF0dXMnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gQmFja2VuZCBzdGF0dXNcbiAgICBjb25zdCBiYWNrZW5kU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdCYWNrZW5kOiAnIH0pO1xuICAgIGNvbnN0IGJhY2tlbmRJbmRpY2F0b3IgPSBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiAnQ2hlY2tpbmcuLi4nXG4gICAgfSk7XG5cbiAgICAvLyBXZWJTb2NrZXQgc3RhdHVzXG4gICAgY29uc3Qgd3NTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdXZWJTb2NrZXQ6ICcgfSk7XG4gICAgY29uc3Qgd3NJbmRpY2F0b3IgPSB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogdGhpcy5wbHVnaW4uaXNXZWJTb2NrZXRDb25uZWN0ZWQoKSA/ICfwn5+iIENvbm5lY3RlZCcgOiAn8J+UtCBEaXNjb25uZWN0ZWQnXG4gICAgfSk7XG5cbiAgICAvLyBDaGVjayBiYWNrZW5kIHN0YXR1c1xuICAgIHRoaXMuY2hlY2tCYWNrZW5kU3RhdHVzKGJhY2tlbmRJbmRpY2F0b3IpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja0JhY2tlbmRTdGF0dXMoaW5kaWNhdG9yOiBIVE1MRWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/Cfn6IgQ29ubmVjdGVkJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IEVycm9yJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtZXJyb3InO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBPZmZsaW5lJztcbiAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVpY2tBY3Rpb25zKCkge1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuZW1wdHkoKTtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1aWNrIEFjdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgYWN0aW9uc0dyaWQgPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkJyB9KTtcblxuICAgIC8vIENoYXQgYWN0aW9uXG4gICAgY29uc3QgY2hhdEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+SrCBPcGVuIENoYXQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNoYXRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLm9wZW5DaGF0TW9kYWwoKTtcblxuICAgIC8vIFdvcmtmbG93IGFjdGlvblxuICAgIGNvbnN0IHdvcmtmbG93QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfimpnvuI8gRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgd29ya2Zsb3dCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLm9wZW5Xb3JrZmxvd01vZGFsKCk7XG5cbiAgICAvLyBBbmFseXplIHZhdWx0IGFjdGlvblxuICAgIGNvbnN0IGFuYWx5emVCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CflI0gQW5hbHl6ZSBWYXVsdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgYW5hbHl6ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4uYW5hbHl6ZVZhdWx0KCk7XG5cbiAgICAvLyBDb3BpbG90IGFjdGlvblxuICAgIGNvbnN0IGNvcGlsb3RCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+KcqCBHZXQgQ29tcGxldGlvbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY29waWxvdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICB0aGlzLnBsdWdpbi5nZXRDb3BpbG90Q29tcGxldGlvbihhY3RpdmVWaWV3LmVkaXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZWRpdG9yIGZvdW5kJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFJlZnJlc2ggYnV0dG9uXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2ggU3RhdHVzJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcmVmcmVzaC1idXR0b24nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcbiAgICAgIHRoaXMudXBkYXRlVmF1bHRTdGF0cygpO1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVZhdWx0U3RhdHMoKSB7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdWYXVsdCBTdGF0aXN0aWNzJyB9KTtcblxuICAgIGNvbnN0IHN0YXRzQ29udGFpbmVyID0gdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gR2V0IHZhdWx0IHN0YXRpc3RpY3NcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgY29uc3QgbWFya2Rvd25GaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBcbiAgICBjb25zdCBzdGF0cyA9IFtcbiAgICAgIHsgbGFiZWw6ICdUb3RhbCBGaWxlcycsIHZhbHVlOiBmaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ01hcmtkb3duIEZpbGVzJywgdmFsdWU6IG1hcmtkb3duRmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdGb2xkZXJzJywgdmFsdWU6IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpLmxlbmd0aC50b1N0cmluZygpIH1cbiAgICBdO1xuXG4gICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGNvbnN0IHN0YXRFbCA9IHN0YXRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC1pdGVtJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LnZhbHVlLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtdmFsdWUnIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQubGFiZWwsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC1sYWJlbCcgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBBZGQgYWdlbnQgaW5mbyBpZiBhdmFpbGFibGVcbiAgICB0aGlzLmxvYWRBZ2VudEluZm8oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50SW5mbygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGNvbnN0IGFnZW50Q291bnQgPSByZXNwb25zZS5kYXRhLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYWN0aXZlQWdlbnRzID0gcmVzcG9uc2UuZGF0YS5maWx0ZXIoKGFnZW50OiBhbnkpID0+IGFnZW50LmFjdGl2ZSkubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRTdGF0c0VsID0gdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zdGF0cycgfSk7XG4gICAgICAgIGFnZW50U3RhdHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBdmFpbGFibGUgQWdlbnRzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50SW5mbyA9IGFnZW50U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWluZm8nIH0pO1xuICAgICAgICBhZ2VudEluZm8uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAke2FjdGl2ZUFnZW50c30vJHthZ2VudENvdW50fSBhY3RpdmVgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBmYWlsIGlmIGFnZW50cyBjYW4ndCBiZSBsb2FkZWRcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXZpZXctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXZpZXctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXZpZXcge1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN1YnRpdGxlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyBoMyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1lcnJvcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgMWZyKTtcbiAgICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1pdGVtIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LXZhbHVlIHtcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMgaDQge1xuICAgICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1pbmZvIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBHbG9iYWwgYXBwIGluc3RhbmNlIC0gd2lsbCBiZSBzZXQgYnkgdGhlIG1haW4gcGx1Z2luXG5leHBvcnQgbGV0IGFwcDogQXBwO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXBwKGFwcEluc3RhbmNlOiBBcHApIHtcbiAgYXBwID0gYXBwSW5zdGFuY2U7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29udGVudCBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBtYXJrZG93biBmaWxlXG4gKiBAcmV0dXJucyBUaGUgbWFya2Rvd24gY29udGVudCAodHJ1bmNhdGVkIHRvIDgwMDAgY2hhcnMpIG9yIG51bGwgaWYgbm8gZmlsZSBpcyBhY3RpdmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZU1hcmtkb3duKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gIGlmICghZmlsZSkgcmV0dXJuIG51bGw7XG4gIFxuICAvLyBMYXJnZSBub3Rlcz8gU25pcCB0byA4MDAwIGNoYXJzIHRvIGtlZXAgdG9rZW5zIHJlYXNvbmFibGVcbiAgY29uc3QgdGV4dCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICByZXR1cm4gdGV4dC5zbGljZSgwLCA4XzAwMCk7XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSwgSW50ZW50IH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmVNYXJrZG93biB9IGZyb20gJy4vdmF1bHQtdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY2hhdENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbWVzc2FnZXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0RWwhOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHNlbmRCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNoYXQtbW9kYWwnKTtcblxuICAgIC8vIE1vZGFsIGhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCBDaGF0JyB9KTtcbiAgICBcbiAgICBjb25zdCB0b29sYmFyRWwgPSBoZWFkZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdG9vbGJhcicgfSk7XG4gICAgXG4gICAgLy8gQWRkIGluZm8gYWJvdXQgYXV0b21hdGljIG1vZGUgZGV0ZWN0aW9uXG4gICAgY29uc3QgYXV0b01vZGVJbmZvID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbycsXG4gICAgICB0ZXh0OiAn4pqhIEF1dG9tYXRpYyBtb2RlIGRldGVjdGlvbiBlbmFibGVkJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFyIGNoYXQgYnV0dG9uXG4gICAgY29uc3QgY2xlYXJCdG4gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsZWFyQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsZWFyQ2hhdCgpO1xuXG4gICAgLy8gQWdlbnQgc2VsZWN0b3IgKHdpbGwgYmUgcG9wdWxhdGVkIHdoZW4gYWdlbnRzIGFyZSBsb2FkZWQpXG4gICAgY29uc3QgYWdlbnRTZWxlY3QgPSB0b29sYmFyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnIH0pO1xuICAgIGFnZW50U2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdBdXRvLXNlbGVjdCBBZ2VudCcsIHZhbHVlOiAnJyB9KTtcbiAgICB0aGlzLmxvYWRBZ2VudHMoYWdlbnRTZWxlY3QpO1xuXG4gICAgLy8gQ2hhdCBjb250YWluZXJcbiAgICB0aGlzLmNoYXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gTWVzc2FnZXMgYXJlYVxuICAgIHRoaXMubWVzc2FnZXNFbCA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMnIH0pO1xuICAgIFxuICAgIC8vIElucHV0IGNvbnRhaW5lclxuICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgdGhpcy5pbnB1dEVsID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FzayBhIHF1ZXN0aW9uIG9yIGRlc2NyaWJlIHdoYXQgeW91IHdhbnQgdG8gYWNjb21wbGlzaC4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3Qtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKTtcblxuICAgIC8vIEZvY3VzIHRoZSBpbnB1dFxuICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuXG4gICAgLy8gTG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIHRoaXMubG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKTtcblxuICAgIC8vIEFkZCBzdHlsZXNcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRzKHNlbGVjdEVsOiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGFnZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICAgICAgdGV4dDogYWdlbnQubmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiBhZ2VudC5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCkge1xuICAgIC8vIE9ubHkgdHJ5IHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3RvcnkgaWYgd2UgaGF2ZSBhIGNvbnZlcnNhdGlvbiBJRFxuICAgIGlmICh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcztcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgbm8gY29udmVyc2F0aW9uIElELCBzdGFydCBmcmVzaCAobm8gaGlzdG9yeSB0byBsb2FkKVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZSgpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybjtcblxuICAgIC8vIERpc2FibGUgaW5wdXQgd2hpbGUgcHJvY2Vzc2luZ1xuICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZGluZy4uLic7XG5cbiAgICAvLyBBZGQgdXNlciBtZXNzYWdlIHRvIFVJXG4gICAgdGhpcy5hZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZSk7XG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG5cbiAgICB0cnkge1xuICAgICAgLy8g4pSA4pSAIGZldGNoIGNvbnRleHQgJiBpbnRlbnQgaW4gcGFyYWxsZWwg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICBjb25zdCBbY29udGV4dCwgaW50ZW50UmVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0QWN0aXZlTWFya2Rvd24oKSwgICAgICAgICAgLy8gcmV0dXJucyBzdHJpbmcgfCBudWxsXG4gICAgICAgIHRoaXMucGx1Z2luLmFwaUNsaWVudC5jbGFzc2lmeUludGVudChtZXNzYWdlKSAgLy8gUE9TVCAvaW50ZWxsaWdlbmNlL3BhcnNlXG4gICAgICBdKTtcblxuICAgICAgLy8gYnVpbGQgYSBnZW5lcmljIHBheWxvYWQ7IGNvbnRleHQgbWF5IGJlIG51bGwvZW1wdHlcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IG1lc3NhZ2UsIGNvbnRleHQgfTtcblxuICAgICAgLy8gU2hvdyBpbnRlbnQgZGV0ZWN0aW9uIGluIFVJIGlmIGRlYnVnIG1vZGUgaXMgZW5hYmxlZFxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1Zykge1xuICAgICAgICB0aGlzLnNob3dJbnRlbnREZWJ1ZyhpbnRlbnRSZXMuaW50ZW50KTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgXG4gICAgICBpZiAoaW50ZW50UmVzLmludGVudCA9PT0gXCJhZ2VudFwiKSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJ1bldvcmtmbG93KHBheWxvYWQpOyAgICAgLy8gUE9TVCAvd29ya2Zsb3dcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGDimpnvuI8gQWdlbnQgTW9kZSAoYXV0by1kZXRlY3RlZClcXG5cXG4ke3Jlc3BvbnNlLmRhdGEucmVzdWx0fWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yIGluIGFnZW50IG1vZGU6ICR7cmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UnfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZW5kQ2hhdChwYXlsb2FkLCB7XG4gICAgICAgICAgY29udmVyc2F0aW9uX2lkOiB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgYWdlbnRfaWQ6IHRoaXMuZ2V0U2VsZWN0ZWRBZ2VudCgpXG4gICAgICAgIH0pOyAgICAgICAgLy8gUE9TVCAvY2hhdFxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gcmVzcG9uc2UuZGF0YS5jb252ZXJzYXRpb25faWQ7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2FybiB1c2VyIGlmIHRoZXkgaGFkIGNvbnRleHQgZGlzYWJsZWRcbiAgICAgIGlmICghY29udGV4dD8ubGVuZ3RoKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCLimqDvuI8gTm8gdmF1bHQgY29udGVudCB3YXMgc2VudDsgcmVwbGllcyBtYXkgYmUgZ2VuZXJpYy5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBSZS1lbmFibGUgaW5wdXRcbiAgICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZCc7XG4gICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFNlbGVjdGVkQWdlbnQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBzZWxlY3RFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LWFnZW50LXNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHJldHVybiBzZWxlY3RFbD8udmFsdWUgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRNZXNzYWdlKHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIHRoaXMubWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6IGB2YXVsdHBpbG90LW1lc3NhZ2UgdmF1bHRwaWxvdC1tZXNzYWdlLSR7bWVzc2FnZS5yb2xlfWBcbiAgICB9KTtcblxuICAgIGNvbnN0IHJvbGVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUnLFxuICAgICAgdGV4dDogbWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAnWW91JyA6ICdWYXVsdFBpbG90J1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCdcbiAgICB9KTtcblxuICAgIC8vIFNpbXBsZSBtYXJrZG93biByZW5kZXJpbmcgZm9yIGJhc2ljIGZvcm1hdHRpbmdcbiAgICBjb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bihtZXNzYWdlLmNvbnRlbnQpO1xuXG4gICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wKSB7XG4gICAgICBjb25zdCB0aW1lRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUnLFxuICAgICAgICB0ZXh0OiBuZXcgRGF0ZShtZXNzYWdlLnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckNoYXQoKSB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuZW1wdHkoKTtcbiAgICBuZXcgTm90aWNlKCdDaGF0IGNsZWFyZWQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDYwMHB4O1xuICAgICAgICAgIGhlaWdodDogNzAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1oZWFkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdG9vbGJhciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXV0by1tb2RlLWluZm8ge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXNlbGVjdCB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gODBweCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcyB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdXNlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1hc3Npc3RhbnQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Utcm9sZSB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS40O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS10aW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zZW5kLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWludGVudC1kZWJ1ZyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlci1ob3Zlcik7XG4gICAgICAgICAgYW5pbWF0aW9uOiBmYWRlSW5PdXQgM3MgZWFzZS1pbi1vdXQ7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW5PdXQge1xuICAgICAgICAgIDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfVxuICAgICAgICAgIDEwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxuICAgICAgICAgIDkwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxuICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0ludGVudERlYnVnKGludGVudDogc3RyaW5nKSB7XG4gICAgLy8gQ3JlYXRlIGEgc3VidGxlIG5vdGlmaWNhdGlvbiBzaG93aW5nIHRoZSBkZXRlY3RlZCBpbnRlbnRcbiAgICBjb25zdCBkZWJ1Z0VsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWludGVudC1kZWJ1ZycsXG4gICAgICB0ZXh0OiBg8J+UjSBJbnRlbnQgZGV0ZWN0ZWQ6ICR7aW50ZW50ID09PSAnYWdlbnQnID8gJ+Kame+4jyBBZ2VudCBNb2RlJyA6ICfwn5KsIEFzayBNb2RlJ31gXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQXV0by1yZW1vdmUgYWZ0ZXIgMyBzZWNvbmRzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWJ1Z0VsLnJlbW92ZSgpO1xuICAgIH0sIDMwMDApO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFdvcmtmbG93UmVxdWVzdCwgV29ya2Zsb3dSZXNwb25zZSwgV29ya2Zsb3dQcm9ncmVzcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV29ya2Zsb3dNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGdvYWxJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgY29udGV4dElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBleGVjdXRlQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgcHJvZ3Jlc3NDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSByZXN1bHRzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaXNFeGVjdXRpbmcgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfimpnvuI8gV29ya2Zsb3cgRXhlY3V0aW9uJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnRGVmaW5lIGEgZ29hbCBhbmQgbGV0IFZhdWx0UGlsb3QgY3JlYXRlIGFuZCBleGVjdXRlIGEgY29tcHJlaGVuc2l2ZSB3b3JrZmxvdyB0byBhY2hpZXZlIGl0LicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRm9ybVxuICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWZvcm0nIH0pO1xuXG4gICAgLy8gR29hbCBpbnB1dFxuICAgIGNvbnN0IGdvYWxDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnR29hbCAqJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmdvYWxJbnB1dCA9IGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdlLmcuLCBcIkNyZWF0ZSBhIGNvbXByZWhlbnNpdmUgc3R1ZHkgcGxhbiBmb3IgbWFjaGluZSBsZWFybmluZyBiYXNlZCBvbiBteSBub3Rlc1wiJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZ29hbC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIENvbnRleHQgaW5wdXRcbiAgICBjb25zdCBjb250ZXh0Q29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0FkZGl0aW9uYWwgQ29udGV4dCAob3B0aW9uYWwpJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHRJbnB1dCA9IGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdQcm92aWRlIGFueSBhZGRpdGlvbmFsIGNvbnRleHQsIGNvbnN0cmFpbnRzLCBvciByZXF1aXJlbWVudHMuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jb250ZXh0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gVmF1bHQgY29udGVudCBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdWYXVsdCBJbnRlZ3JhdGlvbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWN0aXZlRmlsZSA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhY3RpdmVGaWxlQ2hlY2tib3ggPSBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFjdGl2ZSBmaWxlIGNvbnRlbnQnIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFsbEZpbGVzID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFsbEZpbGVzQ2hlY2tib3ggPSBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWxsIHZhdWx0IGZpbGVzIChtYXkgdGFrZSBsb25nZXIpJyB9KTtcblxuICAgIC8vIEV4ZWN1dGUgYnV0dG9uXG4gICAgdGhpcy5leGVjdXRlQnV0dG9uID0gZm9ybUVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24nXG4gICAgfSk7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmV4ZWN1dGVXb3JrZmxvdyhhY3RpdmVGaWxlQ2hlY2tib3guY2hlY2tlZCwgYWxsRmlsZXNDaGVja2JveC5jaGVja2VkKTtcblxuICAgIC8vIFByb2dyZXNzIGNvbnRhaW5lclxuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBSZXN1bHRzIGNvbnRhaW5lclxuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBGb2N1cyB0aGUgZ29hbCBpbnB1dFxuICAgIHRoaXMuZ29hbElucHV0LmZvY3VzKCk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlV29ya2Zsb3coaW5jbHVkZUFjdGl2ZUZpbGU6IGJvb2xlYW4sIGluY2x1ZGVBbGxGaWxlczogYm9vbGVhbikge1xuICAgIGNvbnN0IGdvYWwgPSB0aGlzLmdvYWxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFnb2FsKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSBnb2FsIGZvciB0aGUgd29ya2Zsb3cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzRXhlY3V0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRpbmcuLi4nO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJlcGFyZSB2YXVsdCBjb250ZW50XG4gICAgICBsZXQgdmF1bHRDb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIGlmIChpbmNsdWRlQWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2FjdGl2ZUZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGluY2x1ZGVBbGxGaWxlcykge1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDIwKSkgeyAvLyBMaW1pdCB0byBmaXJzdCAyMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgd29ya2Zsb3cgcmVxdWVzdFxuICAgICAgY29uc3QgcmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0ID0ge1xuICAgICAgICBnb2FsLFxuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHRJbnB1dC52YWx1ZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuICAgICAgICB2YXVsdF9jb250ZW50OiB2YXVsdENvbnRlbnQgfHwgdW5kZWZpbmVkXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBXZWJTb2NrZXQgbGlzdGVuZXIgZm9yIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpKSB7XG4gICAgICAgIC8vIExpc3RlbiBmb3Igd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICB0aGlzLnNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudCEuZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3QpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGlzcGxheVJlc3VsdHMocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1dvcmtmbG93IGV4ZWN1dGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3cgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcihlcnJvck1zZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNFeGVjdXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGUgV29ya2Zsb3cnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY29ubmVjdGVkIHRvIHRoZSBXZWJTb2NrZXQgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgIC8vIEZvciBub3csIHdlJ2xsIHNpbXVsYXRlIHByb2dyZXNzXG4gICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0FuYWx5emluZyBnb2FsIGFuZCBjb250ZXh0Li4uJyk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnUGxhbm5pbmcgd29ya2Zsb3cgc3RlcHMuLi4nKTtcbiAgICB9LCAxMDAwKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdFeGVjdXRpbmcgd29ya2Zsb3cuLi4nKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheVByb2dyZXNzKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyXCI+PC9kaXY+XG4gICAgICAgIDxzcGFuPiR7bWVzc2FnZX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkaXNwbGF5UmVzdWx0cyh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyByZXN1bHRzXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfinIUgV29ya2Zsb3cgQ29tcGxldGVkJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRXhlY3V0aW9uIHRpbWU6ICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c2AsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gTWFpbiByZXN1bHRcbiAgICBjb25zdCByZXN1bHRFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC1jb250ZW50JyB9KTtcbiAgICByZXN1bHRFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdSZXN1bHQnIH0pO1xuICAgIGNvbnN0IHJlc3VsdENvbnRlbnRFbCA9IHJlc3VsdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LXRleHQnIH0pO1xuICAgIHJlc3VsdENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKHdvcmtmbG93LnJlc3VsdCk7XG5cbiAgICAvLyBTdGVwcyB0YWtlblxuICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdGVwc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyJyB9KTtcbiAgICAgIHN0ZXBzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3RlcHMgVGFrZW4nIH0pO1xuICAgICAgY29uc3Qgc3RlcHNMaXN0ID0gc3RlcHNFbC5jcmVhdGVFbCgnb2wnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtbGlzdCcgfSk7XG4gICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKHN0ZXAgPT4ge1xuICAgICAgICBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBzdGVwIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQXJ0aWZhY3RzXG4gICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYXJ0aWZhY3RzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyJyB9KTtcbiAgICAgIGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0dlbmVyYXRlZCBBcnRpZmFjdHMnIH0pO1xuICAgICAgXG4gICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaCgoYXJ0aWZhY3QsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGFydGlmYWN0RWwgPSBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0JyB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6IGFydGlmYWN0LnRpdGxlIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICB0ZXh0OiBgVHlwZTogJHthcnRpZmFjdC50eXBlfWAsXG4gICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1NhdmUgYXMgTm90ZScsXG4gICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0LCBpbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGFsbCBidXR0b25cbiAgICBjb25zdCBhY3Rpb25zRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMnIH0pO1xuICAgIGNvbnN0IHNhdmVBbGxCdXR0b24gPSBhY3Rpb25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlIENvbXBsZXRlIFJlc3VsdHMgYXMgTm90ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVBbGxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdDogYW55LCBpbmRleDogbnVtYmVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7YXJ0aWZhY3QudGl0bGUucmVwbGFjZSgvW15hLXpBLVowLTlcXHNdL2csICcnKX0ubWRgO1xuICAgICAgY29uc3QgY29udGVudCA9IGAjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fWA7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBBcnRpZmFjdCBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSBhcnRpZmFjdDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgIFxuICAgICAgbGV0IGNvbnRlbnQgPSBgIyBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipHb2FsOioqICR7dGhpcy5nb2FsSW5wdXQudmFsdWV9XFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqRXhlY3V0aW9uIFRpbWU6KiogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCMjIFJlc3VsdFxcblxcbiR7d29ya2Zsb3cucmVzdWx0fVxcblxcbmA7XG4gICAgICBcbiAgICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIFN0ZXBzIFRha2VuXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAke2luZGV4ICsgMX0uICR7c3RlcH1cXG5gO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGVudCArPSAnXFxuJztcbiAgICAgIH1cblxuICAgICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBHZW5lcmF0ZWQgQXJ0aWZhY3RzXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goYXJ0aWZhY3QgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1cXG5cXG5gO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYENvbXBsZXRlIHJlc3VsdHMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgcmVzdWx0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1lcnJvclwiPlxuICAgICAgICA8aDM+4p2MIFdvcmtmbG93IEZhaWxlZDwvaDM+XG4gICAgICAgIDxwPiR7bWVzc2FnZX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDcwMHB4O1xuICAgICAgICAgIG1heC1oZWlnaHQ6IDgwdmg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWdyb3VwIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZ29hbC1pbnB1dCxcbiAgICAgICAgLnZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwgaW5wdXQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyIHtcbiAgICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtdGV4dCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcixcbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1saXN0IHtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3Qge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0LXR5cGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1lcnJvciB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgXG4gIEFQSVJlc3BvbnNlLCBcbiAgQ2hhdFJlcXVlc3QsIFxuICBDaGF0UmVzcG9uc2UsIFxuICBDb252ZXJzYXRpb25IaXN0b3J5LFxuICBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCxcbiAgQ29waWxvdFJlcXVlc3QsIFxuICBDb3BpbG90UmVzcG9uc2UsXG4gIFdvcmtmbG93UmVxdWVzdCxcbiAgV29ya2Zsb3dSZXNwb25zZSxcbiAgQWdlbnQsXG4gIEFnZW50Q3JlYXRlUmVxdWVzdCxcbiAgQWdlbnRFeGVjdXRlUmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVzcG9uc2UsXG4gIFRhc2tQbGFubmluZ1JlcXVlc3QsXG4gIFRhc2tQbGFubmluZ1Jlc3BvbnNlLFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2UsXG4gIE1lbW9yeVVwZGF0ZVJlcXVlc3QsXG4gIFdlYlNvY2tldE1lc3NhZ2UsXG4gIEVycm9yUmVzcG9uc2UsXG4gIEludGVudCxcbiAgSW50ZW50UmVzdWx0LFxuICBJbnRlbnREZWJ1Z1xufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEV2b0FnZW50WENsaWVudCB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ/OiBXZWJTb2NrZXQ7XG4gIHByaXZhdGUgd3NDYWxsYmFja3M6IE1hcDxzdHJpbmcsIChkYXRhOiBhbnkpID0+IHZvaWQ+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmw6IHN0cmluZywgYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3Q8VD4oXG4gICAgZW5kcG9pbnQ6IHN0cmluZywgXG4gICAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fVxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlPFQ+PiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZW5kcG9pbnR9YDtcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfHwge30pLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5hcGlLZXkpIHtcbiAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gSGFuZGxlIG5vbi1KU09OIHJlc3BvbnNlcyBncmFjZWZ1bGx5XG4gICAgICBsZXQgZGF0YTtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuZXJyb3IgXG4gICAgICAgICAgPyBkYXRhLmVycm9yIFxuICAgICAgICAgIDogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFQSSBFcnJvciBbJHtyZXNwb25zZS5zdGF0dXN9XTpgLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyA/IHsgbWVzc2FnZTogZGF0YSB9IGFzIFQgOiBkYXRhLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQVBJIFJlcXVlc3QgRXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSGVhbHRoIGNoZWNrXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+PiB7XG4gICAgY29uc29sZS5sb2coYFZhdWx0UGlsb3Q6IEF0dGVtcHRpbmcgaGVhbHRoIGNoZWNrIHRvICR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vaGVhbHRoYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4oJy9hcGkvb2JzaWRpYW4vaGVhbHRoJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogSGVhbHRoIGNoZWNrIHJlc3VsdDonLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBBbHRlcm5hdGl2ZSBoZWFsdGggY2hlY2sgbWV0aG9kIGlmIHRoZSBtYWluIG9uZSBmYWlsc1xuICBhc3luYyBzaW1wbGVIZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vaGVhbHRoYDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ0hFQUQnLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA1KSB7IC8vIDQwNSBtZWFucyBzZXJ2ZXIgaXMgdXAgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBIRUFEXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ29rJyB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYFNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdDb25uZWN0aW9uIGZhaWxlZCdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hhdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGNoYXQocmVxdWVzdDogQ2hhdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENoYXRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jaGF0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbnZlcnNhdGlvbkhpc3RvcnkoY29udmVyc2F0aW9uSWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUwKTogUHJvbWlzZTxBUElSZXNwb25zZTxDb252ZXJzYXRpb25IaXN0b3J5Pj4ge1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCA9IHtcbiAgICAgIGNvbnZlcnNhdGlvbl9pZDogY29udmVyc2F0aW9uSWQsXG4gICAgICBsaW1pdDogbGltaXQsXG4gICAgICBpbmNsdWRlX21lc3NhZ2VzOiB0cnVlXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb24vaGlzdG9yeScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHZvaWQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYC9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSk7XG4gIH1cblxuICAvLyBDb3BpbG90IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgZ2V0Q29waWxvdENvbXBsZXRpb24ocmVxdWVzdDogQ29waWxvdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvcGlsb3RSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jb3BpbG90L2NvbXBsZXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdvcmtmbG93IGV4ZWN1dGlvblxuICBhc3luYyBleGVjdXRlV29ya2Zsb3cocmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxXb3JrZmxvd1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3dvcmtmbG93Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE5ldyB1bmlmaWVkIEFQSSBtZXRob2RzIGZvciBzaW1wbGlmaWVkIGNvbnRleHQgcGFja2FnaW5nXG4gIGFzeW5jIHJ1bldvcmtmbG93KHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmcgfCBudWxsIH0pOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZ29hbDogcGF5bG9hZC5tZXNzYWdlLFxuICAgICAgICBjb250ZXh0OiBwYXlsb2FkLmNvbnRleHQgfHwgdW5kZWZpbmVkXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbmRDaGF0KHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmcgfCBudWxsIH0sIG9wdGlvbnM/OiB7IGNvbnZlcnNhdGlvbl9pZD86IHN0cmluZzsgYWdlbnRfaWQ/OiBzdHJpbmcgfSk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbWVzc2FnZTogcGF5bG9hZC5tZXNzYWdlLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBwYXlsb2FkLmNvbnRleHQgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjb252ZXJzYXRpb25faWQ6IG9wdGlvbnM/LmNvbnZlcnNhdGlvbl9pZCxcbiAgICAgICAgYWdlbnRfaWQ6IG9wdGlvbnM/LmFnZW50X2lkLFxuICAgICAgICBtb2RlOiAnYXNrJ1xuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gIGFzeW5jIGdldEFnZW50cygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50W10+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVBZ2VudChyZXF1ZXN0OiBBZ2VudENyZWF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cy9jcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUFnZW50KHJlcXVlc3Q6IEFnZW50RXhlY3V0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudC9leGVjdXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhdWx0IGFuYWx5c2lzXG4gIGFzeW5jIGFuYWx5emVWYXVsdENvbnRleHQocmVxdWVzdDogVmF1bHRDb250ZXh0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VmF1bHRDb250ZXh0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvY29udGV4dCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBUYXNrIHBsYW5uaW5nXG4gIGFzeW5jIHBsYW5UYXNrcyhyZXF1ZXN0OiBUYXNrUGxhbm5pbmdSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxUYXNrUGxhbm5pbmdSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9wbGFubmluZy90YXNrcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbGxpZ2VuY2UgcGFyc2luZ1xuICBhc3luYyBwYXJzZUludGVsbGlnZW5jZShyZXF1ZXN0OiBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEludGVudCBjbGFzc2lmaWNhdGlvblxuICBhc3luYyBjbGFzc2lmeUludGVudChtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPEludGVudFJlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnRSZXN1bHQ+KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pLFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byAnYXNrJyBtb2RlIGlmIGNsYXNzaWZpY2F0aW9uIGZhaWxzXG4gICAgcmV0dXJuIHsgaW50ZW50OiAnYXNrJywgY29uZmlkZW5jZTogMC41IH07XG4gIH1cblxuICAvLyBPcHRpb25hbDogRGVidWcgaW50ZW50IGNsYXNzaWZpY2F0aW9uXG4gIGFzeW5jIGV4cGxhaW5JbnRlbnQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxJbnRlbnREZWJ1Zz4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnREZWJ1Zz4oJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UsIGluY2x1ZGVfZGVidWc6IHRydWUgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIGRlYnVnIGluZm9cbiAgICByZXR1cm4geyBcbiAgICAgIGludGVudDogJ2FzaycsIFxuICAgICAgY29uZmlkZW5jZTogMC41LCBcbiAgICAgIHJlYXNvbmluZzogJ0NsYXNzaWZpY2F0aW9uIGZhaWxlZCwgZGVmYXVsdGluZyB0byBhc2sgbW9kZScgXG4gICAgfTtcbiAgfVxuXG4gIC8vIE1lbW9yeSBtYW5hZ2VtZW50XG4gIGFzeW5jIHVwZGF0ZU1lbW9yeShyZXF1ZXN0OiBNZW1vcnlVcGRhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL21lbW9yeS91cGRhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IGZ1bmN0aW9uYWxpdHlcbiAgY29ubmVjdFdlYlNvY2tldChjYWxsYmFja3M6IHtcbiAgICBvbkNoYXQ/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uV29ya2Zsb3dQcm9ncmVzcz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Db3BpbG90PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvblZhdWx0U3luYz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25JbnRlbnREZWJ1Zz86IChkZWJ1ZzogSW50ZW50RGVidWcpID0+IHZvaWQ7XG4gICAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIG9uQ29ubmVjdD86ICgpID0+IHZvaWQ7XG4gICAgb25EaXNjb25uZWN0PzogKCkgPT4gdm9pZDtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHdzVXJsID0gdGhpcy5iYXNlVXJsLnJlcGxhY2UoJ2h0dHAnLCAnd3MnKSArICcvd3Mvb2JzaWRpYW4nO1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvICR7d3NVcmx9YCk7XG4gICAgXG4gICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcpO1xuICAgICAgY2FsbGJhY2tzLm9uQ29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNoYXQ/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd29ya2Zsb3dfcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV29ya2Zsb3dQcm9ncmVzcz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3BpbG90JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNvcGlsb3Q/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndmF1bHRfc3luYyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25WYXVsdFN5bmM/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaW50ZW50X2RlYnVnJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkludGVudERlYnVnPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignRmFpbGVkIHRvIHBhcnNlIFdlYlNvY2tldCBtZXNzYWdlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZyb20gRXZvQWdlbnRYJywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgIGNhbGxiYWNrcy5vbkRpc2Nvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3InKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQpIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LmNsb3NlKCk7XG4gICAgICB0aGlzLndlYnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZW5kV2ViU29ja2V0TWVzc2FnZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCAmJiB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGUsIGRhdGEgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU47XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldywgVEZpbGUsIEVkaXRvclBvc2l0aW9uLCByZXF1ZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9ULCBWYXVsdFBpbG90VmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBDaGF0TW9kYWwgfSBmcm9tICcuL2NoYXQtbW9kYWwnO1xuaW1wb3J0IHsgV29ya2Zsb3dNb2RhbCB9IGZyb20gJy4vd29ya2Zsb3ctbW9kYWwnO1xuaW1wb3J0IHsgRXZvQWdlbnRYQ2xpZW50IH0gZnJvbSAnLi9hcGktY2xpZW50JztcbmltcG9ydCB7IFZhdWx0UGlsb3RTZXR0aW5ncywgQ29waWxvdFJlc3BvbnNlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmZXRjaFNjaGVkdWxlLCBpbmplY3RTY2hlZHVsZSwgdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIH0gZnJvbSAnLi9wbGFubmVyJztcbmltcG9ydCB7IHNldEFwcCB9IGZyb20gJy4vdmF1bHQtdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYXVsdFBpbG90UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3MhOiBWYXVsdFBpbG90U2V0dGluZ3M7XG4gIGFwaUNsaWVudCE6IEV2b0FnZW50WENsaWVudDtcbiAgcHJpdmF0ZSB3ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBjb3BpbG90RW5hYmxlZCA9IGZhbHNlO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhcHAgaW5zdGFuY2UgZm9yIHZhdWx0LXV0aWxzXG4gICAgc2V0QXBwKHRoaXMuYXBwKTtcblxuICAgIC8vIEluaXRpYWxpemUgQVBJIGNsaWVudFxuICAgIHRoaXMuYXBpQ2xpZW50ID0gbmV3IEV2b0FnZW50WENsaWVudCh0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsIHRoaXMuc2V0dGluZ3MuYXBpS2V5KTtcblxuICAgIC8vIFRlc3QgYmFja2VuZCBjb25uZWN0aW9uXG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBtYWluIGhlYWx0aCBjaGVjayBmYWlscyB3aXRoIGEgNDAwLCB0cnkgdGhlIHNpbXBsZSBjaGVja1xuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmVycm9yPy5pbmNsdWRlcygnNDAwJykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNYWluIGhlYWx0aCBjaGVjayBmYWlsZWQgd2l0aCA0MDAsIHRyeWluZyBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgICAgICAgY29uc3Qgc2ltcGxlUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIFZhdWx0UGlsb3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcsIDMwMDApO1xuICAgICAgICAvLyBDb25uZWN0IFdlYlNvY2tldCBpZiBlbmFibGVkXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCkge1xuICAgICAgICAgIHRoaXMuY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkOicsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIEV2b0FnZW50WCBiYWNrZW5kIG9mZmxpbmUgLSBzb21lIGZlYXR1cmVzIG1heSBub3Qgd29yaycsIDUwMDApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4pqg77iPIENhbm5vdCBjb25uZWN0IHRvIEV2b0FnZW50WCBiYWNrZW5kJywgNTAwMCk7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgdmlld1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIEFkZCByaWJib24gaWNvblxuICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbignYm90JywgJ1ZhdWx0UGlsb3QnLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLm9wZW5DaGF0TW9kYWwoKTtcbiAgICB9KTtcbiAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtcmliYm9uLWNsYXNzJyk7XG5cbiAgICAvLyBSZWdpc3RlciBjb21tYW5kc1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tY2hhdCcsXG4gICAgICBuYW1lOiAnT3BlbiBDaGF0JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5DaGF0TW9kYWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnZXhlY3V0ZS13b3JrZmxvdycsXG4gICAgICBuYW1lOiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuV29ya2Zsb3dNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhbmFseXplLXZhdWx0JyxcbiAgICAgIG5hbWU6ICdBbmFseXplIEN1cnJlbnQgVmF1bHQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYW5hbHl6ZVZhdWx0KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2NvcGlsb3QtY29tcGxldGUnLFxuICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMuZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncXVpY2stY2hhdCcsXG4gICAgICBuYW1lOiAnUXVpY2sgQ2hhdCB3aXRoIFNlbGVjdGlvbicsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi10YXNrcycsXG4gICAgICBuYW1lOiAnUGxhbiBUYXNrcyBmcm9tIE5vdGUnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5wbGFuVGFza3NGcm9tTm90ZShlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLW15LWRheScsXG4gICAgICBuYW1lOiAnUGxhbiBNeSBEYXknLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucGxhbk15RGF5KClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tdmF1bHRwaWxvdC12aWV3JyxcbiAgICAgIG5hbWU6ICdPcGVuIFZhdWx0UGlsb3QgVmlldycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZVZpZXcoKVxuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIgZWRpdG9yIGV2ZW50cyBmb3IgY29waWxvdFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBWYXVsdFBpbG90U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVCk7XG4gICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gIH1cblxuICAvLyBXZWJTb2NrZXQgTWFuYWdlbWVudFxuICBjb25uZWN0V2ViU29ja2V0KCkge1xuICAgIGlmICh0aGlzLndlYnNvY2tldENvbm5lY3RlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5hcGlDbGllbnQuY29ubmVjdFdlYlNvY2tldCh7XG4gICAgICBvbkNoYXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY2hhdCB1cGRhdGVzXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2hhdCB1cGRhdGU6JywgZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25Xb3JrZmxvd1Byb2dyZXNzOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICBuZXcgTm90aWNlKGBXb3JrZmxvdzogJHtkYXRhLnN0ZXB9YCwgMjAwMCk7XG4gICAgICB9LFxuICAgICAgb25Db3BpbG90OiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgY29waWxvdCBzdWdnZXN0aW9uc1xuICAgICAgICB0aGlzLmhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uVmF1bHRTeW5jOiAoZGF0YSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgdmF1bHQgc3luY2hyb25pemF0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdCBzeW5jIHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbkludGVudERlYnVnOiAoZGVidWcpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIGludGVudCBkZWJ1ZyBpbmZvIChvbmx5IGluIGRlYnVnIG1vZGUpXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1ZyAmJiB0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdJbnRlbnQgZGVidWc6JywgZGVidWcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgIG5ldyBOb3RpY2UoYFdlYlNvY2tldCBlcnJvcjogJHtlcnJvcn1gLCA1MDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkRpc2Nvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcsIDIwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCkge1xuICAgIHRoaXMuYXBpQ2xpZW50LmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkO1xuICB9XG5cbiAgLy8gTW9kYWwgTWFuYWdlbWVudFxuICBvcGVuQ2hhdE1vZGFsKCkge1xuICAgIG5ldyBDaGF0TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5Xb3JrZmxvd01vZGFsKCkge1xuICAgIG5ldyBXb3JrZmxvd01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG4gIH1cblxuICAvLyBDb21tYW5kIEltcGxlbWVudGF0aW9uc1xuICBhc3luYyBhbmFseXplVmF1bHQoKSB7XG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnQW5hbHl6aW5nIHZhdWx0Li4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBhbGwgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgIFxuICAgICAgLy8gSW5jbHVkZSB1cCB0byAxMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDEwKSkge1xuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnRlbnQgKz0gYD09PSAke2ZpbGUubmFtZX0gPT09XFxuJHtmaWxlQ29udGVudH1cXG5cXG5gO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmFuYWx5emVWYXVsdENvbnRleHQoe1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBhbmFseXNpc190eXBlOiAnaW5zaWdodHMnXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBDcmVhdGUgYW5hbHlzaXMgbm90ZVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVmF1bHQgQW5hbHlzaXMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCBhbmFseXNpc0NvbnRlbnQgPSBgIyBWYXVsdCBBbmFseXNpcyAtICR7dGltZXN0YW1wfVxcblxcbmA7XG4gICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgQW5hbHlzaXNcXG5cXG4ke3Jlc3BvbnNlLmRhdGEuYW5hbHlzaXN9XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmluc2lnaHRzICYmIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgS2V5IEluc2lnaHRzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLmluc2lnaHRzLmZvckVhY2goaW5zaWdodCA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtpbnNpZ2h0fVxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9ICdcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zICYmIHJlc3BvbnNlLmRhdGEucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYCMjIFJlY29tbWVuZGF0aW9uc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4ge1xuICAgICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAtICR7cmVjfVxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGFuYWx5c2lzQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFZhdWx0IGFuYWx5c2lzIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ0FuYWx5c2lzIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShgQW5hbHlzaXMgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0Q29waWxvdENvbXBsZXRpb24oZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCkge1xuICAgICAgbmV3IE5vdGljZSgnQ29waWxvdCBpcyBkaXNhYmxlZCBpbiBzZXR0aW5ncycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gY3VycmVudExpbmUuc3Vic3RyaW5nKDAsIGN1cnNvci5jaCk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcblxuICAgIC8vIENsaWVudC1zaWRlIHZhbGlkYXRpb24gdG8gcHJldmVudCA0MjIgZXJyb3JzXG4gICAgaWYgKCFmdWxsVGV4dCB8fCBmdWxsVGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdDYW5ub3QgY29tcGxldGUgZW1wdHkgdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvcGlsb3RDb21wbGV0aW9uKHtcbiAgICAgICAgdGV4dDogZnVsbFRleHQsXG4gICAgICAgIGN1cnNvcl9wb3NpdGlvbjogZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnNvciksXG4gICAgICAgIGZpbGVfdHlwZTogJ21hcmtkb3duJyxcbiAgICAgICAgY29udGV4dDogdGV4dEJlZm9yZUN1cnNvclxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGNvbXBsZXRpb24gYXQgY3Vyc29yXG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UocmVzcG9uc2UuZGF0YS5jb21wbGV0aW9uLCBjdXJzb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdDb21wbGV0aW9uIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDb3BpbG90IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDb3BpbG90IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yOiBFZGl0b3IpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jaGF0KHtcbiAgICAgICAgbWVzc2FnZTogYFBsZWFzZSBleHBsYWluIG9yIGFuYWx5emUgdGhpcyB0ZXh0OiBcIiR7c2VsZWN0aW9ufVwiYCxcbiAgICAgICAgdmF1bHRfY29udGV4dDogZWRpdG9yLmdldFZhbHVlKClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIEluc2VydCByZXNwb25zZSBiZWxvdyBzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcbiAgICAgICAgY29uc3QgbmV3TGluZSA9IGBcXG5cXG4qKlZhdWx0UGlsb3QgQW5hbHlzaXM6KipcXG4ke3Jlc3BvbnNlLmRhdGEucmVzcG9uc2V9XFxuXFxuYDtcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdMaW5lLCBjdXJzb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdBbmFseXNpcyBpbnNlcnRlZCcsIDIwMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtyZXNwb25zZS5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgQ2hhdCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwbGFuVGFza3NGcm9tTm90ZShlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBjb250ZW50IHRvIGFuYWx5emUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdQbGFubmluZyB0YXNrcy4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQucGxhblRhc2tzKHtcbiAgICAgICAgZ29hbDogYENyZWF0ZSBhIHRhc2sgcGxhbiBiYXNlZCBvbiB0aGlzIG5vdGU6ICR7YWN0aXZlRmlsZT8ubmFtZSB8fCAnVW50aXRsZWQnfWAsXG4gICAgICAgIGNvbnRleHQ6IGNvbnRlbnQsXG4gICAgICAgIHRpbWVmcmFtZTogJzEgd2VlaydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0YXNrIHBsYW4gbm90ZVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgVGFzayBQbGFuIC0gJHthY3RpdmVGaWxlPy5iYXNlbmFtZSB8fCAnVW50aXRsZWQnfSAtICR7dGltZXN0YW1wfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFza0NvbnRlbnQgPSBgIyAke3Jlc3BvbnNlLmRhdGEucGxhbi50aXRsZX1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgJHtyZXNwb25zZS5kYXRhLnBsYW4uZGVzY3JpcHRpb259XFxuXFxuYDtcbiAgICAgICAgdGFza0NvbnRlbnQgKz0gYCoqRXN0aW1hdGVkIER1cmF0aW9uOioqICR7cmVzcG9uc2UuZGF0YS5wbGFuLmVzdGltYXRlZF9kdXJhdGlvbn1cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcyAmJiByZXNwb25zZS5kYXRhLnBsYW4udGFza3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAjIyBUYXNrc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzLmZvckVhY2goKHRhc2s6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB0YXNrLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAnW3hdJyA6ICdbIF0nO1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCR7Y2hlY2tib3h9ICoqJHt0YXNrLnRpdGxlfSoqICgke3Rhc2sucHJpb3JpdHl9IHByaW9yaXR5KVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAgJHt0YXNrLmRlc2NyaXB0aW9ufVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAgKkVzdGltYXRlZCB0aW1lOiAke3Rhc2suZXN0aW1hdGVkX3RpbWV9KlxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzICYmIHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIE1pbGVzdG9uZXNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWlsZXN0b25lcy5mb3JFYWNoKChtaWxlc3RvbmU6IGFueSkgPT4ge1xuICAgICAgICAgICAgdGFza0NvbnRlbnQgKz0gYC0gKioke21pbGVzdG9uZS50aXRsZX0qKiAoJHttaWxlc3RvbmUudGFyZ2V0X2RhdGV9KVxcbmA7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgICAke21pbGVzdG9uZS5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCB0YXNrQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFRhc2sgcGxhbiBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdUYXNrIHBsYW5uaW5nIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFubmluZyBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwbGFuTXlEYXkoKSB7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgbm90ZeKAlG9wZW4gdG9kYXlcXCdzIGRhaWx5IG5vdGUgZmlyc3QuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgeW91ciBkYXkuLi4nLCAwKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSBjb250ZW50XG4gICAgICBjb25zdCBmaWxlVGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICBcbiAgICAgIC8vIEZldGNoIHNjaGVkdWxlIGZyb20gQVBJXG4gICAgICBjb25zdCB7IHNjaGVkdWxlTWFya2Rvd24sIGhlYWRsaW5lIH0gPSBhd2FpdCBmZXRjaFNjaGVkdWxlKGZpbGVUZXh0KTtcblxuICAgICAgLy8gVmFsaWRhdGUgdGhlIHJldHVybmVkIHNjaGVkdWxlXG4gICAgICBpZiAoIXZhbGlkYXRlU2NoZWR1bGVNYXJrZG93bihzY2hlZHVsZU1hcmtkb3duKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2NoZWR1bGUgZGF0YSByZWNlaXZlZCBmcm9tIEFQSScpO1xuICAgICAgfVxuXG4gICAgICAvLyBJbmplY3QgdGhlIHNjaGVkdWxlIGludG8gdGhlIG5vdGVcbiAgICAgIGNvbnN0IHVwZGF0ZWRUZXh0ID0gaW5qZWN0U2NoZWR1bGUoZmlsZVRleHQsIHNjaGVkdWxlTWFya2Rvd24pO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGZpbGVcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCB1cGRhdGVkVGV4dCk7XG5cbiAgICAgIC8vIEhpZGUgdGhlIHByb2dyZXNzIG5vdGljZVxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgLy8gU2hvdyBzdWNjZXNzIG5vdGljZVxuICAgICAgY29uc3Qgc3VjY2Vzc01lc3NhZ2UgPSBoZWFkbGluZSA/IGAke2hlYWRsaW5lfSDinIVgIDogJ1NjaGVkdWxlIGluc2VydGVkIOKchSc7XG4gICAgICBuZXcgTm90aWNlKHN1Y2Nlc3NNZXNzYWdlKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHR5cGVzIG9mIGVycm9yc1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0pTT04nKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uZXIgQVBJIGVycm9yOiBJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbmV0d29yaycpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5lciBBUEkgZXJyb3I6IFVuYWJsZSB0byBjb25uZWN0IHRvIGxvY2FsaG9zdDozMDAwJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgUGxhbm5lciBBUEkgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5lciBBUEkgZXJyb3I6IFVua25vd24gZXJyb3Igb2NjdXJyZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVCk7XG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IHJpZ2h0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgaWYgKHJpZ2h0TGVhZikge1xuICAgICAgICBhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfVkFVTFRQSUxPVCxcbiAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQXV0by1jb21wbGV0aW9uIGhhbmRsaW5nXG4gIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbS1jb250ZW50JykpIHJldHVybjtcblxuICAgIC8vIE9ubHkgdHJpZ2dlciBvbiBzcGVjaWZpYyBrZXlzIGFuZCBjb25kaXRpb25zXG4gICAgaWYgKCF0aGlzLnNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUoZXZlbnQpKSByZXR1cm47XG5cbiAgICAvLyBEZWJvdW5jZSBhdXRvLWNvbXBsZXRpb24gcmVxdWVzdHMgd2l0aCBsb25nZXIgZGVsYXlcbiAgICBjbGVhclRpbWVvdXQoKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0KTtcbiAgICAodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckF1dG9Db21wbGV0aW9uKCk7XG4gICAgfSwgMzAwMCk7IC8vIEluY3JlYXNlZCB0byAzIHNlY29uZHNcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZShldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIC8vIERvbid0IHRyaWdnZXIgb24gbmF2aWdhdGlvbiBvciBtb2RpZmllciBrZXlzXG4gICAgY29uc3Qgbm9uVHJpZ2dlcktleXMgPSBbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ1RhYicsICdTaGlmdCcsICdDb250cm9sJywgJ0FsdCcsICdNZXRhJywgJ0VzY2FwZSddO1xuICAgIGlmIChub25UcmlnZ2VyS2V5cy5pbmRleE9mKGV2ZW50LmtleSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgXG4gICAgLy8gT25seSB0cmlnZ2VyIGF0IHRoZSBlbmQgb2YgYSBsaW5lXG4gICAgaWYgKGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHNlbnRlbmNlLWVuZGluZyB0cmlnZ2Vyc1xuICAgIGNvbnN0IHRyaWdnZXJDaGFycyA9IFsnLicsICchJywgJz8nLCAnOicsICdcXG4nXTtcbiAgICBjb25zdCBsYXN0Q2hhciA9IGN1cnJlbnRMaW5lLnNsaWNlKC0xKTtcbiAgICBcbiAgICAvLyBUcmlnZ2VyIGFmdGVyIHNlbnRlbmNlIGVuZGluZ3Mgd2l0aCBzcGFjZVxuICAgIGlmICh0cmlnZ2VyQ2hhcnMuaW5kZXhPZihsYXN0Q2hhcikgIT09IC0xICYmIGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJpZ2dlciBhZnRlciBFbnRlciBrZXkgKG5ldyBsaW5lKVxuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgY3VycmVudExpbmUudHJpbSgpLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQXV0b0NvbXBsZXRpb24oKSB7XG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm47XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBcbiAgICAvLyBNb3JlIHJlc3RyaWN0aXZlIGNvbmRpdGlvbnMgZm9yIGF1dG8tY29tcGxldGlvblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkubGVuZ3RoIDwgMTAgfHwgY3Vyc29yLmNoICE9PSBjdXJyZW50TGluZS5sZW5ndGgpIHJldHVybjtcbiAgICBcbiAgICAvLyBQcmV2ZW50IDQyMiBlcnJvcnMgZnJvbSBlbXB0eSB0ZXh0XG4gICAgaWYgKCFmdWxsVGV4dCB8fCBmdWxsVGV4dC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBBZGQgY29vbGRvd24gdG8gcHJldmVudCB0b28gZnJlcXVlbnQgcmVxdWVzdHNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGxhc3RSZXF1ZXN0ID0gKHRoaXMgYXMgYW55KS5sYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCB8fCAwO1xuICAgIGlmIChub3cgLSBsYXN0UmVxdWVzdCA8IDEwMDAwKSByZXR1cm47IC8vIDEwIHNlY29uZCBjb29sZG93blxuICAgIFxuICAgICh0aGlzIGFzIGFueSkubGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QgPSBub3c7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIChmb3Igbm93IGp1c3Qgc2hvdyBmaXJzdCBzdWdnZXN0aW9uKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBBdXRvLXN1Z2dlc3Rpb246ICR7cmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9uc1swXX1gLCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBmYWlsIGZvciBhdXRvLWNvbXBsZXRpb25cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRvLWNvbXBsZXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YTogQ29waWxvdFJlc3BvbnNlKSB7XG4gICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjb3BpbG90IHN1Z2dlc3Rpb25zIGZyb20gV2ViU29ja2V0XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBuZXcgTm90aWNlKGBMaXZlIHN1Z2dlc3Rpb246ICR7ZGF0YS5jb21wbGV0aW9ufWAsIDIwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldHRpbmdzIG1hbmFnZW1lbnRcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFQSSBjbGllbnQgaWYgVVJMIGNoYW5nZWRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG4gICAgXG4gICAgLy8gUmVjb25uZWN0IFdlYlNvY2tldCBpZiBzZXR0aW5ncyBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmICF0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgdGhlIHBsYW5uZXIgZmVhdHVyZVxuZXhwb3J0IGludGVyZmFjZSBQbGFubmVyUmVzcG9uc2Uge1xuICBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmc7XG4gIGhlYWRsaW5lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlcXVlc3Qge1xuICBub3RlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRmV0Y2hlcyBzY2hlZHVsZSBkYXRhIGZyb20gdGhlIHBsYW5uZXIgQVBJXG4gKiBAcGFyYW0gbm90ZVRleHQgLSBUaGUgZnVsbCB0ZXh0IG9mIHRoZSBhY3RpdmUgbm90ZVxuICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHRoZSBzY2hlZHVsZSBtYXJrZG93biBhbmQgaGVhZGxpbmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU2NoZWR1bGUobm90ZVRleHQ6IHN0cmluZyk6IFByb21pc2U8UGxhbm5lclJlc3BvbnNlPiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3BsYW5kYXknLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbm90ZTogbm90ZVRleHQgfSlcbiAgfSk7XG5cbiAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xufVxuXG4vKipcbiAqIEZpbmRzIGFuZCBleHRyYWN0cyB0aGUgU2NoZWR1bGUgc2VjdGlvbiBmcm9tIG5vdGUgdGV4dFxuICogQHBhcmFtIHRleHQgLSBUaGUgZnVsbCBub3RlIHRleHRcbiAqIEByZXR1cm5zIE1hdGNoIHJlc3VsdCB3aXRoIHNjaGVkdWxlIHNlY3Rpb24gZGV0YWlscyBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kU2NoZWR1bGVTZWN0aW9uKHRleHQ6IHN0cmluZyk6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsIHtcbiAgLy8gRmlyc3QgdHJ5IHRvIG1hdGNoIGhlYWRpbmdzIHRoYXQgYXJlIGV4YWN0bHkgXCIjIyBTY2hlZHVsZVwiICh3aXRoIG9wdGlvbmFsIGNvbnRlbnQgYWZ0ZXIpXG4gIGxldCBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMrU2NoZWR1bGVcXGJbXlxcbl0qXFxuKShbXFxzXFxTXSo/KSg/PVxcbiMjXFxzfCQpL2ltO1xuICBsZXQgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xuICBcbiAgaWYgKG1hdGNoKSB7XG4gICAgcmV0dXJuIG1hdGNoO1xuICB9XG4gIFxuICAvLyBJZiBubyBleGFjdCBtYXRjaCwgdHJ5IHRvIG1hdGNoIGhlYWRpbmdzIHRoYXQgY29udGFpbiBcIlNjaGVkdWxlXCIgYXMgYSB3b3JkXG4gIHNjaGVkdWxlUmVnZXggPSAvKF4jI1xccyooPzouKlxccyk/XFxiU2NoZWR1bGVcXGIoPzpcXHMuKik/JFxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgcmV0dXJuIHRleHQubWF0Y2goc2NoZWR1bGVSZWdleCk7XG59XG5cbi8qKlxuICogSW5qZWN0cyBvciByZXBsYWNlcyB0aGUgc2NoZWR1bGUgc2VjdGlvbiBpbiB0aGUgbm90ZSB0ZXh0XG4gKiBAcGFyYW0gb3JpZ2luYWxUZXh0IC0gVGhlIG9yaWdpbmFsIG5vdGUgdGV4dFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgbmV3IHNjaGVkdWxlIGNvbnRlbnQgdG8gaW5qZWN0XG4gKiBAcmV0dXJucyBVcGRhdGVkIG5vdGUgdGV4dCB3aXRoIHRoZSBuZXcgc2NoZWR1bGUgc2VjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0U2NoZWR1bGUob3JpZ2luYWxUZXh0OiBzdHJpbmcsIHNjaGVkdWxlTWFya2Rvd246IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG1hdGNoID0gZmluZFNjaGVkdWxlU2VjdGlvbihvcmlnaW5hbFRleHQpO1xuICBcbiAgaWYgKG1hdGNoKSB7XG4gICAgLy8gUmVwbGFjZSBleGlzdGluZyBzY2hlZHVsZSBzZWN0aW9uIChrZWVwIGhlYWRpbmcsIHJlcGxhY2UgY29udGVudClcbiAgICBjb25zdCBbZnVsbE1hdGNoLCBoZWFkaW5nXSA9IG1hdGNoO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gaGVhZGluZyArIHNjaGVkdWxlTWFya2Rvd247XG4gICAgcmV0dXJuIG9yaWdpbmFsVGV4dC5yZXBsYWNlKGZ1bGxNYXRjaCwgcmVwbGFjZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIC8vIEFwcGVuZCBuZXcgc2NoZWR1bGUgc2VjdGlvblxuICAgIGNvbnN0IG5ld1NlY3Rpb24gPSBgXFxuXFxuIyMgU2NoZWR1bGVcXG4ke3NjaGVkdWxlTWFya2Rvd259YDtcbiAgICByZXR1cm4gb3JpZ2luYWxUZXh0ICsgbmV3U2VjdGlvbjtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiB0aGUgc2NoZWR1bGUgbWFya2Rvd24gaXMgcHJvcGVybHkgZm9ybWF0dGVkXG4gKiBAcGFyYW0gc2NoZWR1bGVNYXJrZG93biAtIFRoZSBzY2hlZHVsZSBjb250ZW50IHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU2NoZWR1bGVNYXJrZG93bihzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIGNoZWNrIGlmIGl0J3Mgbm90IGVtcHR5IGFuZCBjb250YWlucyBzb21lIGNvbnRlbnRcbiAgcmV0dXJuIHNjaGVkdWxlTWFya2Rvd24udHJpbSgpLmxlbmd0aCA+IDA7XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9TRVRUSU5HUyIsImJhY2tlbmRVcmwiLCJhcGlLZXkiLCJlbmFibGVXZWJTb2NrZXQiLCJlbmFibGVDb3BpbG90IiwiZW5hYmxlQXV0b0NvbXBsZXRlIiwiZGVmYXVsdEFnZW50IiwiZGVmYXVsdE1vZGUiLCJjaGF0SGlzdG9yeUxpbWl0IiwiZGVidWdNb2RlIiwic2hvd0ludGVudERlYnVnIiwiVmF1bHRQaWxvdFNldHRpbmdUYWIiLCJQbHVnaW5TZXR0aW5nVGFiIiwiY29uc3RydWN0b3IiLCJhcHAiLCJwbHVnaW4iLCJzdXBlciIsInRoaXMiLCJkaXNwbGF5IiwiY29udGFpbmVyRWwiLCJlbXB0eSIsImNyZWF0ZUVsIiwidGV4dCIsIlNldHRpbmciLCJzZXROYW1lIiwic2V0RGVzYyIsImFkZFRleHQiLCJzZXRQbGFjZWhvbGRlciIsInNldFZhbHVlIiwic2V0dGluZ3MiLCJvbkNoYW5nZSIsInZhbHVlIiwiX19hd2FpdGVyIiwic2F2ZVNldHRpbmdzIiwiYWRkQnV0dG9uIiwiYnV0dG9uIiwic2V0QnV0dG9uVGV4dCIsIm9uQ2xpY2siLCJ0ZXN0Q29ubmVjdGlvbiIsImFkZFRvZ2dsZSIsInRvZ2dsZSIsImNvbm5lY3RXZWJTb2NrZXQiLCJkaXNjb25uZWN0V2ViU29ja2V0IiwiYWRkRHJvcGRvd24iLCJkcm9wZG93biIsImFkZE9wdGlvbiIsImFkZFNsaWRlciIsInNsaWRlciIsInNldExpbWl0cyIsInNldER5bmFtaWNUb29sdGlwIiwiY2xzIiwiaW5uZXJIVE1MIiwibm90aWNlIiwiTm90aWNlIiwicmVzcG9uc2UiLCJhcGlDbGllbnQiLCJoZWFsdGhDaGVjayIsInN1Y2Nlc3MiLCJlcnJvciIsIl9hIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInNpbXBsZVJlc3BvbnNlIiwic2ltcGxlSGVhbHRoQ2hlY2siLCJkYXRhIiwic3RhdHVzIiwidmVyc2lvbiIsImhpZGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVCIsIlZhdWx0UGlsb3RWaWV3IiwiSXRlbVZpZXciLCJsZWFmIiwiZ2V0Vmlld1R5cGUiLCJnZXREaXNwbGF5VGV4dCIsImdldEljb24iLCJvbk9wZW4iLCJjb250YWluZXIiLCJhZGRDbGFzcyIsImhlYWRlckVsIiwic3RhdHVzRWwiLCJ1cGRhdGVTdGF0dXMiLCJxdWlja0FjdGlvbnNFbCIsImNyZWF0ZVF1aWNrQWN0aW9ucyIsInZhdWx0U3RhdHNFbCIsInVwZGF0ZVZhdWx0U3RhdHMiLCJhY3Rpdml0aWVzRWwiLCJhZGRTdHlsZXMiLCJzdGF0dXNDb250YWluZXIiLCJiYWNrZW5kU3RhdHVzIiwiYmFja2VuZEluZGljYXRvciIsIndzU3RhdHVzIiwiaXNXZWJTb2NrZXRDb25uZWN0ZWQiLCJjaGVja0JhY2tlbmRTdGF0dXMiLCJpbmRpY2F0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTmFtZSIsImFjdGlvbnNHcmlkIiwib25jbGljayIsIm9wZW5DaGF0TW9kYWwiLCJvcGVuV29ya2Zsb3dNb2RhbCIsImFuYWx5emVWYXVsdCIsImFjdGl2ZVZpZXciLCJ3b3Jrc3BhY2UiLCJnZXRBY3RpdmVWaWV3T2ZUeXBlIiwiTWFya2Rvd25WaWV3IiwiZ2V0Q29waWxvdENvbXBsZXRpb24iLCJlZGl0b3IiLCJzdGF0c0NvbnRhaW5lciIsImZpbGVzIiwidmF1bHQiLCJnZXRGaWxlcyIsIm1hcmtkb3duRmlsZXMiLCJnZXRNYXJrZG93bkZpbGVzIiwibGFiZWwiLCJsZW5ndGgiLCJ0b1N0cmluZyIsImdldEFsbExvYWRlZEZpbGVzIiwiZmlsdGVyIiwiZiIsIlRGb2xkZXIiLCJmb3JFYWNoIiwic3RhdCIsInN0YXRFbCIsImxvYWRBZ2VudEluZm8iLCJnZXRBZ2VudHMiLCJhZ2VudENvdW50IiwiYWN0aXZlQWdlbnRzIiwiYWdlbnQiLCJhY3RpdmUiLCJhZ2VudFN0YXRzRWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGVFbCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsIm9uQ2xvc2UiLCJnZXRBY3RpdmVNYXJrZG93biIsImZpbGUiLCJnZXRBY3RpdmVGaWxlIiwicmVhZCIsInNsaWNlIiwiQ2hhdE1vZGFsIiwiTW9kYWwiLCJjdXJyZW50Q29udmVyc2F0aW9uSWQiLCJtZXNzYWdlcyIsImNvbnRlbnRFbCIsInRvb2xiYXJFbCIsImNsZWFyQ2hhdCIsImFnZW50U2VsZWN0IiwibG9hZEFnZW50cyIsImNoYXRDb250YWluZXIiLCJtZXNzYWdlc0VsIiwiaW5wdXRDb250YWluZXIiLCJpbnB1dEVsIiwidHlwZSIsInBsYWNlaG9sZGVyIiwic2VuZEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwibmFtZSIsImdldENvbnZlcnNhdGlvbkhpc3RvcnkiLCJyZW5kZXJNZXNzYWdlcyIsInRyaW0iLCJkaXNhYmxlZCIsImFkZE1lc3NhZ2UiLCJjb250ZXh0IiwiaW50ZW50UmVzIiwiUHJvbWlzZSIsImFsbCIsImNsYXNzaWZ5SW50ZW50IiwicGF5bG9hZCIsImludGVudCIsInJ1bldvcmtmbG93IiwicmVzdWx0Iiwic2VuZENoYXQiLCJjb252ZXJzYXRpb25faWQiLCJ1bmRlZmluZWQiLCJhZ2VudF9pZCIsImdldFNlbGVjdGVkQWdlbnQiLCJlcnJvck1zZyIsInF1ZXJ5U2VsZWN0b3IiLCJyb2xlIiwiY29udGVudCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJyZW5kZXJNZXNzYWdlIiwic2Nyb2xsVG9Cb3R0b20iLCJtZXNzYWdlRWwiLCJyZW5kZXJNYXJrZG93biIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlcGxhY2UiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJkZWJ1Z0VsIiwic2V0VGltZW91dCIsInJlbW92ZSIsIldvcmtmbG93TW9kYWwiLCJpc0V4ZWN1dGluZyIsImZvcm1FbCIsImdvYWxDb250YWluZXIiLCJnb2FsSW5wdXQiLCJjb250ZXh0Q29udGFpbmVyIiwiY29udGV4dElucHV0Iiwib3B0aW9uc0NvbnRhaW5lciIsImluY2x1ZGVBY3RpdmVGaWxlIiwiYWN0aXZlRmlsZUNoZWNrYm94IiwiY3JlYXRlU3BhbiIsImluY2x1ZGVBbGxGaWxlcyIsImFsbEZpbGVzQ2hlY2tib3giLCJleGVjdXRlQnV0dG9uIiwiZXhlY3V0ZVdvcmtmbG93IiwiY2hlY2tlZCIsInByb2dyZXNzQ29udGFpbmVyIiwic3R5bGUiLCJyZXN1bHRzQ29udGFpbmVyIiwiZ29hbCIsInZhdWx0Q29udGVudCIsImFjdGl2ZUZpbGUiLCJyZXF1ZXN0IiwidmF1bHRfY29udGVudCIsInNldHVwUHJvZ3Jlc3NMaXN0ZW5lciIsImRpc3BsYXlSZXN1bHRzIiwiZGlzcGxheUVycm9yIiwiZGlzcGxheVByb2dyZXNzIiwid29ya2Zsb3ciLCJleGVjdXRpb25fdGltZSIsInJlc3VsdEVsIiwic3RlcHNfdGFrZW4iLCJzdGVwc0VsIiwic3RlcHNMaXN0Iiwic3RlcCIsImFydGlmYWN0cyIsImFydGlmYWN0c0VsIiwiYXJ0aWZhY3QiLCJpbmRleCIsImFydGlmYWN0RWwiLCJ0aXRsZSIsInNhdmVBcnRpZmFjdEFzTm90ZSIsInNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUiLCJmaWxlbmFtZSIsImNyZWF0ZSIsInNwbGl0IiwiRXZvQWdlbnRYQ2xpZW50IiwiYmFzZVVybCIsIndzQ2FsbGJhY2tzIiwiTWFwIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludF8xIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsIk9iamVjdCIsImFzc2lnbiIsIkFjY2VwdCIsImZldGNoIiwibW9kZSIsImNyZWRlbnRpYWxzIiwiY29udGVudFR5cGUiLCJnZXQiLCJqc29uIiwib2siLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNUZXh0IiwibG9nIiwibWV0aG9kIiwiY2hhdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udmVyc2F0aW9uSWRfMSIsImNvbnZlcnNhdGlvbklkIiwibGltaXQiLCJyZXF1ZXN0Qm9keSIsImluY2x1ZGVfbWVzc2FnZXMiLCJkZWxldGVDb252ZXJzYXRpb24iLCJ2YXVsdF9jb250ZXh0IiwiY3JlYXRlQWdlbnQiLCJleGVjdXRlQWdlbnQiLCJhbmFseXplVmF1bHRDb250ZXh0IiwicGxhblRhc2tzIiwicGFyc2VJbnRlbGxpZ2VuY2UiLCJjb25maWRlbmNlIiwiZXhwbGFpbkludGVudCIsImluY2x1ZGVfZGVidWciLCJyZWFzb25pbmciLCJ1cGRhdGVNZW1vcnkiLCJjYWxsYmFja3MiLCJ3c1VybCIsIndlYnNvY2tldCIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uQ29ubmVjdCIsImNhbGwiLCJvbm1lc3NhZ2UiLCJldmVudCIsInBhcnNlIiwib25DaGF0IiwiX2IiLCJvbldvcmtmbG93UHJvZ3Jlc3MiLCJfYyIsIm9uQ29waWxvdCIsIl9kIiwib25WYXVsdFN5bmMiLCJfZSIsIm9uSW50ZW50RGVidWciLCJfZiIsIm9uRXJyb3IiLCJfZyIsIm9uY2xvc2UiLCJjb2RlIiwicmVhc29uIiwib25EaXNjb25uZWN0Iiwib25lcnJvciIsImNsb3NlIiwic2VuZFdlYlNvY2tldE1lc3NhZ2UiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJWYXVsdFBpbG90UGx1Z2luIiwiUGx1Z2luIiwid2Vic29ja2V0Q29ubmVjdGVkIiwiY29waWxvdEVuYWJsZWQiLCJvbmxvYWQiLCJhcHBJbnN0YW5jZSIsImxvYWRTZXR0aW5ncyIsInJlZ2lzdGVyVmlldyIsImFkZFJpYmJvbkljb24iLCJldnQiLCJhZGRDb21tYW5kIiwiY2FsbGJhY2siLCJlZGl0b3JDYWxsYmFjayIsInF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24iLCJwbGFuVGFza3NGcm9tTm90ZSIsInBsYW5NeURheSIsImFjdGl2YXRlVmlldyIsInJlZ2lzdGVyRG9tRXZlbnQiLCJoYW5kbGVLZXlVcCIsImJpbmQiLCJhZGRTZXR0aW5nVGFiIiwib251bmxvYWQiLCJkZXRhY2hMZWF2ZXNPZlR5cGUiLCJoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbiIsImRlYnVnIiwib3BlbiIsImZpbGVDb250ZW50IiwiYW5hbHlzaXNfdHlwZSIsImFuYWx5c2lzQ29udGVudCIsImFuYWx5c2lzIiwiaW5zaWdodHMiLCJpbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwicmVjIiwiY3Vyc29yIiwiZ2V0Q3Vyc29yIiwidGV4dEJlZm9yZUN1cnNvciIsImdldExpbmUiLCJsaW5lIiwic3Vic3RyaW5nIiwiY2giLCJmdWxsVGV4dCIsImdldFZhbHVlIiwiY3Vyc29yX3Bvc2l0aW9uIiwicG9zVG9PZmZzZXQiLCJmaWxlX3R5cGUiLCJyZXBsYWNlUmFuZ2UiLCJjb21wbGV0aW9uIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwibmV3TGluZSIsInRpbWVmcmFtZSIsImJhc2VuYW1lIiwidGFza0NvbnRlbnQiLCJwbGFuIiwiZGVzY3JpcHRpb24iLCJlc3RpbWF0ZWRfZHVyYXRpb24iLCJ0YXNrcyIsInRhc2siLCJjaGVja2JveCIsInByaW9yaXR5IiwiZXN0aW1hdGVkX3RpbWUiLCJtaWxlc3RvbmVzIiwibWlsZXN0b25lIiwidGFyZ2V0X2RhdGUiLCJmaWxlVGV4dCIsInNjaGVkdWxlTWFya2Rvd24iLCJoZWFkbGluZSIsIm5vdGVUZXh0Iiwibm90ZSIsImZldGNoU2NoZWR1bGUiLCJ2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24iLCJ1cGRhdGVkVGV4dCIsIm9yaWdpbmFsVGV4dCIsIm1hdGNoIiwic2NoZWR1bGVSZWdleCIsImZpbmRTY2hlZHVsZVNlY3Rpb24iLCJmdWxsTWF0Y2giLCJoZWFkaW5nIiwicmVwbGFjZW1lbnQiLCJpbmplY3RTY2hlZHVsZSIsIm1vZGlmeSIsInN1Y2Nlc3NNZXNzYWdlIiwibGVhdmVzIiwiZ2V0TGVhdmVzT2ZUeXBlIiwicmlnaHRMZWFmIiwiZ2V0UmlnaHRMZWFmIiwic2V0Vmlld1N0YXRlIiwicmV2ZWFsTGVhZiIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZSIsImNsZWFyVGltZW91dCIsImF1dG9Db21wbGV0ZVRpbWVvdXQiLCJ0cmlnZ2VyQXV0b0NvbXBsZXRpb24iLCJpbmRleE9mIiwiY3VycmVudExpbmUiLCJsYXN0Q2hhciIsIm5vdyIsImxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0Iiwic3VnZ2VzdGlvbnMiLCJsb2FkRGF0YSIsInNhdmVEYXRhIl0sIm1hcHBpbmdzIjoiNFhBSU8sTUFBTUEsRUFBdUMsQ0FDbERDLFdBQVksd0JBQ1pDLE9BQVEsR0FDUkMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLG9CQUFvQixFQUNwQkMsYUFBYyxHQUNkQyxZQUFhLE1BQ2JDLGlCQUFrQixJQUNsQkMsV0FBVyxFQUNYQyxpQkFBaUIsR0FHYixNQUFPQyxVQUE2QkMsRUFBQUEsaUJBR3hDLFdBQUFDLENBQVlDLEVBQVVDLEdBQ3BCQyxNQUFNRixFQUFLQyxHQUNYRSxLQUFLRixPQUFTQSxDQUNmLENBRUQsT0FBQUcsR0FDRSxNQUFNQyxZQUFFQSxHQUFnQkYsS0FDeEJFLEVBQVlDLFFBRVpELEVBQVlFLFNBQVMsS0FBTSxDQUFFQyxLQUFNLHdCQUNuQ0gsRUFBWUUsU0FBUyxJQUFLLENBQ3hCQyxLQUFNLG9FQUlSSCxFQUFZRSxTQUFTLEtBQU0sQ0FBRUMsS0FBTSxlQUVuQyxJQUFJQyxFQUFBQSxRQUFRSixHQUNUSyxRQUFRLGVBQ1JDLFFBQVEsbUNBQ1JDLFFBQVFKLEdBQ1BBLEVBQ0dLLGVBQWUseUJBQ2ZDLFNBQVNYLEtBQUtGLE9BQU9jLFNBQVM1QixZQUM5QjZCLFNBQWVDLEdBQVFDLEVBQUFmLFVBQUEsT0FBQSxFQUFBLFlBQ3RCQSxLQUFLRixPQUFPYyxTQUFTNUIsV0FBYThCLFFBQzVCZCxLQUFLRixPQUFPa0IsY0FDbkIsS0FHUCxJQUFJVixFQUFBQSxRQUFRSixHQUNUSyxRQUFRLFdBQ1JDLFFBQVEs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
