"use strict";var e=require("obsidian");function t(e,t,n,i){return new(n||(n=Promise))(function(o,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,r)}l((i=i.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={enableVaultManagement:!0,autoSyncVaultStructure:!1,searchResultsLimit:50,enableSmartSearch:!0,batchOperationTimeout:3e4,showVaultStats:!0,maxSearchResults:100,defaultSearchType:"content",enableFileOperations:!0,confirmDestructiveOperations:!0,autoBackupBeforeOperations:!1};const i={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1,vaultManagement:n,modelSelection:{enabled:!0,devpipePath:"../dev-pipe",monitoringInterval:3e4,fallbackEnabled:!0,cacheDuration:3e5,retryAttempts:3,timeout:3e4,debugMode:!1,userPreferences:{priority:"balanced",maxCostPerRequest:.5,preferredProviders:[],qualityThreshold:.7}}};class o extends e.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){const{containerEl:o}=this;o.empty(),o.createEl("h2",{text:"VaultPilot Settings"}),o.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),o.createEl("h3",{text:"Connection"}),new e.Setting(o).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(e=>e.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=e,yield this.plugin.saveSettings()}))),new e.Setting(o).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(e=>e.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.apiKey=e,yield this.plugin.saveSettings()}))),new e.Setting(o).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(e=>e.setButtonText("Test Connection").onClick(()=>t(this,void 0,void 0,function*(){yield this.testConnection()}))),o.createEl("h3",{text:"Features"}),new e.Setting(o).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(e=>e.setValue(this.plugin.settings.enableWebSocket).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=e,yield this.plugin.saveSettings(),e?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new e.Setting(o).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(e=>e.setValue(this.plugin.settings.enableCopilot).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=e,yield this.plugin.saveSettings()}))),new e.Setting(o).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(e=>e.setValue(this.plugin.settings.enableAutoComplete).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=e,yield this.plugin.saveSettings()}))),o.createEl("h3",{text:"Agent Configuration"}),new e.Setting(o).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(e=>e.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=e,yield this.plugin.saveSettings()}))),new e.Setting(o).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(e=>e.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=e,yield this.plugin.saveSettings()}))),new e.Setting(o).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(e=>e.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=e,yield this.plugin.saveSettings()}))),o.createEl("h3",{text:"Advanced"}),new e.Setting(o).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(e=>e.setValue(this.plugin.settings.debugMode).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.debugMode=e,yield this.plugin.saveSettings()}))),new e.Setting(o).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(e=>e.setValue(this.plugin.settings.showIntentDebug).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=e,yield this.plugin.saveSettings()}))),o.createEl("h3",{text:"Vault Management"}),function(i,o){i.createEl("h2",{text:"Vault Management"}),i.createEl("p",{text:"Configure AI-powered vault structure analysis and file operations."}),new e.Setting(i).setName("Enable Vault Management").setDesc("Enable AI-powered vault structure analysis and file operations").addToggle(e=>{var i,a;return e.setValue(null===(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.enableVaultManagement)||void 0===a||a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.enableVaultManagement=e,yield o.saveSettings(),e?o.initializeVaultManagement():o.disableVaultManagement()}))}),new e.Setting(i).setName("Auto Sync Vault Structure").setDesc("Automatically update vault structure analysis when files change").addToggle(e=>{var i,a;return e.setValue(null!==(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.autoSyncVaultStructure)&&void 0!==a&&a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.autoSyncVaultStructure=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Enable Smart Search").setDesc("Use AI-powered search with context and insights").addToggle(e=>{var i,a;return e.setValue(null===(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.enableSmartSearch)||void 0===a||a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.enableSmartSearch=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Search Results Limit").setDesc("Maximum number of search results to display").addSlider(e=>{var i,a;return e.setLimits(10,200,10).setValue(null!==(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.searchResultsLimit)&&void 0!==a?a:50).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.searchResultsLimit=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Default Search Type").setDesc("Default search mode for smart search").addDropdown(e=>{var i,a;return e.addOption("content","Content Search").addOption("filename","Filename Search").addOption("tags","Tag Search").addOption("links","Link Search").addOption("comprehensive","Comprehensive Search").setValue(null!==(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.defaultSearchType)&&void 0!==a?a:"content").onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.defaultSearchType=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Enable File Operations").setDesc("Allow file creation, deletion, and modification through the interface").addToggle(e=>{var i,a;return e.setValue(null===(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.enableFileOperations)||void 0===a||a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.enableFileOperations=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Confirm Destructive Operations").setDesc("Show confirmation dialog for file deletion and destructive operations").addToggle(e=>{var i,a;return e.setValue(null===(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.confirmDestructiveOperations)||void 0===a||a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.confirmDestructiveOperations=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Auto Backup Before Operations").setDesc("Automatically create backups before destructive file operations").addToggle(e=>{var i,a;return e.setValue(null!==(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.autoBackupBeforeOperations)&&void 0!==a&&a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.autoBackupBeforeOperations=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Batch Operation Timeout").setDesc("Timeout for batch operations in milliseconds").addText(e=>{var i,a;return e.setPlaceholder("30000").setValue(String(null!==(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.batchOperationTimeout)&&void 0!==a?a:3e4)).onChange(e=>t(this,void 0,void 0,function*(){const t=parseInt(e)||3e4;o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.batchOperationTimeout=t,yield o.saveSettings()}))}),new e.Setting(i).setName("Show Vault Statistics").setDesc("Display vault statistics in modals and interfaces").addToggle(e=>{var i,a;return e.setValue(null===(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.showVaultStats)||void 0===a||a).onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.showVaultStats=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Test Vault Management Connection").setDesc("Test connection to vault management endpoints").addButton(e=>e.setButtonText("Test Connection").setCta().onClick(()=>t(this,void 0,void 0,function*(){if(!o.vaultClient)return e.setButtonText("Not Available"),void setTimeout(()=>e.setButtonText("Test Connection"),2e3);e.setButtonText("Testing..."),e.setDisabled(!0);try{(yield o.vaultClient.testConnection()).success?e.setButtonText("✅ Connected"):e.setButtonText("❌ Failed")}catch(t){e.setButtonText("❌ Error")}e.setDisabled(!1),setTimeout(()=>e.setButtonText("Test Connection"),3e3)}))),i.createEl("h3",{text:"Advanced Vault Management"}),new e.Setting(i).setName("Maximum Search Results").setDesc("Absolute maximum number of search results to fetch from backend").addSlider(e=>{var i,a;return e.setLimits(50,500,25).setValue(null!==(a=null===(i=o.settings.vaultManagement)||void 0===i?void 0:i.maxSearchResults)&&void 0!==a?a:100).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){o.settings.vaultManagement||(o.settings.vaultManagement=Object.assign({},n)),o.settings.vaultManagement.maxSearchResults=e,yield o.saveSettings()}))}),new e.Setting(i).setName("Reset Vault Management Settings").setDesc("Reset all vault management settings to their default values").addButton(e=>e.setButtonText("Reset to Defaults").setWarning().onClick(()=>t(this,void 0,void 0,function*(){o.settings.vaultManagement=Object.assign({},n),yield o.saveSettings();const e=o.app.setting.activeTab;e&&e.display&&e.display()})))}(o,this.plugin),o.createEl("h3",{text:"Model Selection"}),new e.Setting(o).setName("Enable Model Selection").setDesc("Enable intelligent AI model selection based on task type and requirements").addToggle(e=>{var n,o;return e.setValue(null===(o=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.enabled)||void 0===o||o).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.enabled=e,yield this.plugin.saveSettings(),e?yield this.plugin.initializeModelSelection():yield this.plugin.disconnectModelSelection()}))}),new e.Setting(o).setName("DevPipe Path").setDesc("Path to the DevPipe communication directory").addText(e=>{var n,o;return e.setPlaceholder("../dev-pipe").setValue(null!==(o=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.devpipePath)&&void 0!==o?o:"../dev-pipe").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.devpipePath=e,yield this.plugin.saveSettings()}))}),new e.Setting(o).setName("Priority Mode").setDesc("How to prioritize model selection: performance, cost, or balanced").addDropdown(e=>{var n,o;return e.addOption("performance","Performance - Best quality models").addOption("cost","Cost - Most economical models").addOption("balanced","Balanced - Optimal quality/cost ratio").setValue(null!==(o=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.userPreferences.priority)&&void 0!==o?o:"balanced").onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.userPreferences.priority=e,yield this.plugin.saveSettings()}))}),new e.Setting(o).setName("Max Cost Per Request").setDesc("Maximum cost per AI request (in USD)").addSlider(e=>{var n,o;return e.setLimits(.01,2,.01).setValue(null!==(o=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.userPreferences.maxCostPerRequest)&&void 0!==o?o:.5).setDynamicTooltip().onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.userPreferences.maxCostPerRequest=e,yield this.plugin.saveSettings()}))}),new e.Setting(o).setName("Model Selection Debug").setDesc("Enable debug logging for model selection decisions").addToggle(e=>{var n,o;return e.setValue(null!==(o=null===(n=this.plugin.settings.modelSelection)||void 0===n?void 0:n.debugMode)&&void 0!==o&&o).onChange(e=>t(this,void 0,void 0,function*(){this.plugin.settings.modelSelection||(this.plugin.settings.modelSelection=i.modelSelection),this.plugin.settings.modelSelection.debugMode=e,yield this.plugin.saveSettings()}))}),o.createEl("h2",{text:"Help & Documentation"}),o.createEl("h3",{text:"Information"});o.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return t(this,void 0,void 0,function*(){var t;const n=new e.Notice("Testing connection...",0);try{let i=yield this.plugin.apiClient.healthCheck();if(!i.success&&(null===(t=i.error)||void 0===t?void 0:t.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const e=yield this.plugin.apiClient.simpleHealthCheck();e.success&&e.data&&(i={success:!0,data:{status:e.data.status,version:"unknown"}})}n.hide(),i.success?new e.Notice("✅ Connection successful!",3e3):new e.Notice(`❌ Connection failed: ${i.error}`,5e3)}catch(t){n.hide(),new e.Notice(`❌ Connection error: ${t instanceof Error?t.message:"Unknown error"}`,5e3)}})}}const a="vaultpilot-view";class s extends e.ItemView{constructor(e,t){super(e),this.plugin=t}getViewType(){return a}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return t(this,void 0,void 0,function*(){const e=this.containerEl;e.empty(),e.addClass("vaultpilot-view");const t=e.createEl("div",{cls:"vaultpilot-header"});t.createEl("h2",{text:"🤖 VaultPilot"}),t.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=e.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=e.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=e.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=e.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const e=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),t=e.createEl("div",{cls:"vaultpilot-status-item"});t.createEl("span",{text:"Backend: "});const n=t.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=e.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"🟢 Connected":"🔴 Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(e){return t(this,void 0,void 0,function*(){var t;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(t=n.error)||void 0===t?void 0:t.includes("400"))){const e=yield this.plugin.apiClient.simpleHealthCheck();e.success&&e.data&&(n={success:!0,data:{status:e.data.status,version:"unknown"}})}n.success?(e.textContent="🟢 Connected",e.className="vaultpilot-status-indicator vaultpilot-status-connected"):(e.textContent="🔴 Error",e.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(t){e.textContent="🔴 Offline",e.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const t=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});t.createEl("button",{text:"💬 Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();t.createEl("button",{text:"📊 Open Dashboard",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateFullTabView();t.createEl("button",{text:"⚙️ Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();t.createEl("button",{text:"🔍 Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();t.createEl("button",{text:"✨ Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const t=this.app.workspace.getActiveViewOfType(e.MarkdownView);t?this.plugin.getCopilotCompletion(t.editor):new e.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"🔄 Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const t=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(t=>t instanceof e.TFolder).length.toString()}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:e.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:e.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return t(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in view...");const e=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in view:",e),e.success&&e.data){let t=[];if(Array.isArray(e.data))t=e.data;else if(e.data&&"object"==typeof e.data){const n=e.data;n.agents&&Array.isArray(n.agents)?(t=n.agents,console.log("VaultPilot: Found agents array in view, using response.data.agents")):n.data&&Array.isArray(n.data)?(t=n.data,console.log("VaultPilot: Found nested data in view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof e.data,e.data)}const n=t.length,i=t.filter(e=>e.active).length,o=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});o.createEl("h4",{text:"Available Agents"});o.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${i}/${n} active`})}}catch(e){console.error("Failed to load agents in view:",e)}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const e=document.createElement("style");e.id="vaultpilot-view-styles",e.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(e)}}onClose(){return t(this,void 0,void 0,function*(){})}}const r="vaultpilot-full-tab-view";class l extends e.ItemView{constructor(e,t){super(e),this.plugin=t}getViewType(){return r}getDisplayText(){return"VaultPilot Dashboard"}getIcon(){return"layout-dashboard"}onOpen(){return t(this,void 0,void 0,function*(){const e=this.containerEl;e.empty(),e.addClass("vaultpilot-full-tab-view"),e.style.height="100%",e.style.overflow="hidden";const t=e.createEl("div",{cls:"vaultpilot-main-layout"}),n=t.createEl("div",{cls:"vaultpilot-left-sidebar"});this.createLeftSidebar(n);const i=t.createEl("div",{cls:"vaultpilot-main-content"});this.createMainContent(i);const o=t.createEl("div",{cls:"vaultpilot-right-sidebar"});this.createRightSidebar(o),this.addFullTabStyles()})}createLeftSidebar(e){const t=e.createEl("div",{cls:"vaultpilot-sidebar-header"});t.createEl("h2",{text:"🤖 VaultPilot"}),t.createEl("p",{text:"AI Assistant Dashboard",cls:"vaultpilot-subtitle"}),this.statusEl=e.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=e.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=e.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats()}createMainContent(e){const t=e.createEl("div",{cls:"vaultpilot-tab-nav"}),n=t.createEl("button",{text:"💬 Chat",cls:"vaultpilot-tab-button active"}),i=t.createEl("button",{text:"⚙️ Workflows",cls:"vaultpilot-tab-button"}),o=t.createEl("button",{text:"📊 Analytics",cls:"vaultpilot-tab-button"}),a=e.createEl("div",{cls:"vaultpilot-tab-content"});this.chatEl=a.createEl("div",{cls:"vaultpilot-chat-section active"}),this.createChatSection(this.chatEl),this.workflowEl=a.createEl("div",{cls:"vaultpilot-workflow-section"}),this.createWorkflowSection(this.workflowEl);const s=a.createEl("div",{cls:"vaultpilot-analytics-section"});this.createAnalyticsSection(s),n.onclick=()=>this.switchTab("chat",n),i.onclick=()=>this.switchTab("workflow",i),o.onclick=()=>this.switchTab("analytics",o)}createRightSidebar(e){const t=e.createEl("div",{cls:"vaultpilot-recent-files"});t.createEl("h3",{text:"Recent Files"}),this.updateRecentFiles(t);const n=e.createEl("div",{cls:"vaultpilot-agent-status"});n.createEl("h3",{text:"Agent Status"}),this.updateAgentStatus(n);const i=e.createEl("div",{cls:"vaultpilot-activity-feed"});i.createEl("h3",{text:"Activity Feed"}),this.createActivityFeed(i)}createChatSection(e){const t=e.createEl("div",{cls:"vaultpilot-chat-content"});t.createEl("div",{cls:"vaultpilot-chat-header"}).createEl("h3",{text:"AI Chat Interface"});const n=t.createEl("div",{cls:"vaultpilot-chat-history"});n.createEl("div",{text:"Welcome! Start a conversation with your AI assistant.",cls:"vaultpilot-chat-welcome"});const i=t.createEl("div",{cls:"vaultpilot-chat-input"}),o=i.createEl("textarea",{placeholder:"Type your message here...",cls:"vaultpilot-chat-textarea"}),a=i.createEl("button",{text:"Send",cls:"vaultpilot-chat-send-button"});a.onclick=()=>{const e=o.value.trim();e&&(this.sendChatMessage(e,n),o.value="")},o.onkeydown=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),a.click())}}createWorkflowSection(e){const t=e.createEl("div",{cls:"vaultpilot-workflow-content"});t.createEl("div",{cls:"vaultpilot-workflow-header"}).createEl("h3",{text:"Workflow Management"});const n=t.createEl("div",{cls:"vaultpilot-workflow-grid"});[{name:"Analyze Vault",icon:"🔍",description:"Analyze your vault structure and content"},{name:"Generate Summary",icon:"📝",description:"Create summaries of your notes"},{name:"Link Analysis",icon:"🔗",description:"Analyze note connections and relationships"},{name:"Tag Management",icon:"🏷️",description:"Organize and manage your tags"},{name:"Daily Planning",icon:"📅",description:"Plan your day based on your notes"},{name:"Knowledge Graph",icon:"🕸️",description:"Visualize your knowledge connections"},{name:"Content Search",icon:"🔎",description:"Advanced search across your vault"},{name:"Note Templates",icon:"📄",description:"Create and manage note templates"},{name:"Link Assistant",icon:"🔗",description:"Intelligent link suggestions and management"}].forEach(e=>{const t=n.createEl("div",{cls:"vaultpilot-workflow-card"});t.createEl("div",{text:e.icon,cls:"vaultpilot-workflow-icon"}),t.createEl("h4",{text:e.name}),t.createEl("p",{text:e.description});t.createEl("button",{text:"Run",cls:"vaultpilot-workflow-run-button"}).onclick=()=>this.runWorkflow(e.name)})}createAnalyticsSection(e){const t=e.createEl("div",{cls:"vaultpilot-analytics-content"});t.createEl("div",{cls:"vaultpilot-analytics-header"}).createEl("h3",{text:"Vault Analytics"});const n=t.createEl("div",{cls:"vaultpilot-charts-container"}),i=n.createEl("div",{cls:"vaultpilot-chart-card"});i.createEl("h4",{text:"File Type Distribution"}),i.createEl("div",{text:"Chart visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const o=n.createEl("div",{cls:"vaultpilot-chart-card"});o.createEl("h4",{text:"Note Creation Timeline"}),o.createEl("div",{text:"Timeline visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const a=n.createEl("div",{cls:"vaultpilot-chart-card"});a.createEl("h4",{text:"Tag Usage"}),a.createEl("div",{text:"Tag analytics coming soon...",cls:"vaultpilot-chart-placeholder"});const s=n.createEl("div",{cls:"vaultpilot-chart-card"});s.createEl("h4",{text:"Word Count Analysis"}),s.createEl("div",{text:"Word count visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const r=n.createEl("div",{cls:"vaultpilot-chart-card"});r.createEl("h4",{text:"Link Density"}),r.createEl("div",{text:"Link analysis coming soon...",cls:"vaultpilot-chart-placeholder"});const l=n.createEl("div",{cls:"vaultpilot-chart-card"});l.createEl("h4",{text:"Activity Heatmap"}),l.createEl("div",{text:"Activity heatmap coming soon...",cls:"vaultpilot-chart-placeholder"})}switchTab(e,t){var n;this.containerEl.querySelectorAll(".vaultpilot-tab-button").forEach(e=>{e.removeClass("active")}),this.containerEl.querySelectorAll(".vaultpilot-chat-section, .vaultpilot-workflow-section, .vaultpilot-analytics-section").forEach(e=>{e.removeClass("active")}),t.addClass("active"),"chat"===e?this.chatEl.addClass("active"):"workflow"===e?this.workflowEl.addClass("active"):"analytics"===e&&(null===(n=this.containerEl.querySelector(".vaultpilot-analytics-section"))||void 0===n||n.addClass("active"))}sendChatMessage(e,n){return t(this,void 0,void 0,function*(){n.createEl("div",{cls:"vaultpilot-chat-message user"}).createEl("div",{text:e});const t=n.createEl("div",{cls:"vaultpilot-chat-message assistant thinking"});t.createEl("div",{text:"Thinking..."}),n.scrollTop=n.scrollHeight;try{const i=yield this.plugin.apiClient.sendChat({message:e,context:null});if(t.remove(),i.success&&i.data){n.createEl("div",{cls:"vaultpilot-chat-message assistant"}).createEl("div",{text:i.data.response})}else{n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Could not get response from AI"})}}catch(e){t.remove();n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Connection failed"})}n.scrollTop=n.scrollHeight})}runWorkflow(n){return t(this,void 0,void 0,function*(){var t,i;new e.Notice(`Running workflow: ${n}`);try{switch(n){case"Analyze Vault":yield this.runAnalyzeVaultWorkflow();break;case"Daily Planning":yield this.plugin.planMyDay();break;case"Generate Summary":yield this.runSummaryWorkflow();break;case"Link Analysis":yield this.runLinkAnalysisWorkflow();break;case"Content Search":yield this.runContentSearchWorkflow();break;default:yield this.runGenericWorkflow(n)}}catch(o){console.error(`Error running workflow: ${n}:`,o),(null===(t=o.message)||void 0===t?void 0:t.includes("Not Found"))||(null===(i=o.message)||void 0===i?void 0:i.includes("404"))?new e.Notice(`${n} workflow requires server-side implementation. Please check server configuration.`):new e.Notice(`Error running workflow: ${n} - ${o.message}`)}})}runAnalyzeVaultWorkflow(){return t(this,void 0,void 0,function*(){var t;if(this.plugin.vaultClient)try{const t=yield this.plugin.vaultClient.getVaultStructure({include_content:!1,max_depth:3});new e.Notice(`Vault analysis complete! Found ${t.total_files} files in ${t.total_folders} folders.`)}catch(e){if(!(null===(t=e.message)||void 0===t?void 0:t.includes("Not Found")))throw e;yield this.runLocalVaultAnalysis()}else yield this.runLocalVaultAnalysis()})}runLocalVaultAnalysis(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getFiles(),n=this.app.vault.getMarkdownFiles(),i=this.app.vault.getAllLoadedFiles().filter(t=>t instanceof e.TFolder).length;new e.Notice(`Local vault analysis: ${n.length} markdown files, ${t.length} total files, ${i} folders.`)})}runSummaryWorkflow(){return t(this,void 0,void 0,function*(){try{const t=this.app.workspace.getActiveFile();if(!t)return void new e.Notice("Please open a file to summarize");const n=yield this.app.vault.read(t),i=yield this.plugin.apiClient.runWorkflow({message:"Please create a comprehensive summary of this content",context:n});if(!i.success||!i.data)throw new Error(i.error||"Summary generation failed");new e.Notice("Summary generated successfully!")}catch(e){throw new Error(`Summary workflow failed: ${e.message}`)}})}runLinkAnalysisWorkflow(){return t(this,void 0,void 0,function*(){const t=this.app.vault.getMarkdownFiles();let n=0,i=new Set;for(const e of t){const t=(yield this.app.vault.read(e)).match(/\[\[([^\]]+)\]\]/g);t&&(n+=t.length,t.forEach(e=>{const t=e.slice(2,-2);i.add(t)}))}const o=t.length-i.size;new e.Notice(`Link analysis: ${n} total links, ${i.size} linked files, ${o} orphaned files.`)})}runContentSearchWorkflow(){return t(this,void 0,void 0,function*(){this.plugin.vaultClient&&this.plugin.openSmartSearchModal?this.plugin.openSmartSearchModal("","comprehensive"):new e.Notice("Content search requires vault management features. Please enable in settings.")})}runGenericWorkflow(n){return t(this,void 0,void 0,function*(){var t,i;try{const t=yield this.plugin.apiClient.runWorkflow({message:`Execute workflow: ${n}`,context:null});if(!t.success||!t.data)throw new Error(t.error||"Workflow execution failed");new e.Notice(`${n} completed successfully!`)}catch(o){if(!(null===(t=o.message)||void 0===t?void 0:t.includes("Not Found"))&&!(null===(i=o.message)||void 0===i?void 0:i.includes("404")))throw o;new e.Notice(`${n} workflow is not yet implemented on the server. Coming soon!`)}})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const e=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),t=e.createEl("div",{cls:"vaultpilot-status-item"});t.createEl("span",{text:"Backend: "});const n=t.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=e.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"🟢 Connected":"🔴 Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(e){return t(this,void 0,void 0,function*(){var t;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(t=n.error)||void 0===t?void 0:t.includes("400"))){const e=yield this.plugin.apiClient.simpleHealthCheck();e.success&&e.data&&(n={success:!0,data:{status:e.data.status,version:"unknown"}})}n.success?(e.textContent="🟢 Connected",e.className="vaultpilot-status-indicator vaultpilot-status-connected"):(e.textContent="🔴 Error",e.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(t){e.textContent="🔴 Offline",e.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"🔄 Refresh",cls:"vaultpilot-action-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()};e.createEl("button",{text:"📋 Sidebar View",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateView();e.createEl("button",{text:"💬 Modal Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"⚙️ Workflows",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal()}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const t=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(t=>t instanceof e.TFolder).length.toString()}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:e.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:e.label,cls:"vaultpilot-stat-label"})})}updateRecentFiles(e){this.app.vault.getMarkdownFiles().sort((e,t)=>t.stat.mtime-e.stat.mtime).slice(0,5).forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-recent-file"});n.createEl("span",{text:t.basename}),n.onclick=()=>{this.app.workspace.openLinkText(t.path,"",!1)}})}updateAgentStatus(e){this.loadAgentInfo(e)}loadAgentInfo(e){return t(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents in full-tab-view...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response in full-tab-view:",t),t.success&&t.data&&e){let n=[];if(Array.isArray(t.data))n=t.data;else if(t.data&&"object"==typeof t.data){const e=t.data;e.agents&&Array.isArray(e.agents)?(n=e.agents,console.log("VaultPilot: Found agents array in full-tab-view, using response.data.agents")):e.data&&Array.isArray(e.data)?(n=e.data,console.log("VaultPilot: Found nested data in full-tab-view, using response.data.data")):console.warn("VaultPilot: Unexpected response format:",typeof t.data,t.data)}const i=n.length,o=n.filter(e=>e.active).length,a=e.createEl("div",{cls:"vaultpilot-agent-info"});a.createEl("div",{text:`${o}/${i} active`}),n.forEach(e=>{const t=a.createEl("div",{cls:"vaultpilot-agent-item"});t.createEl("span",{text:e.name}),t.createEl("span",{text:e.active?"🟢":"🔴",cls:"vaultpilot-agent-status"})})}}catch(e){console.error("Failed to load agents in full tab view:",e)}})}createActivityFeed(e){[{time:"Just now",activity:"VaultPilot started"},{time:"5 min ago",activity:"Connection established"},{time:"1 hour ago",activity:"Last vault analysis"}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-activity-item"});n.createEl("div",{text:t.activity}),n.createEl("div",{text:t.time,cls:"vaultpilot-activity-time"})})}addFullTabStyles(){if(!document.getElementById("vaultpilot-full-tab-styles")){const e=document.createElement("style");e.id="vaultpilot-full-tab-styles",e.textContent='\n        /* Ensure the full tab view fills available space */\n        .workspace-leaf-content[data-type="vaultpilot-full-tab-view"] {\n          height: 100%;\n        }\n        .vaultpilot-full-tab-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-main-layout {\n          display: flex;\n          flex: 1;\n          gap: 1px;\n          background: var(--background-modifier-border);\n          min-height: 0;\n        }\n        .vaultpilot-left-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-main-content {\n          flex: 1;\n          background: var(--background-primary);\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n        }\n        .vaultpilot-right-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-sidebar-header {\n          text-align: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-nav {\n          display: flex;\n          background: var(--background-secondary);\n          border-bottom: 1px solid var(--background-modifier-border);\n          flex-shrink: 0;\n        }\n        .vaultpilot-tab-button {\n          flex: 1;\n          padding: 12px 16px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .vaultpilot-tab-button:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-tab-button.active {\n          background: var(--background-primary);\n          color: var(--text-normal);\n          border-bottom: 2px solid var(--interactive-accent);\n        }\n        .vaultpilot-tab-content {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          min-height: 0;\n          height: 100%;\n        }\n        /* Sections just flex-grow and hold their children */\n        .vaultpilot-chat-section,\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          display: none;           /* hidden by default */\n          flex: 1 1 0;             /* flex-grow, flex-shrink, base 0 */\n          flex-direction: column;\n          min-height: 0;           /* allow children to shrink/scroll */\n        }\n\n        /* Active section shows and flexes */\n        .vaultpilot-chat-section.active,\n        .vaultpilot-workflow-section.active,\n        .vaultpilot-analytics-section.active {\n          display: flex;           /* show & flex when active */\n        }\n\n        /* Content panels handle the scrolling */\n        .vaultpilot-chat-content,\n        .vaultpilot-workflow-content,\n        .vaultpilot-analytics-content {\n          flex: 1 1 0;             /* fill remaining space */\n          min-height: 0;           /* critical to allow overflow */\n          overflow-y: auto;        /* now *this* container scrolls */\n          padding: 16px;\n        }\n\n        /* keep special chat gaps */\n        .vaultpilot-chat-content {\n          display: flex;\n          flex-direction: column;\n          gap: 16px;\n        }\n        .vaultpilot-chat-history {\n          flex: 1;\n          overflow-y: auto;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          background: var(--background-secondary);\n          min-height: 0;\n        }\n        .vaultpilot-chat-input {\n          display: flex;\n          gap: 8px;\n        }\n        .vaultpilot-chat-textarea {\n          flex: 1;\n          min-height: 60px;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-chat-send-button {\n          padding: 8px 16px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          height: fit-content;\n          align-self: flex-end;\n        }\n        .vaultpilot-chat-message {\n          margin-bottom: 12px;\n          padding: 8px 12px;\n          border-radius: 8px;\n          max-width: 80%;\n        }\n        .vaultpilot-chat-message.user {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          margin-left: auto;\n        }\n        .vaultpilot-chat-message.assistant {\n          background: var(--background-primary);\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-message.thinking {\n          opacity: 0.7;\n          font-style: italic;\n        }\n        .vaultpilot-chat-message.error {\n          background: var(--background-modifier-error);\n          color: var(--text-error);\n        }\n        .vaultpilot-chat-header,\n        .vaultpilot-workflow-header,\n        .vaultpilot-analytics-header {\n          margin-bottom: 16px;\n          padding-bottom: 8px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-header h3,\n        .vaultpilot-workflow-header h3,\n        .vaultpilot-analytics-header h3 {\n          margin: 0;\n          color: var(--text-normal);\n        }\n        .vaultpilot-workflow-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-workflow-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          text-align: center;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-workflow-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-workflow-icon {\n          font-size: 32px;\n          margin-bottom: 8px;\n        }\n        .vaultpilot-workflow-run-button {\n          margin-top: 8px;\n          padding: 6px 12px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .vaultpilot-charts-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n          align-content: start;\n          padding: 0;\n          margin: 0;\n          width: 100%;\n        }\n        .vaultpilot-chart-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          transition: all 0.2s ease;\n        }\n        .vaultpilot-chart-card:hover {\n          border-color: var(--interactive-accent);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        }\n        .vaultpilot-chart-placeholder {\n          text-align: center;\n          color: var(--text-muted);\n          font-style: italic;\n          padding: 20px;\n        }\n        .vaultpilot-recent-file {\n          padding: 4px 8px;\n          margin-bottom: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-recent-file:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-agent-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px 0;\n        }\n        .vaultpilot-activity-item {\n          margin-bottom: 8px;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-activity-time {\n          font-size: 11px;\n          color: var(--text-muted);\n          margin-top: 2px;\n        }\n        /* Inherit styles from original view */\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3 {\n          margin-bottom: 12px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 4px;\n          font-size: 14px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n          font-size: 11px;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-action-button {\n          padding: 8px 6px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 11px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 8px;\n          background: var(--background-secondary);\n          border-radius: 4px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 2px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 10px;\n          color: var(--text-muted);\n        }\n      ',document.head.appendChild(e)}}onClose(){return t(this,void 0,void 0,function*(){})}}let c;function d(){return t(this,void 0,void 0,function*(){const e=c.workspace.getActiveFile();if(!e)return null;return(yield c.vault.read(e)).slice(0,8e3)})}class u extends e.Modal{constructor(e,t){super(e),this.currentConversationId=null,this.messages=[],this.plugin=t}onOpen(){const{contentEl:e}=this;e.empty(),e.addClass("vaultpilot-chat-modal");const t=e.createEl("div",{cls:"vaultpilot-chat-header"});t.createEl("h2",{text:"🤖 VaultPilot Chat"});const n=t.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"⚡ Automatic mode detection enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const i=n.createEl("select",{cls:"vaultpilot-agent-select"});i.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(i),this.chatContainer=e.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(e){return t(this,void 0,void 0,function*(){try{console.log("VaultPilot: Loading agents...");const t=yield this.plugin.apiClient.getAgents();if(console.log("VaultPilot: getAgents response:",t),t.success&&t.data){console.log("VaultPilot: response.data type:",typeof t.data),console.log("VaultPilot: response.data content:",t.data);let n=[];if(Array.isArray(t.data))n=t.data;else if(t.data&&"object"==typeof t.data){const e=t.data;e.agents&&Array.isArray(e.agents)?n=e.agents:e.data&&Array.isArray(e.data)&&(n=e.data)}if(n.length>0)console.log("VaultPilot: Found",n.length,"agents"),n.forEach(t=>{e.createEl("option",{text:t.name,value:t.id})});else{console.log("VaultPilot: No agents found in response");e.createEl("option",{text:"No agents available",value:""}).disabled=!0}}else console.error("Failed to load agents: API returned error or no data:",t)}catch(e){console.error("Failed to load agents:",e)}})}loadConversationHistory(){return t(this,void 0,void 0,function*(){if(this.currentConversationId)try{const e=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);e.success&&e.data&&(this.messages=e.data.messages,this.renderMessages())}catch(e){console.error("Failed to load conversation history:",e)}})}sendMessage(){return t(this,void 0,void 0,function*(){const t=this.inputEl.value.trim();if(t){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",t),this.inputEl.value="";try{const[n,i]=yield Promise.all([d(),this.plugin.apiClient.classifyIntent(t)]),o={message:t,context:n};let a;this.plugin.settings.showIntentDebug&&this.showIntentDebug(i.intent),"agent"===i.intent?(a=yield this.plugin.apiClient.runWorkflow(o),a.success&&a.data?this.addMessage("assistant",`⚙️ Agent Mode (auto-detected)\n\n${a.data.result}`):this.addMessage("assistant",`Error in agent mode: ${a.error||"Failed to get response"}`)):(a=yield this.plugin.apiClient.sendChat(o,{conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent()}),a.success&&a.data?(this.currentConversationId=a.data.conversation_id,this.addMessage("assistant",a.data.response)):this.addMessage("assistant",`Error: ${a.error||"Failed to get response"}`)),(null==n?void 0:n.length)||new e.Notice("⚠️ No vault content was sent; replies may be generic."),a.success||new e.Notice(`Chat error: ${a.error}`)}catch(t){const n=t instanceof Error?t.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new e.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const e=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==e?void 0:e.value)||void 0}addMessage(e,t){const n={role:e,content:t,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(e=>this.renderMessage(e)),this.scrollToBottom()}renderMessage(e){const t=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${e.role}`});t.createEl("div",{cls:"vaultpilot-message-role",text:"user"===e.role?"You":"VaultPilot"});t.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(e.content),e.timestamp&&t.createEl("div",{cls:"vaultpilot-message-time",text:new Date(e.timestamp).toLocaleTimeString()})}renderMarkdown(e){return e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new e.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const e=document.createElement("style");e.id="vaultpilot-chat-styles",e.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(e)}}showIntentDebug(e){const t=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"🔍 Intent detected: "+("agent"===e?"⚙️ Agent Mode":"💬 Ask Mode")});setTimeout(()=>{t.remove()},3e3)}onClose(){const{contentEl:e}=this;e.empty()}}class h extends e.Modal{constructor(e,t){super(e),this.isExecuting=!1,this.plugin=t}onOpen(){const{contentEl:e}=this;e.empty(),e.addClass("vaultpilot-workflow-modal");const t=e.createEl("div",{cls:"vaultpilot-workflow-header"});t.createEl("h2",{text:"⚙️ Workflow Execution"}),t.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=e.createEl("div",{cls:"vaultpilot-workflow-form"}),i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=i.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=o.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=a.createEl("label",{cls:"vaultpilot-checkbox-label"}),r=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const l=a.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=l.createEl("input",{type:"checkbox"});l.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(r.checked,c.checked),this.progressContainer=e.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=e.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,i){return t(this,void 0,void 0,function*(){const t=this.goalInput.value.trim();if(t){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let e="";if(n){const t=this.app.workspace.getActiveFile();if(t){const n=yield this.app.vault.read(t);e+=`=== ${t.name} ===\n${n}\n\n`}}if(i){const t=this.app.vault.getMarkdownFiles();for(const n of t.slice(0,20)){const t=yield this.app.vault.read(n);e+=`=== ${n.name} ===\n${t}\n\n`}}const o={goal:t,context:this.contextInput.value.trim()||void 0,vault_content:e||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const a=yield this.plugin.apiClient.executeWorkflow(o);if(!a.success||!a.data)throw new Error(a.error||"Workflow execution failed");yield this.displayResults(a.data)}catch(t){const n=t instanceof Error?t.message:"Unknown error";new e.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new e.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(e){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${e}</span>\n      </div>\n    `}displayResults(e){return t(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const t=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});t.createEl("h3",{text:"✅ Workflow Completed"}),t.createEl("p",{text:`Execution time: ${e.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(e.result),e.steps_taken&&e.steps_taken.length>0){const t=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});t.createEl("h4",{text:"Steps Taken"});const n=t.createEl("ol",{cls:"vaultpilot-steps-list"});e.steps_taken.forEach(e=>{n.createEl("li",{text:e})})}if(e.artifacts&&e.artifacts.length>0){const t=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});t.createEl("h4",{text:"Generated Artifacts"}),e.artifacts.forEach((e,n)=>{const i=t.createEl("div",{cls:"vaultpilot-artifact"});i.createEl("h5",{text:e.title}),i.createEl("p",{text:`Type: ${e.type}`,cls:"vaultpilot-artifact-type"});i.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(e,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(e)})}saveArtifactAsNote(n,i){return t(this,void 0,void 0,function*(){try{const t=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,i=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(t,i),new e.Notice(`Artifact saved as ${t}`)}catch(t){new e.Notice(`Failed to save artifact: ${t instanceof Error?t.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return t(this,void 0,void 0,function*(){try{const t=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let i="# VaultPilot Workflow Results\n\n";i+=`**Goal:** ${this.goalInput.value}\n\n`,i+=`**Execution Time:** ${n.execution_time}s\n\n`,i+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(i+="## Steps Taken\n\n",n.steps_taken.forEach((e,t)=>{i+=`${t+1}. ${e}\n`}),i+="\n"),n.artifacts&&n.artifacts.length>0&&(i+="## Generated Artifacts\n\n",n.artifacts.forEach(e=>{i+=`### ${e.title}\n\n${e.content}\n\n`})),yield this.app.vault.create(t,i),new e.Notice(`Complete results saved as ${t}`)}catch(t){new e.Notice(`Failed to save results: ${t instanceof Error?t.message:"Unknown error"}`)}})}displayError(e){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>❌ Workflow Failed</h3>\n        <p>${e}</p>\n      </div>\n    `}renderMarkdown(e){return e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const e=document.createElement("style");e.id="vaultpilot-workflow-styles",e.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(e)}}onClose(){const{contentEl:e}=this;e.empty()}}class p{constructor(e,t){this.wsCallbacks=new Map,this.baseUrl=e.replace(/\/$/,""),this.apiKey=t}makeRequest(e){return t(this,arguments,void 0,function*(e,t={}){const n=`${this.baseUrl}${e}`,i=Object.assign({"Content-Type":"application/json",Accept:"application/json"},t.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);try{const e=yield fetch(n,Object.assign(Object.assign({},t),{headers:i,mode:"cors",credentials:"omit"}));let o;const a=e.headers.get("content-type");if(o=a&&a.includes("application/json")?yield e.json():yield e.text(),!e.ok){const t="object"==typeof o&&o.error?o.error:`HTTP ${e.status}: ${e.statusText}`;return console.error(`API Error [${e.status}]:`,t),{success:!1,error:t}}return{success:!0,data:"string"==typeof o?{message:o}:o}}catch(e){return console.error("API Request Error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}})}healthCheck(){return t(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/status`);const e=yield this.makeRequest("/status",{method:"GET"});return console.log("VaultPilot: Health check result:",e),e})}simpleHealthCheck(){return t(this,void 0,void 0,function*(){try{const e=`${this.baseUrl}/status`,t=yield fetch(e,{method:"HEAD",mode:"cors",credentials:"omit"});return t.ok||405===t.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${t.status}`}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Connection failed"}}})}chat(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(e)})})}getConversationHistory(e){return t(this,arguments,void 0,function*(e,t=50){const n={conversation_id:e,limit:t,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(e){return t(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${e}`,{method:"DELETE"})})}getCopilotCompletion(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(e)})})}executeWorkflow(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(e)})})}runWorkflow(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:e.message,context:e.context||void 0})})})}sendChat(e,n){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:e.message,vault_context:e.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}getAgents(){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(e)})})}executeAgent(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(e)})})}analyzeVaultContext(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(e)})})}planTasks(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(e)})})}parseIntelligence(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(e)})})}classifyIntent(e){return t(this,void 0,void 0,function*(){const t=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:e})});return t.success&&t.data?t.data:{intent:"ask",confidence:.5}})}explainIntent(e){return t(this,void 0,void 0,function*(){const t=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:e,include_debug:!0})});return t.success&&t.data?t.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(e){return t(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(e)})})}connectWebSocket(e){const t=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${t}`),this.websocket=new WebSocket(t),this.websocket.onopen=()=>{var t;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(t=e.onConnect)||void 0===t||t.call(e)},this.websocket.onmessage=t=>{var n,i,o,a,s,r,l;try{const l=JSON.parse(t.data);switch(console.log("VaultPilot: WebSocket message received:",l.type),l.type){case"chat":null===(n=e.onChat)||void 0===n||n.call(e,l.data);break;case"workflow_progress":null===(i=e.onWorkflowProgress)||void 0===i||i.call(e,l.data);break;case"copilot":null===(o=e.onCopilot)||void 0===o||o.call(e,l.data);break;case"vault_sync":null===(a=e.onVaultSync)||void 0===a||a.call(e,l.data);break;case"intent_debug":null===(s=e.onIntentDebug)||void 0===s||s.call(e,l.data);break;case"error":null===(r=e.onError)||void 0===r||r.call(e,l.data)}}catch(t){console.error("VaultPilot: Error parsing WebSocket message:",t),null===(l=e.onError)||void 0===l||l.call(e,"Failed to parse WebSocket message")}},this.websocket.onclose=t=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",t.code,t.reason),null===(n=e.onDisconnect)||void 0===n||n.call(e)},this.websocket.onerror=t=>{var n;console.error("VaultPilot: WebSocket error:",t),null===(n=e.onError)||void 0===n||n.call(e,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(e,t){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:e,data:t}))}isWebSocketConnected(){var e;return(null===(e=this.websocket)||void 0===e?void 0:e.readyState)===WebSocket.OPEN}}function g(e){return e.match(/(<!-- vp:plan:start -->)([\s\S]*?)(<!-- vp:plan:end -->)/i)}function m(e){let t=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im,n=e.match(t);return n||(t=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,e.match(t))}class v{constructor(){this.logs=[],this.maxLogs=100}static getInstance(){return v.instance||(v.instance=new v),v.instance}log(e,t){const n=`[${(new Date).toISOString()}] ${e}${t?` | ${JSON.stringify(t)}`:""}`;console.log(n),this.logs.push(n),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}error(e,t){const n=(new Date).toISOString(),i=t instanceof Error?{message:t.message,stack:t.stack,name:t.name}:t,o=`[${n}] ERROR: ${e}${i?` | ${JSON.stringify(i)}`:""}`;console.error(o),this.logs.push(o),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs))}getLogs(){return[...this.logs]}clearLogs(){this.logs=[]}exportLogs(){return this.logs.join("\n")}analyzeApiClient(e){return e?{status:"available",available:!0,type:typeof e,methods:Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(t=>"function"==typeof e[t]),hasPlanTasks:"function"==typeof e.planTasks,hasHealthCheck:"function"==typeof e.healthCheck}:{status:"null",available:!1}}testConnection(e){return t(this,void 0,void 0,function*(){try{if(this.log("🔗 Testing EvoAgentX connection..."),!e)throw new Error("API client is null or undefined");if(!e.healthCheck)throw new Error("API client does not have healthCheck method");const t=yield e.healthCheck();return this.log("✅ Connection test successful",t),{success:!0,result:t}}catch(e){return this.error("❌ Connection test failed",e),{success:!1,error:e instanceof Error?e.message:String(e)}}})}testTaskPlanning(e){return t(this,arguments,void 0,function*(e,t="Test note for schedule generation"){var n,i,o,a;try{if(this.log("📋 Testing task planning..."),!e)throw new Error("API client is null or undefined");if(!e.planTasks)throw new Error("API client does not have planTasks method");const s=yield e.planTasks({goal:"Create a test schedule",context:t,timeframe:"1 day"});return this.log("✅ Task planning test successful",{success:s.success,hasData:!!s.data,hasPlan:!!(null===(n=s.data)||void 0===n?void 0:n.plan),taskCount:(null===(a=null===(o=null===(i=s.data)||void 0===i?void 0:i.plan)||void 0===o?void 0:o.tasks)||void 0===a?void 0:a.length)||0}),{success:!0,result:s}}catch(e){return this.error("❌ Task planning test failed",e),{success:!1,error:e instanceof Error?e.message:String(e)}}})}}const f=v.getInstance();class y extends Error{constructor(e,t,n){super(e),this.name="VaultManagementError",this.code=t,this.feature=n}}class b{constructor(e,t){this.baseUrl=e,this.apiKey=t}getVaultStructure(e){return t(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify(e)});if(404===t.status)return{vault_name:"Vault",total_files:0,total_folders:0,total_size:0,structure:{name:"vault",type:"folder",path:"/",children:[]},recent_files:[],orphaned_files:[]};if(!t.ok)throw new y(`Failed to get vault structure: ${t.statusText}`,"STRUCTURE_FETCH_FAILED","structure");return yield t.json()}catch(e){if(e instanceof y)throw e;throw this.handleVaultManagementError(e,"structure"),e}})}performFileOperation(e){return t(this,void 0,void 0,function*(){try{this.validateFileOperationRequest(e);const t=yield this.makeRequest("/api/obsidian/vault/file/operation",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new y(`File operation failed: ${t.statusText}`,"FILE_OPERATION_FAILED","file-operations");const n=yield t.json();if(!n.success)throw new y(n.message||"File operation failed","FILE_OPERATION_FAILED","file-operations");return n}catch(e){throw this.handleVaultManagementError(e,"file-operations"),e}})}performBatchOperations(e){return t(this,void 0,void 0,function*(){try{if(!e.operations||0===e.operations.length)throw new y("No operations specified for batch request","INVALID_BATCH_REQUEST","batch-operations");e.operations.forEach((e,t)=>{try{this.validateFileOperationRequest(e)}catch(e){throw new y(`Invalid operation at index ${t}: ${e.message||e}`,"INVALID_BATCH_OPERATION","batch-operations")}});const t=yield this.makeRequest("/api/obsidian/vault/file/batch",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new y(`Batch operations failed: ${t.statusText}`,"BATCH_OPERATION_FAILED","batch-operations");const n=yield t.json();if(!n.success)throw new y(n.message||"Batch operations failed","BATCH_OPERATION_FAILED","batch-operations");return n}catch(e){throw this.handleVaultManagementError(e,"batch-operations"),e}})}searchVault(e){return t(this,void 0,void 0,function*(){try{if(!e.query||0===e.query.trim().length)throw new y("Search query cannot be empty","INVALID_SEARCH_QUERY","search");const t=yield this.makeRequest("/api/obsidian/vault/search",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new y(`Search failed: ${t.statusText}`,"SEARCH_FAILED","search");return yield t.json()}catch(e){throw this.handleVaultManagementError(e,"search"),e}})}organizeVault(e){return t(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/organize",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new y(`Organization analysis failed: ${t.statusText}`,"ORGANIZATION_FAILED","organization");return yield t.json()}catch(e){throw this.handleVaultManagementError(e,"organization"),e}})}backupVault(e){return t(this,void 0,void 0,function*(){try{const t=yield this.makeRequest("/api/obsidian/vault/backup",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new y(`Backup failed: ${t.statusText}`,"BACKUP_FAILED","backup");return yield t.json()}catch(e){throw this.handleVaultManagementError(e,"backup"),e}})}createFile(e,n){return t(this,arguments,void 0,function*(e,t,n=!1){return this.performFileOperation({operation:"create",file_path:e,content:t,backup:n})})}updateFile(e,n){return t(this,arguments,void 0,function*(e,t,n=!0){return this.performFileOperation({operation:"update",file_path:e,content:t,backup:n})})}deleteFile(e){return t(this,arguments,void 0,function*(e,t=!0){return this.performFileOperation({operation:"delete",file_path:e,backup:t})})}moveFile(e,n){return t(this,arguments,void 0,function*(e,t,n=!0){return this.performFileOperation({operation:"move",file_path:e,new_path:t,backup:n})})}copyFile(e,n){return t(this,void 0,void 0,function*(){return this.performFileOperation({operation:"copy",file_path:e,new_path:n})})}quickSearch(e){return t(this,arguments,void 0,function*(e,t=20){return this.searchVault({query:e,search_type:"comprehensive",max_results:t,include_content:!0})})}makeRequest(e){return t(this,arguments,void 0,function*(e,t={}){const n=`${this.baseUrl.replace(/\/$/,"")}${e}`,i=Object.assign({"Content-Type":"application/json"},t.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);const o=Object.assign(Object.assign({},t),{headers:i});try{return yield fetch(n,o)}catch(e){throw new y(`Network request failed: ${e.message||e}`,"NETWORK_ERROR","api")}})}validateFileOperationRequest(e){if(!e.file_path||0===e.file_path.trim().length)throw new y("File path is required","INVALID_FILE_PATH","validation");if(!("move"!==e.operation&&"copy"!==e.operation||e.new_path&&0!==e.new_path.trim().length))throw new y("New path is required for move/copy operations","INVALID_NEW_PATH","validation");if(("create"===e.operation||"update"===e.operation)&&void 0===e.content)throw new y("Content is required for create/update operations","INVALID_CONTENT","validation")}handleVaultManagementError(t,n){console.error(`Vault management error in ${n}:`,t),t instanceof y?new e.Notice(`Vault ${n} error: ${t.message}`,5e3):new e.Notice(`Vault ${n} operation failed`,3e3)}testConnection(){return t(this,void 0,void 0,function*(){try{const e=yield this.makeRequest("/api/obsidian/vault/structure",{method:"POST",body:JSON.stringify({include_content:!1,max_depth:1})});return e.ok?{success:!0,message:"Vault management connection successful"}:{success:!1,message:`Connection failed: ${e.status} ${e.statusText}`}}catch(e){return{success:!1,message:`Connection error: ${e.message||e}`}}})}}class w{static detect(){const e={platform:"unknown",hasFileSystem:!1,hasWebSocket:!1,hasHTTP:!1,capabilities:[]};return"undefined"!=typeof window&&window.app&&window.app.workspace?e.platform="obsidian":"undefined"!=typeof window?e.platform="browser":void 0!==globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node&&(e.platform="node"),e.hasHTTP="undefined"!=typeof fetch,e.hasWebSocket="undefined"!=typeof WebSocket,e.hasFileSystem=void 0!==globalThis.require&&"node"===e.platform,e.hasHTTP&&e.capabilities.push("http"),e.hasWebSocket&&e.capabilities.push("websocket"),e.hasFileSystem&&e.capabilities.push("filesystem"),e}static isObsidian(){return"obsidian"===this.detect().platform}static canUseFileSystem(){return this.detect().hasFileSystem}static canUseWebSocket(){return this.detect().hasWebSocket}static getOptimalTransport(){const e=this.detect();if(e.hasWebSocket)return"websocket";if(e.hasHTTP)return"http";if(e.hasFileSystem)return"filesystem";throw new Error("No suitable transport available")}}class C{constructor(e){this.isConnected=!1,this.messageId=1,this.pendingRequests=new Map,this.eventListeners=new Map,this.config=e,this.environment=w.detect(),this.serverUrl=e.server_url,this.config.debug_mode&&console.log("DevPipe Environment:",this.environment)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(e=>e(t))}initialize(){return t(this,void 0,void 0,function*(){try{if(!this.environment.hasHTTP)throw new Error("HTTP transport not available in this environment");yield this.testConnection(),this.isConnected=!0,this.emit("connected",{status:"connected",environment:this.environment.platform,transport:"http"}),this.config.debug_mode&&console.log("DevPipe client initialized successfully")}catch(e){throw this.emit("error",e),new Error(`Failed to initialize DevPipe client: ${e instanceof Error?e.message:"Unknown error"}`)}})}testConnection(){return t(this,void 0,void 0,function*(){try{const e=yield fetch(`${this.serverUrl}/api/v1/devpipe/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error(`DevPipe server not accessible: ${e.status} ${e.statusText}`)}catch(e){if(e instanceof Error&&"TypeError"===e.name&&e.message.includes("Failed to fetch"))try{if((yield fetch(`${this.serverUrl}/status`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(3e3)})).ok)return void console.warn("DevPipe endpoint not available, but backend is accessible")}catch(t){throw new Error(`DevPipe server not accessible and fallback failed: ${e.message}`)}throw e}})}sendMessage(e,n){return t(this,arguments,void 0,function*(e,t,n=3e4){if(!this.isConnected)throw new Error("DevPipe client not connected");const i=this.generateMessageId(),o={id:i,timestamp:(new Date).toISOString(),type:e,payload:t,sender:"vaultpilot-plugin",recipient:"evoagentx-backend",priority:"normal"};return new Promise((e,t)=>{const a=window.setTimeout(()=>{this.pendingRequests.delete(i),t(new Error(`Request timeout after ${n}ms`))},n);this.pendingRequests.set(i,{resolve:e,reject:t,timeout:a}),this.sendMessageToServer(o).catch(e=>{this.pendingRequests.delete(i),window.clearTimeout(a),t(e)})})})}sendMessageToServer(e){return t(this,void 0,void 0,function*(){try{const t=yield fetch(`${this.serverUrl}/api/v1/devpipe/message`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`DevPipe server error: ${t.status}`);const n=yield t.json();if(n.response&&n.response.id===e.id){const t=this.pendingRequests.get(e.id);t&&(window.clearTimeout(t.timeout),this.pendingRequests.delete(e.id),t.resolve(n.response.payload))}return this.config.debug_mode&&console.log("DevPipe message sent successfully:",e.type),n}catch(e){throw this.config.debug_mode&&console.error("Error sending DevPipe message:",e),e}})}generateMessageId(){return`msg_${Date.now()}_${this.messageId++}`}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.pendingRequests.entries());for(const[t,n]of e)window.clearTimeout(n.timeout),n.reject(new Error("DevPipe client disconnected"));this.pendingRequests.clear(),this.isConnected=!1,this.emit("disconnected",{status:"disconnected"})})}isReady(){return this.isConnected}getPendingRequestCount(){return this.pendingRequests.size}}class k extends Error{constructor(e,t,n,i){super(t),this.name="ModelSelectionError",this.code=e,this.details=n,this.suggestions=i}}class S{constructor(e,t="",n={}){this.cachedHealth=[],this.lastHealthUpdate=0,this.eventListeners=new Map,this.config={devpipe_path:t,server_url:e,monitoring_interval:n.monitoring_interval||3e4,fallback_enabled:!1!==n.fallback_enabled,cache_duration:n.cache_duration||3e5,retry_attempts:n.retry_attempts||3,timeout:n.timeout||3e4,debug_mode:n.debug_mode||!1},this.devPipeClient=new C(this.config),this.userPreferences={priority:"balanced",max_cost_per_request:.5,preferred_providers:[],fallback_enabled:!0,quality_threshold:.7,timeout_preference:3e4},this.setupEventListeners()}setupEventListeners(){this.devPipeClient.on("connected",()=>{this.emit("connected",{status:"connected"})}),this.devPipeClient.on("disconnected",()=>{this.emit("disconnected",{status:"disconnected"})}),this.devPipeClient.on("health-updated",e=>{this.cachedHealth=e,this.lastHealthUpdate=Date.now(),this.emit("health-updated",e)}),this.devPipeClient.on("performance-metrics",e=>{this.emit("performance-metrics",e)})}initialize(){return t(this,void 0,void 0,function*(){try{yield this.devPipeClient.initialize(),yield this.refreshModelHealth(),this.startHealthMonitoring(),this.config.debug_mode&&console.log("ModelSelectionService initialized successfully")}catch(e){throw new Error(`Failed to initialize ModelSelectionService: ${e instanceof Error?e.message:"Unknown error"}`)}})}selectModel(e){return t(this,void 0,void 0,function*(){try{return yield this.performSelection(e)}catch(t){if(this.config.fallback_enabled)return yield this.fallbackSelection(e,t);throw t}})}performSelection(e){return t(this,void 0,void 0,function*(){if(!this.devPipeClient.isReady())throw new k("NO_HEALTHY_MODELS","DevPipe client not connected",{},["Check server connection","Retry initialization"]);const t=Object.assign(Object.assign({},e),{user_preferences:this.userPreferences,timeout_ms:e.timeout_ms||this.config.timeout});return yield this.devPipeClient.sendMessage("model-selection-request",t,this.config.timeout)})}fallbackSelection(e,n){return t(this,void 0,void 0,function*(){console.warn("Model selection failed, using fallback:",n);const t=this.getCachedSelection(e);return t||this.staticModelSelection(e)})}staticModelSelection(e){const t={"text-generation":{name:"gpt-3.5-turbo",cost:.002},"code-generation":{name:"gpt-4",cost:.03},chat:{name:"gpt-3.5-turbo",cost:.002},summarization:{name:"gpt-3.5-turbo",cost:.002},translation:{name:"gpt-3.5-turbo",cost:.002}},n=t[e.task_type]||t["text-generation"];return{selected_model:{id:n.name,name:n.name,provider:"openai",capabilities:[{type:e.task_type,score:.8}],cost_per_token:n.cost,max_tokens:4e3,response_time_avg_ms:2e3,availability_score:.9,quality_score:.8},reasoning:"Fallback selection due to service unavailability",fallback_models:[],estimated_cost:100*n.cost,estimated_time_ms:2e3,selection_metadata:{selection_time_ms:0,factors_considered:["fallback"],confidence_score:.5}}}getCachedSelection(e){return null}selectModel_OLD(e){return t(this,void 0,void 0,function*(){if(!this.devPipeClient.isReady())throw new k("NO_HEALTHY_MODELS","DevPipe client not connected",{},["Check server connection","Retry initialization"]);try{const t=Object.assign(Object.assign({},e),{user_preferences:this.userPreferences,timeout_ms:e.timeout_ms||this.config.timeout}),n=yield this.devPipeClient.sendMessage("model-selection-request",t,e.timeout_ms||this.config.timeout);return this.emit("model-selected",n),this.config.debug_mode&&console.log("Model selected:",n.selected_model.name,"for task:",e.task_type),n}catch(e){if(e instanceof Error){if(e.message.includes("timeout"))throw new k("TIMEOUT","Model selection request timed out",{originalError:e},["Increase timeout","Check server performance"]);if(e.message.includes("budget")||e.message.includes("cost"))throw new k("BUDGET_EXCEEDED","Request exceeds budget limits",{originalError:e},["Increase budget","Use lower cost models"])}throw new k("SERVICE_UNAVAILABLE","Model selection service unavailable",{originalError:e},["Check server status","Retry request"])}})}getModelHealth(){return t(this,void 0,void 0,function*(){return this.cachedHealth.length>0&&Date.now()-this.lastHealthUpdate<this.config.cache_duration?this.cachedHealth:yield this.refreshModelHealth()})}refreshModelHealth(){return t(this,void 0,void 0,function*(){try{const e=yield this.devPipeClient.sendMessage("health-check-request",{},1e4);return this.cachedHealth=e,this.lastHealthUpdate=Date.now(),e}catch(e){return this.config.debug_mode&&console.warn("Failed to refresh model health:",e),this.cachedHealth}})}updatePreferences(e){return t(this,void 0,void 0,function*(){this.userPreferences=Object.assign(Object.assign({},this.userPreferences),e);try{yield this.devPipeClient.sendMessage("preferences-update",this.userPreferences,5e3),this.emit("preferences-updated",this.userPreferences),this.config.debug_mode&&console.log("User preferences updated:",this.userPreferences)}catch(e){this.config.debug_mode&&console.warn("Failed to sync preferences with server:",e)}})}getPreferences(){return Object.assign({},this.userPreferences)}startHealthMonitoring(){this.config.monitoring_interval>0&&setInterval(()=>t(this,void 0,void 0,function*(){try{yield this.refreshModelHealth()}catch(e){this.config.debug_mode&&console.warn("Health monitoring failed:",e)}}),this.config.monitoring_interval)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(e=>{try{e(t)}catch(e){this.config.debug_mode&&console.error("Event listener error:",e)}})}selectForTask(e){return t(this,arguments,void 0,function*(e,t="medium"){return this.selectModel({task_type:e,quality_requirement:t})})}selectCostOptimized(e){return t(this,arguments,void 0,function*(e,t=.01){return this.selectModel({task_type:e,quality_requirement:"medium",max_cost:t})})}selectHighPerformance(e){return t(this,void 0,void 0,function*(){return this.selectModel({task_type:e,quality_requirement:"high"})})}isConnected(){return this.devPipeClient.isReady()}getConfig(){return Object.assign({},this.config)}disconnect(){return t(this,void 0,void 0,function*(){yield this.devPipeClient.disconnect()})}}class x extends e.Modal{constructor(e,t){super(e),this.plugin=t,this.vaultClient=t.vaultClient}setFocusPath(e){return this.focusPath=e,this}onOpen(){return t(this,void 0,void 0,function*(){var e,t;const{contentEl:n}=this;n.empty(),n.addClass("vault-structure-modal");const i=n.createEl("div",{cls:"modal-header"});i.createEl("h2",{text:"Vault Structure Analysis"});const o=i.createEl("button",{text:"🔄 Refresh",cls:"mod-cta"}),a=n.createDiv({cls:"vault-loading"});a.setText("🔍 Analyzing vault structure...");try{const e=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:5});a.remove(),this.renderStructure(n,e),o.onclick=()=>{this.onOpen()}}catch(i){if(a.remove(),console.error("Vault structure error:",i),(null===(e=i.message)||void 0===e?void 0:e.includes("Not Found"))||(null===(t=i.message)||void 0===t?void 0:t.includes("404")))this.renderFallbackStructure(n);else{n.createDiv({cls:"vault-error"}).setText("❌ Failed to load vault structure");n.createEl("button",{text:"Retry",cls:"mod-cta"}).onclick=()=>this.onOpen()}o.onclick=()=>{this.onOpen()}}})}renderStructure(e,t){e.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">📁</span>\n          <span class="stat-label">Files</span>\n          <span class="stat-value">${t.total_files}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">📂</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${t.total_folders}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">💾</span>\n          <span class="stat-label">Size</span>\n          <span class="stat-value">${(t.total_size/1024/1024).toFixed(2)} MB</span>\n        </div>\n      </div>\n    `;const n=e.createDiv({cls:"vault-tree-container"});n.createEl("h3",{text:"Folder Structure"});const i=n.createDiv({cls:"vault-tree"});if(this.renderFolder(i,t.structure,0),t.recent_files.length>0){const n=e.createDiv({cls:"recent-files-container"});n.createEl("h3",{text:"Recent Files"});const i=n.createDiv({cls:"recent-files"});t.recent_files.slice(0,10).forEach(e=>{i.createDiv({cls:"recent-file"}).innerHTML=`\n          <span class="file-icon">📄</span>\n          <span class="file-name">${e.name}</span>\n          <span class="file-date">${new Date(e.modified).toLocaleDateString()}</span>\n        `})}if(t.orphaned_files.length>0){const n=e.createDiv({cls:"orphaned-files-container"});n.createEl("h3",{text:"⚠️ Orphaned Files"});const i=n.createDiv({cls:"orphaned-files"});t.orphaned_files.forEach(e=>{i.createDiv({cls:"orphaned-file"}).innerHTML=`\n          <span class="file-icon">🔗</span>\n          <span class="file-path">${e.path}</span>\n        `})}}renderFolder(e,t,n){const i=e.createDiv({cls:"folder-item",attr:{"data-level":n.toString()}});i.innerHTML=`\n      <span class="folder-toggle">▶</span>\n      <span class="folder-icon">📁</span>\n      <span class="folder-name">${t.name}</span>\n      <span class="folder-count">(${t.children.length})</span>\n    `;const o=e.createDiv({cls:"folder-children",attr:{style:"display: none;"}}),a=i.querySelector(".folder-toggle");a.onclick=()=>{const e="none"!==o.style.display;o.style.display=e?"none":"block",a.textContent=e?"▶":"▼"},t.children.forEach(e=>{if("folder"===e.type)this.renderFolder(o,e,n+1);else{o.createDiv({cls:"file-item",attr:{"data-level":(n+1).toString()}}).innerHTML=`\n          <span class="file-icon">📄</span>\n          <span class="file-name">${e.name}</span>\n          <span class="file-size">${(e.size/1024).toFixed(1)}KB</span>\n        `}})}renderFallbackStructure(e){const t=e.createDiv({cls:"vault-fallback"});t.createEl("h3",{text:"📁 Local Vault Analysis"}),t.createEl("p",{text:"Server-side vault management not available. Showing local analysis.",cls:"vault-fallback-message"});const n=this.plugin.app.vault.getFiles(),i=this.plugin.app.vault.getMarkdownFiles(),o=this.plugin.app.vault.getAllLoadedFiles().filter(e=>e.children).length;t.createDiv({cls:"vault-stats"}).innerHTML=`\n      <div class="stat-grid">\n        <div class="stat-item">\n          <span class="stat-icon">📁</span>\n          <span class="stat-label">Folders</span>\n          <span class="stat-value">${o}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">📄</span>\n          <span class="stat-label">Total Files</span>\n          <span class="stat-value">${n.length}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">📝</span>\n          <span class="stat-label">Markdown</span>\n          <span class="stat-value">${i.length}</span>\n        </div>\n        <div class="stat-item">\n          <span class="stat-icon">💾</span>\n          <span class="stat-label">Status</span>\n          <span class="stat-value">Local Only</span>\n        </div>\n      </div>\n    `;const a=t.createDiv({cls:"recent-files-container"});a.createEl("h3",{text:"Recent Files"});const s=i.sort((e,t)=>t.stat.mtime-e.stat.mtime).slice(0,10),r=a.createDiv({cls:"recent-files"});s.forEach(e=>{const t=r.createDiv({cls:"recent-file"});t.innerHTML=`\n        <span class="file-icon">📄</span>\n        <span class="file-name">${e.basename}</span>\n        <span class="file-date">${new Date(e.stat.mtime).toLocaleDateString()}</span>\n      `,t.onclick=()=>{this.plugin.app.workspace.openLinkText(e.path,"",!1),this.close()}});t.createDiv({cls:"vault-config-note"}).innerHTML="\n      <p><strong>💡 Enable Full Features:</strong> Configure vault management endpoints on your server to access advanced features like structure analysis, smart search, and file operations.</p>\n      <p>See the dev-pipe documentation for implementation details.</p>\n    "}onClose(){const{contentEl:e}=this;e.empty()}}class E extends e.Modal{constructor(e,t){super(e),this.plugin=t,this.vaultClient=t.vaultClient}setInitialQuery(e,t){return this.initialQuery=e,this.searchType=t,this}onOpen(){return t(this,void 0,void 0,function*(){const{contentEl:n}=this;n.empty(),n.addClass("smart-search-modal"),n.createEl("h2",{text:"🔍 Smart Vault Search"});const i=n.createDiv({cls:"search-form"}),o=i.createEl("input",{type:"text",placeholder:"Enter search query...",cls:"search-query-input"});this.initialQuery&&(o.value=this.initialQuery);const a=i.createEl("select",{cls:"search-type-select"});[{value:"comprehensive",label:"Comprehensive"},{value:"content",label:"Content"},{value:"filename",label:"Filename"},{value:"tags",label:"Tags"},{value:"links",label:"Links"}].forEach(e=>{const t=a.createEl("option",{value:e.value});t.textContent=e.label,e.value===(this.searchType||"comprehensive")&&(t.selected=!0)});const s=i.createEl("button",{text:"Search",cls:"mod-cta search-button"}),r=n.createDiv({cls:"search-results-container"}),l=()=>t(this,void 0,void 0,function*(){var t;const n=o.value.trim();if(!n)return void new e.Notice("Please enter a search query");s.textContent="Searching...",s.disabled=!0,r.empty();const i=r.createDiv({cls:"search-loading"});i.textContent="🔍 Searching vault...";try{const e=yield this.vaultClient.searchVault({query:n,search_type:a.value,max_results:(null===(t=this.plugin.settings.vaultManagement)||void 0===t?void 0:t.searchResultsLimit)||50,include_content:!0});i.remove(),this.renderSearchResults(r,e)}catch(e){i.textContent="❌ Search failed",console.error("Search error:",e)}finally{s.textContent="Search",s.disabled=!1}});s.onclick=l,o.addEventListener("keypress",e=>{"Enter"===e.key&&l()}),this.initialQuery&&l(),o.focus()})}renderSearchResults(e,t){if(e.createEl("h3",{text:`Search Results (${t.total_found})`}),t.insights){e.createDiv({cls:"search-insights"}).innerHTML=`\n        <div class="insights-header">🧠 AI Insights</div>\n        <div class="insights-content">${t.insights}</div>\n      `}if(0===t.results.length)return void e.createDiv({cls:"no-results",text:"No results found. Try a different search term or type."});const n=e.createDiv({cls:"search-results-list"});if(t.results.forEach(e=>{const t=n.createDiv({cls:"search-result"});t.innerHTML=`\n        <div class="result-header">\n          <span class="result-file-name">${e.file_name}</span>\n          <span class="result-match-type">${e.match_type}</span>\n          <span class="result-score">${(100*e.score).toFixed(0)}%</span>\n        </div>\n        <div class="result-path">${e.file_path}</div>\n        <div class="result-preview">${e.preview}</div>\n        ${e.matches.length>0?`\n          <div class="result-matches">\n            <strong>Matches:</strong> ${e.matches.join(", ")}\n          </div>\n        `:""}\n      `,t.onclick=()=>{this.app.workspace.openLinkText(e.file_path,""),this.close()}}),t.suggested_queries&&t.suggested_queries.length>0){const n=e.createDiv({cls:"suggested-queries"});n.createEl("h4",{text:"💡 Suggested Queries"});const i=n.createDiv({cls:"suggestions-list"});t.suggested_queries.forEach(e=>{i.createEl("button",{text:e,cls:"suggestion-button"}).onclick=()=>{const t=this.contentEl.querySelector(".search-query-input");t&&(t.value=e,t.dispatchEvent(new KeyboardEvent("keypress",{key:"Enter"})))}})}}onClose(){const{contentEl:e}=this;e.empty()}}class M extends e.Modal{constructor(e,t){super(e),this.plugin=t,this.vaultClient=t.vaultClient}setInitialPath(e){return this.initialPath=e,this}setOperation(e){return this.operation=e,this}onOpen(){return t(this,void 0,void 0,function*(){const{contentEl:t}=this;t.empty(),t.addClass("file-operations-modal"),t.createEl("h2",{text:"📁 File Operations Manager"}),new e.Setting(t).setName("Operation").setDesc("Select the file operation to perform").addDropdown(e=>e.addOption("create","Create File").addOption("update","Update File").addOption("delete","Delete File").addOption("move","Move File").addOption("copy","Copy File").setValue(this.operation||"create").onChange(e=>{this.operation=e,this.updateOperationForm()})),t.createDiv({cls:"operation-form"}),this.updateOperationForm()})}updateOperationForm(){const t=this.contentEl.querySelector(".operation-form");if(!t)return;t.empty();const n=this.operation||"create";new e.Setting(t).setName("File Path").setDesc("Path to the file (including filename)").addText(e=>e.setPlaceholder("path/to/file.md").setValue(this.initialPath||"").onChange(e=>this.initialPath=e)),"move"!==n&&"copy"!==n||new e.Setting(t).setName("New Path").setDesc("Destination path for the file").addText(e=>e.setPlaceholder("new/path/to/file.md")),"create"!==n&&"update"!==n||new e.Setting(t).setName("Content").setDesc("File content").addTextArea(e=>{e.setPlaceholder("Enter file content..."),"create"===n&&e.setValue("# New File\n\nContent goes here...")}),"create"!==n&&new e.Setting(t).setName("Create Backup").setDesc("Create a backup before performing the operation").addToggle(e=>e.setValue(!0)),new e.Setting(t).addButton(e=>e.setButtonText(`Execute ${n.charAt(0).toUpperCase()+n.slice(1)}`).setCta().onClick(()=>this.executeOperation()))}executeOperation(){return t(this,void 0,void 0,function*(){var t;const n=this.operation||"create",i=this.contentEl.querySelector('input[placeholder*="path/to/file"]'),o=this.contentEl.querySelector('input[placeholder*="new/path"]'),a=this.contentEl.querySelector("textarea"),s=this.contentEl.querySelector('input[type="checkbox"]');if(!(null==i?void 0:i.value))return void new e.Notice("File path is required");const r={operation:n,file_path:i.value,backup:null===(t=null==s?void 0:s.checked)||void 0===t||t};(null==o?void 0:o.value)&&(r.new_path=o.value),(null==a?void 0:a.value)&&(r.content=a.value);try{new e.Notice(`Performing ${n}...`);const t=yield this.vaultClient.performFileOperation(r);new e.Notice(`✅ ${n} successful: ${t.message}`),this.close()}catch(t){new e.Notice(`❌ ${n} failed: ${t.message}`)}})}onClose(){const{contentEl:e}=this;e.empty()}}var T,P,D,A;!function(e){e.HTTP="http",e.WEBSOCKET="websocket",e.FILESYSTEM="filesystem"}(T||(T={})),function(e){e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.MESSAGE="message",e.ERROR="error",e.HEALTH_CHECK="health_check",e.RECONNECTING="reconnecting"}(P||(P={}));class R{constructor(e){this.state="closed",this.failureCount=0,this.lastFailureTime=0,this.nextAttempt=0,this.config=e}execute(e){return t(this,void 0,void 0,function*(){if("open"===this.state){if(Date.now()<this.nextAttempt)throw new Error("Circuit breaker is OPEN");this.state="half-open"}try{const t=yield e();return this.onSuccess(),t}catch(e){throw this.onFailure(),e}})}onSuccess(){this.failureCount=0,this.state="closed"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.config.failureThreshold&&(this.state="open",this.nextAttempt=Date.now()+this.config.resetTimeout)}getState(){return this.state}}class N{constructor(e,t){this.eventListeners=new Map,this.connected=!1,this.initialized=!1,this.type=e,this.id=`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,this.config=t,this.healthStatus={status:"disconnected",lastCheck:Date.now(),latency:0,errorRate:0,consecutiveFailures:0,uptime:0},this.circuitBreaker=new R({failureThreshold:5,resetTimeout:3e4,monitoringPeriod:1e4}),this.metrics={messagesSent:0,messagesReceived:0,errors:0,totalLatency:0,lastActivity:Date.now()},this.debug(`Transport ${this.id} created`)}on(e,t){const n=e.toString();this.eventListeners.has(n)||this.eventListeners.set(n,[]),this.eventListeners.get(n).push(t)}off(e,t){const n=e.toString(),i=this.eventListeners.get(n);if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1)}}emit(e,t){const n=e.toString(),i=this.eventListeners.get(n);i&&i.forEach(e=>{try{e(t)}catch(e){this.debug(`Error in event listener for ${n}:`,e)}})}performHealthCheck(){return t(this,void 0,void 0,function*(){const e=Date.now();try{yield this.doHealthCheck();const t=Date.now()-e;return this.healthStatus.status="healthy",this.healthStatus.latency=t,this.healthStatus.consecutiveFailures=0,this.healthStatus.lastCheck=Date.now(),this.emit(P.HEALTH_CHECK,{success:!0,latency:t}),{success:!0,latency:t,timestamp:Date.now()}}catch(t){this.healthStatus.status="failing",this.healthStatus.consecutiveFailures++,this.healthStatus.lastCheck=Date.now();const n=t instanceof Error?t.message:"Unknown error";return this.emit(P.HEALTH_CHECK,{success:!1,error:n}),{success:!1,error:n,latency:Date.now()-e,timestamp:Date.now()}}})}executeWithCircuitBreaker(e,n){return t(this,void 0,void 0,function*(){const t=Date.now();try{const n=yield this.circuitBreaker.execute(e),i=Date.now()-t;return this.updateMetrics(!0,i),n}catch(e){const i=Date.now()-t;throw this.updateMetrics(!1,i),this.debug(`Operation ${n} failed:`,e),e}})}updateMetrics(e,t){e?(this.metrics.messagesSent++,this.metrics.totalLatency+=t):this.metrics.errors++,this.metrics.lastActivity=Date.now()}generateMessageId(){return`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}debug(e,...t){this.config.debug&&console.log(`[${this.type}:${this.id}] ${e}`,...t)}calculateReliability(){const e=this.metrics.messagesSent+this.metrics.errors;return 0===e?1:this.metrics.messagesSent/e}isAvailable(){return this.initialized&&"open"!==this.circuitBreaker.getState()}isConnected(){return this.connected&&this.isAvailable()}getHealthStatus(){return Object.assign({},this.healthStatus)}initialize(e){return t(this,void 0,void 0,function*(){this.config=Object.assign(Object.assign({},this.config),e),yield this.doInitialize(),this.initialized=!0,this.debug("Transport initialized")})}destroy(){return t(this,void 0,void 0,function*(){yield this.disconnect(),this.eventListeners.clear(),this.initialized=!1,this.debug("Transport destroyed")})}}class O{constructor(e){this.activeConnections=0,this.queue=[],this.maxConnections=e.maxConnections}acquire(e){return t(this,void 0,void 0,function*(){return new Promise((n,i)=>{const o=()=>t(this,void 0,void 0,function*(){this.activeConnections++;try{const t=yield e();n(t)}catch(e){i(e)}finally{if(this.activeConnections--,this.queue.length>0){const e=this.queue.shift();e&&e()}}});this.activeConnections<this.maxConnections?o():this.queue.push(o)})})}}class I extends N{constructor(e){super(T.HTTP,e),this.pendingRequests=new Map,this.messageQueue=[],this.processingQueue=!1,this.httpConfig=e.http||{enableSSE:!0,maxConnections:10,keepAlive:!0,compression:!0},this.connectionPool=new O({maxConnections:this.httpConfig.maxConnections||10,keepAlive:!1!==this.httpConfig.keepAlive,timeout:e.timeout})}doInitialize(){return t(this,void 0,void 0,function*(){if(!w.detect().hasHTTP)throw new Error("HTTP transport not supported in this environment");this.debug("HTTP transport initialized")})}connect(){return t(this,void 0,void 0,function*(){try{yield this.doHealthCheck(),this.httpConfig.enableSSE&&this.config.serverUrl&&(yield this.setupSSE()),this.connected=!0,this.healthStatus.status="healthy",this.emit(P.CONNECTED,{transport:this.type}),this.debug("HTTP transport connected")}catch(e){throw this.emit(P.ERROR,e),e}})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.pendingRequests.values());for(const t of e)clearTimeout(t.timeout),t.reject(new Error("Transport disconnected"));this.pendingRequests.clear(),this.sseConnection&&(this.sseConnection.close(),this.sseConnection=void 0),this.connected=!1,this.healthStatus.status="disconnected",this.emit(P.DISCONNECTED,{transport:this.type}),this.debug("HTTP transport disconnected")})}send(e){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("HTTP transport not connected");return e.id||(e.id=this.generateMessageId()),e.timestamp=Date.now(),this.executeWithCircuitBreaker(()=>t(this,void 0,void 0,function*(){return this.sendHttpRequest(e)}),"http_send")})}sendHttpRequest(e){return t(this,void 0,void 0,function*(){return new Promise((t,n)=>{const i=setTimeout(()=>{this.pendingRequests.delete(e.id),n(new Error(`Request timeout after ${this.config.timeout}ms`))},this.config.timeout),o={id:e.id,message:e,resolve:n=>{clearTimeout(i),this.pendingRequests.delete(e.id),t(n)},reject:t=>{clearTimeout(i),this.pendingRequests.delete(e.id),n(t)},timeout:i,timestamp:Date.now()};this.pendingRequests.set(e.id,o),this.performHttpRequest(e,o)})})}performHttpRequest(e,n){return t(this,void 0,void 0,function*(){try{const i=yield this.connectionPool.acquire(()=>t(this,void 0,void 0,function*(){const t=yield fetch(`${this.config.serverUrl}/api/v1/devpipe/message`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},this.httpConfig.compression&&{"Accept-Encoding":"gzip, deflate"}),body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return t.json()}));if(i&&i.id===e.id){const e={id:i.id,success:!0,payload:i.payload||i,timestamp:Date.now()};n.resolve(e)}else this.debug(`Waiting for async response for message ${e.id}`)}catch(e){n.reject(e instanceof Error?e:new Error("HTTP request failed"))}})}setupSSE(){return t(this,void 0,void 0,function*(){if(!this.config.serverUrl)throw new Error("Server URL required for SSE");return new Promise((e,t)=>{const n=`${this.config.serverUrl}/api/v1/devpipe/stream`;this.sseConnection=new EventSource(n),this.sseConnection.onopen=()=>{this.debug("SSE connection established"),e()},this.sseConnection.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleSSEMessage(t)}catch(e){this.debug("Failed to parse SSE message:",e)}},this.sseConnection.onerror=e=>{var n;this.debug("SSE connection error:",e),(null===(n=this.sseConnection)||void 0===n?void 0:n.readyState)===EventSource.CONNECTING?this.emit(P.RECONNECTING,{transport:this.type}):(this.emit(P.ERROR,e),t(e))}})})}handleSSEMessage(e){if("response"===e.type&&e.id){const t=this.pendingRequests.get(e.id);if(t){const n={id:e.id,success:!1!==e.success,payload:e.payload,error:e.error,timestamp:Date.now()};t.resolve(n)}}else this.emit(P.MESSAGE,e)}doHealthCheck(){return t(this,void 0,void 0,function*(){if(!this.config.serverUrl)throw new Error("No server URL configured");const e=yield fetch(`${this.config.serverUrl}/api/v1/devpipe/health`,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error(`Health check failed: ${e.status} ${e.statusText}`)})}getCapabilities(){return{supportsRealtime:!!this.httpConfig.enableSSE,supportsBidirectional:!!this.httpConfig.enableSSE,supportsFileSystem:!1,supportsStreaming:!0,maxMessageSize:10485760,averageLatency:this.healthStatus.latency,maxConcurrentConnections:this.httpConfig.maxConnections||10,reliability:this.calculateReliability(),supportedEnvironments:["browser","node","obsidian"]}}}class ${constructor(e,t=[],n={}){this.reconnectAttempts=0,this.shouldReconnect=!0,this.url=e,this.protocols=t,this.options=n,this.maxReconnectAttempts=n.maxReconnectAttempts||10,this.reconnectDelay=n.reconnectDelay||1e3,this.connect()}connect(){try{this.ws=new WebSocket(this.url,this.protocols),this.ws.onopen=e=>{this.reconnectAttempts=0,this.onopen&&this.onopen(e)},this.ws.onclose=e=>{this.onclose&&this.onclose(e),this.shouldReconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>this.reconnect(),this.reconnectDelay*Math.pow(2,this.reconnectAttempts))},this.ws.onmessage=e=>{this.onmessage&&this.onmessage(e)},this.ws.onerror=e=>{this.onerror&&this.onerror(e)}}catch(e){this.onerror&&this.onerror(new Event("error"))}}reconnect(){this.shouldReconnect&&this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,this.connect())}send(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)throw new Error("WebSocket not connected");this.ws.send(e)}close(){this.shouldReconnect=!1,this.ws&&this.ws.close()}get readyState(){return this.ws?this.ws.readyState:WebSocket.CLOSED}}class F extends N{constructor(e){super(T.WEBSOCKET,e),this.responseHandlers=new Map,this.wsConfig=e.websocket||{heartbeatInterval:3e4,reconnectDelay:1e3,maxReconnectAttempts:10,persistMessages:!1},this.messageQueue={messages:[],maxSize:1e3,persistToDisk:this.wsConfig.persistMessages||!1}}doInitialize(){return t(this,void 0,void 0,function*(){if(!w.detect().hasWebSocket)throw new Error("WebSocket transport not supported in this environment");this.debug("WebSocket transport initialized")})}connect(){return t(this,void 0,void 0,function*(){if(!this.config.serverUrl)throw new Error("Server URL required for WebSocket transport");return new Promise((e,t)=>{const n=this.config.serverUrl.replace(/^http/,"ws")+"/api/v1/devpipe/ws";this.websocket=new $(n,[],{connectionTimeout:this.config.timeout,debug:this.config.debug,maxReconnectAttempts:this.wsConfig.maxReconnectAttempts,reconnectDelay:this.wsConfig.reconnectDelay}),this.websocket.onopen=()=>{this.connected=!0,this.healthStatus.status="healthy",this.startHeartbeat(),this.emit(P.CONNECTED,{transport:this.type}),this.debug("WebSocket connected"),e()},this.websocket.onerror=e=>{this.debug("WebSocket error:",e),this.emit(P.ERROR,e),this.connected||t(new Error("Failed to connect WebSocket"))},this.websocket.onmessage=e=>{this.handleMessage(e.data)},this.websocket.onclose=()=>{this.connected=!1,this.healthStatus.status="disconnected",this.stopHeartbeat(),this.emit(P.DISCONNECTED,{transport:this.type}),this.debug("WebSocket disconnected")}})})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.responseHandlers.values());for(const t of e)clearTimeout(t.timeout),t.reject(new Error("Transport disconnected"));this.responseHandlers.clear(),this.stopHeartbeat(),this.websocket&&(this.websocket.close(),this.websocket=void 0),this.connected=!1,this.healthStatus.status="disconnected",this.emit(P.DISCONNECTED,{transport:this.type}),this.debug("WebSocket transport disconnected")})}send(e){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("WebSocket transport not connected");return e.id||(e.id=this.generateMessageId()),e.timestamp=Date.now(),this.executeWithCircuitBreaker(()=>t(this,void 0,void 0,function*(){return this.sendWebSocketMessage(e)}),"websocket_send")})}sendWebSocketMessage(e){return t(this,void 0,void 0,function*(){return new Promise((t,n)=>{const i=setTimeout(()=>{this.responseHandlers.delete(e.id),n(new Error(`WebSocket request timeout after ${this.config.timeout}ms`))},this.config.timeout),o={resolve:n=>{clearTimeout(i),this.responseHandlers.delete(e.id),t(n)},reject:t=>{clearTimeout(i),this.responseHandlers.delete(e.id),n(t)},timeout:i,timestamp:Date.now()};this.responseHandlers.set(e.id,o);try{this.websocket.send(JSON.stringify(e))}catch(t){clearTimeout(i),this.responseHandlers.delete(e.id),n(t)}})})}handleMessage(e){try{const t=JSON.parse(e);if("pong"===t.type)return void this.debug("Received heartbeat pong");if("response"===t.type&&t.replyTo){const e=this.responseHandlers.get(t.replyTo);if(e){const n={id:t.id,success:!1!==t.success,payload:t.payload,error:t.error,timestamp:Date.now()};e.resolve(n)}}else if("health_pong"===t.type&&t.id){const e=this.responseHandlers.get(t.id);if(e){const n={id:t.id,success:!0,payload:{status:"healthy"},timestamp:Date.now()};e.resolve(n)}}else this.emit(P.MESSAGE,t)}catch(e){this.debug("Failed to handle WebSocket message:",e),this.emit(P.ERROR,e)}}startHeartbeat(){this.heartbeatInterval||(this.heartbeatInterval=setInterval(()=>{if(this.isConnected())try{this.websocket.send(JSON.stringify({type:"ping",timestamp:Date.now()}))}catch(e){this.debug("Failed to send heartbeat:",e)}},this.wsConfig.heartbeatInterval||3e4))}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=void 0)}doHealthCheck(){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("WebSocket not connected");return new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("Health check timeout"))},5e3),i=this.generateMessageId(),o={resolve:()=>{clearTimeout(n),e()},reject:e=>{clearTimeout(n),t(e)},timeout:n,timestamp:Date.now()};this.responseHandlers.set(i,o);try{this.websocket.send(JSON.stringify({type:"health_ping",id:i,timestamp:Date.now()}))}catch(e){clearTimeout(n),this.responseHandlers.delete(i),t(e)}})})}getCapabilities(){return{supportsRealtime:!0,supportsBidirectional:!0,supportsFileSystem:!1,supportsStreaming:!0,maxMessageSize:1048576,averageLatency:this.healthStatus.latency,maxConcurrentConnections:1,reliability:this.calculateReliability(),supportedEnvironments:["browser","node","obsidian"]}}}class V{constructor(e=5e3){this.locks=new Set,this.lockTimeout=e}acquireLock(e){return t(this,void 0,void 0,function*(){return new Promise((t,n)=>{const i=()=>{this.locks.has(e)?setTimeout(i,100):(this.locks.add(e),t())};setTimeout(()=>{n(new Error(`Failed to acquire lock for ${e} within ${this.lockTimeout}ms`))},this.lockTimeout),i()})})}releaseLock(e){this.locks.delete(e)}}class z{constructor(){this.watchers=new Map,this.callbacks=new Map}watch(e,n){this.callbacks.set(e,n);const i=setInterval(()=>t(this,void 0,void 0,function*(){try{if(yield this.fileExists(e)){const t=yield this.readFile(e);n(t),this.unwatch(e)}}catch(e){}}),500);this.watchers.set(e,i)}unwatch(e){const t=this.watchers.get(e);t&&(clearInterval(t),this.watchers.delete(e)),this.callbacks.delete(e)}fileExists(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.exists))return window.app.vault.adapter.exists(e);if(void 0!==globalThis.require)try{const t=globalThis.require("fs").promises;return yield t.access(e),!0}catch(e){return!1}return!1})}readFile(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.read))return window.app.vault.adapter.read(e);if(void 0!==globalThis.require){return globalThis.require("fs").promises.readFile(e,"utf-8")}throw new Error("File reading not supported in this environment")})}}class L extends N{constructor(e){super(T.FILESYSTEM,e),this.pendingRequests=new Map,this.messageQueue=[],this.fsConfig=e.filesystem||{watchInterval:500,lockTimeout:5e3,maxQueueSize:100},this.devPipePath=e.devPipePath||"./devpipe",this.fileWatcher=new z,this.lockManager=new V(this.fsConfig.lockTimeout)}doInitialize(){return t(this,void 0,void 0,function*(){if(!w.detect().hasFileSystem)throw new Error("FileSystem transport not supported in this environment");yield this.ensureDirectoryExists(this.devPipePath),this.debug("FileSystem transport initialized")})}connect(){return t(this,void 0,void 0,function*(){try{yield this.doHealthCheck(),this.setupIncomingMessageWatcher(),this.connected=!0,this.healthStatus.status="healthy",this.emit(P.CONNECTED,{transport:this.type}),this.debug("FileSystem transport connected")}catch(e){throw this.emit(P.ERROR,e),e}})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.pendingRequests.values());for(const t of e)clearTimeout(t.timeout),this.fileWatcher.unwatch(t.responseFile),t.reject(new Error("Transport disconnected"));this.pendingRequests.clear(),this.connected=!1,this.healthStatus.status="disconnected",this.emit(P.DISCONNECTED,{transport:this.type}),this.debug("FileSystem transport disconnected")})}send(e){return t(this,void 0,void 0,function*(){if(!this.isConnected())throw new Error("FileSystem transport not connected");return e.id||(e.id=this.generateMessageId()),e.timestamp=Date.now(),this.executeWithCircuitBreaker(()=>t(this,void 0,void 0,function*(){return this.sendFileMessage(e)}),"filesystem_send")})}sendFileMessage(e){return t(this,void 0,void 0,function*(){const t=`${this.devPipePath}/request_${e.id}.json`,n=`${this.devPipePath}/response_${e.id}.json`;return new Promise((i,o)=>{const a=setTimeout(()=>{this.pendingRequests.delete(e.id),this.fileWatcher.unwatch(n),o(new Error(`FileSystem request timeout after ${this.config.timeout}ms`))},this.config.timeout),s={id:e.id,message:e,resolve:t=>{clearTimeout(a),this.pendingRequests.delete(e.id),this.fileWatcher.unwatch(n),i(t)},reject:t=>{clearTimeout(a),this.pendingRequests.delete(e.id),this.fileWatcher.unwatch(n),o(t)},timeout:a,timestamp:Date.now(),requestFile:t,responseFile:n};this.pendingRequests.set(e.id,s),this.fileWatcher.watch(n,e=>{try{const t=JSON.parse(e),n={id:t.id,success:!1!==t.success,payload:t.payload,error:t.error,timestamp:Date.now()};s.resolve(n)}catch(e){s.reject(new Error("Failed to parse response file"))}}),this.writeRequestFile(t,e,s)})})}writeRequestFile(e,n,i){return t(this,void 0,void 0,function*(){try{yield this.lockManager.acquireLock(e),yield this.writeFile(e,JSON.stringify(n,null,2)),this.lockManager.releaseLock(e)}catch(t){this.lockManager.releaseLock(e),i.reject(t instanceof Error?t:new Error("Failed to write request file"))}})}setupIncomingMessageWatcher(){this.debug("Incoming message watcher setup completed")}ensureDirectoryExists(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.mkdir))try{yield window.app.vault.adapter.mkdir(e)}catch(e){}else if(void 0!==globalThis.require)try{const t=globalThis.require("fs").promises;yield t.mkdir(e,{recursive:!0})}catch(e){}})}writeFile(e,n){return t(this,void 0,void 0,function*(){var t,i,o;if("undefined"!=typeof window&&(null===(o=null===(i=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===i?void 0:i.adapter)||void 0===o?void 0:o.write))return window.app.vault.adapter.write(e,n);if(void 0!==globalThis.require){return globalThis.require("fs").promises.writeFile(e,n,"utf-8")}throw new Error("File writing not supported in this environment")})}readFile(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.read))return window.app.vault.adapter.read(e);if(void 0!==globalThis.require){return globalThis.require("fs").promises.readFile(e,"utf-8")}throw new Error("File reading not supported in this environment")})}doHealthCheck(){return t(this,void 0,void 0,function*(){const e=`${this.devPipePath}/health_check_${Date.now()}.tmp`;try{yield this.writeFile(e,"health_check");if("health_check"!==(yield this.readFile(e)))throw new Error("File content mismatch during health check");yield this.deleteFile(e)}catch(e){throw new Error(`FileSystem health check failed: ${e instanceof Error?e.message:"Unknown error"}`)}})}deleteFile(e){return t(this,void 0,void 0,function*(){var t,n,i;if("undefined"!=typeof window&&(null===(i=null===(n=null===(t=window.app)||void 0===t?void 0:t.vault)||void 0===n?void 0:n.adapter)||void 0===i?void 0:i.remove))try{yield window.app.vault.adapter.remove(e)}catch(e){}else if(void 0!==globalThis.require)try{const t=globalThis.require("fs").promises;yield t.unlink(e)}catch(e){}})}getCapabilities(){return{supportsRealtime:!1,supportsBidirectional:!0,supportsFileSystem:!0,supportsStreaming:!1,maxMessageSize:10485760,averageLatency:this.healthStatus.latency,maxConcurrentConnections:1,reliability:this.calculateReliability(),supportedEnvironments:["node","obsidian"]}}}class _{constructor(){this.metrics=new Map,this.latencyHistory=new Map,this.MAX_HISTORY_SIZE=100}recordLatency(e,t){const n=this.getOrCreateMetrics(e),i=this.getOrCreateHistory(e);i.push(t),i.length>this.MAX_HISTORY_SIZE&&i.shift(),n.averageLatency=i.reduce((e,t)=>e+t,0)/i.length,n.minLatency=Math.min(n.minLatency,t),n.maxLatency=Math.max(n.maxLatency,t),n.lastActivity=Date.now()}recordSuccess(e){const t=this.getOrCreateMetrics(e);t.totalRequests++,t.successfulRequests++,t.lastActivity=Date.now()}recordFailure(e,t){const n=this.getOrCreateMetrics(e);n.totalRequests++,n.failedRequests++,n.lastActivity=Date.now()}getMetrics(e){return this.getOrCreateMetrics(e)}getOrCreateMetrics(e){return this.metrics.has(e)||this.metrics.set(e,{totalRequests:0,successfulRequests:0,failedRequests:0,averageLatency:0,minLatency:1/0,maxLatency:0,uptime:0,lastActivity:Date.now()}),this.metrics.get(e)}getOrCreateHistory(e){return this.latencyHistory.has(e)||this.latencyHistory.set(e,[]),this.latencyHistory.get(e)}}class q{constructor(e){this.schedules=new Map,this.eventListeners=new Map,this.metricsCollector=e||new _}startMonitoring(e,t=3e4){const n={transport:e,interval:t,lastCheck:0,consecutiveFailures:0};this.schedules.set(e.id,n),e.on(P.HEALTH_CHECK,t=>{t.success?(this.metricsCollector.recordLatency(e.type,t.latency),this.metricsCollector.recordSuccess(e.type),n.consecutiveFailures=0):(this.metricsCollector.recordFailure(e.type,new Error(t.error||"Health check failed")),n.consecutiveFailures++),this.emit("health-updated",this.assessTransportHealth(e))}),this.monitoringInterval||this.startPeriodicChecks()}stopMonitoring(e){this.schedules.delete(e.id),0===this.schedules.size&&this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=void 0)}assessTransportHealth(e){const t=this.metricsCollector.getMetrics(e.type),n=e.getHealthStatus();e.getCapabilities();const i=this.calculateAvailabilityScore(e),o=this.calculateLatencyScore(n.latency),a=this.calculateReliabilityScore(t),s=this.calculateErrorRateScore(t),r=.3*i+.25*o+.3*a+.15*s;let l,c;return l=r>=.9?"excellent":r>=.7?"good":r>=.5?"fair":r>=.3?"poor":"failing",c=r>=.7?"use":r>=.4?"monitor":"avoid",{transport:e.type,score:r,status:l,metrics:{availability:i,latency:o,reliability:a,errorRate:1-s},recommendation:c}}calculateAvailabilityScore(e){if(!e.isAvailable())return 0;if(!e.isConnected())return.3;const t=this.schedules.get(e.id);if(!t)return.8;const n=Math.min(.1*t.consecutiveFailures,.5);return Math.max(1-n,0)}calculateLatencyScore(e){return e<=50?1:e<=200?.8:e<=1e3?.6:Math.max(.2,1-e/5e3)}calculateReliabilityScore(e){if(0===e.totalRequests)return.5;return e.successfulRequests/e.totalRequests}calculateErrorRateScore(e){if(0===e.totalRequests)return 1;const t=e.failedRequests/e.totalRequests;return Math.max(0,1-t)}startPeriodicChecks(){this.monitoringInterval=setInterval(()=>{const e=Date.now(),t=Array.from(this.schedules.values());for(const n of t)e-n.lastCheck>=n.interval&&(n.lastCheck=e,n.transport.performHealthCheck().catch(e=>{}))},5e3)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(n=>{try{n(t)}catch(t){console.error(`Error in health monitor event listener for ${e}:`,t)}})}getMetricsCollector(){return this.metricsCollector}}class H{constructor(e){this.criteria=e}calculateScore(e,n){return t(this,void 0,void 0,function*(){const t=e.getCapabilities(),i=e.getHealthStatus();let o=.5;(null==n?void 0:n.requiresRealtime)&&t.supportsRealtime&&(o+=.3),(null==n?void 0:n.maxLatency)&&t.averageLatency<=n.maxLatency&&(o+=.2),o=Math.min(o,1);const a=Math.max(0,1-t.averageLatency/5e3),s=t.reliability;let r=1;e.type===T.HTTP?r=.8:e.type===T.WEBSOCKET?r=.9:e.type===T.FILESYSTEM&&(r=1);let l=1;e.isAvailable()?e.isConnected()?"failing"===i.status?l=.1:"degraded"===i.status&&(l=.5):l=.3:l=0;const c=(a*this.criteria.latencyWeight+s*this.criteria.reliabilityWeight+o*this.criteria.capabilityWeight+r*this.criteria.costWeight)*l;return Math.max(0,Math.min(1,c))})}selectBest(e,n){return new Promise(i=>t(this,void 0,void 0,function*(){if(0===e.length)return void i(null);const o=yield Promise.all(e.map(e=>t(this,void 0,void 0,function*(){return{transport:e,score:yield this.calculateScore(e,n)}})));o.sort((e,t)=>t.score-e.score),i(o[0].transport)}))}}class W{constructor(e){this.transports=new Map,this.eventListeners=new Map,this.failoverInProgress=!1,this.config=e,this.fallbackChain=e.fallbackChain||[T.WEBSOCKET,T.HTTP,T.FILESYSTEM],this.healthMonitor=new q,this.selector=new H(e.selectionCriteria),this.initializeTransports(),this.setupHealthMonitoring()}initializeTransports(){return t(this,void 0,void 0,function*(){const e=w.detect(),t=new I(this.config.transportConfigs.http);if(yield t.initialize(this.config.transportConfigs.http),this.transports.set(T.HTTP,t),e.hasWebSocket&&this.config.transportConfigs.websocket){const e=new F(this.config.transportConfigs.websocket);yield e.initialize(this.config.transportConfigs.websocket),this.transports.set(T.WEBSOCKET,e)}if(e.hasFileSystem&&this.config.transportConfigs.filesystem){const e=new L(this.config.transportConfigs.filesystem);yield e.initialize(this.config.transportConfigs.filesystem),this.transports.set(T.FILESYSTEM,e)}const n=Array.from(this.transports.values());for(const e of n)this.setupTransportEventHandlers(e);this.debug(`Initialized ${this.transports.size} transports`)})}setupTransportEventHandlers(e){e.on(P.CONNECTED,()=>{this.debug(`Transport ${e.type} connected`),this.emit("transport_connected",{transport:e.type})}),e.on(P.DISCONNECTED,()=>{this.debug(`Transport ${e.type} disconnected`),this.emit("transport_disconnected",{transport:e.type}),this.activeTransport===e&&!1!==this.config.autoFailover&&this.handleTransportFailure(e)}),e.on(P.ERROR,t=>{this.debug(`Transport ${e.type} error:`,t),this.emit("transport_error",{transport:e.type,error:t})}),e.on(P.MESSAGE,e=>{this.emit("message",e)})}setupHealthMonitoring(){const e=Array.from(this.transports.values());for(const t of e)this.healthMonitor.startMonitoring(t,this.config.healthCheckInterval||3e4);this.healthMonitor.on("health-updated",e=>{var t;this.emit("health_updated",e),(null===(t=this.activeTransport)||void 0===t?void 0:t.type)!==e.transport||"avoid"!==e.recommendation||this.failoverInProgress||this.selectOptimalTransport()})}selectOptimalTransport(e){return t(this,void 0,void 0,function*(){const t=Array.from(this.transports.values()).filter(e=>e.isAvailable());if(0===t.length)throw new Error("No available transports");const n=yield this.selector.selectBest(t,e);if(!n)throw new Error("No suitable transport found");return this.activeTransport!==n&&(yield this.switchTransport(n,"optimization")),n})}switchTransport(e,n){return t(this,void 0,void 0,function*(){const t=this.activeTransport;try{this.debug(`Switching transport from ${(null==t?void 0:t.type)||"none"} to ${e.type} (${n})`),e.isConnected()||(yield e.connect()),this.activeTransport=e,t&&t!==e&&t.disconnect().catch(e=>{this.debug(`Error disconnecting old transport ${t.type}:`,e)}),this.emit("transport_switched",{from:null==t?void 0:t.type,to:e.type,reason:n})}catch(e){throw t&&t.isConnected()&&(this.activeTransport=t),e}})}handleTransportFailure(e){return t(this,void 0,void 0,function*(){if(!this.failoverInProgress){this.failoverInProgress=!0;try{this.debug(`Handling failure of transport ${e.type}`),this.emit("transport_failed",{transport:e.type,timestamp:Date.now()});for(const t of this.fallbackChain){if(t===e.type)continue;const n=this.transports.get(t);if(n&&n.isAvailable())try{return yield this.switchTransport(n,"failover"),void this.debug(`Successfully failed over to ${t}`)}catch(e){this.debug(`Failover to ${t} failed:`,e);continue}}throw new Error("All transports failed")}finally{this.failoverInProgress=!1}}})}send(e,n){return t(this,void 0,void 0,function*(){if(this.activeTransport||(yield this.selectOptimalTransport(n)),!this.activeTransport)throw new Error("No active transport available");try{return yield this.activeTransport.send(e)}catch(t){if(this.debug(`Send failed on ${this.activeTransport.type}, attempting failover`),yield this.handleTransportFailure(this.activeTransport),this.activeTransport)return yield this.activeTransport.send(e);throw t}})}connect(){return t(this,void 0,void 0,function*(){yield this.selectOptimalTransport()})}disconnect(){return t(this,void 0,void 0,function*(){const e=Array.from(this.transports.values()).map(e=>e.disconnect().catch(t=>{this.debug(`Error disconnecting transport ${e.type}:`,t)}));yield Promise.all(e),this.activeTransport=void 0})}getActiveTransport(){return this.activeTransport}getAvailableTransports(){return Array.from(this.transports.values()).filter(e=>e.isAvailable())}getTransportHealth(){const e=new Map,t=Array.from(this.transports.values());for(const n of t)e.set(n.type,this.healthMonitor.assessTransportHealth(n));return e}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(t)}off(e,t){const n=this.eventListeners.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,t){const n=this.eventListeners.get(e);n&&n.forEach(n=>{try{n(t)}catch(t){this.debug(`Error in transport manager event listener for ${e}:`,t)}})}debug(e,...t){this.config.debug&&console.log(`[TransportManager] ${e}`,...t)}}!function(e){e[e.WELCOME=0]="WELCOME",e[e.ENVIRONMENT_DETECTION=1]="ENVIRONMENT_DETECTION",e[e.PREFERENCES=2]="PREFERENCES",e[e.VALIDATION=3]="VALIDATION",e[e.COMPLETION=4]="COMPLETION"}(D||(D={}));class U extends e.Modal{constructor(e,t,n={}){super(e),this.currentStep=0,this.totalSteps=5,this.stepElements=[],this.plugin=t,this.config=n;const i={selectionCriteria:{latencyWeight:.3,reliabilityWeight:.4,capabilityWeight:.2,costWeight:.1},fallbackChain:[T.HTTP,T.WEBSOCKET,T.FILESYSTEM],transportConfigs:{http:{serverUrl:t.settings.backendUrl,timeout:3e4,retryAttempts:3,debug:t.settings.debugMode}}};this.transportManager=new W(i),this.progress={currentStep:0,totalSteps:this.totalSteps,completedSteps:new Array(this.totalSteps).fill(!1),userPreferences:{enableRealTimeUpdates:!0,performanceMode:"balanced",enableAnalytics:!0}},this.modalEl.addClass("vaultpilot-onboarding")}onOpen(){return t(this,void 0,void 0,function*(){const{contentEl:e}=this;e.empty(),this.modalEl.addClass("vaultpilot-onboarding-modal"),this.createHeader(),this.createProgressBar(),e.createDiv("onboarding-step-container"),this.createNavigation(),yield this.renderCurrentStep()})}createHeader(){const{contentEl:e}=this,t=e.createDiv("onboarding-header");t.createEl("h2",{text:"Welcome to VaultPilot"}),t.createEl("p",{text:"Let's set up your optimal configuration for the best experience",cls:"onboarding-subtitle"})}createProgressBar(){const{contentEl:e}=this,t=e.createDiv("onboarding-progress"),n=t.createDiv("progress-steps");for(let e=0;e<this.totalSteps;e++){const t=n.createDiv("progress-step");t.addClass(0===e?"active":"inactive"),t.createSpan({text:(e+1).toString()}),this.stepElements.push(t)}this.progressBar=t.createDiv("progress-bar");this.progressBar.createDiv("progress-fill").style.width=1/this.totalSteps*100+"%"}createNavigation(){const{contentEl:t}=this,n=t.createDiv("onboarding-navigation");this.previousButton=new e.ButtonComponent(n).setButtonText("Previous").setClass("mod-muted").onClick(()=>this.previousStep()),this.skipButton=new e.ButtonComponent(n).setButtonText("Skip Setup").setClass("mod-muted").onClick(()=>this.skipOnboarding()),this.nextButton=new e.ButtonComponent(n).setButtonText("Next").setCta().onClick(()=>this.nextStep()),this.updateNavigationState()}renderCurrentStep(){return t(this,void 0,void 0,function*(){const{contentEl:e}=this,t=e.querySelector(".onboarding-step-container");switch(t.empty(),this.updateProgressIndicators(),this.currentStep){case D.WELCOME:yield this.renderWelcomeStep(t);break;case D.ENVIRONMENT_DETECTION:yield this.renderEnvironmentStep(t);break;case D.PREFERENCES:yield this.renderPreferencesStep(t);break;case D.VALIDATION:yield this.renderValidationStep(t);break;case D.COMPLETION:yield this.renderCompletionStep(t)}this.updateNavigationState()})}renderWelcomeStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step welcome-step");t.createEl("h3",{text:"Welcome to VaultPilot"}),t.createEl("p",{text:"VaultPilot provides intelligent transport management and optimization for your Obsidian experience. This wizard will help you configure the optimal settings for your environment."});const n=t.createDiv("welcome-features");n.createEl("h4",{text:"What you'll get:"});const i=n.createEl("ul");i.createEl("li",{text:"🚀 Intelligent transport selection and failover"}),i.createEl("li",{text:"📊 Real-time performance monitoring"}),i.createEl("li",{text:"💡 AI-powered optimization suggestions"}),i.createEl("li",{text:"🔧 Advanced configuration options"}),i.createEl("li",{text:"📈 Usage analytics and insights"});t.createDiv("estimated-time").createEl("p",{text:"⏱️ Estimated setup time: 2-3 minutes",cls:"muted"})})}renderEnvironmentStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step environment-step");if(t.createEl("h3",{text:"Environment Detection"}),t.createEl("p",{text:"Analyzing your environment to recommend optimal transport configuration..."}),this.config.skipEnvironmentDetection||this.progress.detectedCapabilities)this.progress.detectedCapabilities&&this.renderEnvironmentResults(t);else{t.createDiv("detection-status").createEl("p",{text:"🔍 Detecting capabilities...",cls:"detection-loading"});try{this.progress.detectedCapabilities=yield this.detectEnvironment(),this.renderEnvironmentResults(t)}catch(e){this.renderEnvironmentError(t,e)}}})}detectEnvironment(){return t(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,1e3));const e=w.detect();let t="obsidian";"browser"!==e.platform&&"node"!==e.platform&&"obsidian"!==e.platform||(t=e.platform);const n={platform:t,webSocketSupported:e.hasWebSocket,fileSystemAccess:e.hasFileSystem,httpCapabilities:e.hasHTTP,recommendedTransport:"http",performanceEstimate:"good"};return n.webSocketSupported&&n.httpCapabilities?(n.recommendedTransport="websocket",n.performanceEstimate="excellent"):n.httpCapabilities?(n.recommendedTransport="http",n.performanceEstimate="good"):n.fileSystemAccess&&(n.recommendedTransport="filesystem",n.performanceEstimate="fair"),n})}renderEnvironmentResults(e){const t=e.createDiv("environment-results"),n=this.progress.detectedCapabilities;t.createEl("h4",{text:"✅ Detection Complete"});const i=t.createDiv("capabilities-list"),o=i.createDiv("capability-item");o.createSpan({text:n.webSocketSupported?"✅":"❌",cls:"capability-icon"}),o.createSpan({text:"WebSocket Support"});const a=i.createDiv("capability-item");a.createSpan({text:n.httpCapabilities?"✅":"❌",cls:"capability-icon"}),a.createSpan({text:"HTTP Transport"});const s=i.createDiv("capability-item");s.createSpan({text:n.fileSystemAccess?"✅":"❌",cls:"capability-icon"}),s.createSpan({text:"FileSystem Access"});const r=t.createDiv("environment-recommendation");r.createEl("h4",{text:"Recommendation"}),r.createEl("p",{text:`Based on your environment, we recommend using ${n.recommendedTransport} transport for ${n.performanceEstimate} performance.`})}renderEnvironmentError(e,t){const n=e.createDiv("environment-error");n.createEl("h4",{text:"⚠️ Detection Failed"}),n.createEl("p",{text:"Unable to automatically detect your environment capabilities. You can proceed with default settings or manually configure later."}),this.plugin.settings.debugMode&&n.createEl("p",{text:`Error: ${t.message}`,cls:"error-details"})}renderPreferencesStep(n){return t(this,void 0,void 0,function*(){const t=n.createDiv("onboarding-step preferences-step");t.createEl("h3",{text:"Performance Preferences"}),t.createEl("p",{text:"Configure your preferences for optimal performance:"});const i=t.createDiv("preferences-container");new e.Setting(i).setName("Performance Mode").setDesc("Choose your preferred balance between speed and reliability").addDropdown(e=>{e.addOption("performance","Performance (Prioritize Speed)"),e.addOption("balanced","Balanced (Recommended)"),e.addOption("reliability","Reliability (Prioritize Stability)"),e.setValue(this.progress.userPreferences.performanceMode),e.onChange(e=>{this.progress.userPreferences.performanceMode=e})}),new e.Setting(i).setName("Real-time Updates").setDesc("Enable real-time dashboard updates and live monitoring").addToggle(e=>{e.setValue(this.progress.userPreferences.enableRealTimeUpdates),e.onChange(e=>{this.progress.userPreferences.enableRealTimeUpdates=e})}),new e.Setting(i).setName("Usage Analytics").setDesc("Enable anonymous usage analytics to improve recommendations").addToggle(e=>{e.setValue(this.progress.userPreferences.enableAnalytics),e.onChange(e=>{this.progress.userPreferences.enableAnalytics=e})})})}renderValidationStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step validation-step");if(t.createEl("h3",{text:"Configuration Validation"}),t.createEl("p",{text:"Testing your configuration and establishing performance baseline..."}),this.config.skipValidation||this.progress.validationResults)this.progress.validationResults&&this.renderValidationResults(t);else{t.createDiv("validation-status").createEl("p",{text:"🧪 Running validation tests...",cls:"validation-loading"});try{this.progress.validationResults=yield this.validateConfiguration(),this.renderValidationResults(t)}catch(e){this.renderValidationError(t,e)}}})}validateConfiguration(){return t(this,void 0,void 0,function*(){var e,t;yield new Promise(e=>setTimeout(e,2e3));const n={transportsWorking:["http"],transportsFailing:[],recommendedConfiguration:{},performanceBaseline:{avgResponseTime:150,reliability:.98,throughput:1e3}};return(null===(e=this.progress.detectedCapabilities)||void 0===e?void 0:e.webSocketSupported)&&n.transportsWorking.push("websocket"),(null===(t=this.progress.detectedCapabilities)||void 0===t?void 0:t.fileSystemAccess)&&n.transportsWorking.push("filesystem"),n})}renderValidationResults(e){const t=e.createDiv("validation-results"),n=this.progress.validationResults;t.createEl("h4",{text:"✅ Validation Complete"});const i=t.createDiv("working-transports");i.createEl("h5",{text:"Working Transports:"});const o=i.createEl("ul");n.transportsWorking.forEach(e=>{o.createEl("li",{text:`✅ ${e.toUpperCase()}`})});const a=t.createDiv("performance-baseline");a.createEl("h5",{text:"Performance Baseline:"});const s=a.createEl("ul");s.createEl("li",{text:`Average Response Time: ${n.performanceBaseline.avgResponseTime}ms`}),s.createEl("li",{text:`Reliability: ${(100*n.performanceBaseline.reliability).toFixed(1)}%`}),s.createEl("li",{text:`Throughput: ${n.performanceBaseline.throughput} requests/min`})}renderValidationError(e,t){const n=e.createDiv("validation-error");n.createEl("h4",{text:"⚠️ Validation Issues"}),n.createEl("p",{text:"Some validation tests failed, but you can still proceed. You can adjust settings later if needed."}),this.plugin.settings.debugMode&&n.createEl("p",{text:`Error: ${t.message}`,cls:"error-details"})}renderCompletionStep(e){return t(this,void 0,void 0,function*(){const t=e.createDiv("onboarding-step completion-step");t.createEl("h3",{text:"🎉 Setup Complete!"}),t.createEl("p",{text:"VaultPilot has been configured with your optimal settings."});const n=t.createDiv("setup-summary");n.createEl("h4",{text:"Configuration Summary:"});const i=n.createEl("ul");i.createEl("li",{text:`Performance Mode: ${this.progress.userPreferences.performanceMode}`}),i.createEl("li",{text:"Real-time Updates: "+(this.progress.userPreferences.enableRealTimeUpdates?"Enabled":"Disabled")}),i.createEl("li",{text:"Analytics: "+(this.progress.userPreferences.enableAnalytics?"Enabled":"Disabled")}),this.progress.detectedCapabilities&&i.createEl("li",{text:`Recommended Transport: ${this.progress.detectedCapabilities.recommendedTransport}`});const o=t.createDiv("next-steps");o.createEl("h4",{text:"What's Next:"});const a=o.createEl("ul");a.createEl("li",{text:"📊 Check the dashboard for real-time status"}),a.createEl("li",{text:"⚙️ Adjust advanced settings as needed"}),a.createEl("li",{text:"💡 Review AI-powered recommendations"}),a.createEl("li",{text:"📈 Monitor performance analytics"})})}updateProgressIndicators(){this.stepElements.forEach((e,t)=>{e.removeClass("active","completed","inactive"),t<this.currentStep?e.addClass("completed"):t===this.currentStep?e.addClass("active"):e.addClass("inactive")});const e=this.progressBar.querySelector(".progress-fill");if(e){const t=(this.currentStep+1)/this.totalSteps*100;e.style.width=`${t}%`}}updateNavigationState(){this.previousButton.setDisabled(0===this.currentStep),this.currentStep===this.totalSteps-1?this.nextButton.setButtonText("Finish"):this.nextButton.setButtonText("Next"),this.currentStep===this.totalSteps-1?this.skipButton.buttonEl.style.display="none":this.skipButton.buttonEl.style.display=""}nextStep(){return t(this,void 0,void 0,function*(){this.currentStep<this.totalSteps-1?(this.progress.completedSteps[this.currentStep]=!0,this.currentStep++,yield this.renderCurrentStep()):yield this.finishOnboarding()})}previousStep(){return t(this,void 0,void 0,function*(){this.currentStep>0&&(this.currentStep--,yield this.renderCurrentStep())})}skipOnboarding(){return t(this,void 0,void 0,function*(){confirm("Are you sure you want to skip the setup wizard? You can access these settings later in the plugin settings.")&&(yield this.finishOnboarding(!0))})}finishOnboarding(){return t(this,arguments,void 0,function*(t=!1){try{t?new e.Notice("⚠️ Onboarding skipped - using default settings"):(yield this.applyConfiguration(),new e.Notice("✅ VaultPilot configuration applied successfully!")),this.plugin.settings.onboardingComplete=!0,yield this.plugin.saveSettings(),this.close()}catch(t){console.error("Failed to apply onboarding configuration:",t),new e.Notice("❌ Failed to apply configuration. Please check settings manually.")}})}applyConfiguration(){return t(this,void 0,void 0,function*(){const e=this.progress.userPreferences;if(this.plugin.settings.performanceMode=e.performanceMode,this.plugin.settings.enableRealTimeUpdates=e.enableRealTimeUpdates,this.plugin.settings.enableAnalytics=e.enableAnalytics,this.progress.detectedCapabilities){const t=this.progress.detectedCapabilities,n={selectionCriteria:this.getSelectionCriteriaForMode(e.performanceMode),fallbackChain:this.buildFallbackChain(t),transportConfigs:{http:{baseUrl:this.plugin.settings.backendUrl},websocket:t.webSocketSupported?{url:this.plugin.settings.webSocketUrl}:void 0,filesystem:t.fileSystemAccess?{basePath:".vaultpilot"}:void 0},autoFailover:!0,debug:this.plugin.settings.debugMode};this.plugin.settings.transportConfig=n}yield this.plugin.saveSettings()})}getSelectionCriteriaForMode(e){switch(e){case"performance":return{latencyWeight:.6,reliabilityWeight:.2,capabilityWeight:.1,costWeight:.1};case"reliability":return{latencyWeight:.1,reliabilityWeight:.6,capabilityWeight:.2,costWeight:.1};default:return{latencyWeight:.3,reliabilityWeight:.3,capabilityWeight:.2,costWeight:.2}}}buildFallbackChain(e){const t=[];return e.webSocketSupported&&t.push("websocket"),e.httpCapabilities&&t.push("http"),e.fileSystemAccess&&t.push("filesystem"),t}onClose(){const{contentEl:e}=this;e.empty()}}class B extends e.Component{constructor(e,t,n={updateInterval:2e3,showAdvancedMetrics:!0,enableRealTimeUpdates:!0}){super(),this.statusCards=new Map,this.isRealTimeEnabled=!0,this.containerEl=e,this.plugin=t,this.config=n,this.isRealTimeEnabled=n.enableRealTimeUpdates}onload(){return t(this,void 0,void 0,function*(){this.initializeDashboard(),this.isRealTimeEnabled&&(this.startRealTimeUpdates(),this.setupEventListeners()),yield this.updateDashboard()})}onunload(){this.stopRealTimeUpdates(),this.removeEventListeners()}initializeDashboard(){this.containerEl.empty(),this.containerEl.addClass("transport-dashboard"),this.createHeader(),this.createSystemHealthSection(),this.createTransportStatusSection(),this.createPerformanceMetricsSection(),this.createChartsSection(),this.createControlsSection()}createHeader(){const e=this.containerEl.createDiv("dashboard-header");e.createEl("h2",{text:"Transport Dashboard"});const t=e.createDiv("last-update");t.createSpan({text:"Last updated: ",cls:"label"});t.createSpan({cls:"timestamp"}).textContent=(new Date).toLocaleTimeString();const n=e.createDiv("realtime-indicator");this.isRealTimeEnabled?n.createSpan({text:"🟢 Real-time",cls:"realtime-active"}):n.createSpan({text:"⚪ Manual refresh",cls:"realtime-inactive"})}createSystemHealthSection(){const e=this.containerEl.createDiv("system-health-section");e.createEl("h3",{text:"System Health"}),this.systemHealthContainer=e.createDiv("system-health-container"),this.renderSystemHealthPlaceholder()}createTransportStatusSection(){const e=this.containerEl.createDiv("transport-status-section");e.createEl("h3",{text:"Transport Status"});const t=e.createDiv("transport-cards-container");[T.HTTP,T.WEBSOCKET,T.FILESYSTEM].forEach(e=>{const n=this.createTransportCard(t,e);this.statusCards.set(e,n)})}createTransportCard(e,t){const n=e.createDiv("transport-status-card");n.addClass(`transport-${t}`),n.addClass("status-unknown");const i=n.createDiv("card-header");i.createEl("h4",{text:t.toUpperCase()});i.createDiv("status-badge").textContent="Unknown";const o=n.createDiv("card-metrics"),a=o.createDiv("metric");a.createSpan({text:"Response Time",cls:"metric-label"}),a.createSpan({text:"--",cls:"metric-value response-time"});const s=o.createDiv("metric");s.createSpan({text:"Success Rate",cls:"metric-label"}),s.createSpan({text:"--",cls:"metric-value success-rate"});const r=o.createDiv("metric");r.createSpan({text:"Errors",cls:"metric-label"}),r.createSpan({text:"--",cls:"metric-value error-count"});n.createDiv("connection-state").createSpan({text:"Disconnected",cls:"connection-status"});const l=n.createDiv("card-actions");l.createEl("button",{text:"Test",cls:"mod-muted"}).onclick=()=>this.testTransport(t);return l.createEl("button",{text:"Switch To",cls:"mod-cta"}).onclick=()=>this.switchToTransport(t),n}createPerformanceMetricsSection(){const e=this.containerEl.createDiv("performance-metrics-section");e.createEl("h3",{text:"Performance Metrics"}),this.metricsContainer=e.createDiv("metrics-container"),this.renderPerformanceMetricsPlaceholder()}createChartsSection(){const e=this.containerEl.createDiv("charts-section");e.createEl("h3",{text:"Performance Trends"}),this.chartsContainer=e.createDiv("charts-container"),this.renderChartsPlaceholder()}createControlsSection(){const e=this.containerEl.createDiv("controls-section").createDiv("dashboard-controls");e.createEl("button",{text:"🔄 Refresh",cls:"mod-cta"}).onclick=()=>this.manualRefresh();e.createEl("button",{text:"📊 Export Data",cls:"mod-muted"}).onclick=()=>this.exportData();e.createEl("button",{text:"⚙️ Settings",cls:"mod-muted"}).onclick=()=>this.openDashboardSettings();const t=e.createDiv("realtime-toggle");t.createSpan({text:"Real-time updates: "});const n=t.createEl("input",{type:"checkbox"});n.checked=this.isRealTimeEnabled,n.onchange=()=>this.toggleRealTimeUpdates(n.checked)}updateDashboard(){return t(this,void 0,void 0,function*(){try{this.currentHealth=yield this.getSystemHealth(),this.renderSystemHealth(this.currentHealth),yield this.updateTransportStatuses(),this.currentMetrics=yield this.getPerformanceMetrics(),this.renderPerformanceMetrics(this.currentMetrics),this.updateTimestamp()}catch(e){console.error("Failed to update dashboard:",e),this.renderError("Failed to update dashboard data")}})}getSystemHealth(){return t(this,void 0,void 0,function*(){this.transportManager;const e={overall:"good",activeTransport:"http",availableTransports:["http","websocket"],lastHealthCheck:new Date,uptime:Date.now()-this.plugin.app.vault.adapter.started||0,totalRequests:Math.floor(1e4*Math.random()),totalErrors:Math.floor(100*Math.random())},t=e.totalErrors/e.totalRequests;return e.overall=t<.01?"excellent":t<.05?"good":t<.1?"fair":t<.2?"poor":"critical",e})}getPerformanceMetrics(){return t(this,void 0,void 0,function*(){return{averageResponseTime:150+100*Math.random(),p95ResponseTime:300+200*Math.random(),requestsPerMinute:100+50*Math.random(),errorRate:.05*Math.random(),transportDistribution:{http:.7,websocket:.25,filesystem:.05},trends:{responseTime:this.generateTrendData(150,20),errorRate:this.generateTrendData(.02,.01),throughput:this.generateTrendData(100,20),timestamps:this.generateTimestamps(20)}}})}generateTrendData(e,t,n=20){const i=[];for(let o=0;o<n;o++)i.push(e+(Math.random()-.5)*t*2);return i}generateTimestamps(e){const t=[],n=new Date;for(let i=e-1;i>=0;i--)t.push(new Date(n.getTime()-6e4*i));return t}updateTransportStatuses(){return t(this,void 0,void 0,function*(){const e=[T.HTTP,T.WEBSOCKET,T.FILESYSTEM];for(const t of e){const e=yield this.getTransportStatus(t);this.updateTransportCard(t,e)}})}getTransportStatus(e){return t(this,void 0,void 0,function*(){const t=Math.random()>.2,n=100+200*Math.random(),i=.9+.1*Math.random(),o={type:e,status:t?i>.95?"healthy":"degraded":"disconnected",lastResponseTime:n,successRate:i,errorCount:Math.floor(10*Math.random()),capabilities:this.getTransportCapabilities(e),connectionState:t?"connected":"disconnected"};return t||(o.lastError="Connection timeout"),o})}getTransportCapabilities(e){switch(e){case T.HTTP:return["RESTful API","Connection Pooling","Retry Logic"];case T.WEBSOCKET:return["Real-time","Bidirectional","Auto-reconnect"];case T.FILESYSTEM:return["Local Storage","File Locking","Offline Support"];default:return[]}}updateTransportCard(e,t){const n=this.statusCards.get(e);if(!n)return;n.className=`transport-status-card transport-${e} status-${t.status}`;n.querySelector(".status-badge").textContent=t.status.charAt(0).toUpperCase()+t.status.slice(1);n.querySelector(".response-time").textContent=`${t.lastResponseTime.toFixed(0)}ms`;n.querySelector(".success-rate").textContent=`${(100*t.successRate).toFixed(1)}%`;n.querySelector(".error-count").textContent=t.errorCount.toString();const i=n.querySelector(".connection-status");i.textContent=t.connectionState.charAt(0).toUpperCase()+t.connectionState.slice(1),i.className=`connection-status state-${t.connectionState}`;n.querySelector(".mod-cta").disabled="failing"===t.status||"disconnected"===t.connectionState}renderSystemHealth(e){this.systemHealthContainer.empty();const t=this.systemHealthContainer.createDiv("health-grid"),n=t.createDiv("health-item overall-health");n.addClass(`health-${e.overall}`),n.createEl("h4",{text:"Overall Health"}),n.createEl("span",{text:e.overall.charAt(0).toUpperCase()+e.overall.slice(1),cls:"health-value"});const i=t.createDiv("health-item");i.createEl("h4",{text:"Active Transport"}),i.createEl("span",{text:e.activeTransport.toUpperCase(),cls:"health-value"});const o=t.createDiv("health-item");o.createEl("h4",{text:"Uptime"}),o.createEl("span",{text:this.formatUptime(e.uptime),cls:"health-value"});const a=t.createDiv("health-item");a.createEl("h4",{text:"Total Requests"}),a.createEl("span",{text:e.totalRequests.toLocaleString(),cls:"health-value"});const s=t.createDiv("health-item");s.createEl("h4",{text:"Error Rate"});const r=e.totalErrors/e.totalRequests*100;s.createEl("span",{text:`${r.toFixed(2)}%`,cls:"health-value"})}renderPerformanceMetrics(e){this.metricsContainer.empty();const t=this.metricsContainer.createDiv("metrics-grid"),n=t.createDiv("metric-item");n.createEl("h4",{text:"Avg Response Time"}),n.createEl("span",{text:`${e.averageResponseTime.toFixed(0)}ms`,cls:"metric-value"});const i=t.createDiv("metric-item");i.createEl("h4",{text:"P95 Response Time"}),i.createEl("span",{text:`${e.p95ResponseTime.toFixed(0)}ms`,cls:"metric-value"});const o=t.createDiv("metric-item");o.createEl("h4",{text:"Requests/Min"}),o.createEl("span",{text:e.requestsPerMinute.toFixed(0),cls:"metric-value"});const a=t.createDiv("metric-item");a.createEl("h4",{text:"Error Rate"}),a.createEl("span",{text:`${(100*e.errorRate).toFixed(2)}%`,cls:"metric-value"});const s=this.metricsContainer.createDiv("transport-distribution");s.createEl("h4",{text:"Transport Usage Distribution"});const r=s.createDiv("distribution-bars");Object.entries(e.transportDistribution).forEach(([e,t])=>{const n=r.createDiv("distribution-bar");n.createSpan({text:e.toUpperCase(),cls:"transport-label"});n.createDiv("bar-container").createDiv("bar-fill").style.width=100*t+"%",n.createSpan({text:`${(100*t).toFixed(1)}%`,cls:"percentage-label"})})}renderSystemHealthPlaceholder(){this.systemHealthContainer.createEl("p",{text:"Loading system health data...",cls:"placeholder-text"})}renderPerformanceMetricsPlaceholder(){this.metricsContainer.createEl("p",{text:"Loading performance metrics...",cls:"placeholder-text"})}renderChartsPlaceholder(){this.chartsContainer.createEl("p",{text:"Performance charts will be displayed here",cls:"placeholder-text"})}renderError(e){this.containerEl.createDiv("dashboard-error").createEl("p",{text:`Error: ${e}`,cls:"error-message"})}formatUptime(e){const t=Math.floor(e/1e3),n=Math.floor(t/60),i=Math.floor(n/60),o=Math.floor(i/24);return o>0?`${o}d ${i%24}h`:i>0?`${i}h ${n%60}m`:`${n}m ${t%60}s`}updateTimestamp(){const e=this.containerEl.querySelector(".timestamp");e&&(e.textContent=(new Date).toLocaleTimeString())}startRealTimeUpdates(){this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=window.setInterval(()=>{this.updateDashboard()},this.config.updateInterval)}stopRealTimeUpdates(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=void 0)}setupEventListeners(){this.transportManager&&console.log("Setting up transport event listeners")}removeEventListeners(){this.transportManager&&console.log("Removing transport event listeners")}onTransportSwitched(t){var n;new e.Notice(`Transport switched to ${(null===(n=t.transport)||void 0===n?void 0:n.toUpperCase())||"unknown"}`),this.updateDashboard()}onHealthChanged(e){console.log("Health changed:",e),this.updateDashboard()}onErrorOccurred(e){console.warn("Transport error occurred:",e),this.updateDashboard()}toggleRealTimeUpdates(t){this.isRealTimeEnabled=t,this.config.enableRealTimeUpdates=t,t?(this.startRealTimeUpdates(),new e.Notice("Real-time updates enabled")):(this.stopRealTimeUpdates(),new e.Notice("Real-time updates disabled"));const n=this.containerEl.querySelector(".realtime-indicator");n&&(n.empty(),t?n.createSpan({text:"🟢 Real-time",cls:"realtime-active"}):n.createSpan({text:"⚪ Manual refresh",cls:"realtime-inactive"}))}manualRefresh(){return t(this,void 0,void 0,function*(){const t=this.containerEl.querySelector(".mod-cta");t&&(t.disabled=!0,t.textContent="🔄 Refreshing...");try{yield this.updateDashboard(),new e.Notice("Dashboard refreshed successfully")}catch(t){new e.Notice("Failed to refresh dashboard"),console.error("Manual refresh failed:",t)}finally{t&&(t.disabled=!1,t.textContent="🔄 Refresh")}})}testTransport(n){return t(this,void 0,void 0,function*(){new e.Notice(`Testing ${n} transport...`);try{const t=yield this.performTransportTest(n);t.success?new e.Notice(`✅ ${n} transport test successful`):new e.Notice(`❌ ${n} transport test failed: ${t.error}`);const i=yield this.getTransportStatus(n);this.updateTransportCard(n,i)}catch(t){new e.Notice(`❌ ${n} transport test failed`),console.error(`Transport test failed for ${n}:`,t)}})}performTransportTest(e){return t(this,void 0,void 0,function*(){yield new Promise(e=>setTimeout(e,1e3));const e=Math.random()>.2;return{success:e,error:e?void 0:"Connection timeout"}})}switchToTransport(n){return t(this,void 0,void 0,function*(){if(confirm(`Switch to ${n} transport as primary?`))try{new e.Notice(`✅ Switched to ${n} transport`),yield this.updateDashboard()}catch(t){new e.Notice(`❌ Failed to switch to ${n} transport`),console.error("Transport switch failed:",t)}})}exportData(){const t={timestamp:(new Date).toISOString(),systemHealth:this.currentHealth,performanceMetrics:this.currentMetrics,exportedBy:"VaultPilot Transport Dashboard"},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`vaultpilot-dashboard-${(new Date).toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(i),new e.Notice("Dashboard data exported successfully")}openDashboardSettings(){new e.Notice("Dashboard settings will open in a future update")}}class j extends e.Component{constructor(e,t,n={showExpertOptions:!1,enableRealTimeValidation:!0,allowImportExport:!0}){super(),this.profiles=[],this.hasUnsavedChanges=!1,this.containerEl=e,this.plugin=t,this.config=n,this.currentConfiguration=this.getDefaultConfiguration(),this.loadProfiles()}onload(){return t(this,void 0,void 0,function*(){this.initializeInterface(),yield this.loadCurrentConfiguration(),this.renderSettings(),this.config.enableRealTimeValidation&&this.startRealTimeValidation()})}onunload(){if(this.validationTimeout&&clearTimeout(this.validationTimeout),this.hasUnsavedChanges){confirm("You have unsaved changes. Would you like to save them?")&&this.saveConfiguration()}}initializeInterface(){this.containerEl.empty(),this.containerEl.addClass("advanced-settings"),this.createHeader(),this.createProfileManagement(),this.createValidationSection(),this.createConfigurationSections(),this.createPreviewSection(),this.createActionButtons()}createHeader(){const e=this.containerEl.createDiv("settings-header");e.createEl("h2",{text:"Advanced Settings"}),e.createEl("p",{text:"Fine-tune VaultPilot configuration for optimal performance",cls:"settings-subtitle"});const t=e.createDiv("expert-toggle").createEl("label");t.createSpan({text:"Expert Mode"});const n=t.createEl("input",{type:"checkbox"});n.checked=this.config.showExpertOptions,n.addEventListener("change",()=>{this.config.showExpertOptions=n.checked,this.updateExpertOptionsVisibility()})}createProfileManagement(){const e=this.containerEl.createDiv("profile-management-section");e.createEl("h3",{text:"Configuration Profiles"});const t=e.createDiv("profile-controls"),n=t.createDiv("profile-selector-container");n.createSpan({text:"Current Profile:",cls:"profile-label"}),this.profileSelector=n.createEl("select",{cls:"profile-selector"}),this.updateProfileSelector(),this.profileSelector.addEventListener("change",()=>{this.loadProfile(this.profileSelector.value)});const i=t.createDiv("profile-actions");i.createEl("button",{text:"Save as New Profile",cls:"mod-muted"}).addEventListener("click",()=>this.showSaveProfileModal());if(i.createEl("button",{text:"Delete Profile",cls:"mod-warning"}).addEventListener("click",()=>this.deleteCurrentProfile()),this.config.allowImportExport){i.createEl("button",{text:"Import",cls:"mod-muted"}).addEventListener("click",()=>this.importConfiguration());i.createEl("button",{text:"Export",cls:"mod-muted"}).addEventListener("click",()=>this.exportConfiguration())}}createValidationSection(){const e=this.containerEl.createDiv("validation-section");e.createEl("h3",{text:"Configuration Status"}),this.validationContainer=e.createDiv("validation-container"),this.renderValidationPlaceholder()}createConfigurationSections(){this.configurationContainer=this.containerEl.createDiv("configuration-sections"),this.createTransportSettings(),this.createPerformanceSettings(),this.createMonitoringSettings(),this.createUISettings(),this.createPrivacySettings()}createTransportSettings(){const t=this.configurationContainer.createDiv("config-section transport-section");t.createEl("h4",{text:"🚀 Transport Configuration"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Primary Transport").setDesc("Choose the preferred transport method").addDropdown(e=>{e.addOption(T.HTTP,"HTTP (Reliable)"),e.addOption(T.WEBSOCKET,"WebSocket (Real-time)"),e.addOption(T.FILESYSTEM,"FileSystem (Offline)"),e.setValue(this.currentConfiguration.transport.primaryTransport),e.onChange(e=>{this.currentConfiguration.transport.primaryTransport=e,this.onConfigurationChange()})}),this.createFallbackChainConfig(n),this.createSelectionCriteriaConfig(n),this.createTimeoutConfig(n),this.createRetryPolicyConfig(n)}createFallbackChainConfig(t){const n=new e.Setting(t).setName("Fallback Chain").setDesc("Configure transport fallback order").controlEl.createDiv("fallback-chain-config"),i=n.createDiv("chain-display");this.updateFallbackChainDisplay(i);const o=n.createDiv("add-transport-buttons");[T.HTTP,T.WEBSOCKET,T.FILESYSTEM].forEach(e=>{o.createEl("button",{text:`Add ${e.toUpperCase()}`,cls:"mod-muted add-transport-btn"}).addEventListener("click",()=>{this.currentConfiguration.transport.fallbackChain.includes(e)||(this.currentConfiguration.transport.fallbackChain.push(e),this.updateFallbackChainDisplay(i),this.onConfigurationChange())})})}updateFallbackChainDisplay(e){e.empty();const t=this.currentConfiguration.transport.fallbackChain;t.forEach((n,i)=>{const o=e.createDiv("chain-item");o.createSpan({text:`${i+1}. ${n.toUpperCase()}`,cls:"chain-label"});const a=o.createDiv("chain-actions");if(i>0){a.createEl("button",{text:"↑",cls:"mod-muted chain-btn"}).addEventListener("click",()=>{[t[i],t[i-1]]=[t[i-1],t[i]],this.updateFallbackChainDisplay(e),this.onConfigurationChange()})}if(i<t.length-1){a.createEl("button",{text:"↓",cls:"mod-muted chain-btn"}).addEventListener("click",()=>{[t[i],t[i+1]]=[t[i+1],t[i]],this.updateFallbackChainDisplay(e),this.onConfigurationChange()})}a.createEl("button",{text:"✕",cls:"mod-warning chain-btn"}).addEventListener("click",()=>{t.splice(i,1),this.updateFallbackChainDisplay(e),this.onConfigurationChange()})})}createSelectionCriteriaConfig(t){const n=t.createDiv("selection-criteria-container");n.createEl("h5",{text:"Transport Selection Criteria"});const i=this.currentConfiguration.transport.selectionCriteria;new e.Setting(n).setName("Latency Priority").setDesc("How much to prioritize low latency (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.latencyWeight),e.onChange(e=>{i.latencyWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Reliability Priority").setDesc("How much to prioritize reliability (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.reliabilityWeight),e.onChange(e=>{i.reliabilityWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Feature Priority").setDesc("How much to prioritize advanced features (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.capabilityWeight),e.onChange(e=>{i.capabilityWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Efficiency Priority").setDesc("How much to prioritize resource efficiency (0-100%)").addSlider(e=>{e.setLimits(0,100,5),e.setValue(100*i.costWeight),e.onChange(e=>{i.costWeight=e/100,this.normalizeSelectionCriteria(),this.onConfigurationChange()}),e.setDynamicTooltip()})}createTimeoutConfig(t){if(!this.config.showExpertOptions)return;const n=t.createDiv("timeout-config-container expert-option");n.createEl("h5",{text:"Timeout Configuration"});const i=this.currentConfiguration.transport.timeouts;new e.Setting(n).setName("Connection Timeout").setDesc("Maximum time to wait for initial connection (ms)").addText(e=>{e.setValue(i.connection.toString()),e.onChange(e=>{const t=parseInt(e,10);!isNaN(t)&&t>0&&(i.connection=t,this.onConfigurationChange())})}),new e.Setting(n).setName("Request Timeout").setDesc("Maximum time to wait for request completion (ms)").addText(e=>{e.setValue(i.request.toString()),e.onChange(e=>{const t=parseInt(e,10);!isNaN(t)&&t>0&&(i.request=t,this.onConfigurationChange())})})}createRetryPolicyConfig(t){if(!this.config.showExpertOptions)return;const n=t.createDiv("retry-policy-container expert-option");n.createEl("h5",{text:"Retry Policy"});const i=this.currentConfiguration.transport.retryPolicy;new e.Setting(n).setName("Max Retry Attempts").setDesc("Maximum number of retry attempts for failed requests").addSlider(e=>{e.setLimits(0,10,1),e.setValue(i.maxAttempts),e.onChange(e=>{i.maxAttempts=e,this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Backoff Multiplier").setDesc("Exponential backoff multiplier for retry delays").addSlider(e=>{e.setLimits(1,5,.1),e.setValue(i.backoffMultiplier),e.onChange(e=>{i.backoffMultiplier=e,this.onConfigurationChange()}),e.setDynamicTooltip()})}createPerformanceSettings(){const t=this.configurationContainer.createDiv("config-section performance-section");t.createEl("h4",{text:"⚡ Performance Configuration"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Performance Mode").setDesc("Balance between speed, reliability, and resource usage").addDropdown(e=>{e.addOption("performance","Performance (Prioritize Speed)"),e.addOption("balanced","Balanced (Recommended)"),e.addOption("reliability","Reliability (Prioritize Stability)"),e.setValue(this.currentConfiguration.performance.mode),e.onChange(e=>{this.currentConfiguration.performance.mode=e,this.applyPerformanceModePreset(e),this.onConfigurationChange()})}),new e.Setting(n).setName("Connection Pooling").setDesc("Reuse connections to improve performance").addToggle(e=>{e.setValue(this.currentConfiguration.performance.enableConnectionPooling),e.onChange(e=>{this.currentConfiguration.performance.enableConnectionPooling=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Compression").setDesc("Enable data compression to reduce bandwidth usage").addToggle(e=>{e.setValue(this.currentConfiguration.performance.enableCompression),e.onChange(e=>{this.currentConfiguration.performance.enableCompression=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Response Caching").setDesc("Cache responses to improve performance").addToggle(e=>{e.setValue(this.currentConfiguration.performance.enableCaching),e.onChange(e=>{this.currentConfiguration.performance.enableCaching=e,this.onConfigurationChange()})}),this.config.showExpertOptions&&(new e.Setting(n).setName("Max Concurrent Requests").setDesc("Maximum number of simultaneous requests").setClass("expert-option").addSlider(e=>{e.setLimits(1,20,1),e.setValue(this.currentConfiguration.performance.maxConcurrentRequests),e.onChange(e=>{this.currentConfiguration.performance.maxConcurrentRequests=e,this.onConfigurationChange()}),e.setDynamicTooltip()}),new e.Setting(n).setName("Cache Size (MB)").setDesc("Maximum cache size in megabytes").setClass("expert-option").addSlider(e=>{e.setLimits(1,100,5),e.setValue(this.currentConfiguration.performance.cacheSize),e.onChange(e=>{this.currentConfiguration.performance.cacheSize=e,this.onConfigurationChange()}),e.setDynamicTooltip()}))}createMonitoringSettings(){const t=this.configurationContainer.createDiv("config-section monitoring-section");t.createEl("h4",{text:"📊 Monitoring Configuration"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Health Checks").setDesc("Monitor transport health automatically").addToggle(e=>{e.setValue(this.currentConfiguration.monitoring.enableHealthChecks),e.onChange(e=>{this.currentConfiguration.monitoring.enableHealthChecks=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Performance Metrics").setDesc("Collect detailed performance metrics").addToggle(e=>{e.setValue(this.currentConfiguration.monitoring.enableMetrics),e.onChange(e=>{this.currentConfiguration.monitoring.enableMetrics=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Predictive Alerts").setDesc("Get early warnings about potential issues").addToggle(e=>{e.setValue(this.currentConfiguration.monitoring.enablePredictiveAlerts),e.onChange(e=>{this.currentConfiguration.monitoring.enablePredictiveAlerts=e,this.onConfigurationChange()})})}createUISettings(){const t=this.configurationContainer.createDiv("config-section ui-section");t.createEl("h4",{text:"🎨 User Interface"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Theme").setDesc("Choose the interface theme").addDropdown(e=>{e.addOption("auto","Auto (Follow Obsidian)"),e.addOption("light","Light"),e.addOption("dark","Dark"),e.setValue(this.currentConfiguration.ui.theme),e.onChange(e=>{this.currentConfiguration.ui.theme=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Animations").setDesc("Enable UI animations and transitions").addToggle(e=>{e.setValue(this.currentConfiguration.ui.enableAnimations),e.onChange(e=>{this.currentConfiguration.ui.enableAnimations=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Advanced Metrics").setDesc("Show detailed metrics in dashboard").addToggle(e=>{e.setValue(this.currentConfiguration.ui.showAdvancedMetrics),e.onChange(e=>{this.currentConfiguration.ui.showAdvancedMetrics=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Dashboard Refresh Rate").setDesc("How often to update the dashboard (seconds)").addSlider(e=>{e.setLimits(1,60,1),e.setValue(this.currentConfiguration.ui.dashboardRefreshRate),e.onChange(e=>{this.currentConfiguration.ui.dashboardRefreshRate=e,this.onConfigurationChange()}),e.setDynamicTooltip()})}createPrivacySettings(){const t=this.configurationContainer.createDiv("config-section privacy-section");t.createEl("h4",{text:"🔒 Privacy & Data"});const n=t.createDiv("settings-container");new e.Setting(n).setName("Usage Analytics").setDesc("Help improve VaultPilot by sharing anonymous usage data").addToggle(e=>{e.setValue(this.currentConfiguration.privacy.enableAnalytics),e.onChange(e=>{this.currentConfiguration.privacy.enableAnalytics=e,this.onConfigurationChange()})}),new e.Setting(n).setName("Data Retention").setDesc("How long to keep performance and usage data (days)").addSlider(e=>{e.setLimits(1,90,1),e.setValue(this.currentConfiguration.privacy.dataRetentionDays),e.onChange(e=>{this.currentConfiguration.privacy.dataRetentionDays=e,this.onConfigurationChange()}),e.setDynamicTooltip()})}createPreviewSection(){const e=this.containerEl.createDiv("preview-section");e.createEl("h3",{text:"Configuration Preview"}),this.previewContainer=e.createDiv("preview-container"),this.updatePreview()}createActionButtons(){const e=this.containerEl.createDiv("settings-actions");e.createEl("button",{text:"Save Configuration",cls:"mod-cta"}).addEventListener("click",()=>this.saveConfiguration());e.createEl("button",{text:"Reset to Defaults",cls:"mod-warning"}).addEventListener("click",()=>this.resetToDefaults());e.createEl("button",{text:"Test Configuration",cls:"mod-muted"}).addEventListener("click",()=>this.testConfiguration())}renderSettings(){this.onConfigurationChange()}loadCurrentConfiguration(){return t(this,void 0,void 0,function*(){try{this.plugin.settings.advancedConfiguration&&(this.currentConfiguration=Object.assign({},this.plugin.settings.advancedConfiguration))}catch(t){console.error("Failed to load current configuration:",t),new e.Notice("Failed to load configuration, using defaults")}})}getDefaultConfiguration(){return{transport:{primaryTransport:T.HTTP,fallbackChain:[T.HTTP,T.WEBSOCKET],selectionCriteria:{latencyWeight:.3,reliabilityWeight:.3,capabilityWeight:.2,costWeight:.2},timeouts:{connection:5e3,request:3e4,retry:1e3},retryPolicy:{maxAttempts:3,backoffMultiplier:2,maxBackoffTime:1e4}},performance:{mode:"balanced",enableConnectionPooling:!0,maxConcurrentRequests:5,enableCompression:!0,enableCaching:!0,cacheSize:10},monitoring:{enableHealthChecks:!0,healthCheckInterval:3e4,enableMetrics:!0,metricsRetention:7,enablePredictiveAlerts:!0},ui:{theme:"auto",enableAnimations:!0,showAdvancedMetrics:!1,dashboardRefreshRate:2,enableNotifications:!0},privacy:{enableAnalytics:!0,shareUsageData:!1,dataRetentionDays:30}}}onConfigurationChange(){this.hasUnsavedChanges=!0,this.config.enableRealTimeValidation&&this.scheduleValidation(),this.updatePreview()}scheduleValidation(){this.validationTimeout&&clearTimeout(this.validationTimeout),this.validationTimeout=window.setTimeout(()=>{this.validateConfiguration()},500)}validateConfiguration(){return t(this,void 0,void 0,function*(){const e=[],t=[];0===this.currentConfiguration.transport.fallbackChain.length&&e.push({field:"transport.fallbackChain",message:"At least one transport must be configured in the fallback chain",severity:"error",suggestion:"Add at least one transport to the fallback chain"});const n=this.currentConfiguration.transport.selectionCriteria,i=n.latencyWeight+n.reliabilityWeight+n.capabilityWeight+n.costWeight;Math.abs(i-1)>.01&&t.push({field:"transport.selectionCriteria",message:"Selection criteria weights should sum to 100%",impact:"medium",recommendation:"Adjust the weights so they total 100%"});const o=this.currentConfiguration.transport.timeouts;o.connection>=o.request&&t.push({field:"transport.timeouts",message:"Connection timeout should be less than request timeout",impact:"low",recommendation:"Set connection timeout to be less than request timeout"}),this.currentConfiguration.performance.maxConcurrentRequests>10&&t.push({field:"performance.maxConcurrentRequests",message:"High concurrent request limit may impact performance",impact:"medium",recommendation:"Consider reducing to 5-10 for optimal performance"});const a=this.estimateConfigurationImpact(),s={isValid:0===e.length,errors:e,warnings:t,estimatedImpact:a};return this.validationResult=s,this.renderValidationResult(s),s})}estimateConfigurationImpact(){let e=0,t=0,n=0;const i=this.currentConfiguration;switch(i.performance.mode){case"performance":e+=20,t-=5,n+=15;break;case"reliability":e-=5,t+=20,n+=5}return i.performance.enableConnectionPooling&&(e+=15,n+=10),i.performance.enableCompression&&(e+=5,n+=5),i.performance.enableCaching&&(e+=10,n+=i.performance.cacheSize),{performanceChange:Math.max(-50,Math.min(50,e)),reliabilityChange:Math.max(-50,Math.min(50,t)),resourceUsage:Math.max(0,Math.min(100,n))}}renderValidationResult(e){if(this.validationContainer.empty(),e.isValid&&0===e.warnings.length){this.validationContainer.createDiv("validation-success").createSpan({text:"✅ Configuration is valid",cls:"validation-message"})}else e.errors.forEach(e=>{const t=this.validationContainer.createDiv("validation-error");t.createSpan({text:"❌",cls:"validation-icon"}),t.createSpan({text:e.message,cls:"validation-message"}),e.suggestion&&t.createSpan({text:e.suggestion,cls:"validation-suggestion"})}),e.warnings.forEach(e=>{const t=this.validationContainer.createDiv("validation-warning");t.createSpan({text:"⚠️",cls:"validation-icon"}),t.createSpan({text:e.message,cls:"validation-message"}),e.recommendation&&t.createSpan({text:e.recommendation,cls:"validation-suggestion"})});const t=e.estimatedImpact,n=this.validationContainer.createDiv("validation-impact");n.createEl("h5",{text:"Estimated Impact:"});const i=n.createDiv("impact-grid"),o=i.createDiv("impact-item");o.createSpan({text:"Performance:",cls:"impact-label"}),o.createSpan({text:`${t.performanceChange>0?"+":""}${t.performanceChange}%`,cls:"impact-value "+(t.performanceChange>0?"positive":t.performanceChange<0?"negative":"neutral")});const a=i.createDiv("impact-item");a.createSpan({text:"Reliability:",cls:"impact-label"}),a.createSpan({text:`${t.reliabilityChange>0?"+":""}${t.reliabilityChange}%`,cls:"impact-value "+(t.reliabilityChange>0?"positive":t.reliabilityChange<0?"negative":"neutral")});const s=i.createDiv("impact-item");s.createSpan({text:"Resource Usage:",cls:"impact-label"}),s.createSpan({text:`${t.resourceUsage}%`,cls:"impact-value "+(t.resourceUsage>70?"high":t.resourceUsage>30?"medium":"low")})}renderValidationPlaceholder(){this.validationContainer.createEl("p",{text:"Configuration validation will appear here...",cls:"validation-placeholder"})}updatePreview(){this.previewContainer.empty();this.previewContainer.createEl("pre",{cls:"config-preview"}).textContent=JSON.stringify(this.currentConfiguration,null,2)}normalizeSelectionCriteria(){const e=this.currentConfiguration.transport.selectionCriteria,t=e.latencyWeight+e.reliabilityWeight+e.capabilityWeight+e.costWeight;t>0&&(e.latencyWeight/=t,e.reliabilityWeight/=t,e.capabilityWeight/=t,e.costWeight/=t)}applyPerformanceModePreset(e){const t=this.currentConfiguration.performance;switch(e){case"performance":t.enableConnectionPooling=!0,t.maxConcurrentRequests=10,t.enableCompression=!1,t.enableCaching=!0;break;case"reliability":t.enableConnectionPooling=!0,t.maxConcurrentRequests=3,t.enableCompression=!0,t.enableCaching=!1;break;default:t.enableConnectionPooling=!0,t.maxConcurrentRequests=5,t.enableCompression=!0,t.enableCaching=!0}}updateExpertOptionsVisibility(){this.containerEl.querySelectorAll(".expert-option").forEach(e=>{this.config.showExpertOptions?e.removeClass("hidden"):e.addClass("hidden")})}updateProfileSelector(){this.profileSelector.empty();this.profileSelector.createEl("option",{value:"default"}).textContent="Default Configuration",this.profiles.forEach(e=>{this.profileSelector.createEl("option",{value:e.id}).textContent=e.name})}loadProfiles(){try{const e=this.plugin.settings.configurationProfiles||[];this.profiles=e.map(e=>Object.assign(Object.assign({},e),{created:new Date(e.created),lastModified:new Date(e.lastModified)}))}catch(e){console.error("Failed to load configuration profiles:",e),this.profiles=[]}}loadProfile(e){if("default"===e)this.currentConfiguration=this.getDefaultConfiguration();else{const t=this.profiles.find(t=>t.id===e);t&&(this.currentConfiguration=Object.assign({},t.config))}this.renderSettings(),this.onConfigurationChange()}showSaveProfileModal(){const e=prompt("Enter profile name:");if(!e)return;const t=prompt("Enter profile description (optional):")||"";this.saveAsProfile(e,t)}saveAsProfile(t,n){const i={id:`profile-${Date.now()}`,name:t,description:n,config:Object.assign({},this.currentConfiguration),created:new Date,lastModified:new Date,isDefault:!1};this.profiles.push(i),this.updateProfileSelector(),this.saveProfiles(),new e.Notice(`Profile "${t}" saved successfully`)}deleteCurrentProfile(){const t=this.profileSelector.value;if("default"===t)return void new e.Notice("Cannot delete the default profile");const n=this.profiles.find(e=>e.id===t);if(!n)return;confirm(`Delete profile "${n.name}"?`)&&(this.profiles=this.profiles.filter(e=>e.id!==t),this.updateProfileSelector(),this.saveProfiles(),this.loadProfile("default"),new e.Notice(`Profile "${n.name}" deleted`))}saveConfiguration(){return t(this,void 0,void 0,function*(){try{if(!(yield this.validateConfiguration()).isValid){if(!confirm("Configuration has errors. Save anyway?"))return}this.plugin.settings.advancedConfiguration=Object.assign({},this.currentConfiguration),yield this.plugin.saveSettings(),this.hasUnsavedChanges=!1,new e.Notice("✅ Configuration saved successfully")}catch(t){console.error("Failed to save configuration:",t),new e.Notice("❌ Failed to save configuration")}})}resetToDefaults(){confirm("Reset all settings to default values? This cannot be undone.")&&(this.currentConfiguration=this.getDefaultConfiguration(),this.renderSettings(),this.onConfigurationChange(),new e.Notice("Configuration reset to defaults"))}testConfiguration(){return t(this,void 0,void 0,function*(){new e.Notice("Testing configuration...");try{yield new Promise(e=>setTimeout(e,2e3));const t={success:Math.random()>.2,latency:200*Math.random()+50,errors:Math.random()>.8?["Connection timeout"]:[]};t.success?new e.Notice(`✅ Configuration test passed (${t.latency.toFixed(0)}ms average)`):new e.Notice(`❌ Configuration test failed: ${t.errors.join(", ")}`)}catch(t){console.error("Configuration test failed:",t),new e.Notice("❌ Configuration test failed")}})}exportConfiguration(){const t={version:"1.0",timestamp:(new Date).toISOString(),configuration:this.currentConfiguration,profiles:this.profiles},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`vaultpilot-config-${(new Date).toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(i),new e.Notice("Configuration exported successfully")}importConfiguration(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=t=>{var n;const i=null===(n=t.target.files)||void 0===n?void 0:n[0];if(!i)return;const o=new FileReader;o.onload=t=>{var n;try{const i=JSON.parse(null===(n=t.target)||void 0===n?void 0:n.result);i.configuration&&(this.currentConfiguration=i.configuration,this.renderSettings(),this.onConfigurationChange(),new e.Notice("Configuration imported successfully")),i.profiles&&(this.profiles=i.profiles.map(e=>Object.assign(Object.assign({},e),{created:new Date(e.created),lastModified:new Date(e.lastModified)})),this.updateProfileSelector(),this.saveProfiles())}catch(t){console.error("Failed to import configuration:",t),new e.Notice("❌ Failed to import configuration: Invalid file format")}},o.readAsText(i)},t.click()}saveProfiles(){try{this.plugin.settings.configurationProfiles=this.profiles,this.plugin.saveSettings()}catch(e){console.error("Failed to save profiles:",e)}}startRealTimeValidation(){console.log("Real-time validation enabled")}}!function(e){e.TRANSPORT_OPTIMIZATION="transport_optimization",e.PERFORMANCE_TUNING="performance_tuning",e.ERROR_REDUCTION="error_reduction",e.COST_OPTIMIZATION="cost_optimization",e.FEATURE_ADOPTION="feature_adoption",e.CONFIGURATION_IMPROVEMENT="configuration_improvement",e.PROACTIVE_MAINTENANCE="proactive_maintenance"}(A||(A={}));class K{constructor(){this.performanceHistory=[],this.behaviorPatterns=new Map,this.appliedRecommendations=new Map,this.insightCache=new Map,this.predictionModels=new Map,this.ANALYSIS_WINDOW=6048e5,this.MIN_DATA_POINTS=10,this.CONFIDENCE_THRESHOLD=.7,this.initializePredictionModels()}generateRecommendations(e){return t(this,void 0,void 0,function*(){const t=[];try{const n=yield this.analyzeOptimizationOpportunities(e),i=yield this.generateTransportRecommendations(e,n);t.push(...i);const o=yield this.generatePerformanceRecommendations(e,n);t.push(...o);const a=yield this.generateConfigurationRecommendations(e);t.push(...a);const s=yield this.generateMaintenanceRecommendations(e);t.push(...s);const r=this.prioritizeRecommendations(t);return r.forEach(e=>{this.appliedRecommendations.set(e.id,e)}),r}catch(e){return console.error("Failed to generate recommendations:",e),[]}})}analyzeOptimizationOpportunities(e){return t(this,void 0,void 0,function*(){const t=[];e.performanceMetrics.errorRate>.05&&t.push({area:"transport",impact:"high",effort:"medium",description:"High error rate detected, transport optimization recommended",metrics:{currentValue:e.performanceMetrics.errorRate,potentialValue:.01,improvement:(e.performanceMetrics.errorRate-.01)/e.performanceMetrics.errorRate}}),e.performanceMetrics.averageLatency>500&&t.push({area:"configuration",impact:"medium",effort:"low",description:"High latency detected, configuration tuning recommended",metrics:{currentValue:e.performanceMetrics.averageLatency,potentialValue:200,improvement:(e.performanceMetrics.averageLatency-200)/e.performanceMetrics.averageLatency}});const n=Object.values(e.performanceMetrics.transportUsage),i=Math.max(...n),o=Math.min(...n);return i/(o||.001)>10&&t.push({area:"usage",impact:"medium",effort:"low",description:"Unbalanced transport usage detected, load balancing recommended",metrics:{currentValue:i/(o||.001),potentialValue:3,improvement:.3}}),t})}generateTransportRecommendations(e,n){return t(this,void 0,void 0,function*(){const t=[],n=yield this.determineOptimalTransport(e);return n!==e.currentTransport&&t.push({id:`transport-switch-${Date.now()}`,type:A.TRANSPORT_OPTIMIZATION,priority:"high",title:`Switch to ${n} Transport`,description:`Based on your usage patterns and environment, ${n} transport would provide better performance.`,rationale:this.generateTransportSwitchRationale(e,n),expectedImpact:{performanceImprovement:25,errorReduction:40,reliabilityImprovement:30,confidenceScore:.85},implementation:{difficulty:"easy",estimatedTime:"1 minute",steps:[{id:"switch-transport",title:"Switch Primary Transport",description:`Change primary transport to ${n}`,action:"automatic"}],reversible:!0,riskLevel:"low"},category:"Transport",tags:["performance","optimization","transport"],created:new Date}),e.performanceMetrics.errorRate>.02&&t.push({id:`fallback-optimization-${Date.now()}`,type:A.TRANSPORT_OPTIMIZATION,priority:"medium",title:"Optimize Transport Fallback Chain",description:"Configure intelligent fallback to reduce error impact.",rationale:"Current error rate suggests fallback mechanisms could be improved.",expectedImpact:{performanceImprovement:15,errorReduction:60,reliabilityImprovement:45,confidenceScore:.75},implementation:{difficulty:"medium",estimatedTime:"5 minutes",steps:[{id:"configure-fallback",title:"Configure Fallback Chain",description:"Set up intelligent transport fallback",action:"manual"}],reversible:!0,riskLevel:"low"},category:"Reliability",tags:["fallback","reliability","error-reduction"],created:new Date}),t})}generatePerformanceRecommendations(e,n){return t(this,void 0,void 0,function*(){const t=[];return e.performanceMetrics.averageLatency>1e3&&t.push({id:`timeout-optimization-${Date.now()}`,type:A.PERFORMANCE_TUNING,priority:"medium",title:"Optimize Request Timeouts",description:"Adjust timeout settings to reduce wait times for failed requests.",rationale:"High average latency indicates timeout settings may need adjustment.",expectedImpact:{performanceImprovement:20,errorReduction:10,reliabilityImprovement:15,confidenceScore:.8},implementation:{difficulty:"easy",estimatedTime:"2 minutes",steps:[{id:"adjust-timeouts",title:"Adjust Timeout Settings",description:"Optimize request timeout values",action:"manual"}],reversible:!0,riskLevel:"low"},category:"Performance",tags:["timeout","latency","performance"],created:new Date}),e.performanceMetrics.throughput<100&&t.push({id:`connection-pooling-${Date.now()}`,type:A.PERFORMANCE_TUNING,priority:"high",title:"Enable Connection Pooling",description:"Enable connection pooling to improve throughput and reduce connection overhead.",rationale:"Low throughput suggests connection pooling could provide significant benefits.",expectedImpact:{performanceImprovement:40,errorReduction:20,reliabilityImprovement:25,confidenceScore:.9},implementation:{difficulty:"medium",estimatedTime:"3 minutes",steps:[{id:"enable-pooling",title:"Enable Connection Pooling",description:"Configure HTTP connection pooling",action:"automatic"}],reversible:!0,riskLevel:"low"},category:"Performance",tags:["connection-pooling","throughput","performance"],created:new Date}),t})}generateConfigurationRecommendations(e){return t(this,void 0,void 0,function*(){const t=[];return e.performanceMetrics.errorRate>.03&&t.push({id:`retry-config-${Date.now()}`,type:A.CONFIGURATION_IMPROVEMENT,priority:"medium",title:"Optimize Retry Configuration",description:"Fine-tune retry attempts and backoff strategy to handle transient errors better.",rationale:"Error rate suggests retry configuration could be optimized.",expectedImpact:{performanceImprovement:10,errorReduction:35,reliabilityImprovement:40,confidenceScore:.75},implementation:{difficulty:"medium",estimatedTime:"5 minutes",steps:[{id:"configure-retry",title:"Configure Retry Strategy",description:"Set up exponential backoff retry strategy",action:"manual"}],reversible:!0,riskLevel:"low"},category:"Configuration",tags:["retry","error-handling","reliability"],created:new Date}),t})}generateMaintenanceRecommendations(e){return t(this,void 0,void 0,function*(){const e=[],t={id:`health-monitoring-${Date.now()}`,type:A.PROACTIVE_MAINTENANCE,priority:"low",title:"Enhance Health Monitoring",description:"Set up comprehensive health monitoring to detect issues early.",rationale:"Proactive monitoring can prevent issues before they impact users.",expectedImpact:{performanceImprovement:5,errorReduction:25,reliabilityImprovement:35,confidenceScore:.8},implementation:{difficulty:"easy",estimatedTime:"2 minutes",steps:[{id:"enable-monitoring",title:"Enable Enhanced Monitoring",description:"Turn on comprehensive health monitoring",action:"automatic"}],reversible:!0,riskLevel:"low"},category:"Maintenance",tags:["monitoring","proactive","health"],created:new Date};return e.push(t),e})}determineOptimalTransport(e){return t(this,void 0,void 0,function*(){const t=e.environmentContext,n=e.userBehavior,i={};for(const o of e.availableTransports){let e=0;switch(o){case T.WEBSOCKET:e+="excellent"===t.connectivity?40:20,e+=t.latency<50?30:10,e+="high"===n.performanceSensitivity?20:10,e+="high"===n.usageFrequency?10:0;break;case T.HTTP:e+=30,e+="poor"===t.connectivity?20:10,e+="low"===n.errorTolerance?20:10,e+=15;break;case T.FILESYSTEM:e+="poor"===t.connectivity?40:5,e+="low"===n.usageFrequency?20:0,e+=10}i[o]=e}return Object.entries(i).reduce((e,t)=>i[e[0]]>i[t[0]]?e:t)[0]})}generateTransportSwitchRationale(e,t){const n=e.currentTransport,i=e.environmentContext;let o=`Switching from ${n} to ${t} is recommended because: `;switch(t){case T.WEBSOCKET:o+="WebSocket provides real-time communication with lower latency, ","excellent"===i.connectivity?o+="and your excellent connectivity supports stable WebSocket connections.":o+="which would benefit your usage patterns.";break;case T.HTTP:o+="HTTP offers superior reliability and error handling, ",e.performanceMetrics.errorRate>.05?o+="which is especially important given your current error rate.":o+="providing a more stable foundation for your usage.";break;case T.FILESYSTEM:o+="FileSystem transport provides offline capability and local storage benefits, ","poor"===i.connectivity?o+="which is ideal for your current connectivity situation.":o+="offering better performance for your usage patterns."}return o}prioritizeRecommendations(e){return e.sort((e,t)=>{const n={critical:4,high:3,medium:2,low:1},i=n[t.priority]-n[e.priority];if(0!==i)return i;const o=e.expectedImpact.performanceImprovement*e.expectedImpact.confidenceScore;return t.expectedImpact.performanceImprovement*t.expectedImpact.confidenceScore-o})}generateInsights(e){return t(this,void 0,void 0,function*(){var t,n,i;const o=this.generateInsightCacheKey(e);if(this.insightCache.has(o)){const e=this.insightCache.get(o);if(Date.now()-(null===(i=null===(n=null===(t=e[0])||void 0===t?void 0:t.insights[0])||void 0===n?void 0:n.data)||void 0===i?void 0:i.timestamp)<6e5)return e}const a=[],s=yield this.generatePerformanceInsights(e);a.push({name:"Performance",description:"Current performance analysis and trends",priority:1,insights:s});const r=yield this.generateUsageInsights(e);a.push({name:"Usage Patterns",description:"Analysis of your usage patterns and behavior",priority:2,insights:r});const l=yield this.generateTransportInsights(e);return a.push({name:"Transport Analysis",description:"Transport performance and optimization opportunities",priority:3,insights:l}),this.insightCache.set(o,a),a})}generatePerformanceInsights(e){return t(this,void 0,void 0,function*(){const t=[],n=e.performanceMetrics;return n.averageLatency<200?t.push({id:"low-latency",title:"Excellent Response Time",description:`Your average response time of ${n.averageLatency}ms is excellent.`,type:"positive",confidence:.9,data:{latency:n.averageLatency,timestamp:Date.now()},actionable:!1,related:[]}):n.averageLatency>500&&t.push({id:"high-latency",title:"High Response Time Detected",description:`Your average response time of ${n.averageLatency}ms could be improved.`,type:"warning",confidence:.85,data:{latency:n.averageLatency,timestamp:Date.now()},actionable:!0,related:[]}),n.errorRate<.01?t.push({id:"low-error-rate",title:"Low Error Rate",description:`Your error rate of ${(100*n.errorRate).toFixed(2)}% is very good.`,type:"positive",confidence:.9,data:{errorRate:n.errorRate,timestamp:Date.now()},actionable:!1,related:[]}):n.errorRate>.05&&t.push({id:"high-error-rate",title:"High Error Rate",description:`Your error rate of ${(100*n.errorRate).toFixed(2)}% needs attention.`,type:"critical",confidence:.95,data:{errorRate:n.errorRate,timestamp:Date.now()},actionable:!0,related:[]}),t})}generateUsageInsights(e){return t(this,void 0,void 0,function*(){const t=[],n=e.userBehavior;return t.push({id:"usage-frequency",title:"Usage Pattern Analysis",description:`Your usage frequency is ${n.usageFrequency}. ${this.getUsageFrequencyAdvice(n.usageFrequency)}`,type:"neutral",confidence:.8,data:{frequency:n.usageFrequency,timestamp:Date.now()},actionable:"medium"!==n.usageFrequency,related:[]}),n.peakUsageHours.length>0&&t.push({id:"peak-usage",title:"Peak Usage Hours",description:`Your peak usage occurs during hours: ${n.peakUsageHours.join(", ")}. Consider optimizing for these times.`,type:"neutral",confidence:.7,data:{peakHours:n.peakUsageHours,timestamp:Date.now()},actionable:!0,related:[]}),t})}generateTransportInsights(e){return t(this,void 0,void 0,function*(){const t=[],n=e.performanceMetrics.transportUsage,i=Object.values(n).reduce((e,t)=>e+t,0),o=Object.entries(n).reduce((e,t)=>n[e[0]]>n[t[0]]?e:t);if(i>0){const e=n[o[0]]/i*100;e>80?t.push({id:"transport-concentration",title:"Heavy Reliance on Single Transport",description:`You're using ${o[0]} for ${e.toFixed(1)}% of requests. Consider load balancing.`,type:"warning",confidence:.8,data:{distribution:n,dominant:o[0],timestamp:Date.now()},actionable:!0,related:[]}):t.push({id:"balanced-transport-usage",title:"Good Transport Distribution",description:"Your transport usage is well balanced across available options.",type:"positive",confidence:.75,data:{distribution:n,timestamp:Date.now()},actionable:!1,related:[]})}return t})}generatePredictiveAlerts(e){return t(this,void 0,void 0,function*(){const t=[],n=this.analyzePerformanceTrend(e);return n.declining&&n.severity>.7&&t.push({id:`perf-degradation-${Date.now()}`,type:"performance_degradation",severity:"warning",probability:n.severity,timeframe:"24h",description:"Performance degradation trend detected. Response times may increase significantly.",preventiveActions:[],triggers:["increasing_latency","error_rate_rise"]}),e.performanceMetrics.errorRate>.1&&t.push({id:`transport-failure-${Date.now()}`,type:"transport_failure",severity:"error",probability:Math.min(2*e.performanceMetrics.errorRate,.9),timeframe:"1h",description:`${e.currentTransport} transport showing high error rate. Failure risk is elevated.`,preventiveActions:[],triggers:["high_error_rate","connection_instability"]}),t})}analyzePerformanceTrend(e){const t=e.performanceMetrics.averageLatency,n=e.performanceMetrics.errorRate,i=(Math.min(t/1e3,1)+Math.min(10*n,1))/2;return{declining:i>.5,severity:i}}getUsageFrequencyAdvice(e){switch(e){case"low":return"Consider using FileSystem transport for better offline capability.";case"high":return"WebSocket transport might provide better performance for your intensive usage.";default:return"Your current configuration should work well for your usage patterns."}}generateInsightCacheKey(e){return`insights-${e.sessionId}-${e.currentTransport}-${Math.floor(Date.now()/6e5)}`}initializePredictionModels(){this.predictionModels.set("performance_trend",{type:"linear_regression",features:["latency","error_rate","throughput"],trained:!1}),this.predictionModels.set("failure_prediction",{type:"classification",features:["error_rate","latency_variance","connection_failures"],trained:!1})}trackRecommendationEffectiveness(e,t){const n=this.appliedRecommendations.get(e);n&&(n.effectiveness=t,n.appliedAt=new Date,console.log(`Recommendation ${e} effectiveness: ${t}`))}getRecommendationStats(){const e=Array.from(this.appliedRecommendations.values()).filter(e=>e.appliedAt),t=e.filter(e=>void 0!==e.effectiveness),n={};return e.forEach(e=>{n[e.type]=(n[e.type]||0)+1}),{total:this.appliedRecommendations.size,applied:e.length,averageEffectiveness:t.length>0?t.reduce((e,t)=>e+(t.effectiveness||0),0)/t.length:0,byType:n}}}class Q extends e.Component{constructor(e,t={}){super(),this.plugin=e,this.config=Object.assign({enableOnboarding:!0,enableDashboard:!0,enableRecommendations:!0,enableAdvancedSettings:!0,autoShowOnboarding:!e.settings.onboardingComplete},t),this.recommendationEngine=new K}onload(){return t(this,void 0,void 0,function*(){console.log("Phase 3 Integration loading..."),this.registerCommands(),yield this.setupComponents(),this.config.autoShowOnboarding&&this.showOnboarding(),this.config.enableRecommendations&&this.startRecommendationEngine(),console.log("Phase 3 Integration loaded successfully")})}onunload(){console.log("Phase 3 Integration unloading..."),this.cleanup()}registerCommands(){this.config.enableOnboarding&&this.plugin.addCommand({id:"show-onboarding",name:"Show Setup Wizard",callback:()=>this.showOnboarding()}),this.config.enableDashboard&&this.plugin.addCommand({id:"show-dashboard",name:"Show Transport Dashboard",callback:()=>this.showDashboard()}),this.config.enableAdvancedSettings&&this.plugin.addCommand({id:"show-advanced-settings",name:"Show Advanced Settings",callback:()=>this.showAdvancedSettings()}),this.config.enableRecommendations&&this.plugin.addCommand({id:"show-recommendations",name:"Show AI Recommendations",callback:()=>this.showRecommendations()}),this.plugin.addCommand({id:"quick-optimize",name:"Quick Performance Optimization",callback:()=>this.quickOptimize()})}setupComponents(){return t(this,void 0,void 0,function*(){this.loadPhase3Styles(),this.config.enableDashboard&&this.setupDashboard(),this.config.enableAdvancedSettings&&this.setupAdvancedSettings()})}loadPhase3Styles(){if(document.getElementById("vaultpilot-phase3-styles"))return;const e=document.createElement("style");e.id="vaultpilot-phase3-styles",e.textContent="\n/* VaultPilot Phase 3 Component Styles */\n\n/* Onboarding Wizard Styles */\n.vaultpilot-onboarding-modal {\n  width: 600px;\n  max-width: 90vw;\n}\n\n.vaultpilot-onboarding {\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.onboarding-header {\n  text-align: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.onboarding-subtitle {\n  color: var(--text-muted);\n  margin-top: 5px;\n}\n\n.onboarding-progress {\n  margin-bottom: 25px;\n}\n\n.progress-steps {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-bottom: 15px;\n}\n\n.progress-step {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.progress-step.active {\n  background-color: var(--interactive-accent);\n  color: var(--text-on-accent);\n}\n\n.progress-step.completed {\n  background-color: var(--color-green);\n  color: white;\n}\n\n.progress-step.inactive {\n  background-color: var(--background-modifier-border);\n  color: var(--text-muted);\n}\n\n.progress-bar {\n  height: 4px;\n  background-color: var(--background-modifier-border);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background-color: var(--interactive-accent);\n  transition: width 0.3s ease;\n}\n\n.onboarding-step-container {\n  min-height: 300px;\n  margin-bottom: 20px;\n}\n\n.onboarding-step {\n  padding: 20px 0;\n}\n\n.onboarding-navigation {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n  padding-top: 20px;\n  border-top: 1px solid var(--background-modifier-border);\n}\n\n/* Transport Dashboard Styles */\n.transport-dashboard {\n  padding: 20px;\n  max-width: 100%;\n  overflow-x: auto;\n}\n\n.dashboard-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 25px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.status-card {\n  background: var(--background-secondary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 8px;\n  padding: 16px;\n  margin: 8px 0;\n}\n\n.status-card.healthy {\n  border-left: 4px solid var(--color-green);\n}\n\n.status-card.warning {\n  border-left: 4px solid var(--color-orange);\n}\n\n.status-card.error {\n  border-left: 4px solid var(--color-red);\n}\n\n.metrics-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 15px;\n  margin: 20px 0;\n}\n\n.metric-card {\n  background: var(--background-primary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 6px;\n  padding: 15px;\n  text-align: center;\n}\n\n.metric-value {\n  font-size: 24px;\n  font-weight: bold;\n  color: var(--interactive-accent);\n}\n\n.metric-label {\n  font-size: 12px;\n  color: var(--text-muted);\n  margin-top: 5px;\n}\n\n/* Advanced Settings Styles */\n.advanced-settings {\n  padding: 20px;\n}\n\n.settings-section {\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.settings-section:last-child {\n  border-bottom: none;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.section-title {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-normal);\n}\n\n.profile-manager {\n  background: var(--background-secondary);\n  border-radius: 8px;\n  padding: 15px;\n  margin: 15px 0;\n}\n\n.profiles-list {\n  margin: 15px 0;\n}\n\n.profile-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  margin: 5px 0;\n  background: var(--background-primary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 4px;\n}\n\n.profile-item.active {\n  border-color: var(--interactive-accent);\n  background: var(--background-modifier-hover);\n}\n\n.config-group {\n  background: var(--background-secondary);\n  border-radius: 6px;\n  padding: 15px;\n  margin: 10px 0;\n}\n\n.config-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 10px 0;\n}\n\n.validation-status {\n  font-size: 12px;\n  padding: 4px 8px;\n  border-radius: 4px;\n  margin-left: 10px;\n}\n\n.validation-status.valid {\n  background: var(--background-modifier-success);\n  color: var(--color-green);\n}\n\n.validation-status.invalid {\n  background: var(--background-modifier-error);\n  color: var(--color-red);\n}\n\n/* Modal Styles */\n.vaultpilot-phase3-modal {\n  width: 700px;\n  max-width: 95vw;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid var(--background-modifier-border);\n}\n\n.modal-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 20px;\n  padding-top: 15px;\n  border-top: 1px solid var(--background-modifier-border);\n}\n\n/* Recommendation Engine Styles */\n.recommendations-container {\n  margin: 20px 0;\n}\n\n.recommendation-card {\n  background: var(--background-secondary);\n  border: 1px solid var(--background-modifier-border);\n  border-radius: 8px;\n  padding: 16px;\n  margin: 12px 0;\n}\n\n.recommendation-card.high-priority {\n  border-left: 4px solid var(--color-red);\n}\n\n.recommendation-card.medium-priority {\n  border-left: 4px solid var(--color-orange);\n}\n\n.recommendation-card.low-priority {\n  border-left: 4px solid var(--color-green);\n}\n\n.recommendation-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.recommendation-title {\n  font-weight: 600;\n  color: var(--text-normal);\n}\n\n.recommendation-actions {\n  display: flex;\n  gap: 8px;\n  margin-top: 15px;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .vaultpilot-onboarding-modal,\n  .vaultpilot-phase3-modal {\n    width: 95vw;\n  }\n  \n  .metrics-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .dashboard-header,\n  .modal-header {\n    flex-direction: column;\n    gap: 10px;\n    text-align: center;\n  }\n  \n  .config-row {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n}\n",document.head.appendChild(e)}setupDashboard(){console.log("Dashboard setup ready")}setupAdvancedSettings(){console.log("Advanced settings setup ready")}showOnboarding(){this.config.enableOnboarding?(this.onboardingWizard&&this.onboardingWizard.close(),this.onboardingWizard=new U(this.plugin.app,this.plugin),this.onboardingWizard.open()):new e.Notice("Onboarding is disabled")}showDashboard(){if(!this.config.enableDashboard)return void new e.Notice("Dashboard is disabled");new J(this.plugin).open()}showAdvancedSettings(){if(!this.config.enableAdvancedSettings)return void new e.Notice("Advanced settings are disabled");new Y(this.plugin).open()}showRecommendations(){return t(this,void 0,void 0,function*(){if(this.config.enableRecommendations){new e.Notice("Generating AI recommendations...");try{const t=yield this.buildRecommendationContext(),n=yield this.recommendationEngine.generateRecommendations(t);if(n.length>0){new G(this.plugin,n,this.recommendationEngine).open()}else new e.Notice("No recommendations available at this time")}catch(t){console.error("Failed to generate recommendations:",t),new e.Notice("Failed to generate recommendations")}}else new e.Notice("Recommendations are disabled")})}quickOptimize(){return t(this,void 0,void 0,function*(){new e.Notice("Running quick optimization...");try{const t=yield this.buildRecommendationContext(),n=(yield this.recommendationEngine.generateRecommendations(t)).filter(e=>"easy"===e.implementation.difficulty&&e.implementation.steps.some(e=>"automatic"===e.action));if(n.length>0){const t=n[0];yield this.applyRecommendation(t),new e.Notice(`✅ Applied: ${t.title}`)}else new e.Notice('No quick optimizations available. Use "Show AI Recommendations" for manual optimizations.')}catch(t){console.error("Quick optimization failed:",t),new e.Notice("Quick optimization failed")}})}buildRecommendationContext(){return t(this,void 0,void 0,function*(){return{sessionId:`session-${Date.now()}`,timestamp:new Date,currentTransport:T.HTTP,availableTransports:[T.HTTP,T.WEBSOCKET,T.FILESYSTEM],performanceMetrics:{averageLatency:150+100*Math.random(),errorRate:.05*Math.random(),throughput:100+50*Math.random(),reliability:.95+.05*Math.random(),transportUsage:{[T.HTTP]:.7,[T.WEBSOCKET]:.25,[T.FILESYSTEM]:.05},timeWindow:"1h"},userBehavior:{usageFrequency:"medium",peakUsageHours:[9,10,11,14,15,16],preferredFeatures:["dashboard","recommendations"],errorTolerance:"medium",performanceSensitivity:"medium"},environmentContext:{platform:"obsidian",connectivity:"good",bandwidth:50,latency:30,stability:.95}}})}applyRecommendation(e){return t(this,void 0,void 0,function*(){try{console.log(`Applying recommendation: ${e.title}`);const t=e.implementation.steps.filter(e=>"automatic"===e.action);for(const e of t)switch(e.id){case"switch-transport":console.log("Switching transport as recommended");break;case"enable-pooling":console.log("Enabling connection pooling");break;case"enable-monitoring":console.log("Enabling enhanced monitoring");break;default:console.log(`Unknown automatic step: ${e.id}`)}return this.recommendationEngine.trackRecommendationEffectiveness(e.id,.8),!0}catch(e){return console.error("Failed to apply recommendation:",e),!1}})}startRecommendationEngine(){console.log("Starting recommendation engine..."),this.generateBackgroundRecommendations(),setInterval(()=>{this.generateBackgroundRecommendations()},18e5)}generateBackgroundRecommendations(){return t(this,void 0,void 0,function*(){try{const t=yield this.buildRecommendationContext(),n=yield this.recommendationEngine.generateRecommendations(t),i=n.filter(e=>"critical"===e.priority);i.length>0&&new e.Notice(`⚠️ ${i.length} critical optimization(s) available. Use Command Palette > "Show AI Recommendations"`),console.log(`Generated ${n.length} recommendations (${i.length} critical)`)}catch(e){console.error("Background recommendation generation failed:",e)}})}cleanup(){this.onboardingWizard&&this.onboardingWizard.close(),this.transportDashboard&&this.transportDashboard.unload(),this.advancedSettings&&this.advancedSettings.unload()}showOnboardingIfNeeded(){return t(this,void 0,void 0,function*(){return!(this.plugin.settings.onboardingComplete||!this.config.enableOnboarding)&&(this.showOnboarding(),!0)})}getRecommendationEngine(){return this.recommendationEngine}refreshDashboard(){return t(this,void 0,void 0,function*(){this.transportDashboard&&console.log("Refreshing dashboard...")})}}class J extends e.Modal{constructor(e){super(e.app),this.plugin=e,this.modalEl.addClass("dashboard-modal")}onOpen(){const{contentEl:e}=this;e.empty(),this.dashboard=new B(e,this.plugin),this.dashboard.load()}onClose(){this.dashboard&&this.dashboard.unload();const{contentEl:e}=this;e.empty()}}class Y extends e.Modal{constructor(e){super(e.app),this.plugin=e,this.modalEl.addClass("advanced-settings-modal")}onOpen(){const{contentEl:e}=this;e.empty(),this.settings=new j(e,this.plugin),this.settings.load()}onClose(){this.settings&&this.settings.unload();const{contentEl:e}=this;e.empty()}}class G extends e.Modal{constructor(e,t,n){super(e.app),this.plugin=e,this.recommendations=t,this.engine=n,this.modalEl.addClass("recommendations-modal")}onOpen(){const{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"🤖 AI-Powered Recommendations"}),e.createEl("p",{text:"Here are personalized recommendations to optimize your VaultPilot experience:",cls:"recommendations-subtitle"});const t=e.createDiv("recommendations-list");this.recommendations.forEach((e,n)=>{this.renderRecommendation(t,e,n)});const n=e.createDiv("recommendations-footer");n.createEl("p",{text:`Generated ${this.recommendations.length} recommendations based on your usage patterns`,cls:"recommendations-stats"});n.createEl("button",{text:"Close",cls:"mod-cta"}).addEventListener("click",()=>this.close())}renderRecommendation(e,n,i){const o=e.createDiv("recommendation-item");o.addClass(`priority-${n.priority}`);o.createDiv("rec-header").createEl("h3",{text:n.title}).createEl("span",{text:n.priority.toUpperCase(),cls:`priority-badge ${n.priority}`}),o.createEl("p",{text:n.description,cls:"rec-description"});const a=o.createDiv("rec-impact");a.createEl("h4",{text:"Expected Impact:"});const s=a.createEl("ul");s.createEl("li",{text:`Performance: +${n.expectedImpact.performanceImprovement}%`}),s.createEl("li",{text:`Error Reduction: ${n.expectedImpact.errorReduction}%`}),s.createEl("li",{text:`Reliability: +${n.expectedImpact.reliabilityImprovement}%`}),s.createEl("li",{text:`Confidence: ${(100*n.expectedImpact.confidenceScore).toFixed(0)}%`});const r=o.createDiv("rec-implementation");if(r.createEl("h4",{text:"Implementation:"}),r.createEl("p",{text:`Difficulty: ${n.implementation.difficulty} | Time: ${n.implementation.estimatedTime}`}),n.implementation.steps.length>0){const e=r.createEl("ol");n.implementation.steps.forEach(t=>{const n=e.createEl("li");n.createEl("strong",{text:t.title}),n.createSpan({text:` - ${t.description}`}),"automatic"===t.action&&n.createSpan({text:" (Automatic)",cls:"step-automatic"})})}const l=o.createDiv("rec-actions");if(n.implementation.steps.some(e=>"automatic"===e.action)){const e=l.createEl("button",{text:"Apply Automatically",cls:"mod-cta"});e.addEventListener("click",()=>t(this,void 0,void 0,function*(){e.disabled=!0,e.textContent="Applying...";try{(yield this.applyRecommendation(n))?(e.textContent="✅ Applied",e.removeClass("mod-cta"),e.addClass("mod-success")):(e.textContent="❌ Failed",e.disabled=!1)}catch(t){e.textContent="❌ Error",e.disabled=!1}}))}l.createEl("button",{text:"Dismiss",cls:"mod-muted"}).addEventListener("click",()=>{o.style.display="none"});const c=o.createDiv("rec-rationale"),d=c.createEl("button",{text:"Show Rationale",cls:"rationale-toggle"}),u=c.createDiv("rationale-content");u.style.display="none",u.createEl("p",{text:n.rationale}),d.addEventListener("click",()=>{"none"===u.style.display?(u.style.display="block",d.textContent="Hide Rationale"):(u.style.display="none",d.textContent="Show Rationale")})}applyRecommendation(n){return t(this,void 0,void 0,function*(){try{return yield new Promise(e=>setTimeout(e,1e3)),this.engine.trackRecommendationEffectiveness(n.id,.8),new e.Notice(`✅ Applied recommendation: ${n.title}`),!0}catch(t){return console.error("Failed to apply recommendation:",t),new e.Notice(`❌ Failed to apply recommendation: ${n.title}`),!1}})}onClose(){const{contentEl:e}=this;e.empty()}}class X extends e.Component{constructor(e){super(),this.activeProgress=new Map,this.progressContainer=null,this.updateInterval=null,this.plugin=e,this.app=e.app,this.initializeContainer()}initializeContainer(){this.progressContainer=document.createElement("div"),this.progressContainer.className="vaultpilot-progress-container",this.progressContainer.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 10000;\n            pointer-events: none;\n            max-width: 400px;\n        ",document.body.appendChild(this.progressContainer)}showProgress(e){this.activeProgress.set(e.id,e),this.renderProgress(e),e.timeout&&setTimeout(()=>{this.hideProgress(e.id)},e.timeout)}updateProgress(e,t){const n=this.activeProgress.get(e);if(n){const i=Object.assign(Object.assign({},n),t);this.activeProgress.set(e,i),this.renderProgress(i)}}hideProgress(e){this.activeProgress.delete(e);const t=document.getElementById(`progress-${e}`);t&&(t.style.animation="slideOutRight 0.3s ease-in",setTimeout(()=>{t.remove()},300))}renderProgress(e){var t;let n=document.getElementById(`progress-${e.id}`);n?this.updateProgressElement(n,e):(n=this.createProgressElement(e),null===(t=this.progressContainer)||void 0===t||t.appendChild(n))}createProgressElement(e){const t=document.createElement("div");return t.id=`progress-${e.id}`,t.className="vaultpilot-progress-item",t.style.cssText="\n            background: var(--background-primary);\n            border: 1px solid var(--background-modifier-border);\n            border-radius: 8px;\n            padding: 12px 16px;\n            margin-bottom: 8px;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            animation: slideInRight 0.3s ease-out;\n            pointer-events: auto;\n            min-width: 300px;\n        ",this.updateProgressElement(t,e),t}updateProgressElement(e,t){const n=t.percentage||0,i=t.eta?this.formatETA(t.eta):"";if(e.innerHTML=`\n            <div class="progress-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n                <div class="progress-title" style="font-weight: 600; color: var(--text-normal);">\n                    ${t.title}\n                </div>\n                ${t.cancelable?'<button class="progress-cancel" style="background: none; border: none; color: var(--text-muted); cursor: pointer;">×</button>':""}\n            </div>\n            ${t.message?`<div class="progress-message" style="color: var(--text-muted); font-size: 0.9em; margin-bottom: 8px;">${t.message}</div>`:""}\n            <div class="progress-bar-container" style="background: var(--background-modifier-border); border-radius: 4px; height: 6px; overflow: hidden;">\n                <div class="progress-bar" style="\n                    background: var(--interactive-accent);\n                    height: 100%;\n                    width: ${n}%;\n                    transition: width 0.3s ease;\n                    border-radius: 4px;\n                "></div>\n            </div>\n            <div class="progress-info" style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8em; color: var(--text-muted);">\n                <span>${Math.round(n)}%</span>\n                ${i?`<span>ETA: ${i}</span>`:""}\n            </div>\n        `,t.cancelable){const n=e.querySelector(".progress-cancel");null==n||n.addEventListener("click",()=>{this.hideProgress(t.id),this.plugin.app.workspace.trigger("vaultpilot:progress-cancelled",t.id)})}}formatETA(e){if(e<60)return`${Math.round(e)}s`;if(e<3600){return`${Math.floor(e/60)}m ${Math.round(e%60)}s`}return`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`}getActiveProgress(){return Array.from(this.activeProgress.values())}clearAllProgress(){for(const e of this.activeProgress.keys())this.hideProgress(e)}onunload(){this.progressContainer&&this.progressContainer.remove(),this.updateInterval&&clearInterval(this.updateInterval)}}class Z extends e.Component{constructor(e){super(),this.cache=new Map,this.requestQueue=new Map,this.maxCacheSize=100,this.defaultTTL=3e5,this.plugin=e,this.initializeMetrics(),this.startCleanupInterval()}initializeMetrics(){this.metrics={totalRequests:0,cacheHits:0,cacheMisses:0,averageResponseTime:0,slowestResponse:0,fastestResponse:1/0,currentCacheSize:0,memoryUsage:0}}optimizedRequest(e,n){return t(this,arguments,void 0,function*(e,t,n={}){const i=performance.now();if(this.metrics.totalRequests++,!n.skipCache){const t=this.getFromCache(e);if(t)return this.metrics.cacheHits++,this.updateResponseTimeMetrics(performance.now()-i),t}this.metrics.cacheMisses++;const o=this.requestQueue.get(e);if(o)return o;const a=this.executeRequest(t,e,n.ttl||this.defaultTTL);this.requestQueue.set(e,a);try{const e=yield a;return this.updateResponseTimeMetrics(performance.now()-i),e}finally{this.requestQueue.delete(e)}})}executeRequest(e,n,i){return t(this,void 0,void 0,function*(){try{const t=yield e();return this.setCache(n,t,i),t}catch(e){throw e}})}getFromCache(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):(t.hitCount++,t.data):null}setCache(e,t,n){this.cache.size>=this.maxCacheSize&&this.evictLeastUsed();const i={data:t,timestamp:Date.now(),ttl:n,hitCount:0,size:this.estimateSize(t)};this.cache.set(e,i),this.updateCacheMetrics()}evictLeastUsed(){let e="",t=1/0;for(const[n,i]of this.cache.entries())i.hitCount<t&&(t=i.hitCount,e=n);e&&this.cache.delete(e)}estimateSize(e){return 2*JSON.stringify(e).length}updateResponseTimeMetrics(e){const t=this.metrics.averageResponseTime,n=this.metrics.totalRequests;this.metrics.averageResponseTime=(t*(n-1)+e)/n,e>this.metrics.slowestResponse&&(this.metrics.slowestResponse=e),e<this.metrics.fastestResponse&&(this.metrics.fastestResponse=e)}updateCacheMetrics(){this.metrics.currentCacheSize=this.cache.size,this.metrics.memoryUsage=Array.from(this.cache.values()).reduce((e,t)=>e+t.size,0)}startCleanupInterval(){setInterval(()=>{this.cleanupExpiredEntries()},6e4)}cleanupExpiredEntries(){const e=Date.now();for(const[t,n]of this.cache.entries())e-n.timestamp>n.ttl&&this.cache.delete(t);this.updateCacheMetrics()}getMetrics(){return Object.assign({},this.metrics)}getCacheHitRate(){const e=this.metrics.cacheHits+this.metrics.cacheMisses;return e>0?this.metrics.cacheHits/e*100:0}clearCache(){this.cache.clear(),this.updateCacheMetrics()}setCacheConfig(e,t){this.maxCacheSize=e,this.defaultTTL=t}onunload(){this.clearCache()}}class ee extends e.Component{constructor(e){super(),this.ws=null,this.reconnectInterval=null,this.isConnected=!1,this.messageHandlers=new Map,this.plugin=e,this.setupMessageHandlers()}setupMessageHandlers(){this.messageHandlers.set("progress_update",e=>{const t=this.plugin.enhancementManager;(null==t?void 0:t.progressIndicator)&&t.progressIndicator.updateProgress(e.id,{percentage:e.percentage,message:e.message,eta:e.eta})}),this.messageHandlers.set("performance_stats",e=>{console.log("Performance stats:",e)}),this.messageHandlers.set("ping",()=>{this.send({type:"pong",data:{},timestamp:Date.now()})})}connect(e){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)try{this.ws=new WebSocket(e),this.ws.onopen=()=>{this.isConnected=!0,console.log("VaultPilot WebSocket connected"),this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null)},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleMessage(t)}catch(e){console.error("Failed to parse WebSocket message:",e)}},this.ws.onclose=()=>{this.isConnected=!1,console.log("VaultPilot WebSocket disconnected"),this.startReconnect(e)},this.ws.onerror=e=>{console.error("VaultPilot WebSocket error:",e)}}catch(t){console.error("Failed to connect WebSocket:",t),this.startReconnect(e)}}handleMessage(e){const t=this.messageHandlers.get(e.type);t&&t(e.data)}startReconnect(e){this.reconnectInterval||(this.reconnectInterval=window.setInterval(()=>{console.log("Attempting to reconnect VaultPilot WebSocket..."),this.connect(e)},5e3))}send(e){return!(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&(this.ws.send(JSON.stringify(e)),!0)}disconnect(){this.reconnectInterval&&(clearInterval(this.reconnectInterval),this.reconnectInterval=null),this.ws&&(this.ws.close(),this.ws=null),this.isConnected=!1}isSocketConnected(){return this.isConnected}onunload(){this.disconnect()}}class te extends e.Component{constructor(e){super(),this.isInitialized=!1,this.plugin=e,this.progressIndicator=new X(e),this.responseOptimizer=new Z(e),this.webSocketHandler=new ee(e)}initialize(){return t(this,void 0,void 0,function*(){if(!this.isInitialized)try{this.addChild(this.progressIndicator),this.addChild(this.responseOptimizer),this.addChild(this.webSocketHandler);const e=this.plugin.settings.backendUrl.replace(/^http/,"ws")+"/api/obsidian/ws/enhanced";this.webSocketHandler.connect(e),this.isInitialized=!0,console.log("VaultPilot Enhancement Manager initialized")}catch(e){console.error("Failed to initialize Enhancement Manager:",e)}})}showProgress(e){this.progressIndicator.showProgress(e)}optimizedAPICall(e,n,i){return t(this,void 0,void 0,function*(){return this.responseOptimizer.optimizedRequest(e,n,i)})}getPerformanceMetrics(){return this.responseOptimizer.getMetrics()}getCacheHitRate(){return this.responseOptimizer.getCacheHitRate()}clearCache(){this.responseOptimizer.clearCache()}isWebSocketConnected(){return this.webSocketHandler.isSocketConnected()}onunload(){this.isInitialized=!1,super.onunload()}}class ne{constructor(e){this.shortcuts=new Map,this.contextMenuEnabled=!0,this.plugin=e,this.app=e.app,this.initializeDefaultShortcuts()}initializeDefaultShortcuts(){[{key:"Enter",modifiers:["Ctrl","Shift"],command:"vaultpilot:open-chat",description:"Open VaultPilot Chat",context:"global"},{key:"KeyS",modifiers:["Ctrl","Shift"],command:"vaultpilot:smart-search",description:"Smart Search",context:"global"},{key:"KeyC",modifiers:["Ctrl","Shift"],command:"vaultpilot:quick-chat",description:"Quick Chat with Selection",context:"editor"},{key:"Space",modifiers:["Ctrl"],command:"vaultpilot:copilot-complete",description:"Get AI Completion",context:"editor"},{key:"KeyW",modifiers:["Ctrl","Shift"],command:"vaultpilot:execute-workflow",description:"Execute Workflow",context:"global"},{key:"KeyA",modifiers:["Ctrl","Shift"],command:"vaultpilot:analyze-vault",description:"Analyze Current Vault",context:"global"},{key:"KeyD",modifiers:["Ctrl","Shift"],command:"vaultpilot:open-dashboard",description:"Open VaultPilot Dashboard",context:"global"},{key:"KeyP",modifiers:["Ctrl","Shift"],command:"vaultpilot:plan-my-day",description:"Plan My Day",context:"global"},{key:"KeyV",modifiers:["Ctrl","Shift"],command:"vaultpilot:vault-structure",description:"View Vault Structure",context:"global"},{key:"KeyF",modifiers:["Ctrl","Shift"],command:"vaultpilot:file-operations",description:"File Operations",context:"global"},{key:"KeyO",modifiers:["Ctrl","Shift"],command:"vaultpilot:vault-organizer",description:"Vault Organizer",context:"global"},{key:"KeyB",modifiers:["Ctrl","Shift"],command:"vaultpilot:batch-operations",description:"Batch Operations",context:"global"},{key:"KeyH",modifiers:["Ctrl","Shift"],command:"vaultpilot:show-shortcuts",description:"Show Keyboard Shortcuts",context:"global"},{key:"KeyR",modifiers:["Ctrl","Shift"],command:"vaultpilot:refresh-cache",description:"Refresh Cache",context:"global"},{key:"KeyM",modifiers:["Ctrl","Shift"],command:"vaultpilot:performance-metrics",description:"Show Performance Metrics",context:"global"},{key:"KeyG",modifiers:["Ctrl","Shift"],command:"vaultpilot:agent-marketplace",description:"Agent Marketplace",context:"global"},{key:"KeyE",modifiers:["Ctrl","Shift"],command:"vaultpilot:agent-evolution",description:"Agent Evolution Status",context:"global"},{key:"KeyQ",modifiers:["Alt"],command:"vaultpilot:quick-note",description:"Quick Note Creation",context:"global"},{key:"KeyI",modifiers:["Ctrl","Alt"],command:"vaultpilot:insert-template",description:"Insert Template",context:"editor"},{key:"KeyL",modifiers:["Ctrl","Shift"],command:"vaultpilot:link-analyzer",description:"Analyze Links",context:"editor"},{key:"KeyT",modifiers:["Ctrl","Shift"],command:"vaultpilot:tag-manager",description:"Tag Manager",context:"global"},{key:"KeyZ",modifiers:["Ctrl","Shift"],command:"vaultpilot:enhancement-demo",description:"Enhancement Features Demo",context:"global"}].forEach(e=>{this.addShortcut(e)})}addShortcut(e){const t=this.getShortcutKey(e);this.shortcuts.set(t,e)}removeShortcut(e){const t=this.getShortcutKey(e);this.shortcuts.delete(t)}getShortcutKey(e){return`${e.modifiers.sort().join("+")}_${e.key}`}handleKeyDown(e){const t=[];e.ctrlKey&&t.push("Ctrl"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),e.metaKey&&t.push("Meta");const n=e.code,i=`${t.sort().join("+")}_${n}`,o=this.shortcuts.get(i);if(o&&!1!==o.enabled){const t=this.getCurrentContext();if(this.isShortcutValidForContext(o,t))return e.preventDefault(),e.stopPropagation(),this.executeCommand(o.command),!0}return!1}getCurrentContext(){if(this.app.workspace.getActiveViewOfType(e.MarkdownView))return"editor";return document.querySelectorAll(".modal").length>0?"modal":"global"}isShortcutValidForContext(e,t){return!e.context||(e.context===t||"global"===e.context)}executeCommand(t){var n,i;const o=t.replace("vaultpilot:","");switch(o){case"open-chat":this.plugin.openChatModal();break;case"smart-search":this.plugin.openSmartSearchModal();break;case"quick-chat":const t=null===(n=this.app.workspace.getActiveViewOfType(e.MarkdownView))||void 0===n?void 0:n.editor;t&&this.plugin.quickChatWithSelection(t);break;case"copilot-complete":const a=null===(i=this.app.workspace.getActiveViewOfType(e.MarkdownView))||void 0===i?void 0:i.editor;a&&this.plugin.getCopilotCompletion(a);break;case"execute-workflow":this.plugin.openWorkflowModal();break;case"analyze-vault":this.plugin.analyzeVault();break;case"open-dashboard":this.plugin.activateFullTabView();break;case"plan-my-day":this.plugin.planMyDay();break;case"vault-structure":this.plugin.openVaultStructureModal();break;case"file-operations":this.plugin.openFileOperationsModal();break;case"vault-organizer":this.plugin.openVaultOrganizerModal();break;case"batch-operations":this.plugin.openBatchOperationsModal();break;case"show-shortcuts":this.showShortcutsHelp();break;case"refresh-cache":this.refreshCache();break;case"performance-metrics":this.showPerformanceMetrics();break;case"agent-marketplace":this.openAgentMarketplace();break;case"agent-evolution":this.showAgentEvolution();break;case"quick-note":this.createQuickNote();break;case"insert-template":this.insertTemplate();break;case"link-analyzer":this.analyzeLinks();break;case"tag-manager":this.openTagManager();break;case"enhancement-demo":this.openEnhancementDemo();break;default:new e.Notice(`Unknown command: ${o}`)}}showShortcutsHelp(){const t=Array.from(this.shortcuts.values()),n=this.generateShortcutsHelpContent(t),i=new e.Modal(this.app);i.titleEl.textContent="VaultPilot Keyboard Shortcuts",i.contentEl.innerHTML=n,i.open()}generateShortcutsHelpContent(e){const t=this.categorizeShortcuts(e);let n='<div class="vaultpilot-shortcuts-help">';for(const[e,i]of Object.entries(t))n+='<div class="shortcut-category">',n+=`<h3>${e}</h3>`,n+='<div class="shortcut-list">',i.forEach(e=>{const t=`${e.modifiers.join(" + ")} + ${e.key.replace("Key","")}`;n+='<div class="shortcut-item">',n+=`<span class="shortcut-keys">${t}</span>`,n+=`<span class="shortcut-desc">${e.description}</span>`,n+="</div>"}),n+="</div></div>";return n+="</div>",n}categorizeShortcuts(e){const t={"Core Features":[],"Vault Management":[],"Agent Features":[],"Quick Actions":[],System:[]};return e.forEach(e=>{const n=e.command.replace("vaultpilot:","");["open-chat","copilot-complete","execute-workflow","analyze-vault"].includes(n)?t["Core Features"].push(e):["vault-structure","file-operations","vault-organizer","batch-operations"].includes(n)?t["Vault Management"].push(e):["agent-marketplace","agent-evolution"].includes(n)?t["Agent Features"].push(e):["quick-note","insert-template","link-analyzer","tag-manager"].includes(n)?t["Quick Actions"].push(e):t.System.push(e)}),t}refreshCache(){new e.Notice("Cache refreshed successfully")}showPerformanceMetrics(){new e.Notice("Performance metrics feature coming soon")}openAgentMarketplace(){new e.Notice("Agent marketplace feature coming soon")}showAgentEvolution(){new e.Notice("Agent evolution status feature coming soon")}createQuickNote(){this.app.vault.create(`Quick Note ${(new Date).toISOString().slice(0,19)}.md`,"# Quick Note\n\n").then(e=>{this.app.workspace.getLeaf().openFile(e)})}insertTemplate(){new e.Notice("Template insertion feature coming soon")}analyzeLinks(){new e.Notice("Link analyzer feature coming soon")}openTagManager(){new e.Notice("Tag manager feature coming soon")}openEnhancementDemo(){Promise.resolve().then(function(){return re}).then(({VaultPilotEnhancementDemo:e})=>{new e(this.app,this.plugin).open()}).catch(t=>{console.error("Failed to load enhancement demo:",t),new e.Notice("Enhancement demo failed to load")})}getShortcuts(){return Array.from(this.shortcuts.values())}isEnabled(){return this.contextMenuEnabled}setEnabled(e){this.contextMenuEnabled=e}}class ie{static createEnhancedCommands(t){return[{id:"vaultpilot-enhanced-chat",name:"Enhanced AI Chat",description:"Open enhanced AI chat with real-time progress",callback:()=>t.openChatModal(),category:"AI Features",priority:1},{id:"vaultpilot-smart-search",name:"Smart Search",description:"AI-powered search with context awareness",callback:()=>t.openSmartSearchModal(),category:"Search",priority:2},{id:"vaultpilot-quick-completion",name:"Quick AI Completion",description:"Get AI completion for current context",editorCallback:e=>t.getCopilotCompletion(e),category:"AI Features",priority:3},{id:"vaultpilot-workflow-enhanced",name:"Enhanced Workflow Execution",description:"Execute workflows with progress tracking",callback:()=>t.openWorkflowModal(),category:"Automation",priority:4},{id:"vaultpilot-vault-analysis",name:"Enhanced Vault Analysis",description:"Comprehensive vault analysis with optimization",callback:()=>t.analyzeVault(),category:"Analytics",priority:5},{id:"vaultpilot-enhancement-demo",name:"Enhancement Features Demo",description:"Demonstrate keyboard shortcuts, progress indicators, and performance features",callback:()=>{Promise.resolve().then(function(){return re}).then(({VaultPilotEnhancementDemo:e})=>{new e(t.app,t).open()}).catch(t=>{console.error("Failed to load enhancement demo:",t),new e.Notice("Enhancement demo failed to load")})},category:"Demo",priority:10}]}}class oe extends e.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return t(this,void 0,void 0,function*(){var t,n,i,d;yield this.loadSettings(),this.loadEnhancedUIStyles(),d=this.app,c=d,this.apiClient=new p(this.settings.backendUrl,this.settings.apiKey),(null===(t=this.settings.vaultManagement)||void 0===t?void 0:t.enableVaultManagement)&&this.initializeVaultManagement(),(null===(n=this.settings.modelSelection)||void 0===n?void 0:n.enabled)&&this.initializeModelSelection().catch(e=>{this.settings.debugMode&&console.warn("Model selection initialization failed during plugin load:",e)});try{let t=yield this.apiClient.healthCheck();if(!t.success&&(null===(i=t.error)||void 0===i?void 0:i.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const e=yield this.apiClient.simpleHealthCheck();e.success&&e.data&&(t={success:!0,data:{status:e.data.status,version:"unknown"}})}t.success?(new e.Notice("✅ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",t.error),new e.Notice("⚠️ EvoAgentX backend offline - some features may not work",5e3))}catch(t){console.error("Health check error:",t),new e.Notice("⚠️ Cannot connect to EvoAgentX backend",5e3)}this.registerView(a,e=>new s(e,this)),this.registerView(r,e=>new l(e,this));const u=this.addRibbonIcon("bot","VaultPilot",e=>{e.ctrlKey||e.metaKey?this.activateFullTabView():this.openChatModal()});u.addClass("vaultpilot-ribbon-class"),u.title="VaultPilot (Ctrl+click for Dashboard)",this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:e=>this.getCopilotCompletion(e)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:e=>this.quickChatWithSelection(e)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:e=>this.planTasksFromNote(e)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"plan-my-day-debug",name:"Plan My Day - Debug Connection",callback:()=>this.debugPlanMyDay()}),this.addCommand({id:"test-model-selection",name:"Test Smart Model Selection",callback:()=>this.testModelSelection()}),this.addCommand({id:"show-model-health",name:"Show Model Health Status",callback:()=>this.showModelHealth()}),this.addCommand({id:"retry-model-selection",name:"Retry Model Selection Initialization",callback:()=>this.retryModelSelectionManual()}),this.addCommand({id:"check-service-status",name:"Check VaultPilot Service Status",callback:()=>this.checkServiceStatus()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.addCommand({id:"open-vaultpilot-full-tab",name:"Open VaultPilot Dashboard",callback:()=>this.activateFullTabView()}),this.registerVaultManagementCommands(),this.initializePhase3(),this.initializeEnhancementManager(),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new o(this.app,this))})}onunload(){return t(this,void 0,void 0,function*(){this.app.workspace.detachLeavesOfType(a),this.app.workspace.detachLeavesOfType(r),this.disconnectWebSocket(),yield this.disconnectModelSelection(),this.disablePhase3(),this.disableEnhancementManager()})}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:e=>{console.log("WebSocket chat update:",e)},onWorkflowProgress:t=>{new e.Notice(`Workflow: ${t.step}`,2e3)},onCopilot:e=>{this.handleCopilotSuggestion(e)},onVaultSync:e=>{console.log("Vault sync update:",e)},onIntentDebug:e=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",e)},onError:t=>{new e.Notice(`WebSocket error: ${t}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new e.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new e.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new u(this.app,this).open()}openWorkflowModal(){new h(this.app,this).open()}analyzeVault(){return t(this,void 0,void 0,function*(){const t=new e.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let i="";for(const e of n.slice(0,10)){const t=yield this.app.vault.read(e);i+=`=== ${e.name} ===\n${t}\n\n`}const o=yield this.apiClient.analyzeVaultContext({content:i,analysis_type:"insights"});if(t.hide(),!o.success||!o.data)throw new Error(o.error||"Analysis failed");{const t=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${t}.md`;let i=`# Vault Analysis - ${t}\n\n`;i+=`## Analysis\n\n${o.data.analysis}\n\n`,o.data.insights&&o.data.insights.length>0&&(i+="## Key Insights\n\n",o.data.insights.forEach(e=>{i+=`- ${e}\n`}),i+="\n"),o.data.recommendations&&o.data.recommendations.length>0&&(i+="## Recommendations\n\n",o.data.recommendations.forEach(e=>{i+=`- ${e}\n`})),yield this.app.vault.create(n,i),new e.Notice(`Vault analysis saved as ${n}`)}}catch(n){t.hide(),new e.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return t(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new e.Notice("Copilot is disabled in settings");const t=n.getCursor(),i=n.getLine(t.line).substring(0,t.ch),o=n.getValue();if(o&&0!==o.trim().length)try{const a=yield this.apiClient.getCopilotCompletion({text:o,cursor_position:n.posToOffset(t),file_type:"markdown",context:i});a.success&&a.data?(n.replaceRange(a.data.completion,t),new e.Notice("Completion inserted",2e3)):new e.Notice(`Copilot error: ${a.error}`)}catch(t){new e.Notice(`Copilot error: ${t instanceof Error?t.message:"Unknown error"}`)}else new e.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return t(this,void 0,void 0,function*(){const t=n.getSelection();if(t)try{const i=yield this.apiClient.chat({message:`Please explain or analyze this text: "${t}"`,vault_context:n.getValue()});if(i.success&&i.data){const t=n.getCursor("to"),o=`\n\n**VaultPilot Analysis:**\n${i.data.response}\n\n`;n.replaceRange(o,t),new e.Notice("Analysis inserted",2e3)}else new e.Notice(`Chat error: ${i.error}`)}catch(t){new e.Notice(`Chat error: ${t instanceof Error?t.message:"Unknown error"}`)}else new e.Notice("No text selected")})}planTasksFromNote(n){return t(this,void 0,void 0,function*(){const t=n.getValue(),i=this.app.workspace.getActiveFile();if(!t.trim())return void new e.Notice("No content to analyze");const o=new e.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==i?void 0:i.name)||"Untitled"}`,context:t,timeframe:"1 week"});if(o.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const t=(new Date).toISOString().split("T")[0],o=`Task Plan - ${(null==i?void 0:i.basename)||"Untitled"} - ${t}.md`;let a=`# ${n.data.plan.title}\n\n`;a+=`${n.data.plan.description}\n\n`,a+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(a+="## Tasks\n\n",n.data.plan.tasks.forEach(e=>{const t="completed"===e.status?"[x]":"[ ]";a+=`${t} **${e.title}** (${e.priority} priority)\n`,a+=`   ${e.description}\n`,a+=`   *Estimated time: ${e.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(a+="## Milestones\n\n",n.data.milestones.forEach(e=>{a+=`- **${e.title}** (${e.target_date})\n`,a+=`  ${e.description}\n\n`})),yield this.app.vault.create(o,a),new e.Notice(`Task plan saved as ${o}`)}}catch(t){o.hide(),new e.Notice(`Task planning error: ${t instanceof Error?t.message:"Unknown error"}`)}})}planMyDay(){return t(this,void 0,void 0,function*(){var n,i;console.log("🚀 [Plan My Day] Command started");const o=this.app.workspace.getActiveFile();if(!o)return console.warn("⚠️ [Plan My Day] No active file found"),void new e.Notice("No active note—open today's daily note first.");console.log("📁 [Plan My Day] Active file:",{name:o.name,path:o.path,extension:o.extension});const a=new e.Notice("Planning your day with AI...",0);try{console.log("📖 [Plan My Day] Reading file content...");const s=yield this.app.vault.read(o);if(console.log("📝 [Plan My Day] File content read:",{length:s.length,hasContent:s.trim().length>0,firstLine:s.split("\n")[0],lineCount:s.split("\n").length}),console.log("🔍 [Plan My Day] Checking API client..."),console.log("🔗 [Plan My Day] API client status:",{exists:!!this.apiClient,type:typeof this.apiClient,isConnected:this.apiClient?"available":"not available"}),!this.apiClient){const e="API client not initialized. Check VaultPilot settings and connection.";throw console.error("❌ [Plan My Day] Error:",e),new Error(e)}console.log("📤 [Plan My Day] Fetching schedule from EvoAgentX...");const{scheduleMarkdown:r,headline:l}=yield function(e,n){return t(this,void 0,void 0,function*(){var t,i,o;if(console.log("🔄 [Plan My Day] Starting schedule fetch..."),console.log("📝 [Plan My Day] Note text length:",e.length),console.log("🔗 [Plan My Day] API client type:",typeof n),!n){const e="API client is null or undefined";throw console.error("❌ [Plan My Day] Error:",e),new Error(e)}if(!n.planTasks){const e="API client does not have planTasks method";throw console.error("❌ [Plan My Day] Error:",e),console.log("🔍 [Plan My Day] Available methods:",Object.getOwnPropertyNames(n)),new Error(e)}try{console.log("📤 [Plan My Day] Sending request to EvoAgentX...");const a=yield n.planTasks({goal:"Create a daily schedule based on this note content",context:e,timeframe:"1 day"});if(console.log("📥 [Plan My Day] Received response:",{success:a.success,hasData:!!a.data,error:a.error}),console.log("🔍 [Plan My Day] Raw response data:",JSON.stringify(a.data,null,2)),console.log("🔍 [Plan My Day] Response data type:",typeof a.data),console.log("🔍 [Plan My Day] Response data keys:",a.data?Object.keys(a.data):"no data"),!a.success){const e=a.error||"Failed to generate schedule";throw console.error("❌ [Plan My Day] API Error:",e),new Error(e)}if(!a.data){const e="No data in API response";throw console.error("❌ [Plan My Day] Error:",e),console.log("🔍 [Plan My Day] Full response:",a),new Error(e)}const s=a.data.data||a.data;if(console.log("📋 [Plan My Day] Response data structure:",{hasPlan:!!s.plan,planKeys:s.plan?Object.keys(s.plan):null,hasTasks:!!(null===(t=s.plan)||void 0===t?void 0:t.tasks),taskCount:(null===(o=null===(i=s.plan)||void 0===i?void 0:i.tasks)||void 0===o?void 0:o.length)||0}),!s.plan){const e="No plan data in API response";throw console.error("❌ [Plan My Day] Error:",e),console.log("🔍 [Plan My Day] Full response data:",a.data),console.log("🔍 [Plan My Day] Actual data:",s),new Error(e)}const r=s.plan.tasks||[];if(console.log("📝 [Plan My Day] Processing tasks:",r.length),0===r.length)return console.warn("⚠️ [Plan My Day] No tasks in response, creating fallback schedule"),{scheduleMarkdown:"| Time | Task |\n|------|------|\n| 9:00 AM | Plan your day |\n| 10:00 AM | Start working |\n| 12:00 PM | Lunch break |",headline:"📅 Basic schedule created (no tasks found in note)"};let l="| Time | Task |\n|------|------|\n";r.forEach((e,t)=>{var n,i;console.log(`📋 [Plan My Day] Processing task ${t+1}:`,{title:e.title,description:null===(n=e.description)||void 0===n?void 0:n.substring(0,100),priority:e.priority,estimatedTime:e.estimated_time});const o=null===(i=e.description)||void 0===i?void 0:i.match(/(\d{1,2}:\d{2})/),a=o?o[1]:`${9+Math.floor(1.5*t)}:${30*t%60||"00"}`;l+=`| ${a} | ${e.title} |\n`});const c={scheduleMarkdown:l,headline:`✨ Smart schedule created with ${r.length} tasks!`};return console.log("✅ [Plan My Day] Schedule generated successfully:",{markdownLength:l.length,taskCount:r.length,headline:c.headline}),c}catch(e){throw console.error("❌ [Plan My Day] Fetch error:",e),console.error("🔍 [Plan My Day] Error stack:",e instanceof Error?e.stack:"No stack trace"),e instanceof Error?new Error(`Schedule fetch failed: ${e.message}`):new Error(`Schedule fetch failed: ${String(e)}`)}})}(s,this.apiClient);if(console.log("📋 [Plan My Day] Schedule received:",{markdownLength:r.length,headline:l,firstLine:r.split("\n")[0]}),console.log("✅ [Plan My Day] Validating schedule..."),!function(e){console.log("🔍 [Plan My Day] Validating schedule markdown:",{length:e.length,trimmedLength:e.trim().length,isString:"string"==typeof e,preview:e.substring(0,100)});const t=e.trim().length>0;return console.log("✅ [Plan My Day] Validation result:",t),t}(r)){const e="Invalid schedule data received from API";throw console.error("❌ [Plan My Day] Validation failed:",{scheduleMarkdown:r.substring(0,200),length:r.length}),new Error(e)}console.log("📝 [Plan My Day] Injecting schedule into note...");const c=g(s),d=m(s);console.log("🔍 [Plan My Day] Existing sections:",{hasPlanWrapper:!!c,hasScheduleSection:!!d,planContent:null===(n=null==c?void 0:c[2])||void 0===n?void 0:n.substring(0,50),scheduleHeading:null===(i=null==d?void 0:d[1])||void 0===i?void 0:i.substring(0,50)});const u=function(e,t){var n,i,o;console.log("📝 [Plan My Day] Injecting schedule:",{originalLength:e.length,scheduleLength:t.length,hasOriginalContent:e.trim().length>0});const a=g(e);if(a){console.log("🔄 [Plan My Day] Replacing existing plan section with comment wrapper"),console.log("📋 [Plan My Day] Found wrapped plan section:",{startComment:a[1],contentLength:(null===(n=a[2])||void 0===n?void 0:n.length)||0,endComment:a[3]});const[i,o,,s]=a,r=`${o}\n${t}\n${s}`,l=e.replace(i,r);return console.log("✅ [Plan My Day] Plan section replaced within comment wrapper"),l}const s=m(e);if(s){console.log("🔄 [Plan My Day] Replacing existing schedule section"),console.log("📋 [Plan My Day] Found section:",{headingMatch:null===(i=s[1])||void 0===i?void 0:i.substring(0,50),contentMatch:null===(o=s[2])||void 0===o?void 0:o.substring(0,100)});const[n,a]=s,r=a+t,l=e.replace(n,r);return console.log("✅ [Plan My Day] Schedule section replaced"),l}{console.log("➕ [Plan My Day] Adding new plan section with comment wrapper at top");const n=`\x3c!-- vp:plan:start --\x3e\n${t}\n\x3c!-- vp:plan:end --\x3e\n\n`+e;return console.log("✅ [Plan My Day] New plan section with wrapper added at top"),n}}(s,r);console.log("💾 [Plan My Day] Updating file...",{originalLength:s.length,updatedLength:u.length,changed:s!==u}),yield this.app.vault.modify(o,u),console.log("✅ [Plan My Day] File updated successfully"),a.hide();const h=l?`${l} ✅`:"Schedule inserted ✅";console.log("🎉 [Plan My Day] Success:",h),new e.Notice(h)}catch(t){if(console.error("❌ [Plan My Day] Operation failed:",t),console.error("🔍 [Plan My Day] Error details:",{message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:"No stack trace",type:typeof t,name:t instanceof Error?t.name:"Unknown"}),a.hide(),t instanceof Error){const n=t.message;console.log("🔍 [Plan My Day] Analyzing error message:",n),n.includes("API client not initialized")?(console.error("❌ [Plan My Day] API client not initialized"),new e.Notice("Planning error: VaultPilot not connected to EvoAgentX. Check settings and restart plugin.")):n.includes("does not have planTasks method")?(console.error("❌ [Plan My Day] API client missing planTasks method"),new e.Notice("Planning error: EvoAgentX API client outdated. Please update VaultPilot plugin.")):n.includes("JSON")||n.includes("Invalid schedule data")?(console.error("❌ [Plan My Day] Invalid response format"),new e.Notice("Planning error: Invalid response format from EvoAgentX")):n.includes("fetch")||n.includes("network")||n.includes("Failed to fetch")?(console.error("❌ [Plan My Day] Network error"),new e.Notice("Planning error: Unable to connect to EvoAgentX server. Check your connection and server status.")):n.includes("Failed to generate schedule")||n.includes("Schedule fetch failed")?(console.error("❌ [Plan My Day] Schedule generation failed"),new e.Notice("Planning error: EvoAgentX task planning failed. Check server logs for details.")):n.includes("No data in API response")?(console.error("❌ [Plan My Day] Empty API response"),new e.Notice("Planning error: EvoAgentX returned empty response. Try again or check server status.")):(console.error("❌ [Plan My Day] Unhandled error"),new e.Notice(`Planning error: ${n.substring(0,100)}${n.length>100?"...":""}`))}else console.error("❌ [Plan My Day] Non-Error object thrown"),new e.Notice("Planning error: Unknown error occurred with EvoAgentX");console.log("🔍 [Plan My Day] Full error log completed")}})}debugPlanMyDay(){return t(this,void 0,void 0,function*(){console.log("🔍 [Plan My Day Debug] Starting comprehensive debug..."),f.clearLogs();const t=new e.Notice("Running Plan My Day diagnostics...",0);try{const n=this.app.workspace.getActiveFile();f.log("📁 Active file check",{hasActiveFile:!!n,fileName:null==n?void 0:n.name,fileExtension:null==n?void 0:n.extension});const i=f.analyzeApiClient(this.apiClient);if(f.log("🔗 API client analysis",i),this.apiClient){const e=yield f.testConnection(this.apiClient);if(f.log("🌐 Connection test result",e),e.success){const e=yield f.testTaskPlanning(this.apiClient,"Test note with some tasks:\n- Write code\n- Test functionality\n- Review results");f.log("📋 Task planning test result",e)}}f.log("⚙️ Plugin settings",{backendUrl:this.settings.backendUrl,hasApiKey:!!this.settings.apiKey,debugMode:this.settings.debugMode}),t.hide();const o=f.getLogs();console.log("🔍 [Plan My Day Debug] Complete diagnostic log:",o);const a=o.slice(-5).join("\n");if(new e.Notice(`Debug complete! Check console for full logs.\n\nLast entries:\n${a}`,1e4),n){const t=`# Plan My Day Debug Report\n\nGenerated: ${(new Date).toISOString()}\n\n## Diagnostic Results\n\n\`\`\`\n${f.exportLogs()}\n\`\`\``;yield this.app.vault.create(`Plan My Day Debug - ${Date.now()}.md`,t),new e.Notice("Debug report saved as new note!")}}catch(n){t.hide(),f.error("Debug process failed",n),new e.Notice(`Debug failed: ${n instanceof Error?n.message:String(n)}`)}})}activateView(){return t(this,void 0,void 0,function*(){const e=this.app.workspace.getLeavesOfType(a);if(0===e.length){const e=this.app.workspace.getRightLeaf(!1);e&&(yield e.setViewState({type:a,active:!0}))}else this.app.workspace.revealLeaf(e[0])})}activateFullTabView(){return t(this,void 0,void 0,function*(){const e=this.app.workspace.getLeavesOfType(r);if(0===e.length){const e=this.app.workspace.getLeaf("tab");e&&(yield e.setViewState({type:r,active:!0}))}else this.app.workspace.revealLeaf(e[0])})}initializeVaultManagement(){var e;(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)&&(this.vaultClient=new b(this.settings.backendUrl,this.settings.apiKey),this.checkVaultManagementAvailability(),this.settings.debugMode&&console.log("Vault management initialized"))}checkVaultManagementAvailability(){return t(this,void 0,void 0,function*(){try{if(404===(yield fetch(`${this.settings.backendUrl}/api/obsidian/vault/structure`,{method:"POST",headers:Object.assign({"Content-Type":"application/json"},this.settings.apiKey&&{Authorization:`Bearer ${this.settings.apiKey}`}),body:JSON.stringify({include_content:!1,max_depth:1})})).status)return this.disableVaultManagement(),this.settings.debugMode&&console.log("VaultPilot: Vault management endpoints not available, disabling features"),!1}catch(e){this.settings.debugMode&&console.log("VaultPilot: Could not check vault management availability:",e)}return!0})}disableVaultManagement(){this.vaultClient=null,this.settings.debugMode&&console.log("Vault management disabled")}registerVaultManagementCommands(){[{id:"vaultpilot-vault-structure",name:"View Vault Structure",callback:function(){console.log("Opening vault structure modal"),this.openVaultStructureModal?this.openVaultStructureModal():new e.Notice("Vault structure feature not available")}},{id:"vaultpilot-smart-search",name:"Smart Vault Search",callback:function(){console.log("Opening smart search modal"),this.openSmartSearchModal?this.openSmartSearchModal():new e.Notice("Smart search feature not available")}},{id:"vaultpilot-file-operations",name:"File Operations Manager",callback:function(){console.log("Opening file operations modal"),this.openFileOperationsModal?this.openFileOperationsModal():new e.Notice("File operations feature not available")}},{id:"vaultpilot-organize-vault",name:"AI Vault Organization",callback:function(){console.log("Opening vault organizer modal"),this.openVaultOrganizerModal?this.openVaultOrganizerModal():new e.Notice("Vault organizer feature not available")}},{id:"vaultpilot-batch-operations",name:"Batch File Operations",callback:function(){console.log("Opening batch operations modal"),this.openBatchOperationsModal?this.openBatchOperationsModal():new e.Notice("Batch operations feature not available")}},{id:"vaultpilot-quick-search-selection",name:"Quick Search Selected Text",editorCallback:function(t){const n=t.getSelection();n.trim()?(console.log("Quick search for:",n.trim()),this.openSmartSearchModal?this.openSmartSearchModal(n.trim()):new e.Notice("Smart search feature not available")):new e.Notice("Please select text to search for")}},{id:"vaultpilot-vault-health-check",name:"Vault Health Check",callback:function(){return t(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new e.Notice("Vault management not initialized");new e.Notice("Running vault health check...");const t=yield this.vaultClient.testConnection();if(!t.success)return void new e.Notice(`Health check failed: ${t.message}`,5e3);const n=yield this.vaultClient.getVaultStructure({include_content:!1,max_depth:1}),i=yield this.vaultClient.searchVault({query:"test",max_results:1});new e.Notice(`✅ Vault Health Check Passed\n📁 ${n.total_files} files, ${n.total_folders} folders\n🔍 Search: ${i.results.length} results\n💾 Size: ${(n.total_size/1024/1024).toFixed(2)} MB`,8e3)}catch(t){console.error("Vault health check failed:",t),new e.Notice(`❌ Health check failed: ${t.message}`,5e3)}})}},{id:"vaultpilot-vault-backup",name:"Create Vault Backup",callback:function(){return t(this,void 0,void 0,function*(){try{if(!this.vaultClient)return void new e.Notice("Vault management not initialized");new e.Notice("Creating vault backup...");const t=yield this.vaultClient.backupVault({include_settings:!0,compression:!0,backup_name:`vaultpilot-backup-${(new Date).toISOString().split("T")[0]}`});new e.Notice(`✅ Backup created successfully\n📦 ${t.files_backed_up} files\n💾 Size: ${(t.backup_size/1024/1024).toFixed(2)} MB\n📁 Location: ${t.backup_path}`,8e3)}catch(t){console.error("Backup failed:",t),new e.Notice(`❌ Backup failed: ${t.message}`,5e3)}})}},{id:"vaultpilot-search-content",name:"Search Content",editorCallback:function(t){const n=t.getSelection().trim()||"Enter search query";this.openSmartSearchModal?this.openSmartSearchModal(n,"content"):new e.Notice("Smart search feature not available")}},{id:"vaultpilot-search-filenames",name:"Search Filenames",callback:function(){this.openSmartSearchModal?this.openSmartSearchModal("","filename"):new e.Notice("Smart search feature not available")}},{id:"vaultpilot-recent-files",name:"View Recent Files",callback:function(){return t(this,void 0,void 0,function*(){var t,n;try{if(!this.vaultClient)return void new e.Notice("Vault management not initialized");const t=yield this.vaultClient.getVaultStructure({include_content:!1});if(0===t.recent_files.length)return void new e.Notice("No recent files found");const n=t.recent_files.slice(0,10).map(e=>`• ${e.name} (${e.modified})`).join("\n");new e.Notice(`📝 Recent Files:\n${n}`,1e4)}catch(i){if(console.error("Failed to get recent files:",i),(null===(t=i.message)||void 0===t?void 0:t.includes("Not Found"))||(null===(n=i.message)||void 0===n?void 0:n.includes("404"))){const t=this.app.vault.getMarkdownFiles().sort((e,t)=>t.stat.mtime-e.stat.mtime).slice(0,10);if(0===t.length)return void new e.Notice("No recent files found");const n=t.map(e=>`• ${e.basename} (${new Date(e.stat.mtime).toLocaleDateString()})`).join("\n");new e.Notice(`📝 Recent Files (Local):\n${n}`,1e4)}else new e.Notice(`❌ Failed to get recent files: ${i.message}`,5e3)}})}}].forEach(e=>{var t,n;this.addCommand(Object.assign(Object.assign({},e),{callback:null===(t=e.callback)||void 0===t?void 0:t.bind(this),editorCallback:null===(n=e.editorCallback)||void 0===n?void 0:n.bind(this)}))})}openVaultStructureModal(){this.vaultClient?new x(this.app,this).open():new e.Notice("Vault management not available")}openSmartSearchModal(t,n){if(!this.vaultClient)return void new e.Notice("Vault management not available");const i=new E(this.app,this);t&&i.setInitialQuery(t,n),i.open()}openFileOperationsModal(t,n){if(!this.vaultClient)return void new e.Notice("Vault management not available");const i=new M(this.app,this);t&&i.setInitialPath(t),n&&i.setOperation(n),i.open()}openVaultOrganizerModal(){new e.Notice("Vault organizer modal not yet implemented")}openBatchOperationsModal(){new e.Notice("Batch operations modal not yet implemented")}initializePhase3(){try{this.phase3Integration=new Q(this,{autoShowOnboarding:!this.settings.onboardingComplete}),this.phase3Integration.onload(),this.settings.debugMode&&console.log("Phase 3 features initialized successfully"),this.settings.onboardingComplete||setTimeout(()=>{var e;null===(e=this.phase3Integration)||void 0===e||e.showOnboardingIfNeeded()},1e3)}catch(t){console.error("Failed to initialize Phase 3 features:",t),this.settings.debugMode&&new e.Notice("Phase 3 features failed to initialize - check console for details",5e3)}}disablePhase3(){this.phase3Integration&&(this.phase3Integration.onunload(),this.phase3Integration=void 0),this.settings.debugMode&&console.log("Phase 3 features disabled")}initializeEnhancementManager(){try{this.enhancementManager=new te(this),this.enhancementManager.initialize().then(()=>{this.settings.debugMode&&console.log("VaultPilot Enhancement Manager initialized successfully")}).catch(e=>{console.error("Failed to initialize Enhancement Manager:",e)}),this.keyboardHandler=new ne(this),this.registerDomEvent(document,"keydown",e=>{var t;null===(t=this.keyboardHandler)||void 0===t||t.handleKeyDown(e)});ie.createEnhancedCommands(this).forEach(e=>{this.addCommand({id:e.id,name:e.name,callback:e.callback,editorCallback:e.editorCallback,checkCallback:e.checkCallback})}),this.settings.debugMode&&console.log("Keyboard shortcuts and enhanced commands initialized")}catch(t){console.error("Failed to initialize Enhancement Manager:",t),this.settings.debugMode&&new e.Notice("Enhancement features failed to initialize - check console for details",5e3)}}disableEnhancementManager(){this.enhancementManager&&(this.enhancementManager.unload(),this.enhancementManager=void 0),this.keyboardHandler&&(this.keyboardHandler=void 0),this.settings.debugMode&&console.log("Enhancement Manager disabled")}handleKeyUp(e){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;e.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(e)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(t){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(t.key))return!1;const n=this.app.workspace.getActiveViewOfType(e.MarkdownView);if(!n)return!1;const i=n.editor,o=i.getCursor(),a=i.getLine(o.line);if(o.ch!==a.length)return!1;const s=a.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===t.key||"Enter"===t.key&&a.trim().length>10}triggerAutoCompletion(){return t(this,void 0,void 0,function*(){const t=this.app.workspace.getActiveViewOfType(e.MarkdownView);if(!t)return;const n=t.editor,i=n.getCursor(),o=n.getLine(i.line),a=n.getValue();if(o.trim().length<10||i.ch!==o.length)return;if(!a||0===a.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const t=yield this.apiClient.getCopilotCompletion({text:a,cursor_position:n.posToOffset(i),file_type:"markdown"});t.success&&t.data&&t.data.suggestions.length>0&&this.settings.debugMode&&new e.Notice(`Auto-suggestion: ${t.data.suggestions[0]}`,3e3)}catch(e){this.settings.debugMode&&console.error("Auto-completion error:",e)}}})}handleCopilotSuggestion(t){this.settings.debugMode&&new e.Notice(`Live suggestion: ${t.completion}`,2e3)}loadSettings(){return t(this,void 0,void 0,function*(){this.settings=Object.assign({},i,yield this.loadData())})}saveSettings(){return t(this,void 0,void 0,function*(){var e,t;yield this.saveData(this.settings),this.apiClient=new p(this.settings.backendUrl,this.settings.apiKey),(null===(e=this.settings.vaultManagement)||void 0===e?void 0:e.enableVaultManagement)?this.initializeVaultManagement():this.disableVaultManagement(),(null===(t=this.settings.modelSelection)||void 0===t?void 0:t.enabled)?yield this.initializeModelSelection():yield this.disconnectModelSelection(),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}initializeModelSelection(){return t(this,void 0,void 0,function*(){var t;if(null===(t=this.settings.modelSelection)||void 0===t?void 0:t.enabled)try{if(!w.detect().hasHTTP)throw new Error("HTTP transport not available");this.modelSelectionService=new S(this.settings.backendUrl,this.settings.modelSelection.devpipePath,{monitoring_interval:this.settings.modelSelection.monitoringInterval,fallback_enabled:this.settings.modelSelection.fallbackEnabled,cache_duration:this.settings.modelSelection.cacheDuration,retry_attempts:this.settings.modelSelection.retryAttempts,timeout:this.settings.modelSelection.timeout,debug_mode:this.settings.modelSelection.debugMode}),yield this.modelSelectionService.updatePreferences({priority:this.settings.modelSelection.userPreferences.priority,max_cost_per_request:this.settings.modelSelection.userPreferences.maxCostPerRequest,preferred_providers:this.settings.modelSelection.userPreferences.preferredProviders,fallback_enabled:this.settings.modelSelection.fallbackEnabled,quality_threshold:this.settings.modelSelection.userPreferences.qualityThreshold,timeout_preference:this.settings.modelSelection.timeout}),yield this.modelSelectionService.initialize(),this.settings.debugMode&&console.log("ModelSelectionService initialized successfully"),new e.Notice("🤖 Smart model selection enabled",3e3)}catch(t){console.error("Failed to initialize ModelSelectionService:",t),t instanceof Error&&(t.message.includes("not accessible")||t.message.includes("Failed to fetch")?this.settings.debugMode&&new e.Notice("⚠️ Model selection service unavailable - using fallback mode",4e3):t.message.includes("transport not available")?new e.Notice("⚠️ Model selection not supported in this environment",5e3):this.settings.debugMode&&new e.Notice("⚠️ Model selection initialization failed",3e3)),this.settings.modelSelection.retryAttempts>0&&setTimeout(()=>{this.retryModelSelectionInit(1)},1e4)}else this.settings.debugMode&&console.log("Model selection disabled in settings")})}retryModelSelectionInit(e){return t(this,void 0,void 0,function*(){var t;if(e>((null===(t=this.settings.modelSelection)||void 0===t?void 0:t.retryAttempts)||3))this.settings.debugMode&&console.log("Model selection initialization retry limit reached");else try{this.settings.debugMode&&console.log(`Retrying model selection initialization (attempt ${e})`),yield this.initializeModelSelection()}catch(t){const n=Math.min(3e4,5e3*Math.pow(2,e-1));setTimeout(()=>{this.retryModelSelectionInit(e+1)},n)}})}checkServiceStatus(){return t(this,void 0,void 0,function*(){var t,n;const i=new e.Notice("Checking VaultPilot service status...",0);try{let o="🔍 VaultPilot Service Status:\n\n";try{const e=yield this.apiClient.healthCheck();e.success?(o+="✅ Main Backend: Connected\n",o+=`   Server: ${this.settings.backendUrl}\n`):(o+="❌ Main Backend: Failed\n",o+=`   Error: ${e.error}\n`)}catch(e){o+="❌ Main Backend: Connection Error\n"}this.isWebSocketConnected()?o+="✅ WebSocket: Connected\n":o+="❌ WebSocket: Disconnected\n",(null===(t=this.settings.modelSelection)||void 0===t?void 0:t.enabled)?this.modelSelectionService&&this.modelSelectionService.isConnected()?o+="✅ Model Selection: Connected\n":(o+="❌ Model Selection: Not Available\n",this.modelSelectionService?o+="   Reason: Service disconnected\n":o+="   Reason: Service not initialized\n"):o+="⚠️ Model Selection: Disabled in settings\n",(null===(n=this.settings.vaultManagement)||void 0===n?void 0:n.enableVaultManagement)?this.vaultClient?o+="✅ Vault Management: Enabled\n":o+="❌ Vault Management: Failed to initialize\n":o+="⚠️ Vault Management: Disabled in settings\n",i.hide(),new e.Notice(o,15e3),this.settings.debugMode&&console.log("VaultPilot Service Status:",o)}catch(t){i.hide(),new e.Notice(`❌ Failed to check service status: ${t instanceof Error?t.message:"Unknown error"}`,5e3)}})}retryModelSelectionManual(){return t(this,void 0,void 0,function*(){if(this.modelSelectionService&&this.modelSelectionService.isConnected())return void new e.Notice("Model selection already connected",3e3);const t=new e.Notice("Retrying model selection initialization...",0);try{yield this.initializeModelSelection(),t.hide(),new e.Notice("✅ Model selection connected successfully",3e3)}catch(n){t.hide(),new e.Notice(`❌ Model selection retry failed: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}disconnectModelSelection(){return t(this,void 0,void 0,function*(){if(this.modelSelectionService)try{yield this.modelSelectionService.disconnect(),this.modelSelectionService=void 0,this.settings.debugMode&&console.log("ModelSelectionService disconnected")}catch(e){console.error("Error disconnecting ModelSelectionService:",e)}})}testModelSelection(){return t(this,void 0,void 0,function*(){if(!this.modelSelectionService)return void new e.Notice("❌ Model selection service not initialized",5e3);const t=new e.Notice("🤖 Testing model selection...",0);try{const n=[{type:"text-generation",quality:"medium"},{type:"code-generation",quality:"high"},{type:"chat",quality:"low"},{type:"summarization",quality:"medium"}];let i=[];for(const e of n)try{const t=yield this.modelSelectionService.selectForTask(e.type,e.quality);i.push(`✅ ${e.type}: ${t.selected_model.name} ($${t.estimated_cost.toFixed(4)})`)}catch(t){i.push(`❌ ${e.type}: Failed - ${t instanceof Error?t.message:"Unknown error"}`)}t.hide();const o=i.join("\n");new e.Notice(`Model Selection Test Results:\n${o}`,1e4),this.settings.debugMode&&console.log("Model selection test results:",i)}catch(n){t.hide(),new e.Notice(`❌ Model selection test failed: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}showModelHealth(){return t(this,void 0,void 0,function*(){if(!this.modelSelectionService)return void new e.Notice("❌ Model selection service not initialized",5e3);const t=new e.Notice("🏥 Checking model health...",0);try{const n=yield this.modelSelectionService.getModelHealth();if(t.hide(),0===n.length)return void new e.Notice("⚠️ No model health information available",5e3);const i=n.map(e=>`${"healthy"===e.status?"✅":"degraded"===e.status?"⚠️":"❌"} ${e.model_id}: ${e.status} (${e.response_time}ms, ${e.availability_percentage}%)`).join("\n");new e.Notice(`Model Health Status:\n${i}`,15e3),this.settings.debugMode&&console.log("Model health status:",n)}catch(n){t.hide(),new e.Notice(`❌ Failed to get model health: ${n instanceof Error?n.message:"Unknown error"}`,5e3)}})}getBestModelForTask(e){return t(this,arguments,void 0,function*(e,t="medium"){var n,i;if(this.modelSelectionService&&this.modelSelectionService.isConnected())try{const n=yield this.modelSelectionService.selectForTask(e,t);return this.settings.debugMode&&console.log(`Selected model ${n.selected_model.name} for ${e} task`),n}catch(e){this.settings.debugMode&&console.warn("Model selection failed, using default:",e),(null===(n=this.settings.modelSelection)||void 0===n?void 0:n.enabled)&&!this.modelSelectionService.isConnected()&&this.retryModelSelectionInit(1).catch(()=>{})}else(null===(i=this.settings.modelSelection)||void 0===i?void 0:i.enabled)&&!this.modelSelectionService&&(this.settings.debugMode&&console.log("Model selection service not initialized, attempting initialization..."),this.initializeModelSelection().catch(()=>{}));return null})}loadEnhancedUIStyles(){const e="vaultpilot-enhanced-ui-styles",t=document.getElementById(e);t&&t.remove();const n=document.createElement("style");n.id=e,n.textContent='\n      /* VaultPilot Enhanced UI Styles */\n      @import url("app://obsidian.md/vault-management/enhanced-ui-styles.css");\n      \n      /* Fallback styles in case import fails */\n      .vaultpilot-progress-container {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        z-index: 10000;\n        pointer-events: none;\n        max-width: 400px;\n        font-family: var(--font-interface);\n      }\n      \n      .vaultpilot-progress-item {\n        background: var(--background-primary);\n        border: 1px solid var(--background-modifier-border);\n        border-radius: 8px;\n        padding: 12px 16px;\n        margin-bottom: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        min-width: 300px;\n        pointer-events: auto;\n        animation: slideInRight 0.3s ease-out;\n      }\n      \n      @keyframes slideInRight {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n      \n      @keyframes slideOutRight {\n        from { transform: translateX(0); opacity: 1; }\n        to { transform: translateX(100%); opacity: 0; }\n      }\n    ',document.head.appendChild(n),this.settings.debugMode&&console.log("Enhanced UI styles loaded")}}class ae extends e.Modal{constructor(e,t){super(e),this.plugin=t}onOpen(){const{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"VaultPilot Enhancement Features Demo"}),this.createKeyboardShortcutsDemo(e),this.createProgressIndicatorDemo(e),this.createPerformanceDemo(e),this.createWebSocketDemo(e)}createKeyboardShortcutsDemo(t){const n=t.createDiv({cls:"enhancement-demo-section"});n.createEl("h3",{text:"⌨️ Keyboard Shortcuts"});n.createEl("p").innerHTML="\n            <strong>20+ keyboard shortcuts are now available!</strong><br>\n            Try these shortcuts:\n            <ul>\n                <li><code>Ctrl+Shift+Enter</code> - Open VaultPilot Chat</li>\n                <li><code>Ctrl+Shift+S</code> - Smart Search</li>\n                <li><code>Ctrl+Space</code> - AI Completion</li>\n                <li><code>Ctrl+Shift+H</code> - Show All Shortcuts</li>\n            </ul>\n        ";n.createEl("button",{text:"Show All Keyboard Shortcuts"}).onclick=()=>{if(this.plugin.keyboardHandler){this.plugin.keyboardHandler.getShortcuts();const t=this.plugin.keyboardHandler.getShortcuts(),n=new e.Modal(this.app);n.titleEl.textContent="VaultPilot Keyboard Shortcuts";const i=n.contentEl;i.style.maxHeight="70vh",i.style.overflowY="auto",t.forEach(e=>{const t=i.createDiv({cls:"shortcut-item"});t.style.cssText="\n                        display: flex; \n                        justify-content: space-between; \n                        padding: 8px; \n                        margin: 4px 0; \n                        background: var(--background-secondary); \n                        border-radius: 4px;\n                    ";const n=t.createSpan({cls:"shortcut-keys"});n.textContent=`${e.modifiers.join(" + ")} + ${e.key.replace("Key","")}`,n.style.cssText="\n                        font-family: monospace; \n                        background: var(--background-primary-alt); \n                        padding: 2px 6px; \n                        border-radius: 3px;\n                    ";t.createSpan({cls:"shortcut-desc"}).textContent=e.description}),n.open()}}}createProgressIndicatorDemo(e){const t=e.createDiv({cls:"enhancement-demo-section"});t.createEl("h3",{text:"📊 Progress Indicators"}),t.createEl("p",{text:"Real-time progress bars with animations, ETA calculation, and WebSocket updates."});const n=t.createDiv({cls:"demo-buttons"});n.style.cssText="display: flex; gap: 10px; flex-wrap: wrap;";n.createEl("button",{text:"Quick Progress (3s)"}).onclick=()=>{this.demoQuickProgress()};n.createEl("button",{text:"Long Progress (10s)"}).onclick=()=>{this.demoLongProgress()};n.createEl("button",{text:"Multiple Progress"}).onclick=()=>{this.demoMultipleProgress()}}createPerformanceDemo(t){const n=t.createDiv({cls:"enhancement-demo-section"});n.createEl("h3",{text:"⚡ Performance Optimization"}),n.createEl("p",{text:"Intelligent caching, request deduplication, and performance metrics."});const i=n.createDiv({cls:"demo-buttons"});i.style.cssText="display: flex; gap: 10px; flex-wrap: wrap;";i.createEl("button",{text:"Test Caching"}).onclick=()=>{this.demoCaching()};i.createEl("button",{text:"Show Metrics"}).onclick=()=>{this.showPerformanceMetrics()};i.createEl("button",{text:"Clear Cache"}).onclick=()=>{this.plugin.enhancementManager&&(this.plugin.enhancementManager.clearCache(),new e.Notice("Cache cleared successfully"))}}createWebSocketDemo(t){var n;const i=t.createDiv({cls:"enhancement-demo-section"});i.createEl("h3",{text:"🔗 WebSocket Features"});const o=i.createDiv(),a=(null===(n=this.plugin.enhancementManager)||void 0===n?void 0:n.isWebSocketConnected())||!1;o.innerHTML=`\n            <p>WebSocket Status: \n                <span style="color: ${a?"var(--color-green)":"var(--color-red)"};">\n                    ${a?"🟢 Connected":"🔴 Disconnected"}\n                </span>\n            </p>\n            <p>Real-time features: Progress updates, Performance metrics, Dynamic shortcuts</p>\n        `;i.createEl("button",{text:"Test WebSocket Connection"}).onclick=()=>{var t;const n=null===(t=this.plugin.enhancementManager)||void 0===t?void 0:t.isWebSocketConnected();new e.Notice("WebSocket is "+(n?"connected":"disconnected"),3e3)}}demoQuickProgress(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t="demo-quick-"+Date.now();this.plugin.enhancementManager.showProgress({id:t,title:"Quick Demo Task",message:"Processing...",percentage:0,eta:3,cancelable:!0});let n=0;const i=setInterval(()=>{var e;n+=33.33,n>=100&&(n=100,clearInterval(i),setTimeout(()=>{var e;null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.hideProgress(t)},500)),null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.updateProgress(t,{percentage:n,message:n<100?"Processing...":"Complete!",eta:n<100?(100-n)/33.33:0})},1e3)}demoLongProgress(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t="demo-long-"+Date.now();this.plugin.enhancementManager.showProgress({id:t,title:"Long Running Task",message:"Analyzing vault structure...",percentage:0,eta:10,cancelable:!0});const n=[{msg:"Analyzing vault structure...",duration:2e3},{msg:"Processing files...",duration:3e3},{msg:"Generating insights...",duration:2e3},{msg:"Optimizing performance...",duration:2e3},{msg:"Finalizing results...",duration:1e3}];let i=0,o=0;const a=()=>{var e,s;if(i>=n.length)return null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.updateProgress(t,{percentage:100,message:"Complete!",eta:0}),void setTimeout(()=>{var e;null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.hideProgress(t)},1e3);const r=n[i],l=100/n.length;null===(s=this.plugin.enhancementManager)||void 0===s||s.progressIndicator.updateProgress(t,{percentage:o,message:r.msg,eta:2*(n.length-i)}),setTimeout(()=>{o+=l,i++,a()},r.duration)};a()}demoMultipleProgress(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");[{id:"task1",title:"Backup Creation",duration:5e3},{id:"task2",title:"File Analysis",duration:7e3},{id:"task3",title:"Index Update",duration:3e3}].forEach((e,t)=>{setTimeout(()=>{var t;const n=`demo-multi-${e.id}-${Date.now()}`;null===(t=this.plugin.enhancementManager)||void 0===t||t.showProgress({id:n,title:e.title,message:"Starting...",percentage:0,eta:e.duration/1e3,cancelable:!0});let i=0;const o=setInterval(()=>{var t;i+=10,i>=100&&(i=100,clearInterval(o),setTimeout(()=>{var e;null===(e=this.plugin.enhancementManager)||void 0===e||e.progressIndicator.hideProgress(n)},500)),null===(t=this.plugin.enhancementManager)||void 0===t||t.progressIndicator.updateProgress(n,{percentage:i,message:i<100?"Processing...":"Complete!",eta:i<100?(100-i)/10*(e.duration/1e4):0})},e.duration/10)},1e3*t)})}demoCaching(){return t(this,void 0,void 0,function*(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t="demo-cache-test",n=performance.now();try{yield this.plugin.enhancementManager.optimizedAPICall(t,()=>new Promise(e=>setTimeout(()=>e({data:"test response"}),1e3)));const i=performance.now()-n,o=performance.now();yield this.plugin.enhancementManager.optimizedAPICall(t,()=>new Promise(e=>setTimeout(()=>e({data:"test response"}),1e3)));const a=performance.now()-o;new e.Notice(`First request: ${Math.round(i)}ms (cache miss)\nSecond request: ${Math.round(a)}ms (cache hit)`,5e3)}catch(t){new e.Notice("Cache test failed: "+t)}})}showPerformanceMetrics(){if(!this.plugin.enhancementManager)return void new e.Notice("Enhancement Manager not initialized");const t=this.plugin.enhancementManager.getPerformanceMetrics(),n=this.plugin.enhancementManager.getCacheHitRate(),i=new e.Modal(this.app);i.titleEl.textContent="Performance Metrics";i.contentEl.innerHTML=`\n            <div class="vaultpilot-metrics-container">\n                <div class="metrics-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Total Requests</div>\n                        <div class="metric-value">${t.totalRequests}</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Cache Hit Rate</div>\n                        <div class="metric-value">${Math.round(n)}%</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Avg Response Time</div>\n                        <div class="metric-value">${Math.round(t.averageResponseTime)}ms</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Cache Size</div>\n                        <div class="metric-value">${t.currentCacheSize} items</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Memory Usage</div>\n                        <div class="metric-value">${Math.round(t.memoryUsage/1024)} KB</div>\n                    </div>\n                    <div class="metric-item" style="background: var(--background-secondary); padding: 12px; border-radius: 6px;">\n                        <div class="metric-label">Fastest Response</div>\n                        <div class="metric-value">${Math.round(t.fastestResponse)}ms</div>\n                    </div>\n                </div>\n            </div>\n        `,i.open()}onClose(){const{contentEl:e}=this;e.empty()}}const se="vaultpilot-demo-styles";if(!document.getElementById(se)){const e=document.createElement("style");e.id=se,e.textContent="\n.enhancement-demo-section {\n    margin: 20px 0;\n    padding: 15px;\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 8px;\n    background: var(--background-secondary);\n}\n\n.enhancement-demo-section h3 {\n    margin-top: 0;\n    color: var(--text-accent);\n}\n\n.demo-buttons {\n    margin-top: 10px;\n}\n\n.demo-buttons button {\n    padding: 8px 16px;\n    margin: 4px;\n    border: 1px solid var(--background-modifier-border);\n    border-radius: 4px;\n    background: var(--interactive-normal);\n    color: var(--text-normal);\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n.demo-buttons button:hover {\n    background: var(--interactive-hover);\n}\n\n.shortcut-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px;\n    margin: 4px 0;\n    background: var(--background-secondary);\n    border-radius: 4px;\n}\n\n.metric-label {\n    color: var(--text-muted);\n    font-size: 0.85em;\n    margin-bottom: 4px;\n    text-transform: uppercase;\n}\n\n.metric-value {\n    color: var(--text-normal);\n    font-size: 1.2em;\n    font-weight: 600;\n}\n",document.head.appendChild(e)}var re=Object.freeze({__proto__:null,VaultPilotEnhancementDemo:ae});module.exports=oe;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3ZhdWx0LXNldHRpbmdzLnRzIiwiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvZnVsbC10YWItdmlldy50cyIsIi4uL3NyYy92YXVsdC11dGlscy50cyIsIi4uL3NyYy9jaGF0LW1vZGFsLnRzIiwiLi4vc3JjL3dvcmtmbG93LW1vZGFsLnRzIiwiLi4vc3JjL2FwaS1jbGllbnQudHMiLCIuLi9zcmMvcGxhbm5lci50cyIsIi4uL3NyYy9wbGFuLW15LWRheS1kZWJ1Zy50cyIsIi4uL3NyYy92YXVsdC10eXBlcy50cyIsIi4uL3NyYy92YXVsdC1hcGktY2xpZW50LnRzIiwiLi4vc3JjL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3IudHMiLCIuLi9zcmMvZGV2cGlwZS9EZXZQaXBlQ2xpZW50LnRzIiwiLi4vc3JjL3R5cGVzL01vZGVsU2VsZWN0aW9uLnRzIiwiLi4vc3JjL3NlcnZpY2VzL01vZGVsU2VsZWN0aW9uU2VydmljZS50cyIsIi4uL3NyYy92YXVsdC1tb2RhbHMudHMiLCIuLi9zcmMvZGV2cGlwZS90cmFuc3BvcnRzL0RldlBpcGVUcmFuc3BvcnQudHMiLCIuLi9zcmMvY29tcG9uZW50cy9PbmJvYXJkaW5nV2l6YXJkLnRzIiwiLi4vc3JjL3NlcnZpY2VzL1JlY29tbWVuZGF0aW9uRW5naW5lLnRzIiwiLi4vc3JjL2RldnBpcGUvdHJhbnNwb3J0cy9CYXNlVHJhbnNwb3J0LnRzIiwiLi4vc3JjL2RldnBpcGUvdHJhbnNwb3J0cy9IVFRQVHJhbnNwb3J0LnRzIiwiLi4vc3JjL2RldnBpcGUvdHJhbnNwb3J0cy9XZWJTb2NrZXRUcmFuc3BvcnQudHMiLCIuLi9zcmMvZGV2cGlwZS90cmFuc3BvcnRzL0ZpbGVTeXN0ZW1UcmFuc3BvcnQudHMiLCIuLi9zcmMvZGV2cGlwZS9tb25pdG9yaW5nL1RyYW5zcG9ydEhlYWx0aE1vbml0b3IudHMiLCIuLi9zcmMvZGV2cGlwZS9UcmFuc3BvcnRNYW5hZ2VyLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvVHJhbnNwb3J0RGFzaGJvYXJkLnRzIiwiLi4vc3JjL2NvbXBvbmVudHMvQWR2YW5jZWRTZXR0aW5ncy50cyIsIi4uL3NyYy9jb21wb25lbnRzL1BoYXNlM0ludGVncmF0aW9uLnRzIiwiLi4vc3JjL3ZhdWx0LW1hbmFnZW1lbnQvZW5oYW5jZWQtdWktY29tcG9uZW50cy50cyIsIi4uL3NyYy92YXVsdC1tYW5hZ2VtZW50L2VuaGFuY2VkLWNvbW1hbmRzLnRzIiwiLi4vc3JjL21haW4udHMiLCIuLi9zcmMvdmF1bHQtY29tbWFuZHMudHMiLCIuLi9zcmMvdmF1bHQtbWFuYWdlbWVudC9lbmhhbmNlbWVudC1kZW1vLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2V0dGluZ3MgRXh0ZW5zaW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIH0gZnJvbSAnLi92YXVsdC10eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1M6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzID0ge1xuICBlbmFibGVWYXVsdE1hbmFnZW1lbnQ6IHRydWUsXG4gIGF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmU6IGZhbHNlLFxuICBzZWFyY2hSZXN1bHRzTGltaXQ6IDUwLFxuICBlbmFibGVTbWFydFNlYXJjaDogdHJ1ZSxcbiAgYmF0Y2hPcGVyYXRpb25UaW1lb3V0OiAzMDAwMCxcbiAgc2hvd1ZhdWx0U3RhdHM6IHRydWUsXG4gIG1heFNlYXJjaFJlc3VsdHM6IDEwMCxcbiAgZGVmYXVsdFNlYXJjaFR5cGU6ICdjb250ZW50JyxcbiAgZW5hYmxlRmlsZU9wZXJhdGlvbnM6IHRydWUsXG4gIGNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnM6IHRydWUsXG4gIGF1dG9CYWNrdXBCZWZvcmVPcGVyYXRpb25zOiBmYWxzZVxufTtcblxuLyoqXG4gKiBBZGQgdmF1bHQgbWFuYWdlbWVudCBzZXR0aW5ncyB0byB0aGUgc2V0dGluZ3MgdGFiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogYW55KSB7XG4gIC8vIFZhdWx0IE1hbmFnZW1lbnQgU2VjdGlvbiBIZWFkZXJcbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHQgTWFuYWdlbWVudCcgfSk7XG4gIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICB0ZXh0OiAnQ29uZmlndXJlIEFJLXBvd2VyZWQgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIGFuZCBmaWxlIG9wZXJhdGlvbnMuJyBcbiAgfSk7XG5cbiAgLy8gRW5hYmxlIFZhdWx0IE1hbmFnZW1lbnRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBWYXVsdCBNYW5hZ2VtZW50JylcbiAgICAuc2V0RGVzYygnRW5hYmxlIEFJLXBvd2VyZWQgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIGFuZCBmaWxlIG9wZXJhdGlvbnMnKVxuICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZVZhdWx0TWFuYWdlbWVudCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICBwbHVnaW4uaW5pdGlhbGl6ZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBsdWdpbi5kaXNhYmxlVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcblxuICAvLyBBdXRvIFN5bmMgVmF1bHQgU3RydWN0dXJlXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdBdXRvIFN5bmMgVmF1bHQgU3RydWN0dXJlJylcbiAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSB1cGRhdGUgdmF1bHQgc3RydWN0dXJlIGFuYWx5c2lzIHdoZW4gZmlsZXMgY2hhbmdlJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5hdXRvU3luY1ZhdWx0U3RydWN0dXJlID8/IGZhbHNlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmUgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEVuYWJsZSBTbWFydCBTZWFyY2hcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0VuYWJsZSBTbWFydCBTZWFyY2gnKVxuICAgIC5zZXREZXNjKCdVc2UgQUktcG93ZXJlZCBzZWFyY2ggd2l0aCBjb250ZXh0IGFuZCBpbnNpZ2h0cycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlU21hcnRTZWFyY2ggPz8gdHJ1ZSlcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCA9IHsgLi4uREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH07XG4gICAgICAgIH1cbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudC5lbmFibGVTbWFydFNlYXJjaCA9IHZhbHVlO1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICB9KSk7XG5cbiAgLy8gU2VhcmNoIFJlc3VsdHMgTGltaXRcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ1NlYXJjaCBSZXN1bHRzIExpbWl0JylcbiAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gZGlzcGxheScpXG4gICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAuc2V0TGltaXRzKDEwLCAyMDAsIDEwKVxuICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LnNlYXJjaFJlc3VsdHNMaW1pdCA/PyA1MClcbiAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuc2VhcmNoUmVzdWx0c0xpbWl0ID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBEZWZhdWx0IFNlYXJjaCBUeXBlXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdEZWZhdWx0IFNlYXJjaCBUeXBlJylcbiAgICAuc2V0RGVzYygnRGVmYXVsdCBzZWFyY2ggbW9kZSBmb3Igc21hcnQgc2VhcmNoJylcbiAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4gZHJvcGRvd25cbiAgICAgIC5hZGRPcHRpb24oJ2NvbnRlbnQnLCAnQ29udGVudCBTZWFyY2gnKVxuICAgICAgLmFkZE9wdGlvbignZmlsZW5hbWUnLCAnRmlsZW5hbWUgU2VhcmNoJylcbiAgICAgIC5hZGRPcHRpb24oJ3RhZ3MnLCAnVGFnIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdsaW5rcycsICdMaW5rIFNlYXJjaCcpXG4gICAgICAuYWRkT3B0aW9uKCdjb21wcmVoZW5zaXZlJywgJ0NvbXByZWhlbnNpdmUgU2VhcmNoJylcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5kZWZhdWx0U2VhcmNoVHlwZSA/PyAnY29udGVudCcpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuZGVmYXVsdFNlYXJjaFR5cGUgPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBFbmFibGUgRmlsZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdFbmFibGUgRmlsZSBPcGVyYXRpb25zJylcbiAgICAuc2V0RGVzYygnQWxsb3cgZmlsZSBjcmVhdGlvbiwgZGVsZXRpb24sIGFuZCBtb2RpZmljYXRpb24gdGhyb3VnaCB0aGUgaW50ZXJmYWNlJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVGaWxlT3BlcmF0aW9ucyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmVuYWJsZUZpbGVPcGVyYXRpb25zID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBDb25maXJtIERlc3RydWN0aXZlIE9wZXJhdGlvbnNcbiAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgLnNldE5hbWUoJ0NvbmZpcm0gRGVzdHJ1Y3RpdmUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ1Nob3cgY29uZmlybWF0aW9uIGRpYWxvZyBmb3IgZmlsZSBkZWxldGlvbiBhbmQgZGVzdHJ1Y3RpdmUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9ucyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmNvbmZpcm1EZXN0cnVjdGl2ZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEF1dG8gQmFja3VwIEJlZm9yZSBPcGVyYXRpb25zXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdBdXRvIEJhY2t1cCBCZWZvcmUgT3BlcmF0aW9ucycpXG4gICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgY3JlYXRlIGJhY2t1cHMgYmVmb3JlIGRlc3RydWN0aXZlIGZpbGUgb3BlcmF0aW9ucycpXG4gICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMgPz8gZmFsc2UpXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQuYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIEJhdGNoIE9wZXJhdGlvbiBUaW1lb3V0XG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdCYXRjaCBPcGVyYXRpb24gVGltZW91dCcpXG4gICAgLnNldERlc2MoJ1RpbWVvdXQgZm9yIGJhdGNoIG9wZXJhdGlvbnMgaW4gbWlsbGlzZWNvbmRzJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgIC5zZXRQbGFjZWhvbGRlcignMzAwMDAnKVxuICAgICAgLnNldFZhbHVlKFN0cmluZyhwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPz8gMzAwMDApKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gcGFyc2VJbnQodmFsdWUpIHx8IDMwMDAwO1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LmJhdGNoT3BlcmF0aW9uVGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBTaG93IFZhdWx0IFN0YXRzXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdTaG93IFZhdWx0IFN0YXRpc3RpY3MnKVxuICAgIC5zZXREZXNjKCdEaXNwbGF5IHZhdWx0IHN0YXRpc3RpY3MgaW4gbW9kYWxzIGFuZCBpbnRlcmZhY2VzJylcbiAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5zaG93VmF1bHRTdGF0cyA/PyB0cnVlKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50LnNob3dWYXVsdFN0YXRzID0gdmFsdWU7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIH0pKTtcblxuICAvLyBUZXN0IENvbm5lY3Rpb24gQnV0dG9uXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdUZXN0IFZhdWx0IE1hbmFnZW1lbnQgQ29ubmVjdGlvbicpXG4gICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbiB0byB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50cycpXG4gICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJylcbiAgICAgIC5zZXRDdGEoKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi52YXVsdENsaWVudCkge1xuICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdOb3QgQXZhaWxhYmxlJyk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJyksIDIwMDApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0aW5nLi4uJyk7XG4gICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBsdWdpbi52YXVsdENsaWVudC50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KchSBDb25uZWN0ZWQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KdjCBGYWlsZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ+KdjCBFcnJvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJyksIDMwMDApO1xuICAgICAgfSkpO1xuXG4gIC8vIEFkdmFuY2VkIFNldHRpbmdzIFNlY3Rpb25cbiAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQgVmF1bHQgTWFuYWdlbWVudCcgfSk7XG5cbiAgLy8gTWF4IFNlYXJjaCBSZXN1bHRzXG4gIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgIC5zZXROYW1lKCdNYXhpbXVtIFNlYXJjaCBSZXN1bHRzJylcbiAgICAuc2V0RGVzYygnQWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgdG8gZmV0Y2ggZnJvbSBiYWNrZW5kJylcbiAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcbiAgICAgIC5zZXRMaW1pdHMoNTAsIDUwMCwgMjUpXG4gICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8ubWF4U2VhcmNoUmVzdWx0cyA/PyAxMDApXG4gICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50ID0geyAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MgfTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Lm1heFNlYXJjaFJlc3VsdHMgPSB2YWx1ZTtcbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgfSkpO1xuXG4gIC8vIFJlc2V0IHRvIERlZmF1bHRzIEJ1dHRvblxuICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAuc2V0TmFtZSgnUmVzZXQgVmF1bHQgTWFuYWdlbWVudCBTZXR0aW5ncycpXG4gICAgLnNldERlc2MoJ1Jlc2V0IGFsbCB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHQgdmFsdWVzJylcbiAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXNldCB0byBEZWZhdWx0cycpXG4gICAgICAuc2V0V2FybmluZygpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHBsdWdpbi5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQgPSB7IC4uLkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyB9O1xuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIHRoZSBzZXR0aW5ncyBkaXNwbGF5XG4gICAgICAgIGNvbnN0IHNldHRpbmdzVGFiID0gcGx1Z2luLmFwcC5zZXR0aW5nLmFjdGl2ZVRhYjtcbiAgICAgICAgaWYgKHNldHRpbmdzVGFiICYmIHNldHRpbmdzVGFiLmRpc3BsYXkpIHtcbiAgICAgICAgICBzZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB2YXVsdCBtYW5hZ2VtZW50IHNldHRpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVZhdWx0TWFuYWdlbWVudFNldHRpbmdzKHNldHRpbmdzOiBWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChzZXR0aW5ncy5zZWFyY2hSZXN1bHRzTGltaXQgPCAxIHx8IHNldHRpbmdzLnNlYXJjaFJlc3VsdHNMaW1pdCA+IDEwMDApIHtcbiAgICBlcnJvcnMucHVzaCgnU2VhcmNoIHJlc3VsdHMgbGltaXQgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwMDAnKTtcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5tYXhTZWFyY2hSZXN1bHRzIDwgc2V0dGluZ3Muc2VhcmNoUmVzdWx0c0xpbWl0KSB7XG4gICAgZXJyb3JzLnB1c2goJ01heGltdW0gc2VhcmNoIHJlc3VsdHMgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gc2VhcmNoIHJlc3VsdHMgbGltaXQnKTtcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5iYXRjaE9wZXJhdGlvblRpbWVvdXQgPCAxMDAwIHx8IHNldHRpbmdzLmJhdGNoT3BlcmF0aW9uVGltZW91dCA+IDMwMDAwMCkge1xuICAgIGVycm9ycy5wdXNoKCdCYXRjaCBvcGVyYXRpb24gdGltZW91dCBtdXN0IGJlIGJldHdlZW4gMSBzZWNvbmQgYW5kIDUgbWludXRlcycpO1xuICB9XG5cbiAgY29uc3QgdmFsaWRTZWFyY2hUeXBlcyA9IFsnY29udGVudCcsICdmaWxlbmFtZScsICd0YWdzJywgJ2xpbmtzJywgJ2NvbXByZWhlbnNpdmUnXTtcbiAgaWYgKCF2YWxpZFNlYXJjaFR5cGVzLmluY2x1ZGVzKHNldHRpbmdzLmRlZmF1bHRTZWFyY2hUeXBlKSkge1xuICAgIGVycm9ycy5wdXNoKCdJbnZhbGlkIGRlZmF1bHQgc2VhcmNoIHR5cGUnKTtcbiAgfVxuXG4gIHJldHVybiBlcnJvcnM7XG59XG5cbi8qKlxuICogR2V0IHZhdWx0IG1hbmFnZW1lbnQgc2V0dGluZ3Mgd2l0aCBkZWZhdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmF1bHRNYW5hZ2VtZW50U2V0dGluZ3MocGx1Z2luU2V0dGluZ3M6IGFueSk6IFZhdWx0TWFuYWdlbWVudFNldHRpbmdzIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5ERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MsXG4gICAgLi4uKHBsdWdpblNldHRpbmdzLnZhdWx0TWFuYWdlbWVudCB8fCB7fSlcbiAgfTtcbn1cbiIsImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzLCBNb2RlbFNlbGVjdGlvblNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncywgREVGQVVMVF9WQVVMVF9NQU5BR0VNRU5UX1NFVFRJTkdTIH0gZnJvbSAnLi92YXVsdC1zZXR0aW5ncyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWYXVsdFBpbG90U2V0dGluZ3MgPSB7XG4gIGJhY2tlbmRVcmw6ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnLFxuICBhcGlLZXk6ICcnLFxuICBlbmFibGVXZWJTb2NrZXQ6IHRydWUsXG4gIGVuYWJsZUNvcGlsb3Q6IHRydWUsXG4gIGVuYWJsZUF1dG9Db21wbGV0ZTogZmFsc2UsIC8vIERpc2FibGVkIGJ5IGRlZmF1bHQgdG8gcHJldmVudCBmcmVxdWVudCByZXF1ZXN0c1xuICBkZWZhdWx0QWdlbnQ6ICcnLFxuICBkZWZhdWx0TW9kZTogJ2FzaycsXG4gIGNoYXRIaXN0b3J5TGltaXQ6IDEwMCxcbiAgZGVidWdNb2RlOiBmYWxzZSxcbiAgc2hvd0ludGVudERlYnVnOiBmYWxzZSxcbiAgdmF1bHRNYW5hZ2VtZW50OiBERUZBVUxUX1ZBVUxUX01BTkFHRU1FTlRfU0VUVElOR1MsXG4gIG1vZGVsU2VsZWN0aW9uOiB7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBkZXZwaXBlUGF0aDogJy4uL2Rldi1waXBlJyxcbiAgICBtb25pdG9yaW5nSW50ZXJ2YWw6IDMwMDAwLFxuICAgIGZhbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICBjYWNoZUR1cmF0aW9uOiAzMDAwMDAsXG4gICAgcmV0cnlBdHRlbXB0czogMyxcbiAgICB0aW1lb3V0OiAzMDAwMCxcbiAgICBkZWJ1Z01vZGU6IGZhbHNlLFxuICAgIHVzZXJQcmVmZXJlbmNlczoge1xuICAgICAgcHJpb3JpdHk6ICdiYWxhbmNlZCcsXG4gICAgICBtYXhDb3N0UGVyUmVxdWVzdDogMC41MCxcbiAgICAgIHByZWZlcnJlZFByb3ZpZGVyczogW10sXG4gICAgICBxdWFsaXR5VGhyZXNob2xkOiAwLjdcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgIFxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0UGlsb3QgU2V0dGluZ3MnIH0pO1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdDb25maWd1cmUgeW91ciBjb25uZWN0aW9uIHRvIEV2b0FnZW50WCBiYWNrZW5kIGFuZCBBSSBmZWF0dXJlcy4nIFxuICAgIH0pO1xuXG4gICAgLy8gQ29ubmVjdGlvbiBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24nIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQmFja2VuZCBVUkwnKVxuICAgICAgLnNldERlc2MoJ1VSTCBvZiBFdm9BZ2VudFggYmFja2VuZCBzZXJ2ZXInKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0FQSSBLZXknKVxuICAgICAgLnNldERlc2MoJ09wdGlvbmFsIEFQSSBrZXkgZm9yIGF1dGhlbnRpY2F0aW9uIChpZiByZXF1aXJlZCBieSBiYWNrZW5kKScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIEFQSSBrZXkuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlLZXkgfHwgJycpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ29ubmVjdGlvbiBUZXN0JylcbiAgICAgIC5zZXREZXNjKCdUZXN0IGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQnKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT5cbiAgICAgICAgYnV0dG9uXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QgQ29ubmVjdGlvbicpXG4gICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gRmVhdHVyZSBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZlYXR1cmVzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBXZWJTb2NrZXQnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSByZWFsLXRpbWUgY29tbXVuaWNhdGlvbiBmb3IgbGl2ZSB1cGRhdGVzIGFuZCBwcm9ncmVzcyB0cmFja2luZycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb3BpbG90JylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgQUktcG93ZXJlZCB0ZXh0IGNvbXBsZXRpb24gYW5kIHN1Z2dlc3Rpb25zJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90KVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb3BpbG90ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBBdXRvLUNvbXBsZXRlJylcbiAgICAgIC5zZXREZXNjKCdBdXRvbWF0aWNhbGx5IHN1Z2dlc3QgY29tcGxldGlvbnMgYWZ0ZXIgc2VudGVuY2UgZW5kaW5ncyBhbmQgbmV3IGxpbmVzICh3aXRoIDEwcyBjb29sZG93biknKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFnZW50IFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWdlbnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWZhdWx0IEFnZW50JylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGFnZW50IHRvIHVzZSBmb3IgY2hhdCBhbmQgd29ya2Zsb3dzIChsZWF2ZSBlbXB0eSBmb3IgYXV0by1zZWxlY3Rpb24pJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQWdlbnQgSUQgb3IgbmFtZS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRBZ2VudCB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQ2hhdCBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IG1vZGUgZm9yIG5ldyBjaGF0IHNlc3Npb25zOiBBc2sgZm9yIHNpbXBsZSBRJkEsIEFnZW50IGZvciBjb21wbGV4IHdvcmtmbG93cycpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT5cbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdhc2snLCAnQXNrIE1vZGUgLSBTaW1wbGUgUSZBJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdhZ2VudCcsICdBZ2VudCBNb2RlIC0gQ29tcGxleCBXb3JrZmxvd3MnKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdE1vZGUgPSB2YWx1ZSBhcyAnYXNrJyB8ICdhZ2VudCc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBMaW1pdCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBtZXNzYWdlcyB0byBrZWVwIGluIGhpc3RvcnknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygxMCwgNTAwLCAxMClcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnlMaW1pdClcbiAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIEFkdmFuY2VkIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQWR2YW5jZWQnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgYW5kIGFkZGl0aW9uYWwgZGV2ZWxvcGVyIGZlYXR1cmVzJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdTaG93IEludGVudCBEZWJ1ZyBPdmVybGF5JylcbiAgICAgIC5zZXREZXNjKCdEaXNwbGF5IGF1dG9tYXRpYyBpbnRlbnQgZGV0ZWN0aW9uIGluIGNoYXQgKEFzayB2cyBBZ2VudCBtb2RlKScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gVmF1bHQgTWFuYWdlbWVudCBTZXR0aW5nc1xuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IE1hbmFnZW1lbnQnIH0pO1xuICAgIGFkZFZhdWx0TWFuYWdlbWVudFNldHRpbmdzKGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbik7XG5cbiAgICAvLyBNb2RlbCBTZWxlY3Rpb24gU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdNb2RlbCBTZWxlY3Rpb24nIH0pO1xuICAgIFxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBNb2RlbCBTZWxlY3Rpb24nKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBpbnRlbGxpZ2VudCBBSSBtb2RlbCBzZWxlY3Rpb24gYmFzZWQgb24gdGFzayB0eXBlIGFuZCByZXF1aXJlbWVudHMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5lbmFibGVkID8/IHRydWUpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24gPSBERUZBVUxUX1NFVFRJTkdTLm1vZGVsU2VsZWN0aW9uITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmVuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBtb2RlbCBzZWxlY3Rpb24gc2VydmljZSBpZiBlbmFibGVkXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmluaXRpYWxpemVNb2RlbFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gRGlzY29ubmVjdCBtb2RlbCBzZWxlY3Rpb24gc2VydmljZSBpZiBkaXNhYmxlZFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kaXNjb25uZWN0TW9kZWxTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RldlBpcGUgUGF0aCcpXG4gICAgICAuc2V0RGVzYygnUGF0aCB0byB0aGUgRGV2UGlwZSBjb21tdW5pY2F0aW9uIGRpcmVjdG9yeScpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJy4uL2Rldi1waXBlJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmRldnBpcGVQYXRoID8/ICcuLi9kZXYtcGlwZScpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24gPSBERUZBVUxUX1NFVFRJTkdTLm1vZGVsU2VsZWN0aW9uITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmRldnBpcGVQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1ByaW9yaXR5IE1vZGUnKVxuICAgICAgLnNldERlc2MoJ0hvdyB0byBwcmlvcml0aXplIG1vZGVsIHNlbGVjdGlvbjogcGVyZm9ybWFuY2UsIGNvc3QsIG9yIGJhbGFuY2VkJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PlxuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5hZGRPcHRpb24oJ3BlcmZvcm1hbmNlJywgJ1BlcmZvcm1hbmNlIC0gQmVzdCBxdWFsaXR5IG1vZGVscycpXG4gICAgICAgICAgLmFkZE9wdGlvbignY29zdCcsICdDb3N0IC0gTW9zdCBlY29ub21pY2FsIG1vZGVscycpXG4gICAgICAgICAgLmFkZE9wdGlvbignYmFsYW5jZWQnLCAnQmFsYW5jZWQgLSBPcHRpbWFsIHF1YWxpdHkvY29zdCByYXRpbycpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy51c2VyUHJlZmVyZW5jZXMucHJpb3JpdHkgPz8gJ2JhbGFuY2VkJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbiA9IERFRkFVTFRfU0VUVElOR1MubW9kZWxTZWxlY3Rpb24hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udXNlclByZWZlcmVuY2VzLnByaW9yaXR5ID0gdmFsdWUgYXMgJ3BlcmZvcm1hbmNlJyB8ICdjb3N0JyB8ICdiYWxhbmNlZCc7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ01heCBDb3N0IFBlciBSZXF1ZXN0JylcbiAgICAgIC5zZXREZXNjKCdNYXhpbXVtIGNvc3QgcGVyIEFJIHJlcXVlc3QgKGluIFVTRCknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT5cbiAgICAgICAgc2xpZGVyXG4gICAgICAgICAgLnNldExpbWl0cygwLjAxLCAyLjAwLCAwLjAxKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8udXNlclByZWZlcmVuY2VzLm1heENvc3RQZXJSZXF1ZXN0ID8/IDAuNTApXG4gICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbikge1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbiA9IERFRkFVTFRfU0VUVElOR1MubW9kZWxTZWxlY3Rpb24hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udXNlclByZWZlcmVuY2VzLm1heENvc3RQZXJSZXF1ZXN0ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ01vZGVsIFNlbGVjdGlvbiBEZWJ1ZycpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIGxvZ2dpbmcgZm9yIG1vZGVsIHNlbGVjdGlvbiBkZWNpc2lvbnMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5kZWJ1Z01vZGUgPz8gZmFsc2UpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24gPSBERUZBVUxUX1NFVFRJTkdTLm1vZGVsU2VsZWN0aW9uITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmRlYnVnTW9kZSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBIZWxwIHNlY3Rpb25cbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdIZWxwICYgRG9jdW1lbnRhdGlvbicgfSk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRGFzaGJvYXJkIGFjdGlvbiAobmV3KVxuICAgIGNvbnN0IGRhc2hib2FyZEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiiBPcGVuIERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgZGFzaGJvYXJkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG5cbiAgICAvLyBXb3JrZmxvdyBhY3Rpb25cbiAgICBjb25zdCB3b3JrZmxvd0J1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pqZ77iPIEV4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuXG4gICAgLy8gQW5hbHl6ZSB2YXVsdCBhY3Rpb25cbiAgICBjb25zdCBhbmFseXplQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SNIEFuYWx5emUgVmF1bHQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGFuYWx5emVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuXG4gICAgLy8gQ29waWxvdCBhY3Rpb25cbiAgICBjb25zdCBjb3BpbG90QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfinKggR2V0IENvbXBsZXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvcGlsb3RCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGVkaXRvciBmb3VuZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZWZyZXNoIGJ1dHRvblxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoIFN0YXR1cycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFnZW50IGluZm8gaWYgYXZhaWxhYmxlXG4gICAgdGhpcy5sb2FkQWdlbnRJbmZvKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudEluZm8oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cyBpbiB2aWV3Li4uJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBnZXRBZ2VudHMgcmVzcG9uc2UgaW4gdmlldzonLCByZXNwb25zZSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgbGV0IGFnZW50czogYW55W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkge1xuICAgICAgICAgIC8vIERpcmVjdCBhcnJheSByZXNwb25zZVxuICAgICAgICAgIGFnZW50cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAvLyBDaGVjayBmb3Igd3JhcHBlZCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgICAgY29uc3QgZGF0YU9iaiA9IHJlc3BvbnNlLmRhdGEgYXMgYW55O1xuICAgICAgICAgIGlmIChkYXRhT2JqLmFnZW50cyAmJiBBcnJheS5pc0FycmF5KGRhdGFPYmouYWdlbnRzKSkge1xuICAgICAgICAgICAgLy8gUmVzcG9uc2UgZm9ybWF0OiB7YWdlbnRzOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouYWdlbnRzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kIGFnZW50cyBhcnJheSBpbiB2aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmFnZW50cycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YU9iai5kYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5kYXRhKSkge1xuICAgICAgICAgICAgLy8gUmVzcG9uc2UgZm9ybWF0OiB7ZGF0YTogWy4uLl19XG4gICAgICAgICAgICBhZ2VudHMgPSBkYXRhT2JqLmRhdGE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgbmVzdGVkIGRhdGEgaW4gdmlldywgdXNpbmcgcmVzcG9uc2UuZGF0YS5kYXRhJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVmF1bHRQaWxvdDogVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQ6JywgdHlwZW9mIHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGlzcGxheSBhZ2VudCBpbmZvcm1hdGlvblxuICAgICAgICBjb25zdCBhZ2VudENvdW50ID0gYWdlbnRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYWN0aXZlQWdlbnRzID0gYWdlbnRzLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudFN0YXRzRWwgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXRzJyB9KTtcbiAgICAgICAgYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2YWlsYWJsZSBBZ2VudHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWdlbnRJbmZvID0gYWdlbnRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtaW5mbycgfSk7XG4gICAgICAgIGFnZW50SW5mby5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50cyBpbiB2aWV3OicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LXZpZXctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXZpZXctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXZpZXcge1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN1YnRpdGxlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aXZpdGllcyBoMyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1lcnJvcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbnMtZ3JpZCB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTJweCA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMywgMWZyKTtcbiAgICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1pdGVtIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LXZhbHVlIHtcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1sYWJlbCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1zdGF0cyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMgaDQge1xuICAgICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1pbmZvIHtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIgPSAndmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RGdWxsVGFiVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIHN0YXR1c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcXVpY2tBY3Rpb25zRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB2YXVsdFN0YXRzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBjaGF0RWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSB3b3JrZmxvd0VsITogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQjtcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdWYXVsdFBpbG90IERhc2hib2FyZCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtZGFzaGJvYXJkJztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygndmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3Jyk7XG5cbiAgICAvLyBGb3JjZSB0aGUgY29udGFpbmVyIHRvIHRha2UgZnVsbCBoZWlnaHRcbiAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gICAgLy8gQ3JlYXRlIG1haW4gbGF5b3V0XG4gICAgY29uc3QgbWFpbkxheW91dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tbGF5b3V0JyB9KTtcblxuICAgIC8vIExlZnQgc2lkZWJhclxuICAgIGNvbnN0IGxlZnRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWxlZnQtc2lkZWJhcicgfSk7XG4gICAgdGhpcy5jcmVhdGVMZWZ0U2lkZWJhcihsZWZ0U2lkZWJhcik7XG5cbiAgICAvLyBNYWluIGNvbnRlbnQgYXJlYVxuICAgIGNvbnN0IG1haW5Db250ZW50ID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tY29udGVudCcgfSk7XG4gICAgdGhpcy5jcmVhdGVNYWluQ29udGVudChtYWluQ29udGVudCk7XG5cbiAgICAvLyBSaWdodCBzaWRlYmFyXG4gICAgY29uc3QgcmlnaHRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJpZ2h0LXNpZGViYXInIH0pO1xuICAgIHRoaXMuY3JlYXRlUmlnaHRTaWRlYmFyKHJpZ2h0U2lkZWJhcik7XG5cbiAgICB0aGlzLmFkZEZ1bGxUYWJTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTGVmdFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zaWRlYmFyLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90JyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQUkgQXNzaXN0YW50IERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN1YnRpdGxlJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhdHVzIHNlY3Rpb25cbiAgICB0aGlzLnN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMnIH0pO1xuICAgIHRoaXMuY3JlYXRlUXVpY2tBY3Rpb25zKCk7XG5cbiAgICAvLyBWYXVsdCBzdGF0c1xuICAgIHRoaXMudmF1bHRTdGF0c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXZhdWx0LXN0YXRzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWFpbkNvbnRlbnQoY29udGVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBUYWIgbmF2aWdhdGlvblxuICAgIGNvbnN0IHRhYk5hdiA9IGNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC10YWItbmF2JyB9KTtcbiAgICBjb25zdCBjaGF0VGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/CfkqwgQ2hhdCcsIFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC10YWItYnV0dG9uIGFjdGl2ZSdcbiAgICB9KTtcbiAgICBjb25zdCB3b3JrZmxvd1RhYiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG4gICAgY29uc3QgYW5hbHl0aWNzVGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/Cfk4ogQW5hbHl0aWNzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBUYWIgY29udGVudFxuICAgIGNvbnN0IHRhYkNvbnRlbnQgPSBjb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdGFiLWNvbnRlbnQnIH0pO1xuXG4gICAgLy8gQ2hhdCBzZWN0aW9uXG4gICAgdGhpcy5jaGF0RWwgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uIGFjdGl2ZScgfSk7XG4gICAgdGhpcy5jcmVhdGVDaGF0U2VjdGlvbih0aGlzLmNoYXRFbCk7XG5cbiAgICAvLyBXb3JrZmxvdyBzZWN0aW9uXG4gICAgdGhpcy53b3JrZmxvd0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24nIH0pO1xuICAgIHRoaXMuY3JlYXRlV29ya2Zsb3dTZWN0aW9uKHRoaXMud29ya2Zsb3dFbCk7XG5cbiAgICAvLyBBbmFseXRpY3Mgc2VjdGlvblxuICAgIGNvbnN0IGFuYWx5dGljc0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWwpO1xuXG4gICAgLy8gVGFiIHN3aXRjaGluZ1xuICAgIGNoYXRUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdjaGF0JywgY2hhdFRhYik7XG4gICAgd29ya2Zsb3dUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCd3b3JrZmxvdycsIHdvcmtmbG93VGFiKTtcbiAgICBhbmFseXRpY3NUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdhbmFseXRpY3MnLCBhbmFseXRpY3NUYWIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSaWdodFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZWNlbnQgZmlsZXNcbiAgICBjb25zdCByZWNlbnRGaWxlc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycgfSk7XG4gICAgcmVjZW50RmlsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgIHRoaXMudXBkYXRlUmVjZW50RmlsZXMocmVjZW50RmlsZXNFbCk7XG5cbiAgICAvLyBBZ2VudCBzdGF0dXNcbiAgICBjb25zdCBhZ2VudFN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cycgfSk7XG4gICAgYWdlbnRTdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBTdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlQWdlbnRTdGF0dXMoYWdlbnRTdGF0dXNFbCk7XG5cbiAgICAvLyBBY3Rpdml0eSBmZWVkXG4gICAgY29uc3QgYWN0aXZpdHlFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS1mZWVkJyB9KTtcbiAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FjdGl2aXR5IEZlZWQnIH0pO1xuICAgIHRoaXMuY3JlYXRlQWN0aXZpdHlGZWVkKGFjdGl2aXR5RWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDaGF0U2VjdGlvbihjaGF0RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQ2hhdCBjb250ZW50IGNvbnRhaW5lciB3aXRoIHBhZGRpbmcgYW5kIHNjcm9sbGluZ1xuICAgIGNvbnN0IGNoYXRDb250ZW50ID0gY2hhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1jb250ZW50JyB9KTtcblxuICAgIC8vIENoYXQgaGVhZGVyIChub3cgaW5zaWRlIGNvbnRlbnQpXG4gICAgY29uc3QgY2hhdEhlYWRlciA9IGNoYXRDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGNoYXRIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQUkgQ2hhdCBJbnRlcmZhY2UnIH0pO1xuXG4gICAgLy8gQ2hhdCBoaXN0b3J5XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBjaGF0Q29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaGlzdG9yeScgfSk7XG4gICAgY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICB0ZXh0OiAnV2VsY29tZSEgU3RhcnQgYSBjb252ZXJzYXRpb24gd2l0aCB5b3VyIEFJIGFzc2lzdGFudC4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXdlbGNvbWUnXG4gICAgfSk7XG5cbiAgICAvLyBDaGF0IGlucHV0XG4gICAgY29uc3QgY2hhdElucHV0ID0gY2hhdENvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0JyB9KTtcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGNoYXRJbnB1dC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7IFxuICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgbWVzc2FnZSBoZXJlLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC10ZXh0YXJlYSdcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBzZW5kQnV0dG9uID0gY2hhdElucHV0LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ1NlbmQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXNlbmQtYnV0dG9uJ1xuICAgIH0pO1xuXG4gICAgc2VuZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHRleHRhcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMuc2VuZENoYXRNZXNzYWdlKG1lc3NhZ2UsIGNoYXRIaXN0b3J5KTtcbiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIEVudGVyIGtleVxuICAgIHRleHRhcmVhLm9ua2V5ZG93biA9IChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZW5kQnV0dG9uLmNsaWNrKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlV29ya2Zsb3dTZWN0aW9uKHdvcmtmbG93RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gV29ya2Zsb3cgY29udGVudCBjb250YWluZXIgd2l0aCBwYWRkaW5nIGFuZCBzY3JvbGxpbmdcbiAgICBjb25zdCB3b3JrZmxvd0NvbnRlbnQgPSB3b3JrZmxvd0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctY29udGVudCcgfSk7XG4gICAgXG4gICAgLy8gV29ya2Zsb3cgaGVhZGVyIChub3cgaW5zaWRlIGNvbnRlbnQpXG4gICAgY29uc3Qgd29ya2Zsb3dIZWFkZXIgPSB3b3JrZmxvd0NvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIHdvcmtmbG93SGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1dvcmtmbG93IE1hbmFnZW1lbnQnIH0pO1xuXG4gICAgY29uc3Qgd29ya2Zsb3dHcmlkID0gd29ya2Zsb3dDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZ3JpZCcgfSk7XG5cbiAgICAvLyBQcmVkZWZpbmVkIHdvcmtmbG93c1xuICAgIGNvbnN0IHdvcmtmbG93cyA9IFtcbiAgICAgIHsgbmFtZTogJ0FuYWx5emUgVmF1bHQnLCBpY29uOiAn8J+UjScsIGRlc2NyaXB0aW9uOiAnQW5hbHl6ZSB5b3VyIHZhdWx0IHN0cnVjdHVyZSBhbmQgY29udGVudCcgfSxcbiAgICAgIHsgbmFtZTogJ0dlbmVyYXRlIFN1bW1hcnknLCBpY29uOiAn8J+TnScsIGRlc2NyaXB0aW9uOiAnQ3JlYXRlIHN1bW1hcmllcyBvZiB5b3VyIG5vdGVzJyB9LFxuICAgICAgeyBuYW1lOiAnTGluayBBbmFseXNpcycsIGljb246ICfwn5SXJywgZGVzY3JpcHRpb246ICdBbmFseXplIG5vdGUgY29ubmVjdGlvbnMgYW5kIHJlbGF0aW9uc2hpcHMnIH0sXG4gICAgICB7IG5hbWU6ICdUYWcgTWFuYWdlbWVudCcsIGljb246ICfwn4+377iPJywgZGVzY3JpcHRpb246ICdPcmdhbml6ZSBhbmQgbWFuYWdlIHlvdXIgdGFncycgfSxcbiAgICAgIHsgbmFtZTogJ0RhaWx5IFBsYW5uaW5nJywgaWNvbjogJ/Cfk4UnLCBkZXNjcmlwdGlvbjogJ1BsYW4geW91ciBkYXkgYmFzZWQgb24geW91ciBub3RlcycgfSxcbiAgICAgIHsgbmFtZTogJ0tub3dsZWRnZSBHcmFwaCcsIGljb246ICfwn5W477iPJywgZGVzY3JpcHRpb246ICdWaXN1YWxpemUgeW91ciBrbm93bGVkZ2UgY29ubmVjdGlvbnMnIH0sXG4gICAgICB7IG5hbWU6ICdDb250ZW50IFNlYXJjaCcsIGljb246ICfwn5SOJywgZGVzY3JpcHRpb246ICdBZHZhbmNlZCBzZWFyY2ggYWNyb3NzIHlvdXIgdmF1bHQnIH0sXG4gICAgICB7IG5hbWU6ICdOb3RlIFRlbXBsYXRlcycsIGljb246ICfwn5OEJywgZGVzY3JpcHRpb246ICdDcmVhdGUgYW5kIG1hbmFnZSBub3RlIHRlbXBsYXRlcycgfSxcbiAgICAgIHsgbmFtZTogJ0xpbmsgQXNzaXN0YW50JywgaWNvbjogJ/CflJcnLCBkZXNjcmlwdGlvbjogJ0ludGVsbGlnZW50IGxpbmsgc3VnZ2VzdGlvbnMgYW5kIG1hbmFnZW1lbnQnIH1cbiAgICBdO1xuXG4gICAgd29ya2Zsb3dzLmZvckVhY2god29ya2Zsb3cgPT4ge1xuICAgICAgY29uc3Qgd29ya2Zsb3dDYXJkID0gd29ya2Zsb3dHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctY2FyZCcgfSk7XG4gICAgICB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogd29ya2Zsb3cuaWNvbiwgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1pY29uJyB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6IHdvcmtmbG93Lm5hbWUgfSk7XG4gICAgICB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHdvcmtmbG93LmRlc2NyaXB0aW9uIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBydW5CdXR0b24gPSB3b3JrZmxvd0NhcmQuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgIHRleHQ6ICdSdW4nLFxuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LXJ1bi1idXR0b24nXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcnVuQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnJ1bldvcmtmbG93KHdvcmtmbG93Lm5hbWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBbmFseXRpY3NTZWN0aW9uKGFuYWx5dGljc0VsOiBIVE1MRWxlbWVudCkge1xuICAgIC8vIEFuYWx5dGljcyBjb250ZW50IGNvbnRhaW5lciB3aXRoIHBhZGRpbmcgYW5kIHNjcm9sbGluZ1xuICAgIGNvbnN0IGFuYWx5dGljc0NvbnRlbnQgPSBhbmFseXRpY3NFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1jb250ZW50JyB9KTtcbiAgICBcbiAgICAvLyBBbmFseXRpY3MgaGVhZGVyIChub3cgaW5zaWRlIGNvbnRlbnQpXG4gICAgY29uc3QgYW5hbHl0aWNzSGVhZGVyID0gYW5hbHl0aWNzQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1oZWFkZXInIH0pO1xuICAgIGFuYWx5dGljc0hlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdWYXVsdCBBbmFseXRpY3MnIH0pO1xuXG4gICAgY29uc3QgY2hhcnRzQ29udGFpbmVyID0gYW5hbHl0aWNzQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0cy1jb250YWluZXInIH0pO1xuICAgIFxuICAgIC8vIEZpbGUgdHlwZSBkaXN0cmlidXRpb25cbiAgICBjb25zdCBmaWxlVHlwZUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgZmlsZVR5cGVDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxlIFR5cGUgRGlzdHJpYnV0aW9uJyB9KTtcbiAgICBmaWxlVHlwZUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ0NoYXJ0IHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIE5vdGUgY3JlYXRpb24gdGltZWxpbmVcbiAgICBjb25zdCB0aW1lbGluZUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgdGltZWxpbmVDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdOb3RlIENyZWF0aW9uIFRpbWVsaW5lJyB9KTtcbiAgICB0aW1lbGluZUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1RpbWVsaW5lIHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIFRhZyB1c2FnZVxuICAgIGNvbnN0IHRhZ0NoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgdGFnQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnVGFnIFVzYWdlJyB9KTtcbiAgICB0YWdDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdUYWcgYW5hbHl0aWNzIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBXb3JkIGNvdW50IGFuYWx5c2lzXG4gICAgY29uc3Qgd29yZENvdW50Q2hhcnQgPSBjaGFydHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1jYXJkJyB9KTtcbiAgICB3b3JkQ291bnRDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdXb3JkIENvdW50IEFuYWx5c2lzJyB9KTtcbiAgICB3b3JkQ291bnRDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdXb3JkIGNvdW50IHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIExpbmsgZGVuc2l0eVxuICAgIGNvbnN0IGxpbmtDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIGxpbmtDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdMaW5rIERlbnNpdHknIH0pO1xuICAgIGxpbmtDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdMaW5rIGFuYWx5c2lzIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBBY3Rpdml0eSBoZWF0bWFwXG4gICAgY29uc3QgYWN0aXZpdHlDaGFydCA9IGNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0LWNhcmQnIH0pO1xuICAgIGFjdGl2aXR5Q2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQWN0aXZpdHkgSGVhdG1hcCcgfSk7XG4gICAgYWN0aXZpdHlDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdBY3Rpdml0eSBoZWF0bWFwIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN3aXRjaFRhYih0YWJOYW1lOiBzdHJpbmcsIGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIHRhYnNcbiAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52YXVsdHBpbG90LXRhYi1idXR0b24nKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLCAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLCAudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbicpLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICBzZWN0aW9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gY2xpY2tlZCB0YWJcbiAgICBidXR0b24uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgLy8gU2hvdyBjb3JyZXNwb25kaW5nIGNvbnRlbnRcbiAgICBpZiAodGFiTmFtZSA9PT0gJ2NoYXQnKSB7XG4gICAgICB0aGlzLmNoYXRFbC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfSBlbHNlIGlmICh0YWJOYW1lID09PSAnd29ya2Zsb3cnKSB7XG4gICAgICB0aGlzLndvcmtmbG93RWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ2FuYWx5dGljcycpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24nKT8uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZENoYXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZywgY2hhdEhpc3Rvcnk6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgdXNlcicgfSk7XG4gICAgdXNlck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbWVzc2FnZSB9KTtcblxuICAgIC8vIEFkZCB0aGlua2luZyBpbmRpY2F0b3JcbiAgICBjb25zdCB0aGlua2luZ01lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBhc3Npc3RhbnQgdGhpbmtpbmcnIH0pO1xuICAgIHRoaW5raW5nTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnVGhpbmtpbmcuLi4nIH0pO1xuXG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbVxuICAgIGNoYXRIaXN0b3J5LnNjcm9sbFRvcCA9IGNoYXRIaXN0b3J5LnNjcm9sbEhlaWdodDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZW5kQ2hhdCh7IG1lc3NhZ2UsIGNvbnRleHQ6IG51bGwgfSk7XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSB0aGlua2luZyBpbmRpY2F0b3JcbiAgICAgIHRoaW5raW5nTWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgYXNzaXN0YW50JyB9KTtcbiAgICAgICAgYXNzaXN0YW50TWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgZXJyb3InIH0pO1xuICAgICAgICBlcnJvck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yOiBDb3VsZCBub3QgZ2V0IHJlc3BvbnNlIGZyb20gQUknIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBSZW1vdmUgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgICB0aGlua2luZ01lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGVycm9yJyB9KTtcbiAgICAgIGVycm9yTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnRXJyb3I6IENvbm5lY3Rpb24gZmFpbGVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBTY3JvbGwgdG8gYm90dG9tXG4gICAgY2hhdEhpc3Rvcnkuc2Nyb2xsVG9wID0gY2hhdEhpc3Rvcnkuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5Xb3JrZmxvdyh3b3JrZmxvd05hbWU6IHN0cmluZykge1xuICAgIG5ldyBOb3RpY2UoYFJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfWApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBNYXAgd29ya2Zsb3cgbmFtZXMgdG8gYXBwcm9wcmlhdGUgYWN0aW9uc1xuICAgICAgc3dpdGNoICh3b3JrZmxvd05hbWUpIHtcbiAgICAgICAgY2FzZSAnQW5hbHl6ZSBWYXVsdCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5ydW5BbmFseXplVmF1bHRXb3JrZmxvdygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdEYWlseSBQbGFubmluZyc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ucGxhbk15RGF5KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0dlbmVyYXRlIFN1bW1hcnknOlxuICAgICAgICAgIGF3YWl0IHRoaXMucnVuU3VtbWFyeVdvcmtmbG93KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0xpbmsgQW5hbHlzaXMnOlxuICAgICAgICAgIGF3YWl0IHRoaXMucnVuTGlua0FuYWx5c2lzV29ya2Zsb3coKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQ29udGVudCBTZWFyY2gnOlxuICAgICAgICAgIGF3YWl0IHRoaXMucnVuQ29udGVudFNlYXJjaFdvcmtmbG93KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gRm9yIHdvcmtmbG93cyB0aGF0IG5lZWQgc2VydmVyLXNpZGUgdGVtcGxhdGVzXG4gICAgICAgICAgYXdhaXQgdGhpcy5ydW5HZW5lcmljV29ya2Zsb3cod29ya2Zsb3dOYW1lKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBydW5uaW5nIHdvcmtmbG93OiAke3dvcmtmbG93TmFtZX06YCwgZXJyb3IpO1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdOb3QgRm91bmQnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykpIHtcbiAgICAgICAgbmV3IE5vdGljZShgJHt3b3JrZmxvd05hbWV9IHdvcmtmbG93IHJlcXVpcmVzIHNlcnZlci1zaWRlIGltcGxlbWVudGF0aW9uLiBQbGVhc2UgY2hlY2sgc2VydmVyIGNvbmZpZ3VyYXRpb24uYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBFcnJvciBydW5uaW5nIHdvcmtmbG93OiAke3dvcmtmbG93TmFtZX0gLSAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5BbmFseXplVmF1bHRXb3JrZmxvdygpIHtcbiAgICBpZiAodGhpcy5wbHVnaW4udmF1bHRDbGllbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0cnVjdHVyZSA9IGF3YWl0IHRoaXMucGx1Z2luLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHtcbiAgICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlLFxuICAgICAgICAgIG1heF9kZXB0aDogM1xuICAgICAgICB9KTtcbiAgICAgICAgbmV3IE5vdGljZShgVmF1bHQgYW5hbHlzaXMgY29tcGxldGUhIEZvdW5kICR7c3RydWN0dXJlLnRvdGFsX2ZpbGVzfSBmaWxlcyBpbiAke3N0cnVjdHVyZS50b3RhbF9mb2xkZXJzfSBmb2xkZXJzLmApO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ05vdCBGb3VuZCcpKSB7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gbG9jYWwgYW5hbHlzaXNcbiAgICAgICAgICBhd2FpdCB0aGlzLnJ1bkxvY2FsVmF1bHRBbmFseXNpcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMucnVuTG9jYWxWYXVsdEFuYWx5c2lzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5Mb2NhbFZhdWx0QW5hbHlzaXMoKSB7XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgZm9sZGVycyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkuZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpLmxlbmd0aDtcbiAgICBcbiAgICBuZXcgTm90aWNlKGBMb2NhbCB2YXVsdCBhbmFseXNpczogJHttYXJrZG93bkZpbGVzLmxlbmd0aH0gbWFya2Rvd24gZmlsZXMsICR7ZmlsZXMubGVuZ3RofSB0b3RhbCBmaWxlcywgJHtmb2xkZXJzfSBmb2xkZXJzLmApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5TdW1tYXJ5V29ya2Zsb3coKSB7XG4gICAgLy8gVHJ5IHRvIHVzZSBleGlzdGluZyB3b3JrZmxvdyBlbmRwb2ludFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugb3BlbiBhIGZpbGUgdG8gc3VtbWFyaXplJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5ydW5Xb3JrZmxvdyh7XG4gICAgICAgIG1lc3NhZ2U6ICdQbGVhc2UgY3JlYXRlIGEgY29tcHJlaGVuc2l2ZSBzdW1tYXJ5IG9mIHRoaXMgY29udGVudCcsXG4gICAgICAgIGNvbnRleHQ6IGNvbnRlbnRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1N1bW1hcnkgZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnU3VtbWFyeSBnZW5lcmF0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU3VtbWFyeSB3b3JrZmxvdyBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bkxpbmtBbmFseXNpc1dvcmtmbG93KCkge1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IHRvdGFsTGlua3MgPSAwO1xuICAgIGxldCBsaW5rZWRGaWxlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBtYXJrZG93bkZpbGVzKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgIGNvbnN0IGxpbmtNYXRjaGVzID0gY29udGVudC5tYXRjaCgvXFxbXFxbKFteXFxdXSspXFxdXFxdL2cpO1xuICAgICAgaWYgKGxpbmtNYXRjaGVzKSB7XG4gICAgICAgIHRvdGFsTGlua3MgKz0gbGlua01hdGNoZXMubGVuZ3RoO1xuICAgICAgICBsaW5rTWF0Y2hlcy5mb3JFYWNoKG1hdGNoID0+IHtcbiAgICAgICAgICBjb25zdCBsaW5rVGFyZ2V0ID0gbWF0Y2guc2xpY2UoMiwgLTIpO1xuICAgICAgICAgIGxpbmtlZEZpbGVzLmFkZChsaW5rVGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG9ycGhhbmVkRmlsZXMgPSBtYXJrZG93bkZpbGVzLmxlbmd0aCAtIGxpbmtlZEZpbGVzLnNpemU7XG4gICAgbmV3IE5vdGljZShgTGluayBhbmFseXNpczogJHt0b3RhbExpbmtzfSB0b3RhbCBsaW5rcywgJHtsaW5rZWRGaWxlcy5zaXplfSBsaW5rZWQgZmlsZXMsICR7b3JwaGFuZWRGaWxlc30gb3JwaGFuZWQgZmlsZXMuYCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJ1bkNvbnRlbnRTZWFyY2hXb3JrZmxvdygpIHtcbiAgICAvLyBPcGVuIHRoZSBzbWFydCBzZWFyY2ggbW9kYWwgaWYgdmF1bHQgbWFuYWdlbWVudCBpcyBhdmFpbGFibGVcbiAgICBpZiAodGhpcy5wbHVnaW4udmF1bHRDbGllbnQgJiYgdGhpcy5wbHVnaW4ub3BlblNtYXJ0U2VhcmNoTW9kYWwpIHtcbiAgICAgIHRoaXMucGx1Z2luLm9wZW5TbWFydFNlYXJjaE1vZGFsKCcnLCAnY29tcHJlaGVuc2l2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgTm90aWNlKCdDb250ZW50IHNlYXJjaCByZXF1aXJlcyB2YXVsdCBtYW5hZ2VtZW50IGZlYXR1cmVzLiBQbGVhc2UgZW5hYmxlIGluIHNldHRpbmdzLicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcnVuR2VuZXJpY1dvcmtmbG93KHdvcmtmbG93TmFtZTogc3RyaW5nKSB7XG4gICAgLy8gRm9yIHdvcmtmbG93cyB0aGF0IG1pZ2h0IG5lZWQgc2VydmVyLXNpZGUgdGVtcGxhdGVzXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJ1bldvcmtmbG93KHtcbiAgICAgICAgbWVzc2FnZTogYEV4ZWN1dGUgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfWAsXG4gICAgICAgIGNvbnRleHQ6IG51bGxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYCR7d29ya2Zsb3dOYW1lfSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdXb3JrZmxvdyBleGVjdXRpb24gZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdOb3QgRm91bmQnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykpIHtcbiAgICAgICAgbmV3IE5vdGljZShgJHt3b3JrZmxvd05hbWV9IHdvcmtmbG93IGlzIG5vdCB5ZXQgaW1wbGVtZW50ZWQgb24gdGhlIHNlcnZlci4gQ29taW5nIHNvb24hYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/Cfn6IgQ29ubmVjdGVkJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtY29ubmVjdGVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IEVycm9yJztcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtZXJyb3InO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+UtCBPZmZsaW5lJztcbiAgICAgIGluZGljYXRvci5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yIHZhdWx0cGlsb3Qtc3RhdHVzLW9mZmxpbmUnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUXVpY2tBY3Rpb25zKCkge1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuZW1wdHkoKTtcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1aWNrIEFjdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgYWN0aW9uc0dyaWQgPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkJyB9KTtcblxuICAgIC8vIFJlZnJlc2ggYnV0dG9uXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG4gICAgfTtcblxuICAgIC8vIE9wZW4gc2lkZWJhciB2aWV3XG4gICAgY29uc3Qgc2lkZWJhckJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiyBTaWRlYmFyIFZpZXcnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHNpZGViYXJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldygpO1xuXG4gICAgLy8gT3BlbiBtb2RhbCBjaGF0XG4gICAgY29uc3QgbW9kYWxDaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE1vZGFsIENoYXQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIG1vZGFsQ2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRXhlY3V0ZSB3b3JrZmxvd1xuICAgIGNvbnN0IHdvcmtmbG93QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbidcbiAgICB9KTtcbiAgICB3b3JrZmxvd0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbldvcmtmbG93TW9kYWwoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmF1bHRTdGF0cygpIHtcbiAgICB0aGlzLnZhdWx0U3RhdHNFbC5lbXB0eSgpO1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3Qgc3RhdHNDb250YWluZXIgPSB0aGlzLnZhdWx0U3RhdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBHZXQgdmF1bHQgc3RhdGlzdGljc1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICBjb25zdCBtYXJrZG93bkZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gW1xuICAgICAgeyBsYWJlbDogJ1RvdGFsIEZpbGVzJywgdmFsdWU6IGZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnTWFya2Rvd24gRmlsZXMnLCB2YWx1ZTogbWFya2Rvd25GaWxlcy5sZW5ndGgudG9TdHJpbmcoKSB9LFxuICAgICAgeyBsYWJlbDogJ0ZvbGRlcnMnLCB2YWx1ZTogdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoZiA9PiBmIGluc3RhbmNlb2YgVEZvbGRlcikubGVuZ3RoLnRvU3RyaW5nKCkgfVxuICAgIF07XG5cbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3Qgc3RhdEVsID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWl0ZW0nIH0pO1xuICAgICAgc3RhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHN0YXQudmFsdWUsIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdC12YWx1ZScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC5sYWJlbCwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LWxhYmVsJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUmVjZW50RmlsZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlY2VudEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zdGF0Lm10aW1lIC0gYS5zdGF0Lm10aW1lKVxuICAgICAgLnNsaWNlKDAsIDUpO1xuXG4gICAgcmVjZW50RmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlJyB9KTtcbiAgICAgIGZpbGVFbC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgIGZpbGVFbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUFnZW50U3RhdHVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLmxvYWRBZ2VudEluZm8oY29udGFpbmVyKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFnZW50SW5mbyhjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogTG9hZGluZyBhZ2VudHMgaW4gZnVsbC10YWItdmlldy4uLicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogZ2V0QWdlbnRzIHJlc3BvbnNlIGluIGZ1bGwtdGFiLXZpZXc6JywgcmVzcG9uc2UpO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIGNvbnRhaW5lcikge1xuICAgICAgICBsZXQgYWdlbnRzOiBhbnlbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCByZXNwb25zZSBmb3JtYXRzXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgLy8gRGlyZWN0IGFycmF5IHJlc3BvbnNlXG4gICAgICAgICAgYWdlbnRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIC8vIENoZWNrIGZvciB3cmFwcGVkIHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgICAgICBjb25zdCBkYXRhT2JqID0gcmVzcG9uc2UuZGF0YSBhcyBhbnk7XG4gICAgICAgICAgaWYgKGRhdGFPYmouYWdlbnRzICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5hZ2VudHMpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHthZ2VudHM6IFsuLi5dfVxuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5hZ2VudHM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogRm91bmQgYWdlbnRzIGFycmF5IGluIGZ1bGwtdGFiLXZpZXcsIHVzaW5nIHJlc3BvbnNlLmRhdGEuYWdlbnRzJyk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhT2JqLmRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBmb3JtYXQ6IHtkYXRhOiBbLi4uXX1cbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouZGF0YTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBGb3VuZCBuZXN0ZWQgZGF0YSBpbiBmdWxsLXRhYi12aWV3LCB1c2luZyByZXNwb25zZS5kYXRhLmRhdGEnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdWYXVsdFBpbG90OiBVbmV4cGVjdGVkIHJlc3BvbnNlIGZvcm1hdDonLCB0eXBlb2YgcmVzcG9uc2UuZGF0YSwgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEaXNwbGF5IGFnZW50IGluZm9ybWF0aW9uXG4gICAgICAgIGNvbnN0IGFnZW50Q291bnQgPSBhZ2VudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSBhZ2VudHMuZmlsdGVyKChhZ2VudDogYW55KSA9PiBhZ2VudC5hY3RpdmUpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50SW5mbyA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWluZm8nIH0pO1xuICAgICAgICBhZ2VudEluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYCR7YWN0aXZlQWdlbnRzfS8ke2FnZW50Q291bnR9IGFjdGl2ZWAgfSk7XG4gICAgICAgIFxuICAgICAgICBhZ2VudHMuZm9yRWFjaCgoYWdlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGFnZW50RWwgPSBhZ2VudEluZm8uY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pdGVtJyB9KTtcbiAgICAgICAgICBhZ2VudEVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBhZ2VudC5uYW1lIH0pO1xuICAgICAgICAgIGFnZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgdGV4dDogYWdlbnQuYWN0aXZlID8gJ/Cfn6InIDogJ/CflLQnLFxuICAgICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zdGF0dXMnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHMgaW4gZnVsbCB0YWIgdmlldzonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVBY3Rpdml0eUZlZWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGFjdGl2aXRpZXMgPSBbXG4gICAgICB7IHRpbWU6ICdKdXN0IG5vdycsIGFjdGl2aXR5OiAnVmF1bHRQaWxvdCBzdGFydGVkJyB9LFxuICAgICAgeyB0aW1lOiAnNSBtaW4gYWdvJywgYWN0aXZpdHk6ICdDb25uZWN0aW9uIGVzdGFibGlzaGVkJyB9LFxuICAgICAgeyB0aW1lOiAnMSBob3VyIGFnbycsIGFjdGl2aXR5OiAnTGFzdCB2YXVsdCBhbmFseXNpcycgfVxuICAgIF07XG5cbiAgICBhY3Rpdml0aWVzLmZvckVhY2goYWN0aXZpdHkgPT4ge1xuICAgICAgY29uc3QgYWN0aXZpdHlFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFjdGl2aXR5LWl0ZW0nIH0pO1xuICAgICAgYWN0aXZpdHlFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBhY3Rpdml0eS5hY3Rpdml0eSB9KTtcbiAgICAgIGFjdGl2aXR5RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYWN0aXZpdHkudGltZSwgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS10aW1lJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRnVsbFRhYlN0eWxlcygpIHtcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXVsdHBpbG90LWZ1bGwtdGFiLXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1mdWxsLXRhYi1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLyogRW5zdXJlIHRoZSBmdWxsIHRhYiB2aWV3IGZpbGxzIGF2YWlsYWJsZSBzcGFjZSAqL1xuICAgICAgICAud29ya3NwYWNlLWxlYWYtY29udGVudFtkYXRhLXR5cGU9XCJ2YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXdcIl0ge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mdWxsLXRhYi12aWV3IHtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1haW4tbGF5b3V0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgZ2FwOiAxcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbGVmdC1zaWRlYmFyIHtcbiAgICAgICAgICB3aWR0aDogMjUwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWFpbi1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmlnaHQtc2lkZWJhciB7XG4gICAgICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNpZGViYXItaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXRhYi1uYXYge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbiB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbi5hY3RpdmUge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItY29udGVudCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgICAgLyogU2VjdGlvbnMganVzdCBmbGV4LWdyb3cgYW5kIGhvbGQgdGhlaXIgY2hpbGRyZW4gKi9cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbiB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTsgICAgICAgICAgIC8qIGhpZGRlbiBieSBkZWZhdWx0ICovXG4gICAgICAgICAgZmxleDogMSAxIDA7ICAgICAgICAgICAgIC8qIGZsZXgtZ3JvdywgZmxleC1zaHJpbmssIGJhc2UgMCAqL1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgbWluLWhlaWdodDogMDsgICAgICAgICAgIC8qIGFsbG93IGNoaWxkcmVuIHRvIHNocmluay9zY3JvbGwgKi9cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEFjdGl2ZSBzZWN0aW9uIHNob3dzIGFuZCBmbGV4ZXMgKi9cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLmFjdGl2ZSxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbi5hY3RpdmUsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uLmFjdGl2ZSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDsgICAgICAgICAgIC8qIHNob3cgJiBmbGV4IHdoZW4gYWN0aXZlICovXG4gICAgICAgIH1cblxuICAgICAgICAvKiBDb250ZW50IHBhbmVscyBoYW5kbGUgdGhlIHNjcm9sbGluZyAqL1xuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWNvbnRlbnQsXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNvbnRlbnQsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1jb250ZW50IHtcbiAgICAgICAgICBmbGV4OiAxIDEgMDsgICAgICAgICAgICAgLyogZmlsbCByZW1haW5pbmcgc3BhY2UgKi9cbiAgICAgICAgICBtaW4taGVpZ2h0OiAwOyAgICAgICAgICAgLyogY3JpdGljYWwgdG8gYWxsb3cgb3ZlcmZsb3cgKi9cbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOyAgICAgICAgLyogbm93ICp0aGlzKiBjb250YWluZXIgc2Nyb2xscyAqL1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBrZWVwIHNwZWNpYWwgY2hhdCBnYXBzICovXG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGVudCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhpc3Rvcnkge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXRleHRhcmVhIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIG1pbi1oZWlnaHQ6IDYwcHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZW5kLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGhlaWdodDogZml0LWNvbnRlbnQ7XG4gICAgICAgICAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXgtd2lkdGg6IDgwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UudXNlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS5hc3Npc3RhbnQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS50aGlua2luZyB7XG4gICAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UuZXJyb3Ige1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlcixcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3MtaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyIGgzLFxuICAgICAgICAudmF1bHRwaWxvdC1hbmFseXRpY3MtaGVhZGVyIGgzIHtcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgICBhbGlnbi1jb250ZW50OiBzdGFydDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1jYXJkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNhcmQ6aG92ZXIge1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWljb24ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbiB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMzAwcHgsIDFmcikpO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgICBhbGlnbi1jb250ZW50OiBzdGFydDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1jYXJkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhcnQtY2FyZDpob3ZlciB7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXIge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVjZW50LWZpbGUge1xuICAgICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlY2VudC1maWxlOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hZ2VudC1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDRweCAwO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXR5LWl0ZW0ge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiA2cHggMDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXR5LXRpbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMnB4O1xuICAgICAgICB9XG4gICAgICAgIC8qIEluaGVyaXQgc3R5bGVzIGZyb20gb3JpZ2luYWwgdmlldyAqL1xuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMgaDMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA0cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtZXJyb3IsXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDhweCA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9uLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWl0ZW0ge1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtbGFiZWwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IHJlc291cmNlc1xuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIEdsb2JhbCBhcHAgaW5zdGFuY2UgLSB3aWxsIGJlIHNldCBieSB0aGUgbWFpbiBwbHVnaW5cbmV4cG9ydCBsZXQgYXBwOiBBcHA7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBcHAoYXBwSW5zdGFuY2U6IEFwcCkge1xuICBhcHAgPSBhcHBJbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBjb250ZW50IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIG1hcmtkb3duIGZpbGVcbiAqIEByZXR1cm5zIFRoZSBtYXJrZG93biBjb250ZW50ICh0cnVuY2F0ZWQgdG8gODAwMCBjaGFycykgb3IgbnVsbCBpZiBubyBmaWxlIGlzIGFjdGl2ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlTWFya2Rvd24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgaWYgKCFmaWxlKSByZXR1cm4gbnVsbDtcbiAgXG4gIC8vIExhcmdlIG5vdGVzPyBTbmlwIHRvIDgwMDAgY2hhcnMgdG8ga2VlcCB0b2tlbnMgcmVhc29uYWJsZVxuICBjb25zdCB0ZXh0ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gIHJldHVybiB0ZXh0LnNsaWNlKDAsIDhfMDAwKTtcbn1cbiIsImltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBJbnRlbnQgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGdldEFjdGl2ZU1hcmtkb3duIH0gZnJvbSAnLi92YXVsdC11dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBDaGF0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBjaGF0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaW5wdXRDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBtZXNzYWdlc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaW5wdXRFbCE6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgc2VuZEJ1dHRvbiE6IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGN1cnJlbnRDb252ZXJzYXRpb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbWVzc2FnZXM6IENoYXRNZXNzYWdlW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtY2hhdC1tb2RhbCcpO1xuXG4gICAgLy8gTW9kYWwgaGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90IENoYXQnIH0pO1xuICAgIFxuICAgIGNvbnN0IHRvb2xiYXJFbCA9IGhlYWRlckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC10b29sYmFyJyB9KTtcbiAgICBcbiAgICAvLyBBZGQgaW5mbyBhYm91dCBhdXRvbWF0aWMgbW9kZSBkZXRlY3Rpb25cbiAgICBjb25zdCBhdXRvTW9kZUluZm8gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWF1dG8tbW9kZS1pbmZvJyxcbiAgICAgIHRleHQ6ICfimqEgQXV0b21hdGljIG1vZGUgZGV0ZWN0aW9uIGVuYWJsZWQnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2xlYXIgY2hhdCBidXR0b25cbiAgICBjb25zdCBjbGVhckJ0biA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDbGVhciBDaGF0JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY2xlYXJCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xlYXJDaGF0KCk7XG5cbiAgICAvLyBBZ2VudCBzZWxlY3RvciAod2lsbCBiZSBwb3B1bGF0ZWQgd2hlbiBhZ2VudHMgYXJlIGxvYWRlZClcbiAgICBjb25zdCBhZ2VudFNlbGVjdCA9IHRvb2xiYXJFbC5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXNlbGVjdCcgfSk7XG4gICAgYWdlbnRTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdGV4dDogJ0F1dG8tc2VsZWN0IEFnZW50JywgdmFsdWU6ICcnIH0pO1xuICAgIHRoaXMubG9hZEFnZW50cyhhZ2VudFNlbGVjdCk7XG5cbiAgICAvLyBDaGF0IGNvbnRhaW5lclxuICAgIHRoaXMuY2hhdENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBNZXNzYWdlcyBhcmVhXG4gICAgdGhpcy5tZXNzYWdlc0VsID0gdGhpcy5jaGF0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcycgfSk7XG4gICAgXG4gICAgLy8gSW5wdXQgY29udGFpbmVyXG4gICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICB0aGlzLmlucHV0RWwgPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQXNrIGEgcXVlc3Rpb24gb3IgZGVzY3JpYmUgd2hhdCB5b3Ugd2FudCB0byBhY2NvbXBsaXNoLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1pbnB1dCdcbiAgICB9KTtcblxuICAgIHRoaXMuc2VuZEJ1dHRvbiA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTZW5kJyxcbiAgICAgIGNsczogJ21vZC1jdGEgdmF1bHRwaWxvdC1zZW5kLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIC8vIEV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc2VuZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zZW5kTWVzc2FnZSgpO1xuXG4gICAgLy8gRm9jdXMgdGhlIGlucHV0XG4gICAgdGhpcy5pbnB1dEVsLmZvY3VzKCk7XG5cbiAgICAvLyBMb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gICAgdGhpcy5sb2FkQ29udmVyc2F0aW9uSGlzdG9yeSgpO1xuXG4gICAgLy8gQWRkIHN0eWxlc1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudHMoc2VsZWN0RWw6IEhUTUxTZWxlY3RFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBMb2FkaW5nIGFnZW50cy4uLicpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QWdlbnRzKCk7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogZ2V0QWdlbnRzIHJlc3BvbnNlOicsIHJlc3BvbnNlKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogcmVzcG9uc2UuZGF0YSB0eXBlOicsIHR5cGVvZiByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IHJlc3BvbnNlLmRhdGEgY29udGVudDonLCByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBhZ2VudHM6IGFueVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBkYXRhIGlzIGRpcmVjdGx5IGFuIGFycmF5XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgYWdlbnRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSBcbiAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YSBoYXMgYW4gJ2FnZW50cycgcHJvcGVydHkgd2l0aCBhbiBhcnJheVxuICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5kYXRhICYmIHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNvbnN0IGRhdGFPYmogPSByZXNwb25zZS5kYXRhIGFzIGFueTtcbiAgICAgICAgICBpZiAoZGF0YU9iai5hZ2VudHMgJiYgQXJyYXkuaXNBcnJheShkYXRhT2JqLmFnZW50cykpIHtcbiAgICAgICAgICAgIGFnZW50cyA9IGRhdGFPYmouYWdlbnRzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YU9iai5kYXRhICYmIEFycmF5LmlzQXJyYXkoZGF0YU9iai5kYXRhKSkge1xuICAgICAgICAgICAgYWdlbnRzID0gZGF0YU9iai5kYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGFnZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IEZvdW5kJywgYWdlbnRzLmxlbmd0aCwgJ2FnZW50cycpO1xuICAgICAgICAgIGFnZW50cy5mb3JFYWNoKGFnZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7XG4gICAgICAgICAgICAgIHRleHQ6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiBhZ2VudC5pZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IE5vIGFnZW50cyBmb3VuZCBpbiByZXNwb25zZScpO1xuICAgICAgICAgIC8vIEFkZCBhIGRlZmF1bHQgb3B0aW9uIGluZGljYXRpbmcgbm8gYWdlbnRzXG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdObyBhZ2VudHMgYXZhaWxhYmxlJyxcbiAgICAgICAgICAgIHZhbHVlOiAnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIG9wdGlvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGFnZW50czogQVBJIHJldHVybmVkIGVycm9yIG9yIG5vIGRhdGE6JywgcmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBhZ2VudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKSB7XG4gICAgLy8gT25seSB0cnkgdG8gbG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeSBpZiB3ZSBoYXZlIGEgY29udmVyc2F0aW9uIElEXG4gICAgaWYgKHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb252ZXJzYXRpb25IaXN0b3J5KHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2VzO1xuICAgICAgICAgIHRoaXMucmVuZGVyTWVzc2FnZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiBubyBjb252ZXJzYXRpb24gSUQsIHN0YXJ0IGZyZXNoIChubyBoaXN0b3J5IHRvIGxvYWQpXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRNZXNzYWdlKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmlucHV0RWwudmFsdWUudHJpbSgpO1xuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuO1xuXG4gICAgLy8gRGlzYWJsZSBpbnB1dCB3aGlsZSBwcm9jZXNzaW5nXG4gICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kaW5nLi4uJztcblxuICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2UgdG8gVUlcbiAgICB0aGlzLmFkZE1lc3NhZ2UoJ3VzZXInLCBtZXNzYWdlKTtcbiAgICB0aGlzLmlucHV0RWwudmFsdWUgPSAnJztcblxuICAgIHRyeSB7XG4gICAgICAvLyDilIDilIAgZmV0Y2ggY29udGV4dCAmIGludGVudCBpbiBwYXJhbGxlbCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIBcbiAgICAgIGNvbnN0IFtjb250ZXh0LCBpbnRlbnRSZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBnZXRBY3RpdmVNYXJrZG93bigpLCAgICAgICAgICAvLyByZXR1cm5zIHN0cmluZyB8IG51bGxcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNsYXNzaWZ5SW50ZW50KG1lc3NhZ2UpICAvLyBQT1NUIC9pbnRlbGxpZ2VuY2UvcGFyc2VcbiAgICAgIF0pO1xuXG4gICAgICAvLyBidWlsZCBhIGdlbmVyaWMgcGF5bG9hZDsgY29udGV4dCBtYXkgYmUgbnVsbC9lbXB0eVxuICAgICAgY29uc3QgcGF5bG9hZCA9IHsgbWVzc2FnZSwgY29udGV4dCB9O1xuXG4gICAgICAvLyBTaG93IGludGVudCBkZXRlY3Rpb24gaW4gVUkgaWYgZGVidWcgbW9kZSBpcyBlbmFibGVkXG4gICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0ludGVudERlYnVnKSB7XG4gICAgICAgIHRoaXMuc2hvd0ludGVudERlYnVnKGludGVudFJlcy5pbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICBcbiAgICAgIGlmIChpbnRlbnRSZXMuaW50ZW50ID09PSBcImFnZW50XCIpIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQucnVuV29ya2Zsb3cocGF5bG9hZCk7ICAgICAvLyBQT1NUIC93b3JrZmxvd1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYOKame+4jyBBZ2VudCBNb2RlIChhdXRvLWRldGVjdGVkKVxcblxcbiR7cmVzcG9uc2UuZGF0YS5yZXN1bHR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3IgaW4gYWdlbnQgbW9kZTogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNlbmRDaGF0KHBheWxvYWQsIHtcbiAgICAgICAgICBjb252ZXJzYXRpb25faWQ6IHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBhZ2VudF9pZDogdGhpcy5nZXRTZWxlY3RlZEFnZW50KClcbiAgICAgICAgfSk7ICAgICAgICAvLyBQT1NUIC9jaGF0XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSByZXNwb25zZS5kYXRhLmNvbnZlcnNhdGlvbl9pZDtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIHJlc3BvbnNlLmRhdGEucmVzcG9uc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yOiAke3Jlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2V0IHJlc3BvbnNlJ31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXYXJuIHVzZXIgaWYgdGhleSBoYWQgY29udGV4dCBkaXNhYmxlZFxuICAgICAgaWYgKCFjb250ZXh0Py5sZW5ndGgpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIuKaoO+4jyBObyB2YXVsdCBjb250ZW50IHdhcyBzZW50OyByZXBsaWVzIG1heSBiZSBnZW5lcmljLlwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIG5ldyBOb3RpY2UoYENoYXQgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dFxuICAgICAgdGhpcy5pbnB1dEVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2VuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZW5kJztcbiAgICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWRBZ2VudCgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHNlbGVjdEVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0JykgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgcmV0dXJuIHNlbGVjdEVsPy52YWx1ZSB8fCB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1lc3NhZ2U6IENoYXRNZXNzYWdlID0ge1xuICAgICAgcm9sZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG5cbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLmVtcHR5KCk7XG4gICAgdGhpcy5tZXNzYWdlcy5mb3JFYWNoKG1lc3NhZ2UgPT4gdGhpcy5yZW5kZXJNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2UobWVzc2FnZTogQ2hhdE1lc3NhZ2UpIHtcbiAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogYHZhdWx0cGlsb3QtbWVzc2FnZSB2YXVsdHBpbG90LW1lc3NhZ2UtJHttZXNzYWdlLnJvbGV9YFxuICAgIH0pO1xuXG4gICAgY29uc3Qgcm9sZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2Utcm9sZScsXG4gICAgICB0ZXh0OiBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdZb3UnIDogJ1ZhdWx0UGlsb3QnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgLy8gU2ltcGxlIG1hcmtkb3duIHJlbmRlcmluZyBmb3IgYmFzaWMgZm9ybWF0dGluZ1xuICAgIGNvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKG1lc3NhZ2UuY29udGVudCk7XG5cbiAgICBpZiAobWVzc2FnZS50aW1lc3RhbXApIHtcbiAgICAgIGNvbnN0IHRpbWVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtdGltZScsXG4gICAgICAgIHRleHQ6IG5ldyBEYXRlKG1lc3NhZ2UudGltZXN0YW1wKS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgc2Nyb2xsVG9Cb3R0b20oKSB7XG4gICAgdGhpcy5tZXNzYWdlc0VsLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyQ2hhdCgpIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgdGhpcy5jdXJyZW50Q29udmVyc2F0aW9uSWQgPSBudWxsO1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIG5ldyBOb3RpY2UoJ0NoYXQgY2xlYXJlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC1jaGF0LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1jaGF0LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNjAwcHg7XG4gICAgICAgICAgaGVpZ2h0OiA3MDBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC10b29sYmFyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbyB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc2VsZWN0IHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA4MHB4KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2VzIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS11c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1yb2xlIHtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLWNvbnRlbnQge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogdGV4dDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtaW50ZW50LWRlYnVnIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyLWhvdmVyKTtcbiAgICAgICAgICBhbmltYXRpb246IGZhZGVJbk91dCAzcyBlYXNlLWluLW91dDtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbk91dCB7XG4gICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XG4gICAgICAgICAgMTAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4gICAgICAgICAgOTAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9XG4gICAgICAgICAgMTAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7IH1cbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93SW50ZW50RGVidWcoaW50ZW50OiBzdHJpbmcpIHtcbiAgICAvLyBDcmVhdGUgYSBzdWJ0bGUgbm90aWZpY2F0aW9uIHNob3dpbmcgdGhlIGRldGVjdGVkIGludGVudFxuICAgIGNvbnN0IGRlYnVnRWwgPSB0aGlzLm1lc3NhZ2VzRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtaW50ZW50LWRlYnVnJyxcbiAgICAgIHRleHQ6IGDwn5SNIEludGVudCBkZXRlY3RlZDogJHtpbnRlbnQgPT09ICdhZ2VudCcgPyAn4pqZ77iPIEFnZW50IE1vZGUnIDogJ/CfkqwgQXNrIE1vZGUnfWBcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBdXRvLXJlbW92ZSBhZnRlciAzIHNlY29uZHNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRlYnVnRWwucmVtb3ZlKCk7XG4gICAgfSwgMzAwMCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgV29ya2Zsb3dSZXF1ZXN0LCBXb3JrZmxvd1Jlc3BvbnNlLCBXb3JrZmxvd1Byb2dyZXNzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBXb3JrZmxvd01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgZ29hbElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBjb250ZXh0SW5wdXQhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBwcml2YXRlIGV4ZWN1dGVCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBwcm9ncmVzc0NvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlc3VsdHNDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBpc0V4ZWN1dGluZyA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnRlbnRFbC5hZGRDbGFzcygndmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCcpO1xuXG4gICAgLy8gSGVhZGVyXG4gICAgY29uc3QgaGVhZGVyRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ+Kame+4jyBXb3JrZmxvdyBFeGVjdXRpb24nIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdEZWZpbmUgYSBnb2FsIGFuZCBsZXQgVmF1bHRQaWxvdCBjcmVhdGUgYW5kIGV4ZWN1dGUgYSBjb21wcmVoZW5zaXZlIHdvcmtmbG93IHRvIGFjaGlldmUgaXQuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZGVzY3JpcHRpb24nXG4gICAgfSk7XG5cbiAgICAvLyBGb3JtXG4gICAgY29uc3QgZm9ybUVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctZm9ybScgfSk7XG5cbiAgICAvLyBHb2FsIGlucHV0XG4gICAgY29uc3QgZ29hbENvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdHb2FsIConLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuICAgIHRoaXMuZ29hbElucHV0ID0gZ29hbENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ2UuZy4sIFwiQ3JlYXRlIGEgY29tcHJlaGVuc2l2ZSBzdHVkeSBwbGFuIGZvciBtYWNoaW5lIGxlYXJuaW5nIGJhc2VkIG9uIG15IG5vdGVzXCInLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1nb2FsLWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gQ29udGV4dCBpbnB1dFxuICAgIGNvbnN0IGNvbnRleHRDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBjb250ZXh0Q29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnQWRkaXRpb25hbCBDb250ZXh0IChvcHRpb25hbCknLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWxhYmVsJ1xuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dElucHV0ID0gY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ1Byb3ZpZGUgYW55IGFkZGl0aW9uYWwgY29udGV4dCwgY29uc3RyYWludHMsIG9yIHJlcXVpcmVtZW50cy4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNvbnRleHQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICAvLyBWYXVsdCBjb250ZW50IG9wdGlvbnNcbiAgICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ1ZhdWx0IEludGVncmF0aW9uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcblxuICAgIGNvbnN0IGluY2x1ZGVBY3RpdmVGaWxlID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGVDaGVja2JveCA9IGluY2x1ZGVBY3RpdmVGaWxlLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWN0aXZlIGZpbGUgY29udGVudCcgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWxsRmlsZXMgPSBvcHRpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCcgfSk7XG4gICAgY29uc3QgYWxsRmlsZXNDaGVja2JveCA9IGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFsbEZpbGVzLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSW5jbHVkZSBhbGwgdmF1bHQgZmlsZXMgKG1heSB0YWtlIGxvbmdlciknIH0pO1xuXG4gICAgLy8gRXhlY3V0ZSBidXR0b25cbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24gPSBmb3JtRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNsczogJ21vZC1jdGEgdmF1bHRwaWxvdC1leGVjdXRlLWJ1dHRvbidcbiAgICB9KTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZXhlY3V0ZVdvcmtmbG93KGFjdGl2ZUZpbGVDaGVja2JveC5jaGVja2VkLCBhbGxGaWxlc0NoZWNrYm94LmNoZWNrZWQpO1xuXG4gICAgLy8gUHJvZ3Jlc3MgY29udGFpbmVyXG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIFJlc3VsdHMgY29udGFpbmVyXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vIEZvY3VzIHRoZSBnb2FsIGlucHV0XG4gICAgdGhpcy5nb2FsSW5wdXQuZm9jdXMoKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhpbmNsdWRlQWN0aXZlRmlsZTogYm9vbGVhbiwgaW5jbHVkZUFsbEZpbGVzOiBib29sZWFuKSB7XG4gICAgY29uc3QgZ29hbCA9IHRoaXMuZ29hbElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIWdvYWwpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIGdvYWwgZm9yIHRoZSB3b3JrZmxvdycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaXNFeGVjdXRpbmcgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGluZy4uLic7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIHRyeSB7XG4gICAgICAvLyBQcmVwYXJlIHZhdWx0IGNvbnRlbnRcbiAgICAgIGxldCB2YXVsdENvbnRlbnQgPSAnJztcbiAgICAgIFxuICAgICAgaWYgKGluY2x1ZGVBY3RpdmVGaWxlKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7YWN0aXZlRmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5jbHVkZUFsbEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMjApKSB7IC8vIExpbWl0IHRvIGZpcnN0IDIwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgdmF1bHRDb250ZW50ICs9IGA9PT0gJHtmaWxlLm5hbWV9ID09PVxcbiR7Y29udGVudH1cXG5cXG5gO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSB3b3JrZmxvdyByZXF1ZXN0XG4gICAgICBjb25zdCByZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QgPSB7XG4gICAgICAgIGdvYWwsXG4gICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dElucHV0LnZhbHVlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHZhdWx0X2NvbnRlbnQ6IHZhdWx0Q29udGVudCB8fCB1bmRlZmluZWRcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIFdlYlNvY2tldCBsaXN0ZW5lciBmb3IgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgaWYgKHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkpIHtcbiAgICAgICAgLy8gTGlzdGVuIGZvciB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIHRoaXMuc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4ZWN1dGUgd29ya2Zsb3dcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50IS5leGVjdXRlV29ya2Zsb3cocmVxdWVzdCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5UmVzdWx0cyhyZXNwb25zZS5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnV29ya2Zsb3cgZXhlY3V0aW9uIGZhaWxlZCcpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICBuZXcgTm90aWNlKGBXb3JrZmxvdyBlcnJvcjogJHtlcnJvck1zZ31gKTtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKGVycm9yTXNnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0V4ZWN1dGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmV4ZWN1dGVCdXR0b24udGV4dENvbnRlbnQgPSAnRXhlY3V0ZSBXb3JrZmxvdyc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFByb2dyZXNzTGlzdGVuZXIoKSB7XG4gICAgLy8gVGhpcyB3b3VsZCBiZSBjb25uZWN0ZWQgdG8gdGhlIFdlYlNvY2tldCBwcm9ncmVzcyB1cGRhdGVzXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgcHJvZ3Jlc3NcbiAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnQW5hbHl6aW5nIGdvYWwgYW5kIGNvbnRleHQuLi4nKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdQbGFubmluZyB3b3JrZmxvdyBzdGVwcy4uLicpO1xuICAgIH0sIDEwMDApO1xuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0V4ZWN1dGluZyB3b3JrZmxvdy4uLicpO1xuICAgIH0sIDIwMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5UHJvZ3Jlc3MobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LXByb2dyZXNzLXNwaW5uZXJcIj48L2Rpdj5cbiAgICAgICAgPHNwYW4+JHttZXNzYWdlfTwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRpc3BsYXlSZXN1bHRzKHdvcmtmbG93OiBXb3JrZmxvd1Jlc3BvbnNlKSB7XG4gICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIC8vIENsZWFyIHByZXZpb3VzIHJlc3VsdHNcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KchSBXb3JrZmxvdyBDb21wbGV0ZWQnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6IGBFeGVjdXRpb24gdGltZTogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zYCxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZXhlY3V0aW9uLXRpbWUnXG4gICAgfSk7XG5cbiAgICAvLyBNYWluIHJlc3VsdFxuICAgIGNvbnN0IHJlc3VsdEVsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQnIH0pO1xuICAgIHJlc3VsdEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1Jlc3VsdCcgfSk7XG4gICAgY29uc3QgcmVzdWx0Q29udGVudEVsID0gcmVzdWx0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHQtdGV4dCcgfSk7XG4gICAgcmVzdWx0Q29udGVudEVsLmlubmVySFRNTCA9IHRoaXMucmVuZGVyTWFya2Rvd24od29ya2Zsb3cucmVzdWx0KTtcblxuICAgIC8vIFN0ZXBzIHRha2VuXG4gICAgaWYgKHdvcmtmbG93LnN0ZXBzX3Rha2VuICYmIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHN0ZXBzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGVwcy1jb250YWluZXInIH0pO1xuICAgICAgc3RlcHNFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdTdGVwcyBUYWtlbicgfSk7XG4gICAgICBjb25zdCBzdGVwc0xpc3QgPSBzdGVwc0VsLmNyZWF0ZUVsKCdvbCcsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGVwcy1saXN0JyB9KTtcbiAgICAgIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmZvckVhY2goc3RlcCA9PiB7XG4gICAgICAgIHN0ZXBzTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IHN0ZXAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBcnRpZmFjdHNcbiAgICBpZiAod29ya2Zsb3cuYXJ0aWZhY3RzICYmIHdvcmtmbG93LmFydGlmYWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhcnRpZmFjdHNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0cy1jb250YWluZXInIH0pO1xuICAgICAgYXJ0aWZhY3RzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnR2VuZXJhdGVkIEFydGlmYWN0cycgfSk7XG4gICAgICBcbiAgICAgIHdvcmtmbG93LmFydGlmYWN0cy5mb3JFYWNoKChhcnRpZmFjdCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgYXJ0aWZhY3RFbCA9IGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYXJ0aWZhY3QnIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogYXJ0aWZhY3QudGl0bGUgfSk7XG4gICAgICAgIGFydGlmYWN0RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgIHRleHQ6IGBUeXBlOiAke2FydGlmYWN0LnR5cGV9YCxcbiAgICAgICAgICBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0LXR5cGUnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGFydGlmYWN0RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiAnU2F2ZSBhcyBOb3RlJyxcbiAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zYXZlQXJ0aWZhY3RBc05vdGUoYXJ0aWZhY3QsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFNhdmUgYWxsIGJ1dHRvblxuICAgIGNvbnN0IGFjdGlvbnNFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtYWN0aW9ucycgfSk7XG4gICAgY29uc3Qgc2F2ZUFsbEJ1dHRvbiA9IGFjdGlvbnNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1NhdmUgQ29tcGxldGUgUmVzdWx0cyBhcyBOb3RlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUFsbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlKHdvcmtmbG93KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0OiBhbnksIGluZGV4OiBudW1iZXIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHthcnRpZmFjdC50aXRsZS5yZXBsYWNlKC9bXmEtekEtWjAtOVxcc10vZywgJycpfS5tZGA7XG4gICAgICBjb25zdCBjb250ZW50ID0gYCMgJHthcnRpZmFjdC50aXRsZX1cXG5cXG4ke2FydGlmYWN0LmNvbnRlbnR9YDtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYEFydGlmYWN0IHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIGFydGlmYWN0OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYFZhdWx0UGlsb3QgV29ya2Zsb3cgUmVzdWx0cyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgXG4gICAgICBsZXQgY29udGVudCA9IGAjIFZhdWx0UGlsb3QgV29ya2Zsb3cgUmVzdWx0c1xcblxcbmA7XG4gICAgICBjb250ZW50ICs9IGAqKkdvYWw6KiogJHt0aGlzLmdvYWxJbnB1dC52YWx1ZX1cXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipFeGVjdXRpb24gVGltZToqKiAke3dvcmtmbG93LmV4ZWN1dGlvbl90aW1lfXNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgIyMgUmVzdWx0XFxuXFxuJHt3b3JrZmxvdy5yZXN1bHR9XFxuXFxuYDtcbiAgICAgIFxuICAgICAgaWYgKHdvcmtmbG93LnN0ZXBzX3Rha2VuICYmIHdvcmtmbG93LnN0ZXBzX3Rha2VuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVudCArPSBgIyMgU3RlcHMgVGFrZW5cXG5cXG5gO1xuICAgICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKChzdGVwLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCR7aW5kZXggKyAxfS4gJHtzdGVwfVxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250ZW50ICs9ICdcXG4nO1xuICAgICAgfVxuXG4gICAgICBpZiAod29ya2Zsb3cuYXJ0aWZhY3RzICYmIHdvcmtmbG93LmFydGlmYWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIEdlbmVyYXRlZCBBcnRpZmFjdHNcXG5cXG5gO1xuICAgICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaChhcnRpZmFjdCA9PiB7XG4gICAgICAgICAgY29udGVudCArPSBgIyMjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fVxcblxcbmA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIGNvbnRlbnQpO1xuICAgICAgbmV3IE5vdGljZShgQ29tcGxldGUgcmVzdWx0cyBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSByZXN1bHRzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheUVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LWVycm9yXCI+XG4gICAgICAgIDxoMz7inYwgV29ya2Zsb3cgRmFpbGVkPC9oMz5cbiAgICAgICAgPHA+JHttZXNzYWdlfTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1hcmtkb3duKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG4gICAgICAucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+JylcbiAgICAgIC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKVxuICAgICAgLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC13b3JrZmxvdy1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LW1vZGFsIHtcbiAgICAgICAgICB3aWR0aDogNzAwcHg7XG4gICAgICAgICAgbWF4LWhlaWdodDogODB2aDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tZ3JvdXAge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZm9ybS1sYWJlbCB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1nb2FsLWlucHV0LFxuICAgICAgICAudmF1bHRwaWxvdC1jb250ZXh0LWlucHV0IHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCB7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGVja2JveC1sYWJlbCBpbnB1dCB7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLXNwaW5uZXIge1xuICAgICAgICAgIHdpZHRoOiAxNnB4O1xuICAgICAgICAgIGhlaWdodDogMTZweDtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDFzIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtY29udGVudCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlc3VsdC10ZXh0IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyLFxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWxpc3Qge1xuICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hcnRpZmFjdCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3QtdHlwZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWVycm9yIHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBcbiAgQVBJUmVzcG9uc2UsIFxuICBDaGF0UmVxdWVzdCwgXG4gIENoYXRSZXNwb25zZSwgXG4gIENvbnZlcnNhdGlvbkhpc3RvcnksXG4gIENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0LFxuICBDb3BpbG90UmVxdWVzdCwgXG4gIENvcGlsb3RSZXNwb25zZSxcbiAgV29ya2Zsb3dSZXF1ZXN0LFxuICBXb3JrZmxvd1Jlc3BvbnNlLFxuICBBZ2VudCxcbiAgQWdlbnRDcmVhdGVSZXF1ZXN0LFxuICBBZ2VudEV4ZWN1dGVSZXF1ZXN0LFxuICBWYXVsdENvbnRleHRSZXF1ZXN0LFxuICBWYXVsdENvbnRleHRSZXNwb25zZSxcbiAgVGFza1BsYW5uaW5nUmVxdWVzdCxcbiAgVGFza1BsYW5uaW5nUmVzcG9uc2UsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVxdWVzdCxcbiAgSW50ZWxsaWdlbmNlUGFyc2VSZXNwb25zZSxcbiAgTWVtb3J5VXBkYXRlUmVxdWVzdCxcbiAgV2ViU29ja2V0TWVzc2FnZSxcbiAgRXJyb3JSZXNwb25zZSxcbiAgSW50ZW50LFxuICBJbnRlbnRSZXN1bHQsXG4gIEludGVudERlYnVnXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRXZvQWdlbnRYQ2xpZW50IHtcbiAgcHJpdmF0ZSBiYXNlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpS2V5Pzogc3RyaW5nO1xuICBwcml2YXRlIHdlYnNvY2tldD86IFdlYlNvY2tldDtcbiAgcHJpdmF0ZSB3c0NhbGxiYWNrczogTWFwPHN0cmluZywgKGRhdGE6IGFueSkgPT4gdm9pZD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoYmFzZVVybDogc3RyaW5nLCBhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdDxUPihcbiAgICBlbmRwb2ludDogc3RyaW5nLCBcbiAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9XG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2U8VD4+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9JHtlbmRwb2ludH1gO1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIC4uLihvcHRpb25zLmhlYWRlcnMgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8fCB7fSksXG4gICAgfTtcblxuICAgIGlmICh0aGlzLmFwaUtleSkge1xuICAgICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYXBpS2V5fWA7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBIYW5kbGUgbm9uLUpTT04gcmVzcG9uc2VzIGdyYWNlZnVsbHlcbiAgICAgIGxldCBkYXRhO1xuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG4gICAgICBpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuICAgICAgICBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgZGF0YS5lcnJvciBcbiAgICAgICAgICA/IGRhdGEuZXJyb3IgXG4gICAgICAgICAgOiBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5lcnJvcihgQVBJIEVycm9yIFske3Jlc3BvbnNlLnN0YXR1c31dOmAsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnID8geyBtZXNzYWdlOiBkYXRhIH0gYXMgVCA6IGRhdGEsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEkgUmVxdWVzdCBFcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBIZWFsdGggY2hlY2tcbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTxBUElSZXNwb25zZTx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4+IHtcbiAgICBjb25zb2xlLmxvZyhgVmF1bHRQaWxvdDogQXR0ZW1wdGluZyBoZWFsdGggY2hlY2sgdG8gJHt0aGlzLmJhc2VVcmx9L3N0YXR1c2ApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3Q8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+KCcvc3RhdHVzJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogSGVhbHRoIGNoZWNrIHJlc3VsdDonLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBBbHRlcm5hdGl2ZSBoZWFsdGggY2hlY2sgbWV0aG9kIGlmIHRoZSBtYWluIG9uZSBmYWlsc1xuICBhc3luYyBzaW1wbGVIZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9zdGF0dXNgO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnSEVBRCcsXG4gICAgICAgIG1vZGU6ICdjb3JzJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdvbWl0JyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uub2sgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDUpIHsgLy8gNDA1IG1lYW5zIHNlcnZlciBpcyB1cCBidXQgZG9lc24ndCBzdXBwb3J0IEhFQURcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHsgc3RhdHVzOiAnb2snIH1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Nvbm5lY3Rpb24gZmFpbGVkJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBDaGF0IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgY2hhdChyZXF1ZXN0OiBDaGF0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q29udmVyc2F0aW9uSGlzdG9yeShjb252ZXJzYXRpb25JZDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gNTApOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvbnZlcnNhdGlvbkhpc3Rvcnk+PiB7XG4gICAgY29uc3QgcmVxdWVzdEJvZHk6IENvbnZlcnNhdGlvbkhpc3RvcnlSZXF1ZXN0ID0ge1xuICAgICAgY29udmVyc2F0aW9uX2lkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgIGxpbWl0OiBsaW1pdCxcbiAgICAgIGluY2x1ZGVfbWVzc2FnZXM6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvbnZlcnNhdGlvbi9oaXN0b3J5Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWxldGVDb252ZXJzYXRpb24oY29udmVyc2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8QVBJUmVzcG9uc2U8dm9pZD4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdChgL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb25zLyR7Y29udmVyc2F0aW9uSWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIENvcGlsb3QgZnVuY3Rpb25hbGl0eVxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihyZXF1ZXN0OiBDb3BpbG90UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q29waWxvdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NvcGlsb3QvY29tcGxldGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV29ya2Zsb3cgZXhlY3V0aW9uXG4gIGFzeW5jIGV4ZWN1dGVXb3JrZmxvdyhyZXF1ZXN0OiBXb3JrZmxvd1JlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gTmV3IHVuaWZpZWQgQVBJIG1ldGhvZHMgZm9yIHNpbXBsaWZpZWQgY29udGV4dCBwYWNrYWdpbmdcbiAgYXN5bmMgcnVuV29ya2Zsb3cocGF5bG9hZDogeyBtZXNzYWdlOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZyB8IG51bGwgfSk6IFByb21pc2U8QVBJUmVzcG9uc2U8V29ya2Zsb3dSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi93b3JrZmxvdycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBnb2FsOiBwYXlsb2FkLm1lc3NhZ2UsXG4gICAgICAgIGNvbnRleHQ6IHBheWxvYWQuY29udGV4dCB8fCB1bmRlZmluZWRcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2VuZENoYXQocGF5bG9hZDogeyBtZXNzYWdlOiBzdHJpbmc7IGNvbnRleHQ6IHN0cmluZyB8IG51bGwgfSwgb3B0aW9ucz86IHsgY29udmVyc2F0aW9uX2lkPzogc3RyaW5nOyBhZ2VudF9pZD86IHN0cmluZyB9KTogUHJvbWlzZTxBUElSZXNwb25zZTxDaGF0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vY2hhdCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UsXG4gICAgICAgIHZhdWx0X2NvbnRleHQ6IHBheWxvYWQuY29udGV4dCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGNvbnZlcnNhdGlvbl9pZDogb3B0aW9ucz8uY29udmVyc2F0aW9uX2lkLFxuICAgICAgICBhZ2VudF9pZDogb3B0aW9ucz8uYWdlbnRfaWQsXG4gICAgICAgIG1vZGU6ICdhc2snXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFnZW50IG1hbmFnZW1lbnRcbiAgYXN5bmMgZ2V0QWdlbnRzKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8QWdlbnRbXT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudHMnKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUFnZW50KHJlcXVlc3Q6IEFnZW50Q3JlYXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8QWdlbnQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzL2NyZWF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBleGVjdXRlQWdlbnQocmVxdWVzdDogQWdlbnRFeGVjdXRlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8YW55Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50L2V4ZWN1dGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVmF1bHQgYW5hbHlzaXNcbiAgYXN5bmMgYW5hbHl6ZVZhdWx0Q29udGV4dChyZXF1ZXN0OiBWYXVsdENvbnRleHRSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxWYXVsdENvbnRleHRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9jb250ZXh0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFRhc2sgcGxhbm5pbmdcbiAgYXN5bmMgcGxhblRhc2tzKHJlcXVlc3Q6IFRhc2tQbGFubmluZ1JlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPFRhc2tQbGFubmluZ1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3BsYW5uaW5nL3Rhc2tzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEludGVsbGlnZW5jZSBwYXJzaW5nXG4gIGFzeW5jIHBhcnNlSW50ZWxsaWdlbmNlKHJlcXVlc3Q6IEludGVsbGlnZW5jZVBhcnNlUmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8SW50ZWxsaWdlbmNlUGFyc2VSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9pbnRlbGxpZ2VuY2UvcGFyc2UnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSW50ZW50IGNsYXNzaWZpY2F0aW9uXG4gIGFzeW5jIGNsYXNzaWZ5SW50ZW50KG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8SW50ZW50UmVzdWx0PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PEludGVudFJlc3VsdD4oJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvICdhc2snIG1vZGUgaWYgY2xhc3NpZmljYXRpb24gZmFpbHNcbiAgICByZXR1cm4geyBpbnRlbnQ6ICdhc2snLCBjb25maWRlbmNlOiAwLjUgfTtcbiAgfVxuXG4gIC8vIE9wdGlvbmFsOiBEZWJ1ZyBpbnRlbnQgY2xhc3NpZmljYXRpb25cbiAgYXN5bmMgZXhwbGFpbkludGVudChtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPEludGVudERlYnVnPiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0PEludGVudERlYnVnPignL2FwaS9vYnNpZGlhbi9pbnRlbGxpZ2VuY2UvcGFyc2UnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbWVzc2FnZSwgaW5jbHVkZV9kZWJ1ZzogdHJ1ZSB9KSxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgZGVidWcgaW5mb1xuICAgIHJldHVybiB7IFxuICAgICAgaW50ZW50OiAnYXNrJywgXG4gICAgICBjb25maWRlbmNlOiAwLjUsIFxuICAgICAgcmVhc29uaW5nOiAnQ2xhc3NpZmljYXRpb24gZmFpbGVkLCBkZWZhdWx0aW5nIHRvIGFzayBtb2RlJyBcbiAgICB9O1xuICB9XG5cbiAgLy8gTWVtb3J5IG1hbmFnZW1lbnRcbiAgYXN5bmMgdXBkYXRlTWVtb3J5KHJlcXVlc3Q6IE1lbW9yeVVwZGF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHZvaWQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vbWVtb3J5L3VwZGF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBXZWJTb2NrZXQgZnVuY3Rpb25hbGl0eVxuICBjb25uZWN0V2ViU29ja2V0KGNhbGxiYWNrczoge1xuICAgIG9uQ2hhdD86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Xb3JrZmxvd1Byb2dyZXNzPzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbkNvcGlsb3Q/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uVmF1bHRTeW5jPzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvbkludGVudERlYnVnPzogKGRlYnVnOiBJbnRlbnREZWJ1ZykgPT4gdm9pZDtcbiAgICBvbkVycm9yPzogKGVycm9yOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgb25Db25uZWN0PzogKCkgPT4gdm9pZDtcbiAgICBvbkRpc2Nvbm5lY3Q/OiAoKSA9PiB2b2lkO1xuICB9KTogdm9pZCB7XG4gICAgY29uc3Qgd3NVcmwgPSB0aGlzLmJhc2VVcmwucmVwbGFjZSgnaHR0cCcsICd3cycpICsgJy93cy9vYnNpZGlhbic7XG4gICAgY29uc29sZS5sb2coYFZhdWx0UGlsb3Q6IEF0dGVtcHRpbmcgV2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gJHt3c1VybH1gKTtcbiAgICBcbiAgICB0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQod3NVcmwpO1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25vcGVuID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBjb25uZWN0ZWQgdG8gRXZvQWdlbnRYJyk7XG4gICAgICBjYWxsYmFja3Mub25Db25uZWN0Py4oKTtcbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXNzYWdlOiBXZWJTb2NrZXRNZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBtZXNzYWdlIHJlY2VpdmVkOicsIG1lc3NhZ2UudHlwZSk7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ2hhdD8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd3b3JrZmxvd19wcm9ncmVzcyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25Xb3JrZmxvd1Byb2dyZXNzPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2NvcGlsb3QnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uQ29waWxvdD8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd2YXVsdF9zeW5jJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vblZhdWx0U3luYz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdpbnRlbnRfZGVidWcnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uSW50ZW50RGVidWc/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IEVycm9yIHBhcnNpbmcgV2ViU29ja2V0IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdGYWlsZWQgdG8gcGFyc2UgV2ViU29ja2V0IG1lc3NhZ2UnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQub25jbG9zZSA9IChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBkaXNjb25uZWN0ZWQgZnJvbSBFdm9BZ2VudFgnLCBldmVudC5jb2RlLCBldmVudC5yZWFzb24pO1xuICAgICAgY2FsbGJhY2tzLm9uRGlzY29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhdWx0UGlsb3Q6IFdlYlNvY2tldCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBjYWxsYmFja3Mub25FcnJvcj8uKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvcicpO1xuICAgIH07XG4gIH1cblxuICBkaXNjb25uZWN0V2ViU29ja2V0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCkge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuY2xvc2UoKTtcbiAgICAgIHRoaXMud2Vic29ja2V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHNlbmRXZWJTb2NrZXRNZXNzYWdlKHR5cGU6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICB0aGlzLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZSwgZGF0YSB9KSk7XG4gICAgfVxuICB9XG5cbiAgaXNXZWJTb2NrZXRDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMud2Vic29ja2V0Py5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTjtcbiAgfVxufVxuIiwiLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgdGhlIHBsYW5uZXIgZmVhdHVyZVxuZXhwb3J0IGludGVyZmFjZSBQbGFubmVyUmVzcG9uc2Uge1xuICBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmc7XG4gIGhlYWRsaW5lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlcXVlc3Qge1xuICBub3RlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRmV0Y2hlcyBzY2hlZHVsZSBkYXRhIGZyb20gdGhlIEV2b0FnZW50WCBBUElcbiAqIEBwYXJhbSBub3RlVGV4dCAtIFRoZSBmdWxsIHRleHQgb2YgdGhlIGFjdGl2ZSBub3RlXG4gKiBAcGFyYW0gYXBpQ2xpZW50IC0gVGhlIEV2b0FnZW50WCBBUEkgY2xpZW50IGluc3RhbmNlXG4gKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIHNjaGVkdWxlIG1hcmtkb3duIGFuZCBoZWFkbGluZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTY2hlZHVsZShub3RlVGV4dDogc3RyaW5nLCBhcGlDbGllbnQ6IGFueSk6IFByb21pc2U8UGxhbm5lclJlc3BvbnNlPiB7XG4gIGNvbnNvbGUubG9nKCfwn5SEIFtQbGFuIE15IERheV0gU3RhcnRpbmcgc2NoZWR1bGUgZmV0Y2guLi4nKTtcbiAgY29uc29sZS5sb2coJ/Cfk50gW1BsYW4gTXkgRGF5XSBOb3RlIHRleHQgbGVuZ3RoOicsIG5vdGVUZXh0Lmxlbmd0aCk7XG4gIGNvbnNvbGUubG9nKCfwn5SXIFtQbGFuIE15IERheV0gQVBJIGNsaWVudCB0eXBlOicsIHR5cGVvZiBhcGlDbGllbnQpO1xuICBcbiAgaWYgKCFhcGlDbGllbnQpIHtcbiAgICBjb25zdCBlcnJvciA9ICdBUEkgY2xpZW50IGlzIG51bGwgb3IgdW5kZWZpbmVkJztcbiAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgfVxuXG4gIGlmICghYXBpQ2xpZW50LnBsYW5UYXNrcykge1xuICAgIGNvbnN0IGVycm9yID0gJ0FQSSBjbGllbnQgZG9lcyBub3QgaGF2ZSBwbGFuVGFza3MgbWV0aG9kJztcbiAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBBdmFpbGFibGUgbWV0aG9kczonLCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcGlDbGllbnQpKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+TpCBbUGxhbiBNeSBEYXldIFNlbmRpbmcgcmVxdWVzdCB0byBFdm9BZ2VudFguLi4nKTtcbiAgICBcbiAgICAvLyBVc2UgRXZvQWdlbnRYIHRhc2sgcGxhbm5pbmcgZW5kcG9pbnQgaW5zdGVhZCBvZiBsb2NhbCBzZXJ2ZXJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgZ29hbDogYENyZWF0ZSBhIGRhaWx5IHNjaGVkdWxlIGJhc2VkIG9uIHRoaXMgbm90ZSBjb250ZW50YCxcbiAgICAgIGNvbnRleHQ6IG5vdGVUZXh0LFxuICAgICAgdGltZWZyYW1lOiAnMSBkYXknXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpSBbUGxhbiBNeSBEYXldIFJlY2VpdmVkIHJlc3BvbnNlOicsIHtcbiAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlLnN1Y2Nlc3MsXG4gICAgICBoYXNEYXRhOiAhIXJlc3BvbnNlLmRhdGEsXG4gICAgICBlcnJvcjogcmVzcG9uc2UuZXJyb3JcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gUmF3IHJlc3BvbnNlIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSwgbnVsbCwgMikpO1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gUmVzcG9uc2UgZGF0YSB0eXBlOicsIHR5cGVvZiByZXNwb25zZS5kYXRhKTtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIFJlc3BvbnNlIGRhdGEga2V5czonLCByZXNwb25zZS5kYXRhID8gT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YSkgOiAnbm8gZGF0YScpO1xuXG4gICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc2NoZWR1bGUnO1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gQVBJIEVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICBjb25zdCBlcnJvciA9ICdObyBkYXRhIGluIEFQSSByZXNwb25zZSc7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEZ1bGwgcmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgRXZvQWdlbnRYIEFQSSByZXR1cm5zIGEgbmVzdGVkIHN0cnVjdHVyZTogcmVzcG9uc2UuZGF0YS5kYXRhLnBsYW5cbiAgICBjb25zdCBhY3R1YWxEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhIHx8IHJlc3BvbnNlLmRhdGE7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk4sgW1BsYW4gTXkgRGF5XSBSZXNwb25zZSBkYXRhIHN0cnVjdHVyZTonLCB7XG4gICAgICBoYXNQbGFuOiAhIWFjdHVhbERhdGEucGxhbixcbiAgICAgIHBsYW5LZXlzOiBhY3R1YWxEYXRhLnBsYW4gPyBPYmplY3Qua2V5cyhhY3R1YWxEYXRhLnBsYW4pIDogbnVsbCxcbiAgICAgIGhhc1Rhc2tzOiBhY3R1YWxEYXRhLnBsYW4/LnRhc2tzID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgdGFza0NvdW50OiBhY3R1YWxEYXRhLnBsYW4/LnRhc2tzPy5sZW5ndGggfHwgMFxuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgaWYgcGxhbiBleGlzdHMgaW4gcmVzcG9uc2VcbiAgICBpZiAoIWFjdHVhbERhdGEucGxhbikge1xuICAgICAgY29uc3QgZXJyb3IgPSAnTm8gcGxhbiBkYXRhIGluIEFQSSByZXNwb25zZSc7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEZ1bGwgcmVzcG9uc2UgZGF0YTonLCByZXNwb25zZS5kYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gQWN0dWFsIGRhdGE6JywgYWN0dWFsRGF0YSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgRXZvQWdlbnRYIHRhc2sgcGxhbm5pbmcgcmVzcG9uc2UgdG8gc2NoZWR1bGUgZm9ybWF0XG4gICAgY29uc3QgdGFza1BsYW4gPSBhY3R1YWxEYXRhLnBsYW47XG4gICAgY29uc3QgdGFza3MgPSB0YXNrUGxhbi50YXNrcyB8fCBbXTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIFByb2Nlc3NpbmcgdGFza3M6JywgdGFza3MubGVuZ3RoKTtcbiAgICBcbiAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBbUGxhbiBNeSBEYXldIE5vIHRhc2tzIGluIHJlc3BvbnNlLCBjcmVhdGluZyBmYWxsYmFjayBzY2hlZHVsZScpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NoZWR1bGVNYXJrZG93bjogJ3wgVGltZSB8IFRhc2sgfFxcbnwtLS0tLS18LS0tLS0tfFxcbnwgOTowMCBBTSB8IFBsYW4geW91ciBkYXkgfFxcbnwgMTA6MDAgQU0gfCBTdGFydCB3b3JraW5nIHxcXG58IDEyOjAwIFBNIHwgTHVuY2ggYnJlYWsgfCcsXG4gICAgICAgIGhlYWRsaW5lOiAn8J+ThSBCYXNpYyBzY2hlZHVsZSBjcmVhdGVkIChubyB0YXNrcyBmb3VuZCBpbiBub3RlKSdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYXRlIHNjaGVkdWxlIG1hcmtkb3duIGZyb20gdGFza3NcbiAgICBsZXQgc2NoZWR1bGVNYXJrZG93biA9ICd8IFRpbWUgfCBUYXNrIHxcXG58LS0tLS0tfC0tLS0tLXxcXG4nO1xuICAgIFxuICAgIC8vIEV4dHJhY3Qgc2NoZWR1bGVkIHRpbWVzIGZyb20gdGFzayBkZXNjcmlwdGlvbnMgb3IgZ2VuZXJhdGUgdGhlbVxuICAgIHRhc2tzLmZvckVhY2goKHRhc2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgY29uc29sZS5sb2coYPCfk4sgW1BsYW4gTXkgRGF5XSBQcm9jZXNzaW5nIHRhc2sgJHtpbmRleCArIDF9OmAsIHtcbiAgICAgICAgdGl0bGU6IHRhc2sudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrLmRlc2NyaXB0aW9uPy5zdWJzdHJpbmcoMCwgMTAwKSxcbiAgICAgICAgcHJpb3JpdHk6IHRhc2sucHJpb3JpdHksXG4gICAgICAgIGVzdGltYXRlZFRpbWU6IHRhc2suZXN0aW1hdGVkX3RpbWVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCB0aW1lTWF0Y2ggPSB0YXNrLmRlc2NyaXB0aW9uPy5tYXRjaCgvKFxcZHsxLDJ9OlxcZHsyfSkvKTtcbiAgICAgIGNvbnN0IHRpbWUgPSB0aW1lTWF0Y2ggPyB0aW1lTWF0Y2hbMV0gOiBgJHs5ICsgTWF0aC5mbG9vcihpbmRleCAqIDEuNSl9OiR7KGluZGV4ICogMzApICUgNjAgfHwgJzAwJ31gO1xuICAgICAgc2NoZWR1bGVNYXJrZG93biArPSBgfCAke3RpbWV9IHwgJHt0YXNrLnRpdGxlfSB8XFxuYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIHNjaGVkdWxlTWFya2Rvd24sXG4gICAgICBoZWFkbGluZTogYOKcqCBTbWFydCBzY2hlZHVsZSBjcmVhdGVkIHdpdGggJHt0YXNrcy5sZW5ndGh9IHRhc2tzIWBcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIGdlbmVyYXRlZCBzdWNjZXNzZnVsbHk6Jywge1xuICAgICAgbWFya2Rvd25MZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgICAgdGFza0NvdW50OiB0YXNrcy5sZW5ndGgsXG4gICAgICBoZWFkbGluZTogcmVzdWx0LmhlYWRsaW5lXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRmV0Y2ggZXJyb3I6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ/CflI0gW1BsYW4gTXkgRGF5XSBFcnJvciBzdGFjazonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2sgdHJhY2UnKTtcbiAgICBcbiAgICAvLyBSZS10aHJvdyB3aXRoIG1vcmUgY29udGV4dFxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNjaGVkdWxlIGZldGNoIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNjaGVkdWxlIGZldGNoIGZhaWxlZDogJHtTdHJpbmcoZXJyb3IpfWApO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEZpbmRzIGFuZCBleHRyYWN0cyB0aGUgVmF1bHRQaWxvdCBwbGFuIHNlY3Rpb24gZnJvbSBub3RlIHRleHQgdXNpbmcgY29tbWVudCB3cmFwcGVyXG4gKiBAcGFyYW0gdGV4dCAtIFRoZSBmdWxsIG5vdGUgdGV4dFxuICogQHJldHVybnMgTWF0Y2ggcmVzdWx0IHdpdGggcGxhbiBzZWN0aW9uIGRldGFpbHMgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFBsYW5TZWN0aW9uKHRleHQ6IHN0cmluZyk6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsIHtcbiAgLy8gTG9vayBmb3IgdGhlIFZhdWx0UGlsb3QgcGxhbiBjb21tZW50IHdyYXBwZXJcbiAgY29uc3QgcGxhblJlZ2V4ID0gLyg8IS0tIHZwOnBsYW46c3RhcnQgLS0+KShbXFxzXFxTXSo/KSg8IS0tIHZwOnBsYW46ZW5kIC0tPikvaTtcbiAgcmV0dXJuIHRleHQubWF0Y2gocGxhblJlZ2V4KTtcbn1cblxuLyoqXG4gKiBGaW5kcyBhbmQgZXh0cmFjdHMgdGhlIFNjaGVkdWxlIHNlY3Rpb24gZnJvbSBub3RlIHRleHRcbiAqIEBwYXJhbSB0ZXh0IC0gVGhlIGZ1bGwgbm90ZSB0ZXh0XG4gKiBAcmV0dXJucyBNYXRjaCByZXN1bHQgd2l0aCBzY2hlZHVsZSBzZWN0aW9uIGRldGFpbHMgb3IgbnVsbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZFNjaGVkdWxlU2VjdGlvbih0ZXh0OiBzdHJpbmcpOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCB7XG4gIC8vIEZpcnN0IHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGFyZSBleGFjdGx5IFwiIyMgU2NoZWR1bGVcIiAod2l0aCBvcHRpb25hbCBjb250ZW50IGFmdGVyKVxuICBsZXQgc2NoZWR1bGVSZWdleCA9IC8oXiMjXFxzK1NjaGVkdWxlXFxiW15cXG5dKlxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgbGV0IG1hdGNoID0gdGV4dC5tYXRjaChzY2hlZHVsZVJlZ2V4KTtcbiAgXG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiBtYXRjaDtcbiAgfVxuICBcbiAgLy8gSWYgbm8gZXhhY3QgbWF0Y2gsIHRyeSB0byBtYXRjaCBoZWFkaW5ncyB0aGF0IGNvbnRhaW4gXCJTY2hlZHVsZVwiIGFzIGEgd29yZFxuICBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMqKD86LipcXHMpP1xcYlNjaGVkdWxlXFxiKD86XFxzLiopPyRcXG4pKFtcXHNcXFNdKj8pKD89XFxuIyNcXHN8JCkvaW07XG4gIHJldHVybiB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xufVxuXG4vKipcbiAqIEluamVjdHMgb3IgcmVwbGFjZXMgdGhlIHNjaGVkdWxlIHNlY3Rpb24gaW4gdGhlIG5vdGUgdGV4dFxuICogQHBhcmFtIG9yaWdpbmFsVGV4dCAtIFRoZSBvcmlnaW5hbCBub3RlIHRleHRcbiAqIEBwYXJhbSBzY2hlZHVsZU1hcmtkb3duIC0gVGhlIG5ldyBzY2hlZHVsZSBjb250ZW50IHRvIGluamVjdFxuICogQHJldHVybnMgVXBkYXRlZCBub3RlIHRleHQgd2l0aCB0aGUgbmV3IHNjaGVkdWxlIHNlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluamVjdFNjaGVkdWxlKG9yaWdpbmFsVGV4dDogc3RyaW5nLCBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIEluamVjdGluZyBzY2hlZHVsZTonLCB7XG4gICAgb3JpZ2luYWxMZW5ndGg6IG9yaWdpbmFsVGV4dC5sZW5ndGgsXG4gICAgc2NoZWR1bGVMZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgIGhhc09yaWdpbmFsQ29udGVudDogb3JpZ2luYWxUZXh0LnRyaW0oKS5sZW5ndGggPiAwXG4gIH0pO1xuICBcbiAgLy8gRmlyc3QsIGNoZWNrIGZvciBWYXVsdFBpbG90IGNvbW1lbnQgd3JhcHBlclxuICBjb25zdCBwbGFuTWF0Y2ggPSBmaW5kUGxhblNlY3Rpb24ob3JpZ2luYWxUZXh0KTtcbiAgXG4gIGlmIChwbGFuTWF0Y2gpIHtcbiAgICBjb25zb2xlLmxvZygn8J+UhCBbUGxhbiBNeSBEYXldIFJlcGxhY2luZyBleGlzdGluZyBwbGFuIHNlY3Rpb24gd2l0aCBjb21tZW50IHdyYXBwZXInKTtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIEZvdW5kIHdyYXBwZWQgcGxhbiBzZWN0aW9uOicsIHtcbiAgICAgIHN0YXJ0Q29tbWVudDogcGxhbk1hdGNoWzFdLFxuICAgICAgY29udGVudExlbmd0aDogcGxhbk1hdGNoWzJdPy5sZW5ndGggfHwgMCxcbiAgICAgIGVuZENvbW1lbnQ6IHBsYW5NYXRjaFszXVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlcGxhY2UgZXZlcnl0aGluZyBpbnNpZGUgdGhlIGNvbW1lbnQgd3JhcHBlclxuICAgIGNvbnN0IFtmdWxsTWF0Y2gsIHN0YXJ0Q29tbWVudCwgLCBlbmRDb21tZW50XSA9IHBsYW5NYXRjaDtcbiAgICBjb25zdCByZXBsYWNlbWVudCA9IGAke3N0YXJ0Q29tbWVudH1cXG4ke3NjaGVkdWxlTWFya2Rvd259XFxuJHtlbmRDb21tZW50fWA7XG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxUZXh0LnJlcGxhY2UoZnVsbE1hdGNoLCByZXBsYWNlbWVudCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFBsYW4gc2VjdGlvbiByZXBsYWNlZCB3aXRoaW4gY29tbWVudCB3cmFwcGVyJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBcbiAgLy8gRmFsbCBiYWNrIHRvIGNoZWNraW5nIGZvciBTY2hlZHVsZSBzZWN0aW9uXG4gIGNvbnN0IHNjaGVkdWxlTWF0Y2ggPSBmaW5kU2NoZWR1bGVTZWN0aW9uKG9yaWdpbmFsVGV4dCk7XG4gIFxuICBpZiAoc2NoZWR1bGVNYXRjaCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SEIFtQbGFuIE15IERheV0gUmVwbGFjaW5nIGV4aXN0aW5nIHNjaGVkdWxlIHNlY3Rpb24nKTtcbiAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIEZvdW5kIHNlY3Rpb246Jywge1xuICAgICAgaGVhZGluZ01hdGNoOiBzY2hlZHVsZU1hdGNoWzFdPy5zdWJzdHJpbmcoMCwgNTApLFxuICAgICAgY29udGVudE1hdGNoOiBzY2hlZHVsZU1hdGNoWzJdPy5zdWJzdHJpbmcoMCwgMTAwKVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlcGxhY2UgZXhpc3Rpbmcgc2NoZWR1bGUgc2VjdGlvbiAoa2VlcCBoZWFkaW5nLCByZXBsYWNlIGNvbnRlbnQpXG4gICAgY29uc3QgW2Z1bGxNYXRjaCwgaGVhZGluZ10gPSBzY2hlZHVsZU1hdGNoO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gaGVhZGluZyArIHNjaGVkdWxlTWFya2Rvd247XG4gICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxUZXh0LnJlcGxhY2UoZnVsbE1hdGNoLCByZXBsYWNlbWVudCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIHNlY3Rpb24gcmVwbGFjZWQnKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCfinpUgW1BsYW4gTXkgRGF5XSBBZGRpbmcgbmV3IHBsYW4gc2VjdGlvbiB3aXRoIGNvbW1lbnQgd3JhcHBlciBhdCB0b3AnKTtcbiAgICBcbiAgICAvLyBJbnNlcnQgbmV3IHBsYW4gc2VjdGlvbiB3aXRoIGNvbW1lbnQgd3JhcHBlciBhdCB0aGUgdG9wIG9mIHRoZSBub3RlXG4gICAgY29uc3Qgd3JhcHBlZFBsYW4gPSBgPCEtLSB2cDpwbGFuOnN0YXJ0IC0tPlxcbiR7c2NoZWR1bGVNYXJrZG93bn1cXG48IS0tIHZwOnBsYW46ZW5kIC0tPlxcblxcbmA7XG4gICAgY29uc3QgcmVzdWx0ID0gd3JhcHBlZFBsYW4gKyBvcmlnaW5hbFRleHQ7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIE5ldyBwbGFuIHNlY3Rpb24gd2l0aCB3cmFwcGVyIGFkZGVkIGF0IHRvcCcpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgaWYgdGhlIHNjaGVkdWxlIG1hcmtkb3duIGlzIHByb3Blcmx5IGZvcm1hdHRlZFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgc2NoZWR1bGUgY29udGVudCB0byB2YWxpZGF0ZVxuICogQHJldHVybnMgVHJ1ZSBpZiB2YWxpZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24oc2NoZWR1bGVNYXJrZG93bjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheV0gVmFsaWRhdGluZyBzY2hlZHVsZSBtYXJrZG93bjonLCB7XG4gICAgbGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLmxlbmd0aCxcbiAgICB0cmltbWVkTGVuZ3RoOiBzY2hlZHVsZU1hcmtkb3duLnRyaW0oKS5sZW5ndGgsXG4gICAgaXNTdHJpbmc6IHR5cGVvZiBzY2hlZHVsZU1hcmtkb3duID09PSAnc3RyaW5nJyxcbiAgICBwcmV2aWV3OiBzY2hlZHVsZU1hcmtkb3duLnN1YnN0cmluZygwLCAxMDApXG4gIH0pO1xuICBcbiAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIGNoZWNrIGlmIGl0J3Mgbm90IGVtcHR5IGFuZCBjb250YWlucyBzb21lIGNvbnRlbnRcbiAgY29uc3QgaXNWYWxpZCA9IHNjaGVkdWxlTWFya2Rvd24udHJpbSgpLmxlbmd0aCA+IDA7XG4gIFxuICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gVmFsaWRhdGlvbiByZXN1bHQ6JywgaXNWYWxpZCk7XG4gIFxuICByZXR1cm4gaXNWYWxpZDtcbn1cbiIsIi8vIERlYnVnIHV0aWxpdGllcyBmb3IgUGxhbiBNeSBEYXkgZmVhdHVyZVxuZXhwb3J0IGNsYXNzIFBsYW5NeURheURlYnVnZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFBsYW5NeURheURlYnVnZ2VyO1xuICBwcml2YXRlIGxvZ3M6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgbWF4TG9ncyA9IDEwMDtcblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogUGxhbk15RGF5RGVidWdnZXIge1xuICAgIGlmICghUGxhbk15RGF5RGVidWdnZXIuaW5zdGFuY2UpIHtcbiAgICAgIFBsYW5NeURheURlYnVnZ2VyLmluc3RhbmNlID0gbmV3IFBsYW5NeURheURlYnVnZ2VyKCk7XG4gICAgfVxuICAgIHJldHVybiBQbGFuTXlEYXlEZWJ1Z2dlci5pbnN0YW5jZTtcbiAgfVxuXG4gIGxvZyhtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgbG9nRW50cnkgPSBgWyR7dGltZXN0YW1wfV0gJHttZXNzYWdlfSR7ZGF0YSA/IGAgfCAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWAgOiAnJ31gO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGxvZ0VudHJ5KTtcbiAgICB0aGlzLmxvZ3MucHVzaChsb2dFbnRyeSk7XG4gICAgXG4gICAgLy8gS2VlcCBvbmx5IHRoZSBtb3N0IHJlY2VudCBsb2dzXG4gICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiB0aGlzLm1heExvZ3MpIHtcbiAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5zbGljZSgtdGhpcy5tYXhMb2dzKTtcbiAgICB9XG4gIH1cblxuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogYW55KSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyB7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgbmFtZTogZXJyb3IubmFtZVxuICAgIH0gOiBlcnJvcjtcbiAgICBcbiAgICBjb25zdCBsb2dFbnRyeSA9IGBbJHt0aW1lc3RhbXB9XSBFUlJPUjogJHttZXNzYWdlfSR7ZXJyb3JEYXRhID8gYCB8ICR7SlNPTi5zdHJpbmdpZnkoZXJyb3JEYXRhKX1gIDogJyd9YDtcbiAgICBcbiAgICBjb25zb2xlLmVycm9yKGxvZ0VudHJ5KTtcbiAgICB0aGlzLmxvZ3MucHVzaChsb2dFbnRyeSk7XG4gICAgXG4gICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiB0aGlzLm1heExvZ3MpIHtcbiAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5zbGljZSgtdGhpcy5tYXhMb2dzKTtcbiAgICB9XG4gIH1cblxuICBnZXRMb2dzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMubG9nc107XG4gIH1cblxuICBjbGVhckxvZ3MoKSB7XG4gICAgdGhpcy5sb2dzID0gW107XG4gIH1cblxuICBleHBvcnRMb2dzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubG9ncy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIC8vIEhlbHBlciB0byBhbmFseXplIEFQSSBjbGllbnQgc3RhdGVcbiAgYW5hbHl6ZUFwaUNsaWVudChhcGlDbGllbnQ6IGFueSk6IGFueSB7XG4gICAgaWYgKCFhcGlDbGllbnQpIHtcbiAgICAgIHJldHVybiB7IHN0YXR1czogJ251bGwnLCBhdmFpbGFibGU6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogJ2F2YWlsYWJsZScsXG4gICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICB0eXBlOiB0eXBlb2YgYXBpQ2xpZW50LFxuICAgICAgbWV0aG9kczogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKGFwaUNsaWVudCkpLmZpbHRlcihuYW1lID0+IHR5cGVvZiBhcGlDbGllbnRbbmFtZV0gPT09ICdmdW5jdGlvbicpLFxuICAgICAgaGFzUGxhblRhc2tzOiB0eXBlb2YgYXBpQ2xpZW50LnBsYW5UYXNrcyA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgIGhhc0hlYWx0aENoZWNrOiB0eXBlb2YgYXBpQ2xpZW50LmhlYWx0aENoZWNrID09PSAnZnVuY3Rpb24nXG4gICAgfTtcbiAgfVxuXG4gIC8vIEhlbHBlciB0byB0ZXN0IEV2b0FnZW50WCBjb25uZWN0aW9uXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKGFwaUNsaWVudDogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coJ/CflJcgVGVzdGluZyBFdm9BZ2VudFggY29ubmVjdGlvbi4uLicpO1xuICAgICAgXG4gICAgICBpZiAoIWFwaUNsaWVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSBjbGllbnQgaXMgbnVsbCBvciB1bmRlZmluZWQnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhcGlDbGllbnQuaGVhbHRoQ2hlY2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY2xpZW50IGRvZXMgbm90IGhhdmUgaGVhbHRoQ2hlY2sgbWV0aG9kJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgdGhpcy5sb2coJ+KchSBDb25uZWN0aW9uIHRlc3Qgc3VjY2Vzc2Z1bCcsIHJlc3VsdCk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCByZXN1bHQgfTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVycm9yKCfinYwgQ29ubmVjdGlvbiB0ZXN0IGZhaWxlZCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSGVscGVyIHRvIHRlc3QgdGFzayBwbGFubmluZyBzcGVjaWZpY2FsbHlcbiAgYXN5bmMgdGVzdFRhc2tQbGFubmluZyhhcGlDbGllbnQ6IGFueSwgdGVzdE5vdGU6IHN0cmluZyA9ICdUZXN0IG5vdGUgZm9yIHNjaGVkdWxlIGdlbmVyYXRpb24nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5sb2coJ/Cfk4sgVGVzdGluZyB0YXNrIHBsYW5uaW5nLi4uJyk7XG4gICAgICBcbiAgICAgIGlmICghYXBpQ2xpZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGNsaWVudCBpcyBudWxsIG9yIHVuZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWFwaUNsaWVudC5wbGFuVGFza3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgY2xpZW50IGRvZXMgbm90IGhhdmUgcGxhblRhc2tzIG1ldGhvZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcGlDbGllbnQucGxhblRhc2tzKHtcbiAgICAgICAgZ29hbDogJ0NyZWF0ZSBhIHRlc3Qgc2NoZWR1bGUnLFxuICAgICAgICBjb250ZXh0OiB0ZXN0Tm90ZSxcbiAgICAgICAgdGltZWZyYW1lOiAnMSBkYXknXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5sb2coJ+KchSBUYXNrIHBsYW5uaW5nIHRlc3Qgc3VjY2Vzc2Z1bCcsIHtcbiAgICAgICAgc3VjY2VzczogcmVzdWx0LnN1Y2Nlc3MsXG4gICAgICAgIGhhc0RhdGE6ICEhcmVzdWx0LmRhdGEsXG4gICAgICAgIGhhc1BsYW46ICEhcmVzdWx0LmRhdGE/LnBsYW4sXG4gICAgICAgIHRhc2tDb3VudDogcmVzdWx0LmRhdGE/LnBsYW4/LnRhc2tzPy5sZW5ndGggfHwgMFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlc3VsdCB9O1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3IoJ+KdjCBUYXNrIHBsYW5uaW5nIHRlc3QgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IHBsYW5NeURheURlYnVnZ2VyID0gUGxhbk15RGF5RGVidWdnZXIuZ2V0SW5zdGFuY2UoKTtcbiIsIi8qKlxuICogVHlwZVNjcmlwdCB0eXBlIGRlZmluaXRpb25zIGZvciBWYXVsdFBpbG90IHZhdWx0IG1hbmFnZW1lbnQgaW50ZWdyYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vID09PSBWQVVMVCBTVFJVQ1RVUkUgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0IHtcbiAgaW5jbHVkZV9jb250ZW50PzogYm9vbGVhbjtcbiAgbWF4X2RlcHRoPzogbnVtYmVyO1xuICBmaWxlX3R5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRGaWxlSW5mbyB7XG4gIHBhdGg6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzaXplOiBudW1iZXI7XG4gIG1vZGlmaWVkOiBzdHJpbmc7XG4gIGZpbGVfdHlwZTogc3RyaW5nO1xuICBjb250ZW50X3ByZXZpZXc/OiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbiAgbGlua3M/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdEZvbGRlckluZm8ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgY2hpbGRyZW46IChWYXVsdEZpbGVJbmZvIHwgVmF1bHRGb2xkZXJJbmZvKVtdO1xuICB0eXBlOiAnZm9sZGVyJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlIHtcbiAgdmF1bHRfbmFtZTogc3RyaW5nO1xuICB0b3RhbF9maWxlczogbnVtYmVyO1xuICB0b3RhbF9mb2xkZXJzOiBudW1iZXI7XG4gIHRvdGFsX3NpemU6IG51bWJlcjtcbiAgc3RydWN0dXJlOiBWYXVsdEZvbGRlckluZm87XG4gIHJlY2VudF9maWxlczogVmF1bHRGaWxlSW5mb1tdO1xuICBvcnBoYW5lZF9maWxlczogVmF1bHRGaWxlSW5mb1tdO1xufVxuXG4vLyA9PT0gRklMRSBPUEVSQVRJT04gVFlQRVMgPT09XG5cbmV4cG9ydCB0eXBlIEZpbGVPcGVyYXRpb25UeXBlID0gJ2NyZWF0ZScgfCAndXBkYXRlJyB8ICdkZWxldGUnIHwgJ21vdmUnIHwgJ2NvcHknO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPcGVyYXRpb25SZXF1ZXN0IHtcbiAgb3BlcmF0aW9uOiBGaWxlT3BlcmF0aW9uVHlwZTtcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIG5ld19wYXRoPzogc3RyaW5nO1xuICBjb250ZW50Pzogc3RyaW5nO1xuICBiYWNrdXA/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVPcGVyYXRpb25SZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIGJhY2t1cF9wYXRoPzogc3RyaW5nO1xuICBuZXdfcGF0aD86IHN0cmluZztcbn1cblxuLy8gPT09IEJBVENIIE9QRVJBVElPTlMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hGaWxlT3BlcmF0aW9uUmVxdWVzdCB7XG4gIG9wZXJhdGlvbnM6IEZpbGVPcGVyYXRpb25SZXF1ZXN0W107XG4gIGF0b21pYz86IGJvb2xlYW47XG4gIHRpbWVvdXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hGaWxlT3BlcmF0aW9uUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBjb21wbGV0ZWQ6IG51bWJlcjtcbiAgZmFpbGVkOiBudW1iZXI7XG4gIHJlc3VsdHM6IEZpbGVPcGVyYXRpb25SZXNwb25zZVtdO1xuICBlcnJvcnM/OiBzdHJpbmdbXTtcbn1cblxuLy8gPT09IFNFQVJDSCBUWVBFUyA9PT1cblxuZXhwb3J0IHR5cGUgU2VhcmNoVHlwZSA9ICdjb250ZW50JyB8ICdmaWxlbmFtZScgfCAndGFncycgfCAnbGlua3MnIHwgJ2NvbXByZWhlbnNpdmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVxdWVzdCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIHNlYXJjaF90eXBlPzogU2VhcmNoVHlwZTtcbiAgbWF4X3Jlc3VsdHM/OiBudW1iZXI7XG4gIGluY2x1ZGVfY29udGVudD86IGJvb2xlYW47XG4gIGZpbGVfdHlwZXM/OiBzdHJpbmdbXTtcbiAgZm9sZGVycz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVzdWx0IHtcbiAgZmlsZV9wYXRoOiBzdHJpbmc7XG4gIGZpbGVfbmFtZTogc3RyaW5nO1xuICBtYXRjaF90eXBlOiAnY29udGVudCcgfCAnZmlsZW5hbWUnIHwgJ3RhZycgfCAnbGluayc7XG4gIG1hdGNoZXM6IHN0cmluZ1tdO1xuICBwcmV2aWV3OiBzdHJpbmc7XG4gIHNjb3JlOiBudW1iZXI7XG4gIGxpbmVfbnVtYmVycz86IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0U2VhcmNoUmVzcG9uc2Uge1xuICByZXN1bHRzOiBWYXVsdFNlYXJjaFJlc3VsdFtdO1xuICB0b3RhbF9mb3VuZDogbnVtYmVyO1xuICBzZWFyY2hfdHlwZTogU2VhcmNoVHlwZTtcbiAgcXVlcnk6IHN0cmluZztcbiAgaW5zaWdodHM/OiBzdHJpbmc7XG4gIHN1Z2dlc3RlZF9xdWVyaWVzPzogc3RyaW5nW107XG59XG5cbi8vID09PSBPUkdBTklaQVRJT04gVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRPcmdhbml6YXRpb25SZXF1ZXN0IHtcbiAgZm9jdXNfZm9sZGVycz86IHN0cmluZ1tdO1xuICBvcmdhbml6YXRpb25fbW9kZTogJ2J5X3RvcGljJyB8ICdieV9kYXRlJyB8ICdieV90eXBlJyB8ICdjdXN0b20nO1xuICBjcmVhdGVfZm9sZGVycz86IGJvb2xlYW47XG4gIG1vdmVfZmlsZXM/OiBib29sZWFuO1xuICBjdXN0b21fcnVsZXM/OiBPcmdhbml6YXRpb25SdWxlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JnYW5pemF0aW9uUnVsZSB7XG4gIHBhdHRlcm46IHN0cmluZztcbiAgdGFyZ2V0X2ZvbGRlcjogc3RyaW5nO1xuICBydWxlX3R5cGU6ICdmaWxlbmFtZScgfCAnY29udGVudCcgfCAndGFnJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE9yZ2FuaXphdGlvblJlc3BvbnNlIHtcbiAgc3VnZ2VzdGVkX21vdmVzOiBGaWxlTW92ZU9wZXJhdGlvbltdO1xuICBzdWdnZXN0ZWRfZm9sZGVyczogc3RyaW5nW107XG4gIG9yZ2FuaXphdGlvbl9pbnNpZ2h0czogc3RyaW5nO1xuICBlc3RpbWF0ZWRfaW1wcm92ZW1lbnRzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU1vdmVPcGVyYXRpb24ge1xuICBmcm9tX3BhdGg6IHN0cmluZztcbiAgdG9fcGF0aDogc3RyaW5nO1xuICByZWFzb246IHN0cmluZztcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xufVxuXG4vLyA9PT0gQkFDS1VQIFRZUEVTID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QmFja3VwUmVxdWVzdCB7XG4gIGluY2x1ZGVfc2V0dGluZ3M/OiBib29sZWFuO1xuICBjb21wcmVzc2lvbj86IGJvb2xlYW47XG4gIGJhY2t1cF9uYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QmFja3VwUmVzcG9uc2Uge1xuICBiYWNrdXBfcGF0aDogc3RyaW5nO1xuICBiYWNrdXBfc2l6ZTogbnVtYmVyO1xuICBmaWxlc19iYWNrZWRfdXA6IG51bWJlcjtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbi8vID09PSBFUlJPUiBIQU5ETElORyA9PT1cblxuZXhwb3J0IGNsYXNzIFZhdWx0TWFuYWdlbWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogc3RyaW5nO1xuICBwdWJsaWMgZmVhdHVyZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgY29kZTogc3RyaW5nLCBmZWF0dXJlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnVmF1bHRNYW5hZ2VtZW50RXJyb3InO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgdGhpcy5mZWF0dXJlID0gZmVhdHVyZTtcbiAgfVxufVxuXG4vLyA9PT0gU0VUVElOR1MgVFlQRVMgPT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRNYW5hZ2VtZW50U2V0dGluZ3Mge1xuICBlbmFibGVWYXVsdE1hbmFnZW1lbnQ6IGJvb2xlYW47XG4gIGF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmU6IGJvb2xlYW47XG4gIHNlYXJjaFJlc3VsdHNMaW1pdDogbnVtYmVyO1xuICBlbmFibGVTbWFydFNlYXJjaDogYm9vbGVhbjtcbiAgYmF0Y2hPcGVyYXRpb25UaW1lb3V0OiBudW1iZXI7XG4gIHNob3dWYXVsdFN0YXRzOiBib29sZWFuO1xuICBtYXhTZWFyY2hSZXN1bHRzOiBudW1iZXI7XG4gIGRlZmF1bHRTZWFyY2hUeXBlOiBTZWFyY2hUeXBlO1xuICBlbmFibGVGaWxlT3BlcmF0aW9uczogYm9vbGVhbjtcbiAgY29uZmlybURlc3RydWN0aXZlT3BlcmF0aW9uczogYm9vbGVhbjtcbiAgYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnM6IGJvb2xlYW47XG59XG5cbi8vID09PSBBUEkgSU5URVJGQUNFID09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0TWFuYWdlbWVudEFQSSB7XG4gIGdldFZhdWx0U3RydWN0dXJlKHJlcXVlc3Q6IFZhdWx0U3RydWN0dXJlUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTdHJ1Y3R1cmVSZXNwb25zZT47XG4gIHBlcmZvcm1GaWxlT3BlcmF0aW9uKHJlcXVlc3Q6IEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+O1xuICBwZXJmb3JtQmF0Y2hPcGVyYXRpb25zKHJlcXVlc3Q6IEJhdGNoRmlsZU9wZXJhdGlvblJlcXVlc3QpOiBQcm9taXNlPEJhdGNoRmlsZU9wZXJhdGlvblJlc3BvbnNlPjtcbiAgc2VhcmNoVmF1bHQocmVxdWVzdDogVmF1bHRTZWFyY2hSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFNlYXJjaFJlc3BvbnNlPjtcbiAgb3JnYW5pemVWYXVsdChyZXF1ZXN0OiBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QpOiBQcm9taXNlPFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2U+O1xuICBiYWNrdXBWYXVsdChyZXF1ZXN0OiBWYXVsdEJhY2t1cFJlcXVlc3QpOiBQcm9taXNlPFZhdWx0QmFja3VwUmVzcG9uc2U+O1xufVxuXG4vLyA9PT0gVVRJTElUWSBUWVBFUyA9PT1cblxuZXhwb3J0IGludGVyZmFjZSBWYXVsdE1vZGFsUHJvcHMge1xuICBhcHA6IEFwcDtcbiAgcGx1Z2luOiBhbnk7XG4gIG9uQ2xvc2U/OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVUcmVlTm9kZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICB0eXBlOiAnZmlsZScgfCAnZm9sZGVyJztcbiAgY2hpbGRyZW4/OiBGaWxlVHJlZU5vZGVbXTtcbiAgc2l6ZT86IG51bWJlcjtcbiAgbW9kaWZpZWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRTdGF0cyB7XG4gIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgdG90YWxGb2xkZXJzOiBudW1iZXI7XG4gIHRvdGFsU2l6ZTogbnVtYmVyO1xuICBhdmVyYWdlRmlsZVNpemU6IG51bWJlcjtcbiAgbGFyZ2VzdEZpbGU6IFZhdWx0RmlsZUluZm87XG4gIG1vc3RSZWNlbnRGaWxlOiBWYXVsdEZpbGVJbmZvO1xuICBmaWxlVHlwZURpc3RyaWJ1dGlvbjogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hGaWx0ZXIge1xuICBmaWxlVHlwZXM/OiBzdHJpbmdbXTtcbiAgZm9sZGVycz86IHN0cmluZ1tdO1xuICBkYXRlUmFuZ2U/OiB7XG4gICAgc3RhcnQ6IHN0cmluZztcbiAgICBlbmQ6IHN0cmluZztcbiAgfTtcbiAgc2l6ZVJhbmdlPzoge1xuICAgIG1pbjogbnVtYmVyO1xuICAgIG1heDogbnVtYmVyO1xuICB9O1xuICB0YWdzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRIZWFsdGhDaGVjayB7XG4gIHN0YXR1czogJ2hlYWx0aHknIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJztcbiAgaXNzdWVzOiBIZWFsdGhJc3N1ZVtdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBsYXN0Q2hlY2s6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWFsdGhJc3N1ZSB7XG4gIHR5cGU6ICdvcnBoYW5lZF9maWxlJyB8ICdicm9rZW5fbGluaycgfCAnZHVwbGljYXRlX25hbWUnIHwgJ2xhcmdlX2ZpbGUnIHwgJ2VtcHR5X2ZvbGRlcic7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGZpbGVzOiBzdHJpbmdbXTtcbiAgc2V2ZXJpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG59XG4iLCIvKipcbiAqIEFQSSBDbGllbnQgRXh0ZW5zaW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtcbiAgVmF1bHRTdHJ1Y3R1cmVSZXF1ZXN0LFxuICBWYXVsdFN0cnVjdHVyZVJlc3BvbnNlLFxuICBGaWxlT3BlcmF0aW9uUmVxdWVzdCxcbiAgRmlsZU9wZXJhdGlvblJlc3BvbnNlLFxuICBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0LFxuICBCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZSxcbiAgVmF1bHRTZWFyY2hSZXF1ZXN0LFxuICBWYXVsdFNlYXJjaFJlc3BvbnNlLFxuICBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QsXG4gIFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2UsXG4gIFZhdWx0QmFja3VwUmVxdWVzdCxcbiAgVmF1bHRCYWNrdXBSZXNwb25zZSxcbiAgVmF1bHRNYW5hZ2VtZW50RXJyb3IsXG4gIFZhdWx0TWFuYWdlbWVudEFQSVxufSBmcm9tICcuL3ZhdWx0LXR5cGVzJztcblxuLyoqXG4gKiBWYXVsdCBNYW5hZ2VtZW50IEFQSSBDbGllbnRcbiAqL1xuZXhwb3J0IGNsYXNzIFZhdWx0TWFuYWdlbWVudENsaWVudCBpbXBsZW1lbnRzIFZhdWx0TWFuYWdlbWVudEFQSSB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihiYXNlVXJsOiBzdHJpbmcsIGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICAvLyA9PT0gQ09SRSBBUEkgTUVUSE9EUyA9PT1cblxuICAvKipcbiAgICogR2V0IGNvbXByZWhlbnNpdmUgdmF1bHQgc3RydWN0dXJlIHdpdGggQUkgYW5hbHlzaXNcbiAgICovXG4gIGFzeW5jIGdldFZhdWx0U3RydWN0dXJlKHJlcXVlc3Q6IFZhdWx0U3RydWN0dXJlUmVxdWVzdCk6IFByb21pc2U8VmF1bHRTdHJ1Y3R1cmVSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvc3RydWN0dXJlJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgLy8gRW5kcG9pbnQgbm90IGltcGxlbWVudGVkIC0gcmV0dXJuIGVtcHR5IHN0cnVjdHVyZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhdWx0X25hbWU6ICdWYXVsdCcsXG4gICAgICAgICAgdG90YWxfZmlsZXM6IDAsXG4gICAgICAgICAgdG90YWxfZm9sZGVyczogMCxcbiAgICAgICAgICB0b3RhbF9zaXplOiAwLFxuICAgICAgICAgIHN0cnVjdHVyZTogeyBuYW1lOiAndmF1bHQnLCB0eXBlOiAnZm9sZGVyJywgcGF0aDogJy8nLCBjaGlsZHJlbjogW10gfSxcbiAgICAgICAgICByZWNlbnRfZmlsZXM6IFtdLFxuICAgICAgICAgIG9ycGhhbmVkX2ZpbGVzOiBbXVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIGdldCB2YXVsdCBzdHJ1Y3R1cmU6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdTVFJVQ1RVUkVfRkVUQ0hfRkFJTEVEJyxcbiAgICAgICAgICAnc3RydWN0dXJlJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBWYXVsdE1hbmFnZW1lbnRFcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdzdHJ1Y3R1cmUnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGluZGl2aWR1YWwgZmlsZSBvcGVyYXRpb24gKGNyZWF0ZSwgdXBkYXRlLCBkZWxldGUsIG1vdmUsIGNvcHkpXG4gICAqL1xuICBhc3luYyBwZXJmb3JtRmlsZU9wZXJhdGlvbihyZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMudmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChyZXF1ZXN0KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2ZpbGUvb3BlcmF0aW9uJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgRmlsZSBvcGVyYXRpb24gZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnRklMRV9PUEVSQVRJT05fRkFJTEVEJyxcbiAgICAgICAgICAnZmlsZS1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIHJlc3VsdC5tZXNzYWdlIHx8ICdGaWxlIG9wZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgICdGSUxFX09QRVJBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdmaWxlLW9wZXJhdGlvbnMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdmaWxlLW9wZXJhdGlvbnMnKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIG11bHRpcGxlIGZpbGUgb3BlcmF0aW9ucyBlZmZpY2llbnRseVxuICAgKi9cbiAgYXN5bmMgcGVyZm9ybUJhdGNoT3BlcmF0aW9ucyhyZXF1ZXN0OiBCYXRjaEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogUHJvbWlzZTxCYXRjaEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXJlcXVlc3Qub3BlcmF0aW9ucyB8fCByZXF1ZXN0Lm9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICAnTm8gb3BlcmF0aW9ucyBzcGVjaWZpZWQgZm9yIGJhdGNoIHJlcXVlc3QnLFxuICAgICAgICAgICdJTlZBTElEX0JBVENIX1JFUVVFU1QnLFxuICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBlYWNoIG9wZXJhdGlvblxuICAgICAgcmVxdWVzdC5vcGVyYXRpb25zLmZvckVhY2goKG9wLCBpbmRleCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMudmFsaWRhdGVGaWxlT3BlcmF0aW9uUmVxdWVzdChvcCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICAgYEludmFsaWQgb3BlcmF0aW9uIGF0IGluZGV4ICR7aW5kZXh9OiAke2Vyci5tZXNzYWdlIHx8IGVycn1gLFxuICAgICAgICAgICAgJ0lOVkFMSURfQkFUQ0hfT1BFUkFUSU9OJyxcbiAgICAgICAgICAgICdiYXRjaC1vcGVyYXRpb25zJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvZmlsZS9iYXRjaCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEJhdGNoIG9wZXJhdGlvbnMgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnQkFUQ0hfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhdGNoLW9wZXJhdGlvbnMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgcmVzdWx0Lm1lc3NhZ2UgfHwgJ0JhdGNoIG9wZXJhdGlvbnMgZmFpbGVkJyxcbiAgICAgICAgICAnQkFUQ0hfT1BFUkFUSU9OX0ZBSUxFRCcsXG4gICAgICAgICAgJ2JhdGNoLW9wZXJhdGlvbnMnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdiYXRjaC1vcGVyYXRpb25zJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoIHZhdWx0IHdpdGggQUktcG93ZXJlZCBpbnNpZ2h0c1xuICAgKi9cbiAgYXN5bmMgc2VhcmNoVmF1bHQocmVxdWVzdDogVmF1bHRTZWFyY2hSZXF1ZXN0KTogUHJvbWlzZTxWYXVsdFNlYXJjaFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcmVxdWVzdC5xdWVyeSB8fCByZXF1ZXN0LnF1ZXJ5LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdTZWFyY2ggcXVlcnkgY2Fubm90IGJlIGVtcHR5JyxcbiAgICAgICAgICAnSU5WQUxJRF9TRUFSQ0hfUVVFUlknLFxuICAgICAgICAgICdzZWFyY2gnXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi92YXVsdC9zZWFyY2gnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgIGBTZWFyY2ggZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcbiAgICAgICAgICAnU0VBUkNIX0ZBSUxFRCcsXG4gICAgICAgICAgJ3NlYXJjaCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5oYW5kbGVWYXVsdE1hbmFnZW1lbnRFcnJvcihlcnJvciwgJ3NlYXJjaCcpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBBSS1wb3dlcmVkIHZhdWx0IG9yZ2FuaXphdGlvbiBzdWdnZXN0aW9uc1xuICAgKi9cbiAgYXN5bmMgb3JnYW5pemVWYXVsdChyZXF1ZXN0OiBWYXVsdE9yZ2FuaXphdGlvblJlcXVlc3QpOiBQcm9taXNlPFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L29yZ2FuaXplJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBWYXVsdE1hbmFnZW1lbnRFcnJvcihcbiAgICAgICAgICBgT3JnYW5pemF0aW9uIGFuYWx5c2lzIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWAsXG4gICAgICAgICAgJ09SR0FOSVpBVElPTl9GQUlMRUQnLFxuICAgICAgICAgICdvcmdhbml6YXRpb24nXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IoZXJyb3IsICdvcmdhbml6YXRpb24nKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgdmF1bHQgYmFja3VwXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdChyZXF1ZXN0OiBWYXVsdEJhY2t1cFJlcXVlc3QpOiBQcm9taXNlPFZhdWx0QmFja3VwUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L2JhY2t1cCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgYEJhY2t1cCBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuICAgICAgICAgICdCQUNLVVBfRkFJTEVEJyxcbiAgICAgICAgICAnYmFja3VwJ1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yLCAnYmFja3VwJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyA9PT0gQ09OVkVOSUVOQ0UgTUVUSE9EUyA9PT1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZpbGUgd2l0aCBjb250ZW50XG4gICAqL1xuICBhc3luYyBjcmVhdGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ2NyZWF0ZScsXG4gICAgICBmaWxlX3BhdGg6IGZpbGVQYXRoLFxuICAgICAgY29udGVudCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBleGlzdGluZyBmaWxlIGNvbnRlbnRcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBiYWNrdXA6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxGaWxlT3BlcmF0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wZXJmb3JtRmlsZU9wZXJhdGlvbih7XG4gICAgICBvcGVyYXRpb246ICd1cGRhdGUnLFxuICAgICAgZmlsZV9wYXRoOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBiYWNrdXBcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmaWxlXG4gICAqL1xuICBhc3luYyBkZWxldGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcsIGJhY2t1cDogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ2RlbGV0ZScsXG4gICAgICBmaWxlX3BhdGg6IGZpbGVQYXRoLFxuICAgICAgYmFja3VwXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTW92ZSBhIGZpbGUgdG8gbmV3IGxvY2F0aW9uXG4gICAqL1xuICBhc3luYyBtb3ZlRmlsZShmcm9tUGF0aDogc3RyaW5nLCB0b1BhdGg6IHN0cmluZywgYmFja3VwOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8RmlsZU9wZXJhdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucGVyZm9ybUZpbGVPcGVyYXRpb24oe1xuICAgICAgb3BlcmF0aW9uOiAnbW92ZScsXG4gICAgICBmaWxlX3BhdGg6IGZyb21QYXRoLFxuICAgICAgbmV3X3BhdGg6IHRvUGF0aCxcbiAgICAgIGJhY2t1cFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcHkgYSBmaWxlIHRvIG5ldyBsb2NhdGlvblxuICAgKi9cbiAgYXN5bmMgY29weUZpbGUoZnJvbVBhdGg6IHN0cmluZywgdG9QYXRoOiBzdHJpbmcpOiBQcm9taXNlPEZpbGVPcGVyYXRpb25SZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBlcmZvcm1GaWxlT3BlcmF0aW9uKHtcbiAgICAgIG9wZXJhdGlvbjogJ2NvcHknLFxuICAgICAgZmlsZV9wYXRoOiBmcm9tUGF0aCxcbiAgICAgIG5ld19wYXRoOiB0b1BhdGhcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWljayBzZWFyY2ggd2l0aCBkZWZhdWx0IHNldHRpbmdzXG4gICAqL1xuICBhc3luYyBxdWlja1NlYXJjaChxdWVyeTogc3RyaW5nLCBtYXhSZXN1bHRzOiBudW1iZXIgPSAyMCk6IFByb21pc2U8VmF1bHRTZWFyY2hSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnNlYXJjaFZhdWx0KHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgc2VhcmNoX3R5cGU6ICdjb21wcmVoZW5zaXZlJyxcbiAgICAgIG1heF9yZXN1bHRzOiBtYXhSZXN1bHRzLFxuICAgICAgaW5jbHVkZV9jb250ZW50OiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvLyA9PT0gSEVMUEVSIE1FVEhPRFMgPT09XG5cbiAgLyoqXG4gICAqIE1ha2UgYXV0aGVudGljYXRlZCByZXF1ZXN0IHRvIHRoZSBBUElcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3QoZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKX0ke2VuZHBvaW50fWA7XG4gICAgXG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi4oKG9wdGlvbnMuaGVhZGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSB8fCB7fSlcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuYXBpS2V5KSB7XG4gICAgICBoZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YDtcbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdEluaXQgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyc1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICBgTmV0d29yayByZXF1ZXN0IGZhaWxlZDogJHtlcnIubWVzc2FnZSB8fCBlcnJ9YCxcbiAgICAgICAgJ05FVFdPUktfRVJST1InLFxuICAgICAgICAnYXBpJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgZmlsZSBvcGVyYXRpb24gcmVxdWVzdFxuICAgKi9cbiAgcHJpdmF0ZSB2YWxpZGF0ZUZpbGVPcGVyYXRpb25SZXF1ZXN0KHJlcXVlc3Q6IEZpbGVPcGVyYXRpb25SZXF1ZXN0KTogdm9pZCB7XG4gICAgaWYgKCFyZXF1ZXN0LmZpbGVfcGF0aCB8fCByZXF1ZXN0LmZpbGVfcGF0aC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICdGaWxlIHBhdGggaXMgcmVxdWlyZWQnLFxuICAgICAgICAnSU5WQUxJRF9GSUxFX1BBVEgnLFxuICAgICAgICAndmFsaWRhdGlvbidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Qub3BlcmF0aW9uID09PSAnbW92ZScgfHwgcmVxdWVzdC5vcGVyYXRpb24gPT09ICdjb3B5Jykge1xuICAgICAgaWYgKCFyZXF1ZXN0Lm5ld19wYXRoIHx8IHJlcXVlc3QubmV3X3BhdGgudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVmF1bHRNYW5hZ2VtZW50RXJyb3IoXG4gICAgICAgICAgJ05ldyBwYXRoIGlzIHJlcXVpcmVkIGZvciBtb3ZlL2NvcHkgb3BlcmF0aW9ucycsXG4gICAgICAgICAgJ0lOVkFMSURfTkVXX1BBVEgnLFxuICAgICAgICAgICd2YWxpZGF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0Lm9wZXJhdGlvbiA9PT0gJ2NyZWF0ZScgfHwgcmVxdWVzdC5vcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICBpZiAocmVxdWVzdC5jb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhdWx0TWFuYWdlbWVudEVycm9yKFxuICAgICAgICAgICdDb250ZW50IGlzIHJlcXVpcmVkIGZvciBjcmVhdGUvdXBkYXRlIG9wZXJhdGlvbnMnLFxuICAgICAgICAgICdJTlZBTElEX0NPTlRFTlQnLFxuICAgICAgICAgICd2YWxpZGF0aW9uJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdmF1bHQgbWFuYWdlbWVudCBlcnJvcnMgd2l0aCB1c2VyIGZlZWRiYWNrXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVZhdWx0TWFuYWdlbWVudEVycm9yKGVycm9yOiBhbnksIGZlYXR1cmU6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnNvbGUuZXJyb3IoYFZhdWx0IG1hbmFnZW1lbnQgZXJyb3IgaW4gJHtmZWF0dXJlfTpgLCBlcnJvcik7XG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmF1bHRNYW5hZ2VtZW50RXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFZhdWx0ICR7ZmVhdHVyZX0gZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLCA1MDAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgJHtmZWF0dXJlfSBvcGVyYXRpb24gZmFpbGVkYCwgMzAwMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgY29ubmVjdGlvbiB0byB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50c1xuICAgKi9cbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRyeSBhIHNpbXBsZSB2YXVsdCBzdHJ1Y3R1cmUgcmVxdWVzdCB3aXRoIG1pbmltYWwgcGFyYW1ldGVyc1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3ZhdWx0L3N0cnVjdHVyZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaW5jbHVkZV9jb250ZW50OiBmYWxzZSwgbWF4X2RlcHRoOiAxIH0pXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdWYXVsdCBtYW5hZ2VtZW50IGNvbm5lY3Rpb24gc3VjY2Vzc2Z1bCcgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBtZXNzYWdlOiBgQ29ubmVjdGlvbiBmYWlsZWQ6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgbWVzc2FnZTogYENvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyLm1lc3NhZ2UgfHwgZXJyfWAgXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG4vLyA9PT0gVVRJTElUWSBGVU5DVElPTlMgPT09XG5cbi8qKlxuICogRm9ybWF0IGZpbGUgc2l6ZSBpbiBodW1hbiByZWFkYWJsZSBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEZpbGVTaXplKGJ5dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoYnl0ZXMgPT09IDApIHJldHVybiAnMCBCJztcbiAgXG4gIGNvbnN0IGsgPSAxMDI0O1xuICBjb25zdCBzaXplcyA9IFsnQicsICdLQicsICdNQicsICdHQiddO1xuICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XG4gIFxuICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgyKSkgKyAnICcgKyBzaXplc1tpXTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBmaWxlIHBhdGggZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkRmlsZVBhdGgocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmICghcGF0aCB8fCBwYXRoLnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGZvciBpbnZhbGlkIGNoYXJhY3RlcnNcbiAgY29uc3QgaW52YWxpZENoYXJzID0gL1s8PjpcInw/Kl0vO1xuICBpZiAoaW52YWxpZENoYXJzLnRlc3QocGF0aCkpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGZvciByZXNlcnZlZCBuYW1lcyBvbiBXaW5kb3dzXG4gIGNvbnN0IHJlc2VydmVkTmFtZXMgPSAvXihDT058UFJOfEFVWHxOVUx8Q09NWzEtOV18TFBUWzEtOV0pJC9pO1xuICBjb25zdCBmaWxlTmFtZSA9IHBhdGguc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcbiAgaWYgKHJlc2VydmVkTmFtZXMudGVzdChmaWxlTmFtZS5zcGxpdCgnLicpWzBdKSkgcmV0dXJuIGZhbHNlO1xuICBcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogU2FuaXRpemUgZmlsZSBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUZpbGVQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoXG4gICAgLnJlcGxhY2UoL1s8PjpcInw/Kl0vZywgJ18nKVxuICAgIC5yZXBsYWNlKC9cXFxcL2csICcvJylcbiAgICAucmVwbGFjZSgvXFwvKy9nLCAnLycpXG4gICAgLnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgRW52aXJvbm1lbnRJbmZvIHtcbiAgcGxhdGZvcm06ICdub2RlJyB8ICdicm93c2VyJyB8ICdvYnNpZGlhbicgfCAndW5rbm93bic7XG4gIGhhc0ZpbGVTeXN0ZW06IGJvb2xlYW47XG4gIGhhc1dlYlNvY2tldDogYm9vbGVhbjtcbiAgaGFzSFRUUDogYm9vbGVhbjtcbiAgY2FwYWJpbGl0aWVzOiBzdHJpbmdbXTtcbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBhcHA/OiBhbnk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEVudmlyb25tZW50RGV0ZWN0b3Ige1xuICBzdGF0aWMgZGV0ZWN0KCk6IEVudmlyb25tZW50SW5mbyB7XG4gICAgY29uc3QgaW5mbzogRW52aXJvbm1lbnRJbmZvID0ge1xuICAgICAgcGxhdGZvcm06ICd1bmtub3duJyxcbiAgICAgIGhhc0ZpbGVTeXN0ZW06IGZhbHNlLFxuICAgICAgaGFzV2ViU29ja2V0OiBmYWxzZSxcbiAgICAgIGhhc0hUVFA6IGZhbHNlLFxuICAgICAgY2FwYWJpbGl0aWVzOiBbXVxuICAgIH07XG5cbiAgICAvLyBEZXRlY3QgcGxhdGZvcm1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmFwcCAmJiB3aW5kb3cuYXBwLndvcmtzcGFjZSkge1xuICAgICAgaW5mby5wbGF0Zm9ybSA9ICdvYnNpZGlhbic7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaW5mby5wbGF0Zm9ybSA9ICdicm93c2VyJztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIChnbG9iYWxUaGlzIGFzIGFueSkucHJvY2Vzcy52ZXJzaW9ucyAmJiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnByb2Nlc3MudmVyc2lvbnMubm9kZSkge1xuICAgICAgaW5mby5wbGF0Zm9ybSA9ICdub2RlJztcbiAgICB9XG5cbiAgICAvLyBDaGVjayBjYXBhYmlsaXRpZXNcbiAgICBpbmZvLmhhc0hUVFAgPSB0eXBlb2YgZmV0Y2ggIT09ICd1bmRlZmluZWQnO1xuICAgIGluZm8uaGFzV2ViU29ja2V0ID0gdHlwZW9mIFdlYlNvY2tldCAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgaW5mby5oYXNGaWxlU3lzdGVtID0gdHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5mby5wbGF0Zm9ybSA9PT0gJ25vZGUnO1xuXG4gICAgLy8gQWRkIGNhcGFiaWxpdGllcyBsaXN0XG4gICAgaWYgKGluZm8uaGFzSFRUUCkgaW5mby5jYXBhYmlsaXRpZXMucHVzaCgnaHR0cCcpO1xuICAgIGlmIChpbmZvLmhhc1dlYlNvY2tldCkgaW5mby5jYXBhYmlsaXRpZXMucHVzaCgnd2Vic29ja2V0Jyk7XG4gICAgaWYgKGluZm8uaGFzRmlsZVN5c3RlbSkgaW5mby5jYXBhYmlsaXRpZXMucHVzaCgnZmlsZXN5c3RlbScpO1xuXG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBzdGF0aWMgaXNPYnNpZGlhbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXRlY3QoKS5wbGF0Zm9ybSA9PT0gJ29ic2lkaWFuJztcbiAgfVxuXG4gIHN0YXRpYyBjYW5Vc2VGaWxlU3lzdGVtKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmRldGVjdCgpLmhhc0ZpbGVTeXN0ZW07XG4gIH1cblxuICBzdGF0aWMgY2FuVXNlV2ViU29ja2V0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmRldGVjdCgpLmhhc1dlYlNvY2tldDtcbiAgfVxuXG4gIHN0YXRpYyBnZXRPcHRpbWFsVHJhbnNwb3J0KCk6ICdodHRwJyB8ICd3ZWJzb2NrZXQnIHwgJ2ZpbGVzeXN0ZW0nIHtcbiAgICBjb25zdCBlbnYgPSB0aGlzLmRldGVjdCgpO1xuICAgIFxuICAgIGlmIChlbnYuaGFzV2ViU29ja2V0KSByZXR1cm4gJ3dlYnNvY2tldCc7XG4gICAgaWYgKGVudi5oYXNIVFRQKSByZXR1cm4gJ2h0dHAnO1xuICAgIGlmIChlbnYuaGFzRmlsZVN5c3RlbSkgcmV0dXJuICdmaWxlc3lzdGVtJztcbiAgICBcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1aXRhYmxlIHRyYW5zcG9ydCBhdmFpbGFibGUnKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGV2UGlwZU1lc3NhZ2UsIERldlBpcGVNZXNzYWdlVHlwZSwgTW9kZWxTZWxlY3Rpb25Db25maWcgfSBmcm9tICcuLi90eXBlcy9Nb2RlbFNlbGVjdGlvbic7XG5pbXBvcnQgeyBFbnZpcm9ubWVudERldGVjdG9yLCBFbnZpcm9ubWVudEluZm8gfSBmcm9tICcuLi91dGlscy9FbnZpcm9ubWVudERldGVjdG9yJztcblxuaW50ZXJmYWNlIEV2ZW50TGlzdGVuZXIge1xuICAoZGF0YTogYW55KTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIERldlBpcGVDbGllbnQge1xuICBwcml2YXRlIHNlcnZlclVybDogc3RyaW5nO1xuICBwcml2YXRlIGlzQ29ubmVjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgbWVzc2FnZUlkOiBudW1iZXIgPSAxO1xuICBwcml2YXRlIHBlbmRpbmdSZXF1ZXN0czogTWFwPHN0cmluZywgeyByZXNvbHZlOiBGdW5jdGlvbjsgcmVqZWN0OiBGdW5jdGlvbjsgdGltZW91dDogbnVtYmVyIH0+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGNvbmZpZzogTW9kZWxTZWxlY3Rpb25Db25maWc7XG4gIHByaXZhdGUgZXZlbnRMaXN0ZW5lcnM6IE1hcDxzdHJpbmcsIEV2ZW50TGlzdGVuZXJbXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZW52aXJvbm1lbnQ6IEVudmlyb25tZW50SW5mbzsgIC8vIEFkZCBlbnZpcm9ubWVudCBwcm9wZXJ0eVxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTW9kZWxTZWxlY3Rpb25Db25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmVudmlyb25tZW50ID0gRW52aXJvbm1lbnREZXRlY3Rvci5kZXRlY3QoKTsgIC8vIEluaXRpYWxpemUgZW52aXJvbm1lbnRcbiAgICB0aGlzLnNlcnZlclVybCA9IGNvbmZpZy5zZXJ2ZXJfdXJsO1xuICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGV2UGlwZSBFbnZpcm9ubWVudDonLCB0aGlzLmVudmlyb25tZW50KTtcbiAgICB9XG4gIH1cblxuICAvLyBFdmVudCBzeXN0ZW0gaW1wbGVtZW50YXRpb25cbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRMaXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xuICAgICAgdGhpcy5ldmVudExpc3RlbmVycy5zZXQoZXZlbnQsIFtdKTtcbiAgICB9XG4gICAgdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpIS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIG9mZihldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcik6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudCk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoZGF0YSkpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIGVudmlyb25tZW50IGNvbXBhdGliaWxpdHlcbiAgICAgIGlmICghdGhpcy5lbnZpcm9ubWVudC5oYXNIVFRQKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSFRUUCB0cmFuc3BvcnQgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRlc3QgY29ubmVjdGlvbiB3aXRoIGVudmlyb25tZW50LXNwZWNpZmljIG1ldGhvZFxuICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgXG4gICAgICB0aGlzLmlzQ29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJywgeyBcbiAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuZW52aXJvbm1lbnQucGxhdGZvcm0sXG4gICAgICAgIHRyYW5zcG9ydDogJ2h0dHAnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0RldlBpcGUgY2xpZW50IGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBEZXZQaXBlIGNsaWVudDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2VydmVyVXJsfS9hcGkvdjEvZGV2cGlwZS9oZWFsdGhgLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoNTAwMCkgLy8gNSBzZWNvbmQgdGltZW91dFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEZXZQaXBlIHNlcnZlciBub3QgYWNjZXNzaWJsZTogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gVHJ5IGFsdGVybmF0aXZlIGhlYWx0aCBjaGVjayBlbmRwb2ludHNcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdUeXBlRXJyb3InICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpKSB7XG4gICAgICAgIC8vIFRyeSB0aGUgbWFpbiBiYWNrZW5kIGhlYWx0aCBlbmRwb2ludCBhcyBmYWxsYmFja1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLnNlcnZlclVybH0vc3RhdHVzYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDMwMDApXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIC8vIEJhY2tlbmQgaXMgcnVubmluZyBidXQgRGV2UGlwZSBlbmRwb2ludCBtaWdodCBub3QgYmUgYXZhaWxhYmxlXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RldlBpcGUgZW5kcG9pbnQgbm90IGF2YWlsYWJsZSwgYnV0IGJhY2tlbmQgaXMgYWNjZXNzaWJsZScpO1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBBbGxvdyBpbml0aWFsaXphdGlvbiB0byBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgICAgIC8vIEJvdGggZW5kcG9pbnRzIGZhaWxlZFxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGV2UGlwZSBzZXJ2ZXIgbm90IGFjY2Vzc2libGUgYW5kIGZhbGxiYWNrIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZW5kTWVzc2FnZTxUPih0eXBlOiBEZXZQaXBlTWVzc2FnZVR5cGUsIHBheWxvYWQ6IGFueSwgdGltZW91dDogbnVtYmVyID0gMzAwMDApOiBQcm9taXNlPFQ+IHtcbiAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGV2UGlwZSBjbGllbnQgbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKTtcbiAgICBjb25zdCBtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSA9IHtcbiAgICAgIGlkOiBtZXNzYWdlSWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHR5cGUsXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2VuZGVyOiAndmF1bHRwaWxvdC1wbHVnaW4nLFxuICAgICAgcmVjaXBpZW50OiAnZXZvYWdlbnR4LWJhY2tlbmQnLFxuICAgICAgcHJpb3JpdHk6ICdub3JtYWwnXG4gICAgfTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZUlkKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGltZW91dH1tc2ApKTtcbiAgICAgIH0sIHRpbWVvdXQpO1xuXG4gICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5zZXQobWVzc2FnZUlkLCB7XG4gICAgICAgIHJlc29sdmUsXG4gICAgICAgIHJlamVjdCxcbiAgICAgICAgdGltZW91dDogdGltZW91dEhhbmRsZVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2VuZE1lc3NhZ2VUb1NlcnZlcihtZXNzYWdlKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShtZXNzYWdlSWQpO1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRNZXNzYWdlVG9TZXJ2ZXIobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuc2VydmVyVXJsfS9hcGkvdjEvZGV2cGlwZS9tZXNzYWdlYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERldlBpcGUgc2VydmVyIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgaW1tZWRpYXRlIHJlc3BvbnNlXG4gICAgICBpZiAocmVzdWx0LnJlc3BvbnNlICYmIHJlc3VsdC5yZXNwb25zZS5pZCA9PT0gbWVzc2FnZS5pZCkge1xuICAgICAgICBjb25zdCBwZW5kaW5nUmVxdWVzdCA9IHRoaXMucGVuZGluZ1JlcXVlc3RzLmdldChtZXNzYWdlLmlkKTtcbiAgICAgICAgaWYgKHBlbmRpbmdSZXF1ZXN0KSB7XG4gICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChwZW5kaW5nUmVxdWVzdC50aW1lb3V0KTtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZS5pZCk7XG4gICAgICAgICAgcGVuZGluZ1JlcXVlc3QucmVzb2x2ZShyZXN1bHQucmVzcG9uc2UucGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0RldlBpcGUgbWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseTonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIERldlBpcGUgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlTWVzc2FnZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBtc2dfJHtEYXRlLm5vdygpfV8ke3RoaXMubWVzc2FnZUlkKyt9YDtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUmVqZWN0IGFsbCBwZW5kaW5nIHJlcXVlc3RzXG4gICAgY29uc3QgcGVuZGluZ0VudHJpZXMgPSBBcnJheS5mcm9tKHRoaXMucGVuZGluZ1JlcXVlc3RzLmVudHJpZXMoKSk7XG4gICAgZm9yIChjb25zdCBbaWQsIHJlcXVlc3RdIG9mIHBlbmRpbmdFbnRyaWVzKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHJlcXVlc3QudGltZW91dCk7XG4gICAgICByZXF1ZXN0LnJlamVjdChuZXcgRXJyb3IoJ0RldlBpcGUgY2xpZW50IGRpc2Nvbm5lY3RlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuY2xlYXIoKTtcblxuICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcsIHsgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyB9KTtcbiAgfVxuXG4gIGlzUmVhZHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNDb25uZWN0ZWQ7XG4gIH1cblxuICBnZXRQZW5kaW5nUmVxdWVzdENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucGVuZGluZ1JlcXVlc3RzLnNpemU7XG4gIH1cbn1cbiIsIi8vIE1vZGVsIFNlbGVjdGlvbiBUeXBlcyBmb3IgRGV2UGlwZSBGcmFtZXdvcmsgSW50ZWdyYXRpb25cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbFNlbGVjdGlvblJlcXVlc3Qge1xuICB0YXNrX3R5cGU6IFRhc2tUeXBlO1xuICBxdWFsaXR5X3JlcXVpcmVtZW50PzogUXVhbGl0eVJlcXVpcmVtZW50O1xuICBtYXhfY29zdD86IG51bWJlcjtcbiAgY29udGV4dF9sZW5ndGg/OiBudW1iZXI7XG4gIHByZWZlcnJlZF9wcm92aWRlcnM/OiBzdHJpbmdbXTtcbiAgdGltZW91dF9tcz86IG51bWJlcjtcbiAgdXNlcl9wcmVmZXJlbmNlcz86IFVzZXJQcmVmZXJlbmNlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbFNlbGVjdGlvblJlc3BvbnNlIHtcbiAgc2VsZWN0ZWRfbW9kZWw6IE1vZGVsSW5mbztcbiAgcmVhc29uaW5nOiBzdHJpbmc7XG4gIGZhbGxiYWNrX21vZGVsczogTW9kZWxJbmZvW107XG4gIGVzdGltYXRlZF9jb3N0OiBudW1iZXI7XG4gIGVzdGltYXRlZF90aW1lX21zOiBudW1iZXI7XG4gIHNlbGVjdGlvbl9tZXRhZGF0YToge1xuICAgIHNlbGVjdGlvbl90aW1lX21zOiBudW1iZXI7XG4gICAgZmFjdG9yc19jb25zaWRlcmVkOiBzdHJpbmdbXTtcbiAgICBjb25maWRlbmNlX3Njb3JlOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxJbmZvIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm92aWRlcjogc3RyaW5nO1xuICBjYXBhYmlsaXRpZXM6IE1vZGVsQ2FwYWJpbGl0eVtdO1xuICBjb3N0X3Blcl90b2tlbjogbnVtYmVyO1xuICBtYXhfdG9rZW5zOiBudW1iZXI7XG4gIHJlc3BvbnNlX3RpbWVfYXZnX21zOiBudW1iZXI7XG4gIGF2YWlsYWJpbGl0eV9zY29yZTogbnVtYmVyO1xuICBxdWFsaXR5X3Njb3JlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxDYXBhYmlsaXR5IHtcbiAgdHlwZTogVGFza1R5cGU7XG4gIHNjb3JlOiBudW1iZXI7XG4gIHNwZWNpYWxpemF0aW9ucz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsSGVhbHRoU3RhdHVzIHtcbiAgbW9kZWxfaWQ6IHN0cmluZztcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ29mZmxpbmUnO1xuICByZXNwb25zZV90aW1lOiBudW1iZXI7XG4gIGVycm9yX3JhdGU6IG51bWJlcjtcbiAgbGFzdF9jaGVjazogc3RyaW5nO1xuICBhdmFpbGFiaWxpdHlfcGVyY2VudGFnZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJQcmVmZXJlbmNlcyB7XG4gIHByaW9yaXR5OiAncGVyZm9ybWFuY2UnIHwgJ2Nvc3QnIHwgJ2JhbGFuY2VkJztcbiAgbWF4X2Nvc3RfcGVyX3JlcXVlc3Q6IG51bWJlcjtcbiAgcHJlZmVycmVkX3Byb3ZpZGVyczogc3RyaW5nW107XG4gIGZhbGxiYWNrX2VuYWJsZWQ6IGJvb2xlYW47XG4gIHF1YWxpdHlfdGhyZXNob2xkOiBudW1iZXI7XG4gIHRpbWVvdXRfcHJlZmVyZW5jZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgbW9kZWxfaWQ6IHN0cmluZztcbiAgdGFza190eXBlOiBUYXNrVHlwZTtcbiAgc3VjY2Vzc19yYXRlOiBudW1iZXI7XG4gIGF2ZXJhZ2VfcmVzcG9uc2VfdGltZTogbnVtYmVyO1xuICBhdmVyYWdlX2Nvc3Q6IG51bWJlcjtcbiAgdXNlcl9zYXRpc2ZhY3Rpb25fc2NvcmU6IG51bWJlcjtcbiAgbGFzdF91cGRhdGVkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFRhc2tUeXBlID0gXG4gIHwgJ3RleHQtZ2VuZXJhdGlvbidcbiAgfCAnY29kZS1nZW5lcmF0aW9uJ1xuICB8ICdjaGF0J1xuICB8ICdzdW1tYXJpemF0aW9uJ1xuICB8ICd0cmFuc2xhdGlvbidcbiAgfCAnZW1iZWRkaW5nJ1xuICB8ICdlZGl0aW5nJ1xuICB8ICdhbmFseXNpcydcbiAgfCAncGxhbm5pbmcnXG4gIHwgJ3dvcmtmbG93LWV4ZWN1dGlvbic7XG5cbmV4cG9ydCB0eXBlIFF1YWxpdHlSZXF1aXJlbWVudCA9ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGV2UGlwZU1lc3NhZ2Uge1xuICBpZDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IHN0cmluZztcbiAgdHlwZTogRGV2UGlwZU1lc3NhZ2VUeXBlO1xuICBwYXlsb2FkOiBhbnk7XG4gIHNlbmRlcjogc3RyaW5nO1xuICByZWNpcGllbnQ6IHN0cmluZztcbiAgcHJpb3JpdHk6ICdsb3cnIHwgJ25vcm1hbCcgfCAnaGlnaCcgfCAnY3JpdGljYWwnO1xuICBleHBpcmVzX2F0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBEZXZQaXBlTWVzc2FnZVR5cGUgPSBcbiAgfCAnbW9kZWwtc2VsZWN0aW9uLXJlcXVlc3QnXG4gIHwgJ21vZGVsLXNlbGVjdGlvbi1yZXNwb25zZSdcbiAgfCAnaGVhbHRoLWNoZWNrLXJlcXVlc3QnXG4gIHwgJ2hlYWx0aC1jaGVjay1yZXNwb25zZSdcbiAgfCAncGVyZm9ybWFuY2UtbWV0cmljcy1yZXF1ZXN0J1xuICB8ICdwZXJmb3JtYW5jZS1tZXRyaWNzLXJlc3BvbnNlJ1xuICB8ICdwcmVmZXJlbmNlcy11cGRhdGUnXG4gIHwgJ3N0YXR1cy11cGRhdGUnXG4gIHwgJ2Vycm9yLXJlcG9ydCc7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbFNlbGVjdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgY29kZTogJ05PX0hFQUxUSFlfTU9ERUxTJyB8ICdCVURHRVRfRVhDRUVERUQnIHwgJ1RJTUVPVVQnIHwgJ0lOVkFMSURfUkVRVUVTVCcgfCAnU0VSVklDRV9VTkFWQUlMQUJMRSc7XG4gIHB1YmxpYyBkZXRhaWxzPzogYW55O1xuICBwdWJsaWMgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb2RlOiAnTk9fSEVBTFRIWV9NT0RFTFMnIHwgJ0JVREdFVF9FWENFRURFRCcgfCAnVElNRU9VVCcgfCAnSU5WQUxJRF9SRVFVRVNUJyB8ICdTRVJWSUNFX1VOQVZBSUxBQkxFJyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgZGV0YWlscz86IGFueSxcbiAgICBzdWdnZXN0aW9ucz86IHN0cmluZ1tdXG4gICkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdNb2RlbFNlbGVjdGlvbkVycm9yJztcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHN1Z2dlc3Rpb25zO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxTZWxlY3Rpb25FdmVudCB7XG4gIHR5cGU6ICdtb2RlbC1zZWxlY3RlZCcgfCAnaGVhbHRoLXVwZGF0ZWQnIHwgJ3BlcmZvcm1hbmNlLW1ldHJpY3MnIHwgJ3ByZWZlcmVuY2VzLXVwZGF0ZWQnIHwgJ2Nvbm5lY3RlZCcgfCAnZGlzY29ubmVjdGVkJztcbiAgZGF0YTogYW55O1xuICB0aW1lc3RhbXA6IHN0cmluZztcbn1cblxuLy8gQ29uZmlndXJhdGlvbiB0eXBlc1xuZXhwb3J0IGludGVyZmFjZSBNb2RlbFNlbGVjdGlvbkNvbmZpZyB7XG4gIGRldnBpcGVfcGF0aDogc3RyaW5nO1xuICBzZXJ2ZXJfdXJsOiBzdHJpbmc7XG4gIG1vbml0b3JpbmdfaW50ZXJ2YWw6IG51bWJlcjtcbiAgZmFsbGJhY2tfZW5hYmxlZDogYm9vbGVhbjtcbiAgY2FjaGVfZHVyYXRpb246IG51bWJlcjtcbiAgcmV0cnlfYXR0ZW1wdHM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBkZWJ1Z19tb2RlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsUHJvdmlkZXJDb25maWcge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVuYWJsZWQ6IGJvb2xlYW47XG4gIGFwaV9rZXk/OiBzdHJpbmc7XG4gIGJhc2VfdXJsPzogc3RyaW5nO1xuICBtYXhfdG9rZW5zPzogbnVtYmVyO1xuICBkZWZhdWx0X3RlbXBlcmF0dXJlPzogbnVtYmVyO1xuICBjdXN0b21fc2V0dGluZ3M/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuIiwiaW1wb3J0IHsgRGV2UGlwZUNsaWVudCB9IGZyb20gJy4uL2RldnBpcGUvRGV2UGlwZUNsaWVudCc7XG5pbXBvcnQgeyBcbiAgTW9kZWxTZWxlY3Rpb25SZXF1ZXN0LCBcbiAgTW9kZWxTZWxlY3Rpb25SZXNwb25zZSwgXG4gIE1vZGVsSGVhbHRoU3RhdHVzLCBcbiAgVXNlclByZWZlcmVuY2VzLCBcbiAgTW9kZWxQZXJmb3JtYW5jZU1ldHJpY3MsXG4gIE1vZGVsU2VsZWN0aW9uQ29uZmlnLFxuICBNb2RlbFNlbGVjdGlvbkVycm9yLFxuICBNb2RlbFNlbGVjdGlvbkV2ZW50IFxufSBmcm9tICcuLi90eXBlcy9Nb2RlbFNlbGVjdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbFNlbGVjdGlvblNlcnZpY2Uge1xuICBwcml2YXRlIGRldlBpcGVDbGllbnQ6IERldlBpcGVDbGllbnQ7XG4gIHByaXZhdGUgY29uZmlnOiBNb2RlbFNlbGVjdGlvbkNvbmZpZztcbiAgcHJpdmF0ZSB1c2VyUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlcztcbiAgcHJpdmF0ZSBjYWNoZWRIZWFsdGg6IE1vZGVsSGVhbHRoU3RhdHVzW10gPSBbXTtcbiAgcHJpdmF0ZSBsYXN0SGVhbHRoVXBkYXRlOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihzZXJ2ZXJVcmw6IHN0cmluZywgZGV2UGlwZVBhdGg6IHN0cmluZyA9ICcnLCBvcHRpb25zOiBQYXJ0aWFsPE1vZGVsU2VsZWN0aW9uQ29uZmlnPiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBkZXZwaXBlX3BhdGg6IGRldlBpcGVQYXRoLFxuICAgICAgc2VydmVyX3VybDogc2VydmVyVXJsLFxuICAgICAgbW9uaXRvcmluZ19pbnRlcnZhbDogb3B0aW9ucy5tb25pdG9yaW5nX2ludGVydmFsIHx8IDMwMDAwLFxuICAgICAgZmFsbGJhY2tfZW5hYmxlZDogb3B0aW9ucy5mYWxsYmFja19lbmFibGVkICE9PSBmYWxzZSxcbiAgICAgIGNhY2hlX2R1cmF0aW9uOiBvcHRpb25zLmNhY2hlX2R1cmF0aW9uIHx8IDMwMDAwMCwgLy8gNSBtaW51dGVzXG4gICAgICByZXRyeV9hdHRlbXB0czogb3B0aW9ucy5yZXRyeV9hdHRlbXB0cyB8fCAzLFxuICAgICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0IHx8IDMwMDAwLFxuICAgICAgZGVidWdfbW9kZTogb3B0aW9ucy5kZWJ1Z19tb2RlIHx8IGZhbHNlXG4gICAgfTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudCA9IG5ldyBEZXZQaXBlQ2xpZW50KHRoaXMuY29uZmlnKTtcbiAgICBcbiAgICAvLyBEZWZhdWx0IHVzZXIgcHJlZmVyZW5jZXNcbiAgICB0aGlzLnVzZXJQcmVmZXJlbmNlcyA9IHtcbiAgICAgIHByaW9yaXR5OiAnYmFsYW5jZWQnLFxuICAgICAgbWF4X2Nvc3RfcGVyX3JlcXVlc3Q6IDAuNTAsXG4gICAgICBwcmVmZXJyZWRfcHJvdmlkZXJzOiBbXSxcbiAgICAgIGZhbGxiYWNrX2VuYWJsZWQ6IHRydWUsXG4gICAgICBxdWFsaXR5X3RocmVzaG9sZDogMC43LFxuICAgICAgdGltZW91dF9wcmVmZXJlbmNlOiAzMDAwMFxuICAgIH07XG5cbiAgICB0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgICB0aGlzLmRldlBpcGVDbGllbnQub24oJ2Nvbm5lY3RlZCcsICgpID0+IHtcbiAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJywgeyBzdGF0dXM6ICdjb25uZWN0ZWQnIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kZXZQaXBlQ2xpZW50Lm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcsIHsgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudC5vbignaGVhbHRoLXVwZGF0ZWQnLCAoaGVhbHRoRGF0YTogTW9kZWxIZWFsdGhTdGF0dXNbXSkgPT4ge1xuICAgICAgdGhpcy5jYWNoZWRIZWFsdGggPSBoZWFsdGhEYXRhO1xuICAgICAgdGhpcy5sYXN0SGVhbHRoVXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMuZW1pdCgnaGVhbHRoLXVwZGF0ZWQnLCBoZWFsdGhEYXRhKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZGV2UGlwZUNsaWVudC5vbigncGVyZm9ybWFuY2UtbWV0cmljcycsIChtZXRyaWNzOiBNb2RlbFBlcmZvcm1hbmNlTWV0cmljc1tdKSA9PiB7XG4gICAgICB0aGlzLmVtaXQoJ3BlcmZvcm1hbmNlLW1ldHJpY3MnLCBtZXRyaWNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5pbml0aWFsaXplKCk7XG4gICAgICBcbiAgICAgIC8vIExvYWQgaW5pdGlhbCBoZWFsdGggc3RhdHVzXG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2hNb2RlbEhlYWx0aCgpO1xuICAgICAgXG4gICAgICAvLyBTdGFydCBoZWFsdGggbW9uaXRvcmluZ1xuICAgICAgdGhpcy5zdGFydEhlYWx0aE1vbml0b3JpbmcoKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsU2VsZWN0aW9uU2VydmljZSBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNb2RlbFNlbGVjdGlvblNlcnZpY2U6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2VsZWN0TW9kZWwocmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0KTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBlcmZvcm1TZWxlY3Rpb24ocmVxdWVzdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5mYWxsYmFja19lbmFibGVkKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZhbGxiYWNrU2VsZWN0aW9uKHJlcXVlc3QsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybVNlbGVjdGlvbihyZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QpOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICBpZiAoIXRoaXMuZGV2UGlwZUNsaWVudC5pc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdOT19IRUFMVEhZX01PREVMUycsICdEZXZQaXBlIGNsaWVudCBub3QgY29ubmVjdGVkJywge30sIFsnQ2hlY2sgc2VydmVyIGNvbm5lY3Rpb24nLCAnUmV0cnkgaW5pdGlhbGl6YXRpb24nXSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHVzZXIgcHJlZmVyZW5jZXMgdG8gcmVxdWVzdFxuICAgIGNvbnN0IGVuaGFuY2VkUmVxdWVzdCA9IHtcbiAgICAgIC4uLnJlcXVlc3QsXG4gICAgICB1c2VyX3ByZWZlcmVuY2VzOiB0aGlzLnVzZXJQcmVmZXJlbmNlcyxcbiAgICAgIHRpbWVvdXRfbXM6IHJlcXVlc3QudGltZW91dF9tcyB8fCB0aGlzLmNvbmZpZy50aW1lb3V0XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5kZXZQaXBlQ2xpZW50LnNlbmRNZXNzYWdlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+KFxuICAgICAgJ21vZGVsLXNlbGVjdGlvbi1yZXF1ZXN0JyxcbiAgICAgIGVuaGFuY2VkUmVxdWVzdCxcbiAgICAgIHRoaXMuY29uZmlnLnRpbWVvdXRcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmYWxsYmFja1NlbGVjdGlvbihcbiAgICByZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QsIFxuICAgIG9yaWdpbmFsRXJyb3I6IGFueVxuICApOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICBjb25zb2xlLndhcm4oJ01vZGVsIHNlbGVjdGlvbiBmYWlsZWQsIHVzaW5nIGZhbGxiYWNrOicsIG9yaWdpbmFsRXJyb3IpO1xuXG4gICAgLy8gVHJ5IGNhY2hlZCBzZWxlY3Rpb24gZmlyc3RcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmdldENhY2hlZFNlbGVjdGlvbihyZXF1ZXN0KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXR1cm4gY2FjaGVkO1xuICAgIH1cblxuICAgIC8vIFVzZSBzdGF0aWMgcnVsZXMgYXMgbGFzdCByZXNvcnRcbiAgICByZXR1cm4gdGhpcy5zdGF0aWNNb2RlbFNlbGVjdGlvbihyZXF1ZXN0KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljTW9kZWxTZWxlY3Rpb24ocmVxdWVzdDogTW9kZWxTZWxlY3Rpb25SZXF1ZXN0KTogTW9kZWxTZWxlY3Rpb25SZXNwb25zZSB7XG4gICAgLy8gU2ltcGxlIHN0YXRpYyBydWxlcyBmb3IgZmFsbGJhY2tcbiAgICBjb25zdCBkZWZhdWx0TW9kZWxzOiB7IFtrZXk6IHN0cmluZ106IHsgbmFtZTogc3RyaW5nOyBjb3N0OiBudW1iZXIgfSB9ID0ge1xuICAgICAgJ3RleHQtZ2VuZXJhdGlvbic6IHsgbmFtZTogJ2dwdC0zLjUtdHVyYm8nLCBjb3N0OiAwLjAwMiB9LFxuICAgICAgJ2NvZGUtZ2VuZXJhdGlvbic6IHsgbmFtZTogJ2dwdC00JywgY29zdDogMC4wMyB9LFxuICAgICAgJ2NoYXQnOiB7IG5hbWU6ICdncHQtMy41LXR1cmJvJywgY29zdDogMC4wMDIgfSxcbiAgICAgICdzdW1tYXJpemF0aW9uJzogeyBuYW1lOiAnZ3B0LTMuNS10dXJibycsIGNvc3Q6IDAuMDAyIH0sXG4gICAgICAndHJhbnNsYXRpb24nOiB7IG5hbWU6ICdncHQtMy41LXR1cmJvJywgY29zdDogMC4wMDIgfVxuICAgIH07XG5cbiAgICBjb25zdCBkZWZhdWx0TW9kZWwgPSBkZWZhdWx0TW9kZWxzW3JlcXVlc3QudGFza190eXBlXSB8fCBkZWZhdWx0TW9kZWxzWyd0ZXh0LWdlbmVyYXRpb24nXTtcblxuICAgIHJldHVybiB7XG4gICAgICBzZWxlY3RlZF9tb2RlbDoge1xuICAgICAgICBpZDogZGVmYXVsdE1vZGVsLm5hbWUsXG4gICAgICAgIG5hbWU6IGRlZmF1bHRNb2RlbC5uYW1lLFxuICAgICAgICBwcm92aWRlcjogJ29wZW5haScsXG4gICAgICAgIGNhcGFiaWxpdGllczogW3sgdHlwZTogcmVxdWVzdC50YXNrX3R5cGUsIHNjb3JlOiAwLjggfV0sXG4gICAgICAgIGNvc3RfcGVyX3Rva2VuOiBkZWZhdWx0TW9kZWwuY29zdCxcbiAgICAgICAgbWF4X3Rva2VuczogNDAwMCxcbiAgICAgICAgcmVzcG9uc2VfdGltZV9hdmdfbXM6IDIwMDAsXG4gICAgICAgIGF2YWlsYWJpbGl0eV9zY29yZTogMC45LFxuICAgICAgICBxdWFsaXR5X3Njb3JlOiAwLjhcbiAgICAgIH0sXG4gICAgICByZWFzb25pbmc6ICdGYWxsYmFjayBzZWxlY3Rpb24gZHVlIHRvIHNlcnZpY2UgdW5hdmFpbGFiaWxpdHknLFxuICAgICAgZmFsbGJhY2tfbW9kZWxzOiBbXSxcbiAgICAgIGVzdGltYXRlZF9jb3N0OiBkZWZhdWx0TW9kZWwuY29zdCAqIDEwMCwgLy8gRXN0aW1hdGUgZm9yIDEwMCB0b2tlbnNcbiAgICAgIGVzdGltYXRlZF90aW1lX21zOiAyMDAwLFxuICAgICAgc2VsZWN0aW9uX21ldGFkYXRhOiB7XG4gICAgICAgIHNlbGVjdGlvbl90aW1lX21zOiAwLFxuICAgICAgICBmYWN0b3JzX2NvbnNpZGVyZWQ6IFsnZmFsbGJhY2snXSxcbiAgICAgICAgY29uZmlkZW5jZV9zY29yZTogMC41XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q2FjaGVkU2VsZWN0aW9uKHJlcXVlc3Q6IE1vZGVsU2VsZWN0aW9uUmVxdWVzdCk6IE1vZGVsU2VsZWN0aW9uUmVzcG9uc2UgfCBudWxsIHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBjYWNoZSBsb29rdXBcbiAgICAvLyBGb3Igbm93LCByZXR1cm4gbnVsbCAobm8gY2FjaGUpXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBPcmlnaW5hbCBzZWxlY3RNb2RlbCBtZXRob2QgcmVuYW1lZCB0byBwZXJmb3JtU2VsZWN0aW9uIChzZWUgYWJvdmUpXG4gIGFzeW5jIHNlbGVjdE1vZGVsX09MRChyZXF1ZXN0OiBNb2RlbFNlbGVjdGlvblJlcXVlc3QpOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICBpZiAoIXRoaXMuZGV2UGlwZUNsaWVudC5pc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdOT19IRUFMVEhZX01PREVMUycsICdEZXZQaXBlIGNsaWVudCBub3QgY29ubmVjdGVkJywge30sIFsnQ2hlY2sgc2VydmVyIGNvbm5lY3Rpb24nLCAnUmV0cnkgaW5pdGlhbGl6YXRpb24nXSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEFkZCB1c2VyIHByZWZlcmVuY2VzIHRvIHJlcXVlc3RcbiAgICAgIGNvbnN0IGVuaGFuY2VkUmVxdWVzdCA9IHtcbiAgICAgICAgLi4ucmVxdWVzdCxcbiAgICAgICAgdXNlcl9wcmVmZXJlbmNlczogdGhpcy51c2VyUHJlZmVyZW5jZXMsXG4gICAgICAgIHRpbWVvdXRfbXM6IHJlcXVlc3QudGltZW91dF9tcyB8fCB0aGlzLmNvbmZpZy50aW1lb3V0XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5zZW5kTWVzc2FnZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPihcbiAgICAgICAgJ21vZGVsLXNlbGVjdGlvbi1yZXF1ZXN0JyxcbiAgICAgICAgZW5oYW5jZWRSZXF1ZXN0LFxuICAgICAgICByZXF1ZXN0LnRpbWVvdXRfbXMgfHwgdGhpcy5jb25maWcudGltZW91dFxuICAgICAgKTtcblxuICAgICAgLy8gRW1pdCBzZWxlY3Rpb24gZXZlbnRcbiAgICAgIHRoaXMuZW1pdCgnbW9kZWwtc2VsZWN0ZWQnLCByZXNwb25zZSk7XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzZWxlY3RlZDonLCByZXNwb25zZS5zZWxlY3RlZF9tb2RlbC5uYW1lLCAnZm9yIHRhc2s6JywgcmVxdWVzdC50YXNrX3R5cGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxTZWxlY3Rpb25FcnJvcignVElNRU9VVCcsICdNb2RlbCBzZWxlY3Rpb24gcmVxdWVzdCB0aW1lZCBvdXQnLCB7IG9yaWdpbmFsRXJyb3I6IGVycm9yIH0sIFsnSW5jcmVhc2UgdGltZW91dCcsICdDaGVjayBzZXJ2ZXIgcGVyZm9ybWFuY2UnXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYnVkZ2V0JykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnY29zdCcpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IE1vZGVsU2VsZWN0aW9uRXJyb3IoJ0JVREdFVF9FWENFRURFRCcsICdSZXF1ZXN0IGV4Y2VlZHMgYnVkZ2V0IGxpbWl0cycsIHsgb3JpZ2luYWxFcnJvcjogZXJyb3IgfSwgWydJbmNyZWFzZSBidWRnZXQnLCAnVXNlIGxvd2VyIGNvc3QgbW9kZWxzJ10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBNb2RlbFNlbGVjdGlvbkVycm9yKCdTRVJWSUNFX1VOQVZBSUxBQkxFJywgJ01vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIHVuYXZhaWxhYmxlJywgeyBvcmlnaW5hbEVycm9yOiBlcnJvciB9LCBbJ0NoZWNrIHNlcnZlciBzdGF0dXMnLCAnUmV0cnkgcmVxdWVzdCddKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRNb2RlbEhlYWx0aCgpOiBQcm9taXNlPE1vZGVsSGVhbHRoU3RhdHVzW10+IHtcbiAgICAvLyBSZXR1cm4gY2FjaGVkIGhlYWx0aCBpZiByZWNlbnRcbiAgICBpZiAodGhpcy5jYWNoZWRIZWFsdGgubGVuZ3RoID4gMCAmJiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhlYWx0aFVwZGF0ZSkgPCB0aGlzLmNvbmZpZy5jYWNoZV9kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkSGVhbHRoO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlZnJlc2hNb2RlbEhlYWx0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWZyZXNoTW9kZWxIZWFsdGgoKTogUHJvbWlzZTxNb2RlbEhlYWx0aFN0YXR1c1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IHRoaXMuZGV2UGlwZUNsaWVudC5zZW5kTWVzc2FnZTxNb2RlbEhlYWx0aFN0YXR1c1tdPihcbiAgICAgICAgJ2hlYWx0aC1jaGVjay1yZXF1ZXN0JyxcbiAgICAgICAge30sXG4gICAgICAgIDEwMDAwIC8vIFNob3J0IHRpbWVvdXQgZm9yIGhlYWx0aCBjaGVja3NcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuY2FjaGVkSGVhbHRoID0gaGVhbHRoO1xuICAgICAgdGhpcy5sYXN0SGVhbHRoVXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGhlYWx0aDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmVmcmVzaCBtb2RlbCBoZWFsdGg6JywgZXJyb3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkSGVhbHRoOyAvLyBSZXR1cm4gY2FjaGVkIGRhdGEgb24gZXJyb3JcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVQcmVmZXJlbmNlcyhwcmVmZXJlbmNlczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy51c2VyUHJlZmVyZW5jZXMgPSB7XG4gICAgICAuLi50aGlzLnVzZXJQcmVmZXJlbmNlcyxcbiAgICAgIC4uLnByZWZlcmVuY2VzXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLmRldlBpcGVDbGllbnQuc2VuZE1lc3NhZ2UoXG4gICAgICAgICdwcmVmZXJlbmNlcy11cGRhdGUnLFxuICAgICAgICB0aGlzLnVzZXJQcmVmZXJlbmNlcyxcbiAgICAgICAgNTAwMFxuICAgICAgKTtcblxuICAgICAgdGhpcy5lbWl0KCdwcmVmZXJlbmNlcy11cGRhdGVkJywgdGhpcy51c2VyUHJlZmVyZW5jZXMpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5jb25maWcuZGVidWdfbW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBwcmVmZXJlbmNlcyB1cGRhdGVkOicsIHRoaXMudXNlclByZWZlcmVuY2VzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc3luYyBwcmVmZXJlbmNlcyB3aXRoIHNlcnZlcjonLCBlcnJvcik7XG4gICAgICB9XG4gICAgICAvLyBDb250aW51ZSB3aXRoIGxvY2FsIHByZWZlcmVuY2VzIGV2ZW4gaWYgc2VydmVyIHN5bmMgZmFpbHNcbiAgICB9XG4gIH1cblxuICBnZXRQcmVmZXJlbmNlcygpOiBVc2VyUHJlZmVyZW5jZXMge1xuICAgIHJldHVybiB7IC4uLnRoaXMudXNlclByZWZlcmVuY2VzIH07XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0SGVhbHRoTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb25maWcubW9uaXRvcmluZ19pbnRlcnZhbCA+IDApIHtcbiAgICAgIHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hNb2RlbEhlYWx0aCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Z19tb2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0hlYWx0aCBtb25pdG9yaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCB0aGlzLmNvbmZpZy5tb25pdG9yaW5nX2ludGVydmFsKTtcbiAgICB9XG4gIH1cblxuICAvLyBFdmVudCBzeXN0ZW1cbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGlzdGVuZXIoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnX21vZGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0V2ZW50IGxpc3RlbmVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFF1aWNrIHNlbGVjdGlvbiBtZXRob2RzIGZvciBjb21tb24gdXNlIGNhc2VzXG4gIGFzeW5jIHNlbGVjdEZvclRhc2sodGFza1R5cGU6IHN0cmluZywgcXVhbGl0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyA9ICdtZWRpdW0nKTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0TW9kZWwoe1xuICAgICAgdGFza190eXBlOiB0YXNrVHlwZSBhcyBhbnksXG4gICAgICBxdWFsaXR5X3JlcXVpcmVtZW50OiBxdWFsaXR5XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzZWxlY3RDb3N0T3B0aW1pemVkKHRhc2tUeXBlOiBzdHJpbmcsIG1heENvc3Q6IG51bWJlciA9IDAuMDEpOiBQcm9taXNlPE1vZGVsU2VsZWN0aW9uUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RNb2RlbCh7XG4gICAgICB0YXNrX3R5cGU6IHRhc2tUeXBlIGFzIGFueSxcbiAgICAgIHF1YWxpdHlfcmVxdWlyZW1lbnQ6ICdtZWRpdW0nLFxuICAgICAgbWF4X2Nvc3Q6IG1heENvc3RcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbGVjdEhpZ2hQZXJmb3JtYW5jZSh0YXNrVHlwZTogc3RyaW5nKTogUHJvbWlzZTxNb2RlbFNlbGVjdGlvblJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0TW9kZWwoe1xuICAgICAgdGFza190eXBlOiB0YXNrVHlwZSBhcyBhbnksXG4gICAgICBxdWFsaXR5X3JlcXVpcmVtZW50OiAnaGlnaCdcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgbWV0aG9kc1xuICBpc0Nvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZXZQaXBlQ2xpZW50LmlzUmVhZHkoKTtcbiAgfVxuXG4gIGdldENvbmZpZygpOiBNb2RlbFNlbGVjdGlvbkNvbmZpZyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5jb25maWcgfTtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5kZXZQaXBlQ2xpZW50LmRpc2Nvbm5lY3QoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBNb2RhbCBDbGFzc2VzIGZvciBWYXVsdFBpbG90IFZhdWx0IE1hbmFnZW1lbnRcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBWYXVsdE1hbmFnZW1lbnRDbGllbnQgfSBmcm9tICcuL3ZhdWx0LWFwaS1jbGllbnQnO1xuaW1wb3J0IHsgXG4gIFZhdWx0U3RydWN0dXJlUmVzcG9uc2UsIFxuICBWYXVsdFNlYXJjaFJlc3BvbnNlLCBcbiAgRmlsZU9wZXJhdGlvblJlcXVlc3QsXG4gIFNlYXJjaFR5cGUsXG4gIFZhdWx0T3JnYW5pemF0aW9uUmVzcG9uc2Vcbn0gZnJvbSAnLi92YXVsdC10eXBlcyc7XG5cbi8vID09PSBWQVVMVCBTVFJVQ1RVUkUgTU9EQUwgPT09XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFN0cnVjdHVyZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHZhdWx0Q2xpZW50OiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgZm9jdXNQYXRoPzogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFueSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdENsaWVudCA9IHBsdWdpbi52YXVsdENsaWVudDtcbiAgfVxuXG4gIHNldEZvY3VzUGF0aChwYXRoOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLmZvY3VzUGF0aCA9IHBhdGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdC1zdHJ1Y3R1cmUtbW9kYWwnKTtcbiAgICBcbiAgICBjb25zdCBoZWFkZXJFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtb2RhbC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1ZhdWx0IFN0cnVjdHVyZSBBbmFseXNpcycgfSk7XG4gICAgXG4gICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IGhlYWRlckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/CflIQgUmVmcmVzaCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIExvYWRpbmcgc3RhdGVcbiAgICBjb25zdCBsb2FkaW5nRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtbG9hZGluZycgfSk7XG4gICAgbG9hZGluZ0VsLnNldFRleHQoJ/CflI0gQW5hbHl6aW5nIHZhdWx0IHN0cnVjdHVyZS4uLicpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cnVjdHVyZSA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuZ2V0VmF1bHRTdHJ1Y3R1cmUoe1xuICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlLFxuICAgICAgICBtYXhfZGVwdGg6IDVcbiAgICAgIH0pO1xuXG4gICAgICBsb2FkaW5nRWwucmVtb3ZlKCk7XG4gICAgICB0aGlzLnJlbmRlclN0cnVjdHVyZShjb250ZW50RWwsIHN0cnVjdHVyZSk7XG4gICAgICBcbiAgICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgbG9hZGluZ0VsLnJlbW92ZSgpO1xuICAgICAgY29uc29sZS5lcnJvcignVmF1bHQgc3RydWN0dXJlIGVycm9yOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdOb3QgRm91bmQnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykpIHtcbiAgICAgICAgLy8gU2VydmVyIGRvZXNuJ3QgaGF2ZSB2YXVsdCBtYW5hZ2VtZW50IC0gc2hvdyBmYWxsYmFja1xuICAgICAgICB0aGlzLnJlbmRlckZhbGxiYWNrU3RydWN0dXJlKGNvbnRlbnRFbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPdGhlciBlcnJvciAtIHNob3cgcmV0cnkgb3B0aW9uXG4gICAgICAgIGNvbnN0IGVycm9yRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtZXJyb3InIH0pO1xuICAgICAgICBlcnJvckVsLnNldFRleHQoJ+KdjCBGYWlsZWQgdG8gbG9hZCB2YXVsdCBzdHJ1Y3R1cmUnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgIHRleHQ6ICdSZXRyeScsXG4gICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHJ5QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9uT3BlbigpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZWZyZXNoQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMub25PcGVuKCk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU3RydWN0dXJlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHN0cnVjdHVyZTogVmF1bHRTdHJ1Y3R1cmVSZXNwb25zZSkge1xuICAgIC8vIFN0YXRzIG92ZXJ2aWV3XG4gICAgY29uc3Qgc3RhdHNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC1zdGF0cycgfSk7XG4gICAgc3RhdHNFbC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwic3RhdC1ncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfk4E8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+RmlsZXM8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtzdHJ1Y3R1cmUudG90YWxfZmlsZXN9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+Tgjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5Gb2xkZXJzPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7c3RydWN0dXJlLnRvdGFsX2ZvbGRlcnN9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+Svjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5TaXplPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7KHN0cnVjdHVyZS50b3RhbF9zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyBGb2xkZXIgdHJlZVxuICAgIGNvbnN0IHRyZWVDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtdHJlZS1jb250YWluZXInIH0pO1xuICAgIHRyZWVDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRm9sZGVyIFN0cnVjdHVyZScgfSk7XG4gICAgXG4gICAgY29uc3QgdHJlZUVsID0gdHJlZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC10cmVlJyB9KTtcbiAgICB0aGlzLnJlbmRlckZvbGRlcih0cmVlRWwsIHN0cnVjdHVyZS5zdHJ1Y3R1cmUsIDApO1xuXG4gICAgLy8gUmVjZW50IGZpbGVzXG4gICAgaWYgKHN0cnVjdHVyZS5yZWNlbnRfZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcmVjZW50Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlcy1jb250YWluZXInIH0pO1xuICAgICAgcmVjZW50Q29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlY2VudCBGaWxlcycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlY2VudEVsID0gcmVjZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlcycgfSk7XG4gICAgICBzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzLnNsaWNlKDAsIDEwKS5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICBjb25zdCBmaWxlRWwgPSByZWNlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtZmlsZScgfSk7XG4gICAgICAgIGZpbGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5OEPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtmaWxlLm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1kYXRlXCI+JHtuZXcgRGF0ZShmaWxlLm1vZGlmaWVkKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBPcnBoYW5lZCBmaWxlc1xuICAgIGlmIChzdHJ1Y3R1cmUub3JwaGFuZWRfZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgb3JwaGFuZWRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnb3JwaGFuZWQtZmlsZXMtY29udGFpbmVyJyB9KTtcbiAgICAgIG9ycGhhbmVkQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KaoO+4jyBPcnBoYW5lZCBGaWxlcycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG9ycGhhbmVkRWwgPSBvcnBoYW5lZENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdvcnBoYW5lZC1maWxlcycgfSk7XG4gICAgICBzdHJ1Y3R1cmUub3JwaGFuZWRfZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgY29uc3Qgb3JwaGFuRWwgPSBvcnBoYW5lZEVsLmNyZWF0ZURpdih7IGNsczogJ29ycGhhbmVkLWZpbGUnIH0pO1xuICAgICAgICBvcnBoYW5FbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5SXPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1wYXRoXCI+JHtmaWxlLnBhdGh9PC9zcGFuPlxuICAgICAgICBgO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGb2xkZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZm9sZGVyOiBhbnksIGxldmVsOiBudW1iZXIpIHtcbiAgICBjb25zdCBmb2xkZXJFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogJ2ZvbGRlci1pdGVtJyxcbiAgICAgIGF0dHI6IHsgJ2RhdGEtbGV2ZWwnOiBsZXZlbC50b1N0cmluZygpIH1cbiAgICB9KTtcbiAgICBcbiAgICBmb2xkZXJFbC5pbm5lckhUTUwgPSBgXG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci10b2dnbGVcIj7ilrY8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImZvbGRlci1pY29uXCI+8J+TgTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiZm9sZGVyLW5hbWVcIj4ke2ZvbGRlci5uYW1lfTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiZm9sZGVyLWNvdW50XCI+KCR7Zm9sZGVyLmNoaWxkcmVuLmxlbmd0aH0pPC9zcGFuPlxuICAgIGA7XG5cbiAgICAvLyBBZGQgY2hpbGRyZW4gY29udGFpbmVyXG4gICAgY29uc3QgY2hpbGRyZW5FbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogJ2ZvbGRlci1jaGlsZHJlbicsXG4gICAgICBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogbm9uZTsnIH1cbiAgICB9KTtcblxuICAgIC8vIFRvZ2dsZSBmdW5jdGlvbmFsaXR5XG4gICAgY29uc3QgdG9nZ2xlRWwgPSBmb2xkZXJFbC5xdWVyeVNlbGVjdG9yKCcuZm9sZGVyLXRvZ2dsZScpIGFzIEhUTUxFbGVtZW50O1xuICAgIHRvZ2dsZUVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBpc09wZW4gPSBjaGlsZHJlbkVsLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgIGNoaWxkcmVuRWwuc3R5bGUuZGlzcGxheSA9IGlzT3BlbiA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICB0b2dnbGVFbC50ZXh0Q29udGVudCA9IGlzT3BlbiA/ICfilrYnIDogJ+KWvCc7XG4gICAgfTtcblxuICAgIC8vIFJlbmRlciBjaGlsZHJlblxuICAgIGZvbGRlci5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZDogYW55KSA9PiB7XG4gICAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2ZvbGRlcicpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJGb2xkZXIoY2hpbGRyZW5FbCwgY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBmaWxlRWwgPSBjaGlsZHJlbkVsLmNyZWF0ZURpdih7IFxuICAgICAgICAgIGNsczogJ2ZpbGUtaXRlbScsXG4gICAgICAgICAgYXR0cjogeyAnZGF0YS1sZXZlbCc6IChsZXZlbCArIDEpLnRvU3RyaW5nKCkgfVxuICAgICAgICB9KTtcbiAgICAgICAgZmlsZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaWNvblwiPvCfk4Q8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLW5hbWVcIj4ke2NoaWxkLm5hbWV9PC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1zaXplXCI+JHsoY2hpbGQuc2l6ZSAvIDEwMjQpLnRvRml4ZWQoMSl9S0I8L3NwYW4+XG4gICAgICAgIGA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZhbGxiYWNrU3RydWN0dXJlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBMb2NhbCB2YXVsdCBhbmFseXNpcyB3aGVuIHNlcnZlciBlbmRwb2ludHMgYXJlbid0IGF2YWlsYWJsZVxuICAgIGNvbnN0IGZhbGxiYWNrRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndmF1bHQtZmFsbGJhY2snIH0pO1xuICAgIGZhbGxiYWNrRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn8J+TgSBMb2NhbCBWYXVsdCBBbmFseXNpcycgfSk7XG4gICAgZmFsbGJhY2tFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnU2VydmVyLXNpZGUgdmF1bHQgbWFuYWdlbWVudCBub3QgYXZhaWxhYmxlLiBTaG93aW5nIGxvY2FsIGFuYWx5c2lzLicsXG4gICAgICBjbHM6ICd2YXVsdC1mYWxsYmFjay1tZXNzYWdlJ1xuICAgIH0pO1xuXG4gICAgLy8gR2V0IGxvY2FsIHN0YXRpc3RpY3NcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IGZvbGRlcnMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5maWx0ZXIoKGY6IGFueSkgPT4gZi5jaGlsZHJlbikubGVuZ3RoO1xuXG4gICAgLy8gU3RhdHMgb3ZlcnZpZXdcbiAgICBjb25zdCBzdGF0c0VsID0gZmFsbGJhY2tFbC5jcmVhdGVEaXYoeyBjbHM6ICd2YXVsdC1zdGF0cycgfSk7XG4gICAgc3RhdHNFbC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwic3RhdC1ncmlkXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtaWNvblwiPvCfk4E8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+Rm9sZGVyczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke2ZvbGRlcnN9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+ThDwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5Ub3RhbCBGaWxlczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke2ZpbGVzLmxlbmd0aH08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWljb25cIj7wn5OdPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPk1hcmtkb3duPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7bWFya2Rvd25GaWxlcy5sZW5ndGh9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1pY29uXCI+8J+Svjwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5TdGF0dXM8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+TG9jYWwgT25seTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8gUmVjZW50IGZpbGVzXG4gICAgY29uc3QgcmVjZW50RWwgPSBmYWxsYmFja0VsLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1maWxlcy1jb250YWluZXInIH0pO1xuICAgIHJlY2VudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlY2VudCBGaWxlcycgfSk7XG4gICAgXG4gICAgY29uc3QgcmVjZW50RmlsZXMgPSBtYXJrZG93bkZpbGVzXG4gICAgICAuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZSlcbiAgICAgIC5zbGljZSgwLCAxMCk7XG5cbiAgICBjb25zdCByZWNlbnRMaXN0ID0gcmVjZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWZpbGVzJyB9KTtcbiAgICByZWNlbnRGaWxlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVFbCA9IHJlY2VudExpc3QuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWZpbGUnIH0pO1xuICAgICAgZmlsZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj7wn5OEPC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtbmFtZVwiPiR7ZmlsZS5iYXNlbmFtZX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1kYXRlXCI+JHtuZXcgRGF0ZShmaWxlLnN0YXQubXRpbWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj5cbiAgICAgIGA7XG4gICAgICBmaWxlRWwub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgZmFsc2UpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gQ29uZmlndXJhdGlvbiBub3RlXG4gICAgY29uc3QgY29uZmlnRWwgPSBmYWxsYmFja0VsLmNyZWF0ZURpdih7IGNsczogJ3ZhdWx0LWNvbmZpZy1ub3RlJyB9KTtcbiAgICBjb25maWdFbC5pbm5lckhUTUwgPSBgXG4gICAgICA8cD48c3Ryb25nPvCfkqEgRW5hYmxlIEZ1bGwgRmVhdHVyZXM6PC9zdHJvbmc+IENvbmZpZ3VyZSB2YXVsdCBtYW5hZ2VtZW50IGVuZHBvaW50cyBvbiB5b3VyIHNlcnZlciB0byBhY2Nlc3MgYWR2YW5jZWQgZmVhdHVyZXMgbGlrZSBzdHJ1Y3R1cmUgYW5hbHlzaXMsIHNtYXJ0IHNlYXJjaCwgYW5kIGZpbGUgb3BlcmF0aW9ucy48L3A+XG4gICAgICA8cD5TZWUgdGhlIGRldi1waXBlIGRvY3VtZW50YXRpb24gZm9yIGltcGxlbWVudGF0aW9uIGRldGFpbHMuPC9wPlxuICAgIGA7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbi8vID09PSBTTUFSVCBTRUFSQ0ggTU9EQUwgPT09XG5cbmV4cG9ydCBjbGFzcyBTbWFydFNlYXJjaE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBwcml2YXRlIHZhdWx0Q2xpZW50OiBWYXVsdE1hbmFnZW1lbnRDbGllbnQ7XG4gIHByaXZhdGUgaW5pdGlhbFF1ZXJ5Pzogc3RyaW5nO1xuICBwcml2YXRlIHNlYXJjaFR5cGU/OiBTZWFyY2hUeXBlO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFueSkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy52YXVsdENsaWVudCA9IHBsdWdpbi52YXVsdENsaWVudDtcbiAgfVxuXG4gIHNldEluaXRpYWxRdWVyeShxdWVyeTogc3RyaW5nLCB0eXBlPzogU2VhcmNoVHlwZSk6IHRoaXMge1xuICAgIHRoaXMuaW5pdGlhbFF1ZXJ5ID0gcXVlcnk7XG4gICAgdGhpcy5zZWFyY2hUeXBlID0gdHlwZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3NtYXJ0LXNlYXJjaC1tb2RhbCcpO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn5SNIFNtYXJ0IFZhdWx0IFNlYXJjaCcgfSk7XG5cbiAgICAvLyBTZWFyY2ggZm9ybVxuICAgIGNvbnN0IHNlYXJjaEZvcm0gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWZvcm0nIH0pO1xuICAgIFxuICAgIGNvbnN0IHF1ZXJ5SW5wdXQgPSBzZWFyY2hGb3JtLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnRW50ZXIgc2VhcmNoIHF1ZXJ5Li4uJyxcbiAgICAgIGNsczogJ3NlYXJjaC1xdWVyeS1pbnB1dCdcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5pbml0aWFsUXVlcnkpIHtcbiAgICAgIHF1ZXJ5SW5wdXQudmFsdWUgPSB0aGlzLmluaXRpYWxRdWVyeTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hUeXBlU2VsZWN0ID0gc2VhcmNoRm9ybS5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdzZWFyY2gtdHlwZS1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IHNlYXJjaFR5cGVzID0gW1xuICAgICAgeyB2YWx1ZTogJ2NvbXByZWhlbnNpdmUnLCBsYWJlbDogJ0NvbXByZWhlbnNpdmUnIH0sXG4gICAgICB7IHZhbHVlOiAnY29udGVudCcsIGxhYmVsOiAnQ29udGVudCcgfSxcbiAgICAgIHsgdmFsdWU6ICdmaWxlbmFtZScsIGxhYmVsOiAnRmlsZW5hbWUnIH0sXG4gICAgICB7IHZhbHVlOiAndGFncycsIGxhYmVsOiAnVGFncycgfSxcbiAgICAgIHsgdmFsdWU6ICdsaW5rcycsIGxhYmVsOiAnTGlua3MnIH1cbiAgICBdO1xuICAgIFxuICAgIHNlYXJjaFR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBzZWFyY2hUeXBlU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiB0eXBlLnZhbHVlIH0pO1xuICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gdHlwZS5sYWJlbDtcbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAodGhpcy5zZWFyY2hUeXBlIHx8ICdjb21wcmVoZW5zaXZlJykpIHtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHNlYXJjaEJ1dHRvbiA9IHNlYXJjaEZvcm0uY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2VhcmNoJyxcbiAgICAgIGNsczogJ21vZC1jdGEgc2VhcmNoLWJ1dHRvbidcbiAgICB9KTtcblxuICAgIC8vIFJlc3VsdHMgY29udGFpbmVyXG4gICAgY29uc3QgcmVzdWx0c0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtcmVzdWx0cy1jb250YWluZXInIH0pO1xuXG4gICAgLy8gU2VhcmNoIGZ1bmN0aW9uXG4gICAgY29uc3QgcGVyZm9ybVNlYXJjaCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gcXVlcnlJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIHNlYXJjaCBxdWVyeScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlYXJjaEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTZWFyY2hpbmcuLi4nO1xuICAgICAgc2VhcmNoQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9hZGluZ0VsID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtbG9hZGluZycgfSk7XG4gICAgICBsb2FkaW5nRWwudGV4dENvbnRlbnQgPSAn8J+UjSBTZWFyY2hpbmcgdmF1bHQuLi4nO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5zZWFyY2hWYXVsdCh7XG4gICAgICAgICAgcXVlcnksXG4gICAgICAgICAgc2VhcmNoX3R5cGU6IHNlYXJjaFR5cGVTZWxlY3QudmFsdWUgYXMgU2VhcmNoVHlwZSxcbiAgICAgICAgICBtYXhfcmVzdWx0czogdGhpcy5wbHVnaW4uc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5zZWFyY2hSZXN1bHRzTGltaXQgfHwgNTAsXG4gICAgICAgICAgaW5jbHVkZV9jb250ZW50OiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvYWRpbmdFbC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTZWFyY2hSZXN1bHRzKHJlc3VsdHNDb250YWluZXIsIHJlc3VsdHMpO1xuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsb2FkaW5nRWwudGV4dENvbnRlbnQgPSAn4p2MIFNlYXJjaCBmYWlsZWQnO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2VhcmNoQnV0dG9uLnRleHRDb250ZW50ID0gJ1NlYXJjaCc7XG4gICAgICAgIHNlYXJjaEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICBzZWFyY2hCdXR0b24ub25jbGljayA9IHBlcmZvcm1TZWFyY2g7XG4gICAgcXVlcnlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgcGVyZm9ybVNlYXJjaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQXV0by1zZWFyY2ggaWYgaW5pdGlhbCBxdWVyeSBwcm92aWRlZFxuICAgIGlmICh0aGlzLmluaXRpYWxRdWVyeSkge1xuICAgICAgcGVyZm9ybVNlYXJjaCgpO1xuICAgIH1cblxuICAgIC8vIEZvY3VzIGlucHV0XG4gICAgcXVlcnlJbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTZWFyY2hSZXN1bHRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJlc3VsdHM6IFZhdWx0U2VhcmNoUmVzcG9uc2UpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgU2VhcmNoIFJlc3VsdHMgKCR7cmVzdWx0cy50b3RhbF9mb3VuZH0pYCB9KTtcblxuICAgIGlmIChyZXN1bHRzLmluc2lnaHRzKSB7XG4gICAgICBjb25zdCBpbnNpZ2h0c0VsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1pbnNpZ2h0cycgfSk7XG4gICAgICBpbnNpZ2h0c0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImluc2lnaHRzLWhlYWRlclwiPvCfp6AgQUkgSW5zaWdodHM8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImluc2lnaHRzLWNvbnRlbnRcIj4ke3Jlc3VsdHMuaW5zaWdodHN9PC9kaXY+XG4gICAgICBgO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHRzLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICAgIGNsczogJ25vLXJlc3VsdHMnLFxuICAgICAgICB0ZXh0OiAnTm8gcmVzdWx0cyBmb3VuZC4gVHJ5IGEgZGlmZmVyZW50IHNlYXJjaCB0ZXJtIG9yIHR5cGUuJyBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdHNMaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1yZXN1bHRzLWxpc3QnIH0pO1xuICAgIFxuICAgIHJlc3VsdHMucmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XG4gICAgICBjb25zdCByZXN1bHRFbCA9IHJlc3VsdHNMaXN0LmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1yZXN1bHQnIH0pO1xuICAgICAgXG4gICAgICByZXN1bHRFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtaGVhZGVyXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHQtZmlsZS1uYW1lXCI+JHtyZXN1bHQuZmlsZV9uYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlc3VsdC1tYXRjaC10eXBlXCI+JHtyZXN1bHQubWF0Y2hfdHlwZX08L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXN1bHQtc2NvcmVcIj4keyhyZXN1bHQuc2NvcmUgKiAxMDApLnRvRml4ZWQoMCl9JTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtcGF0aFwiPiR7cmVzdWx0LmZpbGVfcGF0aH08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJlc3VsdC1wcmV2aWV3XCI+JHtyZXN1bHQucHJldmlld308L2Rpdj5cbiAgICAgICAgJHtyZXN1bHQubWF0Y2hlcy5sZW5ndGggPiAwID8gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXN1bHQtbWF0Y2hlc1wiPlxuICAgICAgICAgICAgPHN0cm9uZz5NYXRjaGVzOjwvc3Ryb25nPiAke3Jlc3VsdC5tYXRjaGVzLmpvaW4oJywgJyl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgIGA7XG5cbiAgICAgIC8vIENsaWNrIHRvIG9wZW4gZmlsZVxuICAgICAgcmVzdWx0RWwub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChyZXN1bHQuZmlsZV9wYXRoLCAnJyk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBTdWdnZXN0ZWQgcXVlcmllc1xuICAgIGlmIChyZXN1bHRzLnN1Z2dlc3RlZF9xdWVyaWVzICYmIHJlc3VsdHMuc3VnZ2VzdGVkX3F1ZXJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc3VnZ2VzdGlvbnNFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0ZWQtcXVlcmllcycgfSk7XG4gICAgICBzdWdnZXN0aW9uc0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ/CfkqEgU3VnZ2VzdGVkIFF1ZXJpZXMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBzdWdnZXN0aW9uc0xpc3QgPSBzdWdnZXN0aW9uc0VsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb25zLWxpc3QnIH0pO1xuICAgICAgcmVzdWx0cy5zdWdnZXN0ZWRfcXVlcmllcy5mb3JFYWNoKHN1Z2dlc3Rpb24gPT4ge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uRWwgPSBzdWdnZXN0aW9uc0xpc3QuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgdGV4dDogc3VnZ2VzdGlvbixcbiAgICAgICAgICBjbHM6ICdzdWdnZXN0aW9uLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIHN1Z2dlc3Rpb25FbC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHF1ZXJ5SW5wdXQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLXF1ZXJ5LWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICBpZiAocXVlcnlJbnB1dCkge1xuICAgICAgICAgICAgcXVlcnlJbnB1dC52YWx1ZSA9IHN1Z2dlc3Rpb247XG4gICAgICAgICAgICBxdWVyeUlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEtleWJvYXJkRXZlbnQoJ2tleXByZXNzJywgeyBrZXk6ICdFbnRlcicgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLy8gPT09IEZJTEUgT1BFUkFUSU9OUyBNT0RBTCA9PT1cblxuZXhwb3J0IGNsYXNzIEZpbGVPcGVyYXRpb25zTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBhbnk7XG4gIHByaXZhdGUgdmF1bHRDbGllbnQ6IFZhdWx0TWFuYWdlbWVudENsaWVudDtcbiAgcHJpdmF0ZSBpbml0aWFsUGF0aD86IHN0cmluZztcbiAgcHJpdmF0ZSBvcGVyYXRpb24/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogYW55KSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnZhdWx0Q2xpZW50ID0gcGx1Z2luLnZhdWx0Q2xpZW50O1xuICB9XG5cbiAgc2V0SW5pdGlhbFBhdGgocGF0aDogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5pbml0aWFsUGF0aCA9IHBhdGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRPcGVyYXRpb24ob3BlcmF0aW9uOiBzdHJpbmcpOiB0aGlzIHtcbiAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZpbGUtb3BlcmF0aW9ucy1tb2RhbCcpO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn5OBIEZpbGUgT3BlcmF0aW9ucyBNYW5hZ2VyJyB9KTtcblxuICAgIC8vIE9wZXJhdGlvbiBzZWxlY3Rpb25cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnT3BlcmF0aW9uJylcbiAgICAgIC5zZXREZXNjKCdTZWxlY3QgdGhlIGZpbGUgb3BlcmF0aW9uIHRvIHBlcmZvcm0nKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgIC5hZGRPcHRpb24oJ2NyZWF0ZScsICdDcmVhdGUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ3VwZGF0ZScsICdVcGRhdGUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ2RlbGV0ZScsICdEZWxldGUgRmlsZScpXG4gICAgICAgIC5hZGRPcHRpb24oJ21vdmUnLCAnTW92ZSBGaWxlJylcbiAgICAgICAgLmFkZE9wdGlvbignY29weScsICdDb3B5IEZpbGUnKVxuICAgICAgICAuc2V0VmFsdWUodGhpcy5vcGVyYXRpb24gfHwgJ2NyZWF0ZScpXG4gICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGVyYXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZU9wZXJhdGlvbkZvcm0oKTtcbiAgICAgICAgfSkpO1xuXG4gICAgLy8gT3BlcmF0aW9uIGZvcm0gY29udGFpbmVyXG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdvcGVyYXRpb24tZm9ybScgfSk7XG4gICAgdGhpcy51cGRhdGVPcGVyYXRpb25Gb3JtKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU9wZXJhdGlvbkZvcm0oKSB7XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5vcGVyYXRpb24tZm9ybScpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghZm9ybUNvbnRhaW5lcikgcmV0dXJuO1xuICAgIFxuICAgIGZvcm1Db250YWluZXIuZW1wdHkoKTtcblxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uIHx8ICdjcmVhdGUnO1xuICAgIFxuICAgIC8vIEZpbGUgcGF0aCBpbnB1dFxuICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnRmlsZSBQYXRoJylcbiAgICAgIC5zZXREZXNjKCdQYXRoIHRvIHRoZSBmaWxlIChpbmNsdWRpbmcgZmlsZW5hbWUpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3BhdGgvdG8vZmlsZS5tZCcpXG4gICAgICAgIC5zZXRWYWx1ZSh0aGlzLmluaXRpYWxQYXRoIHx8ICcnKVxuICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4gdGhpcy5pbml0aWFsUGF0aCA9IHZhbHVlKSk7XG5cbiAgICAvLyBBZGRpdGlvbmFsIGlucHV0cyBiYXNlZCBvbiBvcGVyYXRpb25cbiAgICBpZiAob3BlcmF0aW9uID09PSAnbW92ZScgfHwgb3BlcmF0aW9uID09PSAnY29weScpIHtcbiAgICAgIG5ldyBTZXR0aW5nKGZvcm1Db250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdOZXcgUGF0aCcpXG4gICAgICAgIC5zZXREZXNjKCdEZXN0aW5hdGlvbiBwYXRoIGZvciB0aGUgZmlsZScpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignbmV3L3BhdGgvdG8vZmlsZS5tZCcpKTtcbiAgICB9XG5cbiAgICBpZiAob3BlcmF0aW9uID09PSAnY3JlYXRlJyB8fCBvcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG4gICAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnQ29udGVudCcpXG4gICAgICAgIC5zZXREZXNjKCdGaWxlIGNvbnRlbnQnKVxuICAgICAgICAuYWRkVGV4dEFyZWEodGV4dGFyZWEgPT4ge1xuICAgICAgICAgIHRleHRhcmVhLnNldFBsYWNlaG9sZGVyKCdFbnRlciBmaWxlIGNvbnRlbnQuLi4nKTtcbiAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSAnY3JlYXRlJykge1xuICAgICAgICAgICAgdGV4dGFyZWEuc2V0VmFsdWUoJyMgTmV3IEZpbGVcXG5cXG5Db250ZW50IGdvZXMgaGVyZS4uLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQmFja3VwIG9wdGlvblxuICAgIGlmIChvcGVyYXRpb24gIT09ICdjcmVhdGUnKSB7XG4gICAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnQ3JlYXRlIEJhY2t1cCcpXG4gICAgICAgIC5zZXREZXNjKCdDcmVhdGUgYSBiYWNrdXAgYmVmb3JlIHBlcmZvcm1pbmcgdGhlIG9wZXJhdGlvbicpXG4gICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZS5zZXRWYWx1ZSh0cnVlKSk7XG4gICAgfVxuXG4gICAgLy8gRXhlY3V0ZSBidXR0b25cbiAgICBuZXcgU2V0dGluZyhmb3JtQ29udGFpbmVyKVxuICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KGBFeGVjdXRlICR7b3BlcmF0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3BlcmF0aW9uLnNsaWNlKDEpfWApXG4gICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmV4ZWN1dGVPcGVyYXRpb24oKSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlT3BlcmF0aW9uKCkge1xuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uIHx8ICdjcmVhdGUnO1xuICAgIGNvbnN0IHBhdGhJbnB1dCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyKj1cInBhdGgvdG8vZmlsZVwiXScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbmV3UGF0aElucHV0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignaW5wdXRbcGxhY2Vob2xkZXIqPVwibmV3L3BhdGhcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGNvbnRlbnRUZXh0YXJlYSA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBjb25zdCBiYWNrdXBUb2dnbGUgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgaWYgKCFwYXRoSW5wdXQ/LnZhbHVlKSB7XG4gICAgICBuZXcgTm90aWNlKCdGaWxlIHBhdGggaXMgcmVxdWlyZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXF1ZXN0OiBGaWxlT3BlcmF0aW9uUmVxdWVzdCA9IHtcbiAgICAgIG9wZXJhdGlvbjogb3BlcmF0aW9uIGFzIGFueSxcbiAgICAgIGZpbGVfcGF0aDogcGF0aElucHV0LnZhbHVlLFxuICAgICAgYmFja3VwOiBiYWNrdXBUb2dnbGU/LmNoZWNrZWQgPz8gdHJ1ZVxuICAgIH07XG5cbiAgICBpZiAobmV3UGF0aElucHV0Py52YWx1ZSkge1xuICAgICAgcmVxdWVzdC5uZXdfcGF0aCA9IG5ld1BhdGhJbnB1dC52YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoY29udGVudFRleHRhcmVhPy52YWx1ZSkge1xuICAgICAgcmVxdWVzdC5jb250ZW50ID0gY29udGVudFRleHRhcmVhLnZhbHVlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBuZXcgTm90aWNlKGBQZXJmb3JtaW5nICR7b3BlcmF0aW9ufS4uLmApO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy52YXVsdENsaWVudC5wZXJmb3JtRmlsZU9wZXJhdGlvbihyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgbmV3IE5vdGljZShg4pyFICR7b3BlcmF0aW9ufSBzdWNjZXNzZnVsOiAke3Jlc3VsdC5tZXNzYWdlfWApO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCAke29wZXJhdGlvbn0gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBUcmFuc3BvcnQgaW50ZXJmYWNlIGZvciBEZXZQaXBlIGNvbW11bmljYXRpb25cbiAqIFN1cHBvcnRzIG11bHRpcGxlIHRyYW5zcG9ydCB0eXBlczogSFRUUCwgV2ViU29ja2V0LCBGaWxlU3lzdGVtXG4gKi9cblxuZXhwb3J0IGVudW0gVHJhbnNwb3J0VHlwZSB7XG4gIEhUVFAgPSAnaHR0cCcsXG4gIFdFQlNPQ0tFVCA9ICd3ZWJzb2NrZXQnLFxuICBGSUxFU1lTVEVNID0gJ2ZpbGVzeXN0ZW0nXG59XG5cbmV4cG9ydCBlbnVtIFRyYW5zcG9ydEV2ZW50IHtcbiAgQ09OTkVDVEVEID0gJ2Nvbm5lY3RlZCcsXG4gIERJU0NPTk5FQ1RFRCA9ICdkaXNjb25uZWN0ZWQnLFxuICBNRVNTQUdFID0gJ21lc3NhZ2UnLFxuICBFUlJPUiA9ICdlcnJvcicsXG4gIEhFQUxUSF9DSEVDSyA9ICdoZWFsdGhfY2hlY2snLFxuICBSRUNPTk5FQ1RJTkcgPSAncmVjb25uZWN0aW5nJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydENhcGFiaWxpdGllcyB7XG4gIC8vIEZlYXR1cmUgc3VwcG9ydFxuICBzdXBwb3J0c1JlYWx0aW1lOiBib29sZWFuO1xuICBzdXBwb3J0c0JpZGlyZWN0aW9uYWw6IGJvb2xlYW47XG4gIHN1cHBvcnRzRmlsZVN5c3RlbTogYm9vbGVhbjtcbiAgc3VwcG9ydHNTdHJlYW1pbmc6IGJvb2xlYW47XG4gIFxuICAvLyBQZXJmb3JtYW5jZSBjaGFyYWN0ZXJpc3RpY3NcbiAgbWF4TWVzc2FnZVNpemU6IG51bWJlcjtcbiAgYXZlcmFnZUxhdGVuY3k6IG51bWJlcjtcbiAgbWF4Q29uY3VycmVudENvbm5lY3Rpb25zOiBudW1iZXI7XG4gIFxuICAvLyBSZWxpYWJpbGl0eSBtZXRyaWNzXG4gIHJlbGlhYmlsaXR5OiBudW1iZXI7IC8vIDAtMSBiYXNlZCBvbiBoaXN0b3JpY2FsIGRhdGFcbiAgc3VwcG9ydGVkRW52aXJvbm1lbnRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc3BvcnRIZWFsdGhTdGF0dXMge1xuICBzdGF0dXM6ICdoZWFsdGh5JyB8ICdkZWdyYWRlZCcgfCAnZmFpbGluZycgfCAnZGlzY29ubmVjdGVkJztcbiAgbGFzdENoZWNrOiBudW1iZXI7XG4gIGxhdGVuY3k6IG51bWJlcjtcbiAgZXJyb3JSYXRlOiBudW1iZXI7XG4gIGNvbnNlY3V0aXZlRmFpbHVyZXM6IG51bWJlcjtcbiAgdXB0aW1lOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tSZXN1bHQge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBsYXRlbmN5OiBudW1iZXI7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZXZQaXBlTWVzc2FnZSB7XG4gIGlkPzogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHBheWxvYWQ6IGFueTtcbiAgdGltZXN0YW1wPzogbnVtYmVyO1xuICByZXBseVRvPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERldlBpcGVSZXNwb25zZSB7XG4gIGlkPzogc3RyaW5nO1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBwYXlsb2FkPzogYW55O1xuICBlcnJvcj86IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNwb3J0Q29uZmlnIHtcbiAgc2VydmVyVXJsPzogc3RyaW5nO1xuICBkZXZQaXBlUGF0aD86IHN0cmluZztcbiAgdGltZW91dDogbnVtYmVyO1xuICByZXRyeUF0dGVtcHRzOiBudW1iZXI7XG4gIGRlYnVnOiBib29sZWFuO1xuICBcbiAgLy8gVHJhbnNwb3J0LXNwZWNpZmljIGNvbmZpZ1xuICBodHRwPzogSFRUUFRyYW5zcG9ydENvbmZpZztcbiAgd2Vic29ja2V0PzogV2ViU29ja2V0VHJhbnNwb3J0Q29uZmlnO1xuICBmaWxlc3lzdGVtPzogRmlsZVN5c3RlbVRyYW5zcG9ydENvbmZpZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIVFRQVHJhbnNwb3J0Q29uZmlnIHtcbiAgZW5hYmxlU1NFPzogYm9vbGVhbjtcbiAgbWF4Q29ubmVjdGlvbnM/OiBudW1iZXI7XG4gIGtlZXBBbGl2ZT86IGJvb2xlYW47XG4gIGNvbXByZXNzaW9uPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRUcmFuc3BvcnRDb25maWcge1xuICBoZWFydGJlYXRJbnRlcnZhbD86IG51bWJlcjtcbiAgcmVjb25uZWN0RGVsYXk/OiBudW1iZXI7XG4gIG1heFJlY29ubmVjdEF0dGVtcHRzPzogbnVtYmVyO1xuICBwZXJzaXN0TWVzc2FnZXM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVTeXN0ZW1UcmFuc3BvcnRDb25maWcge1xuICB3YXRjaEludGVydmFsPzogbnVtYmVyO1xuICBsb2NrVGltZW91dD86IG51bWJlcjtcbiAgbWF4UXVldWVTaXplPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50TGlzdGVuZXIge1xuICAoZGF0YTogYW55KTogdm9pZDtcbn1cblxuLyoqXG4gKiBDb3JlIHRyYW5zcG9ydCBpbnRlcmZhY2UgdGhhdCBhbGwgdHJhbnNwb3J0IGltcGxlbWVudGF0aW9ucyBtdXN0IGZvbGxvd1xuICovXG5leHBvcnQgaW50ZXJmYWNlIERldlBpcGVUcmFuc3BvcnQge1xuICByZWFkb25seSB0eXBlOiBUcmFuc3BvcnRUeXBlO1xuICByZWFkb25seSBpZDogc3RyaW5nO1xuICBcbiAgLy8gTGlmZWN5Y2xlIG1hbmFnZW1lbnRcbiAgaW5pdGlhbGl6ZShjb25maWc6IFRyYW5zcG9ydENvbmZpZyk6IFByb21pc2U8dm9pZD47XG4gIGNvbm5lY3QoKTogUHJvbWlzZTx2b2lkPjtcbiAgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+O1xuICBkZXN0cm95KCk6IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBDb21tdW5pY2F0aW9uXG4gIHNlbmQobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPERldlBpcGVSZXNwb25zZT47XG4gIFxuICAvLyBNZXNzYWdlIHJlY2VpdmluZyBpcyBoYW5kbGVkIHZpYSBldmVudHMgcmF0aGVyIHRoYW4gYXN5bmMgaXRlcmF0b3JcbiAgLy8gTGlzdGVuIHRvICdtZXNzYWdlJyBldmVudCB0byByZWNlaXZlIGluY29taW5nIG1lc3NhZ2VzXG4gIFxuICAvLyBIZWFsdGggYW5kIGNhcGFiaWxpdGllc1xuICBpc0F2YWlsYWJsZSgpOiBib29sZWFuO1xuICBpc0Nvbm5lY3RlZCgpOiBib29sZWFuO1xuICBnZXRDYXBhYmlsaXRpZXMoKTogVHJhbnNwb3J0Q2FwYWJpbGl0aWVzO1xuICBnZXRIZWFsdGhTdGF0dXMoKTogVHJhbnNwb3J0SGVhbHRoU3RhdHVzO1xuICBwZXJmb3JtSGVhbHRoQ2hlY2soKTogUHJvbWlzZTxIZWFsdGhDaGVja1Jlc3VsdD47XG4gIFxuICAvLyBFdmVudCBzeXN0ZW1cbiAgb24oZXZlbnQ6IFRyYW5zcG9ydEV2ZW50IHwgc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcik6IHZvaWQ7XG4gIG9mZihldmVudDogVHJhbnNwb3J0RXZlbnQgfCBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyKTogdm9pZDtcbiAgZW1pdChldmVudDogVHJhbnNwb3J0RXZlbnQgfCBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkO1xufVxuIiwiLyoqXG4gKiBPbmJvYXJkaW5nV2l6YXJkIC0gSW50ZWxsaWdlbnQgZmlyc3QtdGltZSBzZXR1cCBhbmQgdHJhbnNwb3J0IG9wdGltaXphdGlvblxuICovXG5cbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIE5vdGljZSwgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVHJhbnNwb3J0TWFuYWdlciB9IGZyb20gJy4uL2RldnBpcGUvVHJhbnNwb3J0TWFuYWdlcic7XG5pbXBvcnQgeyBUcmFuc3BvcnRUeXBlIH0gZnJvbSAnLi4vZGV2cGlwZS90cmFuc3BvcnRzL0RldlBpcGVUcmFuc3BvcnQnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciB9IGZyb20gJy4uL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuaW1wb3J0IFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT25ib2FyZGluZ1dpemFyZENvbmZpZyB7XG4gIHNraXBFbnZpcm9ubWVudERldGVjdGlvbj86IGJvb2xlYW47XG4gIGVuYWJsZVRlbGVtZXRyeT86IGJvb2xlYW47XG4gIHNraXBWYWxpZGF0aW9uPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbnZpcm9ubWVudENhcGFiaWxpdGllcyB7XG4gIHBsYXRmb3JtOiAnYnJvd3NlcicgfCAnbm9kZScgfCAnb2JzaWRpYW4nO1xuICB3ZWJTb2NrZXRTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gIGZpbGVTeXN0ZW1BY2Nlc3M6IGJvb2xlYW47XG4gIGh0dHBDYXBhYmlsaXRpZXM6IGJvb2xlYW47XG4gIHJlY29tbWVuZGVkVHJhbnNwb3J0OiBzdHJpbmc7XG4gIHBlcmZvcm1hbmNlRXN0aW1hdGU6ICdleGNlbGxlbnQnIHwgJ2dvb2QnIHwgJ2ZhaXInIHwgJ3Bvb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9uYm9hcmRpbmdQcm9ncmVzcyB7XG4gIGN1cnJlbnRTdGVwOiBudW1iZXI7XG4gIHRvdGFsU3RlcHM6IG51bWJlcjtcbiAgY29tcGxldGVkU3RlcHM6IGJvb2xlYW5bXTtcbiAgdXNlclByZWZlcmVuY2VzOiBPbmJvYXJkaW5nUHJlZmVyZW5jZXM7XG4gIGRldGVjdGVkQ2FwYWJpbGl0aWVzPzogRW52aXJvbm1lbnRDYXBhYmlsaXRpZXM7XG4gIHZhbGlkYXRpb25SZXN1bHRzPzogVmFsaWRhdGlvblJlc3VsdHM7XG59XG5cbmludGVyZmFjZSBPbmJvYXJkaW5nUHJlZmVyZW5jZXMge1xuICBwcmltYXJ5VHJhbnNwb3J0Pzogc3RyaW5nO1xuICBlbmFibGVSZWFsVGltZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHBlcmZvcm1hbmNlTW9kZTogJ2JhbGFuY2VkJyB8ICdwZXJmb3JtYW5jZScgfCAncmVsaWFiaWxpdHknO1xuICBlbmFibGVBbmFseXRpY3M6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBWYWxpZGF0aW9uUmVzdWx0cyB7XG4gIHRyYW5zcG9ydHNXb3JraW5nOiBzdHJpbmdbXTtcbiAgdHJhbnNwb3J0c0ZhaWxpbmc6IHN0cmluZ1tdO1xuICByZWNvbW1lbmRlZENvbmZpZ3VyYXRpb246IGFueTtcbiAgcGVyZm9ybWFuY2VCYXNlbGluZTogYW55O1xufVxuXG5lbnVtIE9uYm9hcmRpbmdTdGVwIHtcbiAgV0VMQ09NRSA9IDAsXG4gIEVOVklST05NRU5UX0RFVEVDVElPTiA9IDEsXG4gIFBSRUZFUkVOQ0VTID0gMixcbiAgVkFMSURBVElPTiA9IDMsXG4gIENPTVBMRVRJT04gPSA0XG59XG5cbmV4cG9ydCBjbGFzcyBPbmJvYXJkaW5nV2l6YXJkIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGN1cnJlbnRTdGVwOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHRvdGFsU3RlcHM6IG51bWJlciA9IDU7XG4gIHByaXZhdGUgcHJvZ3Jlc3M6IE9uYm9hcmRpbmdQcm9ncmVzcztcbiAgcHJpdmF0ZSBjb25maWc6IE9uYm9hcmRpbmdXaXphcmRDb25maWc7XG4gIHByaXZhdGUgdHJhbnNwb3J0TWFuYWdlcjogVHJhbnNwb3J0TWFuYWdlcjtcbiAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIFxuICBwcml2YXRlIHN0ZXBFbGVtZW50czogSFRNTEVsZW1lbnRbXSA9IFtdO1xuICBwcml2YXRlIHByb2dyZXNzQmFyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbmV4dEJ1dHRvbiE6IEJ1dHRvbkNvbXBvbmVudDtcbiAgcHJpdmF0ZSBwcmV2aW91c0J1dHRvbiE6IEJ1dHRvbkNvbXBvbmVudDtcbiAgcHJpdmF0ZSBza2lwQnV0dG9uITogQnV0dG9uQ29tcG9uZW50O1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4sIGNvbmZpZzogT25ib2FyZGluZ1dpemFyZENvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHRyYW5zcG9ydCBtYW5hZ2VyIHdpdGggZGVmYXVsdCBjb25maWdcbiAgICBjb25zdCB0cmFuc3BvcnRDb25maWcgPSB7XG4gICAgICBzZWxlY3Rpb25Dcml0ZXJpYToge1xuICAgICAgICBsYXRlbmN5V2VpZ2h0OiAwLjMsXG4gICAgICAgIHJlbGlhYmlsaXR5V2VpZ2h0OiAwLjQsXG4gICAgICAgIGNhcGFiaWxpdHlXZWlnaHQ6IDAuMixcbiAgICAgICAgY29zdFdlaWdodDogMC4xXG4gICAgICB9LFxuICAgICAgZmFsbGJhY2tDaGFpbjogW1RyYW5zcG9ydFR5cGUuSFRUUCwgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTV0sXG4gICAgICB0cmFuc3BvcnRDb25maWdzOiB7XG4gICAgICAgIGh0dHA6IHsgXG4gICAgICAgICAgc2VydmVyVXJsOiBwbHVnaW4uc2V0dGluZ3MuYmFja2VuZFVybCxcbiAgICAgICAgICB0aW1lb3V0OiAzMDAwMCxcbiAgICAgICAgICByZXRyeUF0dGVtcHRzOiAzLFxuICAgICAgICAgIGRlYnVnOiBwbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMudHJhbnNwb3J0TWFuYWdlciA9IG5ldyBUcmFuc3BvcnRNYW5hZ2VyKHRyYW5zcG9ydENvbmZpZyk7XG4gICAgXG4gICAgdGhpcy5wcm9ncmVzcyA9IHtcbiAgICAgIGN1cnJlbnRTdGVwOiAwLFxuICAgICAgdG90YWxTdGVwczogdGhpcy50b3RhbFN0ZXBzLFxuICAgICAgY29tcGxldGVkU3RlcHM6IG5ldyBBcnJheSh0aGlzLnRvdGFsU3RlcHMpLmZpbGwoZmFsc2UpLFxuICAgICAgdXNlclByZWZlcmVuY2VzOiB7XG4gICAgICAgIGVuYWJsZVJlYWxUaW1lVXBkYXRlczogdHJ1ZSxcbiAgICAgICAgcGVyZm9ybWFuY2VNb2RlOiAnYmFsYW5jZWQnLFxuICAgICAgICBlbmFibGVBbmFseXRpY3M6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5tb2RhbEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LW9uYm9hcmRpbmcnKTtcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBcbiAgICAvLyBBZGQgQ1NTIGNsYXNzZXMgZm9yIHN0eWxpbmdcbiAgICB0aGlzLm1vZGFsRWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3Qtb25ib2FyZGluZy1tb2RhbCcpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBoZWFkZXJcbiAgICB0aGlzLmNyZWF0ZUhlYWRlcigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBwcm9ncmVzcyBiYXJcbiAgICB0aGlzLmNyZWF0ZVByb2dyZXNzQmFyKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHN0ZXAgY29udGFpbmVyXG4gICAgY29uc3Qgc3RlcENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ29uYm9hcmRpbmctc3RlcC1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgbmF2aWdhdGlvblxuICAgIHRoaXMuY3JlYXRlTmF2aWdhdGlvbigpO1xuICAgIFxuICAgIC8vIFN0YXJ0IHdpdGggZmlyc3Qgc3RlcFxuICAgIGF3YWl0IHRoaXMucmVuZGVyQ3VycmVudFN0ZXAoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlSGVhZGVyKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGhlYWRlciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ29uYm9hcmRpbmctaGVhZGVyJyk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1dlbGNvbWUgdG8gVmF1bHRQaWxvdCcgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdMZXRcXCdzIHNldCB1cCB5b3VyIG9wdGltYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGJlc3QgZXhwZXJpZW5jZScsXG4gICAgICBjbHM6ICdvbmJvYXJkaW5nLXN1YnRpdGxlJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcm9ncmVzc0JhcigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb25zdCBwcm9ncmVzc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ29uYm9hcmRpbmctcHJvZ3Jlc3MnKTtcbiAgICBcbiAgICAvLyBTdGVwIGluZGljYXRvcnNcbiAgICBjb25zdCBzdGVwc0NvbnRhaW5lciA9IHByb2dyZXNzQ29udGFpbmVyLmNyZWF0ZURpdigncHJvZ3Jlc3Mtc3RlcHMnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudG90YWxTdGVwczsgaSsrKSB7XG4gICAgICBjb25zdCBzdGVwID0gc3RlcHNDb250YWluZXIuY3JlYXRlRGl2KCdwcm9ncmVzcy1zdGVwJyk7XG4gICAgICBzdGVwLmFkZENsYXNzKGkgPT09IDAgPyAnYWN0aXZlJyA6ICdpbmFjdGl2ZScpO1xuICAgICAgc3RlcC5jcmVhdGVTcGFuKHsgdGV4dDogKGkgKyAxKS50b1N0cmluZygpIH0pO1xuICAgICAgdGhpcy5zdGVwRWxlbWVudHMucHVzaChzdGVwKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUHJvZ3Jlc3MgYmFyXG4gICAgdGhpcy5wcm9ncmVzc0JhciA9IHByb2dyZXNzQ29udGFpbmVyLmNyZWF0ZURpdigncHJvZ3Jlc3MtYmFyJyk7XG4gICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gdGhpcy5wcm9ncmVzc0Jhci5jcmVhdGVEaXYoJ3Byb2dyZXNzLWZpbGwnKTtcbiAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSBgJHsoMSAvIHRoaXMudG90YWxTdGVwcykgKiAxMDB9JWA7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU5hdmlnYXRpb24oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29uc3QgbmF2aWdhdGlvbiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ29uYm9hcmRpbmctbmF2aWdhdGlvbicpO1xuICAgIFxuICAgIC8vIFByZXZpb3VzIGJ1dHRvblxuICAgIHRoaXMucHJldmlvdXNCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KG5hdmlnYXRpb24pXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnUHJldmlvdXMnKVxuICAgICAgLnNldENsYXNzKCdtb2QtbXV0ZWQnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5wcmV2aW91c1N0ZXAoKSk7XG4gICAgXG4gICAgLy8gU2tpcCBidXR0b25cbiAgICB0aGlzLnNraXBCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KG5hdmlnYXRpb24pXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnU2tpcCBTZXR1cCcpXG4gICAgICAuc2V0Q2xhc3MoJ21vZC1tdXRlZCcpXG4gICAgICAub25DbGljaygoKSA9PiB0aGlzLnNraXBPbmJvYXJkaW5nKCkpO1xuICAgIFxuICAgIC8vIE5leHQgYnV0dG9uXG4gICAgdGhpcy5uZXh0QnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChuYXZpZ2F0aW9uKVxuICAgICAgLnNldEJ1dHRvblRleHQoJ05leHQnKVxuICAgICAgLnNldEN0YSgpXG4gICAgICAub25DbGljaygoKSA9PiB0aGlzLm5leHRTdGVwKCkpO1xuICAgIFxuICAgIHRoaXMudXBkYXRlTmF2aWdhdGlvblN0YXRlKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlckN1cnJlbnRTdGVwKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IHN0ZXBDb250YWluZXIgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLm9uYm9hcmRpbmctc3RlcC1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcbiAgICBzdGVwQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgdGhpcy51cGRhdGVQcm9ncmVzc0luZGljYXRvcnMoKTtcbiAgICBcbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFN0ZXApIHtcbiAgICAgIGNhc2UgT25ib2FyZGluZ1N0ZXAuV0VMQ09NRTpcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJXZWxjb21lU3RlcChzdGVwQ29udGFpbmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE9uYm9hcmRpbmdTdGVwLkVOVklST05NRU5UX0RFVEVDVElPTjpcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJFbnZpcm9ubWVudFN0ZXAoc3RlcENvbnRhaW5lcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPbmJvYXJkaW5nU3RlcC5QUkVGRVJFTkNFUzpcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJQcmVmZXJlbmNlc1N0ZXAoc3RlcENvbnRhaW5lcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPbmJvYXJkaW5nU3RlcC5WQUxJREFUSU9OOlxuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclZhbGlkYXRpb25TdGVwKHN0ZXBDb250YWluZXIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT25ib2FyZGluZ1N0ZXAuQ09NUExFVElPTjpcbiAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJDb21wbGV0aW9uU3RlcChzdGVwQ29udGFpbmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlTmF2aWdhdGlvblN0YXRlKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlcldlbGNvbWVTdGVwKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzdGVwID0gY29udGFpbmVyLmNyZWF0ZURpdignb25ib2FyZGluZy1zdGVwIHdlbGNvbWUtc3RlcCcpO1xuICAgIFxuICAgIHN0ZXAuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnV2VsY29tZSB0byBWYXVsdFBpbG90JyB9KTtcbiAgICBzdGVwLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdWYXVsdFBpbG90IHByb3ZpZGVzIGludGVsbGlnZW50IHRyYW5zcG9ydCBtYW5hZ2VtZW50IGFuZCBvcHRpbWl6YXRpb24gZm9yIHlvdXIgT2JzaWRpYW4gZXhwZXJpZW5jZS4gVGhpcyB3aXphcmQgd2lsbCBoZWxwIHlvdSBjb25maWd1cmUgdGhlIG9wdGltYWwgc2V0dGluZ3MgZm9yIHlvdXIgZW52aXJvbm1lbnQuJ1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGZlYXR1cmVzID0gc3RlcC5jcmVhdGVEaXYoJ3dlbGNvbWUtZmVhdHVyZXMnKTtcbiAgICBmZWF0dXJlcy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdXaGF0IHlvdVxcJ2xsIGdldDonIH0pO1xuICAgIFxuICAgIGNvbnN0IGZlYXR1cmVMaXN0ID0gZmVhdHVyZXMuY3JlYXRlRWwoJ3VsJyk7XG4gICAgZmVhdHVyZUxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn8J+agCBJbnRlbGxpZ2VudCB0cmFuc3BvcnQgc2VsZWN0aW9uIGFuZCBmYWlsb3ZlcicgfSk7XG4gICAgZmVhdHVyZUxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn8J+TiiBSZWFsLXRpbWUgcGVyZm9ybWFuY2UgbW9uaXRvcmluZycgfSk7XG4gICAgZmVhdHVyZUxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn8J+SoSBBSS1wb3dlcmVkIG9wdGltaXphdGlvbiBzdWdnZXN0aW9ucycgfSk7XG4gICAgZmVhdHVyZUxpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn8J+UpyBBZHZhbmNlZCBjb25maWd1cmF0aW9uIG9wdGlvbnMnIH0pO1xuICAgIGZlYXR1cmVMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/Cfk4ggVXNhZ2UgYW5hbHl0aWNzIGFuZCBpbnNpZ2h0cycgfSk7XG4gICAgXG4gICAgY29uc3QgZXN0aW1hdGVkVGltZSA9IHN0ZXAuY3JlYXRlRGl2KCdlc3RpbWF0ZWQtdGltZScpO1xuICAgIGVzdGltYXRlZFRpbWUuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ+KPse+4jyBFc3RpbWF0ZWQgc2V0dXAgdGltZTogMi0zIG1pbnV0ZXMnLFxuICAgICAgY2xzOiAnbXV0ZWQnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlckVudmlyb25tZW50U3RlcChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgc3RlcCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ29uYm9hcmRpbmctc3RlcCBlbnZpcm9ubWVudC1zdGVwJyk7XG4gICAgXG4gICAgc3RlcC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdFbnZpcm9ubWVudCBEZXRlY3Rpb24nIH0pO1xuICAgIHN0ZXAuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdBbmFseXppbmcgeW91ciBlbnZpcm9ubWVudCB0byByZWNvbW1lbmQgb3B0aW1hbCB0cmFuc3BvcnQgY29uZmlndXJhdGlvbi4uLicgfSk7XG4gICAgXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5za2lwRW52aXJvbm1lbnREZXRlY3Rpb24gJiYgIXRoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXMpIHtcbiAgICAgIGNvbnN0IGRldGVjdGlvblN0YXR1cyA9IHN0ZXAuY3JlYXRlRGl2KCdkZXRlY3Rpb24tc3RhdHVzJyk7XG4gICAgICBkZXRlY3Rpb25TdGF0dXMuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICfwn5SNIERldGVjdGluZyBjYXBhYmlsaXRpZXMuLi4nLCBjbHM6ICdkZXRlY3Rpb24tbG9hZGluZycgfSk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXMgPSBhd2FpdCB0aGlzLmRldGVjdEVudmlyb25tZW50KCk7XG4gICAgICAgIHRoaXMucmVuZGVyRW52aXJvbm1lbnRSZXN1bHRzKHN0ZXApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJFbnZpcm9ubWVudEVycm9yKHN0ZXAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXMpIHtcbiAgICAgIHRoaXMucmVuZGVyRW52aXJvbm1lbnRSZXN1bHRzKHN0ZXApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGV0ZWN0RW52aXJvbm1lbnQoKTogUHJvbWlzZTxFbnZpcm9ubWVudENhcGFiaWxpdGllcz4ge1xuICAgIC8vIFNpbXVsYXRlIGRldGVjdGlvbiBwcm9jZXNzIHdpdGggcHJvZ3Jlc3MgdXBkYXRlc1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgXG4gICAgY29uc3QgZW52SW5mbyA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgXG4gICAgLy8gRW5zdXJlIHBsYXRmb3JtIG1hdGNoZXMgb3VyIGludGVyZmFjZVxuICAgIGxldCBwbGF0Zm9ybTogJ2Jyb3dzZXInIHwgJ25vZGUnIHwgJ29ic2lkaWFuJyA9ICdvYnNpZGlhbic7XG4gICAgaWYgKGVudkluZm8ucGxhdGZvcm0gPT09ICdicm93c2VyJyB8fCBlbnZJbmZvLnBsYXRmb3JtID09PSAnbm9kZScgfHwgZW52SW5mby5wbGF0Zm9ybSA9PT0gJ29ic2lkaWFuJykge1xuICAgICAgcGxhdGZvcm0gPSBlbnZJbmZvLnBsYXRmb3JtO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjYXBhYmlsaXRpZXM6IEVudmlyb25tZW50Q2FwYWJpbGl0aWVzID0ge1xuICAgICAgcGxhdGZvcm0sXG4gICAgICB3ZWJTb2NrZXRTdXBwb3J0ZWQ6IGVudkluZm8uaGFzV2ViU29ja2V0LFxuICAgICAgZmlsZVN5c3RlbUFjY2VzczogZW52SW5mby5oYXNGaWxlU3lzdGVtLFxuICAgICAgaHR0cENhcGFiaWxpdGllczogZW52SW5mby5oYXNIVFRQLFxuICAgICAgcmVjb21tZW5kZWRUcmFuc3BvcnQ6ICdodHRwJywgLy8gV2lsbCBiZSBkZXRlcm1pbmVkIGJ5IGFuYWx5c2lzXG4gICAgICBwZXJmb3JtYW5jZUVzdGltYXRlOiAnZ29vZCdcbiAgICB9O1xuICAgIFxuICAgIC8vIERldGVybWluZSByZWNvbW1lbmRlZCB0cmFuc3BvcnRcbiAgICBpZiAoY2FwYWJpbGl0aWVzLndlYlNvY2tldFN1cHBvcnRlZCAmJiBjYXBhYmlsaXRpZXMuaHR0cENhcGFiaWxpdGllcykge1xuICAgICAgY2FwYWJpbGl0aWVzLnJlY29tbWVuZGVkVHJhbnNwb3J0ID0gJ3dlYnNvY2tldCc7XG4gICAgICBjYXBhYmlsaXRpZXMucGVyZm9ybWFuY2VFc3RpbWF0ZSA9ICdleGNlbGxlbnQnO1xuICAgIH0gZWxzZSBpZiAoY2FwYWJpbGl0aWVzLmh0dHBDYXBhYmlsaXRpZXMpIHtcbiAgICAgIGNhcGFiaWxpdGllcy5yZWNvbW1lbmRlZFRyYW5zcG9ydCA9ICdodHRwJztcbiAgICAgIGNhcGFiaWxpdGllcy5wZXJmb3JtYW5jZUVzdGltYXRlID0gJ2dvb2QnO1xuICAgIH0gZWxzZSBpZiAoY2FwYWJpbGl0aWVzLmZpbGVTeXN0ZW1BY2Nlc3MpIHtcbiAgICAgIGNhcGFiaWxpdGllcy5yZWNvbW1lbmRlZFRyYW5zcG9ydCA9ICdmaWxlc3lzdGVtJztcbiAgICAgIGNhcGFiaWxpdGllcy5wZXJmb3JtYW5jZUVzdGltYXRlID0gJ2ZhaXInO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY2FwYWJpbGl0aWVzO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbnZpcm9ubWVudFJlc3VsdHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdlbnZpcm9ubWVudC1yZXN1bHRzJyk7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdGhpcy5wcm9ncmVzcy5kZXRlY3RlZENhcGFiaWxpdGllcyE7XG4gICAgXG4gICAgcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfinIUgRGV0ZWN0aW9uIENvbXBsZXRlJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYXBhYmlsaXRpZXNMaXN0ID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcGFiaWxpdGllcy1saXN0Jyk7XG4gICAgXG4gICAgLy8gV2ViU29ja2V0IGNhcGFiaWxpdHlcbiAgICBjb25zdCB3c0NhcGFiaWxpdHkgPSBjYXBhYmlsaXRpZXNMaXN0LmNyZWF0ZURpdignY2FwYWJpbGl0eS1pdGVtJyk7XG4gICAgd3NDYXBhYmlsaXR5LmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGNhcGFiaWxpdGllcy53ZWJTb2NrZXRTdXBwb3J0ZWQgPyAn4pyFJyA6ICfinYwnLFxuICAgICAgY2xzOiAnY2FwYWJpbGl0eS1pY29uJ1xuICAgIH0pO1xuICAgIHdzQ2FwYWJpbGl0eS5jcmVhdGVTcGFuKHsgdGV4dDogJ1dlYlNvY2tldCBTdXBwb3J0JyB9KTtcbiAgICBcbiAgICAvLyBIVFRQIGNhcGFiaWxpdHlcbiAgICBjb25zdCBodHRwQ2FwYWJpbGl0eSA9IGNhcGFiaWxpdGllc0xpc3QuY3JlYXRlRGl2KCdjYXBhYmlsaXR5LWl0ZW0nKTtcbiAgICBodHRwQ2FwYWJpbGl0eS5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBjYXBhYmlsaXRpZXMuaHR0cENhcGFiaWxpdGllcyA/ICfinIUnIDogJ+KdjCcsXG4gICAgICBjbHM6ICdjYXBhYmlsaXR5LWljb24nXG4gICAgfSk7XG4gICAgaHR0cENhcGFiaWxpdHkuY3JlYXRlU3Bhbih7IHRleHQ6ICdIVFRQIFRyYW5zcG9ydCcgfSk7XG4gICAgXG4gICAgLy8gRmlsZVN5c3RlbSBjYXBhYmlsaXR5XG4gICAgY29uc3QgZnNDYXBhYmlsaXR5ID0gY2FwYWJpbGl0aWVzTGlzdC5jcmVhdGVEaXYoJ2NhcGFiaWxpdHktaXRlbScpO1xuICAgIGZzQ2FwYWJpbGl0eS5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBjYXBhYmlsaXRpZXMuZmlsZVN5c3RlbUFjY2VzcyA/ICfinIUnIDogJ+KdjCcsXG4gICAgICBjbHM6ICdjYXBhYmlsaXR5LWljb24nXG4gICAgfSk7XG4gICAgZnNDYXBhYmlsaXR5LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnRmlsZVN5c3RlbSBBY2Nlc3MnIH0pO1xuICAgIFxuICAgIC8vIFJlY29tbWVuZGF0aW9uXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb24gPSByZXN1bHRzQ29udGFpbmVyLmNyZWF0ZURpdignZW52aXJvbm1lbnQtcmVjb21tZW5kYXRpb24nKTtcbiAgICByZWNvbW1lbmRhdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdSZWNvbW1lbmRhdGlvbicgfSk7XG4gICAgcmVjb21tZW5kYXRpb24uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYEJhc2VkIG9uIHlvdXIgZW52aXJvbm1lbnQsIHdlIHJlY29tbWVuZCB1c2luZyAke2NhcGFiaWxpdGllcy5yZWNvbW1lbmRlZFRyYW5zcG9ydH0gdHJhbnNwb3J0IGZvciAke2NhcGFiaWxpdGllcy5wZXJmb3JtYW5jZUVzdGltYXRlfSBwZXJmb3JtYW5jZS5gXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckVudmlyb25tZW50RXJyb3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZXJyb3I6IGFueSkge1xuICAgIGNvbnN0IGVycm9yQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignZW52aXJvbm1lbnQtZXJyb3InKTtcbiAgICBlcnJvckNvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfimqDvuI8gRGV0ZWN0aW9uIEZhaWxlZCcgfSk7XG4gICAgZXJyb3JDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ1VuYWJsZSB0byBhdXRvbWF0aWNhbGx5IGRldGVjdCB5b3VyIGVudmlyb25tZW50IGNhcGFiaWxpdGllcy4gWW91IGNhbiBwcm9jZWVkIHdpdGggZGVmYXVsdCBzZXR0aW5ncyBvciBtYW51YWxseSBjb25maWd1cmUgbGF0ZXIuJ1xuICAgIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIGVycm9yQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgdGV4dDogYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgY2xzOiAnZXJyb3ItZGV0YWlscydcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVuZGVyUHJlZmVyZW5jZXNTdGVwKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzdGVwID0gY29udGFpbmVyLmNyZWF0ZURpdignb25ib2FyZGluZy1zdGVwIHByZWZlcmVuY2VzLXN0ZXAnKTtcbiAgICBcbiAgICBzdGVwLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BlcmZvcm1hbmNlIFByZWZlcmVuY2VzJyB9KTtcbiAgICBzdGVwLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ29uZmlndXJlIHlvdXIgcHJlZmVyZW5jZXMgZm9yIG9wdGltYWwgcGVyZm9ybWFuY2U6JyB9KTtcbiAgICBcbiAgICBjb25zdCBwcmVmZXJlbmNlc0NvbnRhaW5lciA9IHN0ZXAuY3JlYXRlRGl2KCdwcmVmZXJlbmNlcy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBQZXJmb3JtYW5jZSBtb2RlIHNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhwcmVmZXJlbmNlc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdQZXJmb3JtYW5jZSBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgeW91ciBwcmVmZXJyZWQgYmFsYW5jZSBiZXR3ZWVuIHNwZWVkIGFuZCByZWxpYWJpbGl0eScpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ3BlcmZvcm1hbmNlJywgJ1BlcmZvcm1hbmNlIChQcmlvcml0aXplIFNwZWVkKScpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2JhbGFuY2VkJywgJ0JhbGFuY2VkIChSZWNvbW1lbmRlZCknKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdyZWxpYWJpbGl0eScsICdSZWxpYWJpbGl0eSAoUHJpb3JpdGl6ZSBTdGFiaWxpdHkpJyk7XG4gICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucHJvZ3Jlc3MudXNlclByZWZlcmVuY2VzLnBlcmZvcm1hbmNlTW9kZSk7XG4gICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLnByb2dyZXNzLnVzZXJQcmVmZXJlbmNlcy5wZXJmb3JtYW5jZU1vZGUgPSB2YWx1ZSBhcyBhbnk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gUmVhbC10aW1lIHVwZGF0ZXMgc2V0dGluZ1xuICAgIG5ldyBTZXR0aW5nKHByZWZlcmVuY2VzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1JlYWwtdGltZSBVcGRhdGVzJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgcmVhbC10aW1lIGRhc2hib2FyZCB1cGRhdGVzIGFuZCBsaXZlIG1vbml0b3JpbmcnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMuZW5hYmxlUmVhbFRpbWVVcGRhdGVzKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLnByb2dyZXNzLnVzZXJQcmVmZXJlbmNlcy5lbmFibGVSZWFsVGltZVVwZGF0ZXMgPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBBbmFseXRpY3Mgc2V0dGluZ1xuICAgIG5ldyBTZXR0aW5nKHByZWZlcmVuY2VzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1VzYWdlIEFuYWx5dGljcycpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGFub255bW91cyB1c2FnZSBhbmFseXRpY3MgdG8gaW1wcm92ZSByZWNvbW1lbmRhdGlvbnMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMuZW5hYmxlQW5hbHl0aWNzKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLnByb2dyZXNzLnVzZXJQcmVmZXJlbmNlcy5lbmFibGVBbmFseXRpY3MgPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVuZGVyVmFsaWRhdGlvblN0ZXAoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHN0ZXAgPSBjb250YWluZXIuY3JlYXRlRGl2KCdvbmJvYXJkaW5nLXN0ZXAgdmFsaWRhdGlvbi1zdGVwJyk7XG4gICAgXG4gICAgc3RlcC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25maWd1cmF0aW9uIFZhbGlkYXRpb24nIH0pO1xuICAgIHN0ZXAuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdUZXN0aW5nIHlvdXIgY29uZmlndXJhdGlvbiBhbmQgZXN0YWJsaXNoaW5nIHBlcmZvcm1hbmNlIGJhc2VsaW5lLi4uJyB9KTtcbiAgICBcbiAgICBpZiAoIXRoaXMuY29uZmlnLnNraXBWYWxpZGF0aW9uICYmICF0aGlzLnByb2dyZXNzLnZhbGlkYXRpb25SZXN1bHRzKSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uU3RhdHVzID0gc3RlcC5jcmVhdGVEaXYoJ3ZhbGlkYXRpb24tc3RhdHVzJyk7XG4gICAgICB2YWxpZGF0aW9uU3RhdHVzLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAn8J+nqiBSdW5uaW5nIHZhbGlkYXRpb24gdGVzdHMuLi4nLCBjbHM6ICd2YWxpZGF0aW9uLWxvYWRpbmcnIH0pO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnByb2dyZXNzLnZhbGlkYXRpb25SZXN1bHRzID0gYXdhaXQgdGhpcy52YWxpZGF0ZUNvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgdGhpcy5yZW5kZXJWYWxpZGF0aW9uUmVzdWx0cyhzdGVwKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRoaXMucmVuZGVyVmFsaWRhdGlvbkVycm9yKHN0ZXAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvZ3Jlc3MudmFsaWRhdGlvblJlc3VsdHMpIHtcbiAgICAgIHRoaXMucmVuZGVyVmFsaWRhdGlvblJlc3VsdHMoc3RlcCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUNvbmZpZ3VyYXRpb24oKTogUHJvbWlzZTxWYWxpZGF0aW9uUmVzdWx0cz4ge1xuICAgIC8vIFNpbXVsYXRlIHZhbGlkYXRpb24gcHJvY2Vzc1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDAwKSk7XG4gICAgXG4gICAgY29uc3QgcmVzdWx0czogVmFsaWRhdGlvblJlc3VsdHMgPSB7XG4gICAgICB0cmFuc3BvcnRzV29ya2luZzogWydodHRwJ10sXG4gICAgICB0cmFuc3BvcnRzRmFpbGluZzogW10sXG4gICAgICByZWNvbW1lbmRlZENvbmZpZ3VyYXRpb246IHt9LFxuICAgICAgcGVyZm9ybWFuY2VCYXNlbGluZToge1xuICAgICAgICBhdmdSZXNwb25zZVRpbWU6IDE1MCxcbiAgICAgICAgcmVsaWFiaWxpdHk6IDAuOTgsXG4gICAgICAgIHRocm91Z2hwdXQ6IDEwMDBcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFRlc3QgV2ViU29ja2V0IGlmIHN1cHBvcnRlZFxuICAgIGlmICh0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzPy53ZWJTb2NrZXRTdXBwb3J0ZWQpIHtcbiAgICAgIHJlc3VsdHMudHJhbnNwb3J0c1dvcmtpbmcucHVzaCgnd2Vic29ja2V0Jyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFRlc3QgRmlsZVN5c3RlbSBpZiBzdXBwb3J0ZWRcbiAgICBpZiAodGhpcy5wcm9ncmVzcy5kZXRlY3RlZENhcGFiaWxpdGllcz8uZmlsZVN5c3RlbUFjY2Vzcykge1xuICAgICAgcmVzdWx0cy50cmFuc3BvcnRzV29ya2luZy5wdXNoKCdmaWxlc3lzdGVtJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJWYWxpZGF0aW9uUmVzdWx0cyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcmVzdWx0c0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3ZhbGlkYXRpb24tcmVzdWx0cycpO1xuICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnByb2dyZXNzLnZhbGlkYXRpb25SZXN1bHRzITtcbiAgICBcbiAgICByZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ+KchSBWYWxpZGF0aW9uIENvbXBsZXRlJyB9KTtcbiAgICBcbiAgICAvLyBXb3JraW5nIHRyYW5zcG9ydHNcbiAgICBjb25zdCB3b3JraW5nQ29udGFpbmVyID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3dvcmtpbmctdHJhbnNwb3J0cycpO1xuICAgIHdvcmtpbmdDb250YWluZXIuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnV29ya2luZyBUcmFuc3BvcnRzOicgfSk7XG4gICAgY29uc3Qgd29ya2luZ0xpc3QgPSB3b3JraW5nQ29udGFpbmVyLmNyZWF0ZUVsKCd1bCcpO1xuICAgIHJlc3VsdHMudHJhbnNwb3J0c1dvcmtpbmcuZm9yRWFjaCh0cmFuc3BvcnQgPT4ge1xuICAgICAgd29ya2luZ0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBg4pyFICR7dHJhbnNwb3J0LnRvVXBwZXJDYXNlKCl9YCB9KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBQZXJmb3JtYW5jZSBiYXNlbGluZVxuICAgIGNvbnN0IHBlcmZvcm1hbmNlQ29udGFpbmVyID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3BlcmZvcm1hbmNlLWJhc2VsaW5lJyk7XG4gICAgcGVyZm9ybWFuY2VDb250YWluZXIuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnUGVyZm9ybWFuY2UgQmFzZWxpbmU6JyB9KTtcbiAgICBjb25zdCBwZXJmTGlzdCA9IHBlcmZvcm1hbmNlQ29udGFpbmVyLmNyZWF0ZUVsKCd1bCcpO1xuICAgIHBlcmZMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYEF2ZXJhZ2UgUmVzcG9uc2UgVGltZTogJHtyZXN1bHRzLnBlcmZvcm1hbmNlQmFzZWxpbmUuYXZnUmVzcG9uc2VUaW1lfW1zYCB9KTtcbiAgICBwZXJmTGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGBSZWxpYWJpbGl0eTogJHsocmVzdWx0cy5wZXJmb3JtYW5jZUJhc2VsaW5lLnJlbGlhYmlsaXR5ICogMTAwKS50b0ZpeGVkKDEpfSVgIH0pO1xuICAgIHBlcmZMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYFRocm91Z2hwdXQ6ICR7cmVzdWx0cy5wZXJmb3JtYW5jZUJhc2VsaW5lLnRocm91Z2hwdXR9IHJlcXVlc3RzL21pbmAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclZhbGlkYXRpb25FcnJvcihjb250YWluZXI6IEhUTUxFbGVtZW50LCBlcnJvcjogYW55KSB7XG4gICAgY29uc3QgZXJyb3JDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLWVycm9yJyk7XG4gICAgZXJyb3JDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn4pqg77iPIFZhbGlkYXRpb24gSXNzdWVzJyB9KTtcbiAgICBlcnJvckNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnU29tZSB2YWxpZGF0aW9uIHRlc3RzIGZhaWxlZCwgYnV0IHlvdSBjYW4gc3RpbGwgcHJvY2VlZC4gWW91IGNhbiBhZGp1c3Qgc2V0dGluZ3MgbGF0ZXIgaWYgbmVlZGVkLidcbiAgICB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBlcnJvckNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgIHRleHQ6IGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgIGNsczogJ2Vycm9yLWRldGFpbHMnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlckNvbXBsZXRpb25TdGVwKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzdGVwID0gY29udGFpbmVyLmNyZWF0ZURpdignb25ib2FyZGluZy1zdGVwIGNvbXBsZXRpb24tc3RlcCcpO1xuICAgIFxuICAgIHN0ZXAuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn8J+OiSBTZXR1cCBDb21wbGV0ZSEnIH0pO1xuICAgIHN0ZXAuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdWYXVsdFBpbG90IGhhcyBiZWVuIGNvbmZpZ3VyZWQgd2l0aCB5b3VyIG9wdGltYWwgc2V0dGluZ3MuJyB9KTtcbiAgICBcbiAgICBjb25zdCBzdW1tYXJ5ID0gc3RlcC5jcmVhdGVEaXYoJ3NldHVwLXN1bW1hcnknKTtcbiAgICBzdW1tYXJ5LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvbmZpZ3VyYXRpb24gU3VtbWFyeTonIH0pO1xuICAgIFxuICAgIGNvbnN0IHN1bW1hcnlMaXN0ID0gc3VtbWFyeS5jcmVhdGVFbCgndWwnKTtcbiAgICBzdW1tYXJ5TGlzdC5jcmVhdGVFbCgnbGknLCB7IFxuICAgICAgdGV4dDogYFBlcmZvcm1hbmNlIE1vZGU6ICR7dGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMucGVyZm9ybWFuY2VNb2RlfWAgXG4gICAgfSk7XG4gICAgc3VtbWFyeUxpc3QuY3JlYXRlRWwoJ2xpJywgeyBcbiAgICAgIHRleHQ6IGBSZWFsLXRpbWUgVXBkYXRlczogJHt0aGlzLnByb2dyZXNzLnVzZXJQcmVmZXJlbmNlcy5lbmFibGVSZWFsVGltZVVwZGF0ZXMgPyAnRW5hYmxlZCcgOiAnRGlzYWJsZWQnfWAgXG4gICAgfSk7XG4gICAgc3VtbWFyeUxpc3QuY3JlYXRlRWwoJ2xpJywgeyBcbiAgICAgIHRleHQ6IGBBbmFseXRpY3M6ICR7dGhpcy5wcm9ncmVzcy51c2VyUHJlZmVyZW5jZXMuZW5hYmxlQW5hbHl0aWNzID8gJ0VuYWJsZWQnIDogJ0Rpc2FibGVkJ31gIFxuICAgIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzKSB7XG4gICAgICBzdW1tYXJ5TGlzdC5jcmVhdGVFbCgnbGknLCB7IFxuICAgICAgICB0ZXh0OiBgUmVjb21tZW5kZWQgVHJhbnNwb3J0OiAke3RoaXMucHJvZ3Jlc3MuZGV0ZWN0ZWRDYXBhYmlsaXRpZXMucmVjb21tZW5kZWRUcmFuc3BvcnR9YCBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBuZXh0U3RlcHMgPSBzdGVwLmNyZWF0ZURpdignbmV4dC1zdGVwcycpO1xuICAgIG5leHRTdGVwcy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdXaGF0XFwncyBOZXh0OicgfSk7XG4gICAgY29uc3QgbmV4dExpc3QgPSBuZXh0U3RlcHMuY3JlYXRlRWwoJ3VsJyk7XG4gICAgbmV4dExpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn8J+TiiBDaGVjayB0aGUgZGFzaGJvYXJkIGZvciByZWFsLXRpbWUgc3RhdHVzJyB9KTtcbiAgICBuZXh0TGlzdC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICfimpnvuI8gQWRqdXN0IGFkdmFuY2VkIHNldHRpbmdzIGFzIG5lZWRlZCcgfSk7XG4gICAgbmV4dExpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAn8J+SoSBSZXZpZXcgQUktcG93ZXJlZCByZWNvbW1lbmRhdGlvbnMnIH0pO1xuICAgIG5leHRMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ/Cfk4ggTW9uaXRvciBwZXJmb3JtYW5jZSBhbmFseXRpY3MnIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzc0luZGljYXRvcnMoKSB7XG4gICAgLy8gVXBkYXRlIHN0ZXAgaW5kaWNhdG9yc1xuICAgIHRoaXMuc3RlcEVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdhY3RpdmUnLCAnY29tcGxldGVkJywgJ2luYWN0aXZlJyk7XG4gICAgICBpZiAoaW5kZXggPCB0aGlzLmN1cnJlbnRTdGVwKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2NvbXBsZXRlZCcpO1xuICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50U3RlcCkge1xuICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJ2luYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gVXBkYXRlIHByb2dyZXNzIGJhclxuICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IHRoaXMucHJvZ3Jlc3NCYXIucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLWZpbGwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAocHJvZ3Jlc3NGaWxsKSB7XG4gICAgICBjb25zdCBwcm9ncmVzcyA9ICgodGhpcy5jdXJyZW50U3RlcCArIDEpIC8gdGhpcy50b3RhbFN0ZXBzKSAqIDEwMDtcbiAgICAgIHByb2dyZXNzRmlsbC5zdHlsZS53aWR0aCA9IGAke3Byb2dyZXNzfSVgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlTmF2aWdhdGlvblN0YXRlKCkge1xuICAgIC8vIFByZXZpb3VzIGJ1dHRvblxuICAgIHRoaXMucHJldmlvdXNCdXR0b24uc2V0RGlzYWJsZWQodGhpcy5jdXJyZW50U3RlcCA9PT0gMCk7XG4gICAgXG4gICAgLy8gTmV4dCBidXR0b25cbiAgICBpZiAodGhpcy5jdXJyZW50U3RlcCA9PT0gdGhpcy50b3RhbFN0ZXBzIC0gMSkge1xuICAgICAgdGhpcy5uZXh0QnV0dG9uLnNldEJ1dHRvblRleHQoJ0ZpbmlzaCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5leHRCdXR0b24uc2V0QnV0dG9uVGV4dCgnTmV4dCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTa2lwIGJ1dHRvbiAtIGhpZGUgb24gbGFzdCBzdGVwXG4gICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPT09IHRoaXMudG90YWxTdGVwcyAtIDEpIHtcbiAgICAgIHRoaXMuc2tpcEJ1dHRvbi5idXR0b25FbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNraXBCdXR0b24uYnV0dG9uRWwuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbmV4dFN0ZXAoKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPCB0aGlzLnRvdGFsU3RlcHMgLSAxKSB7XG4gICAgICB0aGlzLnByb2dyZXNzLmNvbXBsZXRlZFN0ZXBzW3RoaXMuY3VycmVudFN0ZXBdID0gdHJ1ZTtcbiAgICAgIHRoaXMuY3VycmVudFN0ZXArKztcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyQ3VycmVudFN0ZXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmluaXNoIG9uYm9hcmRpbmdcbiAgICAgIGF3YWl0IHRoaXMuZmluaXNoT25ib2FyZGluZygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJldmlvdXNTdGVwKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwID4gMCkge1xuICAgICAgdGhpcy5jdXJyZW50U3RlcC0tO1xuICAgICAgYXdhaXQgdGhpcy5yZW5kZXJDdXJyZW50U3RlcCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2tpcE9uYm9hcmRpbmcoKSB7XG4gICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHNraXAgdGhlIHNldHVwIHdpemFyZD8gWW91IGNhbiBhY2Nlc3MgdGhlc2Ugc2V0dGluZ3MgbGF0ZXIgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncy4nKTtcbiAgICBpZiAoY29uZmlybWVkKSB7XG4gICAgICBhd2FpdCB0aGlzLmZpbmlzaE9uYm9hcmRpbmcodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmaW5pc2hPbmJvYXJkaW5nKHNraXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXNraXBwZWQpIHtcbiAgICAgICAgLy8gQXBwbHkgdGhlIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseUNvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIFZhdWx0UGlsb3QgY29uZmlndXJhdGlvbiBhcHBsaWVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBPbmJvYXJkaW5nIHNraXBwZWQgLSB1c2luZyBkZWZhdWx0IHNldHRpbmdzJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE1hcmsgb25ib2FyZGluZyBhcyBjb21wbGV0ZVxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub25ib2FyZGluZ0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBhcHBseSBvbmJvYXJkaW5nIGNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4p2MIEZhaWxlZCB0byBhcHBseSBjb25maWd1cmF0aW9uLiBQbGVhc2UgY2hlY2sgc2V0dGluZ3MgbWFudWFsbHkuJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhcHBseUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgLy8gQXBwbHkgdXNlciBwcmVmZXJlbmNlcyB0byBwbHVnaW4gc2V0dGluZ3NcbiAgICBjb25zdCBwcmVmZXJlbmNlcyA9IHRoaXMucHJvZ3Jlc3MudXNlclByZWZlcmVuY2VzO1xuICAgIFxuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnBlcmZvcm1hbmNlTW9kZSA9IHByZWZlcmVuY2VzLnBlcmZvcm1hbmNlTW9kZTtcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVSZWFsVGltZVVwZGF0ZXMgPSBwcmVmZXJlbmNlcy5lbmFibGVSZWFsVGltZVVwZGF0ZXM7XG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQW5hbHl0aWNzID0gcHJlZmVyZW5jZXMuZW5hYmxlQW5hbHl0aWNzO1xuICAgIFxuICAgIGlmICh0aGlzLnByb2dyZXNzLmRldGVjdGVkQ2FwYWJpbGl0aWVzKSB7XG4gICAgICAvLyBBcHBseSByZWNvbW1lbmRlZCB0cmFuc3BvcnQgY29uZmlndXJhdGlvblxuICAgICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdGhpcy5wcm9ncmVzcy5kZXRlY3RlZENhcGFiaWxpdGllcztcbiAgICAgIFxuICAgICAgLy8gQ29uZmlndXJlIHRyYW5zcG9ydCBtYW5hZ2VyIHdpdGggZGV0ZWN0ZWQgY2FwYWJpbGl0aWVzXG4gICAgICBjb25zdCB0cmFuc3BvcnRDb25maWcgPSB7XG4gICAgICAgIHNlbGVjdGlvbkNyaXRlcmlhOiB0aGlzLmdldFNlbGVjdGlvbkNyaXRlcmlhRm9yTW9kZShwcmVmZXJlbmNlcy5wZXJmb3JtYW5jZU1vZGUpLFxuICAgICAgICBmYWxsYmFja0NoYWluOiB0aGlzLmJ1aWxkRmFsbGJhY2tDaGFpbihjYXBhYmlsaXRpZXMpLFxuICAgICAgICB0cmFuc3BvcnRDb25maWdzOiB7XG4gICAgICAgICAgaHR0cDogeyBiYXNlVXJsOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5iYWNrZW5kVXJsIH0sXG4gICAgICAgICAgd2Vic29ja2V0OiBjYXBhYmlsaXRpZXMud2ViU29ja2V0U3VwcG9ydGVkID8geyB1cmw6IHRoaXMucGx1Z2luLnNldHRpbmdzLndlYlNvY2tldFVybCB9IDogdW5kZWZpbmVkLFxuICAgICAgICAgIGZpbGVzeXN0ZW06IGNhcGFiaWxpdGllcy5maWxlU3lzdGVtQWNjZXNzID8geyBiYXNlUGF0aDogJy52YXVsdHBpbG90JyB9IDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIGF1dG9GYWlsb3ZlcjogdHJ1ZSxcbiAgICAgICAgZGVidWc6IHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgY29uZmlndXJhdGlvbiBmb3IgdHJhbnNwb3J0IG1hbmFnZXJcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRyYW5zcG9ydENvbmZpZyA9IHRyYW5zcG9ydENvbmZpZztcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gIH1cblxuICBwcml2YXRlIGdldFNlbGVjdGlvbkNyaXRlcmlhRm9yTW9kZShtb2RlOiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ3BlcmZvcm1hbmNlJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsYXRlbmN5V2VpZ2h0OiAwLjYsXG4gICAgICAgICAgcmVsaWFiaWxpdHlXZWlnaHQ6IDAuMixcbiAgICAgICAgICBjYXBhYmlsaXR5V2VpZ2h0OiAwLjEsXG4gICAgICAgICAgY29zdFdlaWdodDogMC4xXG4gICAgICAgIH07XG4gICAgICBjYXNlICdyZWxpYWJpbGl0eSc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGF0ZW5jeVdlaWdodDogMC4xLFxuICAgICAgICAgIHJlbGlhYmlsaXR5V2VpZ2h0OiAwLjYsXG4gICAgICAgICAgY2FwYWJpbGl0eVdlaWdodDogMC4yLFxuICAgICAgICAgIGNvc3RXZWlnaHQ6IDAuMVxuICAgICAgICB9O1xuICAgICAgZGVmYXVsdDogLy8gYmFsYW5jZWRcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsYXRlbmN5V2VpZ2h0OiAwLjMsXG4gICAgICAgICAgcmVsaWFiaWxpdHlXZWlnaHQ6IDAuMyxcbiAgICAgICAgICBjYXBhYmlsaXR5V2VpZ2h0OiAwLjIsXG4gICAgICAgICAgY29zdFdlaWdodDogMC4yXG4gICAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBidWlsZEZhbGxiYWNrQ2hhaW4oY2FwYWJpbGl0aWVzOiBFbnZpcm9ubWVudENhcGFiaWxpdGllcyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjaGFpbjogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBpZiAoY2FwYWJpbGl0aWVzLndlYlNvY2tldFN1cHBvcnRlZCkge1xuICAgICAgY2hhaW4ucHVzaCgnd2Vic29ja2V0Jyk7XG4gICAgfVxuICAgIGlmIChjYXBhYmlsaXRpZXMuaHR0cENhcGFiaWxpdGllcykge1xuICAgICAgY2hhaW4ucHVzaCgnaHR0cCcpO1xuICAgIH1cbiAgICBpZiAoY2FwYWJpbGl0aWVzLmZpbGVTeXN0ZW1BY2Nlc3MpIHtcbiAgICAgIGNoYWluLnB1c2goJ2ZpbGVzeXN0ZW0nKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNoYWluO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBSZWNvbW1lbmRhdGlvbkVuZ2luZSAtIEFJLXBvd2VyZWQgb3B0aW1pemF0aW9uIHN1Z2dlc3Rpb25zIGFuZCBpbnNpZ2h0c1xuICovXG5cbmltcG9ydCB7IFRyYW5zcG9ydFR5cGUgfSBmcm9tICcuLi9kZXZwaXBlL3RyYW5zcG9ydHMvRGV2UGlwZVRyYW5zcG9ydCc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudERldGVjdG9yIH0gZnJvbSAnLi4vdXRpbHMvRW52aXJvbm1lbnREZXRlY3Rvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb21tZW5kYXRpb25Db250ZXh0IHtcbiAgdXNlcklkPzogc3RyaW5nO1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBjdXJyZW50VHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlO1xuICBhdmFpbGFibGVUcmFuc3BvcnRzOiBUcmFuc3BvcnRUeXBlW107XG4gIHBlcmZvcm1hbmNlTWV0cmljczogUGVyZm9ybWFuY2VTbmFwc2hvdDtcbiAgdXNlckJlaGF2aW9yOiBVc2VyQmVoYXZpb3JQYXR0ZXJuO1xuICBlbnZpcm9ubWVudENvbnRleHQ6IEVudmlyb25tZW50Q29udGV4dDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZVNuYXBzaG90IHtcbiAgYXZlcmFnZUxhdGVuY3k6IG51bWJlcjtcbiAgZXJyb3JSYXRlOiBudW1iZXI7XG4gIHRocm91Z2hwdXQ6IG51bWJlcjtcbiAgcmVsaWFiaWxpdHk6IG51bWJlcjtcbiAgdHJhbnNwb3J0VXNhZ2U6IFJlY29yZDxUcmFuc3BvcnRUeXBlLCBudW1iZXI+O1xuICB0aW1lV2luZG93OiBzdHJpbmc7IC8vIGUuZy4sICcxaCcsICcyNGgnLCAnN2QnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlckJlaGF2aW9yUGF0dGVybiB7XG4gIHVzYWdlRnJlcXVlbmN5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICBwZWFrVXNhZ2VIb3VyczogbnVtYmVyW107XG4gIHByZWZlcnJlZEZlYXR1cmVzOiBzdHJpbmdbXTtcbiAgZXJyb3JUb2xlcmFuY2U6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG4gIHBlcmZvcm1hbmNlU2Vuc2l0aXZpdHk6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW52aXJvbm1lbnRDb250ZXh0IHtcbiAgcGxhdGZvcm06IHN0cmluZztcbiAgY29ubmVjdGl2aXR5OiAncG9vcicgfCAnZmFpcicgfCAnZ29vZCcgfCAnZXhjZWxsZW50JztcbiAgYmFuZHdpZHRoOiBudW1iZXI7IC8vIE1icHNcbiAgbGF0ZW5jeTogbnVtYmVyOyAvLyBtc1xuICBzdGFiaWxpdHk6IG51bWJlcjsgLy8gMC0xXG59XG5cbmV4cG9ydCBlbnVtIFJlY29tbWVuZGF0aW9uVHlwZSB7XG4gIFRSQU5TUE9SVF9PUFRJTUlaQVRJT04gPSAndHJhbnNwb3J0X29wdGltaXphdGlvbicsXG4gIFBFUkZPUk1BTkNFX1RVTklORyA9ICdwZXJmb3JtYW5jZV90dW5pbmcnLFxuICBFUlJPUl9SRURVQ1RJT04gPSAnZXJyb3JfcmVkdWN0aW9uJyxcbiAgQ09TVF9PUFRJTUlaQVRJT04gPSAnY29zdF9vcHRpbWl6YXRpb24nLFxuICBGRUFUVVJFX0FET1BUSU9OID0gJ2ZlYXR1cmVfYWRvcHRpb24nLFxuICBDT05GSUdVUkFUSU9OX0lNUFJPVkVNRU5UID0gJ2NvbmZpZ3VyYXRpb25faW1wcm92ZW1lbnQnLFxuICBQUk9BQ1RJVkVfTUFJTlRFTkFOQ0UgPSAncHJvYWN0aXZlX21haW50ZW5hbmNlJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY29tbWVuZGF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogUmVjb21tZW5kYXRpb25UeXBlO1xuICBwcmlvcml0eTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHJhdGlvbmFsZTogc3RyaW5nO1xuICBcbiAgLy8gRXhwZWN0ZWQgaW1wYWN0XG4gIGV4cGVjdGVkSW1wYWN0OiB7XG4gICAgcGVyZm9ybWFuY2VJbXByb3ZlbWVudDogbnVtYmVyOyAvLyBwZXJjZW50YWdlXG4gICAgZXJyb3JSZWR1Y3Rpb246IG51bWJlcjsgLy8gcGVyY2VudGFnZVxuICAgIHJlbGlhYmlsaXR5SW1wcm92ZW1lbnQ6IG51bWJlcjsgLy8gcGVyY2VudGFnZVxuICAgIGNvbmZpZGVuY2VTY29yZTogbnVtYmVyOyAvLyAwLTFcbiAgfTtcbiAgXG4gIC8vIEltcGxlbWVudGF0aW9uIGRldGFpbHNcbiAgaW1wbGVtZW50YXRpb246IHtcbiAgICBkaWZmaWN1bHR5OiAnZWFzeScgfCAnbWVkaXVtJyB8ICdoYXJkJztcbiAgICBlc3RpbWF0ZWRUaW1lOiBzdHJpbmc7XG4gICAgc3RlcHM6IFJlY29tbWVuZGF0aW9uU3RlcFtdO1xuICAgIHJldmVyc2libGU6IGJvb2xlYW47XG4gICAgcmlza0xldmVsOiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICB9O1xuICBcbiAgLy8gTWV0YWRhdGFcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgdGFnczogc3RyaW5nW107XG4gIGNyZWF0ZWQ6IERhdGU7XG4gIHZhbGlkVW50aWw/OiBEYXRlO1xuICBhcHBsaWVkQXQ/OiBEYXRlO1xuICBlZmZlY3RpdmVuZXNzPzogbnVtYmVyOyAvLyBwb3N0LWltcGxlbWVudGF0aW9uIGZlZWRiYWNrXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjb21tZW5kYXRpb25TdGVwIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYWN0aW9uOiAnbWFudWFsJyB8ICdhdXRvbWF0aWMnO1xuICBjb21tYW5kPzogc3RyaW5nO1xuICB2YWxpZGF0aW9uPzogc3RyaW5nO1xuICBkZXBlbmRlbmNpZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRpbWl6YXRpb25PcHBvcnR1bml0eSB7XG4gIGFyZWE6ICd0cmFuc3BvcnQnIHwgJ2NvbmZpZ3VyYXRpb24nIHwgJ3VzYWdlJyB8ICdlbnZpcm9ubWVudCc7XG4gIGltcGFjdDogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgZWZmb3J0OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBtZXRyaWNzOiB7XG4gICAgY3VycmVudFZhbHVlOiBudW1iZXI7XG4gICAgcG90ZW50aWFsVmFsdWU6IG51bWJlcjtcbiAgICBpbXByb3ZlbWVudDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc2lnaHRDYXRlZ29yeSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHJpb3JpdHk6IG51bWJlcjtcbiAgaW5zaWdodHM6IEluc2lnaHRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnNpZ2h0IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdHlwZTogJ3Bvc2l0aXZlJyB8ICduZXV0cmFsJyB8ICd3YXJuaW5nJyB8ICdjcml0aWNhbCc7XG4gIGNvbmZpZGVuY2U6IG51bWJlcjsgLy8gMC0xXG4gIGRhdGE6IGFueTtcbiAgYWN0aW9uYWJsZTogYm9vbGVhbjtcbiAgcmVsYXRlZDogc3RyaW5nW107IC8vIHJlbGF0ZWQgcmVjb21tZW5kYXRpb24gSURzXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlZGljdGl2ZUFsZXJ0IHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ3BlcmZvcm1hbmNlX2RlZ3JhZGF0aW9uJyB8ICd0cmFuc3BvcnRfZmFpbHVyZScgfCAnY2FwYWNpdHlfbGltaXQnIHwgJ21haW50ZW5hbmNlX3JlcXVpcmVkJztcbiAgc2V2ZXJpdHk6ICdpbmZvJyB8ICd3YXJuaW5nJyB8ICdlcnJvcicgfCAnY3JpdGljYWwnO1xuICBwcm9iYWJpbGl0eTogbnVtYmVyOyAvLyAwLTFcbiAgdGltZWZyYW1lOiBzdHJpbmc7IC8vIGUuZy4sICcxaCcsICcyNGgnLCAnMXcnXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByZXZlbnRpdmVBY3Rpb25zOiBSZWNvbW1lbmRhdGlvbltdO1xuICB0cmlnZ2Vyczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBjbGFzcyBSZWNvbW1lbmRhdGlvbkVuZ2luZSB7XG4gIHByaXZhdGUgcGVyZm9ybWFuY2VIaXN0b3J5OiBQZXJmb3JtYW5jZVNuYXBzaG90W10gPSBbXTtcbiAgcHJpdmF0ZSBiZWhhdmlvclBhdHRlcm5zOiBNYXA8c3RyaW5nLCBVc2VyQmVoYXZpb3JQYXR0ZXJuPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhcHBsaWVkUmVjb21tZW5kYXRpb25zOiBNYXA8c3RyaW5nLCBSZWNvbW1lbmRhdGlvbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgaW5zaWdodENhY2hlOiBNYXA8c3RyaW5nLCBJbnNpZ2h0Q2F0ZWdvcnlbXT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcHJlZGljdGlvbk1vZGVsczogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXAoKTtcblxuICBwcml2YXRlIHJlYWRvbmx5IEFOQUxZU0lTX1dJTkRPVyA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyA3IGRheXNcbiAgcHJpdmF0ZSByZWFkb25seSBNSU5fREFUQV9QT0lOVFMgPSAxMDtcbiAgcHJpdmF0ZSByZWFkb25seSBDT05GSURFTkNFX1RIUkVTSE9MRCA9IDAuNztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmluaXRpYWxpemVQcmVkaWN0aW9uTW9kZWxzKCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gY3VycmVudCBjb250ZXh0XG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBQcm9taXNlPFJlY29tbWVuZGF0aW9uW10+IHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW10gPSBbXTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBBbmFseXplIGN1cnJlbnQgcGVyZm9ybWFuY2UgYW5kIGlkZW50aWZ5IG9wcG9ydHVuaXRpZXNcbiAgICAgIGNvbnN0IG9wcG9ydHVuaXRpZXMgPSBhd2FpdCB0aGlzLmFuYWx5emVPcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzKGNvbnRleHQpO1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSB0cmFuc3BvcnQtc3BlY2lmaWMgcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCB0cmFuc3BvcnRSZWNzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVRyYW5zcG9ydFJlY29tbWVuZGF0aW9ucyhjb250ZXh0LCBvcHBvcnR1bml0aWVzKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLnRyYW5zcG9ydFJlY3MpO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBwZXJmb3JtYW5jZSB0dW5pbmcgcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBwZXJmb3JtYW5jZVJlY3MgPSBhd2FpdCB0aGlzLmdlbmVyYXRlUGVyZm9ybWFuY2VSZWNvbW1lbmRhdGlvbnMoY29udGV4dCwgb3Bwb3J0dW5pdGllcyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5wZXJmb3JtYW5jZVJlY3MpO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBjb25maWd1cmF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgY29uZmlnUmVjcyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVDb25maWd1cmF0aW9uUmVjb21tZW5kYXRpb25zKGNvbnRleHQpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goLi4uY29uZmlnUmVjcyk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIHByb2FjdGl2ZSBtYWludGVuYW5jZSByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IG1haW50ZW5hbmNlUmVjcyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVNYWludGVuYW5jZVJlY29tbWVuZGF0aW9ucyhjb250ZXh0KTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLm1haW50ZW5hbmNlUmVjcyk7XG5cbiAgICAgIC8vIFNvcnQgYnkgcHJpb3JpdHkgYW5kIGV4cGVjdGVkIGltcGFjdFxuICAgICAgY29uc3Qgc29ydGVkUmVjb21tZW5kYXRpb25zID0gdGhpcy5wcmlvcml0aXplUmVjb21tZW5kYXRpb25zKHJlY29tbWVuZGF0aW9ucyk7XG5cbiAgICAgIC8vIENhY2hlIHJlY29tbWVuZGF0aW9ucyBmb3IgdHJhY2tpbmdcbiAgICAgIHNvcnRlZFJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgIHRoaXMuYXBwbGllZFJlY29tbWVuZGF0aW9ucy5zZXQocmVjLmlkLCByZWMpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzb3J0ZWRSZWNvbW1lbmRhdGlvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIGN1cnJlbnQgc3RhdGUgdG8gaWRlbnRpZnkgb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbHl6ZU9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxPcHRpbWl6YXRpb25PcHBvcnR1bml0eVtdPiB7XG4gICAgY29uc3Qgb3Bwb3J0dW5pdGllczogT3B0aW1pemF0aW9uT3Bwb3J0dW5pdHlbXSA9IFtdO1xuXG4gICAgLy8gQW5hbHl6ZSB0cmFuc3BvcnQgcGVyZm9ybWFuY2VcbiAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlID4gMC4wNSkge1xuICAgICAgb3Bwb3J0dW5pdGllcy5wdXNoKHtcbiAgICAgICAgYXJlYTogJ3RyYW5zcG9ydCcsXG4gICAgICAgIGltcGFjdDogJ2hpZ2gnLFxuICAgICAgICBlZmZvcnQ6ICdtZWRpdW0nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0hpZ2ggZXJyb3IgcmF0ZSBkZXRlY3RlZCwgdHJhbnNwb3J0IG9wdGltaXphdGlvbiByZWNvbW1lbmRlZCcsXG4gICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICBjdXJyZW50VmFsdWU6IGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSxcbiAgICAgICAgICBwb3RlbnRpYWxWYWx1ZTogMC4wMSxcbiAgICAgICAgICBpbXByb3ZlbWVudDogKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSAtIDAuMDEpIC8gY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFuYWx5emUgbGF0ZW5jeSBpc3N1ZXNcbiAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZUxhdGVuY3kgPiA1MDApIHtcbiAgICAgIG9wcG9ydHVuaXRpZXMucHVzaCh7XG4gICAgICAgIGFyZWE6ICdjb25maWd1cmF0aW9uJyxcbiAgICAgICAgaW1wYWN0OiAnbWVkaXVtJyxcbiAgICAgICAgZWZmb3J0OiAnbG93JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdIaWdoIGxhdGVuY3kgZGV0ZWN0ZWQsIGNvbmZpZ3VyYXRpb24gdHVuaW5nIHJlY29tbWVuZGVkJyxcbiAgICAgICAgbWV0cmljczoge1xuICAgICAgICAgIGN1cnJlbnRWYWx1ZTogY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZUxhdGVuY3ksXG4gICAgICAgICAgcG90ZW50aWFsVmFsdWU6IDIwMCxcbiAgICAgICAgICBpbXByb3ZlbWVudDogKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5IC0gMjAwKSAvIGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFuYWx5emUgdHJhbnNwb3J0IHVzYWdlIHBhdHRlcm5zXG4gICAgY29uc3QgdHJhbnNwb3J0RGlzdHJpYnV0aW9uID0gT2JqZWN0LnZhbHVlcyhjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy50cmFuc3BvcnRVc2FnZSk7XG4gICAgY29uc3QgbWF4VXNhZ2UgPSBNYXRoLm1heCguLi50cmFuc3BvcnREaXN0cmlidXRpb24pO1xuICAgIGNvbnN0IG1pblVzYWdlID0gTWF0aC5taW4oLi4udHJhbnNwb3J0RGlzdHJpYnV0aW9uKTtcbiAgICBcbiAgICBpZiAobWF4VXNhZ2UgLyAobWluVXNhZ2UgfHwgMC4wMDEpID4gMTApIHtcbiAgICAgIG9wcG9ydHVuaXRpZXMucHVzaCh7XG4gICAgICAgIGFyZWE6ICd1c2FnZScsXG4gICAgICAgIGltcGFjdDogJ21lZGl1bScsXG4gICAgICAgIGVmZm9ydDogJ2xvdycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVW5iYWxhbmNlZCB0cmFuc3BvcnQgdXNhZ2UgZGV0ZWN0ZWQsIGxvYWQgYmFsYW5jaW5nIHJlY29tbWVuZGVkJyxcbiAgICAgICAgbWV0cmljczoge1xuICAgICAgICAgIGN1cnJlbnRWYWx1ZTogbWF4VXNhZ2UgLyAobWluVXNhZ2UgfHwgMC4wMDEpLFxuICAgICAgICAgIHBvdGVudGlhbFZhbHVlOiAzLFxuICAgICAgICAgIGltcHJvdmVtZW50OiAwLjNcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wcG9ydHVuaXRpZXM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgdHJhbnNwb3J0LXNwZWNpZmljIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRyYW5zcG9ydFJlY29tbWVuZGF0aW9ucyhcbiAgICBjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQsXG4gICAgb3Bwb3J0dW5pdGllczogT3B0aW1pemF0aW9uT3Bwb3J0dW5pdHlbXVxuICApOiBQcm9taXNlPFJlY29tbWVuZGF0aW9uW10+IHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW10gPSBbXTtcblxuICAgIC8vIENoZWNrIGlmIGN1cnJlbnQgdHJhbnNwb3J0IGlzIG9wdGltYWxcbiAgICBjb25zdCBvcHRpbWFsVHJhbnNwb3J0ID0gYXdhaXQgdGhpcy5kZXRlcm1pbmVPcHRpbWFsVHJhbnNwb3J0KGNvbnRleHQpO1xuICAgIGlmIChvcHRpbWFsVHJhbnNwb3J0ICE9PSBjb250ZXh0LmN1cnJlbnRUcmFuc3BvcnQpIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKHtcbiAgICAgICAgaWQ6IGB0cmFuc3BvcnQtc3dpdGNoLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0eXBlOiBSZWNvbW1lbmRhdGlvblR5cGUuVFJBTlNQT1JUX09QVElNSVpBVElPTixcbiAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgICAgdGl0bGU6IGBTd2l0Y2ggdG8gJHtvcHRpbWFsVHJhbnNwb3J0fSBUcmFuc3BvcnRgLFxuICAgICAgICBkZXNjcmlwdGlvbjogYEJhc2VkIG9uIHlvdXIgdXNhZ2UgcGF0dGVybnMgYW5kIGVudmlyb25tZW50LCAke29wdGltYWxUcmFuc3BvcnR9IHRyYW5zcG9ydCB3b3VsZCBwcm92aWRlIGJldHRlciBwZXJmb3JtYW5jZS5gLFxuICAgICAgICByYXRpb25hbGU6IHRoaXMuZ2VuZXJhdGVUcmFuc3BvcnRTd2l0Y2hSYXRpb25hbGUoY29udGV4dCwgb3B0aW1hbFRyYW5zcG9ydCksXG4gICAgICAgIGV4cGVjdGVkSW1wYWN0OiB7XG4gICAgICAgICAgcGVyZm9ybWFuY2VJbXByb3ZlbWVudDogMjUsXG4gICAgICAgICAgZXJyb3JSZWR1Y3Rpb246IDQwLFxuICAgICAgICAgIHJlbGlhYmlsaXR5SW1wcm92ZW1lbnQ6IDMwLFxuICAgICAgICAgIGNvbmZpZGVuY2VTY29yZTogMC44NVxuICAgICAgICB9LFxuICAgICAgICBpbXBsZW1lbnRhdGlvbjoge1xuICAgICAgICAgIGRpZmZpY3VsdHk6ICdlYXN5JyxcbiAgICAgICAgICBlc3RpbWF0ZWRUaW1lOiAnMSBtaW51dGUnLFxuICAgICAgICAgIHN0ZXBzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnc3dpdGNoLXRyYW5zcG9ydCcsXG4gICAgICAgICAgICAgIHRpdGxlOiAnU3dpdGNoIFByaW1hcnkgVHJhbnNwb3J0JyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGBDaGFuZ2UgcHJpbWFyeSB0cmFuc3BvcnQgdG8gJHtvcHRpbWFsVHJhbnNwb3J0fWAsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ2F1dG9tYXRpYydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHJldmVyc2libGU6IHRydWUsXG4gICAgICAgICAgcmlza0xldmVsOiAnbG93J1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogJ1RyYW5zcG9ydCcsXG4gICAgICAgIHRhZ3M6IFsncGVyZm9ybWFuY2UnLCAnb3B0aW1pemF0aW9uJywgJ3RyYW5zcG9ydCddLFxuICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgdHJhbnNwb3J0IGZhbGxiYWNrIGltcHJvdmVtZW50c1xuICAgIGlmIChjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgPiAwLjAyKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBgZmFsbGJhY2stb3B0aW1pemF0aW9uLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0eXBlOiBSZWNvbW1lbmRhdGlvblR5cGUuVFJBTlNQT1JUX09QVElNSVpBVElPTixcbiAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxuICAgICAgICB0aXRsZTogJ09wdGltaXplIFRyYW5zcG9ydCBGYWxsYmFjayBDaGFpbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJlIGludGVsbGlnZW50IGZhbGxiYWNrIHRvIHJlZHVjZSBlcnJvciBpbXBhY3QuJyxcbiAgICAgICAgcmF0aW9uYWxlOiAnQ3VycmVudCBlcnJvciByYXRlIHN1Z2dlc3RzIGZhbGxiYWNrIG1lY2hhbmlzbXMgY291bGQgYmUgaW1wcm92ZWQuJyxcbiAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6IHtcbiAgICAgICAgICBwZXJmb3JtYW5jZUltcHJvdmVtZW50OiAxNSxcbiAgICAgICAgICBlcnJvclJlZHVjdGlvbjogNjAsXG4gICAgICAgICAgcmVsaWFiaWxpdHlJbXByb3ZlbWVudDogNDUsXG4gICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiAwLjc1XG4gICAgICAgIH0sXG4gICAgICAgIGltcGxlbWVudGF0aW9uOiB7XG4gICAgICAgICAgZGlmZmljdWx0eTogJ21lZGl1bScsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogJzUgbWludXRlcycsXG4gICAgICAgICAgc3RlcHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjb25maWd1cmUtZmFsbGJhY2snLFxuICAgICAgICAgICAgICB0aXRsZTogJ0NvbmZpZ3VyZSBGYWxsYmFjayBDaGFpbicsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2V0IHVwIGludGVsbGlnZW50IHRyYW5zcG9ydCBmYWxsYmFjaycsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ21hbnVhbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHJldmVyc2libGU6IHRydWUsXG4gICAgICAgICAgcmlza0xldmVsOiAnbG93J1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogJ1JlbGlhYmlsaXR5JyxcbiAgICAgICAgdGFnczogWydmYWxsYmFjaycsICdyZWxpYWJpbGl0eScsICdlcnJvci1yZWR1Y3Rpb24nXSxcbiAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwZXJmb3JtYW5jZSB0dW5pbmcgcmVjb21tZW5kYXRpb25zXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlUGVyZm9ybWFuY2VSZWNvbW1lbmRhdGlvbnMoXG4gICAgY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0LFxuICAgIG9wcG9ydHVuaXRpZXM6IE9wdGltaXphdGlvbk9wcG9ydHVuaXR5W11cbiAgKTogUHJvbWlzZTxSZWNvbW1lbmRhdGlvbltdPiB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBSZWNvbW1lbmRhdGlvbltdID0gW107XG5cbiAgICAvLyBDaGVjayBmb3IgdGltZW91dCBvcHRpbWl6YXRpb25cbiAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuYXZlcmFnZUxhdGVuY3kgPiAxMDAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBgdGltZW91dC1vcHRpbWl6YXRpb24tJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHR5cGU6IFJlY29tbWVuZGF0aW9uVHlwZS5QRVJGT1JNQU5DRV9UVU5JTkcsXG4gICAgICAgIHByaW9yaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgdGl0bGU6ICdPcHRpbWl6ZSBSZXF1ZXN0IFRpbWVvdXRzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBZGp1c3QgdGltZW91dCBzZXR0aW5ncyB0byByZWR1Y2Ugd2FpdCB0aW1lcyBmb3IgZmFpbGVkIHJlcXVlc3RzLicsXG4gICAgICAgIHJhdGlvbmFsZTogJ0hpZ2ggYXZlcmFnZSBsYXRlbmN5IGluZGljYXRlcyB0aW1lb3V0IHNldHRpbmdzIG1heSBuZWVkIGFkanVzdG1lbnQuJyxcbiAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6IHtcbiAgICAgICAgICBwZXJmb3JtYW5jZUltcHJvdmVtZW50OiAyMCxcbiAgICAgICAgICBlcnJvclJlZHVjdGlvbjogMTAsXG4gICAgICAgICAgcmVsaWFiaWxpdHlJbXByb3ZlbWVudDogMTUsXG4gICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiAwLjhcbiAgICAgICAgfSxcbiAgICAgICAgaW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBkaWZmaWN1bHR5OiAnZWFzeScsXG4gICAgICAgICAgZXN0aW1hdGVkVGltZTogJzIgbWludXRlcycsXG4gICAgICAgICAgc3RlcHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdhZGp1c3QtdGltZW91dHMnLFxuICAgICAgICAgICAgICB0aXRsZTogJ0FkanVzdCBUaW1lb3V0IFNldHRpbmdzJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdPcHRpbWl6ZSByZXF1ZXN0IHRpbWVvdXQgdmFsdWVzJyxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbWFudWFsJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgcmV2ZXJzaWJsZTogdHJ1ZSxcbiAgICAgICAgICByaXNrTGV2ZWw6ICdsb3cnXG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiAnUGVyZm9ybWFuY2UnLFxuICAgICAgICB0YWdzOiBbJ3RpbWVvdXQnLCAnbGF0ZW5jeScsICdwZXJmb3JtYW5jZSddLFxuICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgY29ubmVjdGlvbiBwb29saW5nIG9wcG9ydHVuaXRpZXNcbiAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MudGhyb3VnaHB1dCA8IDEwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xuICAgICAgICBpZDogYGNvbm5lY3Rpb24tcG9vbGluZy0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdHlwZTogUmVjb21tZW5kYXRpb25UeXBlLlBFUkZPUk1BTkNFX1RVTklORyxcbiAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgICAgdGl0bGU6ICdFbmFibGUgQ29ubmVjdGlvbiBQb29saW5nJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdFbmFibGUgY29ubmVjdGlvbiBwb29saW5nIHRvIGltcHJvdmUgdGhyb3VnaHB1dCBhbmQgcmVkdWNlIGNvbm5lY3Rpb24gb3ZlcmhlYWQuJyxcbiAgICAgICAgcmF0aW9uYWxlOiAnTG93IHRocm91Z2hwdXQgc3VnZ2VzdHMgY29ubmVjdGlvbiBwb29saW5nIGNvdWxkIHByb3ZpZGUgc2lnbmlmaWNhbnQgYmVuZWZpdHMuJyxcbiAgICAgICAgZXhwZWN0ZWRJbXBhY3Q6IHtcbiAgICAgICAgICBwZXJmb3JtYW5jZUltcHJvdmVtZW50OiA0MCxcbiAgICAgICAgICBlcnJvclJlZHVjdGlvbjogMjAsXG4gICAgICAgICAgcmVsaWFiaWxpdHlJbXByb3ZlbWVudDogMjUsXG4gICAgICAgICAgY29uZmlkZW5jZVNjb3JlOiAwLjlcbiAgICAgICAgfSxcbiAgICAgICAgaW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBkaWZmaWN1bHR5OiAnbWVkaXVtJyxcbiAgICAgICAgICBlc3RpbWF0ZWRUaW1lOiAnMyBtaW51dGVzJyxcbiAgICAgICAgICBzdGVwczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2VuYWJsZS1wb29saW5nJyxcbiAgICAgICAgICAgICAgdGl0bGU6ICdFbmFibGUgQ29ubmVjdGlvbiBQb29saW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDb25maWd1cmUgSFRUUCBjb25uZWN0aW9uIHBvb2xpbmcnLFxuICAgICAgICAgICAgICBhY3Rpb246ICdhdXRvbWF0aWMnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICByZXZlcnNpYmxlOiB0cnVlLFxuICAgICAgICAgIHJpc2tMZXZlbDogJ2xvdydcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6ICdQZXJmb3JtYW5jZScsXG4gICAgICAgIHRhZ3M6IFsnY29ubmVjdGlvbi1wb29saW5nJywgJ3Rocm91Z2hwdXQnLCAncGVyZm9ybWFuY2UnXSxcbiAgICAgICAgY3JlYXRlZDogbmV3IERhdGUoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb25maWd1cmF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUNvbmZpZ3VyYXRpb25SZWNvbW1lbmRhdGlvbnMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxSZWNvbW1lbmRhdGlvbltdPiB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBSZWNvbW1lbmRhdGlvbltdID0gW107XG5cbiAgICAvLyBDaGVjayBmb3IgcmV0cnkgY29uZmlndXJhdGlvblxuICAgIGlmIChjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGUgPiAwLjAzKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCh7XG4gICAgICAgIGlkOiBgcmV0cnktY29uZmlnLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0eXBlOiBSZWNvbW1lbmRhdGlvblR5cGUuQ09ORklHVVJBVElPTl9JTVBST1ZFTUVOVCxcbiAgICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxuICAgICAgICB0aXRsZTogJ09wdGltaXplIFJldHJ5IENvbmZpZ3VyYXRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpbmUtdHVuZSByZXRyeSBhdHRlbXB0cyBhbmQgYmFja29mZiBzdHJhdGVneSB0byBoYW5kbGUgdHJhbnNpZW50IGVycm9ycyBiZXR0ZXIuJyxcbiAgICAgICAgcmF0aW9uYWxlOiAnRXJyb3IgcmF0ZSBzdWdnZXN0cyByZXRyeSBjb25maWd1cmF0aW9uIGNvdWxkIGJlIG9wdGltaXplZC4nLFxuICAgICAgICBleHBlY3RlZEltcGFjdDoge1xuICAgICAgICAgIHBlcmZvcm1hbmNlSW1wcm92ZW1lbnQ6IDEwLFxuICAgICAgICAgIGVycm9yUmVkdWN0aW9uOiAzNSxcbiAgICAgICAgICByZWxpYWJpbGl0eUltcHJvdmVtZW50OiA0MCxcbiAgICAgICAgICBjb25maWRlbmNlU2NvcmU6IDAuNzVcbiAgICAgICAgfSxcbiAgICAgICAgaW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgICBkaWZmaWN1bHR5OiAnbWVkaXVtJyxcbiAgICAgICAgICBlc3RpbWF0ZWRUaW1lOiAnNSBtaW51dGVzJyxcbiAgICAgICAgICBzdGVwczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2NvbmZpZ3VyZS1yZXRyeScsXG4gICAgICAgICAgICAgIHRpdGxlOiAnQ29uZmlndXJlIFJldHJ5IFN0cmF0ZWd5JyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTZXQgdXAgZXhwb25lbnRpYWwgYmFja29mZiByZXRyeSBzdHJhdGVneScsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ21hbnVhbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHJldmVyc2libGU6IHRydWUsXG4gICAgICAgICAgcmlza0xldmVsOiAnbG93J1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogJ0NvbmZpZ3VyYXRpb24nLFxuICAgICAgICB0YWdzOiBbJ3JldHJ5JywgJ2Vycm9yLWhhbmRsaW5nJywgJ3JlbGlhYmlsaXR5J10sXG4gICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKClcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcHJvYWN0aXZlIG1haW50ZW5hbmNlIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZU1haW50ZW5hbmNlUmVjb21tZW5kYXRpb25zKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IFByb21pc2U8UmVjb21tZW5kYXRpb25bXT4ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSA9IFtdO1xuXG4gICAgLy8gQ2hlY2sgZm9yIGhlYWx0aCBtb25pdG9yaW5nIG9wdGltaXphdGlvblxuICAgIGNvbnN0IGhlYWx0aE1vbml0b3JpbmdSZWNvbW1lbmRhdGlvbjogUmVjb21tZW5kYXRpb24gPSB7XG4gICAgICBpZDogYGhlYWx0aC1tb25pdG9yaW5nLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgdHlwZTogUmVjb21tZW5kYXRpb25UeXBlLlBST0FDVElWRV9NQUlOVEVOQU5DRSxcbiAgICAgIHByaW9yaXR5OiAnbG93JyxcbiAgICAgIHRpdGxlOiAnRW5oYW5jZSBIZWFsdGggTW9uaXRvcmluZycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NldCB1cCBjb21wcmVoZW5zaXZlIGhlYWx0aCBtb25pdG9yaW5nIHRvIGRldGVjdCBpc3N1ZXMgZWFybHkuJyxcbiAgICAgIHJhdGlvbmFsZTogJ1Byb2FjdGl2ZSBtb25pdG9yaW5nIGNhbiBwcmV2ZW50IGlzc3VlcyBiZWZvcmUgdGhleSBpbXBhY3QgdXNlcnMuJyxcbiAgICAgIGV4cGVjdGVkSW1wYWN0OiB7XG4gICAgICAgIHBlcmZvcm1hbmNlSW1wcm92ZW1lbnQ6IDUsXG4gICAgICAgIGVycm9yUmVkdWN0aW9uOiAyNSxcbiAgICAgICAgcmVsaWFiaWxpdHlJbXByb3ZlbWVudDogMzUsXG4gICAgICAgIGNvbmZpZGVuY2VTY29yZTogMC44XG4gICAgICB9LFxuICAgICAgaW1wbGVtZW50YXRpb246IHtcbiAgICAgICAgZGlmZmljdWx0eTogJ2Vhc3knLFxuICAgICAgICBlc3RpbWF0ZWRUaW1lOiAnMiBtaW51dGVzJyxcbiAgICAgICAgc3RlcHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2VuYWJsZS1tb25pdG9yaW5nJyxcbiAgICAgICAgICAgIHRpdGxlOiAnRW5hYmxlIEVuaGFuY2VkIE1vbml0b3JpbmcnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUdXJuIG9uIGNvbXByZWhlbnNpdmUgaGVhbHRoIG1vbml0b3JpbmcnLFxuICAgICAgICAgICAgYWN0aW9uOiAnYXV0b21hdGljJ1xuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgcmV2ZXJzaWJsZTogdHJ1ZSxcbiAgICAgICAgcmlza0xldmVsOiAnbG93J1xuICAgICAgfSxcbiAgICAgIGNhdGVnb3J5OiAnTWFpbnRlbmFuY2UnLFxuICAgICAgdGFnczogWydtb25pdG9yaW5nJywgJ3Byb2FjdGl2ZScsICdoZWFsdGgnXSxcbiAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKClcbiAgICB9O1xuXG4gICAgcmVjb21tZW5kYXRpb25zLnB1c2goaGVhbHRoTW9uaXRvcmluZ1JlY29tbWVuZGF0aW9uKTtcblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIG9wdGltYWwgdHJhbnNwb3J0IGJhc2VkIG9uIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGV0ZXJtaW5lT3B0aW1hbFRyYW5zcG9ydChjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBQcm9taXNlPFRyYW5zcG9ydFR5cGU+IHtcbiAgICBjb25zdCBlbnZpcm9ubWVudCA9IGNvbnRleHQuZW52aXJvbm1lbnRDb250ZXh0O1xuICAgIGNvbnN0IGJlaGF2aW9yID0gY29udGV4dC51c2VyQmVoYXZpb3I7XG4gICAgXG4gICAgLy8gU2NvcmUgZWFjaCBhdmFpbGFibGUgdHJhbnNwb3J0XG4gICAgY29uc3Qgc2NvcmVzOiBSZWNvcmQ8VHJhbnNwb3J0VHlwZSwgbnVtYmVyPiA9IHt9IGFzIFJlY29yZDxUcmFuc3BvcnRUeXBlLCBudW1iZXI+O1xuICAgIFxuICAgIGZvciAoY29uc3QgdHJhbnNwb3J0IG9mIGNvbnRleHQuYXZhaWxhYmxlVHJhbnNwb3J0cykge1xuICAgICAgbGV0IHNjb3JlID0gMDtcbiAgICAgIFxuICAgICAgc3dpdGNoICh0cmFuc3BvcnQpIHtcbiAgICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVDpcbiAgICAgICAgICAvLyBXZWJTb2NrZXQgaXMgZ3JlYXQgZm9yIHJlYWwtdGltZSwgbG93IGxhdGVuY3kgbmVlZHNcbiAgICAgICAgICBzY29yZSArPSBlbnZpcm9ubWVudC5jb25uZWN0aXZpdHkgPT09ICdleGNlbGxlbnQnID8gNDAgOiAyMDtcbiAgICAgICAgICBzY29yZSArPSBlbnZpcm9ubWVudC5sYXRlbmN5IDwgNTAgPyAzMCA6IDEwO1xuICAgICAgICAgIHNjb3JlICs9IGJlaGF2aW9yLnBlcmZvcm1hbmNlU2Vuc2l0aXZpdHkgPT09ICdoaWdoJyA/IDIwIDogMTA7XG4gICAgICAgICAgc2NvcmUgKz0gYmVoYXZpb3IudXNhZ2VGcmVxdWVuY3kgPT09ICdoaWdoJyA/IDEwIDogMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICBcbiAgICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLkhUVFA6XG4gICAgICAgICAgLy8gSFRUUCBpcyByZWxpYWJsZSBhbmQgd2lkZWx5IGNvbXBhdGlibGVcbiAgICAgICAgICBzY29yZSArPSAzMDsgLy8gQmFzZSByZWxpYWJpbGl0eSBzY29yZVxuICAgICAgICAgIHNjb3JlICs9IGVudmlyb25tZW50LmNvbm5lY3Rpdml0eSA9PT0gJ3Bvb3InID8gMjAgOiAxMDtcbiAgICAgICAgICBzY29yZSArPSBiZWhhdmlvci5lcnJvclRvbGVyYW5jZSA9PT0gJ2xvdycgPyAyMCA6IDEwO1xuICAgICAgICAgIHNjb3JlICs9IDE1OyAvLyBXaWRlIGNvbXBhdGliaWxpdHkgYm9udXNcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICBcbiAgICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU06XG4gICAgICAgICAgLy8gRmlsZVN5c3RlbSBpcyBnb29kIGZvciBvZmZsaW5lIHNjZW5hcmlvc1xuICAgICAgICAgIHNjb3JlICs9IGVudmlyb25tZW50LmNvbm5lY3Rpdml0eSA9PT0gJ3Bvb3InID8gNDAgOiA1O1xuICAgICAgICAgIHNjb3JlICs9IGJlaGF2aW9yLnVzYWdlRnJlcXVlbmN5ID09PSAnbG93JyA/IDIwIDogMDtcbiAgICAgICAgICBzY29yZSArPSAxMDsgLy8gT2ZmbGluZSBjYXBhYmlsaXR5IGJvbnVzXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNjb3Jlc1t0cmFuc3BvcnRdID0gc2NvcmU7XG4gICAgfVxuICAgIFxuICAgIC8vIFJldHVybiB0cmFuc3BvcnQgd2l0aCBoaWdoZXN0IHNjb3JlXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNjb3JlcykucmVkdWNlKChhLCBiKSA9PiBzY29yZXNbYVswXSBhcyBUcmFuc3BvcnRUeXBlXSA+IHNjb3Jlc1tiWzBdIGFzIFRyYW5zcG9ydFR5cGVdID8gYSA6IGIpWzBdIGFzIFRyYW5zcG9ydFR5cGU7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgcmF0aW9uYWxlIGZvciB0cmFuc3BvcnQgc3dpdGNoIHJlY29tbWVuZGF0aW9uXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlVHJhbnNwb3J0U3dpdGNoUmF0aW9uYWxlKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCwgcmVjb21tZW5kZWRUcmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBjb250ZXh0LmN1cnJlbnRUcmFuc3BvcnQ7XG4gICAgY29uc3QgZW52ID0gY29udGV4dC5lbnZpcm9ubWVudENvbnRleHQ7XG4gICAgXG4gICAgbGV0IHJhdGlvbmFsZSA9IGBTd2l0Y2hpbmcgZnJvbSAke2N1cnJlbnR9IHRvICR7cmVjb21tZW5kZWRUcmFuc3BvcnR9IGlzIHJlY29tbWVuZGVkIGJlY2F1c2U6IGA7XG4gICAgXG4gICAgc3dpdGNoIChyZWNvbW1lbmRlZFRyYW5zcG9ydCkge1xuICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVDpcbiAgICAgICAgcmF0aW9uYWxlICs9ICdXZWJTb2NrZXQgcHJvdmlkZXMgcmVhbC10aW1lIGNvbW11bmljYXRpb24gd2l0aCBsb3dlciBsYXRlbmN5LCAnO1xuICAgICAgICBpZiAoZW52LmNvbm5lY3Rpdml0eSA9PT0gJ2V4Y2VsbGVudCcpIHtcbiAgICAgICAgICByYXRpb25hbGUgKz0gJ2FuZCB5b3VyIGV4Y2VsbGVudCBjb25uZWN0aXZpdHkgc3VwcG9ydHMgc3RhYmxlIFdlYlNvY2tldCBjb25uZWN0aW9ucy4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGlvbmFsZSArPSAnd2hpY2ggd291bGQgYmVuZWZpdCB5b3VyIHVzYWdlIHBhdHRlcm5zLic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLkhUVFA6XG4gICAgICAgIHJhdGlvbmFsZSArPSAnSFRUUCBvZmZlcnMgc3VwZXJpb3IgcmVsaWFiaWxpdHkgYW5kIGVycm9yIGhhbmRsaW5nLCAnO1xuICAgICAgICBpZiAoY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MuZXJyb3JSYXRlID4gMC4wNSkge1xuICAgICAgICAgIHJhdGlvbmFsZSArPSAnd2hpY2ggaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZ2l2ZW4geW91ciBjdXJyZW50IGVycm9yIHJhdGUuJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRpb25hbGUgKz0gJ3Byb3ZpZGluZyBhIG1vcmUgc3RhYmxlIGZvdW5kYXRpb24gZm9yIHlvdXIgdXNhZ2UuJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBjYXNlIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTTpcbiAgICAgICAgcmF0aW9uYWxlICs9ICdGaWxlU3lzdGVtIHRyYW5zcG9ydCBwcm92aWRlcyBvZmZsaW5lIGNhcGFiaWxpdHkgYW5kIGxvY2FsIHN0b3JhZ2UgYmVuZWZpdHMsICc7XG4gICAgICAgIGlmIChlbnYuY29ubmVjdGl2aXR5ID09PSAncG9vcicpIHtcbiAgICAgICAgICByYXRpb25hbGUgKz0gJ3doaWNoIGlzIGlkZWFsIGZvciB5b3VyIGN1cnJlbnQgY29ubmVjdGl2aXR5IHNpdHVhdGlvbi4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGlvbmFsZSArPSAnb2ZmZXJpbmcgYmV0dGVyIHBlcmZvcm1hbmNlIGZvciB5b3VyIHVzYWdlIHBhdHRlcm5zLic7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByYXRpb25hbGU7XG4gIH1cblxuICAvKipcbiAgICogUHJpb3JpdGl6ZSByZWNvbW1lbmRhdGlvbnMgYnkgaW1wYWN0IGFuZCBmZWFzaWJpbGl0eVxuICAgKi9cbiAgcHJpdmF0ZSBwcmlvcml0aXplUmVjb21tZW5kYXRpb25zKHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSk6IFJlY29tbWVuZGF0aW9uW10ge1xuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgLy8gRmlyc3QsIHNvcnQgYnkgcHJpb3JpdHlcbiAgICAgIGNvbnN0IHByaW9yaXR5T3JkZXIgPSB7ICdjcml0aWNhbCc6IDQsICdoaWdoJzogMywgJ21lZGl1bSc6IDIsICdsb3cnOiAxIH07XG4gICAgICBjb25zdCBwcmlvcml0eURpZmYgPSBwcmlvcml0eU9yZGVyW2IucHJpb3JpdHldIC0gcHJpb3JpdHlPcmRlclthLnByaW9yaXR5XTtcbiAgICAgIGlmIChwcmlvcml0eURpZmYgIT09IDApIHJldHVybiBwcmlvcml0eURpZmY7XG4gICAgICBcbiAgICAgIC8vIFRoZW4gYnkgZXhwZWN0ZWQgaW1wYWN0IHNjb3JlIChjb21iaW5hdGlvbiBvZiBwZXJmb3JtYW5jZSBhbmQgY29uZmlkZW5jZSlcbiAgICAgIGNvbnN0IGltcGFjdEEgPSBhLmV4cGVjdGVkSW1wYWN0LnBlcmZvcm1hbmNlSW1wcm92ZW1lbnQgKiBhLmV4cGVjdGVkSW1wYWN0LmNvbmZpZGVuY2VTY29yZTtcbiAgICAgIGNvbnN0IGltcGFjdEIgPSBiLmV4cGVjdGVkSW1wYWN0LnBlcmZvcm1hbmNlSW1wcm92ZW1lbnQgKiBiLmV4cGVjdGVkSW1wYWN0LmNvbmZpZGVuY2VTY29yZTtcbiAgICAgIHJldHVybiBpbXBhY3RCIC0gaW1wYWN0QTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBpbnNpZ2h0cyBmcm9tIGN1cnJlbnQgcGVyZm9ybWFuY2UgZGF0YVxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVJbnNpZ2h0cyhjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBQcm9taXNlPEluc2lnaHRDYXRlZ29yeVtdPiB7XG4gICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdlbmVyYXRlSW5zaWdodENhY2hlS2V5KGNvbnRleHQpO1xuICAgIFxuICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gICAgaWYgKHRoaXMuaW5zaWdodENhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuaW5zaWdodENhY2hlLmdldChjYWNoZUtleSkhO1xuICAgICAgLy8gUmV0dXJuIGNhY2hlZCBpbnNpZ2h0cyBpZiBsZXNzIHRoYW4gMTAgbWludXRlcyBvbGRcbiAgICAgIGlmIChEYXRlLm5vdygpIC0gY2FjaGVkWzBdPy5pbnNpZ2h0c1swXT8uZGF0YT8udGltZXN0YW1wIDwgMTAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaW5zaWdodHM6IEluc2lnaHRDYXRlZ29yeVtdID0gW107XG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2UgaW5zaWdodHNcbiAgICBjb25zdCBwZXJmb3JtYW5jZUluc2lnaHRzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVBlcmZvcm1hbmNlSW5zaWdodHMoY29udGV4dCk7XG4gICAgaW5zaWdodHMucHVzaCh7XG4gICAgICBuYW1lOiAnUGVyZm9ybWFuY2UnLFxuICAgICAgZGVzY3JpcHRpb246ICdDdXJyZW50IHBlcmZvcm1hbmNlIGFuYWx5c2lzIGFuZCB0cmVuZHMnLFxuICAgICAgcHJpb3JpdHk6IDEsXG4gICAgICBpbnNpZ2h0czogcGVyZm9ybWFuY2VJbnNpZ2h0c1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFVzYWdlIGluc2lnaHRzXG4gICAgY29uc3QgdXNhZ2VJbnNpZ2h0cyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVVc2FnZUluc2lnaHRzKGNvbnRleHQpO1xuICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgbmFtZTogJ1VzYWdlIFBhdHRlcm5zJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQW5hbHlzaXMgb2YgeW91ciB1c2FnZSBwYXR0ZXJucyBhbmQgYmVoYXZpb3InLFxuICAgICAgcHJpb3JpdHk6IDIsXG4gICAgICBpbnNpZ2h0czogdXNhZ2VJbnNpZ2h0c1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFRyYW5zcG9ydCBpbnNpZ2h0c1xuICAgIGNvbnN0IHRyYW5zcG9ydEluc2lnaHRzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVRyYW5zcG9ydEluc2lnaHRzKGNvbnRleHQpO1xuICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgbmFtZTogJ1RyYW5zcG9ydCBBbmFseXNpcycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1RyYW5zcG9ydCBwZXJmb3JtYW5jZSBhbmQgb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXMnLFxuICAgICAgcHJpb3JpdHk6IDMsXG4gICAgICBpbnNpZ2h0czogdHJhbnNwb3J0SW5zaWdodHNcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDYWNoZSBpbnNpZ2h0c1xuICAgIHRoaXMuaW5zaWdodENhY2hlLnNldChjYWNoZUtleSwgaW5zaWdodHMpO1xuICAgIFxuICAgIHJldHVybiBpbnNpZ2h0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwZXJmb3JtYW5jZS1yZWxhdGVkIGluc2lnaHRzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlUGVyZm9ybWFuY2VJbnNpZ2h0cyhjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBQcm9taXNlPEluc2lnaHRbXT4ge1xuICAgIGNvbnN0IGluc2lnaHRzOiBJbnNpZ2h0W10gPSBbXTtcbiAgICBjb25zdCBtZXRyaWNzID0gY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3M7XG4gICAgXG4gICAgLy8gTGF0ZW5jeSBpbnNpZ2h0XG4gICAgaWYgKG1ldHJpY3MuYXZlcmFnZUxhdGVuY3kgPCAyMDApIHtcbiAgICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgICBpZDogJ2xvdy1sYXRlbmN5JyxcbiAgICAgICAgdGl0bGU6ICdFeGNlbGxlbnQgUmVzcG9uc2UgVGltZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgWW91ciBhdmVyYWdlIHJlc3BvbnNlIHRpbWUgb2YgJHttZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5fW1zIGlzIGV4Y2VsbGVudC5gLFxuICAgICAgICB0eXBlOiAncG9zaXRpdmUnLFxuICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgIGRhdGE6IHsgbGF0ZW5jeTogbWV0cmljcy5hdmVyYWdlTGF0ZW5jeSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIGFjdGlvbmFibGU6IGZhbHNlLFxuICAgICAgICByZWxhdGVkOiBbXVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChtZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5ID4gNTAwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdoaWdoLWxhdGVuY3knLFxuICAgICAgICB0aXRsZTogJ0hpZ2ggUmVzcG9uc2UgVGltZSBEZXRlY3RlZCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgWW91ciBhdmVyYWdlIHJlc3BvbnNlIHRpbWUgb2YgJHttZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5fW1zIGNvdWxkIGJlIGltcHJvdmVkLmAsXG4gICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgY29uZmlkZW5jZTogMC44NSxcbiAgICAgICAgZGF0YTogeyBsYXRlbmN5OiBtZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5LCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICAgICAgYWN0aW9uYWJsZTogdHJ1ZSxcbiAgICAgICAgcmVsYXRlZDogW11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBFcnJvciByYXRlIGluc2lnaHRcbiAgICBpZiAobWV0cmljcy5lcnJvclJhdGUgPCAwLjAxKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdsb3ctZXJyb3ItcmF0ZScsXG4gICAgICAgIHRpdGxlOiAnTG93IEVycm9yIFJhdGUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYFlvdXIgZXJyb3IgcmF0ZSBvZiAkeyhtZXRyaWNzLmVycm9yUmF0ZSAqIDEwMCkudG9GaXhlZCgyKX0lIGlzIHZlcnkgZ29vZC5gLFxuICAgICAgICB0eXBlOiAncG9zaXRpdmUnLFxuICAgICAgICBjb25maWRlbmNlOiAwLjksXG4gICAgICAgIGRhdGE6IHsgZXJyb3JSYXRlOiBtZXRyaWNzLmVycm9yUmF0ZSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIGFjdGlvbmFibGU6IGZhbHNlLFxuICAgICAgICByZWxhdGVkOiBbXVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChtZXRyaWNzLmVycm9yUmF0ZSA+IDAuMDUpIHtcbiAgICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgICBpZDogJ2hpZ2gtZXJyb3ItcmF0ZScsXG4gICAgICAgIHRpdGxlOiAnSGlnaCBFcnJvciBSYXRlJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBZb3VyIGVycm9yIHJhdGUgb2YgJHsobWV0cmljcy5lcnJvclJhdGUgKiAxMDApLnRvRml4ZWQoMil9JSBuZWVkcyBhdHRlbnRpb24uYCxcbiAgICAgICAgdHlwZTogJ2NyaXRpY2FsJyxcbiAgICAgICAgY29uZmlkZW5jZTogMC45NSxcbiAgICAgICAgZGF0YTogeyBlcnJvclJhdGU6IG1ldHJpY3MuZXJyb3JSYXRlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICAgICAgYWN0aW9uYWJsZTogdHJ1ZSxcbiAgICAgICAgcmVsYXRlZDogW11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaW5zaWdodHM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgdXNhZ2UgcGF0dGVybiBpbnNpZ2h0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVVzYWdlSW5zaWdodHMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxJbnNpZ2h0W10+IHtcbiAgICBjb25zdCBpbnNpZ2h0czogSW5zaWdodFtdID0gW107XG4gICAgY29uc3QgYmVoYXZpb3IgPSBjb250ZXh0LnVzZXJCZWhhdmlvcjtcbiAgICBcbiAgICAvLyBVc2FnZSBmcmVxdWVuY3kgaW5zaWdodFxuICAgIGluc2lnaHRzLnB1c2goe1xuICAgICAgaWQ6ICd1c2FnZS1mcmVxdWVuY3knLFxuICAgICAgdGl0bGU6ICdVc2FnZSBQYXR0ZXJuIEFuYWx5c2lzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiBgWW91ciB1c2FnZSBmcmVxdWVuY3kgaXMgJHtiZWhhdmlvci51c2FnZUZyZXF1ZW5jeX0uICR7dGhpcy5nZXRVc2FnZUZyZXF1ZW5jeUFkdmljZShiZWhhdmlvci51c2FnZUZyZXF1ZW5jeSl9YCxcbiAgICAgIHR5cGU6ICduZXV0cmFsJyxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOCxcbiAgICAgIGRhdGE6IHsgZnJlcXVlbmN5OiBiZWhhdmlvci51c2FnZUZyZXF1ZW5jeSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICBhY3Rpb25hYmxlOiBiZWhhdmlvci51c2FnZUZyZXF1ZW5jeSAhPT0gJ21lZGl1bScsXG4gICAgICByZWxhdGVkOiBbXVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFBlYWsgdXNhZ2UgaW5zaWdodFxuICAgIGlmIChiZWhhdmlvci5wZWFrVXNhZ2VIb3Vycy5sZW5ndGggPiAwKSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgaWQ6ICdwZWFrLXVzYWdlJyxcbiAgICAgICAgdGl0bGU6ICdQZWFrIFVzYWdlIEhvdXJzJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBZb3VyIHBlYWsgdXNhZ2Ugb2NjdXJzIGR1cmluZyBob3VyczogJHtiZWhhdmlvci5wZWFrVXNhZ2VIb3Vycy5qb2luKCcsICcpfS4gQ29uc2lkZXIgb3B0aW1pemluZyBmb3IgdGhlc2UgdGltZXMuYCxcbiAgICAgICAgdHlwZTogJ25ldXRyYWwnLFxuICAgICAgICBjb25maWRlbmNlOiAwLjcsXG4gICAgICAgIGRhdGE6IHsgcGVha0hvdXJzOiBiZWhhdmlvci5wZWFrVXNhZ2VIb3VycywgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0sXG4gICAgICAgIGFjdGlvbmFibGU6IHRydWUsXG4gICAgICAgIHJlbGF0ZWQ6IFtdXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGluc2lnaHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHRyYW5zcG9ydC1zcGVjaWZpYyBpbnNpZ2h0c1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRyYW5zcG9ydEluc2lnaHRzKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IFByb21pc2U8SW5zaWdodFtdPiB7XG4gICAgY29uc3QgaW5zaWdodHM6IEluc2lnaHRbXSA9IFtdO1xuICAgIGNvbnN0IHVzYWdlID0gY29udGV4dC5wZXJmb3JtYW5jZU1ldHJpY3MudHJhbnNwb3J0VXNhZ2U7XG4gICAgXG4gICAgLy8gVHJhbnNwb3J0IGRpc3RyaWJ1dGlvbiBpbnNpZ2h0XG4gICAgY29uc3QgdG90YWxVc2FnZSA9IE9iamVjdC52YWx1ZXModXNhZ2UpLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCwgMCk7XG4gICAgY29uc3QgZG9taW5hbnRUcmFuc3BvcnQgPSBPYmplY3QuZW50cmllcyh1c2FnZSkucmVkdWNlKChhLCBiKSA9PiB1c2FnZVthWzBdIGFzIFRyYW5zcG9ydFR5cGVdID4gdXNhZ2VbYlswXSBhcyBUcmFuc3BvcnRUeXBlXSA/IGEgOiBiKTtcbiAgICBcbiAgICBpZiAodG90YWxVc2FnZSA+IDApIHtcbiAgICAgIGNvbnN0IGRvbWluYW50UGVyY2VudGFnZSA9ICh1c2FnZVtkb21pbmFudFRyYW5zcG9ydFswXSBhcyBUcmFuc3BvcnRUeXBlXSAvIHRvdGFsVXNhZ2UgKiAxMDApO1xuICAgICAgXG4gICAgICBpZiAoZG9taW5hbnRQZXJjZW50YWdlID4gODApIHtcbiAgICAgICAgaW5zaWdodHMucHVzaCh7XG4gICAgICAgICAgaWQ6ICd0cmFuc3BvcnQtY29uY2VudHJhdGlvbicsXG4gICAgICAgICAgdGl0bGU6ICdIZWF2eSBSZWxpYW5jZSBvbiBTaW5nbGUgVHJhbnNwb3J0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYFlvdSdyZSB1c2luZyAke2RvbWluYW50VHJhbnNwb3J0WzBdfSBmb3IgJHtkb21pbmFudFBlcmNlbnRhZ2UudG9GaXhlZCgxKX0lIG9mIHJlcXVlc3RzLiBDb25zaWRlciBsb2FkIGJhbGFuY2luZy5gLFxuICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJyxcbiAgICAgICAgICBjb25maWRlbmNlOiAwLjgsXG4gICAgICAgICAgZGF0YTogeyBkaXN0cmlidXRpb246IHVzYWdlLCBkb21pbmFudDogZG9taW5hbnRUcmFuc3BvcnRbMF0sIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9LFxuICAgICAgICAgIGFjdGlvbmFibGU6IHRydWUsXG4gICAgICAgICAgcmVsYXRlZDogW11cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnNpZ2h0cy5wdXNoKHtcbiAgICAgICAgICBpZDogJ2JhbGFuY2VkLXRyYW5zcG9ydC11c2FnZScsXG4gICAgICAgICAgdGl0bGU6ICdHb29kIFRyYW5zcG9ydCBEaXN0cmlidXRpb24nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnWW91ciB0cmFuc3BvcnQgdXNhZ2UgaXMgd2VsbCBiYWxhbmNlZCBhY3Jvc3MgYXZhaWxhYmxlIG9wdGlvbnMuJyxcbiAgICAgICAgICB0eXBlOiAncG9zaXRpdmUnLFxuICAgICAgICAgIGNvbmZpZGVuY2U6IDAuNzUsXG4gICAgICAgICAgZGF0YTogeyBkaXN0cmlidXRpb246IHVzYWdlLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSxcbiAgICAgICAgICBhY3Rpb25hYmxlOiBmYWxzZSxcbiAgICAgICAgICByZWxhdGVkOiBbXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGluc2lnaHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIHByZWRpY3RpdmUgYWxlcnRzIGZvciBwb3RlbnRpYWwgaXNzdWVzXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVByZWRpY3RpdmVBbGVydHMoY29udGV4dDogUmVjb21tZW5kYXRpb25Db250ZXh0KTogUHJvbWlzZTxQcmVkaWN0aXZlQWxlcnRbXT4ge1xuICAgIGNvbnN0IGFsZXJ0czogUHJlZGljdGl2ZUFsZXJ0W10gPSBbXTtcbiAgICBcbiAgICAvLyBQcmVkaWN0IHBlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uXG4gICAgY29uc3QgcGVyZm9ybWFuY2VUcmVuZCA9IHRoaXMuYW5hbHl6ZVBlcmZvcm1hbmNlVHJlbmQoY29udGV4dCk7XG4gICAgaWYgKHBlcmZvcm1hbmNlVHJlbmQuZGVjbGluaW5nICYmIHBlcmZvcm1hbmNlVHJlbmQuc2V2ZXJpdHkgPiAwLjcpIHtcbiAgICAgIGFsZXJ0cy5wdXNoKHtcbiAgICAgICAgaWQ6IGBwZXJmLWRlZ3JhZGF0aW9uLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0eXBlOiAncGVyZm9ybWFuY2VfZGVncmFkYXRpb24nLFxuICAgICAgICBzZXZlcml0eTogJ3dhcm5pbmcnLFxuICAgICAgICBwcm9iYWJpbGl0eTogcGVyZm9ybWFuY2VUcmVuZC5zZXZlcml0eSxcbiAgICAgICAgdGltZWZyYW1lOiAnMjRoJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdQZXJmb3JtYW5jZSBkZWdyYWRhdGlvbiB0cmVuZCBkZXRlY3RlZC4gUmVzcG9uc2UgdGltZXMgbWF5IGluY3JlYXNlIHNpZ25pZmljYW50bHkuJyxcbiAgICAgICAgcHJldmVudGl2ZUFjdGlvbnM6IFtdLFxuICAgICAgICB0cmlnZ2VyczogWydpbmNyZWFzaW5nX2xhdGVuY3knLCAnZXJyb3JfcmF0ZV9yaXNlJ11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBQcmVkaWN0IHRyYW5zcG9ydCBmYWlsdXJlXG4gICAgaWYgKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSA+IDAuMSkge1xuICAgICAgYWxlcnRzLnB1c2goe1xuICAgICAgICBpZDogYHRyYW5zcG9ydC1mYWlsdXJlLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0eXBlOiAndHJhbnNwb3J0X2ZhaWx1cmUnLFxuICAgICAgICBzZXZlcml0eTogJ2Vycm9yJyxcbiAgICAgICAgcHJvYmFiaWxpdHk6IE1hdGgubWluKGNvbnRleHQucGVyZm9ybWFuY2VNZXRyaWNzLmVycm9yUmF0ZSAqIDIsIDAuOSksXG4gICAgICAgIHRpbWVmcmFtZTogJzFoJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGAke2NvbnRleHQuY3VycmVudFRyYW5zcG9ydH0gdHJhbnNwb3J0IHNob3dpbmcgaGlnaCBlcnJvciByYXRlLiBGYWlsdXJlIHJpc2sgaXMgZWxldmF0ZWQuYCxcbiAgICAgICAgcHJldmVudGl2ZUFjdGlvbnM6IFtdLFxuICAgICAgICB0cmlnZ2VyczogWydoaWdoX2Vycm9yX3JhdGUnLCAnY29ubmVjdGlvbl9pbnN0YWJpbGl0eSddXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGFsZXJ0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFseXplIHBlcmZvcm1hbmNlIHRyZW5kIGZyb20gaGlzdG9yaWNhbCBkYXRhXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVQZXJmb3JtYW5jZVRyZW5kKGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCk6IHsgZGVjbGluaW5nOiBib29sZWFuOyBzZXZlcml0eTogbnVtYmVyIH0ge1xuICAgIC8vIFNpbXVsYXRlIHRyZW5kIGFuYWx5c2lzIC0gaW4gcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBhbmFseXplIGhpc3RvcmljYWwgZGF0YVxuICAgIGNvbnN0IHJlY2VudExhdGVuY3kgPSBjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5hdmVyYWdlTGF0ZW5jeTtcbiAgICBjb25zdCByZWNlbnRFcnJvclJhdGUgPSBjb250ZXh0LnBlcmZvcm1hbmNlTWV0cmljcy5lcnJvclJhdGU7XG4gICAgXG4gICAgLy8gU2ltcGxlIGhldXJpc3RpYyBmb3IgdHJlbmQgYW5hbHlzaXNcbiAgICBjb25zdCBsYXRlbmN5U2NvcmUgPSBNYXRoLm1pbihyZWNlbnRMYXRlbmN5IC8gMTAwMCwgMSk7IC8vIE5vcm1hbGl6ZSB0byAwLTFcbiAgICBjb25zdCBlcnJvclNjb3JlID0gTWF0aC5taW4ocmVjZW50RXJyb3JSYXRlICogMTAsIDEpOyAvLyBOb3JtYWxpemUgdG8gMC0xXG4gICAgXG4gICAgY29uc3Qgc2V2ZXJpdHkgPSAobGF0ZW5jeVNjb3JlICsgZXJyb3JTY29yZSkgLyAyO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBkZWNsaW5pbmc6IHNldmVyaXR5ID4gMC41LFxuICAgICAgc2V2ZXJpdHk6IHNldmVyaXR5XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWR2aWNlIGJhc2VkIG9uIHVzYWdlIGZyZXF1ZW5jeVxuICAgKi9cbiAgcHJpdmF0ZSBnZXRVc2FnZUZyZXF1ZW5jeUFkdmljZShmcmVxdWVuY3k6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChmcmVxdWVuY3kpIHtcbiAgICAgIGNhc2UgJ2xvdyc6XG4gICAgICAgIHJldHVybiAnQ29uc2lkZXIgdXNpbmcgRmlsZVN5c3RlbSB0cmFuc3BvcnQgZm9yIGJldHRlciBvZmZsaW5lIGNhcGFiaWxpdHkuJztcbiAgICAgIGNhc2UgJ2hpZ2gnOlxuICAgICAgICByZXR1cm4gJ1dlYlNvY2tldCB0cmFuc3BvcnQgbWlnaHQgcHJvdmlkZSBiZXR0ZXIgcGVyZm9ybWFuY2UgZm9yIHlvdXIgaW50ZW5zaXZlIHVzYWdlLic7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ1lvdXIgY3VycmVudCBjb25maWd1cmF0aW9uIHNob3VsZCB3b3JrIHdlbGwgZm9yIHlvdXIgdXNhZ2UgcGF0dGVybnMuJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY2FjaGUga2V5IGZvciBpbnNpZ2h0c1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUluc2lnaHRDYWNoZUtleShjb250ZXh0OiBSZWNvbW1lbmRhdGlvbkNvbnRleHQpOiBzdHJpbmcge1xuICAgIHJldHVybiBgaW5zaWdodHMtJHtjb250ZXh0LnNlc3Npb25JZH0tJHtjb250ZXh0LmN1cnJlbnRUcmFuc3BvcnR9LSR7TWF0aC5mbG9vcihEYXRlLm5vdygpIC8gKDEwICogNjAgKiAxMDAwKSl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHByZWRpY3Rpb24gbW9kZWxzIChwbGFjZWhvbGRlciBmb3IgZnV0dXJlIE1MIG1vZGVscylcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVByZWRpY3Rpb25Nb2RlbHMoKTogdm9pZCB7XG4gICAgLy8gUGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBtYWNoaW5lIGxlYXJuaW5nIG1vZGVsIGluaXRpYWxpemF0aW9uXG4gICAgdGhpcy5wcmVkaWN0aW9uTW9kZWxzLnNldCgncGVyZm9ybWFuY2VfdHJlbmQnLCB7XG4gICAgICB0eXBlOiAnbGluZWFyX3JlZ3Jlc3Npb24nLFxuICAgICAgZmVhdHVyZXM6IFsnbGF0ZW5jeScsICdlcnJvcl9yYXRlJywgJ3Rocm91Z2hwdXQnXSxcbiAgICAgIHRyYWluZWQ6IGZhbHNlXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5wcmVkaWN0aW9uTW9kZWxzLnNldCgnZmFpbHVyZV9wcmVkaWN0aW9uJywge1xuICAgICAgdHlwZTogJ2NsYXNzaWZpY2F0aW9uJyxcbiAgICAgIGZlYXR1cmVzOiBbJ2Vycm9yX3JhdGUnLCAnbGF0ZW5jeV92YXJpYW5jZScsICdjb25uZWN0aW9uX2ZhaWx1cmVzJ10sXG4gICAgICB0cmFpbmVkOiBmYWxzZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrIHJlY29tbWVuZGF0aW9uIGVmZmVjdGl2ZW5lc3MgKGNhbGxlZCBhZnRlciBpbXBsZW1lbnRhdGlvbilcbiAgICovXG4gIHRyYWNrUmVjb21tZW5kYXRpb25FZmZlY3RpdmVuZXNzKHJlY29tbWVuZGF0aW9uSWQ6IHN0cmluZywgZWZmZWN0aXZlbmVzczogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb24gPSB0aGlzLmFwcGxpZWRSZWNvbW1lbmRhdGlvbnMuZ2V0KHJlY29tbWVuZGF0aW9uSWQpO1xuICAgIGlmIChyZWNvbW1lbmRhdGlvbikge1xuICAgICAgcmVjb21tZW5kYXRpb24uZWZmZWN0aXZlbmVzcyA9IGVmZmVjdGl2ZW5lc3M7XG4gICAgICByZWNvbW1lbmRhdGlvbi5hcHBsaWVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgcHJlZGljdGlvbiBtb2RlbHMgYmFzZWQgb24gZmVlZGJhY2sgKGZ1dHVyZSBlbmhhbmNlbWVudClcbiAgICAgIGNvbnNvbGUubG9nKGBSZWNvbW1lbmRhdGlvbiAke3JlY29tbWVuZGF0aW9uSWR9IGVmZmVjdGl2ZW5lc3M6ICR7ZWZmZWN0aXZlbmVzc31gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlY29tbWVuZGF0aW9uIHN0YXRpc3RpY3NcbiAgICovXG4gIGdldFJlY29tbWVuZGF0aW9uU3RhdHMoKToge1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgYXBwbGllZDogbnVtYmVyO1xuICAgIGF2ZXJhZ2VFZmZlY3RpdmVuZXNzOiBudW1iZXI7XG4gICAgYnlUeXBlOiBSZWNvcmQ8UmVjb21tZW5kYXRpb25UeXBlLCBudW1iZXI+O1xuICB9IHtcbiAgICBjb25zdCBhcHBsaWVkID0gQXJyYXkuZnJvbSh0aGlzLmFwcGxpZWRSZWNvbW1lbmRhdGlvbnMudmFsdWVzKCkpLmZpbHRlcihyID0+IHIuYXBwbGllZEF0KTtcbiAgICBjb25zdCBlZmZlY3RpdmVuZXNzID0gYXBwbGllZC5maWx0ZXIociA9PiByLmVmZmVjdGl2ZW5lc3MgIT09IHVuZGVmaW5lZCk7XG4gICAgXG4gICAgY29uc3QgYnlUeXBlOiBSZWNvcmQ8UmVjb21tZW5kYXRpb25UeXBlLCBudW1iZXI+ID0ge30gYXMgUmVjb3JkPFJlY29tbWVuZGF0aW9uVHlwZSwgbnVtYmVyPjtcbiAgICBhcHBsaWVkLmZvckVhY2gocmVjID0+IHtcbiAgICAgIGJ5VHlwZVtyZWMudHlwZV0gPSAoYnlUeXBlW3JlYy50eXBlXSB8fCAwKSArIDE7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsOiB0aGlzLmFwcGxpZWRSZWNvbW1lbmRhdGlvbnMuc2l6ZSxcbiAgICAgIGFwcGxpZWQ6IGFwcGxpZWQubGVuZ3RoLFxuICAgICAgYXZlcmFnZUVmZmVjdGl2ZW5lc3M6IGVmZmVjdGl2ZW5lc3MubGVuZ3RoID4gMCBcbiAgICAgICAgPyBlZmZlY3RpdmVuZXNzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyAoci5lZmZlY3RpdmVuZXNzIHx8IDApLCAwKSAvIGVmZmVjdGl2ZW5lc3MubGVuZ3RoIFxuICAgICAgICA6IDAsXG4gICAgICBieVR5cGVcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIEJhc2UgdHJhbnNwb3J0IGltcGxlbWVudGF0aW9uIHdpdGggY29tbW9uIGZ1bmN0aW9uYWxpdHlcbiAqIEFsbCBzcGVjaWZpYyB0cmFuc3BvcnQgdHlwZXMgZXh0ZW5kIHRoaXMgYmFzZSBjbGFzc1xuICovXG5cbmltcG9ydCB7IFxuICBEZXZQaXBlVHJhbnNwb3J0LCBcbiAgVHJhbnNwb3J0VHlwZSwgXG4gIFRyYW5zcG9ydENvbmZpZywgXG4gIFRyYW5zcG9ydEhlYWx0aFN0YXR1cywgXG4gIEhlYWx0aENoZWNrUmVzdWx0LFxuICBFdmVudExpc3RlbmVyLFxuICBUcmFuc3BvcnRFdmVudCxcbiAgRGV2UGlwZU1lc3NhZ2UsXG4gIERldlBpcGVSZXNwb25zZSxcbiAgVHJhbnNwb3J0Q2FwYWJpbGl0aWVzXG59IGZyb20gJy4vRGV2UGlwZVRyYW5zcG9ydCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2lyY3VpdEJyZWFrZXJDb25maWcge1xuICBmYWlsdXJlVGhyZXNob2xkOiBudW1iZXI7XG4gIHJlc2V0VGltZW91dDogbnVtYmVyO1xuICBtb25pdG9yaW5nUGVyaW9kOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNwb3J0TWV0cmljcyB7XG4gIG1lc3NhZ2VzU2VudDogbnVtYmVyO1xuICBtZXNzYWdlc1JlY2VpdmVkOiBudW1iZXI7XG4gIGVycm9yczogbnVtYmVyO1xuICB0b3RhbExhdGVuY3k6IG51bWJlcjtcbiAgbGFzdEFjdGl2aXR5OiBudW1iZXI7XG59XG5cbi8qKlxuICogQ2lyY3VpdCBicmVha2VyIHBhdHRlcm4gaW1wbGVtZW50YXRpb24gZm9yIHRyYW5zcG9ydCByZWxpYWJpbGl0eVxuICovXG5leHBvcnQgY2xhc3MgQ2lyY3VpdEJyZWFrZXIge1xuICBwcml2YXRlIHN0YXRlOiAnY2xvc2VkJyB8ICdvcGVuJyB8ICdoYWxmLW9wZW4nID0gJ2Nsb3NlZCc7XG4gIHByaXZhdGUgZmFpbHVyZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGxhc3RGYWlsdXJlVGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBuZXh0QXR0ZW1wdDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBjb25maWc6IENpcmN1aXRCcmVha2VyQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogQ2lyY3VpdEJyZWFrZXJDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGU8VD4ob3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09ICdvcGVuJykge1xuICAgICAgaWYgKERhdGUubm93KCkgPCB0aGlzLm5leHRBdHRlbXB0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2lyY3VpdCBicmVha2VyIGlzIE9QRU4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUgPSAnaGFsZi1vcGVuJztcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICB0aGlzLm9uU3VjY2VzcygpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5vbkZhaWx1cmUoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25TdWNjZXNzKCk6IHZvaWQge1xuICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMDtcbiAgICB0aGlzLnN0YXRlID0gJ2Nsb3NlZCc7XG4gIH1cblxuICBwcml2YXRlIG9uRmFpbHVyZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZhaWx1cmVDb3VudCsrO1xuICAgIHRoaXMubGFzdEZhaWx1cmVUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIGlmICh0aGlzLmZhaWx1cmVDb3VudCA+PSB0aGlzLmNvbmZpZy5mYWlsdXJlVGhyZXNob2xkKSB7XG4gICAgICB0aGlzLnN0YXRlID0gJ29wZW4nO1xuICAgICAgdGhpcy5uZXh0QXR0ZW1wdCA9IERhdGUubm93KCkgKyB0aGlzLmNvbmZpZy5yZXNldFRpbWVvdXQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxufVxuXG4vKipcbiAqIEJhc2UgdHJhbnNwb3J0IGNsYXNzIHdpdGggY29tbW9uIGZ1bmN0aW9uYWxpdHlcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VUcmFuc3BvcnQgaW1wbGVtZW50cyBEZXZQaXBlVHJhbnNwb3J0IHtcbiAgcHJvdGVjdGVkIGNvbmZpZzogVHJhbnNwb3J0Q29uZmlnO1xuICBwcm90ZWN0ZWQgaGVhbHRoU3RhdHVzOiBUcmFuc3BvcnRIZWFsdGhTdGF0dXM7XG4gIHByb3RlY3RlZCBjaXJjdWl0QnJlYWtlcjogQ2lyY3VpdEJyZWFrZXI7XG4gIHByb3RlY3RlZCBtZXRyaWNzOiBUcmFuc3BvcnRNZXRyaWNzO1xuICBwcm90ZWN0ZWQgZXZlbnRMaXN0ZW5lcnM6IE1hcDxzdHJpbmcsIEV2ZW50TGlzdGVuZXJbXT4gPSBuZXcgTWFwKCk7XG4gIFxuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogVHJhbnNwb3J0VHlwZTtcbiAgcHVibGljIHJlYWRvbmx5IGlkOiBzdHJpbmc7XG4gIHByb3RlY3RlZCBjb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJvdGVjdGVkIGluaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IodHlwZTogVHJhbnNwb3J0VHlwZSwgY29uZmlnOiBUcmFuc3BvcnRDb25maWcpIHtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuaWQgPSBgJHt0eXBlfS0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgXG4gICAgdGhpcy5oZWFsdGhTdGF0dXMgPSB7XG4gICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgbGFzdENoZWNrOiBEYXRlLm5vdygpLFxuICAgICAgbGF0ZW5jeTogMCxcbiAgICAgIGVycm9yUmF0ZTogMCxcbiAgICAgIGNvbnNlY3V0aXZlRmFpbHVyZXM6IDAsXG4gICAgICB1cHRpbWU6IDBcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuY2lyY3VpdEJyZWFrZXIgPSBuZXcgQ2lyY3VpdEJyZWFrZXIoe1xuICAgICAgZmFpbHVyZVRocmVzaG9sZDogNSxcbiAgICAgIHJlc2V0VGltZW91dDogMzAwMDAsXG4gICAgICBtb25pdG9yaW5nUGVyaW9kOiAxMDAwMFxuICAgIH0pO1xuICAgIFxuICAgIHRoaXMubWV0cmljcyA9IHtcbiAgICAgIG1lc3NhZ2VzU2VudDogMCxcbiAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IDAsXG4gICAgICBlcnJvcnM6IDAsXG4gICAgICB0b3RhbExhdGVuY3k6IDAsXG4gICAgICBsYXN0QWN0aXZpdHk6IERhdGUubm93KClcbiAgICB9O1xuXG4gICAgdGhpcy5kZWJ1ZyhgVHJhbnNwb3J0ICR7dGhpcy5pZH0gY3JlYXRlZGApO1xuICB9XG5cbiAgLy8gRXZlbnQgc3lzdGVtIGltcGxlbWVudGF0aW9uXG4gIG9uKGV2ZW50OiBUcmFuc3BvcnRFdmVudCB8IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcbiAgICBjb25zdCBldmVudEtleSA9IGV2ZW50LnRvU3RyaW5nKCk7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudEtleSkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50S2V5LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50S2V5KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IFRyYW5zcG9ydEV2ZW50IHwgc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcik6IHZvaWQge1xuICAgIGNvbnN0IGV2ZW50S2V5ID0gZXZlbnQudG9TdHJpbmcoKTtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudEtleSk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBlbWl0KGV2ZW50OiBUcmFuc3BvcnRFdmVudCB8IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGV2ZW50S2V5ID0gZXZlbnQudG9TdHJpbmcoKTtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldChldmVudEtleSk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxpc3RlbmVyKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZGVidWcoYEVycm9yIGluIGV2ZW50IGxpc3RlbmVyIGZvciAke2V2ZW50S2V5fTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhlYWx0aCBtb25pdG9yaW5nXG4gIGFzeW5jIHBlcmZvcm1IZWFsdGhDaGVjaygpOiBQcm9taXNlPEhlYWx0aENoZWNrUmVzdWx0PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5kb0hlYWx0aENoZWNrKCk7XG4gICAgICBjb25zdCBsYXRlbmN5ID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2hlYWx0aHknO1xuICAgICAgdGhpcy5oZWFsdGhTdGF0dXMubGF0ZW5jeSA9IGxhdGVuY3k7XG4gICAgICB0aGlzLmhlYWx0aFN0YXR1cy5jb25zZWN1dGl2ZUZhaWx1cmVzID0gMDtcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLmxhc3RDaGVjayA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5IRUFMVEhfQ0hFQ0ssIHsgc3VjY2VzczogdHJ1ZSwgbGF0ZW5jeSB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbGF0ZW5jeSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLnN0YXR1cyA9ICdmYWlsaW5nJztcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLmNvbnNlY3V0aXZlRmFpbHVyZXMrKztcbiAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLmxhc3RDaGVjayA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkhFQUxUSF9DSEVDSywgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTWVzc2FnZSB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UsIGxhdGVuY3k6IERhdGUubm93KCkgLSBzdGFydFRpbWUsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIENpcmN1aXQgYnJlYWtlciB3cmFwcGVyIGZvciBvcGVyYXRpb25zXG4gIHByb3RlY3RlZCBhc3luYyBleGVjdXRlV2l0aENpcmN1aXRCcmVha2VyPFQ+KFxuICAgIG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICBvcGVyYXRpb25OYW1lOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxUPiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jaXJjdWl0QnJlYWtlci5leGVjdXRlKG9wZXJhdGlvbik7XG4gICAgICBjb25zdCBsYXRlbmN5ID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgIHRoaXMudXBkYXRlTWV0cmljcyh0cnVlLCBsYXRlbmN5KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGxhdGVuY3kgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgdGhpcy51cGRhdGVNZXRyaWNzKGZhbHNlLCBsYXRlbmN5KTtcbiAgICAgIHRoaXMuZGVidWcoYE9wZXJhdGlvbiAke29wZXJhdGlvbk5hbWV9IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1ldHJpY3Moc3VjY2VzczogYm9vbGVhbiwgbGF0ZW5jeTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMubWV0cmljcy5tZXNzYWdlc1NlbnQrKztcbiAgICAgIHRoaXMubWV0cmljcy50b3RhbExhdGVuY3kgKz0gbGF0ZW5jeTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXRyaWNzLmVycm9ycysrO1xuICAgIH1cbiAgICB0aGlzLm1ldHJpY3MubGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgbWV0aG9kc1xuICBwcm90ZWN0ZWQgZ2VuZXJhdGVNZXNzYWdlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG1zZy0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICBwcm90ZWN0ZWQgZGVidWcobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coYFske3RoaXMudHlwZX06JHt0aGlzLmlkfV0gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBjYWxjdWxhdGVSZWxpYWJpbGl0eSgpOiBudW1iZXIge1xuICAgIGNvbnN0IHRvdGFsID0gdGhpcy5tZXRyaWNzLm1lc3NhZ2VzU2VudCArIHRoaXMubWV0cmljcy5lcnJvcnM7XG4gICAgaWYgKHRvdGFsID09PSAwKSByZXR1cm4gMS4wO1xuICAgIHJldHVybiB0aGlzLm1ldHJpY3MubWVzc2FnZXNTZW50IC8gdG90YWw7XG4gIH1cblxuICAvLyBTdGFuZGFyZCBpbnRlcmZhY2UgaW1wbGVtZW50YXRpb25zXG4gIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmluaXRpYWxpemVkICYmIHRoaXMuY2lyY3VpdEJyZWFrZXIuZ2V0U3RhdGUoKSAhPT0gJ29wZW4nO1xuICB9XG5cbiAgaXNDb25uZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkICYmIHRoaXMuaXNBdmFpbGFibGUoKTtcbiAgfVxuXG4gIGdldEhlYWx0aFN0YXR1cygpOiBUcmFuc3BvcnRIZWFsdGhTdGF0dXMge1xuICAgIHJldHVybiB7IC4uLnRoaXMuaGVhbHRoU3RhdHVzIH07XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKGNvbmZpZzogVHJhbnNwb3J0Q29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jb25maWcgPSB7IC4uLnRoaXMuY29uZmlnLCAuLi5jb25maWcgfTtcbiAgICBhd2FpdCB0aGlzLmRvSW5pdGlhbGl6ZSgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHRoaXMuZGVidWcoJ1RyYW5zcG9ydCBpbml0aWFsaXplZCcpO1xuICB9XG5cbiAgYXN5bmMgZGVzdHJveSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHRoaXMuZGVidWcoJ1RyYW5zcG9ydCBkZXN0cm95ZWQnKTtcbiAgfVxuXG4gIC8vIEFic3RyYWN0IG1ldGhvZHMgdGhhdCBtdXN0IGJlIGltcGxlbWVudGVkIGJ5IHNwZWNpZmljIHRyYW5zcG9ydCB0eXBlc1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZG9Jbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD47XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBkb0hlYWx0aENoZWNrKCk6IFByb21pc2U8dm9pZD47XG4gIHB1YmxpYyBhYnN0cmFjdCBjb25uZWN0KCk6IFByb21pc2U8dm9pZD47XG4gIHB1YmxpYyBhYnN0cmFjdCBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD47XG4gIHB1YmxpYyBhYnN0cmFjdCBzZW5kKG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlKTogUHJvbWlzZTxEZXZQaXBlUmVzcG9uc2U+O1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0Q2FwYWJpbGl0aWVzKCk6IFRyYW5zcG9ydENhcGFiaWxpdGllcztcbn1cbiIsIi8qKlxuICogRW5oYW5jZWQgSFRUUCBUcmFuc3BvcnQgZm9yIERldlBpcGUgY29tbXVuaWNhdGlvblxuICogU3VwcG9ydHMgU2VydmVyLVNlbnQgRXZlbnRzLCBjb25uZWN0aW9uIHBvb2xpbmcsIGFuZCBhZHZhbmNlZCByZXRyeSBsb2dpY1xuICovXG5cbmltcG9ydCB7IFxuICBEZXZQaXBlVHJhbnNwb3J0LFxuICBUcmFuc3BvcnRUeXBlLFxuICBUcmFuc3BvcnRDb25maWcsXG4gIFRyYW5zcG9ydENhcGFiaWxpdGllcyxcbiAgRGV2UGlwZU1lc3NhZ2UsXG4gIERldlBpcGVSZXNwb25zZSxcbiAgVHJhbnNwb3J0RXZlbnQsXG4gIEhUVFBUcmFuc3BvcnRDb25maWdcbn0gZnJvbSAnLi9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCB7IEJhc2VUcmFuc3BvcnQgfSBmcm9tICcuL0Jhc2VUcmFuc3BvcnQnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciB9IGZyb20gJy4uLy4uL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuXG5pbnRlcmZhY2UgUGVuZGluZ1JlcXVlc3Qge1xuICBpZDogc3RyaW5nO1xuICBtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZTtcbiAgcmVzb2x2ZTogKHJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UpID0+IHZvaWQ7XG4gIHJlamVjdDogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgdGltZW91dDogYW55OyAvLyBDYW4gYmUgTm9kZUpTLlRpbWVvdXQgb3IgbnVtYmVyIGRlcGVuZGluZyBvbiBlbnZpcm9ubWVudFxuICB0aW1lc3RhbXA6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIENvbm5lY3Rpb25Qb29sT3B0aW9ucyB7XG4gIG1heENvbm5lY3Rpb25zOiBudW1iZXI7XG4gIGtlZXBBbGl2ZTogYm9vbGVhbjtcbiAgdGltZW91dDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFNpbXBsZSBjb25uZWN0aW9uIHBvb2wgZm9yIEhUVFAgcmVxdWVzdHNcbiAqL1xuY2xhc3MgQ29ubmVjdGlvblBvb2wge1xuICBwcml2YXRlIGFjdGl2ZUNvbm5lY3Rpb25zOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIG1heENvbm5lY3Rpb25zOiBudW1iZXI7XG4gIHByaXZhdGUgcXVldWU6ICgoKSA9PiB2b2lkKVtdID0gW107XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogQ29ubmVjdGlvblBvb2xPcHRpb25zKSB7XG4gICAgdGhpcy5tYXhDb25uZWN0aW9ucyA9IG9wdGlvbnMubWF4Q29ubmVjdGlvbnM7XG4gIH1cblxuICBhc3luYyBhY3F1aXJlPFQ+KG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBleGVjdXRlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2ZUNvbm5lY3Rpb25zKys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdGhpcy5hY3RpdmVDb25uZWN0aW9ucy0tO1xuICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAobmV4dCkgbmV4dCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuYWN0aXZlQ29ubmVjdGlvbnMgPCB0aGlzLm1heENvbm5lY3Rpb25zKSB7XG4gICAgICAgIGV4ZWN1dGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucXVldWUucHVzaChleGVjdXRlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEhUVFAgVHJhbnNwb3J0IGltcGxlbWVudGF0aW9uIHdpdGggZW5oYW5jZWQgZmVhdHVyZXNcbiAqL1xuZXhwb3J0IGNsYXNzIEhUVFBUcmFuc3BvcnQgZXh0ZW5kcyBCYXNlVHJhbnNwb3J0IHtcbiAgcHJpdmF0ZSBzc2VDb25uZWN0aW9uPzogRXZlbnRTb3VyY2U7XG4gIHByaXZhdGUgY29ubmVjdGlvblBvb2w6IENvbm5lY3Rpb25Qb29sO1xuICBwcml2YXRlIHBlbmRpbmdSZXF1ZXN0czogTWFwPHN0cmluZywgUGVuZGluZ1JlcXVlc3Q+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGh0dHBDb25maWc6IEhUVFBUcmFuc3BvcnRDb25maWc7XG4gIHByaXZhdGUgbWVzc2FnZVF1ZXVlOiBEZXZQaXBlTWVzc2FnZVtdID0gW107XG4gIHByaXZhdGUgcHJvY2Vzc2luZ1F1ZXVlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBUcmFuc3BvcnRDb25maWcpIHtcbiAgICBzdXBlcihUcmFuc3BvcnRUeXBlLkhUVFAsIGNvbmZpZyk7XG4gICAgXG4gICAgdGhpcy5odHRwQ29uZmlnID0gY29uZmlnLmh0dHAgfHwge1xuICAgICAgZW5hYmxlU1NFOiB0cnVlLFxuICAgICAgbWF4Q29ubmVjdGlvbnM6IDEwLFxuICAgICAga2VlcEFsaXZlOiB0cnVlLFxuICAgICAgY29tcHJlc3Npb246IHRydWVcbiAgICB9O1xuICAgIFxuICAgIHRoaXMuY29ubmVjdGlvblBvb2wgPSBuZXcgQ29ubmVjdGlvblBvb2woe1xuICAgICAgbWF4Q29ubmVjdGlvbnM6IHRoaXMuaHR0cENvbmZpZy5tYXhDb25uZWN0aW9ucyB8fCAxMCxcbiAgICAgIGtlZXBBbGl2ZTogdGhpcy5odHRwQ29uZmlnLmtlZXBBbGl2ZSAhPT0gZmFsc2UsXG4gICAgICB0aW1lb3V0OiBjb25maWcudGltZW91dFxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGRvSW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBWYWxpZGF0ZSBIVFRQIHN1cHBvcnQgaW4gZW52aXJvbm1lbnRcbiAgICBjb25zdCBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgaWYgKCFlbnZpcm9ubWVudC5oYXNIVFRQKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgdHJhbnNwb3J0IG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgIH1cblxuICAgIHRoaXMuZGVidWcoJ0hUVFAgdHJhbnNwb3J0IGluaXRpYWxpemVkJyk7XG4gIH1cblxuICBhc3luYyBjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUZXN0IGJhc2ljIGNvbm5lY3Rpdml0eVxuICAgICAgYXdhaXQgdGhpcy5kb0hlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIFNldHVwIFNlcnZlci1TZW50IEV2ZW50cyBpZiBlbmFibGVkXG4gICAgICBpZiAodGhpcy5odHRwQ29uZmlnLmVuYWJsZVNTRSAmJiB0aGlzLmNvbmZpZy5zZXJ2ZXJVcmwpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXR1cFNTRSgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICB0aGlzLmhlYWx0aFN0YXR1cy5zdGF0dXMgPSAnaGVhbHRoeSc7XG4gICAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuQ09OTkVDVEVELCB7IHRyYW5zcG9ydDogdGhpcy50eXBlIH0pO1xuICAgICAgXG4gICAgICB0aGlzLmRlYnVnKCdIVFRQIHRyYW5zcG9ydCBjb25uZWN0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkVSUk9SLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFJlamVjdCBhbGwgcGVuZGluZyByZXF1ZXN0c1xuICAgIGNvbnN0IHJlcXVlc3RzID0gQXJyYXkuZnJvbSh0aGlzLnBlbmRpbmdSZXF1ZXN0cy52YWx1ZXMoKSk7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0IG9mIHJlcXVlc3RzKSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVxdWVzdC50aW1lb3V0KTtcbiAgICAgIHJlcXVlc3QucmVqZWN0KG5ldyBFcnJvcignVHJhbnNwb3J0IGRpc2Nvbm5lY3RlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuY2xlYXIoKTtcblxuICAgIC8vIENsb3NlIFNTRSBjb25uZWN0aW9uXG4gICAgaWYgKHRoaXMuc3NlQ29ubmVjdGlvbikge1xuICAgICAgdGhpcy5zc2VDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICB0aGlzLnNzZUNvbm5lY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhlYWx0aFN0YXR1cy5zdGF0dXMgPSAnZGlzY29ubmVjdGVkJztcbiAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuRElTQ09OTkVDVEVELCB7IHRyYW5zcG9ydDogdGhpcy50eXBlIH0pO1xuICAgIFxuICAgIHRoaXMuZGVidWcoJ0hUVFAgdHJhbnNwb3J0IGRpc2Nvbm5lY3RlZCcpO1xuICB9XG5cbiAgYXN5bmMgc2VuZChtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPiB7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSFRUUCB0cmFuc3BvcnQgbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIC8vIEFkZCBtZXNzYWdlIElEIGlmIG5vdCBwcmVzZW50XG4gICAgaWYgKCFtZXNzYWdlLmlkKSB7XG4gICAgICBtZXNzYWdlLmlkID0gdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aW1lc3RhbXBcbiAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cbiAgICByZXR1cm4gdGhpcy5leGVjdXRlV2l0aENpcmN1aXRCcmVha2VyKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnNlbmRIdHRwUmVxdWVzdChtZXNzYWdlKTtcbiAgICB9LCAnaHR0cF9zZW5kJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRIdHRwUmVxdWVzdChtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgUmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGhpcy5jb25maWcudGltZW91dH1tc2ApKTtcbiAgICAgIH0sIHRoaXMuY29uZmlnLnRpbWVvdXQpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBQZW5kaW5nUmVxdWVzdCA9IHtcbiAgICAgICAgaWQ6IG1lc3NhZ2UuaWQhLFxuICAgICAgICBtZXNzYWdlLFxuICAgICAgICByZXNvbHZlOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0OiB0aW1lb3V0SGFuZGxlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG5cbiAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLnNldChtZXNzYWdlLmlkISwgcmVxdWVzdCk7XG4gICAgICB0aGlzLnBlcmZvcm1IdHRwUmVxdWVzdChtZXNzYWdlLCByZXF1ZXN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUh0dHBSZXF1ZXN0KG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlLCByZXF1ZXN0OiBQZW5kaW5nUmVxdWVzdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY29ubmVjdGlvblBvb2wuYWNxdWlyZShhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZldGNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmNvbmZpZy5zZXJ2ZXJVcmx9L2FwaS92MS9kZXZwaXBlL21lc3NhZ2VgLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIC4uLih0aGlzLmh0dHBDb25maWcuY29tcHJlc3Npb24gJiYgeyAnQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUnIH0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShtZXNzYWdlKVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWZldGNoUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtmZXRjaFJlc3BvbnNlLnN0YXR1c306ICR7ZmV0Y2hSZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZldGNoUmVzcG9uc2UuanNvbigpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEhhbmRsZSBpbW1lZGlhdGUgcmVzcG9uc2VcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5pZCA9PT0gbWVzc2FnZS5pZCkge1xuICAgICAgICBjb25zdCBkZXZQaXBlUmVzcG9uc2U6IERldlBpcGVSZXNwb25zZSA9IHtcbiAgICAgICAgICBpZDogcmVzcG9uc2UuaWQsXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBwYXlsb2FkOiByZXNwb25zZS5wYXlsb2FkIHx8IHJlc3BvbnNlLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LnJlc29sdmUoZGV2UGlwZVJlc3BvbnNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdhaXQgZm9yIGFzeW5jIHJlc3BvbnNlIHZpYSBTU0Ugb3IgcG9sbGluZ1xuICAgICAgICB0aGlzLmRlYnVnKGBXYWl0aW5nIGZvciBhc3luYyByZXNwb25zZSBmb3IgbWVzc2FnZSAke21lc3NhZ2UuaWR9YCk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVxdWVzdC5yZWplY3QoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCdIVFRQIHJlcXVlc3QgZmFpbGVkJykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0dXBTU0UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5zZXJ2ZXJVcmwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VydmVyIFVSTCByZXF1aXJlZCBmb3IgU1NFJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHNzZVVybCA9IGAke3RoaXMuY29uZmlnLnNlcnZlclVybH0vYXBpL3YxL2RldnBpcGUvc3RyZWFtYDtcbiAgICAgIHRoaXMuc3NlQ29ubmVjdGlvbiA9IG5ldyBFdmVudFNvdXJjZShzc2VVcmwpO1xuICAgICAgXG4gICAgICB0aGlzLnNzZUNvbm5lY3Rpb24ub25vcGVuID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmRlYnVnKCdTU0UgY29ubmVjdGlvbiBlc3RhYmxpc2hlZCcpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnNzZUNvbm5lY3Rpb24ub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgdGhpcy5oYW5kbGVTU0VNZXNzYWdlKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZGVidWcoJ0ZhaWxlZCB0byBwYXJzZSBTU0UgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuc3NlQ29ubmVjdGlvbi5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgIHRoaXMuZGVidWcoJ1NTRSBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgaWYgKHRoaXMuc3NlQ29ubmVjdGlvbj8ucmVhZHlTdGF0ZSA9PT0gRXZlbnRTb3VyY2UuQ09OTkVDVElORykge1xuICAgICAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5SRUNPTk5FQ1RJTkcsIHsgdHJhbnNwb3J0OiB0aGlzLnR5cGUgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkVSUk9SLCBlcnJvcik7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlU1NFTWVzc2FnZShkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoZGF0YS50eXBlID09PSAncmVzcG9uc2UnICYmIGRhdGEuaWQpIHtcbiAgICAgIC8vIEhhbmRsZSByZXNwb25zZSB0byBwZW5kaW5nIHJlcXVlc3RcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5nZXQoZGF0YS5pZCk7XG4gICAgICBpZiAocmVxdWVzdCkge1xuICAgICAgICBjb25zdCByZXNwb25zZTogRGV2UGlwZVJlc3BvbnNlID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgICAgIHN1Y2Nlc3M6IGRhdGEuc3VjY2VzcyAhPT0gZmFsc2UsXG4gICAgICAgICAgcGF5bG9hZDogZGF0YS5wYXlsb2FkLFxuICAgICAgICAgIGVycm9yOiBkYXRhLmVycm9yLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBIYW5kbGUgaW5jb21pbmcgbWVzc2FnZVxuICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50Lk1FU1NBR0UsIGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBkb0hlYWx0aENoZWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuc2VydmVyVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlcnZlciBVUkwgY29uZmlndXJlZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5jb25maWcuc2VydmVyVXJsfS9hcGkvdjEvZGV2cGlwZS9oZWFsdGhgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoNTAwMClcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSGVhbHRoIGNoZWNrIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gIH1cblxuICBnZXRDYXBhYmlsaXRpZXMoKTogVHJhbnNwb3J0Q2FwYWJpbGl0aWVzIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VwcG9ydHNSZWFsdGltZTogISF0aGlzLmh0dHBDb25maWcuZW5hYmxlU1NFLFxuICAgICAgc3VwcG9ydHNCaWRpcmVjdGlvbmFsOiAhIXRoaXMuaHR0cENvbmZpZy5lbmFibGVTU0UsXG4gICAgICBzdXBwb3J0c0ZpbGVTeXN0ZW06IGZhbHNlLFxuICAgICAgc3VwcG9ydHNTdHJlYW1pbmc6IHRydWUsXG4gICAgICBtYXhNZXNzYWdlU2l6ZTogMTAgKiAxMDI0ICogMTAyNCwgLy8gMTBNQlxuICAgICAgYXZlcmFnZUxhdGVuY3k6IHRoaXMuaGVhbHRoU3RhdHVzLmxhdGVuY3ksXG4gICAgICBtYXhDb25jdXJyZW50Q29ubmVjdGlvbnM6IHRoaXMuaHR0cENvbmZpZy5tYXhDb25uZWN0aW9ucyB8fCAxMCxcbiAgICAgIHJlbGlhYmlsaXR5OiB0aGlzLmNhbGN1bGF0ZVJlbGlhYmlsaXR5KCksXG4gICAgICBzdXBwb3J0ZWRFbnZpcm9ubWVudHM6IFsnYnJvd3NlcicsICdub2RlJywgJ29ic2lkaWFuJ11cbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIFdlYlNvY2tldCBUcmFuc3BvcnQgZm9yIERldlBpcGUgY29tbXVuaWNhdGlvblxuICogU3VwcG9ydHMgcmVhbC10aW1lIGJpZGlyZWN0aW9uYWwgY29tbXVuaWNhdGlvbiB3aXRoIGF1dG9tYXRpYyByZWNvbm5lY3Rpb25cbiAqL1xuXG5pbXBvcnQgeyBcbiAgRGV2UGlwZVRyYW5zcG9ydCxcbiAgVHJhbnNwb3J0VHlwZSxcbiAgVHJhbnNwb3J0Q29uZmlnLFxuICBUcmFuc3BvcnRDYXBhYmlsaXRpZXMsXG4gIERldlBpcGVNZXNzYWdlLFxuICBEZXZQaXBlUmVzcG9uc2UsXG4gIFRyYW5zcG9ydEV2ZW50LFxuICBXZWJTb2NrZXRUcmFuc3BvcnRDb25maWdcbn0gZnJvbSAnLi9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCB7IEJhc2VUcmFuc3BvcnQgfSBmcm9tICcuL0Jhc2VUcmFuc3BvcnQnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciB9IGZyb20gJy4uLy4uL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuXG5pbnRlcmZhY2UgUmVzcG9uc2VIYW5kbGVyIHtcbiAgcmVzb2x2ZTogKHJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UpID0+IHZvaWQ7XG4gIHJlamVjdDogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgdGltZW91dDogYW55O1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2VRdWV1ZSB7XG4gIG1lc3NhZ2VzOiBEZXZQaXBlTWVzc2FnZVtdO1xuICBtYXhTaXplOiBudW1iZXI7XG4gIHBlcnNpc3RUb0Rpc2s6IGJvb2xlYW47XG59XG5cbi8qKlxuICogU2ltcGxlIHJlY29ubmVjdGluZyBXZWJTb2NrZXQgd3JhcHBlclxuICovXG5jbGFzcyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQge1xuICBwcml2YXRlIHdzPzogV2ViU29ja2V0O1xuICBwcml2YXRlIHVybDogc3RyaW5nO1xuICBwcml2YXRlIHByb3RvY29sczogc3RyaW5nW107XG4gIHByaXZhdGUgb3B0aW9uczogYW55O1xuICBwcml2YXRlIHJlY29ubmVjdEF0dGVtcHRzOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIG1heFJlY29ubmVjdEF0dGVtcHRzOiBudW1iZXI7XG4gIHByaXZhdGUgcmVjb25uZWN0RGVsYXk6IG51bWJlcjtcbiAgcHJpdmF0ZSBzaG91bGRSZWNvbm5lY3Q6IGJvb2xlYW4gPSB0cnVlO1xuICBcbiAgcHVibGljIG9ub3Blbj86IChldmVudDogRXZlbnQpID0+IHZvaWQ7XG4gIHB1YmxpYyBvbmNsb3NlPzogKGV2ZW50OiBDbG9zZUV2ZW50KSA9PiB2b2lkO1xuICBwdWJsaWMgb25tZXNzYWdlPzogKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHZvaWQ7XG4gIHB1YmxpYyBvbmVycm9yPzogKGV2ZW50OiBFdmVudCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgcHJvdG9jb2xzOiBzdHJpbmdbXSA9IFtdLCBvcHRpb25zOiBhbnkgPSB7fSkge1xuICAgIHRoaXMudXJsID0gdXJsO1xuICAgIHRoaXMucHJvdG9jb2xzID0gcHJvdG9jb2xzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cyA9IG9wdGlvbnMubWF4UmVjb25uZWN0QXR0ZW1wdHMgfHwgMTA7XG4gICAgdGhpcy5yZWNvbm5lY3REZWxheSA9IG9wdGlvbnMucmVjb25uZWN0RGVsYXkgfHwgMTAwMDtcbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgY29ubmVjdCgpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQodGhpcy51cmwsIHRoaXMucHJvdG9jb2xzKTtcbiAgICAgIFxuICAgICAgdGhpcy53cy5vbm9wZW4gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RBdHRlbXB0cyA9IDA7XG4gICAgICAgIGlmICh0aGlzLm9ub3BlbikgdGhpcy5vbm9wZW4oZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy53cy5vbmNsb3NlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm9uY2xvc2UpIHRoaXMub25jbG9zZShldmVudCk7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJlY29ubmVjdCAmJiB0aGlzLnJlY29ubmVjdEF0dGVtcHRzIDwgdGhpcy5tYXhSZWNvbm5lY3RBdHRlbXB0cykge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZWNvbm5lY3QoKSwgdGhpcy5yZWNvbm5lY3REZWxheSAqIE1hdGgucG93KDIsIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy53cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMub25tZXNzYWdlKSB0aGlzLm9ubWVzc2FnZShldmVudCk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICB0aGlzLndzLm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMub25lcnJvcikgdGhpcy5vbmVycm9yKGV2ZW50KTtcbiAgICAgIH07XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHRoaXMub25lcnJvcikgdGhpcy5vbmVycm9yKG5ldyBFdmVudCgnZXJyb3InKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZWNvbm5lY3QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2hvdWxkUmVjb25uZWN0ICYmIHRoaXMucmVjb25uZWN0QXR0ZW1wdHMgPCB0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzKSB7XG4gICAgICB0aGlzLnJlY29ubmVjdEF0dGVtcHRzKys7XG4gICAgICB0aGlzLmNvbm5lY3QoKTtcbiAgICB9XG4gIH1cblxuICBzZW5kKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLndzICYmIHRoaXMud3MucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIHRoaXMud3Muc2VuZChkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuc2hvdWxkUmVjb25uZWN0ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMud3MpIHtcbiAgICAgIHRoaXMud3MuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcmVhZHlTdGF0ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLndzID8gdGhpcy53cy5yZWFkeVN0YXRlIDogV2ViU29ja2V0LkNMT1NFRDtcbiAgfVxufVxuXG4vKipcbiAqIFdlYlNvY2tldCBUcmFuc3BvcnQgaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFdlYlNvY2tldFRyYW5zcG9ydCBleHRlbmRzIEJhc2VUcmFuc3BvcnQge1xuICBwcml2YXRlIHdlYnNvY2tldD86IFJlY29ubmVjdGluZ1dlYlNvY2tldDtcbiAgcHJpdmF0ZSBtZXNzYWdlUXVldWU6IE1lc3NhZ2VRdWV1ZTtcbiAgcHJpdmF0ZSBoZWFydGJlYXRJbnRlcnZhbD86IGFueTtcbiAgcHJpdmF0ZSByZXNwb25zZUhhbmRsZXJzOiBNYXA8c3RyaW5nLCBSZXNwb25zZUhhbmRsZXI+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHdzQ29uZmlnOiBXZWJTb2NrZXRUcmFuc3BvcnRDb25maWc7XG5cbiAgY29uc3RydWN0b3IoY29uZmlnOiBUcmFuc3BvcnRDb25maWcpIHtcbiAgICBzdXBlcihUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCwgY29uZmlnKTtcbiAgICBcbiAgICB0aGlzLndzQ29uZmlnID0gY29uZmlnLndlYnNvY2tldCB8fCB7XG4gICAgICBoZWFydGJlYXRJbnRlcnZhbDogMzAwMDAsXG4gICAgICByZWNvbm5lY3REZWxheTogMTAwMCxcbiAgICAgIG1heFJlY29ubmVjdEF0dGVtcHRzOiAxMCxcbiAgICAgIHBlcnNpc3RNZXNzYWdlczogZmFsc2VcbiAgICB9O1xuICAgIFxuICAgIHRoaXMubWVzc2FnZVF1ZXVlID0ge1xuICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgbWF4U2l6ZTogMTAwMCxcbiAgICAgIHBlcnNpc3RUb0Rpc2s6IHRoaXMud3NDb25maWcucGVyc2lzdE1lc3NhZ2VzIHx8IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBkb0luaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVmFsaWRhdGUgV2ViU29ja2V0IHN1cHBvcnQgaW4gZW52aXJvbm1lbnRcbiAgICBjb25zdCBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgaWYgKCFlbnZpcm9ubWVudC5oYXNXZWJTb2NrZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IHRyYW5zcG9ydCBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmRlYnVnKCdXZWJTb2NrZXQgdHJhbnNwb3J0IGluaXRpYWxpemVkJyk7XG4gIH1cblxuICBhc3luYyBjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5jb25maWcuc2VydmVyVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcnZlciBVUkwgcmVxdWlyZWQgZm9yIFdlYlNvY2tldCB0cmFuc3BvcnQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgd3NVcmwgPSB0aGlzLmNvbmZpZy5zZXJ2ZXJVcmwhLnJlcGxhY2UoL15odHRwLywgJ3dzJykgKyAnL2FwaS92MS9kZXZwaXBlL3dzJztcbiAgICAgIFxuICAgICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgUmVjb25uZWN0aW5nV2ViU29ja2V0KHdzVXJsLCBbXSwge1xuICAgICAgICBjb25uZWN0aW9uVGltZW91dDogdGhpcy5jb25maWcudGltZW91dCxcbiAgICAgICAgZGVidWc6IHRoaXMuY29uZmlnLmRlYnVnLFxuICAgICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0czogdGhpcy53c0NvbmZpZy5tYXhSZWNvbm5lY3RBdHRlbXB0cyxcbiAgICAgICAgcmVjb25uZWN0RGVsYXk6IHRoaXMud3NDb25maWcucmVjb25uZWN0RGVsYXlcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB0aGlzLndlYnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2hlYWx0aHknO1xuICAgICAgICB0aGlzLnN0YXJ0SGVhcnRiZWF0KCk7XG4gICAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5DT05ORUNURUQsIHsgdHJhbnNwb3J0OiB0aGlzLnR5cGUgfSk7XG4gICAgICAgIHRoaXMuZGVidWcoJ1dlYlNvY2tldCBjb25uZWN0ZWQnKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy53ZWJzb2NrZXQub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICB0aGlzLmRlYnVnKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuRVJST1IsIGVycm9yKTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IFdlYlNvY2tldCcpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdGhpcy53ZWJzb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZShldmVudC5kYXRhKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGVhbHRoU3RhdHVzLnN0YXR1cyA9ICdkaXNjb25uZWN0ZWQnO1xuICAgICAgICB0aGlzLnN0b3BIZWFydGJlYXQoKTtcbiAgICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkRJU0NPTk5FQ1RFRCwgeyB0cmFuc3BvcnQ6IHRoaXMudHlwZSB9KTtcbiAgICAgICAgdGhpcy5kZWJ1ZygnV2ViU29ja2V0IGRpc2Nvbm5lY3RlZCcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUmVqZWN0IGFsbCBwZW5kaW5nIHJlc3BvbnNlIGhhbmRsZXJzXG4gICAgY29uc3QgaGFuZGxlcnMgPSBBcnJheS5mcm9tKHRoaXMucmVzcG9uc2VIYW5kbGVycy52YWx1ZXMoKSk7XG4gICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGhhbmRsZXJzKSB7XG4gICAgICBjbGVhclRpbWVvdXQoaGFuZGxlci50aW1lb3V0KTtcbiAgICAgIGhhbmRsZXIucmVqZWN0KG5ldyBFcnJvcignVHJhbnNwb3J0IGRpc2Nvbm5lY3RlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5yZXNwb25zZUhhbmRsZXJzLmNsZWFyKCk7XG5cbiAgICAvLyBTdG9wIGhlYXJ0YmVhdFxuICAgIHRoaXMuc3RvcEhlYXJ0YmVhdCgpO1xuXG4gICAgLy8gQ2xvc2UgV2ViU29ja2V0XG4gICAgaWYgKHRoaXMud2Vic29ja2V0KSB7XG4gICAgICB0aGlzLndlYnNvY2tldC5jbG9zZSgpO1xuICAgICAgdGhpcy53ZWJzb2NrZXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhlYWx0aFN0YXR1cy5zdGF0dXMgPSAnZGlzY29ubmVjdGVkJztcbiAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuRElTQ09OTkVDVEVELCB7IHRyYW5zcG9ydDogdGhpcy50eXBlIH0pO1xuICAgIFxuICAgIHRoaXMuZGVidWcoJ1dlYlNvY2tldCB0cmFuc3BvcnQgZGlzY29ubmVjdGVkJyk7XG4gIH1cblxuICBhc3luYyBzZW5kKG1lc3NhZ2U6IERldlBpcGVNZXNzYWdlKTogUHJvbWlzZTxEZXZQaXBlUmVzcG9uc2U+IHtcbiAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgdHJhbnNwb3J0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbWVzc2FnZSBJRCBpZiBub3QgcHJlc2VudFxuICAgIGlmICghbWVzc2FnZS5pZCkge1xuICAgICAgbWVzc2FnZS5pZCA9IHRoaXMuZ2VuZXJhdGVNZXNzYWdlSWQoKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGltZXN0YW1wXG4gICAgbWVzc2FnZS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXG4gICAgcmV0dXJuIHRoaXMuZXhlY3V0ZVdpdGhDaXJjdWl0QnJlYWtlcihhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kV2ViU29ja2V0TWVzc2FnZShtZXNzYWdlKTtcbiAgICB9LCAnd2Vic29ja2V0X3NlbmQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZFdlYlNvY2tldE1lc3NhZ2UobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UpOiBQcm9taXNlPERldlBpcGVSZXNwb25zZT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucmVzcG9uc2VIYW5kbGVycy5kZWxldGUobWVzc2FnZS5pZCEpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGBXZWJTb2NrZXQgcmVxdWVzdCB0aW1lb3V0IGFmdGVyICR7dGhpcy5jb25maWcudGltZW91dH1tc2ApKTtcbiAgICAgIH0sIHRoaXMuY29uZmlnLnRpbWVvdXQpO1xuXG4gICAgICBjb25zdCBoYW5kbGVyOiBSZXNwb25zZUhhbmRsZXIgPSB7XG4gICAgICAgIHJlc29sdmU6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgICB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgdGhpcy5yZXNwb25zZUhhbmRsZXJzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogdGltZW91dEhhbmRsZSxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuc2V0KG1lc3NhZ2UuaWQhLCBoYW5kbGVyKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXQhLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuZGVsZXRlKG1lc3NhZ2UuaWQhKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTWVzc2FnZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICBcbiAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09ICdwb25nJykge1xuICAgICAgICAvLyBIYW5kbGUgaGVhcnRiZWF0IHBvbmdcbiAgICAgICAgdGhpcy5kZWJ1ZygnUmVjZWl2ZWQgaGVhcnRiZWF0IHBvbmcnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobWVzc2FnZS50eXBlID09PSAncmVzcG9uc2UnICYmIG1lc3NhZ2UucmVwbHlUbykge1xuICAgICAgICAvLyBIYW5kbGUgcmVzcG9uc2UgdG8gcGVuZGluZyByZXF1ZXN0XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLnJlc3BvbnNlSGFuZGxlcnMuZ2V0KG1lc3NhZ2UucmVwbHlUbyk7XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2U6IERldlBpcGVSZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgc3VjY2VzczogbWVzc2FnZS5zdWNjZXNzICE9PSBmYWxzZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IG1lc3NhZ2UucGF5bG9hZCxcbiAgICAgICAgICAgIGVycm9yOiBtZXNzYWdlLmVycm9yLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpXG4gICAgICAgICAgfTtcbiAgICAgICAgICBoYW5kbGVyLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2hlYWx0aF9wb25nJyAmJiBtZXNzYWdlLmlkKSB7XG4gICAgICAgIC8vIEhhbmRsZSBoZWFsdGggY2hlY2sgcmVzcG9uc2VcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IHRoaXMucmVzcG9uc2VIYW5kbGVycy5nZXQobWVzc2FnZS5pZCk7XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2U6IERldlBpcGVSZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHsgc3RhdHVzOiAnaGVhbHRoeScgfSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH07XG4gICAgICAgICAgaGFuZGxlci5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSGFuZGxlIGluY29taW5nIG1lc3NhZ2VcbiAgICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50Lk1FU1NBR0UsIG1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZGVidWcoJ0ZhaWxlZCB0byBoYW5kbGUgV2ViU29ja2V0IG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkVSUk9SLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydEhlYXJ0YmVhdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oZWFydGJlYXRJbnRlcnZhbCkgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy53ZWJzb2NrZXQhLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICAgIHR5cGU6ICdwaW5nJywgXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkgXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRoaXMuZGVidWcoJ0ZhaWxlZCB0byBzZW5kIGhlYXJ0YmVhdDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB0aGlzLndzQ29uZmlnLmhlYXJ0YmVhdEludGVydmFsIHx8IDMwMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RvcEhlYXJ0YmVhdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oZWFydGJlYXRJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsKTtcbiAgICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIGRvSGVhbHRoQ2hlY2soKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IG5vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG5cbiAgICAvLyBTZW5kIHBpbmcgYW5kIHdhaXQgZm9yIHBvbmdcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdIZWFsdGggY2hlY2sgdGltZW91dCcpKTtcbiAgICAgIH0sIDUwMDApO1xuICAgICAgXG4gICAgICBjb25zdCBwaW5nSWQgPSB0aGlzLmdlbmVyYXRlTWVzc2FnZUlkKCk7XG4gICAgICBjb25zdCBoYW5kbGVyOiBSZXNwb25zZUhhbmRsZXIgPSB7XG4gICAgICAgIHJlc29sdmU6ICgpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LFxuICAgICAgICByZWplY3Q6IChlcnJvcikgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHRoaXMucmVzcG9uc2VIYW5kbGVycy5zZXQocGluZ0lkLCBoYW5kbGVyKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXQhLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBcbiAgICAgICAgICB0eXBlOiAnaGVhbHRoX3BpbmcnLCBcbiAgICAgICAgICBpZDogcGluZ0lkLFxuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICB9KSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRoaXMucmVzcG9uc2VIYW5kbGVycy5kZWxldGUocGluZ0lkKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGdldENhcGFiaWxpdGllcygpOiBUcmFuc3BvcnRDYXBhYmlsaXRpZXMge1xuICAgIHJldHVybiB7XG4gICAgICBzdXBwb3J0c1JlYWx0aW1lOiB0cnVlLFxuICAgICAgc3VwcG9ydHNCaWRpcmVjdGlvbmFsOiB0cnVlLFxuICAgICAgc3VwcG9ydHNGaWxlU3lzdGVtOiBmYWxzZSxcbiAgICAgIHN1cHBvcnRzU3RyZWFtaW5nOiB0cnVlLFxuICAgICAgbWF4TWVzc2FnZVNpemU6IDEwMjQgKiAxMDI0LCAvLyAxTUJcbiAgICAgIGF2ZXJhZ2VMYXRlbmN5OiB0aGlzLmhlYWx0aFN0YXR1cy5sYXRlbmN5LFxuICAgICAgbWF4Q29uY3VycmVudENvbm5lY3Rpb25zOiAxLFxuICAgICAgcmVsaWFiaWxpdHk6IHRoaXMuY2FsY3VsYXRlUmVsaWFiaWxpdHkoKSxcbiAgICAgIHN1cHBvcnRlZEVudmlyb25tZW50czogWydicm93c2VyJywgJ25vZGUnLCAnb2JzaWRpYW4nXVxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogRmlsZVN5c3RlbSBUcmFuc3BvcnQgZm9yIERldlBpcGUgY29tbXVuaWNhdGlvblxuICogU3VwcG9ydHMgZmlsZS1iYXNlZCBjb21tdW5pY2F0aW9uIHdpdGggcHJvcGVyIGxvY2tpbmcgYW5kIGF0b21pYyBvcGVyYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgXG4gIERldlBpcGVUcmFuc3BvcnQsXG4gIFRyYW5zcG9ydFR5cGUsXG4gIFRyYW5zcG9ydENvbmZpZyxcbiAgVHJhbnNwb3J0Q2FwYWJpbGl0aWVzLFxuICBEZXZQaXBlTWVzc2FnZSxcbiAgRGV2UGlwZVJlc3BvbnNlLFxuICBUcmFuc3BvcnRFdmVudCxcbiAgRmlsZVN5c3RlbVRyYW5zcG9ydENvbmZpZ1xufSBmcm9tICcuL0RldlBpcGVUcmFuc3BvcnQnO1xuaW1wb3J0IHsgQmFzZVRyYW5zcG9ydCB9IGZyb20gJy4vQmFzZVRyYW5zcG9ydCc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudERldGVjdG9yIH0gZnJvbSAnLi4vLi4vdXRpbHMvRW52aXJvbm1lbnREZXRlY3Rvcic7XG5cbmludGVyZmFjZSBQZW5kaW5nRmlsZVJlcXVlc3Qge1xuICBpZDogc3RyaW5nO1xuICBtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZTtcbiAgcmVzb2x2ZTogKHJlc3BvbnNlOiBEZXZQaXBlUmVzcG9uc2UpID0+IHZvaWQ7XG4gIHJlamVjdDogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgdGltZW91dDogYW55O1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgcmVxdWVzdEZpbGU6IHN0cmluZztcbiAgcmVzcG9uc2VGaWxlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogU2ltcGxlIGZpbGUgbG9jayBtYW5hZ2VyIGZvciBhdG9taWMgb3BlcmF0aW9uc1xuICovXG5jbGFzcyBGaWxlTG9ja01hbmFnZXIge1xuICBwcml2YXRlIGxvY2tzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBsb2NrVGltZW91dDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGxvY2tUaW1lb3V0OiBudW1iZXIgPSA1MDAwKSB7XG4gICAgdGhpcy5sb2NrVGltZW91dCA9IGxvY2tUaW1lb3V0O1xuICB9XG5cbiAgYXN5bmMgYWNxdWlyZUxvY2soZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBhdHRlbXB0TG9jayA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmxvY2tzLmhhcyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICB0aGlzLmxvY2tzLmFkZChmaWxlUGF0aCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoYXR0ZW1wdExvY2ssIDEwMCk7IC8vIFJldHJ5IGV2ZXJ5IDEwMG1zXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIFNldCB0aW1lb3V0IGZvciBsb2NrIGFjcXVpc2l0aW9uXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIGFjcXVpcmUgbG9jayBmb3IgJHtmaWxlUGF0aH0gd2l0aGluICR7dGhpcy5sb2NrVGltZW91dH1tc2ApKTtcbiAgICAgIH0sIHRoaXMubG9ja1RpbWVvdXQpO1xuXG4gICAgICBhdHRlbXB0TG9jaygpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVsZWFzZUxvY2soZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubG9ja3MuZGVsZXRlKGZpbGVQYXRoKTtcbiAgfVxufVxuXG4vKipcbiAqIEZpbGUgd2F0Y2hlciBpbXBsZW1lbnRhdGlvbiBmb3IgbW9uaXRvcmluZyByZXNwb25zZSBmaWxlc1xuICovXG5jbGFzcyBGaWxlV2F0Y2hlciB7XG4gIHByaXZhdGUgd2F0Y2hlcnM6IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgY2FsbGJhY2tzOiBNYXA8c3RyaW5nLCAoY29udGVudDogc3RyaW5nKSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcblxuICB3YXRjaChmaWxlUGF0aDogc3RyaW5nLCBjYWxsYmFjazogKGNvbnRlbnQ6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuY2FsbGJhY2tzLnNldChmaWxlUGF0aCwgY2FsbGJhY2spO1xuICAgIFxuICAgIC8vIFNpbXBsZSBwb2xsaW5nIGltcGxlbWVudGF0aW9uIChjb3VsZCBiZSBlbmhhbmNlZCB3aXRoIHByb3BlciBmaWxlIHdhdGNoaW5nKVxuICAgIGNvbnN0IHdhdGNoZXIgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmZpbGVFeGlzdHMoZmlsZVBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucmVhZEZpbGUoZmlsZVBhdGgpO1xuICAgICAgICAgIGNhbGxiYWNrKGNvbnRlbnQpO1xuICAgICAgICAgIHRoaXMudW53YXRjaChmaWxlUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIEZpbGUgZG9lc24ndCBleGlzdCB5ZXQgb3Igb3RoZXIgZXJyb3IsIGNvbnRpbnVlIHdhdGNoaW5nXG4gICAgICB9XG4gICAgfSwgNTAwKTsgLy8gQ2hlY2sgZXZlcnkgNTAwbXNcblxuICAgIHRoaXMud2F0Y2hlcnMuc2V0KGZpbGVQYXRoLCB3YXRjaGVyKTtcbiAgfVxuXG4gIHVud2F0Y2goZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHdhdGNoZXIgPSB0aGlzLndhdGNoZXJzLmdldChmaWxlUGF0aCk7XG4gICAgaWYgKHdhdGNoZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwod2F0Y2hlcik7XG4gICAgICB0aGlzLndhdGNoZXJzLmRlbGV0ZShmaWxlUGF0aCk7XG4gICAgfVxuICAgIHRoaXMuY2FsbGJhY2tzLmRlbGV0ZShmaWxlUGF0aCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZpbGVFeGlzdHMoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIFBsYXRmb3JtLXNwZWNpZmljIGZpbGUgZXhpc3RlbmNlIGNoZWNrXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHA/LnZhdWx0Py5hZGFwdGVyPy5leGlzdHMpIHtcbiAgICAgIC8vIE9ic2lkaWFuIGVudmlyb25tZW50XG4gICAgICByZXR1cm4gd2luZG93LmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZnMgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XG4gICAgICAgIGF3YWl0IGZzLmFjY2VzcyhmaWxlUGF0aCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZWFkRmlsZShmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBQbGF0Zm9ybS1zcGVjaWZpYyBmaWxlIHJlYWRpbmdcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmFwcD8udmF1bHQ/LmFkYXB0ZXI/LnJlYWQpIHtcbiAgICAgIC8vIE9ic2lkaWFuIGVudmlyb25tZW50XG4gICAgICByZXR1cm4gd2luZG93LmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIE5vZGUuanMgZW52aXJvbm1lbnRcbiAgICAgIGNvbnN0IGZzID0gKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlKCdmcycpLnByb21pc2VzO1xuICAgICAgcmV0dXJuIGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHJlYWRpbmcgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gIH1cbn1cblxuLyoqXG4gKiBGaWxlU3lzdGVtIFRyYW5zcG9ydCBpbXBsZW1lbnRhdGlvblxuICovXG5leHBvcnQgY2xhc3MgRmlsZVN5c3RlbVRyYW5zcG9ydCBleHRlbmRzIEJhc2VUcmFuc3BvcnQge1xuICBwcml2YXRlIGRldlBpcGVQYXRoOiBzdHJpbmc7XG4gIHByaXZhdGUgZmlsZVdhdGNoZXI6IEZpbGVXYXRjaGVyO1xuICBwcml2YXRlIGxvY2tNYW5hZ2VyOiBGaWxlTG9ja01hbmFnZXI7XG4gIHByaXZhdGUgcGVuZGluZ1JlcXVlc3RzOiBNYXA8c3RyaW5nLCBQZW5kaW5nRmlsZVJlcXVlc3Q+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIGZzQ29uZmlnOiBGaWxlU3lzdGVtVHJhbnNwb3J0Q29uZmlnO1xuICBwcml2YXRlIG1lc3NhZ2VRdWV1ZTogRGV2UGlwZU1lc3NhZ2VbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogVHJhbnNwb3J0Q29uZmlnKSB7XG4gICAgc3VwZXIoVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNLCBjb25maWcpO1xuICAgIFxuICAgIHRoaXMuZnNDb25maWcgPSBjb25maWcuZmlsZXN5c3RlbSB8fCB7XG4gICAgICB3YXRjaEludGVydmFsOiA1MDAsXG4gICAgICBsb2NrVGltZW91dDogNTAwMCxcbiAgICAgIG1heFF1ZXVlU2l6ZTogMTAwXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmRldlBpcGVQYXRoID0gY29uZmlnLmRldlBpcGVQYXRoIHx8ICcuL2RldnBpcGUnO1xuICAgIHRoaXMuZmlsZVdhdGNoZXIgPSBuZXcgRmlsZVdhdGNoZXIoKTtcbiAgICB0aGlzLmxvY2tNYW5hZ2VyID0gbmV3IEZpbGVMb2NrTWFuYWdlcih0aGlzLmZzQ29uZmlnLmxvY2tUaW1lb3V0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBkb0luaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gVmFsaWRhdGUgZmlsZSBzeXN0ZW0gc3VwcG9ydCBpbiBlbnZpcm9ubWVudFxuICAgIGNvbnN0IGVudmlyb25tZW50ID0gRW52aXJvbm1lbnREZXRlY3Rvci5kZXRlY3QoKTtcbiAgICBpZiAoIWVudmlyb25tZW50Lmhhc0ZpbGVTeXN0ZW0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZVN5c3RlbSB0cmFuc3BvcnQgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIGRldnBpcGUgZGlyZWN0b3J5IGV4aXN0c1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRGlyZWN0b3J5RXhpc3RzKHRoaXMuZGV2UGlwZVBhdGgpO1xuICAgIFxuICAgIHRoaXMuZGVidWcoJ0ZpbGVTeXN0ZW0gdHJhbnNwb3J0IGluaXRpYWxpemVkJyk7XG4gIH1cblxuICBhc3luYyBjb25uZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUZXN0IGZpbGUgc3lzdGVtIGFjY2Vzc1xuICAgICAgYXdhaXQgdGhpcy5kb0hlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHdhdGNoaW5nIGZvciBpbmNvbWluZyBtZXNzYWdlc1xuICAgICAgdGhpcy5zZXR1cEluY29taW5nTWVzc2FnZVdhdGNoZXIoKTtcbiAgICAgIFxuICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5oZWFsdGhTdGF0dXMuc3RhdHVzID0gJ2hlYWx0aHknO1xuICAgICAgdGhpcy5lbWl0KFRyYW5zcG9ydEV2ZW50LkNPTk5FQ1RFRCwgeyB0cmFuc3BvcnQ6IHRoaXMudHlwZSB9KTtcbiAgICAgIFxuICAgICAgdGhpcy5kZWJ1ZygnRmlsZVN5c3RlbSB0cmFuc3BvcnQgY29ubmVjdGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZW1pdChUcmFuc3BvcnRFdmVudC5FUlJPUiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGlzY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBSZWplY3QgYWxsIHBlbmRpbmcgcmVxdWVzdHNcbiAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5LmZyb20odGhpcy5wZW5kaW5nUmVxdWVzdHMudmFsdWVzKCkpO1xuICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiByZXF1ZXN0cykge1xuICAgICAgY2xlYXJUaW1lb3V0KHJlcXVlc3QudGltZW91dCk7XG4gICAgICB0aGlzLmZpbGVXYXRjaGVyLnVud2F0Y2gocmVxdWVzdC5yZXNwb25zZUZpbGUpO1xuICAgICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdUcmFuc3BvcnQgZGlzY29ubmVjdGVkJykpO1xuICAgIH1cbiAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5jbGVhcigpO1xuXG4gICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhlYWx0aFN0YXR1cy5zdGF0dXMgPSAnZGlzY29ubmVjdGVkJztcbiAgICB0aGlzLmVtaXQoVHJhbnNwb3J0RXZlbnQuRElTQ09OTkVDVEVELCB7IHRyYW5zcG9ydDogdGhpcy50eXBlIH0pO1xuICAgIFxuICAgIHRoaXMuZGVidWcoJ0ZpbGVTeXN0ZW0gdHJhbnNwb3J0IGRpc2Nvbm5lY3RlZCcpO1xuICB9XG5cbiAgYXN5bmMgc2VuZChtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPiB7XG4gICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmlsZVN5c3RlbSB0cmFuc3BvcnQgbm90IGNvbm5lY3RlZCcpO1xuICAgIH1cblxuICAgIC8vIEFkZCBtZXNzYWdlIElEIGlmIG5vdCBwcmVzZW50XG4gICAgaWYgKCFtZXNzYWdlLmlkKSB7XG4gICAgICBtZXNzYWdlLmlkID0gdGhpcy5nZW5lcmF0ZU1lc3NhZ2VJZCgpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aW1lc3RhbXBcbiAgICBtZXNzYWdlLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cbiAgICByZXR1cm4gdGhpcy5leGVjdXRlV2l0aENpcmN1aXRCcmVha2VyKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnNlbmRGaWxlTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9LCAnZmlsZXN5c3RlbV9zZW5kJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNlbmRGaWxlTWVzc2FnZShtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSk6IFByb21pc2U8RGV2UGlwZVJlc3BvbnNlPiB7XG4gICAgY29uc3QgcmVxdWVzdEZpbGUgPSBgJHt0aGlzLmRldlBpcGVQYXRofS9yZXF1ZXN0XyR7bWVzc2FnZS5pZH0uanNvbmA7XG4gICAgY29uc3QgcmVzcG9uc2VGaWxlID0gYCR7dGhpcy5kZXZQaXBlUGF0aH0vcmVzcG9uc2VfJHttZXNzYWdlLmlkfS5qc29uYDtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLmRlbGV0ZShtZXNzYWdlLmlkISk7XG4gICAgICAgIHRoaXMuZmlsZVdhdGNoZXIudW53YXRjaChyZXNwb25zZUZpbGUpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKGBGaWxlU3lzdGVtIHJlcXVlc3QgdGltZW91dCBhZnRlciAke3RoaXMuY29uZmlnLnRpbWVvdXR9bXNgKSk7XG4gICAgICB9LCB0aGlzLmNvbmZpZy50aW1lb3V0KTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogUGVuZGluZ0ZpbGVSZXF1ZXN0ID0ge1xuICAgICAgICBpZDogbWVzc2FnZS5pZCEsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHJlc29sdmU6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZS5pZCEpO1xuICAgICAgICAgIHRoaXMuZmlsZVdhdGNoZXIudW53YXRjaChyZXNwb25zZUZpbGUpO1xuICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9LFxuICAgICAgICByZWplY3Q6IChlcnJvcikgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZXF1ZXN0cy5kZWxldGUobWVzc2FnZS5pZCEpO1xuICAgICAgICAgIHRoaXMuZmlsZVdhdGNoZXIudW53YXRjaChyZXNwb25zZUZpbGUpO1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRIYW5kbGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgcmVxdWVzdEZpbGUsXG4gICAgICAgIHJlc3BvbnNlRmlsZVxuICAgICAgfTtcblxuICAgICAgdGhpcy5wZW5kaW5nUmVxdWVzdHMuc2V0KG1lc3NhZ2UuaWQhLCByZXF1ZXN0KTtcblxuICAgICAgLy8gV2F0Y2ggZm9yIHJlc3BvbnNlIGZpbGVcbiAgICAgIHRoaXMuZmlsZVdhdGNoZXIud2F0Y2gocmVzcG9uc2VGaWxlLCAoY29udGVudCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgICAgICBjb25zdCBkZXZQaXBlUmVzcG9uc2U6IERldlBpcGVSZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGlkOiByZXNwb25zZS5pZCxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHJlc3BvbnNlLnN1Y2Nlc3MgIT09IGZhbHNlLFxuICAgICAgICAgICAgcGF5bG9hZDogcmVzcG9uc2UucGF5bG9hZCxcbiAgICAgICAgICAgIGVycm9yOiByZXNwb25zZS5lcnJvcixcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmVxdWVzdC5yZXNvbHZlKGRldlBpcGVSZXNwb25zZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgcmVxdWVzdC5yZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgZmlsZScpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFdyaXRlIHJlcXVlc3QgZmlsZVxuICAgICAgdGhpcy53cml0ZVJlcXVlc3RGaWxlKHJlcXVlc3RGaWxlLCBtZXNzYWdlLCByZXF1ZXN0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgd3JpdGVSZXF1ZXN0RmlsZShmaWxlUGF0aDogc3RyaW5nLCBtZXNzYWdlOiBEZXZQaXBlTWVzc2FnZSwgcmVxdWVzdDogUGVuZGluZ0ZpbGVSZXF1ZXN0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMubG9ja01hbmFnZXIuYWNxdWlyZUxvY2soZmlsZVBhdGgpO1xuICAgICAgYXdhaXQgdGhpcy53cml0ZUZpbGUoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UsIG51bGwsIDIpKTtcbiAgICAgIHRoaXMubG9ja01hbmFnZXIucmVsZWFzZUxvY2soZmlsZVBhdGgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvY2tNYW5hZ2VyLnJlbGVhc2VMb2NrKGZpbGVQYXRoKTtcbiAgICAgIHJlcXVlc3QucmVqZWN0KGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcignRmFpbGVkIHRvIHdyaXRlIHJlcXVlc3QgZmlsZScpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwSW5jb21pbmdNZXNzYWdlV2F0Y2hlcigpOiB2b2lkIHtcbiAgICAvLyBXYXRjaCBmb3IgaW5jb21pbmcgbWVzc2FnZXMgKHRoaXMgd291bGQgYmUgaW1wbGVtZW50ZWQgYmFzZWQgb24gdGhlIHNwZWNpZmljIHByb3RvY29sKVxuICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRoYXQgdGhlIHdhdGNoZXIgaXMgc2V0IHVwXG4gICAgdGhpcy5kZWJ1ZygnSW5jb21pbmcgbWVzc2FnZSB3YXRjaGVyIHNldHVwIGNvbXBsZXRlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gUGxhdGZvcm0tc3BlY2lmaWMgZGlyZWN0b3J5IGNyZWF0aW9uXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5hcHA/LnZhdWx0Py5hZGFwdGVyPy5ta2Rpcikge1xuICAgICAgLy8gT2JzaWRpYW4gZW52aXJvbm1lbnRcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHdpbmRvdy5hcHAudmF1bHQuYWRhcHRlci5ta2RpcihwYXRoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIERpcmVjdG9yeSBtaWdodCBhbHJlYWR5IGV4aXN0XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZnMgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XG4gICAgICAgIGF3YWl0IGZzLm1rZGlyKHBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gRGlyZWN0b3J5IG1pZ2h0IGFscmVhZHkgZXhpc3RcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHdyaXRlRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBQbGF0Zm9ybS1zcGVjaWZpYyBmaWxlIHdyaXRpbmdcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmFwcD8udmF1bHQ/LmFkYXB0ZXI/LndyaXRlKSB7XG4gICAgICAvLyBPYnNpZGlhbiBlbnZpcm9ubWVudFxuICAgICAgcmV0dXJuIHdpbmRvdy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgICAgY29uc3QgZnMgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XG4gICAgICByZXR1cm4gZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBjb250ZW50LCAndXRmLTgnKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHdyaXRpbmcgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlYWRGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIFBsYXRmb3JtLXNwZWNpZmljIGZpbGUgcmVhZGluZ1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuYXBwPy52YXVsdD8uYWRhcHRlcj8ucmVhZCkge1xuICAgICAgLy8gT2JzaWRpYW4gZW52aXJvbm1lbnRcbiAgICAgIHJldHVybiB3aW5kb3cuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5yZXF1aXJlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gTm9kZS5qcyBlbnZpcm9ubWVudFxuICAgICAgY29uc3QgZnMgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XG4gICAgICByZXR1cm4gZnMucmVhZEZpbGUoZmlsZVBhdGgsICd1dGYtOCcpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgcmVhZGluZyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBkb0hlYWx0aENoZWNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHRlc3RGaWxlID0gYCR7dGhpcy5kZXZQaXBlUGF0aH0vaGVhbHRoX2NoZWNrXyR7RGF0ZS5ub3coKX0udG1wYDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCB3cml0ZSBhY2Nlc3NcbiAgICAgIGF3YWl0IHRoaXMud3JpdGVGaWxlKHRlc3RGaWxlLCAnaGVhbHRoX2NoZWNrJyk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgcmVhZCBhY2Nlc3NcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKHRlc3RGaWxlKTtcbiAgICAgIGlmIChjb250ZW50ICE9PSAnaGVhbHRoX2NoZWNrJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpbGUgY29udGVudCBtaXNtYXRjaCBkdXJpbmcgaGVhbHRoIGNoZWNrJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENsZWFuIHVwIHRlc3QgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5kZWxldGVGaWxlKHRlc3RGaWxlKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpbGVTeXN0ZW0gaGVhbHRoIGNoZWNrIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFBsYXRmb3JtLXNwZWNpZmljIGZpbGUgZGVsZXRpb25cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmFwcD8udmF1bHQ/LmFkYXB0ZXI/LnJlbW92ZSkge1xuICAgICAgLy8gT2JzaWRpYW4gZW52aXJvbm1lbnRcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHdpbmRvdy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUoZmlsZVBhdGgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gRmlsZSBtaWdodCBub3QgZXhpc3RcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiAoZ2xvYmFsVGhpcyBhcyBhbnkpLnJlcXVpcmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBOb2RlLmpzIGVudmlyb25tZW50XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmcyA9IChnbG9iYWxUaGlzIGFzIGFueSkucmVxdWlyZSgnZnMnKS5wcm9taXNlcztcbiAgICAgICAgYXdhaXQgZnMudW5saW5rKGZpbGVQYXRoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIEZpbGUgbWlnaHQgbm90IGV4aXN0XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Q2FwYWJpbGl0aWVzKCk6IFRyYW5zcG9ydENhcGFiaWxpdGllcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1cHBvcnRzUmVhbHRpbWU6IGZhbHNlLFxuICAgICAgc3VwcG9ydHNCaWRpcmVjdGlvbmFsOiB0cnVlLFxuICAgICAgc3VwcG9ydHNGaWxlU3lzdGVtOiB0cnVlLFxuICAgICAgc3VwcG9ydHNTdHJlYW1pbmc6IGZhbHNlLFxuICAgICAgbWF4TWVzc2FnZVNpemU6IDEwICogMTAyNCAqIDEwMjQsIC8vIDEwTUJcbiAgICAgIGF2ZXJhZ2VMYXRlbmN5OiB0aGlzLmhlYWx0aFN0YXR1cy5sYXRlbmN5LFxuICAgICAgbWF4Q29uY3VycmVudENvbm5lY3Rpb25zOiAxLFxuICAgICAgcmVsaWFiaWxpdHk6IHRoaXMuY2FsY3VsYXRlUmVsaWFiaWxpdHkoKSxcbiAgICAgIHN1cHBvcnRlZEVudmlyb25tZW50czogWydub2RlJywgJ29ic2lkaWFuJ11cbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIFRyYW5zcG9ydCBIZWFsdGggTW9uaXRvciBmb3IgbW9uaXRvcmluZyB0cmFuc3BvcnQgaGVhbHRoIGFuZCBwZXJmb3JtYW5jZVxuICovXG5cbmltcG9ydCB7IFxuICBEZXZQaXBlVHJhbnNwb3J0LCBcbiAgVHJhbnNwb3J0VHlwZSwgXG4gIFRyYW5zcG9ydEhlYWx0aFN0YXR1cyxcbiAgSGVhbHRoQ2hlY2tSZXN1bHQsXG4gIFRyYW5zcG9ydEV2ZW50XG59IGZyb20gJy4uL3RyYW5zcG9ydHMvRGV2UGlwZVRyYW5zcG9ydCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2tTY2hlZHVsZSB7XG4gIHRyYW5zcG9ydDogRGV2UGlwZVRyYW5zcG9ydDtcbiAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgbGFzdENoZWNrOiBudW1iZXI7XG4gIGNvbnNlY3V0aXZlRmFpbHVyZXM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWFsdGhBc3Nlc3NtZW50IHtcbiAgdHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlO1xuICBzY29yZTogbnVtYmVyOyAvLyAwLTEsIGhpZ2hlciBpcyBiZXR0ZXJcbiAgc3RhdHVzOiAnZXhjZWxsZW50JyB8ICdnb29kJyB8ICdmYWlyJyB8ICdwb29yJyB8ICdmYWlsaW5nJztcbiAgbWV0cmljczoge1xuICAgIGF2YWlsYWJpbGl0eTogbnVtYmVyO1xuICAgIGxhdGVuY3k6IG51bWJlcjtcbiAgICByZWxpYWJpbGl0eTogbnVtYmVyO1xuICAgIGVycm9yUmF0ZTogbnVtYmVyO1xuICB9O1xuICByZWNvbW1lbmRhdGlvbjogJ3VzZScgfCAnbW9uaXRvcicgfCAnYXZvaWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1ldHJpY3NDb2xsZWN0b3Ige1xuICByZWNvcmRMYXRlbmN5KHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSwgbGF0ZW5jeTogbnVtYmVyKTogdm9pZDtcbiAgcmVjb3JkU3VjY2Vzcyh0cmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUpOiB2b2lkO1xuICByZWNvcmRGYWlsdXJlKHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSwgZXJyb3I6IEVycm9yKTogdm9pZDtcbiAgZ2V0TWV0cmljcyh0cmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUpOiBUcmFuc3BvcnRNZXRyaWNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydE1ldHJpY3Mge1xuICB0b3RhbFJlcXVlc3RzOiBudW1iZXI7XG4gIHN1Y2Nlc3NmdWxSZXF1ZXN0czogbnVtYmVyO1xuICBmYWlsZWRSZXF1ZXN0czogbnVtYmVyO1xuICBhdmVyYWdlTGF0ZW5jeTogbnVtYmVyO1xuICBtaW5MYXRlbmN5OiBudW1iZXI7XG4gIG1heExhdGVuY3k6IG51bWJlcjtcbiAgdXB0aW1lOiBudW1iZXI7XG4gIGxhc3RBY3Rpdml0eTogbnVtYmVyO1xufVxuXG4vKipcbiAqIENvbGxlY3RzIGFuZCBhZ2dyZWdhdGVzIHRyYW5zcG9ydCBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZhdWx0TWV0cmljc0NvbGxlY3RvciBpbXBsZW1lbnRzIE1ldHJpY3NDb2xsZWN0b3Ige1xuICBwcml2YXRlIG1ldHJpY3M6IE1hcDxUcmFuc3BvcnRUeXBlLCBUcmFuc3BvcnRNZXRyaWNzPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBsYXRlbmN5SGlzdG9yeTogTWFwPFRyYW5zcG9ydFR5cGUsIG51bWJlcltdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSByZWFkb25seSBNQVhfSElTVE9SWV9TSVpFID0gMTAwO1xuXG4gIHJlY29yZExhdGVuY3kodHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlLCBsYXRlbmN5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5nZXRPckNyZWF0ZU1ldHJpY3ModHJhbnNwb3J0KTtcbiAgICBcbiAgICAvLyBVcGRhdGUgbGF0ZW5jeSBtZXRyaWNzXG4gICAgY29uc3QgaGlzdG9yeSA9IHRoaXMuZ2V0T3JDcmVhdGVIaXN0b3J5KHRyYW5zcG9ydCk7XG4gICAgaGlzdG9yeS5wdXNoKGxhdGVuY3kpO1xuICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IHRoaXMuTUFYX0hJU1RPUllfU0laRSkge1xuICAgICAgaGlzdG9yeS5zaGlmdCgpO1xuICAgIH1cbiAgICBcbiAgICBtZXRyaWNzLmF2ZXJhZ2VMYXRlbmN5ID0gaGlzdG9yeS5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwsIDApIC8gaGlzdG9yeS5sZW5ndGg7XG4gICAgbWV0cmljcy5taW5MYXRlbmN5ID0gTWF0aC5taW4obWV0cmljcy5taW5MYXRlbmN5LCBsYXRlbmN5KTtcbiAgICBtZXRyaWNzLm1heExhdGVuY3kgPSBNYXRoLm1heChtZXRyaWNzLm1heExhdGVuY3ksIGxhdGVuY3kpO1xuICAgIG1ldHJpY3MubGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIHJlY29yZFN1Y2Nlc3ModHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogdm9pZCB7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMuZ2V0T3JDcmVhdGVNZXRyaWNzKHRyYW5zcG9ydCk7XG4gICAgbWV0cmljcy50b3RhbFJlcXVlc3RzKys7XG4gICAgbWV0cmljcy5zdWNjZXNzZnVsUmVxdWVzdHMrKztcbiAgICBtZXRyaWNzLmxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XG4gIH1cblxuICByZWNvcmRGYWlsdXJlKHRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZSwgZXJyb3I6IEVycm9yKTogdm9pZCB7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMuZ2V0T3JDcmVhdGVNZXRyaWNzKHRyYW5zcG9ydCk7XG4gICAgbWV0cmljcy50b3RhbFJlcXVlc3RzKys7XG4gICAgbWV0cmljcy5mYWlsZWRSZXF1ZXN0cysrO1xuICAgIG1ldHJpY3MubGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIGdldE1ldHJpY3ModHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogVHJhbnNwb3J0TWV0cmljcyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3JDcmVhdGVNZXRyaWNzKHRyYW5zcG9ydCk7XG4gIH1cblxuICBwcml2YXRlIGdldE9yQ3JlYXRlTWV0cmljcyh0cmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGUpOiBUcmFuc3BvcnRNZXRyaWNzIHtcbiAgICBpZiAoIXRoaXMubWV0cmljcy5oYXModHJhbnNwb3J0KSkge1xuICAgICAgdGhpcy5tZXRyaWNzLnNldCh0cmFuc3BvcnQsIHtcbiAgICAgICAgdG90YWxSZXF1ZXN0czogMCxcbiAgICAgICAgc3VjY2Vzc2Z1bFJlcXVlc3RzOiAwLFxuICAgICAgICBmYWlsZWRSZXF1ZXN0czogMCxcbiAgICAgICAgYXZlcmFnZUxhdGVuY3k6IDAsXG4gICAgICAgIG1pbkxhdGVuY3k6IEluZmluaXR5LFxuICAgICAgICBtYXhMYXRlbmN5OiAwLFxuICAgICAgICB1cHRpbWU6IDAsXG4gICAgICAgIGxhc3RBY3Rpdml0eTogRGF0ZS5ub3coKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1ldHJpY3MuZ2V0KHRyYW5zcG9ydCkhO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRPckNyZWF0ZUhpc3RvcnkodHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlKTogbnVtYmVyW10ge1xuICAgIGlmICghdGhpcy5sYXRlbmN5SGlzdG9yeS5oYXModHJhbnNwb3J0KSkge1xuICAgICAgdGhpcy5sYXRlbmN5SGlzdG9yeS5zZXQodHJhbnNwb3J0LCBbXSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxhdGVuY3lIaXN0b3J5LmdldCh0cmFuc3BvcnQpITtcbiAgfVxufVxuXG4vKipcbiAqIE1vbml0b3JzIHRyYW5zcG9ydCBoZWFsdGggYW5kIHByb3ZpZGVzIGFzc2Vzc21lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc3BvcnRIZWFsdGhNb25pdG9yIHtcbiAgcHJpdmF0ZSBzY2hlZHVsZXM6IE1hcDxzdHJpbmcsIEhlYWx0aENoZWNrU2NoZWR1bGU+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIG1ldHJpY3NDb2xsZWN0b3I6IE1ldHJpY3NDb2xsZWN0b3I7XG4gIHByaXZhdGUgbW9uaXRvcmluZ0ludGVydmFsPzogYW55O1xuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihtZXRyaWNzQ29sbGVjdG9yPzogTWV0cmljc0NvbGxlY3Rvcikge1xuICAgIHRoaXMubWV0cmljc0NvbGxlY3RvciA9IG1ldHJpY3NDb2xsZWN0b3IgfHwgbmV3IERlZmF1bHRNZXRyaWNzQ29sbGVjdG9yKCk7XG4gIH1cblxuICBzdGFydE1vbml0b3JpbmcodHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0LCBpbnRlcnZhbDogbnVtYmVyID0gMzAwMDApOiB2b2lkIHtcbiAgICBjb25zdCBzY2hlZHVsZTogSGVhbHRoQ2hlY2tTY2hlZHVsZSA9IHtcbiAgICAgIHRyYW5zcG9ydCxcbiAgICAgIGludGVydmFsLFxuICAgICAgbGFzdENoZWNrOiAwLFxuICAgICAgY29uc2VjdXRpdmVGYWlsdXJlczogMFxuICAgIH07XG5cbiAgICB0aGlzLnNjaGVkdWxlcy5zZXQodHJhbnNwb3J0LmlkLCBzY2hlZHVsZSk7XG5cbiAgICAvLyBTZXQgdXAgdHJhbnNwb3J0IGV2ZW50IGxpc3RlbmVyc1xuICAgIHRyYW5zcG9ydC5vbihUcmFuc3BvcnRFdmVudC5IRUFMVEhfQ0hFQ0ssIChyZXN1bHQ6IEhlYWx0aENoZWNrUmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzQ29sbGVjdG9yLnJlY29yZExhdGVuY3kodHJhbnNwb3J0LnR5cGUsIHJlc3VsdC5sYXRlbmN5KTtcbiAgICAgICAgdGhpcy5tZXRyaWNzQ29sbGVjdG9yLnJlY29yZFN1Y2Nlc3ModHJhbnNwb3J0LnR5cGUpO1xuICAgICAgICBzY2hlZHVsZS5jb25zZWN1dGl2ZUZhaWx1cmVzID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWV0cmljc0NvbGxlY3Rvci5yZWNvcmRGYWlsdXJlKHRyYW5zcG9ydC50eXBlLCBuZXcgRXJyb3IocmVzdWx0LmVycm9yIHx8ICdIZWFsdGggY2hlY2sgZmFpbGVkJykpO1xuICAgICAgICBzY2hlZHVsZS5jb25zZWN1dGl2ZUZhaWx1cmVzKys7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuZW1pdCgnaGVhbHRoLXVwZGF0ZWQnLCB0aGlzLmFzc2Vzc1RyYW5zcG9ydEhlYWx0aCh0cmFuc3BvcnQpKTtcbiAgICB9KTtcblxuICAgIC8vIFN0YXJ0IHBlcmlvZGljIG1vbml0b3JpbmcgaWYgbm90IGFscmVhZHkgcnVubmluZ1xuICAgIGlmICghdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuc3RhcnRQZXJpb2RpY0NoZWNrcygpO1xuICAgIH1cbiAgfVxuXG4gIHN0b3BNb25pdG9yaW5nKHRyYW5zcG9ydDogRGV2UGlwZVRyYW5zcG9ydCk6IHZvaWQge1xuICAgIHRoaXMuc2NoZWR1bGVzLmRlbGV0ZSh0cmFuc3BvcnQuaWQpO1xuICAgIFxuICAgIC8vIFN0b3AgcGVyaW9kaWMgbW9uaXRvcmluZyBpZiBubyB0cmFuc3BvcnRzIGFyZSBiZWluZyBtb25pdG9yZWRcbiAgICBpZiAodGhpcy5zY2hlZHVsZXMuc2l6ZSA9PT0gMCAmJiB0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCk7XG4gICAgICB0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBhc3Nlc3NUcmFuc3BvcnRIZWFsdGgodHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0KTogSGVhbHRoQXNzZXNzbWVudCB7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMubWV0cmljc0NvbGxlY3Rvci5nZXRNZXRyaWNzKHRyYW5zcG9ydC50eXBlKTtcbiAgICBjb25zdCBoZWFsdGhTdGF0dXMgPSB0cmFuc3BvcnQuZ2V0SGVhbHRoU3RhdHVzKCk7XG4gICAgY29uc3QgY2FwYWJpbGl0aWVzID0gdHJhbnNwb3J0LmdldENhcGFiaWxpdGllcygpO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBpbmRpdmlkdWFsIG1ldHJpYyBzY29yZXMgKDAtMSlcbiAgICBjb25zdCBhdmFpbGFiaWxpdHkgPSB0aGlzLmNhbGN1bGF0ZUF2YWlsYWJpbGl0eVNjb3JlKHRyYW5zcG9ydCk7XG4gICAgY29uc3QgbGF0ZW5jeSA9IHRoaXMuY2FsY3VsYXRlTGF0ZW5jeVNjb3JlKGhlYWx0aFN0YXR1cy5sYXRlbmN5KTtcbiAgICBjb25zdCByZWxpYWJpbGl0eSA9IHRoaXMuY2FsY3VsYXRlUmVsaWFiaWxpdHlTY29yZShtZXRyaWNzKTtcbiAgICBjb25zdCBlcnJvclJhdGUgPSB0aGlzLmNhbGN1bGF0ZUVycm9yUmF0ZVNjb3JlKG1ldHJpY3MpO1xuICAgIFxuICAgIC8vIFdlaWdodGVkIG92ZXJhbGwgc2NvcmVcbiAgICBjb25zdCBzY29yZSA9IChcbiAgICAgIGF2YWlsYWJpbGl0eSAqIDAuMyArXG4gICAgICBsYXRlbmN5ICogMC4yNSArXG4gICAgICByZWxpYWJpbGl0eSAqIDAuMyArXG4gICAgICBlcnJvclJhdGUgKiAwLjE1XG4gICAgKTtcbiAgICBcbiAgICAvLyBEZXRlcm1pbmUgc3RhdHVzIGJhc2VkIG9uIHNjb3JlXG4gICAgbGV0IHN0YXR1czogSGVhbHRoQXNzZXNzbWVudFsnc3RhdHVzJ107XG4gICAgaWYgKHNjb3JlID49IDAuOSkgc3RhdHVzID0gJ2V4Y2VsbGVudCc7XG4gICAgZWxzZSBpZiAoc2NvcmUgPj0gMC43KSBzdGF0dXMgPSAnZ29vZCc7XG4gICAgZWxzZSBpZiAoc2NvcmUgPj0gMC41KSBzdGF0dXMgPSAnZmFpcic7XG4gICAgZWxzZSBpZiAoc2NvcmUgPj0gMC4zKSBzdGF0dXMgPSAncG9vcic7XG4gICAgZWxzZSBzdGF0dXMgPSAnZmFpbGluZyc7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHJlY29tbWVuZGF0aW9uXG4gICAgbGV0IHJlY29tbWVuZGF0aW9uOiBIZWFsdGhBc3Nlc3NtZW50WydyZWNvbW1lbmRhdGlvbiddO1xuICAgIGlmIChzY29yZSA+PSAwLjcpIHJlY29tbWVuZGF0aW9uID0gJ3VzZSc7XG4gICAgZWxzZSBpZiAoc2NvcmUgPj0gMC40KSByZWNvbW1lbmRhdGlvbiA9ICdtb25pdG9yJztcbiAgICBlbHNlIHJlY29tbWVuZGF0aW9uID0gJ2F2b2lkJztcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdHJhbnNwb3J0OiB0cmFuc3BvcnQudHlwZSxcbiAgICAgIHNjb3JlLFxuICAgICAgc3RhdHVzLFxuICAgICAgbWV0cmljczoge1xuICAgICAgICBhdmFpbGFiaWxpdHksXG4gICAgICAgIGxhdGVuY3k6IGxhdGVuY3ksXG4gICAgICAgIHJlbGlhYmlsaXR5LFxuICAgICAgICBlcnJvclJhdGU6IDEgLSBlcnJvclJhdGUgLy8gSW52ZXJ0IGZvciBkaXNwbGF5IChoaWdoZXIgaXMgYmV0dGVyKVxuICAgICAgfSxcbiAgICAgIHJlY29tbWVuZGF0aW9uXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQXZhaWxhYmlsaXR5U2NvcmUodHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0KTogbnVtYmVyIHtcbiAgICBpZiAoIXRyYW5zcG9ydC5pc0F2YWlsYWJsZSgpKSByZXR1cm4gMDtcbiAgICBpZiAoIXRyYW5zcG9ydC5pc0Nvbm5lY3RlZCgpKSByZXR1cm4gMC4zO1xuICAgIFxuICAgIGNvbnN0IHNjaGVkdWxlID0gdGhpcy5zY2hlZHVsZXMuZ2V0KHRyYW5zcG9ydC5pZCk7XG4gICAgaWYgKCFzY2hlZHVsZSkgcmV0dXJuIDAuODsgLy8gRGVmYXVsdCBpZiBubyBtb25pdG9yaW5nIGRhdGFcbiAgICBcbiAgICAvLyBQZW5hbGl6ZSBjb25zZWN1dGl2ZSBmYWlsdXJlc1xuICAgIGNvbnN0IGZhaWx1cmVQZW5hbHR5ID0gTWF0aC5taW4oc2NoZWR1bGUuY29uc2VjdXRpdmVGYWlsdXJlcyAqIDAuMSwgMC41KTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMS4wIC0gZmFpbHVyZVBlbmFsdHksIDApO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVMYXRlbmN5U2NvcmUobGF0ZW5jeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAvLyBPcHRpbWFsIGxhdGVuY3kgdGFyZ2V0cyBieSB0cmFuc3BvcnQgdHlwZVxuICAgIGNvbnN0IGV4Y2VsbGVudCA9IDUwOyAgIC8vIDw1MG1zXG4gICAgY29uc3QgZ29vZCA9IDIwMDsgICAgICAgLy8gPDIwMG1zXG4gICAgY29uc3QgYWNjZXB0YWJsZSA9IDEwMDA7IC8vIDwxc1xuICAgIFxuICAgIGlmIChsYXRlbmN5IDw9IGV4Y2VsbGVudCkgcmV0dXJuIDEuMDtcbiAgICBpZiAobGF0ZW5jeSA8PSBnb29kKSByZXR1cm4gMC44O1xuICAgIGlmIChsYXRlbmN5IDw9IGFjY2VwdGFibGUpIHJldHVybiAwLjY7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAuMiwgMS4wIC0gKGxhdGVuY3kgLyA1MDAwKSk7IC8vIERlZ3JhZGUgZnVydGhlciBmb3IgdmVyeSBoaWdoIGxhdGVuY3lcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlUmVsaWFiaWxpdHlTY29yZShtZXRyaWNzOiBUcmFuc3BvcnRNZXRyaWNzKTogbnVtYmVyIHtcbiAgICBpZiAobWV0cmljcy50b3RhbFJlcXVlc3RzID09PSAwKSByZXR1cm4gMC41OyAvLyBVbmtub3duXG4gICAgXG4gICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSBtZXRyaWNzLnN1Y2Nlc3NmdWxSZXF1ZXN0cyAvIG1ldHJpY3MudG90YWxSZXF1ZXN0cztcbiAgICByZXR1cm4gc3VjY2Vzc1JhdGU7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUVycm9yUmF0ZVNjb3JlKG1ldHJpY3M6IFRyYW5zcG9ydE1ldHJpY3MpOiBudW1iZXIge1xuICAgIGlmIChtZXRyaWNzLnRvdGFsUmVxdWVzdHMgPT09IDApIHJldHVybiAxLjA7IC8vIE5vIGVycm9ycyB5ZXRcbiAgICBcbiAgICBjb25zdCBlcnJvclJhdGUgPSBtZXRyaWNzLmZhaWxlZFJlcXVlc3RzIC8gbWV0cmljcy50b3RhbFJlcXVlc3RzO1xuICAgIHJldHVybiBNYXRoLm1heCgwLCAxLjAgLSBlcnJvclJhdGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFBlcmlvZGljQ2hlY2tzKCk6IHZvaWQge1xuICAgIHRoaXMubW9uaXRvcmluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2NoZWR1bGVzID0gQXJyYXkuZnJvbSh0aGlzLnNjaGVkdWxlcy52YWx1ZXMoKSk7XG4gICAgICBmb3IgKGNvbnN0IHNjaGVkdWxlIG9mIHNjaGVkdWxlcykge1xuICAgICAgICBpZiAobm93IC0gc2NoZWR1bGUubGFzdENoZWNrID49IHNjaGVkdWxlLmludGVydmFsKSB7XG4gICAgICAgICAgc2NoZWR1bGUubGFzdENoZWNrID0gbm93O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFBlcmZvcm0gaGVhbHRoIGNoZWNrXG4gICAgICAgICAgc2NoZWR1bGUudHJhbnNwb3J0LnBlcmZvcm1IZWFsdGhDaGVjaygpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIEVycm9yIGlzIGFscmVhZHkgaGFuZGxlZCBieSB0aGUgdHJhbnNwb3J0J3MgaGVhbHRoIGNoZWNrIGV2ZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCA1MDAwKTsgLy8gQ2hlY2sgZXZlcnkgNSBzZWNvbmRzXG4gIH1cblxuICAvLyBFdmVudCBzeXN0ZW1cbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGlzdGVuZXIoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGVhbHRoIG1vbml0b3IgZXZlbnQgbGlzdGVuZXIgZm9yICR7ZXZlbnR9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0TWV0cmljc0NvbGxlY3RvcigpOiBNZXRyaWNzQ29sbGVjdG9yIHtcbiAgICByZXR1cm4gdGhpcy5tZXRyaWNzQ29sbGVjdG9yO1xuICB9XG59XG4iLCIvKipcbiAqIFRyYW5zcG9ydCBNYW5hZ2VyIC0gSW50ZWxsaWdlbnQgdHJhbnNwb3J0IHNlbGVjdGlvbiBhbmQgZmFpbG92ZXIgbWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IFxuICBEZXZQaXBlVHJhbnNwb3J0LFxuICBUcmFuc3BvcnRUeXBlLFxuICBUcmFuc3BvcnRDb25maWcsXG4gIERldlBpcGVNZXNzYWdlLFxuICBEZXZQaXBlUmVzcG9uc2UsXG4gIFRyYW5zcG9ydEV2ZW50XG59IGZyb20gJy4vdHJhbnNwb3J0cy9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCB7IEhUVFBUcmFuc3BvcnQgfSBmcm9tICcuL3RyYW5zcG9ydHMvSFRUUFRyYW5zcG9ydCc7XG5pbXBvcnQgeyBXZWJTb2NrZXRUcmFuc3BvcnQgfSBmcm9tICcuL3RyYW5zcG9ydHMvV2ViU29ja2V0VHJhbnNwb3J0JztcbmltcG9ydCB7IEZpbGVTeXN0ZW1UcmFuc3BvcnQgfSBmcm9tICcuL3RyYW5zcG9ydHMvRmlsZVN5c3RlbVRyYW5zcG9ydCc7XG5pbXBvcnQgeyBUcmFuc3BvcnRIZWFsdGhNb25pdG9yLCBIZWFsdGhBc3Nlc3NtZW50IH0gZnJvbSAnLi9tb25pdG9yaW5nL1RyYW5zcG9ydEhlYWx0aE1vbml0b3InO1xuaW1wb3J0IHsgRW52aXJvbm1lbnREZXRlY3RvciB9IGZyb20gJy4uL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydFNlbGVjdGlvbkNyaXRlcmlhIHtcbiAgbGF0ZW5jeVdlaWdodDogbnVtYmVyOyAgICAgIC8vIDAtMVxuICByZWxpYWJpbGl0eVdlaWdodDogbnVtYmVyOyAgLy8gMC0xXG4gIGNhcGFiaWxpdHlXZWlnaHQ6IG51bWJlcjsgICAvLyAwLTFcbiAgY29zdFdlaWdodDogbnVtYmVyOyAgICAgICAgIC8vIDAtMVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zcG9ydE1hbmFnZXJDb25maWcge1xuICBzZWxlY3Rpb25Dcml0ZXJpYTogVHJhbnNwb3J0U2VsZWN0aW9uQ3JpdGVyaWE7XG4gIGZhbGxiYWNrQ2hhaW46IFRyYW5zcG9ydFR5cGVbXTtcbiAgdHJhbnNwb3J0Q29uZmlnczoge1xuICAgIGh0dHA6IFRyYW5zcG9ydENvbmZpZztcbiAgICB3ZWJzb2NrZXQ/OiBUcmFuc3BvcnRDb25maWc7XG4gICAgZmlsZXN5c3RlbT86IFRyYW5zcG9ydENvbmZpZztcbiAgfTtcbiAgaGVhbHRoQ2hlY2tJbnRlcnZhbD86IG51bWJlcjtcbiAgYXV0b0ZhaWxvdmVyPzogYm9vbGVhbjtcbiAgZGVidWc/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbkNvbnRleHQge1xuICBtZXNzYWdlVHlwZT86IHN0cmluZztcbiAgcHJpb3JpdHk/OiAnbG93JyB8ICdub3JtYWwnIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJztcbiAgcmVxdWlyZXNSZWFsdGltZT86IGJvb2xlYW47XG4gIG1heExhdGVuY3k/OiBudW1iZXI7XG4gIHJldHJ5QXR0ZW1wdD86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBUcmFuc3BvcnQgc2VsZWN0b3IgdGhhdCBjaG9vc2VzIHRoZSBiZXN0IHRyYW5zcG9ydCBiYXNlZCBvbiBjcml0ZXJpYVxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNwb3J0U2VsZWN0b3Ige1xuICBwcml2YXRlIGNyaXRlcmlhOiBUcmFuc3BvcnRTZWxlY3Rpb25Dcml0ZXJpYTtcblxuICBjb25zdHJ1Y3Rvcihjcml0ZXJpYTogVHJhbnNwb3J0U2VsZWN0aW9uQ3JpdGVyaWEpIHtcbiAgICB0aGlzLmNyaXRlcmlhID0gY3JpdGVyaWE7XG4gIH1cblxuICBhc3luYyBjYWxjdWxhdGVTY29yZSh0cmFuc3BvcnQ6IERldlBpcGVUcmFuc3BvcnQsIGNvbnRleHQ/OiBTZWxlY3Rpb25Db250ZXh0KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSB0cmFuc3BvcnQuZ2V0Q2FwYWJpbGl0aWVzKCk7XG4gICAgY29uc3QgaGVhbHRoU3RhdHVzID0gdHJhbnNwb3J0LmdldEhlYWx0aFN0YXR1cygpO1xuICAgIFxuICAgIC8vIENhcGFiaWxpdHkgc2NvcmUgKDAtMSlcbiAgICBsZXQgY2FwYWJpbGl0eVNjb3JlID0gMC41OyAvLyBCYXNlIHNjb3JlXG4gICAgXG4gICAgaWYgKGNvbnRleHQ/LnJlcXVpcmVzUmVhbHRpbWUgJiYgY2FwYWJpbGl0aWVzLnN1cHBvcnRzUmVhbHRpbWUpIHtcbiAgICAgIGNhcGFiaWxpdHlTY29yZSArPSAwLjM7XG4gICAgfVxuICAgIFxuICAgIGlmIChjb250ZXh0Py5tYXhMYXRlbmN5ICYmIGNhcGFiaWxpdGllcy5hdmVyYWdlTGF0ZW5jeSA8PSBjb250ZXh0Lm1heExhdGVuY3kpIHtcbiAgICAgIGNhcGFiaWxpdHlTY29yZSArPSAwLjI7XG4gICAgfVxuICAgIFxuICAgIC8vIE5vcm1hbGl6ZSBjYXBhYmlsaXR5IHNjb3JlXG4gICAgY2FwYWJpbGl0eVNjb3JlID0gTWF0aC5taW4oY2FwYWJpbGl0eVNjb3JlLCAxLjApO1xuICAgIFxuICAgIC8vIExhdGVuY3kgc2NvcmUgKDAtMSwgbG93ZXIgbGF0ZW5jeSA9IGhpZ2hlciBzY29yZSlcbiAgICBjb25zdCBsYXRlbmN5U2NvcmUgPSBNYXRoLm1heCgwLCAxLjAgLSAoY2FwYWJpbGl0aWVzLmF2ZXJhZ2VMYXRlbmN5IC8gNTAwMCkpO1xuICAgIFxuICAgIC8vIFJlbGlhYmlsaXR5IHNjb3JlICgwLTEpXG4gICAgY29uc3QgcmVsaWFiaWxpdHlTY29yZSA9IGNhcGFiaWxpdGllcy5yZWxpYWJpbGl0eTtcbiAgICBcbiAgICAvLyBDb3N0IHNjb3JlIChzaW1wbGlmaWVkIC0gY291bGQgYmUgZW5oYW5jZWQgd2l0aCBhY3R1YWwgY29zdCBkYXRhKVxuICAgIGxldCBjb3N0U2NvcmUgPSAxLjA7XG4gICAgaWYgKHRyYW5zcG9ydC50eXBlID09PSBUcmFuc3BvcnRUeXBlLkhUVFApIGNvc3RTY29yZSA9IDAuODtcbiAgICBlbHNlIGlmICh0cmFuc3BvcnQudHlwZSA9PT0gVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQpIGNvc3RTY29yZSA9IDAuOTtcbiAgICBlbHNlIGlmICh0cmFuc3BvcnQudHlwZSA9PT0gVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNKSBjb3N0U2NvcmUgPSAxLjA7XG4gICAgXG4gICAgLy8gQXZhaWxhYmlsaXR5IHBlbmFsdHlcbiAgICBsZXQgYXZhaWxhYmlsaXR5TXVsdGlwbGllciA9IDEuMDtcbiAgICBpZiAoIXRyYW5zcG9ydC5pc0F2YWlsYWJsZSgpKSBhdmFpbGFiaWxpdHlNdWx0aXBsaWVyID0gMDtcbiAgICBlbHNlIGlmICghdHJhbnNwb3J0LmlzQ29ubmVjdGVkKCkpIGF2YWlsYWJpbGl0eU11bHRpcGxpZXIgPSAwLjM7XG4gICAgZWxzZSBpZiAoaGVhbHRoU3RhdHVzLnN0YXR1cyA9PT0gJ2ZhaWxpbmcnKSBhdmFpbGFiaWxpdHlNdWx0aXBsaWVyID0gMC4xO1xuICAgIGVsc2UgaWYgKGhlYWx0aFN0YXR1cy5zdGF0dXMgPT09ICdkZWdyYWRlZCcpIGF2YWlsYWJpbGl0eU11bHRpcGxpZXIgPSAwLjU7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHdlaWdodGVkIHNjb3JlXG4gICAgY29uc3Qgd2VpZ2h0ZWRTY29yZSA9IChcbiAgICAgIGxhdGVuY3lTY29yZSAqIHRoaXMuY3JpdGVyaWEubGF0ZW5jeVdlaWdodCArXG4gICAgICByZWxpYWJpbGl0eVNjb3JlICogdGhpcy5jcml0ZXJpYS5yZWxpYWJpbGl0eVdlaWdodCArXG4gICAgICBjYXBhYmlsaXR5U2NvcmUgKiB0aGlzLmNyaXRlcmlhLmNhcGFiaWxpdHlXZWlnaHQgK1xuICAgICAgY29zdFNjb3JlICogdGhpcy5jcml0ZXJpYS5jb3N0V2VpZ2h0XG4gICAgKSAqIGF2YWlsYWJpbGl0eU11bHRpcGxpZXI7XG4gICAgXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHdlaWdodGVkU2NvcmUpKTtcbiAgfVxuXG4gIHNlbGVjdEJlc3QoXG4gICAgYXZhaWxhYmxlOiBEZXZQaXBlVHJhbnNwb3J0W10sIFxuICAgIGNvbnRleHQ/OiBTZWxlY3Rpb25Db250ZXh0XG4gICk6IFByb21pc2U8RGV2UGlwZVRyYW5zcG9ydCB8IG51bGw+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICAgIGlmIChhdmFpbGFibGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHNjb3JlcyBmb3IgYWxsIGF2YWlsYWJsZSB0cmFuc3BvcnRzXG4gICAgICBjb25zdCBzY29yZWRUcmFuc3BvcnRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGF2YWlsYWJsZS5tYXAoYXN5bmMgKHRyYW5zcG9ydCkgPT4gKHtcbiAgICAgICAgICB0cmFuc3BvcnQsXG4gICAgICAgICAgc2NvcmU6IGF3YWl0IHRoaXMuY2FsY3VsYXRlU2NvcmUodHJhbnNwb3J0LCBjb250ZXh0KVxuICAgICAgICB9KSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFNvcnQgYnkgc2NvcmUgKGhpZ2hlc3QgZmlyc3QpXG4gICAgICBzY29yZWRUcmFuc3BvcnRzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIHRoZSBiZXN0IHRyYW5zcG9ydFxuICAgICAgcmVzb2x2ZShzY29yZWRUcmFuc3BvcnRzWzBdLnRyYW5zcG9ydCk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBNYWluIFRyYW5zcG9ydCBNYW5hZ2VyIGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc3BvcnRNYW5hZ2VyIHtcbiAgcHJpdmF0ZSB0cmFuc3BvcnRzOiBNYXA8VHJhbnNwb3J0VHlwZSwgRGV2UGlwZVRyYW5zcG9ydD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYWN0aXZlVHJhbnNwb3J0PzogRGV2UGlwZVRyYW5zcG9ydDtcbiAgcHJpdmF0ZSBmYWxsYmFja0NoYWluOiBUcmFuc3BvcnRUeXBlW107XG4gIHByaXZhdGUgaGVhbHRoTW9uaXRvcjogVHJhbnNwb3J0SGVhbHRoTW9uaXRvcjtcbiAgcHJpdmF0ZSBzZWxlY3RvcjogVHJhbnNwb3J0U2VsZWN0b3I7XG4gIHByaXZhdGUgY29uZmlnOiBUcmFuc3BvcnRNYW5hZ2VyQ29uZmlnO1xuICBwcml2YXRlIGV2ZW50TGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBmYWlsb3ZlckluUHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFRyYW5zcG9ydE1hbmFnZXJDb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmZhbGxiYWNrQ2hhaW4gPSBjb25maWcuZmFsbGJhY2tDaGFpbiB8fCBbXG4gICAgICBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCxcbiAgICAgIFRyYW5zcG9ydFR5cGUuSFRUUCxcbiAgICAgIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTVxuICAgIF07XG4gICAgXG4gICAgdGhpcy5oZWFsdGhNb25pdG9yID0gbmV3IFRyYW5zcG9ydEhlYWx0aE1vbml0b3IoKTtcbiAgICB0aGlzLnNlbGVjdG9yID0gbmV3IFRyYW5zcG9ydFNlbGVjdG9yKGNvbmZpZy5zZWxlY3Rpb25Dcml0ZXJpYSk7XG4gICAgXG4gICAgdGhpcy5pbml0aWFsaXplVHJhbnNwb3J0cygpO1xuICAgIHRoaXMuc2V0dXBIZWFsdGhNb25pdG9yaW5nKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVUcmFuc3BvcnRzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGVudmlyb25tZW50ID0gRW52aXJvbm1lbnREZXRlY3Rvci5kZXRlY3QoKTtcbiAgICBcbiAgICAvLyBBbHdheXMgaW5pdGlhbGl6ZSBIVFRQIHRyYW5zcG9ydCAobW9zdCBjb21wYXRpYmxlKVxuICAgIGNvbnN0IGh0dHBUcmFuc3BvcnQgPSBuZXcgSFRUUFRyYW5zcG9ydCh0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLmh0dHApO1xuICAgIGF3YWl0IGh0dHBUcmFuc3BvcnQuaW5pdGlhbGl6ZSh0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLmh0dHApO1xuICAgIHRoaXMudHJhbnNwb3J0cy5zZXQoVHJhbnNwb3J0VHlwZS5IVFRQLCBodHRwVHJhbnNwb3J0KTtcbiAgICBcbiAgICAvLyBJbml0aWFsaXplIFdlYlNvY2tldCB0cmFuc3BvcnQgaWYgc3VwcG9ydGVkIGFuZCBjb25maWd1cmVkXG4gICAgaWYgKGVudmlyb25tZW50Lmhhc1dlYlNvY2tldCAmJiB0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLndlYnNvY2tldCkge1xuICAgICAgY29uc3Qgd3NUcmFuc3BvcnQgPSBuZXcgV2ViU29ja2V0VHJhbnNwb3J0KHRoaXMuY29uZmlnLnRyYW5zcG9ydENvbmZpZ3Mud2Vic29ja2V0KTtcbiAgICAgIGF3YWl0IHdzVHJhbnNwb3J0LmluaXRpYWxpemUodGhpcy5jb25maWcudHJhbnNwb3J0Q29uZmlncy53ZWJzb2NrZXQpO1xuICAgICAgdGhpcy50cmFuc3BvcnRzLnNldChUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCwgd3NUcmFuc3BvcnQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIEZpbGVTeXN0ZW0gdHJhbnNwb3J0IGlmIHN1cHBvcnRlZCBhbmQgY29uZmlndXJlZFxuICAgIGlmIChlbnZpcm9ubWVudC5oYXNGaWxlU3lzdGVtICYmIHRoaXMuY29uZmlnLnRyYW5zcG9ydENvbmZpZ3MuZmlsZXN5c3RlbSkge1xuICAgICAgY29uc3QgZnNUcmFuc3BvcnQgPSBuZXcgRmlsZVN5c3RlbVRyYW5zcG9ydCh0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLmZpbGVzeXN0ZW0pO1xuICAgICAgYXdhaXQgZnNUcmFuc3BvcnQuaW5pdGlhbGl6ZSh0aGlzLmNvbmZpZy50cmFuc3BvcnRDb25maWdzLmZpbGVzeXN0ZW0pO1xuICAgICAgdGhpcy50cmFuc3BvcnRzLnNldChUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU0sIGZzVHJhbnNwb3J0KTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0dXAgZXZlbnQgaGFuZGxlcnMgZm9yIGVhY2ggdHJhbnNwb3J0XG4gICAgY29uc3QgdHJhbnNwb3J0cyA9IEFycmF5LmZyb20odGhpcy50cmFuc3BvcnRzLnZhbHVlcygpKTtcbiAgICBmb3IgKGNvbnN0IHRyYW5zcG9ydCBvZiB0cmFuc3BvcnRzKSB7XG4gICAgICB0aGlzLnNldHVwVHJhbnNwb3J0RXZlbnRIYW5kbGVycyh0cmFuc3BvcnQpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmRlYnVnKGBJbml0aWFsaXplZCAke3RoaXMudHJhbnNwb3J0cy5zaXplfSB0cmFuc3BvcnRzYCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwVHJhbnNwb3J0RXZlbnRIYW5kbGVycyh0cmFuc3BvcnQ6IERldlBpcGVUcmFuc3BvcnQpOiB2b2lkIHtcbiAgICB0cmFuc3BvcnQub24oVHJhbnNwb3J0RXZlbnQuQ09OTkVDVEVELCAoKSA9PiB7XG4gICAgICB0aGlzLmRlYnVnKGBUcmFuc3BvcnQgJHt0cmFuc3BvcnQudHlwZX0gY29ubmVjdGVkYCk7XG4gICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9jb25uZWN0ZWQnLCB7IHRyYW5zcG9ydDogdHJhbnNwb3J0LnR5cGUgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdHJhbnNwb3J0Lm9uKFRyYW5zcG9ydEV2ZW50LkRJU0NPTk5FQ1RFRCwgKCkgPT4ge1xuICAgICAgdGhpcy5kZWJ1ZyhgVHJhbnNwb3J0ICR7dHJhbnNwb3J0LnR5cGV9IGRpc2Nvbm5lY3RlZGApO1xuICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZGlzY29ubmVjdGVkJywgeyB0cmFuc3BvcnQ6IHRyYW5zcG9ydC50eXBlIH0pO1xuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIGZhaWxvdmVyIGlmIHRoaXMgd2FzIHRoZSBhY3RpdmUgdHJhbnNwb3J0XG4gICAgICBpZiAodGhpcy5hY3RpdmVUcmFuc3BvcnQgPT09IHRyYW5zcG9ydCAmJiB0aGlzLmNvbmZpZy5hdXRvRmFpbG92ZXIgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlVHJhbnNwb3J0RmFpbHVyZSh0cmFuc3BvcnQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHRyYW5zcG9ydC5vbihUcmFuc3BvcnRFdmVudC5FUlJPUiwgKGVycm9yKSA9PiB7XG4gICAgICB0aGlzLmRlYnVnKGBUcmFuc3BvcnQgJHt0cmFuc3BvcnQudHlwZX0gZXJyb3I6YCwgZXJyb3IpO1xuICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZXJyb3InLCB7IHRyYW5zcG9ydDogdHJhbnNwb3J0LnR5cGUsIGVycm9yIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHRyYW5zcG9ydC5vbihUcmFuc3BvcnRFdmVudC5NRVNTQUdFLCAobWVzc2FnZSkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwSGVhbHRoTW9uaXRvcmluZygpOiB2b2lkIHtcbiAgICBjb25zdCB0cmFuc3BvcnRzID0gQXJyYXkuZnJvbSh0aGlzLnRyYW5zcG9ydHMudmFsdWVzKCkpO1xuICAgIGZvciAoY29uc3QgdHJhbnNwb3J0IG9mIHRyYW5zcG9ydHMpIHtcbiAgICAgIHRoaXMuaGVhbHRoTW9uaXRvci5zdGFydE1vbml0b3JpbmcoXG4gICAgICAgIHRyYW5zcG9ydCwgXG4gICAgICAgIHRoaXMuY29uZmlnLmhlYWx0aENoZWNrSW50ZXJ2YWwgfHwgMzAwMDBcbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaGVhbHRoTW9uaXRvci5vbignaGVhbHRoLXVwZGF0ZWQnLCAoYXNzZXNzbWVudDogSGVhbHRoQXNzZXNzbWVudCkgPT4ge1xuICAgICAgdGhpcy5lbWl0KCdoZWFsdGhfdXBkYXRlZCcsIGFzc2Vzc21lbnQpO1xuICAgICAgXG4gICAgICAvLyBDb25zaWRlciB0cmFuc3BvcnQgc3dpdGNoaW5nIGlmIGN1cnJlbnQgdHJhbnNwb3J0IGlzIGRlZ3JhZGluZ1xuICAgICAgaWYgKHRoaXMuYWN0aXZlVHJhbnNwb3J0Py50eXBlID09PSBhc3Nlc3NtZW50LnRyYW5zcG9ydCAmJiBcbiAgICAgICAgICBhc3Nlc3NtZW50LnJlY29tbWVuZGF0aW9uID09PSAnYXZvaWQnICYmXG4gICAgICAgICAgIXRoaXMuZmFpbG92ZXJJblByb2dyZXNzKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0T3B0aW1hbFRyYW5zcG9ydCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2VsZWN0T3B0aW1hbFRyYW5zcG9ydChjb250ZXh0PzogU2VsZWN0aW9uQ29udGV4dCk6IFByb21pc2U8RGV2UGlwZVRyYW5zcG9ydD4ge1xuICAgIGNvbnN0IGF2YWlsYWJsZVRyYW5zcG9ydHMgPSBBcnJheS5mcm9tKHRoaXMudHJhbnNwb3J0cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIodHJhbnNwb3J0ID0+IHRyYW5zcG9ydC5pc0F2YWlsYWJsZSgpKTtcbiAgICBcbiAgICBpZiAoYXZhaWxhYmxlVHJhbnNwb3J0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYXZhaWxhYmxlIHRyYW5zcG9ydHMnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc2VsZWN0ZWRUcmFuc3BvcnQgPSBhd2FpdCB0aGlzLnNlbGVjdG9yLnNlbGVjdEJlc3QoYXZhaWxhYmxlVHJhbnNwb3J0cywgY29udGV4dCk7XG4gICAgaWYgKCFzZWxlY3RlZFRyYW5zcG9ydCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdWl0YWJsZSB0cmFuc3BvcnQgZm91bmQnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuYWN0aXZlVHJhbnNwb3J0ICE9PSBzZWxlY3RlZFRyYW5zcG9ydCkge1xuICAgICAgYXdhaXQgdGhpcy5zd2l0Y2hUcmFuc3BvcnQoc2VsZWN0ZWRUcmFuc3BvcnQsICdvcHRpbWl6YXRpb24nKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNlbGVjdGVkVHJhbnNwb3J0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzd2l0Y2hUcmFuc3BvcnQoXG4gICAgbmV3VHJhbnNwb3J0OiBEZXZQaXBlVHJhbnNwb3J0LCBcbiAgICByZWFzb246ICdvcHRpbWl6YXRpb24nIHwgJ2ZhaWxvdmVyJyB8ICdtYW51YWwnXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG9sZFRyYW5zcG9ydCA9IHRoaXMuYWN0aXZlVHJhbnNwb3J0O1xuICAgIFxuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlYnVnKGBTd2l0Y2hpbmcgdHJhbnNwb3J0IGZyb20gJHtvbGRUcmFuc3BvcnQ/LnR5cGUgfHwgJ25vbmUnfSB0byAke25ld1RyYW5zcG9ydC50eXBlfSAoJHtyZWFzb259KWApO1xuICAgICAgXG4gICAgICAvLyBDb25uZWN0IG5ldyB0cmFuc3BvcnQgaWYgbm90IGFscmVhZHkgY29ubmVjdGVkXG4gICAgICBpZiAoIW5ld1RyYW5zcG9ydC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgIGF3YWl0IG5ld1RyYW5zcG9ydC5jb25uZWN0KCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN3aXRjaCBhY3RpdmUgdHJhbnNwb3J0XG4gICAgICB0aGlzLmFjdGl2ZVRyYW5zcG9ydCA9IG5ld1RyYW5zcG9ydDtcbiAgICAgIFxuICAgICAgLy8gRGlzY29ubmVjdCBvbGQgdHJhbnNwb3J0IGlmIGRpZmZlcmVudCAoYnV0IGRvbid0IGF3YWl0IHRvIGF2b2lkIGRlbGF5cylcbiAgICAgIGlmIChvbGRUcmFuc3BvcnQgJiYgb2xkVHJhbnNwb3J0ICE9PSBuZXdUcmFuc3BvcnQpIHtcbiAgICAgICAgb2xkVHJhbnNwb3J0LmRpc2Nvbm5lY3QoKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgdGhpcy5kZWJ1ZyhgRXJyb3IgZGlzY29ubmVjdGluZyBvbGQgdHJhbnNwb3J0ICR7b2xkVHJhbnNwb3J0LnR5cGV9OmAsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X3N3aXRjaGVkJywge1xuICAgICAgICBmcm9tOiBvbGRUcmFuc3BvcnQ/LnR5cGUsXG4gICAgICAgIHRvOiBuZXdUcmFuc3BvcnQudHlwZSxcbiAgICAgICAgcmVhc29uXG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBSb2xsYmFjayBpZiBzd2l0Y2ggZmFpbGVkXG4gICAgICBpZiAob2xkVHJhbnNwb3J0ICYmIG9sZFRyYW5zcG9ydC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVHJhbnNwb3J0ID0gb2xkVHJhbnNwb3J0O1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgaGFuZGxlVHJhbnNwb3J0RmFpbHVyZShmYWlsZWRUcmFuc3BvcnQ6IERldlBpcGVUcmFuc3BvcnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5mYWlsb3ZlckluUHJvZ3Jlc3MpIHJldHVybjtcbiAgICB0aGlzLmZhaWxvdmVySW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVidWcoYEhhbmRsaW5nIGZhaWx1cmUgb2YgdHJhbnNwb3J0ICR7ZmFpbGVkVHJhbnNwb3J0LnR5cGV9YCk7XG4gICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9mYWlsZWQnLCB7XG4gICAgICAgIHRyYW5zcG9ydDogZmFpbGVkVHJhbnNwb3J0LnR5cGUsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFRyeSBmYWxsYmFjayBjaGFpblxuICAgICAgZm9yIChjb25zdCB0cmFuc3BvcnRUeXBlIG9mIHRoaXMuZmFsbGJhY2tDaGFpbikge1xuICAgICAgICBpZiAodHJhbnNwb3J0VHlwZSA9PT0gZmFpbGVkVHJhbnNwb3J0LnR5cGUpIGNvbnRpbnVlO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmFsbGJhY2tUcmFuc3BvcnQgPSB0aGlzLnRyYW5zcG9ydHMuZ2V0KHRyYW5zcG9ydFR5cGUpO1xuICAgICAgICBpZiAoZmFsbGJhY2tUcmFuc3BvcnQgJiYgZmFsbGJhY2tUcmFuc3BvcnQuaXNBdmFpbGFibGUoKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN3aXRjaFRyYW5zcG9ydChmYWxsYmFja1RyYW5zcG9ydCwgJ2ZhaWxvdmVyJyk7XG4gICAgICAgICAgICB0aGlzLmRlYnVnKGBTdWNjZXNzZnVsbHkgZmFpbGVkIG92ZXIgdG8gJHt0cmFuc3BvcnRUeXBlfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnKGBGYWlsb3ZlciB0byAke3RyYW5zcG9ydFR5cGV9IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgdHJhbnNwb3J0cyBmYWlsZWQnKTtcbiAgICAgIFxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmZhaWxvdmVySW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbmQobWVzc2FnZTogRGV2UGlwZU1lc3NhZ2UsIGNvbnRleHQ/OiBTZWxlY3Rpb25Db250ZXh0KTogUHJvbWlzZTxEZXZQaXBlUmVzcG9uc2U+IHtcbiAgICAvLyBFbnN1cmUgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNwb3J0XG4gICAgaWYgKCF0aGlzLmFjdGl2ZVRyYW5zcG9ydCkge1xuICAgICAgYXdhaXQgdGhpcy5zZWxlY3RPcHRpbWFsVHJhbnNwb3J0KGNvbnRleHQpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuYWN0aXZlVHJhbnNwb3J0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjdGl2ZSB0cmFuc3BvcnQgYXZhaWxhYmxlJyk7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5hY3RpdmVUcmFuc3BvcnQuc2VuZChtZXNzYWdlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gSGFuZGxlIHRyYW5zcG9ydCBmYWlsdXJlIGFuZCByZXRyeVxuICAgICAgdGhpcy5kZWJ1ZyhgU2VuZCBmYWlsZWQgb24gJHt0aGlzLmFjdGl2ZVRyYW5zcG9ydC50eXBlfSwgYXR0ZW1wdGluZyBmYWlsb3ZlcmApO1xuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVUcmFuc3BvcnRGYWlsdXJlKHRoaXMuYWN0aXZlVHJhbnNwb3J0KTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuYWN0aXZlVHJhbnNwb3J0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmFjdGl2ZVRyYW5zcG9ydC5zZW5kKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnNlbGVjdE9wdGltYWxUcmFuc3BvcnQoKTtcbiAgfVxuXG4gIGFzeW5jIGRpc2Nvbm5lY3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZGlzY29ubmVjdFByb21pc2VzID0gQXJyYXkuZnJvbSh0aGlzLnRyYW5zcG9ydHMudmFsdWVzKCkpXG4gICAgICAubWFwKHRyYW5zcG9ydCA9PiB0cmFuc3BvcnQuZGlzY29ubmVjdCgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgdGhpcy5kZWJ1ZyhgRXJyb3IgZGlzY29ubmVjdGluZyB0cmFuc3BvcnQgJHt0cmFuc3BvcnQudHlwZX06YCwgZXJyb3IpO1xuICAgICAgfSkpO1xuICAgIFxuICAgIGF3YWl0IFByb21pc2UuYWxsKGRpc2Nvbm5lY3RQcm9taXNlcyk7XG4gICAgdGhpcy5hY3RpdmVUcmFuc3BvcnQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXRBY3RpdmVUcmFuc3BvcnQoKTogRGV2UGlwZVRyYW5zcG9ydCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlVHJhbnNwb3J0O1xuICB9XG5cbiAgZ2V0QXZhaWxhYmxlVHJhbnNwb3J0cygpOiBEZXZQaXBlVHJhbnNwb3J0W10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudHJhbnNwb3J0cy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIodHJhbnNwb3J0ID0+IHRyYW5zcG9ydC5pc0F2YWlsYWJsZSgpKTtcbiAgfVxuXG4gIGdldFRyYW5zcG9ydEhlYWx0aCgpOiBNYXA8VHJhbnNwb3J0VHlwZSwgSGVhbHRoQXNzZXNzbWVudD4ge1xuICAgIGNvbnN0IGFzc2Vzc21lbnRzID0gbmV3IE1hcDxUcmFuc3BvcnRUeXBlLCBIZWFsdGhBc3Nlc3NtZW50PigpO1xuICAgIFxuICAgIGNvbnN0IHRyYW5zcG9ydHMgPSBBcnJheS5mcm9tKHRoaXMudHJhbnNwb3J0cy52YWx1ZXMoKSk7XG4gICAgZm9yIChjb25zdCB0cmFuc3BvcnQgb2YgdHJhbnNwb3J0cykge1xuICAgICAgYXNzZXNzbWVudHMuc2V0KHRyYW5zcG9ydC50eXBlLCB0aGlzLmhlYWx0aE1vbml0b3IuYXNzZXNzVHJhbnNwb3J0SGVhbHRoKHRyYW5zcG9ydCkpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXNzZXNzbWVudHM7XG4gIH1cblxuICAvLyBFdmVudCBzeXN0ZW1cbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmV2ZW50TGlzdGVuZXJzLmhhcyhldmVudCkpIHtcbiAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KSEucHVzaChsaXN0ZW5lcik7XG4gIH1cblxuICBvZmYoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlbWl0KGV2ZW50OiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbGlzdGVuZXIoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5kZWJ1ZyhgRXJyb3IgaW4gdHJhbnNwb3J0IG1hbmFnZXIgZXZlbnQgbGlzdGVuZXIgZm9yICR7ZXZlbnR9OmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29uZmlnLmRlYnVnKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1RyYW5zcG9ydE1hbmFnZXJdICR7bWVzc2FnZX1gLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogVHJhbnNwb3J0RGFzaGJvYXJkIC0gUmVhbC10aW1lIHRyYW5zcG9ydCBzdGF0dXMgbW9uaXRvcmluZyBhbmQgbWFuYWdlbWVudFxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVHJhbnNwb3J0TWFuYWdlciwgVHJhbnNwb3J0TWFuYWdlckNvbmZpZyB9IGZyb20gJy4uL2RldnBpcGUvVHJhbnNwb3J0TWFuYWdlcic7XG5pbXBvcnQgeyBUcmFuc3BvcnRUeXBlLCBUcmFuc3BvcnRFdmVudCB9IGZyb20gJy4uL2RldnBpcGUvdHJhbnNwb3J0cy9EZXZQaXBlVHJhbnNwb3J0JztcbmltcG9ydCBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhc2hib2FyZENvbmZpZyB7XG4gIHVwZGF0ZUludGVydmFsOiBudW1iZXI7XG4gIHNob3dBZHZhbmNlZE1ldHJpY3M6IGJvb2xlYW47XG4gIGVuYWJsZVJlYWxUaW1lVXBkYXRlczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc3BvcnRTdGF0dXNEYXRhIHtcbiAgdHlwZTogVHJhbnNwb3J0VHlwZTtcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAnZGVncmFkZWQnIHwgJ2ZhaWxpbmcnIHwgJ2Rpc2Nvbm5lY3RlZCc7XG4gIGxhc3RSZXNwb25zZVRpbWU6IG51bWJlcjtcbiAgc3VjY2Vzc1JhdGU6IG51bWJlcjtcbiAgZXJyb3JDb3VudDogbnVtYmVyO1xuICBsYXN0RXJyb3I/OiBzdHJpbmc7XG4gIGNhcGFiaWxpdGllczogc3RyaW5nW107XG4gIGNvbm5lY3Rpb25TdGF0ZTogJ2Nvbm5lY3RlZCcgfCAnY29ubmVjdGluZycgfCAnZGlzY29ubmVjdGVkJyB8ICdlcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3lzdGVtSGVhbHRoIHtcbiAgb3ZlcmFsbDogJ2V4Y2VsbGVudCcgfCAnZ29vZCcgfCAnZmFpcicgfCAncG9vcicgfCAnY3JpdGljYWwnO1xuICBhY3RpdmVUcmFuc3BvcnQ6IFRyYW5zcG9ydFR5cGU7XG4gIGF2YWlsYWJsZVRyYW5zcG9ydHM6IFRyYW5zcG9ydFR5cGVbXTtcbiAgbGFzdEhlYWx0aENoZWNrOiBEYXRlO1xuICB1cHRpbWU6IG51bWJlcjtcbiAgdG90YWxSZXF1ZXN0czogbnVtYmVyO1xuICB0b3RhbEVycm9yczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlTWV0cmljcyB7XG4gIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IG51bWJlcjtcbiAgcDk1UmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gIHJlcXVlc3RzUGVyTWludXRlOiBudW1iZXI7XG4gIGVycm9yUmF0ZTogbnVtYmVyO1xuICB0cmFuc3BvcnREaXN0cmlidXRpb246IFJlY29yZDxUcmFuc3BvcnRUeXBlLCBudW1iZXI+O1xuICB0cmVuZHM6IHtcbiAgICByZXNwb25zZVRpbWU6IG51bWJlcltdO1xuICAgIGVycm9yUmF0ZTogbnVtYmVyW107XG4gICAgdGhyb3VnaHB1dDogbnVtYmVyW107XG4gICAgdGltZXN0YW1wczogRGF0ZVtdO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgVHJhbnNwb3J0RGFzaGJvYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdHJhbnNwb3J0TWFuYWdlcj86IFRyYW5zcG9ydE1hbmFnZXI7XG4gIHByaXZhdGUgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGNvbmZpZzogRGFzaGJvYXJkQ29uZmlnO1xuICBcbiAgcHJpdmF0ZSB1cGRhdGVJbnRlcnZhbD86IG51bWJlcjtcbiAgcHJpdmF0ZSBzdGF0dXNDYXJkczogTWFwPFRyYW5zcG9ydFR5cGUsIEhUTUxFbGVtZW50PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtZXRyaWNzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgc3lzdGVtSGVhbHRoQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgY2hhcnRzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIFxuICBwcml2YXRlIGN1cnJlbnRIZWFsdGg/OiBTeXN0ZW1IZWFsdGg7XG4gIHByaXZhdGUgY3VycmVudE1ldHJpY3M/OiBQZXJmb3JtYW5jZU1ldHJpY3M7XG4gIHByaXZhdGUgaXNSZWFsVGltZUVuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgXG4gICAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luLCBcbiAgICBjb25maWc6IERhc2hib2FyZENvbmZpZyA9IHtcbiAgICAgIHVwZGF0ZUludGVydmFsOiAyMDAwLFxuICAgICAgc2hvd0FkdmFuY2VkTWV0cmljczogdHJ1ZSxcbiAgICAgIGVuYWJsZVJlYWxUaW1lVXBkYXRlczogdHJ1ZVxuICAgIH1cbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgLy8gVHJhbnNwb3J0IG1hbmFnZXIgd2lsbCBiZSBpbml0aWFsaXplZCB3aGVuIGF2YWlsYWJsZVxuICAgIHRoaXMuaXNSZWFsVGltZUVuYWJsZWQgPSBjb25maWcuZW5hYmxlUmVhbFRpbWVVcGRhdGVzO1xuICB9XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZURhc2hib2FyZCgpO1xuICAgIFxuICAgIGlmICh0aGlzLmlzUmVhbFRpbWVFbmFibGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0UmVhbFRpbWVVcGRhdGVzKCk7XG4gICAgICB0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSW5pdGlhbCBsb2FkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVEYXNoYm9hcmQoKTtcbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIHRoaXMuc3RvcFJlYWxUaW1lVXBkYXRlcygpO1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURhc2hib2FyZCgpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygndHJhbnNwb3J0LWRhc2hib2FyZCcpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBoZWFkZXJcbiAgICB0aGlzLmNyZWF0ZUhlYWRlcigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBzeXN0ZW0gaGVhbHRoIG92ZXJ2aWV3XG4gICAgdGhpcy5jcmVhdGVTeXN0ZW1IZWFsdGhTZWN0aW9uKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRyYW5zcG9ydCBzdGF0dXMgY2FyZHNcbiAgICB0aGlzLmNyZWF0ZVRyYW5zcG9ydFN0YXR1c1NlY3Rpb24oKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgIHRoaXMuY3JlYXRlUGVyZm9ybWFuY2VNZXRyaWNzU2VjdGlvbigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBjaGFydHMgc2VjdGlvblxuICAgIHRoaXMuY3JlYXRlQ2hhcnRzU2VjdGlvbigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBjb250cm9sc1xuICAgIHRoaXMuY3JlYXRlQ29udHJvbHNTZWN0aW9uKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUhlYWRlcigpIHtcbiAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdignZGFzaGJvYXJkLWhlYWRlcicpO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUcmFuc3BvcnQgRGFzaGJvYXJkJyB9KTtcbiAgICBcbiAgICBjb25zdCBsYXN0VXBkYXRlID0gaGVhZGVyLmNyZWF0ZURpdignbGFzdC11cGRhdGUnKTtcbiAgICBsYXN0VXBkYXRlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnTGFzdCB1cGRhdGVkOiAnLCBjbHM6ICdsYWJlbCcgfSk7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbGFzdFVwZGF0ZS5jcmVhdGVTcGFuKHsgY2xzOiAndGltZXN0YW1wJyB9KTtcbiAgICB0aW1lc3RhbXAudGV4dENvbnRlbnQgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xuICAgIFxuICAgIC8vIFJlYWwtdGltZSBpbmRpY2F0b3JcbiAgICBjb25zdCBpbmRpY2F0b3IgPSBoZWFkZXIuY3JlYXRlRGl2KCdyZWFsdGltZS1pbmRpY2F0b3InKTtcbiAgICBpZiAodGhpcy5pc1JlYWxUaW1lRW5hYmxlZCkge1xuICAgICAgaW5kaWNhdG9yLmNyZWF0ZVNwYW4oeyB0ZXh0OiAn8J+foiBSZWFsLXRpbWUnLCBjbHM6ICdyZWFsdGltZS1hY3RpdmUnIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmRpY2F0b3IuY3JlYXRlU3Bhbih7IHRleHQ6ICfimqogTWFudWFsIHJlZnJlc2gnLCBjbHM6ICdyZWFsdGltZS1pbmFjdGl2ZScgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTeXN0ZW1IZWFsdGhTZWN0aW9uKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdignc3lzdGVtLWhlYWx0aC1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdTeXN0ZW0gSGVhbHRoJyB9KTtcbiAgICBcbiAgICB0aGlzLnN5c3RlbUhlYWx0aENvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdzeXN0ZW0taGVhbHRoLWNvbnRhaW5lcicpO1xuICAgIFxuICAgIC8vIFBsYWNlaG9sZGVyIGNvbnRlbnRcbiAgICB0aGlzLnJlbmRlclN5c3RlbUhlYWx0aFBsYWNlaG9sZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRyYW5zcG9ydFN0YXR1c1NlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0cmFuc3BvcnQtc3RhdHVzLXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1RyYW5zcG9ydCBTdGF0dXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IGNhcmRzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3RyYW5zcG9ydC1jYXJkcy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY2FyZHMgZm9yIGFsbCBzdXBwb3J0ZWQgdHJhbnNwb3J0IHR5cGVzXG4gICAgY29uc3Qgc3VwcG9ydGVkVHJhbnNwb3J0cyA9IFtUcmFuc3BvcnRUeXBlLkhUVFAsIFRyYW5zcG9ydFR5cGUuV0VCU09DS0VULCBUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU1dO1xuICAgIFxuICAgIHN1cHBvcnRlZFRyYW5zcG9ydHMuZm9yRWFjaCh0cmFuc3BvcnRUeXBlID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZVRyYW5zcG9ydENhcmQoY2FyZHNDb250YWluZXIsIHRyYW5zcG9ydFR5cGUpO1xuICAgICAgdGhpcy5zdGF0dXNDYXJkcy5zZXQodHJhbnNwb3J0VHlwZSwgY2FyZCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRyYW5zcG9ydENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdHJhbnNwb3J0VHlwZTogVHJhbnNwb3J0VHlwZSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdigndHJhbnNwb3J0LXN0YXR1cy1jYXJkJyk7XG4gICAgY2FyZC5hZGRDbGFzcyhgdHJhbnNwb3J0LSR7dHJhbnNwb3J0VHlwZX1gKTtcbiAgICBjYXJkLmFkZENsYXNzKCdzdGF0dXMtdW5rbm93bicpO1xuICAgIFxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KCdjYXJkLWhlYWRlcicpO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6IHRyYW5zcG9ydFR5cGUudG9VcHBlckNhc2UoKSB9KTtcbiAgICBcbiAgICBjb25zdCBzdGF0dXNCYWRnZSA9IGhlYWRlci5jcmVhdGVEaXYoJ3N0YXR1cy1iYWRnZScpO1xuICAgIHN0YXR1c0JhZGdlLnRleHRDb250ZW50ID0gJ1Vua25vd24nO1xuICAgIFxuICAgIC8vIE1ldHJpY3NcbiAgICBjb25zdCBtZXRyaWNzID0gY2FyZC5jcmVhdGVEaXYoJ2NhcmQtbWV0cmljcycpO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlVGltZSA9IG1ldHJpY3MuY3JlYXRlRGl2KCdtZXRyaWMnKTtcbiAgICByZXNwb25zZVRpbWUuY3JlYXRlU3Bhbih7IHRleHQ6ICdSZXNwb25zZSBUaW1lJywgY2xzOiAnbWV0cmljLWxhYmVsJyB9KTtcbiAgICByZXNwb25zZVRpbWUuY3JlYXRlU3Bhbih7IHRleHQ6ICctLScsIGNsczogJ21ldHJpYy12YWx1ZSByZXNwb25zZS10aW1lJyB9KTtcbiAgICBcbiAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IG1ldHJpY3MuY3JlYXRlRGl2KCdtZXRyaWMnKTtcbiAgICBzdWNjZXNzUmF0ZS5jcmVhdGVTcGFuKHsgdGV4dDogJ1N1Y2Nlc3MgUmF0ZScsIGNsczogJ21ldHJpYy1sYWJlbCcgfSk7XG4gICAgc3VjY2Vzc1JhdGUuY3JlYXRlU3Bhbih7IHRleHQ6ICctLScsIGNsczogJ21ldHJpYy12YWx1ZSBzdWNjZXNzLXJhdGUnIH0pO1xuICAgIFxuICAgIGNvbnN0IGVycm9yQ291bnQgPSBtZXRyaWNzLmNyZWF0ZURpdignbWV0cmljJyk7XG4gICAgZXJyb3JDb3VudC5jcmVhdGVTcGFuKHsgdGV4dDogJ0Vycm9ycycsIGNsczogJ21ldHJpYy1sYWJlbCcgfSk7XG4gICAgZXJyb3JDb3VudC5jcmVhdGVTcGFuKHsgdGV4dDogJy0tJywgY2xzOiAnbWV0cmljLXZhbHVlIGVycm9yLWNvdW50JyB9KTtcbiAgICBcbiAgICAvLyBDb25uZWN0aW9uIHN0YXRlXG4gICAgY29uc3QgY29ubmVjdGlvbiA9IGNhcmQuY3JlYXRlRGl2KCdjb25uZWN0aW9uLXN0YXRlJyk7XG4gICAgY29ubmVjdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogJ0Rpc2Nvbm5lY3RlZCcsIGNsczogJ2Nvbm5lY3Rpb24tc3RhdHVzJyB9KTtcbiAgICBcbiAgICAvLyBBY3Rpb25zXG4gICAgY29uc3QgYWN0aW9ucyA9IGNhcmQuY3JlYXRlRGl2KCdjYXJkLWFjdGlvbnMnKTtcbiAgICBcbiAgICBjb25zdCB0ZXN0QnV0dG9uID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnVGVzdCcsIGNsczogJ21vZC1tdXRlZCcgfSk7XG4gICAgdGVzdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50ZXN0VHJhbnNwb3J0KHRyYW5zcG9ydFR5cGUpO1xuICAgIFxuICAgIGNvbnN0IHN3aXRjaEJ1dHRvbiA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1N3aXRjaCBUbycsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIHN3aXRjaEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zd2l0Y2hUb1RyYW5zcG9ydCh0cmFuc3BvcnRUeXBlKTtcbiAgICBcbiAgICByZXR1cm4gY2FyZDtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUGVyZm9ybWFuY2VNZXRyaWNzU2VjdGlvbigpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3BlcmZvcm1hbmNlLW1ldHJpY3Mtc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUGVyZm9ybWFuY2UgTWV0cmljcycgfSk7XG4gICAgXG4gICAgdGhpcy5tZXRyaWNzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ21ldHJpY3MtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gUGxhY2Vob2xkZXIgY29udGVudFxuICAgIHRoaXMucmVuZGVyUGVyZm9ybWFuY2VNZXRyaWNzUGxhY2Vob2xkZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ2hhcnRzU2VjdGlvbigpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2NoYXJ0cy1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdQZXJmb3JtYW5jZSBUcmVuZHMnIH0pO1xuICAgIFxuICAgIHRoaXMuY2hhcnRzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ2NoYXJ0cy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBGb3Igbm93LCBjcmVhdGUgcGxhY2Vob2xkZXIgY2hhcnRzXG4gICAgdGhpcy5yZW5kZXJDaGFydHNQbGFjZWhvbGRlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb250cm9sc1NlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjb250cm9scy1zZWN0aW9uJyk7XG4gICAgXG4gICAgY29uc3QgY29udHJvbHMgPSBzZWN0aW9uLmNyZWF0ZURpdignZGFzaGJvYXJkLWNvbnRyb2xzJyk7XG4gICAgXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gY29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ/CflIQgUmVmcmVzaCcsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubWFudWFsUmVmcmVzaCgpO1xuICAgIFxuICAgIC8vIEV4cG9ydCBidXR0b25cbiAgICBjb25zdCBleHBvcnRCdXR0b24gPSBjb250cm9scy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAn8J+TiiBFeHBvcnQgRGF0YScsIGNsczogJ21vZC1tdXRlZCcgfSk7XG4gICAgZXhwb3J0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmV4cG9ydERhdGEoKTtcbiAgICBcbiAgICAvLyBTZXR0aW5ncyBidXR0b25cbiAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGNvbnRyb2xzLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICfimpnvuI8gU2V0dGluZ3MnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgIHNldHRpbmdzQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9wZW5EYXNoYm9hcmRTZXR0aW5ncygpO1xuICAgIFxuICAgIC8vIFJlYWwtdGltZSB0b2dnbGVcbiAgICBjb25zdCByZWFsdGltZVRvZ2dsZSA9IGNvbnRyb2xzLmNyZWF0ZURpdigncmVhbHRpbWUtdG9nZ2xlJyk7XG4gICAgcmVhbHRpbWVUb2dnbGUuY3JlYXRlU3Bhbih7IHRleHQ6ICdSZWFsLXRpbWUgdXBkYXRlczogJyB9KTtcbiAgICBcbiAgICBjb25zdCB0b2dnbGUgPSByZWFsdGltZVRvZ2dsZS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgdG9nZ2xlLmNoZWNrZWQgPSB0aGlzLmlzUmVhbFRpbWVFbmFibGVkO1xuICAgIHRvZ2dsZS5vbmNoYW5nZSA9ICgpID0+IHRoaXMudG9nZ2xlUmVhbFRpbWVVcGRhdGVzKHRvZ2dsZS5jaGVja2VkKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlRGFzaGJvYXJkKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBVcGRhdGUgc3lzdGVtIGhlYWx0aFxuICAgICAgdGhpcy5jdXJyZW50SGVhbHRoID0gYXdhaXQgdGhpcy5nZXRTeXN0ZW1IZWFsdGgoKTtcbiAgICAgIHRoaXMucmVuZGVyU3lzdGVtSGVhbHRoKHRoaXMuY3VycmVudEhlYWx0aCk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0cmFuc3BvcnQgc3RhdHVzZXNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlVHJhbnNwb3J0U3RhdHVzZXMoKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHBlcmZvcm1hbmNlIG1ldHJpY3NcbiAgICAgIHRoaXMuY3VycmVudE1ldHJpY3MgPSBhd2FpdCB0aGlzLmdldFBlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgdGhpcy5yZW5kZXJQZXJmb3JtYW5jZU1ldHJpY3ModGhpcy5jdXJyZW50TWV0cmljcyk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aW1lc3RhbXBcbiAgICAgIHRoaXMudXBkYXRlVGltZXN0YW1wKCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBkYXNoYm9hcmQ6JywgZXJyb3IpO1xuICAgICAgdGhpcy5yZW5kZXJFcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBkYXNoYm9hcmQgZGF0YScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0U3lzdGVtSGVhbHRoKCk6IFByb21pc2U8U3lzdGVtSGVhbHRoPiB7XG4gICAgLy8gR2V0IGhlYWx0aCBmcm9tIHRyYW5zcG9ydCBtYW5hZ2VyXG4gICAgY29uc3QgdHJhbnNwb3J0TWFuYWdlciA9IHRoaXMudHJhbnNwb3J0TWFuYWdlcjtcbiAgICBcbiAgICAvLyBTaW11bGF0ZSBnZXR0aW5nIGNvbXByZWhlbnNpdmUgaGVhbHRoIGRhdGFcbiAgICBjb25zdCBoZWFsdGg6IFN5c3RlbUhlYWx0aCA9IHtcbiAgICAgIG92ZXJhbGw6ICdnb29kJyxcbiAgICAgIGFjdGl2ZVRyYW5zcG9ydDogJ2h0dHAnIGFzIFRyYW5zcG9ydFR5cGUsXG4gICAgICBhdmFpbGFibGVUcmFuc3BvcnRzOiBbJ2h0dHAnLCAnd2Vic29ja2V0J10gYXMgVHJhbnNwb3J0VHlwZVtdLFxuICAgICAgbGFzdEhlYWx0aENoZWNrOiBuZXcgRGF0ZSgpLFxuICAgICAgdXB0aW1lOiBEYXRlLm5vdygpIC0gKHRoaXMucGx1Z2luLmFwcCBhcyBhbnkpLnZhdWx0LmFkYXB0ZXIuc3RhcnRlZCB8fCAwLFxuICAgICAgdG90YWxSZXF1ZXN0czogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApLFxuICAgICAgdG90YWxFcnJvcnM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcbiAgICB9O1xuICAgIFxuICAgIC8vIERldGVybWluZSBvdmVyYWxsIGhlYWx0aCBiYXNlZCBvbiBlcnJvciByYXRlXG4gICAgY29uc3QgZXJyb3JSYXRlID0gaGVhbHRoLnRvdGFsRXJyb3JzIC8gaGVhbHRoLnRvdGFsUmVxdWVzdHM7XG4gICAgaWYgKGVycm9yUmF0ZSA8IDAuMDEpIHtcbiAgICAgIGhlYWx0aC5vdmVyYWxsID0gJ2V4Y2VsbGVudCc7XG4gICAgfSBlbHNlIGlmIChlcnJvclJhdGUgPCAwLjA1KSB7XG4gICAgICBoZWFsdGgub3ZlcmFsbCA9ICdnb29kJztcbiAgICB9IGVsc2UgaWYgKGVycm9yUmF0ZSA8IDAuMSkge1xuICAgICAgaGVhbHRoLm92ZXJhbGwgPSAnZmFpcic7XG4gICAgfSBlbHNlIGlmIChlcnJvclJhdGUgPCAwLjIpIHtcbiAgICAgIGhlYWx0aC5vdmVyYWxsID0gJ3Bvb3InO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFsdGgub3ZlcmFsbCA9ICdjcml0aWNhbCc7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBoZWFsdGg7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFBlcmZvcm1hbmNlTWV0cmljcygpOiBQcm9taXNlPFBlcmZvcm1hbmNlTWV0cmljcz4ge1xuICAgIC8vIEdldCBtZXRyaWNzIGZyb20gdHJhbnNwb3J0IG1hbmFnZXJcbiAgICBjb25zdCBtZXRyaWNzOiBQZXJmb3JtYW5jZU1ldHJpY3MgPSB7XG4gICAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiAxNTAgKyBNYXRoLnJhbmRvbSgpICogMTAwLFxuICAgICAgcDk1UmVzcG9uc2VUaW1lOiAzMDAgKyBNYXRoLnJhbmRvbSgpICogMjAwLFxuICAgICAgcmVxdWVzdHNQZXJNaW51dGU6IDEwMCArIE1hdGgucmFuZG9tKCkgKiA1MCxcbiAgICAgIGVycm9yUmF0ZTogTWF0aC5yYW5kb20oKSAqIDAuMDUsXG4gICAgICB0cmFuc3BvcnREaXN0cmlidXRpb246IHtcbiAgICAgICAgJ2h0dHAnOiAwLjcsXG4gICAgICAgICd3ZWJzb2NrZXQnOiAwLjI1LFxuICAgICAgICAnZmlsZXN5c3RlbSc6IDAuMDVcbiAgICAgIH0sXG4gICAgICB0cmVuZHM6IHtcbiAgICAgICAgcmVzcG9uc2VUaW1lOiB0aGlzLmdlbmVyYXRlVHJlbmREYXRhKDE1MCwgMjApLFxuICAgICAgICBlcnJvclJhdGU6IHRoaXMuZ2VuZXJhdGVUcmVuZERhdGEoMC4wMiwgMC4wMSksXG4gICAgICAgIHRocm91Z2hwdXQ6IHRoaXMuZ2VuZXJhdGVUcmVuZERhdGEoMTAwLCAyMCksXG4gICAgICAgIHRpbWVzdGFtcHM6IHRoaXMuZ2VuZXJhdGVUaW1lc3RhbXBzKDIwKVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIG1ldHJpY3M7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlVHJlbmREYXRhKGJhc2VsaW5lOiBudW1iZXIsIHZhcmlhbmNlOiBudW1iZXIsIHBvaW50czogbnVtYmVyID0gMjApOiBudW1iZXJbXSB7XG4gICAgY29uc3QgZGF0YTogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50czsgaSsrKSB7XG4gICAgICBkYXRhLnB1c2goYmFzZWxpbmUgKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB2YXJpYW5jZSAqIDIpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVUaW1lc3RhbXBzKHBvaW50czogbnVtYmVyKTogRGF0ZVtdIHtcbiAgICBjb25zdCB0aW1lc3RhbXBzOiBEYXRlW10gPSBbXTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGZvciAobGV0IGkgPSBwb2ludHMgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGltZXN0YW1wcy5wdXNoKG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSBpICogNjAwMDApKTsgLy8gMSBtaW51dGUgaW50ZXJ2YWxzXG4gICAgfVxuICAgIHJldHVybiB0aW1lc3RhbXBzO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVUcmFuc3BvcnRTdGF0dXNlcygpIHtcbiAgICBjb25zdCBzdXBwb3J0ZWRUcmFuc3BvcnRzID0gW1RyYW5zcG9ydFR5cGUuSFRUUCwgVHJhbnNwb3J0VHlwZS5XRUJTT0NLRVQsIFRyYW5zcG9ydFR5cGUuRklMRVNZU1RFTV07XG4gICAgXG4gICAgZm9yIChjb25zdCB0cmFuc3BvcnRUeXBlIG9mIHN1cHBvcnRlZFRyYW5zcG9ydHMpIHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IHRoaXMuZ2V0VHJhbnNwb3J0U3RhdHVzKHRyYW5zcG9ydFR5cGUpO1xuICAgICAgdGhpcy51cGRhdGVUcmFuc3BvcnRDYXJkKHRyYW5zcG9ydFR5cGUsIHN0YXR1cyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRUcmFuc3BvcnRTdGF0dXModHJhbnNwb3J0VHlwZTogVHJhbnNwb3J0VHlwZSk6IFByb21pc2U8VHJhbnNwb3J0U3RhdHVzRGF0YT4ge1xuICAgIC8vIFNpbXVsYXRlIGdldHRpbmcgdHJhbnNwb3J0IHN0YXR1c1xuICAgIGNvbnN0IGlzQWN0aXZlID0gTWF0aC5yYW5kb20oKSA+IDAuMjsgLy8gODAlIGNoYW5jZSBvZiBiZWluZyBhY3RpdmVcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSAxMDAgKyBNYXRoLnJhbmRvbSgpICogMjAwO1xuICAgIGNvbnN0IHN1Y2Nlc3NSYXRlID0gMC45ICsgTWF0aC5yYW5kb20oKSAqIDAuMTtcbiAgICBcbiAgICBjb25zdCBzdGF0dXM6IFRyYW5zcG9ydFN0YXR1c0RhdGEgPSB7XG4gICAgICB0eXBlOiB0cmFuc3BvcnRUeXBlLFxuICAgICAgc3RhdHVzOiBpc0FjdGl2ZSA/IChzdWNjZXNzUmF0ZSA+IDAuOTUgPyAnaGVhbHRoeScgOiAnZGVncmFkZWQnKSA6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgbGFzdFJlc3BvbnNlVGltZTogcmVzcG9uc2VUaW1lLFxuICAgICAgc3VjY2Vzc1JhdGU6IHN1Y2Nlc3NSYXRlLFxuICAgICAgZXJyb3JDb3VudDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApLFxuICAgICAgY2FwYWJpbGl0aWVzOiB0aGlzLmdldFRyYW5zcG9ydENhcGFiaWxpdGllcyh0cmFuc3BvcnRUeXBlKSxcbiAgICAgIGNvbm5lY3Rpb25TdGF0ZTogaXNBY3RpdmUgPyAnY29ubmVjdGVkJyA6ICdkaXNjb25uZWN0ZWQnXG4gICAgfTtcbiAgICBcbiAgICBpZiAoIWlzQWN0aXZlKSB7XG4gICAgICBzdGF0dXMubGFzdEVycm9yID0gJ0Nvbm5lY3Rpb24gdGltZW91dCc7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBzdGF0dXM7XG4gIH1cblxuICBwcml2YXRlIGdldFRyYW5zcG9ydENhcGFiaWxpdGllcyh0cmFuc3BvcnRUeXBlOiBUcmFuc3BvcnRUeXBlKTogc3RyaW5nW10ge1xuICAgIHN3aXRjaCAodHJhbnNwb3J0VHlwZSkge1xuICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLkhUVFA6XG4gICAgICAgIHJldHVybiBbJ1JFU1RmdWwgQVBJJywgJ0Nvbm5lY3Rpb24gUG9vbGluZycsICdSZXRyeSBMb2dpYyddO1xuICAgICAgY2FzZSBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVDpcbiAgICAgICAgcmV0dXJuIFsnUmVhbC10aW1lJywgJ0JpZGlyZWN0aW9uYWwnLCAnQXV0by1yZWNvbm5lY3QnXTtcbiAgICAgIGNhc2UgVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNOlxuICAgICAgICByZXR1cm4gWydMb2NhbCBTdG9yYWdlJywgJ0ZpbGUgTG9ja2luZycsICdPZmZsaW5lIFN1cHBvcnQnXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRyYW5zcG9ydENhcmQodHJhbnNwb3J0VHlwZTogVHJhbnNwb3J0VHlwZSwgc3RhdHVzOiBUcmFuc3BvcnRTdGF0dXNEYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IHRoaXMuc3RhdHVzQ2FyZHMuZ2V0KHRyYW5zcG9ydFR5cGUpO1xuICAgIGlmICghY2FyZCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgY2xhc3NcbiAgICBjYXJkLmNsYXNzTmFtZSA9IGB0cmFuc3BvcnQtc3RhdHVzLWNhcmQgdHJhbnNwb3J0LSR7dHJhbnNwb3J0VHlwZX0gc3RhdHVzLSR7c3RhdHVzLnN0YXR1c31gO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgYmFkZ2VcbiAgICBjb25zdCBzdGF0dXNCYWRnZSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnN0YXR1cy1iYWRnZScpIGFzIEhUTUxFbGVtZW50O1xuICAgIHN0YXR1c0JhZGdlLnRleHRDb250ZW50ID0gc3RhdHVzLnN0YXR1cy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0YXR1cy5zdGF0dXMuc2xpY2UoMSk7XG4gICAgXG4gICAgLy8gVXBkYXRlIG1ldHJpY3NcbiAgICBjb25zdCByZXNwb25zZVRpbWVFbCA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJlc3BvbnNlLXRpbWUnKSBhcyBIVE1MRWxlbWVudDtcbiAgICByZXNwb25zZVRpbWVFbC50ZXh0Q29udGVudCA9IGAke3N0YXR1cy5sYXN0UmVzcG9uc2VUaW1lLnRvRml4ZWQoMCl9bXNgO1xuICAgIFxuICAgIGNvbnN0IHN1Y2Nlc3NSYXRlRWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5zdWNjZXNzLXJhdGUnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBzdWNjZXNzUmF0ZUVsLnRleHRDb250ZW50ID0gYCR7KHN0YXR1cy5zdWNjZXNzUmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lYDtcbiAgICBcbiAgICBjb25zdCBlcnJvckNvdW50RWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1jb3VudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGVycm9yQ291bnRFbC50ZXh0Q29udGVudCA9IHN0YXR1cy5lcnJvckNvdW50LnRvU3RyaW5nKCk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGNvbm5lY3Rpb24gc3RhdGVcbiAgICBjb25zdCBjb25uZWN0aW9uRWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jb25uZWN0aW9uLXN0YXR1cycpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbm5lY3Rpb25FbC50ZXh0Q29udGVudCA9IHN0YXR1cy5jb25uZWN0aW9uU3RhdGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdGF0dXMuY29ubmVjdGlvblN0YXRlLnNsaWNlKDEpO1xuICAgIGNvbm5lY3Rpb25FbC5jbGFzc05hbWUgPSBgY29ubmVjdGlvbi1zdGF0dXMgc3RhdGUtJHtzdGF0dXMuY29ubmVjdGlvblN0YXRlfWA7XG4gICAgXG4gICAgLy8gVXBkYXRlIGFjdGlvbiBidXR0b25zXG4gICAgY29uc3Qgc3dpdGNoQnV0dG9uID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcubW9kLWN0YScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHN3aXRjaEJ1dHRvbi5kaXNhYmxlZCA9IHN0YXR1cy5zdGF0dXMgPT09ICdmYWlsaW5nJyB8fCBzdGF0dXMuY29ubmVjdGlvblN0YXRlID09PSAnZGlzY29ubmVjdGVkJztcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU3lzdGVtSGVhbHRoKGhlYWx0aDogU3lzdGVtSGVhbHRoKSB7XG4gICAgdGhpcy5zeXN0ZW1IZWFsdGhDb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICBjb25zdCBoZWFsdGhHcmlkID0gdGhpcy5zeXN0ZW1IZWFsdGhDb250YWluZXIuY3JlYXRlRGl2KCdoZWFsdGgtZ3JpZCcpO1xuICAgIFxuICAgIC8vIE92ZXJhbGwgaGVhbHRoXG4gICAgY29uc3Qgb3ZlcmFsbEhlYWx0aCA9IGhlYWx0aEdyaWQuY3JlYXRlRGl2KCdoZWFsdGgtaXRlbSBvdmVyYWxsLWhlYWx0aCcpO1xuICAgIG92ZXJhbGxIZWFsdGguYWRkQ2xhc3MoYGhlYWx0aC0ke2hlYWx0aC5vdmVyYWxsfWApO1xuICAgIG92ZXJhbGxIZWFsdGguY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnT3ZlcmFsbCBIZWFsdGgnIH0pO1xuICAgIG92ZXJhbGxIZWFsdGguY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogaGVhbHRoLm92ZXJhbGwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBoZWFsdGgub3ZlcmFsbC5zbGljZSgxKSxcbiAgICAgIGNsczogJ2hlYWx0aC12YWx1ZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBY3RpdmUgdHJhbnNwb3J0XG4gICAgY29uc3QgYWN0aXZlVHJhbnNwb3J0ID0gaGVhbHRoR3JpZC5jcmVhdGVEaXYoJ2hlYWx0aC1pdGVtJyk7XG4gICAgYWN0aXZlVHJhbnNwb3J0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0FjdGl2ZSBUcmFuc3BvcnQnIH0pO1xuICAgIGFjdGl2ZVRyYW5zcG9ydC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICB0ZXh0OiBoZWFsdGguYWN0aXZlVHJhbnNwb3J0LnRvVXBwZXJDYXNlKCksXG4gICAgICBjbHM6ICdoZWFsdGgtdmFsdWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gVXB0aW1lXG4gICAgY29uc3QgdXB0aW1lID0gaGVhbHRoR3JpZC5jcmVhdGVEaXYoJ2hlYWx0aC1pdGVtJyk7XG4gICAgdXB0aW1lLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1VwdGltZScgfSk7XG4gICAgdXB0aW1lLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIHRleHQ6IHRoaXMuZm9ybWF0VXB0aW1lKGhlYWx0aC51cHRpbWUpLFxuICAgICAgY2xzOiAnaGVhbHRoLXZhbHVlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFRvdGFsIHJlcXVlc3RzXG4gICAgY29uc3QgcmVxdWVzdHMgPSBoZWFsdGhHcmlkLmNyZWF0ZURpdignaGVhbHRoLWl0ZW0nKTtcbiAgICByZXF1ZXN0cy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdUb3RhbCBSZXF1ZXN0cycgfSk7XG4gICAgcmVxdWVzdHMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogaGVhbHRoLnRvdGFsUmVxdWVzdHMudG9Mb2NhbGVTdHJpbmcoKSxcbiAgICAgIGNsczogJ2hlYWx0aC12YWx1ZSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBFcnJvciByYXRlXG4gICAgY29uc3QgZXJyb3JSYXRlID0gaGVhbHRoR3JpZC5jcmVhdGVEaXYoJ2hlYWx0aC1pdGVtJyk7XG4gICAgZXJyb3JSYXRlLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0Vycm9yIFJhdGUnIH0pO1xuICAgIGNvbnN0IHJhdGUgPSAoaGVhbHRoLnRvdGFsRXJyb3JzIC8gaGVhbHRoLnRvdGFsUmVxdWVzdHMgKiAxMDApO1xuICAgIGVycm9yUmF0ZS5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICB0ZXh0OiBgJHtyYXRlLnRvRml4ZWQoMil9JWAsXG4gICAgICBjbHM6ICdoZWFsdGgtdmFsdWUnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclBlcmZvcm1hbmNlTWV0cmljcyhtZXRyaWNzOiBQZXJmb3JtYW5jZU1ldHJpY3MpIHtcbiAgICB0aGlzLm1ldHJpY3NDb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICBjb25zdCBtZXRyaWNzR3JpZCA9IHRoaXMubWV0cmljc0NvbnRhaW5lci5jcmVhdGVEaXYoJ21ldHJpY3MtZ3JpZCcpO1xuICAgIFxuICAgIC8vIEF2ZXJhZ2UgcmVzcG9uc2UgdGltZVxuICAgIGNvbnN0IGF2Z1Jlc3BvbnNlID0gbWV0cmljc0dyaWQuY3JlYXRlRGl2KCdtZXRyaWMtaXRlbScpO1xuICAgIGF2Z1Jlc3BvbnNlLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0F2ZyBSZXNwb25zZSBUaW1lJyB9KTtcbiAgICBhdmdSZXNwb25zZS5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICB0ZXh0OiBgJHttZXRyaWNzLmF2ZXJhZ2VSZXNwb25zZVRpbWUudG9GaXhlZCgwKX1tc2AsXG4gICAgICBjbHM6ICdtZXRyaWMtdmFsdWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUDk1IHJlc3BvbnNlIHRpbWVcbiAgICBjb25zdCBwOTVSZXNwb25zZSA9IG1ldHJpY3NHcmlkLmNyZWF0ZURpdignbWV0cmljLWl0ZW0nKTtcbiAgICBwOTVSZXNwb25zZS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdQOTUgUmVzcG9uc2UgVGltZScgfSk7XG4gICAgcDk1UmVzcG9uc2UuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogYCR7bWV0cmljcy5wOTVSZXNwb25zZVRpbWUudG9GaXhlZCgwKX1tc2AsXG4gICAgICBjbHM6ICdtZXRyaWMtdmFsdWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVxdWVzdHMgcGVyIG1pbnV0ZVxuICAgIGNvbnN0IHJwbSA9IG1ldHJpY3NHcmlkLmNyZWF0ZURpdignbWV0cmljLWl0ZW0nKTtcbiAgICBycG0uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmVxdWVzdHMvTWluJyB9KTtcbiAgICBycG0uY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgdGV4dDogbWV0cmljcy5yZXF1ZXN0c1Blck1pbnV0ZS50b0ZpeGVkKDApLFxuICAgICAgY2xzOiAnbWV0cmljLXZhbHVlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEVycm9yIHJhdGVcbiAgICBjb25zdCBlcnJvclJhdGUgPSBtZXRyaWNzR3JpZC5jcmVhdGVEaXYoJ21ldHJpYy1pdGVtJyk7XG4gICAgZXJyb3JSYXRlLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0Vycm9yIFJhdGUnIH0pO1xuICAgIGVycm9yUmF0ZS5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICB0ZXh0OiBgJHsobWV0cmljcy5lcnJvclJhdGUgKiAxMDApLnRvRml4ZWQoMil9JWAsXG4gICAgICBjbHM6ICdtZXRyaWMtdmFsdWUnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gVHJhbnNwb3J0IGRpc3RyaWJ1dGlvblxuICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IHRoaXMubWV0cmljc0NvbnRhaW5lci5jcmVhdGVEaXYoJ3RyYW5zcG9ydC1kaXN0cmlidXRpb24nKTtcbiAgICBkaXN0cmlidXRpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnVHJhbnNwb3J0IFVzYWdlIERpc3RyaWJ1dGlvbicgfSk7XG4gICAgXG4gICAgY29uc3QgZGlzdHJpYnV0aW9uQmFycyA9IGRpc3RyaWJ1dGlvbi5jcmVhdGVEaXYoJ2Rpc3RyaWJ1dGlvbi1iYXJzJyk7XG4gICAgT2JqZWN0LmVudHJpZXMobWV0cmljcy50cmFuc3BvcnREaXN0cmlidXRpb24pLmZvckVhY2goKFt0cmFuc3BvcnQsIHBlcmNlbnRhZ2VdKSA9PiB7XG4gICAgICBjb25zdCBiYXIgPSBkaXN0cmlidXRpb25CYXJzLmNyZWF0ZURpdignZGlzdHJpYnV0aW9uLWJhcicpO1xuICAgICAgYmFyLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0cmFuc3BvcnQudG9VcHBlckNhc2UoKSwgY2xzOiAndHJhbnNwb3J0LWxhYmVsJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYmFyQ29udGFpbmVyID0gYmFyLmNyZWF0ZURpdignYmFyLWNvbnRhaW5lcicpO1xuICAgICAgY29uc3QgYmFyRmlsbCA9IGJhckNvbnRhaW5lci5jcmVhdGVEaXYoJ2Jhci1maWxsJyk7XG4gICAgICBiYXJGaWxsLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudGFnZSAqIDEwMH0lYDtcbiAgICAgIFxuICAgICAgYmFyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHsocGVyY2VudGFnZSAqIDEwMCkudG9GaXhlZCgxKX0lYCwgY2xzOiAncGVyY2VudGFnZS1sYWJlbCcgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN5c3RlbUhlYWx0aFBsYWNlaG9sZGVyKCkge1xuICAgIHRoaXMuc3lzdGVtSGVhbHRoQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdMb2FkaW5nIHN5c3RlbSBoZWFsdGggZGF0YS4uLicsXG4gICAgICBjbHM6ICdwbGFjZWhvbGRlci10ZXh0J1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQZXJmb3JtYW5jZU1ldHJpY3NQbGFjZWhvbGRlcigpIHtcbiAgICB0aGlzLm1ldHJpY3NDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0xvYWRpbmcgcGVyZm9ybWFuY2UgbWV0cmljcy4uLicsXG4gICAgICBjbHM6ICdwbGFjZWhvbGRlci10ZXh0J1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDaGFydHNQbGFjZWhvbGRlcigpIHtcbiAgICB0aGlzLmNoYXJ0c0NvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnUGVyZm9ybWFuY2UgY2hhcnRzIHdpbGwgYmUgZGlzcGxheWVkIGhlcmUnLFxuICAgICAgY2xzOiAncGxhY2Vob2xkZXItdGV4dCdcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRXJyb3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgY29uc3QgZXJyb3JFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdkYXNoYm9hcmQtZXJyb3InKTtcbiAgICBlcnJvckVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgRXJyb3I6ICR7bWVzc2FnZX1gLCBjbHM6ICdlcnJvci1tZXNzYWdlJyB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0VXB0aW1lKHVwdGltZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcih1cHRpbWUgLyAxMDAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKGhvdXJzIC8gMjQpO1xuICAgIFxuICAgIGlmIChkYXlzID4gMCkge1xuICAgICAgcmV0dXJuIGAke2RheXN9ZCAke2hvdXJzICUgMjR9aGA7XG4gICAgfSBlbHNlIGlmIChob3VycyA+IDApIHtcbiAgICAgIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlcyAlIDYwfW1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7bWludXRlc31tICR7c2Vjb25kcyAlIDYwfXNgO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVGltZXN0YW1wKCkge1xuICAgIGNvbnN0IHRpbWVzdGFtcEVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudGltZXN0YW1wJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHRpbWVzdGFtcEVsKSB7XG4gICAgICB0aW1lc3RhbXBFbC50ZXh0Q29udGVudCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydFJlYWxUaW1lVXBkYXRlcygpIHtcbiAgICBpZiAodGhpcy51cGRhdGVJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnVwZGF0ZUludGVydmFsKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZURhc2hib2FyZCgpO1xuICAgIH0sIHRoaXMuY29uZmlnLnVwZGF0ZUludGVydmFsKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RvcFJlYWxUaW1lVXBkYXRlcygpIHtcbiAgICBpZiAodGhpcy51cGRhdGVJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnVwZGF0ZUludGVydmFsKTtcbiAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIExpc3RlbiBmb3IgdHJhbnNwb3J0IGV2ZW50cyBpZiB0cmFuc3BvcnQgbWFuYWdlciBpcyBhdmFpbGFibGVcbiAgICBpZiAodGhpcy50cmFuc3BvcnRNYW5hZ2VyKSB7XG4gICAgICAvLyBOb3RlOiBBY3R1YWwgZXZlbnQgaGFuZGxpbmcgd2lsbCBkZXBlbmQgb24gdGhlIFRyYW5zcG9ydE1hbmFnZXIgaW1wbGVtZW50YXRpb25cbiAgICAgIC8vIEZvciBub3csIHdlJ2xsIHVzZSBhIHNpbXBsZXIgYXBwcm9hY2hcbiAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIHRyYW5zcG9ydCBldmVudCBsaXN0ZW5lcnMnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIFJlbW92ZSB0cmFuc3BvcnQgZXZlbnQgbGlzdGVuZXJzIGlmIG5lZWRlZFxuICAgIGlmICh0aGlzLnRyYW5zcG9ydE1hbmFnZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmluZyB0cmFuc3BvcnQgZXZlbnQgbGlzdGVuZXJzJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvblRyYW5zcG9ydFN3aXRjaGVkKGV2ZW50OiBhbnkpIHtcbiAgICBuZXcgTm90aWNlKGBUcmFuc3BvcnQgc3dpdGNoZWQgdG8gJHtldmVudC50cmFuc3BvcnQ/LnRvVXBwZXJDYXNlKCkgfHwgJ3Vua25vd24nfWApO1xuICAgIHRoaXMudXBkYXRlRGFzaGJvYXJkKCk7XG4gIH1cblxuICBwcml2YXRlIG9uSGVhbHRoQ2hhbmdlZChldmVudDogYW55KSB7XG4gICAgY29uc29sZS5sb2coJ0hlYWx0aCBjaGFuZ2VkOicsIGV2ZW50KTtcbiAgICB0aGlzLnVwZGF0ZURhc2hib2FyZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkVycm9yT2NjdXJyZWQoZXZlbnQ6IGFueSkge1xuICAgIGNvbnNvbGUud2FybignVHJhbnNwb3J0IGVycm9yIG9jY3VycmVkOicsIGV2ZW50KTtcbiAgICB0aGlzLnVwZGF0ZURhc2hib2FyZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVSZWFsVGltZVVwZGF0ZXMoZW5hYmxlZDogYm9vbGVhbikge1xuICAgIHRoaXMuaXNSZWFsVGltZUVuYWJsZWQgPSBlbmFibGVkO1xuICAgIHRoaXMuY29uZmlnLmVuYWJsZVJlYWxUaW1lVXBkYXRlcyA9IGVuYWJsZWQ7XG4gICAgXG4gICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRSZWFsVGltZVVwZGF0ZXMoKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1JlYWwtdGltZSB1cGRhdGVzIGVuYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdG9wUmVhbFRpbWVVcGRhdGVzKCk7XG4gICAgICBuZXcgTm90aWNlKCdSZWFsLXRpbWUgdXBkYXRlcyBkaXNhYmxlZCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgaW5kaWNhdG9yXG4gICAgY29uc3QgaW5kaWNhdG9yID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcucmVhbHRpbWUtaW5kaWNhdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGluZGljYXRvcikge1xuICAgICAgaW5kaWNhdG9yLmVtcHR5KCk7XG4gICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICBpbmRpY2F0b3IuY3JlYXRlU3Bhbih7IHRleHQ6ICfwn5+iIFJlYWwtdGltZScsIGNsczogJ3JlYWx0aW1lLWFjdGl2ZScgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRpY2F0b3IuY3JlYXRlU3Bhbih7IHRleHQ6ICfimqogTWFudWFsIHJlZnJlc2gnLCBjbHM6ICdyZWFsdGltZS1pbmFjdGl2ZScgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYW51YWxSZWZyZXNoKCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLm1vZC1jdGEnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBpZiAoYnV0dG9uKSB7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ/CflIQgUmVmcmVzaGluZy4uLic7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZURhc2hib2FyZCgpO1xuICAgICAgbmV3IE5vdGljZSgnRGFzaGJvYXJkIHJlZnJlc2hlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIHJlZnJlc2ggZGFzaGJvYXJkJyk7XG4gICAgICBjb25zb2xlLmVycm9yKCdNYW51YWwgcmVmcmVzaCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoYnV0dG9uKSB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAn8J+UhCBSZWZyZXNoJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RUcmFuc3BvcnQodHJhbnNwb3J0VHlwZTogVHJhbnNwb3J0VHlwZSkge1xuICAgIG5ldyBOb3RpY2UoYFRlc3RpbmcgJHt0cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnQuLi5gKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCB0aGUgc3BlY2lmaWMgdHJhbnNwb3J0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnBlcmZvcm1UcmFuc3BvcnRUZXN0KHRyYW5zcG9ydFR5cGUpO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZShg4pyFICR7dHJhbnNwb3J0VHlwZX0gdHJhbnNwb3J0IHRlc3Qgc3VjY2Vzc2Z1bGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShg4p2MICR7dHJhbnNwb3J0VHlwZX0gdHJhbnNwb3J0IHRlc3QgZmFpbGVkOiAke3Jlc3VsdC5lcnJvcn1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHRoZSBzcGVjaWZpYyBjYXJkXG4gICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLmdldFRyYW5zcG9ydFN0YXR1cyh0cmFuc3BvcnRUeXBlKTtcbiAgICAgIHRoaXMudXBkYXRlVHJhbnNwb3J0Q2FyZCh0cmFuc3BvcnRUeXBlLCBzdGF0dXMpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCAke3RyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydCB0ZXN0IGZhaWxlZGApO1xuICAgICAgY29uc29sZS5lcnJvcihgVHJhbnNwb3J0IHRlc3QgZmFpbGVkIGZvciAke3RyYW5zcG9ydFR5cGV9OmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBlcmZvcm1UcmFuc3BvcnRUZXN0KHRyYW5zcG9ydFR5cGU6IFRyYW5zcG9ydFR5cGUpOiBQcm9taXNlPHtzdWNjZXNzOiBib29sZWFuLCBlcnJvcj86IHN0cmluZ30+IHtcbiAgICAvLyBTaW11bGF0ZSB0cmFuc3BvcnQgdGVzdFxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG4gICAgXG4gICAgLy8gUmFuZG9tIHN1Y2Nlc3MvZmFpbHVyZSBmb3IgZGVtb25zdHJhdGlvblxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBNYXRoLnJhbmRvbSgpID4gMC4yO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzLFxuICAgICAgZXJyb3I6IHN1Y2Nlc3MgPyB1bmRlZmluZWQgOiAnQ29ubmVjdGlvbiB0aW1lb3V0J1xuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN3aXRjaFRvVHJhbnNwb3J0KHRyYW5zcG9ydFR5cGU6IFRyYW5zcG9ydFR5cGUpIHtcbiAgICBjb25zdCBjb25maXJtZWQgPSBjb25maXJtKGBTd2l0Y2ggdG8gJHt0cmFuc3BvcnRUeXBlfSB0cmFuc3BvcnQgYXMgcHJpbWFyeT9gKTtcbiAgICBpZiAoIWNvbmZpcm1lZCkgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBTd2l0Y2ggdHJhbnNwb3J0IHZpYSB0cmFuc3BvcnQgbWFuYWdlclxuICAgICAgLy8gYXdhaXQgdGhpcy50cmFuc3BvcnRNYW5hZ2VyLnN3aXRjaFByaW1hcnlUcmFuc3BvcnQodHJhbnNwb3J0VHlwZSk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYOKchSBTd2l0Y2hlZCB0byAke3RyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydGApO1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGVEYXNoYm9hcmQoKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGDinYwgRmFpbGVkIHRvIHN3aXRjaCB0byAke3RyYW5zcG9ydFR5cGV9IHRyYW5zcG9ydGApO1xuICAgICAgY29uc29sZS5lcnJvcignVHJhbnNwb3J0IHN3aXRjaCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZXhwb3J0RGF0YSgpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBzeXN0ZW1IZWFsdGg6IHRoaXMuY3VycmVudEhlYWx0aCxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczogdGhpcy5jdXJyZW50TWV0cmljcyxcbiAgICAgIGV4cG9ydGVkQnk6ICdWYXVsdFBpbG90IFRyYW5zcG9ydCBEYXNoYm9hcmQnXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGEuaHJlZiA9IHVybDtcbiAgICBhLmRvd25sb2FkID0gYHZhdWx0cGlsb3QtZGFzaGJvYXJkLSR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19Lmpzb25gO1xuICAgIGEuY2xpY2soKTtcbiAgICBcbiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgbmV3IE5vdGljZSgnRGFzaGJvYXJkIGRhdGEgZXhwb3J0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH1cblxuICBwcml2YXRlIG9wZW5EYXNoYm9hcmRTZXR0aW5ncygpIHtcbiAgICBuZXcgTm90aWNlKCdEYXNoYm9hcmQgc2V0dGluZ3Mgd2lsbCBvcGVuIGluIGEgZnV0dXJlIHVwZGF0ZScpO1xuICAgIC8vIFRPRE86IEltcGxlbWVudCBkYXNoYm9hcmQgc2V0dGluZ3MgbW9kYWxcbiAgfVxufVxuIiwiLyoqXG4gKiBBZHZhbmNlZFNldHRpbmdzIC0gVmlzdWFsIGNvbmZpZ3VyYXRpb24gaW50ZXJmYWNlIGZvciBWYXVsdFBpbG90XG4gKi9cblxuaW1wb3J0IHsgU2V0dGluZywgQ29tcG9uZW50LCBOb3RpY2UsIE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUcmFuc3BvcnRUeXBlIH0gZnJvbSAnLi4vZGV2cGlwZS90cmFuc3BvcnRzL0RldlBpcGVUcmFuc3BvcnQnO1xuaW1wb3J0IHsgVHJhbnNwb3J0TWFuYWdlckNvbmZpZyB9IGZyb20gJy4uL2RldnBpcGUvVHJhbnNwb3J0TWFuYWdlcic7XG5pbXBvcnQgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBBZHZhbmNlZFNldHRpbmdzQ29uZmlnIHtcbiAgc2hvd0V4cGVydE9wdGlvbnM6IGJvb2xlYW47XG4gIGVuYWJsZVJlYWxUaW1lVmFsaWRhdGlvbjogYm9vbGVhbjtcbiAgYWxsb3dJbXBvcnRFeHBvcnQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlndXJhdGlvblByb2ZpbGUge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNvbmZpZzogVmF1bHRQaWxvdENvbmZpZ3VyYXRpb247XG4gIGNyZWF0ZWQ6IERhdGU7XG4gIGxhc3RNb2RpZmllZDogRGF0ZTtcbiAgaXNEZWZhdWx0OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0UGlsb3RDb25maWd1cmF0aW9uIHtcbiAgdHJhbnNwb3J0OiB7XG4gICAgcHJpbWFyeVRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZTtcbiAgICBmYWxsYmFja0NoYWluOiBUcmFuc3BvcnRUeXBlW107XG4gICAgc2VsZWN0aW9uQ3JpdGVyaWE6IHtcbiAgICAgIGxhdGVuY3lXZWlnaHQ6IG51bWJlcjtcbiAgICAgIHJlbGlhYmlsaXR5V2VpZ2h0OiBudW1iZXI7XG4gICAgICBjYXBhYmlsaXR5V2VpZ2h0OiBudW1iZXI7XG4gICAgICBjb3N0V2VpZ2h0OiBudW1iZXI7XG4gICAgfTtcbiAgICB0aW1lb3V0czoge1xuICAgICAgY29ubmVjdGlvbjogbnVtYmVyO1xuICAgICAgcmVxdWVzdDogbnVtYmVyO1xuICAgICAgcmV0cnk6IG51bWJlcjtcbiAgICB9O1xuICAgIHJldHJ5UG9saWN5OiB7XG4gICAgICBtYXhBdHRlbXB0czogbnVtYmVyO1xuICAgICAgYmFja29mZk11bHRpcGxpZXI6IG51bWJlcjtcbiAgICAgIG1heEJhY2tvZmZUaW1lOiBudW1iZXI7XG4gICAgfTtcbiAgfTtcbiAgcGVyZm9ybWFuY2U6IHtcbiAgICBtb2RlOiAncGVyZm9ybWFuY2UnIHwgJ2JhbGFuY2VkJyB8ICdyZWxpYWJpbGl0eSc7XG4gICAgZW5hYmxlQ29ubmVjdGlvblBvb2xpbmc6IGJvb2xlYW47XG4gICAgbWF4Q29uY3VycmVudFJlcXVlc3RzOiBudW1iZXI7XG4gICAgZW5hYmxlQ29tcHJlc3Npb246IGJvb2xlYW47XG4gICAgZW5hYmxlQ2FjaGluZzogYm9vbGVhbjtcbiAgICBjYWNoZVNpemU6IG51bWJlcjtcbiAgfTtcbiAgbW9uaXRvcmluZzoge1xuICAgIGVuYWJsZUhlYWx0aENoZWNrczogYm9vbGVhbjtcbiAgICBoZWFsdGhDaGVja0ludGVydmFsOiBudW1iZXI7XG4gICAgZW5hYmxlTWV0cmljczogYm9vbGVhbjtcbiAgICBtZXRyaWNzUmV0ZW50aW9uOiBudW1iZXI7XG4gICAgZW5hYmxlUHJlZGljdGl2ZUFsZXJ0czogYm9vbGVhbjtcbiAgfTtcbiAgdWk6IHtcbiAgICB0aGVtZTogJ2F1dG8nIHwgJ2xpZ2h0JyB8ICdkYXJrJztcbiAgICBlbmFibGVBbmltYXRpb25zOiBib29sZWFuO1xuICAgIHNob3dBZHZhbmNlZE1ldHJpY3M6IGJvb2xlYW47XG4gICAgZGFzaGJvYXJkUmVmcmVzaFJhdGU6IG51bWJlcjtcbiAgICBlbmFibGVOb3RpZmljYXRpb25zOiBib29sZWFuO1xuICB9O1xuICBwcml2YWN5OiB7XG4gICAgZW5hYmxlQW5hbHl0aWNzOiBib29sZWFuO1xuICAgIHNoYXJlVXNhZ2VEYXRhOiBib29sZWFuO1xuICAgIGRhdGFSZXRlbnRpb25EYXlzOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlndXJhdGlvblZhbGlkYXRpb25SZXN1bHQge1xuICBpc1ZhbGlkOiBib29sZWFuO1xuICBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdO1xuICB3YXJuaW5nczogVmFsaWRhdGlvbldhcm5pbmdbXTtcbiAgZXN0aW1hdGVkSW1wYWN0OiB7XG4gICAgcGVyZm9ybWFuY2VDaGFuZ2U6IG51bWJlcjtcbiAgICByZWxpYWJpbGl0eUNoYW5nZTogbnVtYmVyO1xuICAgIHJlc291cmNlVXNhZ2U6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0aW9uRXJyb3Ige1xuICBmaWVsZDogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHNldmVyaXR5OiAnZXJyb3InIHwgJ3dhcm5pbmcnO1xuICBzdWdnZXN0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25XYXJuaW5nIHtcbiAgZmllbGQ6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBpbXBhY3Q6ICdsb3cnIHwgJ21lZGl1bScgfCAnaGlnaCc7XG4gIHJlY29tbWVuZGF0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgQWR2YW5jZWRTZXR0aW5ncyBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBjb25maWc6IEFkdmFuY2VkU2V0dGluZ3NDb25maWc7XG4gIHByaXZhdGUgY3VycmVudENvbmZpZ3VyYXRpb246IFZhdWx0UGlsb3RDb25maWd1cmF0aW9uO1xuICBwcml2YXRlIHByb2ZpbGVzOiBDb25maWd1cmF0aW9uUHJvZmlsZVtdID0gW107XG4gIHByaXZhdGUgdmFsaWRhdGlvblJlc3VsdD86IENvbmZpZ3VyYXRpb25WYWxpZGF0aW9uUmVzdWx0O1xuICBcbiAgLy8gVUkgRWxlbWVudHNcbiAgcHJpdmF0ZSBwcm9maWxlU2VsZWN0b3IhOiBIVE1MU2VsZWN0RWxlbWVudDtcbiAgcHJpdmF0ZSB2YWxpZGF0aW9uQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgY29uZmlndXJhdGlvbkNvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHByZXZpZXdDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgXG4gIHByaXZhdGUgdmFsaWRhdGlvblRpbWVvdXQ/OiBudW1iZXI7XG4gIHByaXZhdGUgaGFzVW5zYXZlZENoYW5nZXM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luLFxuICAgIGNvbmZpZzogQWR2YW5jZWRTZXR0aW5nc0NvbmZpZyA9IHtcbiAgICAgIHNob3dFeHBlcnRPcHRpb25zOiBmYWxzZSxcbiAgICAgIGVuYWJsZVJlYWxUaW1lVmFsaWRhdGlvbjogdHJ1ZSxcbiAgICAgIGFsbG93SW1wb3J0RXhwb3J0OiB0cnVlXG4gICAgfVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uID0gdGhpcy5nZXREZWZhdWx0Q29uZmlndXJhdGlvbigpO1xuICAgIHRoaXMubG9hZFByb2ZpbGVzKCk7XG4gIH1cblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplSW50ZXJmYWNlKCk7XG4gICAgYXdhaXQgdGhpcy5sb2FkQ3VycmVudENvbmZpZ3VyYXRpb24oKTtcbiAgICB0aGlzLnJlbmRlclNldHRpbmdzKCk7XG4gICAgXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZVJlYWxUaW1lVmFsaWRhdGlvbikge1xuICAgICAgdGhpcy5zdGFydFJlYWxUaW1lVmFsaWRhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIG9udW5sb2FkKCkge1xuICAgIGlmICh0aGlzLnZhbGlkYXRpb25UaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy52YWxpZGF0aW9uVGltZW91dCk7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhhc1Vuc2F2ZWRDaGFuZ2VzKSB7XG4gICAgICBjb25zdCBzaG91bGRTYXZlID0gY29uZmlybSgnWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzLiBXb3VsZCB5b3UgbGlrZSB0byBzYXZlIHRoZW0/Jyk7XG4gICAgICBpZiAoc2hvdWxkU2F2ZSkge1xuICAgICAgICB0aGlzLnNhdmVDb25maWd1cmF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplSW50ZXJmYWNlKCkge1xuICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdhZHZhbmNlZC1zZXR0aW5ncycpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBoZWFkZXJcbiAgICB0aGlzLmNyZWF0ZUhlYWRlcigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBwcm9maWxlIG1hbmFnZW1lbnQgc2VjdGlvblxuICAgIHRoaXMuY3JlYXRlUHJvZmlsZU1hbmFnZW1lbnQoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgdmFsaWRhdGlvbiBzZWN0aW9uXG4gICAgdGhpcy5jcmVhdGVWYWxpZGF0aW9uU2VjdGlvbigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBjb25maWd1cmF0aW9uIHNlY3Rpb25zXG4gICAgdGhpcy5jcmVhdGVDb25maWd1cmF0aW9uU2VjdGlvbnMoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgcHJldmlldyBzZWN0aW9uXG4gICAgdGhpcy5jcmVhdGVQcmV2aWV3U2VjdGlvbigpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhY3Rpb24gYnV0dG9uc1xuICAgIHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVIZWFkZXIoKSB7XG4gICAgY29uc3QgaGVhZGVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmdzLWhlYWRlcicpO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBZHZhbmNlZCBTZXR0aW5ncycgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdGaW5lLXR1bmUgVmF1bHRQaWxvdCBjb25maWd1cmF0aW9uIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlJyxcbiAgICAgIGNsczogJ3NldHRpbmdzLXN1YnRpdGxlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEV4cGVydCBtb2RlIHRvZ2dsZVxuICAgIGNvbnN0IGV4cGVydFRvZ2dsZSA9IGhlYWRlci5jcmVhdGVEaXYoJ2V4cGVydC10b2dnbGUnKTtcbiAgICBjb25zdCBleHBlcnRMYWJlbCA9IGV4cGVydFRvZ2dsZS5jcmVhdGVFbCgnbGFiZWwnKTtcbiAgICBleHBlcnRMYWJlbC5jcmVhdGVTcGFuKHsgdGV4dDogJ0V4cGVydCBNb2RlJyB9KTtcbiAgICBjb25zdCBleHBlcnRDaGVja2JveCA9IGV4cGVydExhYmVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcbiAgICBleHBlcnRDaGVja2JveC5jaGVja2VkID0gdGhpcy5jb25maWcuc2hvd0V4cGVydE9wdGlvbnM7XG4gICAgZXhwZXJ0Q2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb25maWcuc2hvd0V4cGVydE9wdGlvbnMgPSBleHBlcnRDaGVja2JveC5jaGVja2VkO1xuICAgICAgdGhpcy51cGRhdGVFeHBlcnRPcHRpb25zVmlzaWJpbGl0eSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcm9maWxlTWFuYWdlbWVudCgpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3Byb2ZpbGUtbWFuYWdlbWVudC1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25maWd1cmF0aW9uIFByb2ZpbGVzJyB9KTtcbiAgICBcbiAgICBjb25zdCBwcm9maWxlQ29udHJvbHMgPSBzZWN0aW9uLmNyZWF0ZURpdigncHJvZmlsZS1jb250cm9scycpO1xuICAgIFxuICAgIC8vIFByb2ZpbGUgc2VsZWN0b3JcbiAgICBjb25zdCBzZWxlY3RvckNvbnRhaW5lciA9IHByb2ZpbGVDb250cm9scy5jcmVhdGVEaXYoJ3Byb2ZpbGUtc2VsZWN0b3ItY29udGFpbmVyJyk7XG4gICAgc2VsZWN0b3JDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdDdXJyZW50IFByb2ZpbGU6JywgY2xzOiAncHJvZmlsZS1sYWJlbCcgfSk7XG4gICAgdGhpcy5wcm9maWxlU2VsZWN0b3IgPSBzZWxlY3RvckNvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdwcm9maWxlLXNlbGVjdG9yJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVByb2ZpbGVTZWxlY3RvcigpO1xuICAgIFxuICAgIHRoaXMucHJvZmlsZVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIHRoaXMubG9hZFByb2ZpbGUodGhpcy5wcm9maWxlU2VsZWN0b3IudmFsdWUpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFByb2ZpbGUgYWN0aW9uIGJ1dHRvbnNcbiAgICBjb25zdCBwcm9maWxlQWN0aW9ucyA9IHByb2ZpbGVDb250cm9scy5jcmVhdGVEaXYoJ3Byb2ZpbGUtYWN0aW9ucycpO1xuICAgIFxuICAgIGNvbnN0IHNhdmVQcm9maWxlQnRuID0gcHJvZmlsZUFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1NhdmUgYXMgTmV3IFByb2ZpbGUnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgIHNhdmVQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zaG93U2F2ZVByb2ZpbGVNb2RhbCgpKTtcbiAgICBcbiAgICBjb25zdCBkZWxldGVQcm9maWxlQnRuID0gcHJvZmlsZUFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0RlbGV0ZSBQcm9maWxlJywgY2xzOiAnbW9kLXdhcm5pbmcnIH0pO1xuICAgIGRlbGV0ZVByb2ZpbGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmRlbGV0ZUN1cnJlbnRQcm9maWxlKCkpO1xuICAgIFxuICAgIGlmICh0aGlzLmNvbmZpZy5hbGxvd0ltcG9ydEV4cG9ydCkge1xuICAgICAgY29uc3QgaW1wb3J0QnRuID0gcHJvZmlsZUFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0ltcG9ydCcsIGNsczogJ21vZC1tdXRlZCcgfSk7XG4gICAgICBpbXBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmltcG9ydENvbmZpZ3VyYXRpb24oKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGV4cG9ydEJ0biA9IHByb2ZpbGVBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdFeHBvcnQnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgICAgZXhwb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5leHBvcnRDb25maWd1cmF0aW9uKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVmFsaWRhdGlvblNlY3Rpb24oKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbmZpZ3VyYXRpb24gU3RhdHVzJyB9KTtcbiAgICBcbiAgICB0aGlzLnZhbGlkYXRpb25Db250YWluZXIgPSBzZWN0aW9uLmNyZWF0ZURpdigndmFsaWRhdGlvbi1jb250YWluZXInKTtcbiAgICB0aGlzLnJlbmRlclZhbGlkYXRpb25QbGFjZWhvbGRlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb25maWd1cmF0aW9uU2VjdGlvbnMoKSB7XG4gICAgdGhpcy5jb25maWd1cmF0aW9uQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2NvbmZpZ3VyYXRpb24tc2VjdGlvbnMnKTtcbiAgICBcbiAgICAvLyBUcmFuc3BvcnQgc2V0dGluZ3NcbiAgICB0aGlzLmNyZWF0ZVRyYW5zcG9ydFNldHRpbmdzKCk7XG4gICAgXG4gICAgLy8gUGVyZm9ybWFuY2Ugc2V0dGluZ3NcbiAgICB0aGlzLmNyZWF0ZVBlcmZvcm1hbmNlU2V0dGluZ3MoKTtcbiAgICBcbiAgICAvLyBNb25pdG9yaW5nIHNldHRpbmdzXG4gICAgdGhpcy5jcmVhdGVNb25pdG9yaW5nU2V0dGluZ3MoKTtcbiAgICBcbiAgICAvLyBVSSBzZXR0aW5nc1xuICAgIHRoaXMuY3JlYXRlVUlTZXR0aW5ncygpO1xuICAgIFxuICAgIC8vIFByaXZhY3kgc2V0dGluZ3NcbiAgICB0aGlzLmNyZWF0ZVByaXZhY3lTZXR0aW5ncygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVUcmFuc3BvcnRTZXR0aW5ncygpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb25maWd1cmF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdignY29uZmlnLXNlY3Rpb24gdHJhbnNwb3J0LXNlY3Rpb24nKTtcbiAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ/CfmoAgVHJhbnNwb3J0IENvbmZpZ3VyYXRpb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3NldHRpbmdzLWNvbnRhaW5lcicpO1xuICAgIFxuICAgIC8vIFByaW1hcnkgdHJhbnNwb3J0IHNlbGVjdGlvblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1ByaW1hcnkgVHJhbnNwb3J0JylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIHByZWZlcnJlZCB0cmFuc3BvcnQgbWV0aG9kJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihUcmFuc3BvcnRUeXBlLkhUVFAsICdIVFRQIChSZWxpYWJsZSknKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKFRyYW5zcG9ydFR5cGUuV0VCU09DS0VULCAnV2ViU29ja2V0IChSZWFsLXRpbWUpJyk7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihUcmFuc3BvcnRUeXBlLkZJTEVTWVNURU0sICdGaWxlU3lzdGVtIChPZmZsaW5lKScpO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5wcmltYXJ5VHJhbnNwb3J0KTtcbiAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LnByaW1hcnlUcmFuc3BvcnQgPSB2YWx1ZSBhcyBUcmFuc3BvcnRUeXBlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgY2hhaW4gY29uZmlndXJhdGlvblxuICAgIHRoaXMuY3JlYXRlRmFsbGJhY2tDaGFpbkNvbmZpZyhzZXR0aW5nc0NvbnRhaW5lcik7XG4gICAgXG4gICAgLy8gU2VsZWN0aW9uIGNyaXRlcmlhIHNsaWRlcnNcbiAgICB0aGlzLmNyZWF0ZVNlbGVjdGlvbkNyaXRlcmlhQ29uZmlnKHNldHRpbmdzQ29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBUaW1lb3V0IGNvbmZpZ3VyYXRpb25cbiAgICB0aGlzLmNyZWF0ZVRpbWVvdXRDb25maWcoc2V0dGluZ3NDb250YWluZXIpO1xuICAgIFxuICAgIC8vIFJldHJ5IHBvbGljeSBjb25maWd1cmF0aW9uXG4gICAgdGhpcy5jcmVhdGVSZXRyeVBvbGljeUNvbmZpZyhzZXR0aW5nc0NvbnRhaW5lcik7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUZhbGxiYWNrQ2hhaW5Db25maWcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGZhbGxiYWNrU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdGYWxsYmFjayBDaGFpbicpXG4gICAgICAuc2V0RGVzYygnQ29uZmlndXJlIHRyYW5zcG9ydCBmYWxsYmFjayBvcmRlcicpO1xuICAgIFxuICAgIGNvbnN0IGZhbGxiYWNrQ29udGFpbmVyID0gZmFsbGJhY2tTZXR0aW5nLmNvbnRyb2xFbC5jcmVhdGVEaXYoJ2ZhbGxiYWNrLWNoYWluLWNvbmZpZycpO1xuICAgIFxuICAgIC8vIEN1cnJlbnQgZmFsbGJhY2sgY2hhaW4gZGlzcGxheVxuICAgIGNvbnN0IGNoYWluRGlzcGxheSA9IGZhbGxiYWNrQ29udGFpbmVyLmNyZWF0ZURpdignY2hhaW4tZGlzcGxheScpO1xuICAgIHRoaXMudXBkYXRlRmFsbGJhY2tDaGFpbkRpc3BsYXkoY2hhaW5EaXNwbGF5KTtcbiAgICBcbiAgICAvLyBBZGQgdHJhbnNwb3J0IGJ1dHRvbnNcbiAgICBjb25zdCBhZGRCdXR0b25zID0gZmFsbGJhY2tDb250YWluZXIuY3JlYXRlRGl2KCdhZGQtdHJhbnNwb3J0LWJ1dHRvbnMnKTtcbiAgICBbVHJhbnNwb3J0VHlwZS5IVFRQLCBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCwgVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNXS5mb3JFYWNoKHRyYW5zcG9ydCA9PiB7XG4gICAgICBjb25zdCBidXR0b24gPSBhZGRCdXR0b25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICB0ZXh0OiBgQWRkICR7dHJhbnNwb3J0LnRvVXBwZXJDYXNlKCl9YCxcbiAgICAgICAgY2xzOiAnbW9kLW11dGVkIGFkZC10cmFuc3BvcnQtYnRuJ1xuICAgICAgfSk7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQuZmFsbGJhY2tDaGFpbi5pbmNsdWRlcyh0cmFuc3BvcnQpKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQuZmFsbGJhY2tDaGFpbi5wdXNoKHRyYW5zcG9ydCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVGYWxsYmFja0NoYWluRGlzcGxheShjaGFpbkRpc3BsYXkpO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVGYWxsYmFja0NoYWluRGlzcGxheShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgY29uc3QgY2hhaW4gPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5mYWxsYmFja0NoYWluO1xuICAgIGNoYWluLmZvckVhY2goKHRyYW5zcG9ydCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KCdjaGFpbi1pdGVtJyk7XG4gICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiAke3RyYW5zcG9ydC50b1VwcGVyQ2FzZSgpfWAsIGNsczogJ2NoYWluLWxhYmVsJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KCdjaGFpbi1hY3Rpb25zJyk7XG4gICAgICBcbiAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgY29uc3QgbW92ZVVwQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAn4oaRJywgY2xzOiAnbW9kLW11dGVkIGNoYWluLWJ0bicgfSk7XG4gICAgICAgIG1vdmVVcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICBbY2hhaW5baW5kZXhdLCBjaGFpbltpbmRleCAtIDFdXSA9IFtjaGFpbltpbmRleCAtIDFdLCBjaGFpbltpbmRleF1dO1xuICAgICAgICAgIHRoaXMudXBkYXRlRmFsbGJhY2tDaGFpbkRpc3BsYXkoY29udGFpbmVyKTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGluZGV4IDwgY2hhaW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICBjb25zdCBtb3ZlRG93bkJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ+KGkycsIGNsczogJ21vZC1tdXRlZCBjaGFpbi1idG4nIH0pO1xuICAgICAgICBtb3ZlRG93bkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICBbY2hhaW5baW5kZXhdLCBjaGFpbltpbmRleCArIDFdXSA9IFtjaGFpbltpbmRleCArIDFdLCBjaGFpbltpbmRleF1dO1xuICAgICAgICAgIHRoaXMudXBkYXRlRmFsbGJhY2tDaGFpbkRpc3BsYXkoY29udGFpbmVyKTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVtb3ZlQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAn4pyVJywgY2xzOiAnbW9kLXdhcm5pbmcgY2hhaW4tYnRuJyB9KTtcbiAgICAgIHJlbW92ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY2hhaW4uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVGYWxsYmFja0NoYWluRGlzcGxheShjb250YWluZXIpO1xuICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVNlbGVjdGlvbkNyaXRlcmlhQ29uZmlnKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBjcml0ZXJpYUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3NlbGVjdGlvbi1jcml0ZXJpYS1jb250YWluZXInKTtcbiAgICBjcml0ZXJpYUNvbnRhaW5lci5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdUcmFuc3BvcnQgU2VsZWN0aW9uIENyaXRlcmlhJyB9KTtcbiAgICBcbiAgICBjb25zdCBjcml0ZXJpYSA9IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LnNlbGVjdGlvbkNyaXRlcmlhO1xuICAgIFxuICAgIC8vIExhdGVuY3kgd2VpZ2h0XG4gICAgbmV3IFNldHRpbmcoY3JpdGVyaWFDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnTGF0ZW5jeSBQcmlvcml0eScpXG4gICAgICAuc2V0RGVzYygnSG93IG11Y2ggdG8gcHJpb3JpdGl6ZSBsb3cgbGF0ZW5jeSAoMC0xMDAlKScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMCwgMTAwLCA1KTtcbiAgICAgICAgc2xpZGVyLnNldFZhbHVlKGNyaXRlcmlhLmxhdGVuY3lXZWlnaHQgKiAxMDApO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIGNyaXRlcmlhLmxhdGVuY3lXZWlnaHQgPSB2YWx1ZSAvIDEwMDtcbiAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVNlbGVjdGlvbkNyaXRlcmlhKCk7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gUmVsaWFiaWxpdHkgd2VpZ2h0XG4gICAgbmV3IFNldHRpbmcoY3JpdGVyaWFDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUmVsaWFiaWxpdHkgUHJpb3JpdHknKVxuICAgICAgLnNldERlc2MoJ0hvdyBtdWNoIHRvIHByaW9yaXRpemUgcmVsaWFiaWxpdHkgKDAtMTAwJSknKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDAsIDEwMCwgNSk7XG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZShjcml0ZXJpYS5yZWxpYWJpbGl0eVdlaWdodCAqIDEwMCk7XG4gICAgICAgIHNsaWRlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgY3JpdGVyaWEucmVsaWFiaWxpdHlXZWlnaHQgPSB2YWx1ZSAvIDEwMDtcbiAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVNlbGVjdGlvbkNyaXRlcmlhKCk7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgfSk7XG4gICAgXG4gICAgLy8gQ2FwYWJpbGl0eSB3ZWlnaHRcbiAgICBuZXcgU2V0dGluZyhjcml0ZXJpYUNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdGZWF0dXJlIFByaW9yaXR5JylcbiAgICAgIC5zZXREZXNjKCdIb3cgbXVjaCB0byBwcmlvcml0aXplIGFkdmFuY2VkIGZlYXR1cmVzICgwLTEwMCUpJylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgc2xpZGVyLnNldExpbWl0cygwLCAxMDAsIDUpO1xuICAgICAgICBzbGlkZXIuc2V0VmFsdWUoY3JpdGVyaWEuY2FwYWJpbGl0eVdlaWdodCAqIDEwMCk7XG4gICAgICAgIHNsaWRlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgY3JpdGVyaWEuY2FwYWJpbGl0eVdlaWdodCA9IHZhbHVlIC8gMTAwO1xuICAgICAgICAgIHRoaXMubm9ybWFsaXplU2VsZWN0aW9uQ3JpdGVyaWEoKTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBDb3N0IHdlaWdodFxuICAgIG5ldyBTZXR0aW5nKGNyaXRlcmlhQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0VmZmljaWVuY3kgUHJpb3JpdHknKVxuICAgICAgLnNldERlc2MoJ0hvdyBtdWNoIHRvIHByaW9yaXRpemUgcmVzb3VyY2UgZWZmaWNpZW5jeSAoMC0xMDAlKScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMCwgMTAwLCA1KTtcbiAgICAgICAgc2xpZGVyLnNldFZhbHVlKGNyaXRlcmlhLmNvc3RXZWlnaHQgKiAxMDApO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIGNyaXRlcmlhLmNvc3RXZWlnaHQgPSB2YWx1ZSAvIDEwMDtcbiAgICAgICAgICB0aGlzLm5vcm1hbGl6ZVNlbGVjdGlvbkNyaXRlcmlhKCk7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRpbWVvdXRDb25maWcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5jb25maWcuc2hvd0V4cGVydE9wdGlvbnMpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0aW1lb3V0Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigndGltZW91dC1jb25maWctY29udGFpbmVyIGV4cGVydC1vcHRpb24nKTtcbiAgICB0aW1lb3V0Q29udGFpbmVyLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1RpbWVvdXQgQ29uZmlndXJhdGlvbicgfSk7XG4gICAgXG4gICAgY29uc3QgdGltZW91dHMgPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC50aW1lb3V0cztcbiAgICBcbiAgICBuZXcgU2V0dGluZyh0aW1lb3V0Q29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0Nvbm5lY3Rpb24gVGltZW91dCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSB0aW1lIHRvIHdhaXQgZm9yIGluaXRpYWwgY29ubmVjdGlvbiAobXMpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICB0ZXh0LnNldFZhbHVlKHRpbWVvdXRzLmNvbm5lY3Rpb24udG9TdHJpbmcoKSk7XG4gICAgICAgIHRleHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgaWYgKCFpc05hTihwYXJzZWQpICYmIHBhcnNlZCA+IDApIHtcbiAgICAgICAgICAgIHRpbWVvdXRzLmNvbm5lY3Rpb24gPSBwYXJzZWQ7XG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyh0aW1lb3V0Q29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1JlcXVlc3QgVGltZW91dCcpXG4gICAgICAuc2V0RGVzYygnTWF4aW11bSB0aW1lIHRvIHdhaXQgZm9yIHJlcXVlc3QgY29tcGxldGlvbiAobXMpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xuICAgICAgICB0ZXh0LnNldFZhbHVlKHRpbWVvdXRzLnJlcXVlc3QudG9TdHJpbmcoKSk7XG4gICAgICAgIHRleHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgaWYgKCFpc05hTihwYXJzZWQpICYmIHBhcnNlZCA+IDApIHtcbiAgICAgICAgICAgIHRpbWVvdXRzLnJlcXVlc3QgPSBwYXJzZWQ7XG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUmV0cnlQb2xpY3lDb25maWcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5jb25maWcuc2hvd0V4cGVydE9wdGlvbnMpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCByZXRyeUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3JldHJ5LXBvbGljeS1jb250YWluZXIgZXhwZXJ0LW9wdGlvbicpO1xuICAgIHJldHJ5Q29udGFpbmVyLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1JldHJ5IFBvbGljeScgfSk7XG4gICAgXG4gICAgY29uc3QgcmV0cnkgPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5yZXRyeVBvbGljeTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyhyZXRyeUNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdNYXggUmV0cnkgQXR0ZW1wdHMnKVxuICAgICAgLnNldERlc2MoJ01heGltdW0gbnVtYmVyIG9mIHJldHJ5IGF0dGVtcHRzIGZvciBmYWlsZWQgcmVxdWVzdHMnKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDAsIDEwLCAxKTtcbiAgICAgICAgc2xpZGVyLnNldFZhbHVlKHJldHJ5Lm1heEF0dGVtcHRzKTtcbiAgICAgICAgc2xpZGVyLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICByZXRyeS5tYXhBdHRlbXB0cyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgIH0pO1xuICAgIFxuICAgIG5ldyBTZXR0aW5nKHJldHJ5Q29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0JhY2tvZmYgTXVsdGlwbGllcicpXG4gICAgICAuc2V0RGVzYygnRXhwb25lbnRpYWwgYmFja29mZiBtdWx0aXBsaWVyIGZvciByZXRyeSBkZWxheXMnKVxuICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICBzbGlkZXIuc2V0TGltaXRzKDEsIDUsIDAuMSk7XG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZShyZXRyeS5iYWNrb2ZmTXVsdGlwbGllcik7XG4gICAgICAgIHNsaWRlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgcmV0cnkuYmFja29mZk11bHRpcGxpZXIgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUGVyZm9ybWFuY2VTZXR0aW5ncygpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb25maWd1cmF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdignY29uZmlnLXNlY3Rpb24gcGVyZm9ybWFuY2Utc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn4pqhIFBlcmZvcm1hbmNlIENvbmZpZ3VyYXRpb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3NldHRpbmdzLWNvbnRhaW5lcicpO1xuICAgIFxuICAgIC8vIFBlcmZvcm1hbmNlIG1vZGVcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdQZXJmb3JtYW5jZSBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdCYWxhbmNlIGJldHdlZW4gc3BlZWQsIHJlbGlhYmlsaXR5LCBhbmQgcmVzb3VyY2UgdXNhZ2UnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdwZXJmb3JtYW5jZScsICdQZXJmb3JtYW5jZSAoUHJpb3JpdGl6ZSBTcGVlZCknKTtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCdiYWxhbmNlZCcsICdCYWxhbmNlZCAoUmVjb21tZW5kZWQpJyk7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbigncmVsaWFiaWxpdHknLCAnUmVsaWFiaWxpdHkgKFByaW9yaXRpemUgU3RhYmlsaXR5KScpO1xuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLm1vZGUpO1xuICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5tb2RlID0gdmFsdWUgYXMgYW55O1xuICAgICAgICAgIHRoaXMuYXBwbHlQZXJmb3JtYW5jZU1vZGVQcmVzZXQodmFsdWUgYXMgYW55KTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIENvbm5lY3Rpb24gcG9vbGluZ1xuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0Nvbm5lY3Rpb24gUG9vbGluZycpXG4gICAgICAuc2V0RGVzYygnUmV1c2UgY29ubmVjdGlvbnMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmVuYWJsZUNvbm5lY3Rpb25Qb29saW5nKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmVuYWJsZUNvbm5lY3Rpb25Qb29saW5nID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBDb21wcmVzc2lvblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0NvbXByZXNzaW9uJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgZGF0YSBjb21wcmVzc2lvbiB0byByZWR1Y2UgYmFuZHdpZHRoIHVzYWdlJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UuZW5hYmxlQ29tcHJlc3Npb24pO1xuICAgICAgICB0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UuZW5hYmxlQ29tcHJlc3Npb24gPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIENhY2hpbmdcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdSZXNwb25zZSBDYWNoaW5nJylcbiAgICAgIC5zZXREZXNjKCdDYWNoZSByZXNwb25zZXMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmVuYWJsZUNhY2hpbmcpO1xuICAgICAgICB0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UuZW5hYmxlQ2FjaGluZyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMuY29uZmlnLnNob3dFeHBlcnRPcHRpb25zKSB7XG4gICAgICAvLyBNYXggY29uY3VycmVudCByZXF1ZXN0c1xuICAgICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdNYXggQ29uY3VycmVudCBSZXF1ZXN0cycpXG4gICAgICAgIC5zZXREZXNjKCdNYXhpbXVtIG51bWJlciBvZiBzaW11bHRhbmVvdXMgcmVxdWVzdHMnKVxuICAgICAgICAuc2V0Q2xhc3MoJ2V4cGVydC1vcHRpb24nKVxuICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgICAgc2xpZGVyLnNldExpbWl0cygxLCAyMCwgMSk7XG4gICAgICAgICAgc2xpZGVyLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2UubWF4Q29uY3VycmVudFJlcXVlc3RzKTtcbiAgICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5tYXhDb25jdXJyZW50UmVxdWVzdHMgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2xpZGVyLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDYWNoZSBzaXplXG4gICAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NhY2hlIFNpemUgKE1CKScpXG4gICAgICAgIC5zZXREZXNjKCdNYXhpbXVtIGNhY2hlIHNpemUgaW4gbWVnYWJ5dGVzJylcbiAgICAgICAgLnNldENsYXNzKCdleHBlcnQtb3B0aW9uJylcbiAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMSwgMTAwLCA1KTtcbiAgICAgICAgICBzbGlkZXIuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5wZXJmb3JtYW5jZS5jYWNoZVNpemUpO1xuICAgICAgICAgIHNsaWRlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLmNhY2hlU2l6ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVNb25pdG9yaW5nU2V0dGluZ3MoKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29uZmlndXJhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2NvbmZpZy1zZWN0aW9uIG1vbml0b3Jpbmctc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn8J+TiiBNb25pdG9yaW5nIENvbmZpZ3VyYXRpb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gc2VjdGlvbi5jcmVhdGVEaXYoJ3NldHRpbmdzLWNvbnRhaW5lcicpO1xuICAgIFxuICAgIC8vIEhlYWx0aCBjaGVja3NcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdIZWFsdGggQ2hlY2tzJylcbiAgICAgIC5zZXREZXNjKCdNb25pdG9yIHRyYW5zcG9ydCBoZWFsdGggYXV0b21hdGljYWxseScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLm1vbml0b3JpbmcuZW5hYmxlSGVhbHRoQ2hlY2tzKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLm1vbml0b3JpbmcuZW5hYmxlSGVhbHRoQ2hlY2tzID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBNZXRyaWNzIGNvbGxlY3Rpb25cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdQZXJmb3JtYW5jZSBNZXRyaWNzJylcbiAgICAgIC5zZXREZXNjKCdDb2xsZWN0IGRldGFpbGVkIHBlcmZvcm1hbmNlIG1ldHJpY3MnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5tb25pdG9yaW5nLmVuYWJsZU1ldHJpY3MpO1xuICAgICAgICB0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ubW9uaXRvcmluZy5lbmFibGVNZXRyaWNzID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBQcmVkaWN0aXZlIGFsZXJ0c1xuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1ByZWRpY3RpdmUgQWxlcnRzJylcbiAgICAgIC5zZXREZXNjKCdHZXQgZWFybHkgd2FybmluZ3MgYWJvdXQgcG90ZW50aWFsIGlzc3VlcycpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLm1vbml0b3JpbmcuZW5hYmxlUHJlZGljdGl2ZUFsZXJ0cyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi5tb25pdG9yaW5nLmVuYWJsZVByZWRpY3RpdmVBbGVydHMgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVVSVNldHRpbmdzKCkge1xuICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLmNvbmZpZ3VyYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCdjb25maWctc2VjdGlvbiB1aS1zZWN0aW9uJyk7XG4gICAgc2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICfwn46oIFVzZXIgSW50ZXJmYWNlJyB9KTtcbiAgICBcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KCdzZXR0aW5ncy1jb250YWluZXInKTtcbiAgICBcbiAgICAvLyBUaGVtZVxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1RoZW1lJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIGludGVyZmFjZSB0aGVtZScpXG4gICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2F1dG8nLCAnQXV0byAoRm9sbG93IE9ic2lkaWFuKScpO1xuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2xpZ2h0JywgJ0xpZ2h0Jyk7XG4gICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZGFyaycsICdEYXJrJyk7XG4gICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkudGhlbWUpO1xuICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51aS50aGVtZSA9IHZhbHVlIGFzIGFueTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIEFuaW1hdGlvbnNcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdBbmltYXRpb25zJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgVUkgYW5pbWF0aW9ucyBhbmQgdHJhbnNpdGlvbnMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51aS5lbmFibGVBbmltYXRpb25zKTtcbiAgICAgICAgdG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnVpLmVuYWJsZUFuaW1hdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIEFkdmFuY2VkIG1ldHJpY3NcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKCdBZHZhbmNlZCBNZXRyaWNzJylcbiAgICAgIC5zZXREZXNjKCdTaG93IGRldGFpbGVkIG1ldHJpY3MgaW4gZGFzaGJvYXJkJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udWkuc2hvd0FkdmFuY2VkTWV0cmljcyk7XG4gICAgICAgIHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51aS5zaG93QWR2YW5jZWRNZXRyaWNzID0gdmFsdWU7XG4gICAgICAgICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBEYXNoYm9hcmQgcmVmcmVzaCByYXRlXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnRGFzaGJvYXJkIFJlZnJlc2ggUmF0ZScpXG4gICAgICAuc2V0RGVzYygnSG93IG9mdGVuIHRvIHVwZGF0ZSB0aGUgZGFzaGJvYXJkIChzZWNvbmRzKScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgIHNsaWRlci5zZXRMaW1pdHMoMSwgNjAsIDEpO1xuICAgICAgICBzbGlkZXIuc2V0VmFsdWUodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51aS5kYXNoYm9hcmRSZWZyZXNoUmF0ZSk7XG4gICAgICAgIHNsaWRlci5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi51aS5kYXNoYm9hcmRSZWZyZXNoUmF0ZSA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcml2YWN5U2V0dGluZ3MoKSB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuY29uZmlndXJhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2NvbmZpZy1zZWN0aW9uIHByaXZhY3ktc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAn8J+UkiBQcml2YWN5ICYgRGF0YScgfSk7XG4gICAgXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBzZWN0aW9uLmNyZWF0ZURpdignc2V0dGluZ3MtY29udGFpbmVyJyk7XG4gICAgXG4gICAgLy8gQW5hbHl0aWNzXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnVXNhZ2UgQW5hbHl0aWNzJylcbiAgICAgIC5zZXREZXNjKCdIZWxwIGltcHJvdmUgVmF1bHRQaWxvdCBieSBzaGFyaW5nIGFub255bW91cyB1c2FnZSBkYXRhJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucHJpdmFjeS5lbmFibGVBbmFseXRpY3MpO1xuICAgICAgICB0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucHJpdmFjeS5lbmFibGVBbmFseXRpY3MgPSB2YWx1ZTtcbiAgICAgICAgICB0aGlzLm9uQ29uZmlndXJhdGlvbkNoYW5nZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIFxuICAgIC8vIERhdGEgcmV0ZW50aW9uXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnRGF0YSBSZXRlbnRpb24nKVxuICAgICAgLnNldERlc2MoJ0hvdyBsb25nIHRvIGtlZXAgcGVyZm9ybWFuY2UgYW5kIHVzYWdlIGRhdGEgKGRheXMpJylcbiAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgc2xpZGVyLnNldExpbWl0cygxLCA5MCwgMSk7XG4gICAgICAgIHNsaWRlci5zZXRWYWx1ZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnByaXZhY3kuZGF0YVJldGVudGlvbkRheXMpO1xuICAgICAgICBzbGlkZXIub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucHJpdmFjeS5kYXRhUmV0ZW50aW9uRGF5cyA9IHZhbHVlO1xuICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVQcmV2aWV3U2VjdGlvbigpIHtcbiAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3ByZXZpZXctc2VjdGlvbicpO1xuICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29uZmlndXJhdGlvbiBQcmV2aWV3JyB9KTtcbiAgICBcbiAgICB0aGlzLnByZXZpZXdDb250YWluZXIgPSBzZWN0aW9uLmNyZWF0ZURpdigncHJldmlldy1jb250YWluZXInKTtcbiAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQWN0aW9uQnV0dG9ucygpIHtcbiAgICBjb25zdCBhY3Rpb25zID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmdzLWFjdGlvbnMnKTtcbiAgICBcbiAgICBjb25zdCBzYXZlQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnU2F2ZSBDb25maWd1cmF0aW9uJywgY2xzOiAnbW9kLWN0YScgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2F2ZUNvbmZpZ3VyYXRpb24oKSk7XG4gICAgXG4gICAgY29uc3QgcmVzZXRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdSZXNldCB0byBEZWZhdWx0cycsIGNsczogJ21vZC13YXJuaW5nJyB9KTtcbiAgICByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVzZXRUb0RlZmF1bHRzKCkpO1xuICAgIFxuICAgIGNvbnN0IHRlc3RCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdUZXN0IENvbmZpZ3VyYXRpb24nLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgIHRlc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRlc3RDb25maWd1cmF0aW9uKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTZXR0aW5ncygpIHtcbiAgICAvLyBUcmlnZ2VyIGluaXRpYWwgcmVuZGVyaW5nIGFuZCB2YWxpZGF0aW9uXG4gICAgdGhpcy5vbkNvbmZpZ3VyYXRpb25DaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEN1cnJlbnRDb25maWd1cmF0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBMb2FkIGNvbmZpZ3VyYXRpb24gZnJvbSBwbHVnaW4gc2V0dGluZ3NcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZHZhbmNlZENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IHsgLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MuYWR2YW5jZWRDb25maWd1cmF0aW9uIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGN1cnJlbnQgY29uZmlndXJhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gbG9hZCBjb25maWd1cmF0aW9uLCB1c2luZyBkZWZhdWx0cycpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb24oKTogVmF1bHRQaWxvdENvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICB0cmFuc3BvcnQ6IHtcbiAgICAgICAgcHJpbWFyeVRyYW5zcG9ydDogVHJhbnNwb3J0VHlwZS5IVFRQLFxuICAgICAgICBmYWxsYmFja0NoYWluOiBbVHJhbnNwb3J0VHlwZS5IVFRQLCBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVF0sXG4gICAgICAgIHNlbGVjdGlvbkNyaXRlcmlhOiB7XG4gICAgICAgICAgbGF0ZW5jeVdlaWdodDogMC4zLFxuICAgICAgICAgIHJlbGlhYmlsaXR5V2VpZ2h0OiAwLjMsXG4gICAgICAgICAgY2FwYWJpbGl0eVdlaWdodDogMC4yLFxuICAgICAgICAgIGNvc3RXZWlnaHQ6IDAuMlxuICAgICAgICB9LFxuICAgICAgICB0aW1lb3V0czoge1xuICAgICAgICAgIGNvbm5lY3Rpb246IDUwMDAsXG4gICAgICAgICAgcmVxdWVzdDogMzAwMDAsXG4gICAgICAgICAgcmV0cnk6IDEwMDBcbiAgICAgICAgfSxcbiAgICAgICAgcmV0cnlQb2xpY3k6IHtcbiAgICAgICAgICBtYXhBdHRlbXB0czogMyxcbiAgICAgICAgICBiYWNrb2ZmTXVsdGlwbGllcjogMixcbiAgICAgICAgICBtYXhCYWNrb2ZmVGltZTogMTAwMDBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgIG1vZGU6ICdiYWxhbmNlZCcsXG4gICAgICAgIGVuYWJsZUNvbm5lY3Rpb25Qb29saW5nOiB0cnVlLFxuICAgICAgICBtYXhDb25jdXJyZW50UmVxdWVzdHM6IDUsXG4gICAgICAgIGVuYWJsZUNvbXByZXNzaW9uOiB0cnVlLFxuICAgICAgICBlbmFibGVDYWNoaW5nOiB0cnVlLFxuICAgICAgICBjYWNoZVNpemU6IDEwXG4gICAgICB9LFxuICAgICAgbW9uaXRvcmluZzoge1xuICAgICAgICBlbmFibGVIZWFsdGhDaGVja3M6IHRydWUsXG4gICAgICAgIGhlYWx0aENoZWNrSW50ZXJ2YWw6IDMwMDAwLFxuICAgICAgICBlbmFibGVNZXRyaWNzOiB0cnVlLFxuICAgICAgICBtZXRyaWNzUmV0ZW50aW9uOiA3LFxuICAgICAgICBlbmFibGVQcmVkaWN0aXZlQWxlcnRzOiB0cnVlXG4gICAgICB9LFxuICAgICAgdWk6IHtcbiAgICAgICAgdGhlbWU6ICdhdXRvJyxcbiAgICAgICAgZW5hYmxlQW5pbWF0aW9uczogdHJ1ZSxcbiAgICAgICAgc2hvd0FkdmFuY2VkTWV0cmljczogZmFsc2UsXG4gICAgICAgIGRhc2hib2FyZFJlZnJlc2hSYXRlOiAyLFxuICAgICAgICBlbmFibGVOb3RpZmljYXRpb25zOiB0cnVlXG4gICAgICB9LFxuICAgICAgcHJpdmFjeToge1xuICAgICAgICBlbmFibGVBbmFseXRpY3M6IHRydWUsXG4gICAgICAgIHNoYXJlVXNhZ2VEYXRhOiBmYWxzZSxcbiAgICAgICAgZGF0YVJldGVudGlvbkRheXM6IDMwXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgb25Db25maWd1cmF0aW9uQ2hhbmdlKCkge1xuICAgIHRoaXMuaGFzVW5zYXZlZENoYW5nZXMgPSB0cnVlO1xuICAgIFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVSZWFsVGltZVZhbGlkYXRpb24pIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVWYWxpZGF0aW9uKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVZhbGlkYXRpb24oKSB7XG4gICAgaWYgKHRoaXMudmFsaWRhdGlvblRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnZhbGlkYXRpb25UaW1lb3V0KTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy52YWxpZGF0aW9uVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudmFsaWRhdGVDb25maWd1cmF0aW9uKCk7XG4gICAgfSwgNTAwKTsgLy8gRGVib3VuY2UgdmFsaWRhdGlvblxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2YWxpZGF0ZUNvbmZpZ3VyYXRpb24oKTogUHJvbWlzZTxDb25maWd1cmF0aW9uVmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IGVycm9yczogVmFsaWRhdGlvbkVycm9yW10gPSBbXTtcbiAgICBjb25zdCB3YXJuaW5nczogVmFsaWRhdGlvbldhcm5pbmdbXSA9IFtdO1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRyYW5zcG9ydCBjb25maWd1cmF0aW9uXG4gICAgaWYgKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LmZhbGxiYWNrQ2hhaW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIGZpZWxkOiAndHJhbnNwb3J0LmZhbGxiYWNrQ2hhaW4nLFxuICAgICAgICBtZXNzYWdlOiAnQXQgbGVhc3Qgb25lIHRyYW5zcG9ydCBtdXN0IGJlIGNvbmZpZ3VyZWQgaW4gdGhlIGZhbGxiYWNrIGNoYWluJyxcbiAgICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXG4gICAgICAgIHN1Z2dlc3Rpb246ICdBZGQgYXQgbGVhc3Qgb25lIHRyYW5zcG9ydCB0byB0aGUgZmFsbGJhY2sgY2hhaW4nXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgc2VsZWN0aW9uIGNyaXRlcmlhXG4gICAgY29uc3QgY3JpdGVyaWEgPSB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnRyYW5zcG9ydC5zZWxlY3Rpb25Dcml0ZXJpYTtcbiAgICBjb25zdCB0b3RhbFdlaWdodCA9IGNyaXRlcmlhLmxhdGVuY3lXZWlnaHQgKyBjcml0ZXJpYS5yZWxpYWJpbGl0eVdlaWdodCArIFxuICAgICAgICAgICAgICAgICAgICAgICBjcml0ZXJpYS5jYXBhYmlsaXR5V2VpZ2h0ICsgY3JpdGVyaWEuY29zdFdlaWdodDtcbiAgICBcbiAgICBpZiAoTWF0aC5hYnModG90YWxXZWlnaHQgLSAxKSA+IDAuMDEpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICBmaWVsZDogJ3RyYW5zcG9ydC5zZWxlY3Rpb25Dcml0ZXJpYScsXG4gICAgICAgIG1lc3NhZ2U6ICdTZWxlY3Rpb24gY3JpdGVyaWEgd2VpZ2h0cyBzaG91bGQgc3VtIHRvIDEwMCUnLFxuICAgICAgICBpbXBhY3Q6ICdtZWRpdW0nLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogJ0FkanVzdCB0aGUgd2VpZ2h0cyBzbyB0aGV5IHRvdGFsIDEwMCUnXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgdGltZW91dHNcbiAgICBjb25zdCB0aW1lb3V0cyA9IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24udHJhbnNwb3J0LnRpbWVvdXRzO1xuICAgIGlmICh0aW1lb3V0cy5jb25uZWN0aW9uID49IHRpbWVvdXRzLnJlcXVlc3QpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICBmaWVsZDogJ3RyYW5zcG9ydC50aW1lb3V0cycsXG4gICAgICAgIG1lc3NhZ2U6ICdDb25uZWN0aW9uIHRpbWVvdXQgc2hvdWxkIGJlIGxlc3MgdGhhbiByZXF1ZXN0IHRpbWVvdXQnLFxuICAgICAgICBpbXBhY3Q6ICdsb3cnLFxuICAgICAgICByZWNvbW1lbmRhdGlvbjogJ1NldCBjb25uZWN0aW9uIHRpbWVvdXQgdG8gYmUgbGVzcyB0aGFuIHJlcXVlc3QgdGltZW91dCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBwZXJmb3JtYW5jZSBzZXR0aW5nc1xuICAgIGlmICh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLnBlcmZvcm1hbmNlLm1heENvbmN1cnJlbnRSZXF1ZXN0cyA+IDEwKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgZmllbGQ6ICdwZXJmb3JtYW5jZS5tYXhDb25jdXJyZW50UmVxdWVzdHMnLFxuICAgICAgICBtZXNzYWdlOiAnSGlnaCBjb25jdXJyZW50IHJlcXVlc3QgbGltaXQgbWF5IGltcGFjdCBwZXJmb3JtYW5jZScsXG4gICAgICAgIGltcGFjdDogJ21lZGl1bScsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uOiAnQ29uc2lkZXIgcmVkdWNpbmcgdG8gNS0xMCBmb3Igb3B0aW1hbCBwZXJmb3JtYW5jZSdcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBFc3RpbWF0ZSBpbXBhY3RcbiAgICBjb25zdCBlc3RpbWF0ZWRJbXBhY3QgPSB0aGlzLmVzdGltYXRlQ29uZmlndXJhdGlvbkltcGFjdCgpO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdDogQ29uZmlndXJhdGlvblZhbGlkYXRpb25SZXN1bHQgPSB7XG4gICAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3JzLFxuICAgICAgd2FybmluZ3MsXG4gICAgICBlc3RpbWF0ZWRJbXBhY3RcbiAgICB9O1xuICAgIFxuICAgIHRoaXMudmFsaWRhdGlvblJlc3VsdCA9IHJlc3VsdDtcbiAgICB0aGlzLnJlbmRlclZhbGlkYXRpb25SZXN1bHQocmVzdWx0KTtcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBlc3RpbWF0ZUNvbmZpZ3VyYXRpb25JbXBhY3QoKSB7XG4gICAgLy8gU2ltcGxlIGhldXJpc3RpYy1iYXNlZCBpbXBhY3QgZXN0aW1hdGlvblxuICAgIGxldCBwZXJmb3JtYW5jZUNoYW5nZSA9IDA7XG4gICAgbGV0IHJlbGlhYmlsaXR5Q2hhbmdlID0gMDtcbiAgICBsZXQgcmVzb3VyY2VVc2FnZSA9IDA7XG4gICAgXG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbjtcbiAgICBcbiAgICAvLyBQZXJmb3JtYW5jZSBtb2RlIGltcGFjdFxuICAgIHN3aXRjaCAoY29uZmlnLnBlcmZvcm1hbmNlLm1vZGUpIHtcbiAgICAgIGNhc2UgJ3BlcmZvcm1hbmNlJzpcbiAgICAgICAgcGVyZm9ybWFuY2VDaGFuZ2UgKz0gMjA7XG4gICAgICAgIHJlbGlhYmlsaXR5Q2hhbmdlIC09IDU7XG4gICAgICAgIHJlc291cmNlVXNhZ2UgKz0gMTU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVsaWFiaWxpdHknOlxuICAgICAgICBwZXJmb3JtYW5jZUNoYW5nZSAtPSA1O1xuICAgICAgICByZWxpYWJpbGl0eUNoYW5nZSArPSAyMDtcbiAgICAgICAgcmVzb3VyY2VVc2FnZSArPSA1O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IC8vIGJhbGFuY2VkXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb25uZWN0aW9uIHBvb2xpbmcgaW1wYWN0XG4gICAgaWYgKGNvbmZpZy5wZXJmb3JtYW5jZS5lbmFibGVDb25uZWN0aW9uUG9vbGluZykge1xuICAgICAgcGVyZm9ybWFuY2VDaGFuZ2UgKz0gMTU7XG4gICAgICByZXNvdXJjZVVzYWdlICs9IDEwO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb21wcmVzc2lvbiBpbXBhY3RcbiAgICBpZiAoY29uZmlnLnBlcmZvcm1hbmNlLmVuYWJsZUNvbXByZXNzaW9uKSB7XG4gICAgICBwZXJmb3JtYW5jZUNoYW5nZSArPSA1O1xuICAgICAgcmVzb3VyY2VVc2FnZSArPSA1O1xuICAgIH1cbiAgICBcbiAgICAvLyBDYWNoaW5nIGltcGFjdFxuICAgIGlmIChjb25maWcucGVyZm9ybWFuY2UuZW5hYmxlQ2FjaGluZykge1xuICAgICAgcGVyZm9ybWFuY2VDaGFuZ2UgKz0gMTA7XG4gICAgICByZXNvdXJjZVVzYWdlICs9IGNvbmZpZy5wZXJmb3JtYW5jZS5jYWNoZVNpemU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwZXJmb3JtYW5jZUNoYW5nZTogTWF0aC5tYXgoLTUwLCBNYXRoLm1pbig1MCwgcGVyZm9ybWFuY2VDaGFuZ2UpKSxcbiAgICAgIHJlbGlhYmlsaXR5Q2hhbmdlOiBNYXRoLm1heCgtNTAsIE1hdGgubWluKDUwLCByZWxpYWJpbGl0eUNoYW5nZSkpLFxuICAgICAgcmVzb3VyY2VVc2FnZTogTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCByZXNvdXJjZVVzYWdlKSlcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJWYWxpZGF0aW9uUmVzdWx0KHJlc3VsdDogQ29uZmlndXJhdGlvblZhbGlkYXRpb25SZXN1bHQpIHtcbiAgICB0aGlzLnZhbGlkYXRpb25Db250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICBpZiAocmVzdWx0LmlzVmFsaWQgJiYgcmVzdWx0Lndhcm5pbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IHRoaXMudmFsaWRhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ3ZhbGlkYXRpb24tc3VjY2VzcycpO1xuICAgICAgc3VjY2Vzcy5jcmVhdGVTcGFuKHsgdGV4dDogJ+KchSBDb25maWd1cmF0aW9uIGlzIHZhbGlkJywgY2xzOiAndmFsaWRhdGlvbi1tZXNzYWdlJyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2hvdyBlcnJvcnNcbiAgICAgIHJlc3VsdC5lcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLnZhbGlkYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLWVycm9yJyk7XG4gICAgICAgIGVycm9yRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICfinYwnLCBjbHM6ICd2YWxpZGF0aW9uLWljb24nIH0pO1xuICAgICAgICBlcnJvckVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBlcnJvci5tZXNzYWdlLCBjbHM6ICd2YWxpZGF0aW9uLW1lc3NhZ2UnIH0pO1xuICAgICAgICBpZiAoZXJyb3Iuc3VnZ2VzdGlvbikge1xuICAgICAgICAgIGVycm9yRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGVycm9yLnN1Z2dlc3Rpb24sIGNsczogJ3ZhbGlkYXRpb24tc3VnZ2VzdGlvbicgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG93IHdhcm5pbmdzXG4gICAgICByZXN1bHQud2FybmluZ3MuZm9yRWFjaCh3YXJuaW5nID0+IHtcbiAgICAgICAgY29uc3Qgd2FybmluZ0VsID0gdGhpcy52YWxpZGF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdigndmFsaWRhdGlvbi13YXJuaW5nJyk7XG4gICAgICAgIHdhcm5pbmdFbC5jcmVhdGVTcGFuKHsgdGV4dDogJ+KaoO+4jycsIGNsczogJ3ZhbGlkYXRpb24taWNvbicgfSk7XG4gICAgICAgIHdhcm5pbmdFbC5jcmVhdGVTcGFuKHsgdGV4dDogd2FybmluZy5tZXNzYWdlLCBjbHM6ICd2YWxpZGF0aW9uLW1lc3NhZ2UnIH0pO1xuICAgICAgICBpZiAod2FybmluZy5yZWNvbW1lbmRhdGlvbikge1xuICAgICAgICAgIHdhcm5pbmdFbC5jcmVhdGVTcGFuKHsgdGV4dDogd2FybmluZy5yZWNvbW1lbmRhdGlvbiwgY2xzOiAndmFsaWRhdGlvbi1zdWdnZXN0aW9uJyB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNob3cgZXN0aW1hdGVkIGltcGFjdFxuICAgIGNvbnN0IGltcGFjdCA9IHJlc3VsdC5lc3RpbWF0ZWRJbXBhY3Q7XG4gICAgY29uc3QgaW1wYWN0RWwgPSB0aGlzLnZhbGlkYXRpb25Db250YWluZXIuY3JlYXRlRGl2KCd2YWxpZGF0aW9uLWltcGFjdCcpO1xuICAgIGltcGFjdEVsLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0VzdGltYXRlZCBJbXBhY3Q6JyB9KTtcbiAgICBcbiAgICBjb25zdCBpbXBhY3RHcmlkID0gaW1wYWN0RWwuY3JlYXRlRGl2KCdpbXBhY3QtZ3JpZCcpO1xuICAgIFxuICAgIGNvbnN0IHBlcmZJbXBhY3QgPSBpbXBhY3RHcmlkLmNyZWF0ZURpdignaW1wYWN0LWl0ZW0nKTtcbiAgICBwZXJmSW1wYWN0LmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUGVyZm9ybWFuY2U6JywgY2xzOiAnaW1wYWN0LWxhYmVsJyB9KTtcbiAgICBwZXJmSW1wYWN0LmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke2ltcGFjdC5wZXJmb3JtYW5jZUNoYW5nZSA+IDAgPyAnKycgOiAnJ30ke2ltcGFjdC5wZXJmb3JtYW5jZUNoYW5nZX0lYCxcbiAgICAgIGNsczogYGltcGFjdC12YWx1ZSAke2ltcGFjdC5wZXJmb3JtYW5jZUNoYW5nZSA+IDAgPyAncG9zaXRpdmUnIDogaW1wYWN0LnBlcmZvcm1hbmNlQ2hhbmdlIDwgMCA/ICduZWdhdGl2ZScgOiAnbmV1dHJhbCd9YFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlbGlhYmlsaXR5SW1wYWN0ID0gaW1wYWN0R3JpZC5jcmVhdGVEaXYoJ2ltcGFjdC1pdGVtJyk7XG4gICAgcmVsaWFiaWxpdHlJbXBhY3QuY3JlYXRlU3Bhbih7IHRleHQ6ICdSZWxpYWJpbGl0eTonLCBjbHM6ICdpbXBhY3QtbGFiZWwnIH0pO1xuICAgIHJlbGlhYmlsaXR5SW1wYWN0LmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke2ltcGFjdC5yZWxpYWJpbGl0eUNoYW5nZSA+IDAgPyAnKycgOiAnJ30ke2ltcGFjdC5yZWxpYWJpbGl0eUNoYW5nZX0lYCxcbiAgICAgIGNsczogYGltcGFjdC12YWx1ZSAke2ltcGFjdC5yZWxpYWJpbGl0eUNoYW5nZSA+IDAgPyAncG9zaXRpdmUnIDogaW1wYWN0LnJlbGlhYmlsaXR5Q2hhbmdlIDwgMCA/ICduZWdhdGl2ZScgOiAnbmV1dHJhbCd9YFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc291cmNlSW1wYWN0ID0gaW1wYWN0R3JpZC5jcmVhdGVEaXYoJ2ltcGFjdC1pdGVtJyk7XG4gICAgcmVzb3VyY2VJbXBhY3QuY3JlYXRlU3Bhbih7IHRleHQ6ICdSZXNvdXJjZSBVc2FnZTonLCBjbHM6ICdpbXBhY3QtbGFiZWwnIH0pO1xuICAgIHJlc291cmNlSW1wYWN0LmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke2ltcGFjdC5yZXNvdXJjZVVzYWdlfSVgLFxuICAgICAgY2xzOiBgaW1wYWN0LXZhbHVlICR7aW1wYWN0LnJlc291cmNlVXNhZ2UgPiA3MCA/ICdoaWdoJyA6IGltcGFjdC5yZXNvdXJjZVVzYWdlID4gMzAgPyAnbWVkaXVtJyA6ICdsb3cnfWBcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVmFsaWRhdGlvblBsYWNlaG9sZGVyKCkge1xuICAgIHRoaXMudmFsaWRhdGlvbkNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQ29uZmlndXJhdGlvbiB2YWxpZGF0aW9uIHdpbGwgYXBwZWFyIGhlcmUuLi4nLFxuICAgICAgY2xzOiAndmFsaWRhdGlvbi1wbGFjZWhvbGRlcidcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUHJldmlldygpIHtcbiAgICB0aGlzLnByZXZpZXdDb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICBjb25zdCBwcmV2aWV3ID0gdGhpcy5wcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKCdwcmUnLCB7IGNsczogJ2NvbmZpZy1wcmV2aWV3JyB9KTtcbiAgICBwcmV2aWV3LnRleHRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiwgbnVsbCwgMik7XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZVNlbGVjdGlvbkNyaXRlcmlhKCkge1xuICAgIGNvbnN0IGNyaXRlcmlhID0gdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbi50cmFuc3BvcnQuc2VsZWN0aW9uQ3JpdGVyaWE7XG4gICAgY29uc3QgdG90YWwgPSBjcml0ZXJpYS5sYXRlbmN5V2VpZ2h0ICsgY3JpdGVyaWEucmVsaWFiaWxpdHlXZWlnaHQgKyBcbiAgICAgICAgICAgICAgICAgIGNyaXRlcmlhLmNhcGFiaWxpdHlXZWlnaHQgKyBjcml0ZXJpYS5jb3N0V2VpZ2h0O1xuICAgIFxuICAgIGlmICh0b3RhbCA+IDApIHtcbiAgICAgIGNyaXRlcmlhLmxhdGVuY3lXZWlnaHQgLz0gdG90YWw7XG4gICAgICBjcml0ZXJpYS5yZWxpYWJpbGl0eVdlaWdodCAvPSB0b3RhbDtcbiAgICAgIGNyaXRlcmlhLmNhcGFiaWxpdHlXZWlnaHQgLz0gdG90YWw7XG4gICAgICBjcml0ZXJpYS5jb3N0V2VpZ2h0IC89IHRvdGFsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlQZXJmb3JtYW5jZU1vZGVQcmVzZXQobW9kZTogJ3BlcmZvcm1hbmNlJyB8ICdiYWxhbmNlZCcgfCAncmVsaWFiaWxpdHknKSB7XG4gICAgY29uc3QgcGVyZiA9IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24ucGVyZm9ybWFuY2U7XG4gICAgXG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdwZXJmb3JtYW5jZSc6XG4gICAgICAgIHBlcmYuZW5hYmxlQ29ubmVjdGlvblBvb2xpbmcgPSB0cnVlO1xuICAgICAgICBwZXJmLm1heENvbmN1cnJlbnRSZXF1ZXN0cyA9IDEwO1xuICAgICAgICBwZXJmLmVuYWJsZUNvbXByZXNzaW9uID0gZmFsc2U7XG4gICAgICAgIHBlcmYuZW5hYmxlQ2FjaGluZyA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVsaWFiaWxpdHknOlxuICAgICAgICBwZXJmLmVuYWJsZUNvbm5lY3Rpb25Qb29saW5nID0gdHJ1ZTtcbiAgICAgICAgcGVyZi5tYXhDb25jdXJyZW50UmVxdWVzdHMgPSAzO1xuICAgICAgICBwZXJmLmVuYWJsZUNvbXByZXNzaW9uID0gdHJ1ZTtcbiAgICAgICAgcGVyZi5lbmFibGVDYWNoaW5nID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gYmFsYW5jZWRcbiAgICAgICAgcGVyZi5lbmFibGVDb25uZWN0aW9uUG9vbGluZyA9IHRydWU7XG4gICAgICAgIHBlcmYubWF4Q29uY3VycmVudFJlcXVlc3RzID0gNTtcbiAgICAgICAgcGVyZi5lbmFibGVDb21wcmVzc2lvbiA9IHRydWU7XG4gICAgICAgIHBlcmYuZW5hYmxlQ2FjaGluZyA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRXhwZXJ0T3B0aW9uc1Zpc2liaWxpdHkoKSB7XG4gICAgY29uc3QgZXhwZXJ0T3B0aW9ucyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmV4cGVydC1vcHRpb24nKTtcbiAgICBleHBlcnRPcHRpb25zLmZvckVhY2goZWwgPT4ge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnNob3dFeHBlcnRPcHRpb25zKSB7XG4gICAgICAgIGVsLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUHJvZmlsZVNlbGVjdG9yKCkge1xuICAgIHRoaXMucHJvZmlsZVNlbGVjdG9yLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gQWRkIGRlZmF1bHQgcHJvZmlsZVxuICAgIGNvbnN0IGRlZmF1bHRPcHRpb24gPSB0aGlzLnByb2ZpbGVTZWxlY3Rvci5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogJ2RlZmF1bHQnIH0pO1xuICAgIGRlZmF1bHRPcHRpb24udGV4dENvbnRlbnQgPSAnRGVmYXVsdCBDb25maWd1cmF0aW9uJztcbiAgICBcbiAgICAvLyBBZGQgY3VzdG9tIHByb2ZpbGVzXG4gICAgdGhpcy5wcm9maWxlcy5mb3JFYWNoKHByb2ZpbGUgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5wcm9maWxlU2VsZWN0b3IuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6IHByb2ZpbGUuaWQgfSk7XG4gICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBwcm9maWxlLm5hbWU7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGxvYWRQcm9maWxlcygpIHtcbiAgICAvLyBMb2FkIHNhdmVkIHByb2ZpbGVzIGZyb20gc3RvcmFnZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzYXZlZFByb2ZpbGVzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlndXJhdGlvblByb2ZpbGVzIHx8IFtdO1xuICAgICAgdGhpcy5wcm9maWxlcyA9IHNhdmVkUHJvZmlsZXMubWFwKChwOiBhbnkpID0+ICh7XG4gICAgICAgIC4uLnAsXG4gICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKHAuY3JlYXRlZCksXG4gICAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUocC5sYXN0TW9kaWZpZWQpXG4gICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbmZpZ3VyYXRpb24gcHJvZmlsZXM6JywgZXJyb3IpO1xuICAgICAgdGhpcy5wcm9maWxlcyA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZFByb2ZpbGUocHJvZmlsZUlkOiBzdHJpbmcpIHtcbiAgICBpZiAocHJvZmlsZUlkID09PSAnZGVmYXVsdCcpIHtcbiAgICAgIHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gPSB0aGlzLmdldERlZmF1bHRDb25maWd1cmF0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGVzLmZpbmQocCA9PiBwLmlkID09PSBwcm9maWxlSWQpO1xuICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IHsgLi4ucHJvZmlsZS5jb25maWcgfTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5yZW5kZXJTZXR0aW5ncygpO1xuICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHNob3dTYXZlUHJvZmlsZU1vZGFsKCkge1xuICAgIGNvbnN0IG5hbWUgPSBwcm9tcHQoJ0VudGVyIHByb2ZpbGUgbmFtZTonKTtcbiAgICBpZiAoIW5hbWUpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHByb21wdCgnRW50ZXIgcHJvZmlsZSBkZXNjcmlwdGlvbiAob3B0aW9uYWwpOicpIHx8ICcnO1xuICAgIHRoaXMuc2F2ZUFzUHJvZmlsZShuYW1lLCBkZXNjcmlwdGlvbik7XG4gIH1cblxuICBwcml2YXRlIHNhdmVBc1Byb2ZpbGUobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKSB7XG4gICAgY29uc3QgcHJvZmlsZTogQ29uZmlndXJhdGlvblByb2ZpbGUgPSB7XG4gICAgICBpZDogYHByb2ZpbGUtJHtEYXRlLm5vdygpfWAsXG4gICAgICBuYW1lLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBjb25maWc6IHsgLi4udGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiB9LFxuICAgICAgY3JlYXRlZDogbmV3IERhdGUoKSxcbiAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSxcbiAgICAgIGlzRGVmYXVsdDogZmFsc2VcbiAgICB9O1xuICAgIFxuICAgIHRoaXMucHJvZmlsZXMucHVzaChwcm9maWxlKTtcbiAgICB0aGlzLnVwZGF0ZVByb2ZpbGVTZWxlY3RvcigpO1xuICAgIHRoaXMuc2F2ZVByb2ZpbGVzKCk7XG4gICAgXG4gICAgbmV3IE5vdGljZShgUHJvZmlsZSBcIiR7bmFtZX1cIiBzYXZlZCBzdWNjZXNzZnVsbHlgKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsZXRlQ3VycmVudFByb2ZpbGUoKSB7XG4gICAgY29uc3QgY3VycmVudFByb2ZpbGVJZCA9IHRoaXMucHJvZmlsZVNlbGVjdG9yLnZhbHVlO1xuICAgIGlmIChjdXJyZW50UHJvZmlsZUlkID09PSAnZGVmYXVsdCcpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBkZWxldGUgdGhlIGRlZmF1bHQgcHJvZmlsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwcm9maWxlID0gdGhpcy5wcm9maWxlcy5maW5kKHAgPT4gcC5pZCA9PT0gY3VycmVudFByb2ZpbGVJZCk7XG4gICAgaWYgKCFwcm9maWxlKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybShgRGVsZXRlIHByb2ZpbGUgXCIke3Byb2ZpbGUubmFtZX1cIj9gKTtcbiAgICBpZiAoY29uZmlybWVkKSB7XG4gICAgICB0aGlzLnByb2ZpbGVzID0gdGhpcy5wcm9maWxlcy5maWx0ZXIocCA9PiBwLmlkICE9PSBjdXJyZW50UHJvZmlsZUlkKTtcbiAgICAgIHRoaXMudXBkYXRlUHJvZmlsZVNlbGVjdG9yKCk7XG4gICAgICB0aGlzLnNhdmVQcm9maWxlcygpO1xuICAgICAgdGhpcy5sb2FkUHJvZmlsZSgnZGVmYXVsdCcpO1xuICAgICAgXG4gICAgICBuZXcgTm90aWNlKGBQcm9maWxlIFwiJHtwcm9maWxlLm5hbWV9XCIgZGVsZXRlZGApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlQ29uZmlndXJhdGlvbigpO1xuICAgICAgXG4gICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICBjb25zdCBwcm9jZWVkID0gY29uZmlybSgnQ29uZmlndXJhdGlvbiBoYXMgZXJyb3JzLiBTYXZlIGFueXdheT8nKTtcbiAgICAgICAgaWYgKCFwcm9jZWVkKSByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNhdmUgdG8gcGx1Z2luIHNldHRpbmdzXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZHZhbmNlZENvbmZpZ3VyYXRpb24gPSB7IC4uLnRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24gfTtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgXG4gICAgICB0aGlzLmhhc1Vuc2F2ZWRDaGFuZ2VzID0gZmFsc2U7XG4gICAgICBuZXcgTm90aWNlKCfinIUgQ29uZmlndXJhdGlvbiBzYXZlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ+KdjCBGYWlsZWQgdG8gc2F2ZSBjb25maWd1cmF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZXNldFRvRGVmYXVsdHMoKSB7XG4gICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybSgnUmVzZXQgYWxsIHNldHRpbmdzIHRvIGRlZmF1bHQgdmFsdWVzPyBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuJyk7XG4gICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IHRoaXMuZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb24oKTtcbiAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MoKTtcbiAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICBuZXcgTm90aWNlKCdDb25maWd1cmF0aW9uIHJlc2V0IHRvIGRlZmF1bHRzJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29uZmlndXJhdGlvbigpIHtcbiAgICBuZXcgTm90aWNlKCdUZXN0aW5nIGNvbmZpZ3VyYXRpb24uLi4nKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gU2ltdWxhdGUgY29uZmlndXJhdGlvbiB0ZXN0XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuICAgICAgXG4gICAgICBjb25zdCB0ZXN0UmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiBNYXRoLnJhbmRvbSgpID4gMC4yLCAvLyA4MCUgc3VjY2VzcyByYXRlIGZvciBkZW1vXG4gICAgICAgIGxhdGVuY3k6IE1hdGgucmFuZG9tKCkgKiAyMDAgKyA1MCxcbiAgICAgICAgZXJyb3JzOiBNYXRoLnJhbmRvbSgpID4gMC44ID8gWydDb25uZWN0aW9uIHRpbWVvdXQnXSA6IFtdXG4gICAgICB9O1xuICAgICAgXG4gICAgICBpZiAodGVzdFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKchSBDb25maWd1cmF0aW9uIHRlc3QgcGFzc2VkICgke3Rlc3RSZXN1bHQubGF0ZW5jeS50b0ZpeGVkKDApfW1zIGF2ZXJhZ2UpYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGDinYwgQ29uZmlndXJhdGlvbiB0ZXN0IGZhaWxlZDogJHt0ZXN0UmVzdWx0LmVycm9ycy5qb2luKCcsICcpfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbmZpZ3VyYXRpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgn4p2MIENvbmZpZ3VyYXRpb24gdGVzdCBmYWlsZWQnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGV4cG9ydENvbmZpZ3VyYXRpb24oKSB7XG4gICAgY29uc3QgZXhwb3J0RGF0YSA9IHtcbiAgICAgIHZlcnNpb246ICcxLjAnLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBjb25maWd1cmF0aW9uOiB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLFxuICAgICAgcHJvZmlsZXM6IHRoaXMucHJvZmlsZXNcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoZXhwb3J0RGF0YSwgbnVsbCwgMildLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgIFxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5ocmVmID0gdXJsO1xuICAgIGEuZG93bmxvYWQgPSBgdmF1bHRwaWxvdC1jb25maWctJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX0uanNvbmA7XG4gICAgYS5jbGljaygpO1xuICAgIFxuICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICBuZXcgTm90aWNlKCdDb25maWd1cmF0aW9uIGV4cG9ydGVkIHN1Y2Nlc3NmdWxseScpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbXBvcnRDb25maWd1cmF0aW9uKCkge1xuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBpbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgIGlucHV0LmFjY2VwdCA9ICcuanNvbic7XG4gICAgXG4gICAgaW5wdXQub25jaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgZmlsZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5maWxlcz8uWzBdO1xuICAgICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRhdGEuY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IGRhdGEuY29uZmlndXJhdGlvbjtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMub25Db25maWd1cmF0aW9uQ2hhbmdlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDb25maWd1cmF0aW9uIGltcG9ydGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF0YS5wcm9maWxlcykge1xuICAgICAgICAgICAgdGhpcy5wcm9maWxlcyA9IGRhdGEucHJvZmlsZXMubWFwKChwOiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgIC4uLnAsXG4gICAgICAgICAgICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKHAuY3JlYXRlZCksXG4gICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUocC5sYXN0TW9kaWZpZWQpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2ZpbGVTZWxlY3RvcigpO1xuICAgICAgICAgICAgdGhpcy5zYXZlUHJvZmlsZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGltcG9ydCBjb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCfinYwgRmFpbGVkIHRvIGltcG9ydCBjb25maWd1cmF0aW9uOiBJbnZhbGlkIGZpbGUgZm9ybWF0Jyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgIH07XG4gICAgXG4gICAgaW5wdXQuY2xpY2soKTtcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZVByb2ZpbGVzKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maWd1cmF0aW9uUHJvZmlsZXMgPSB0aGlzLnByb2ZpbGVzO1xuICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHByb2ZpbGVzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UmVhbFRpbWVWYWxpZGF0aW9uKCkge1xuICAgIC8vIFJlYWwtdGltZSB2YWxpZGF0aW9uIGlzIGhhbmRsZWQgYnkgb25Db25maWd1cmF0aW9uQ2hhbmdlXG4gICAgLy8gVGhpcyBjb3VsZCBiZSBleHRlbmRlZCB3aXRoIG1vcmUgc29waGlzdGljYXRlZCB2YWxpZGF0aW9uXG4gICAgY29uc29sZS5sb2coJ1JlYWwtdGltZSB2YWxpZGF0aW9uIGVuYWJsZWQnKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBQaGFzZTNJbnRlZ3JhdGlvbiAtIE1haW4gaW50ZWdyYXRpb24gY29tcG9uZW50IGZvciBWYXVsdFBpbG90IFBoYXNlIDMgZmVhdHVyZXNcbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIFNldHRpbmcsIE5vdGljZSwgV29ya3NwYWNlTGVhZiwgTW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IE9uYm9hcmRpbmdXaXphcmQgfSBmcm9tICcuL09uYm9hcmRpbmdXaXphcmQnO1xuaW1wb3J0IHsgVHJhbnNwb3J0RGFzaGJvYXJkIH0gZnJvbSAnLi9UcmFuc3BvcnREYXNoYm9hcmQnO1xuaW1wb3J0IHsgQWR2YW5jZWRTZXR0aW5ncyB9IGZyb20gJy4vQWR2YW5jZWRTZXR0aW5ncyc7XG5pbXBvcnQgeyBSZWNvbW1lbmRhdGlvbkVuZ2luZSwgUmVjb21tZW5kYXRpb25Db250ZXh0LCBSZWNvbW1lbmRhdGlvbiB9IGZyb20gJy4uL3NlcnZpY2VzL1JlY29tbWVuZGF0aW9uRW5naW5lJztcbmltcG9ydCB7IFRyYW5zcG9ydFR5cGUgfSBmcm9tICcuLi9kZXZwaXBlL3RyYW5zcG9ydHMvRGV2UGlwZVRyYW5zcG9ydCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGhhc2UzQ29uZmlnIHtcbiAgZW5hYmxlT25ib2FyZGluZzogYm9vbGVhbjtcbiAgZW5hYmxlRGFzaGJvYXJkOiBib29sZWFuO1xuICBlbmFibGVSZWNvbW1lbmRhdGlvbnM6IGJvb2xlYW47XG4gIGVuYWJsZUFkdmFuY2VkU2V0dGluZ3M6IGJvb2xlYW47XG4gIGF1dG9TaG93T25ib2FyZGluZzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFBoYXNlM0ludGVncmF0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY29uZmlnOiBQaGFzZTNDb25maWc7XG4gIHByaXZhdGUgcmVjb21tZW5kYXRpb25FbmdpbmU6IFJlY29tbWVuZGF0aW9uRW5naW5lO1xuICBcbiAgLy8gQ29tcG9uZW50IGluc3RhbmNlc1xuICBwcml2YXRlIG9uYm9hcmRpbmdXaXphcmQ/OiBPbmJvYXJkaW5nV2l6YXJkO1xuICBwcml2YXRlIHRyYW5zcG9ydERhc2hib2FyZD86IFRyYW5zcG9ydERhc2hib2FyZDtcbiAgcHJpdmF0ZSBhZHZhbmNlZFNldHRpbmdzPzogQWR2YW5jZWRTZXR0aW5ncztcbiAgXG4gIC8vIFVJIGNvbnRhaW5lcnNcbiAgcHJpdmF0ZSBkYXNoYm9hcmRDb250YWluZXI/OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBzZXR0aW5nc0NvbnRhaW5lcj86IEhUTUxFbGVtZW50O1xuICBcbiAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luLCBjb25maWc6IFBhcnRpYWw8UGhhc2UzQ29uZmlnPiA9IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGVuYWJsZU9uYm9hcmRpbmc6IHRydWUsXG4gICAgICBlbmFibGVEYXNoYm9hcmQ6IHRydWUsXG4gICAgICBlbmFibGVSZWNvbW1lbmRhdGlvbnM6IHRydWUsXG4gICAgICBlbmFibGVBZHZhbmNlZFNldHRpbmdzOiB0cnVlLFxuICAgICAgYXV0b1Nob3dPbmJvYXJkaW5nOiAhcGx1Z2luLnNldHRpbmdzLm9uYm9hcmRpbmdDb21wbGV0ZSxcbiAgICAgIC4uLmNvbmZpZ1xuICAgIH07XG4gICAgXG4gICAgdGhpcy5yZWNvbW1lbmRhdGlvbkVuZ2luZSA9IG5ldyBSZWNvbW1lbmRhdGlvbkVuZ2luZSgpO1xuICB9XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKCdQaGFzZSAzIEludGVncmF0aW9uIGxvYWRpbmcuLi4nKTtcbiAgICBcbiAgICAvLyBSZWdpc3RlciBjb21tYW5kc1xuICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xuICAgIFxuICAgIC8vIFNldHVwIFVJIGNvbXBvbmVudHNcbiAgICBhd2FpdCB0aGlzLnNldHVwQ29tcG9uZW50cygpO1xuICAgIFxuICAgIC8vIFNob3cgb25ib2FyZGluZyBpZiBuZWVkZWRcbiAgICBpZiAodGhpcy5jb25maWcuYXV0b1Nob3dPbmJvYXJkaW5nKSB7XG4gICAgICB0aGlzLnNob3dPbmJvYXJkaW5nKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFN0YXJ0IHJlY29tbWVuZGF0aW9uIGVuZ2luZVxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVSZWNvbW1lbmRhdGlvbnMpIHtcbiAgICAgIHRoaXMuc3RhcnRSZWNvbW1lbmRhdGlvbkVuZ2luZSgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnUGhhc2UgMyBJbnRlZ3JhdGlvbiBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnUGhhc2UgMyBJbnRlZ3JhdGlvbiB1bmxvYWRpbmcuLi4nKTtcbiAgICBcbiAgICAvLyBDbGVhbnVwIGNvbXBvbmVudHNcbiAgICB0aGlzLmNsZWFudXAoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpIHtcbiAgICAvLyBPbmJvYXJkaW5nIGNvbW1hbmRcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlT25ib2FyZGluZykge1xuICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2hvdy1vbmJvYXJkaW5nJyxcbiAgICAgICAgbmFtZTogJ1Nob3cgU2V0dXAgV2l6YXJkJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2hvd09uYm9hcmRpbmcoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIERhc2hib2FyZCBjb21tYW5kXG4gICAgaWYgKHRoaXMuY29uZmlnLmVuYWJsZURhc2hib2FyZCkge1xuICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2hvdy1kYXNoYm9hcmQnLFxuICAgICAgICBuYW1lOiAnU2hvdyBUcmFuc3BvcnQgRGFzaGJvYXJkJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2hvd0Rhc2hib2FyZCgpXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWR2YW5jZWQgc2V0dGluZ3MgY29tbWFuZFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVBZHZhbmNlZFNldHRpbmdzKSB7XG4gICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdzaG93LWFkdmFuY2VkLXNldHRpbmdzJyxcbiAgICAgICAgbmFtZTogJ1Nob3cgQWR2YW5jZWQgU2V0dGluZ3MnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zaG93QWR2YW5jZWRTZXR0aW5ncygpXG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVjb21tZW5kYXRpb25zIGNvbW1hbmRcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlUmVjb21tZW5kYXRpb25zKSB7XG4gICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdzaG93LXJlY29tbWVuZGF0aW9ucycsXG4gICAgICAgIG5hbWU6ICdTaG93IEFJIFJlY29tbWVuZGF0aW9ucycsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNob3dSZWNvbW1lbmRhdGlvbnMoKVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFF1aWNrIG9wdGltaXphdGlvbiBjb21tYW5kXG4gICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3F1aWNrLW9wdGltaXplJyxcbiAgICAgIG5hbWU6ICdRdWljayBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb24nLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMucXVpY2tPcHRpbWl6ZSgpXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNldHVwQ29tcG9uZW50cygpIHtcbiAgICAvLyBMb2FkIHRoZSBQaGFzZSAzIENTU1xuICAgIHRoaXMubG9hZFBoYXNlM1N0eWxlcygpO1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgZGFzaGJvYXJkIGlmIGVuYWJsZWRcbiAgICBpZiAodGhpcy5jb25maWcuZW5hYmxlRGFzaGJvYXJkKSB7XG4gICAgICB0aGlzLnNldHVwRGFzaGJvYXJkKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgYWR2YW5jZWQgc2V0dGluZ3MgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLmNvbmZpZy5lbmFibGVBZHZhbmNlZFNldHRpbmdzKSB7XG4gICAgICB0aGlzLnNldHVwQWR2YW5jZWRTZXR0aW5ncygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbG9hZFBoYXNlM1N0eWxlcygpIHtcbiAgICAvLyBBZGQgdGhlIFBoYXNlIDMgc3R5bGVzIGRpcmVjdGx5IGFzIGlubGluZSBzdHlsZXNcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtcGhhc2UzLXN0eWxlcycpKSB7XG4gICAgICByZXR1cm47IC8vIEFscmVhZHkgbG9hZGVkXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC1waGFzZTMtc3R5bGVzJztcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuLyogVmF1bHRQaWxvdCBQaGFzZSAzIENvbXBvbmVudCBTdHlsZXMgKi9cblxuLyogT25ib2FyZGluZyBXaXphcmQgU3R5bGVzICovXG4udmF1bHRwaWxvdC1vbmJvYXJkaW5nLW1vZGFsIHtcbiAgd2lkdGg6IDYwMHB4O1xuICBtYXgtd2lkdGg6IDkwdnc7XG59XG5cbi52YXVsdHBpbG90LW9uYm9hcmRpbmcge1xuICBtYXgtaGVpZ2h0OiA4MHZoO1xuICBvdmVyZmxvdy15OiBhdXRvO1xufVxuXG4ub25ib2FyZGluZy1oZWFkZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4ub25ib2FyZGluZy1zdWJ0aXRsZSB7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgbWFyZ2luLXRvcDogNXB4O1xufVxuXG4ub25ib2FyZGluZy1wcm9ncmVzcyB7XG4gIG1hcmdpbi1ib3R0b206IDI1cHg7XG59XG5cbi5wcm9ncmVzcy1zdGVwcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBnYXA6IDE1cHg7XG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XG59XG5cbi5wcm9ncmVzcy1zdGVwIHtcbiAgd2lkdGg6IDMycHg7XG4gIGhlaWdodDogMzJweDtcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTtcbn1cblxuLnByb2dyZXNzLXN0ZXAuYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLnByb2dyZXNzLXN0ZXAuY29tcGxldGVkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5wcm9ncmVzcy1zdGVwLmluYWN0aXZlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi5wcm9ncmVzcy1iYXIge1xuICBoZWlnaHQ6IDRweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5wcm9ncmVzcy1maWxsIHtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzIGVhc2U7XG59XG5cbi5vbmJvYXJkaW5nLXN0ZXAtY29udGFpbmVyIHtcbiAgbWluLWhlaWdodDogMzAwcHg7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbi5vbmJvYXJkaW5nLXN0ZXAge1xuICBwYWRkaW5nOiAyMHB4IDA7XG59XG5cbi5vbmJvYXJkaW5nLW5hdmlnYXRpb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMTBweDtcbiAgcGFkZGluZy10b3A6IDIwcHg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi8qIFRyYW5zcG9ydCBEYXNoYm9hcmQgU3R5bGVzICovXG4udHJhbnNwb3J0LWRhc2hib2FyZCB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgb3ZlcmZsb3cteDogYXV0bztcbn1cblxuLmRhc2hib2FyZC1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDI1cHg7XG4gIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4uc3RhdHVzLWNhcmQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBwYWRkaW5nOiAxNnB4O1xuICBtYXJnaW46IDhweCAwO1xufVxuXG4uc3RhdHVzLWNhcmQuaGVhbHRoeSB7XG4gIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29sb3ItZ3JlZW4pO1xufVxuXG4uc3RhdHVzLWNhcmQud2FybmluZyB7XG4gIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29sb3Itb3JhbmdlKTtcbn1cblxuLnN0YXR1cy1jYXJkLmVycm9yIHtcbiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB2YXIoLS1jb2xvci1yZWQpO1xufVxuXG4ubWV0cmljcy1ncmlkIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyMDBweCwgMWZyKSk7XG4gIGdhcDogMTVweDtcbiAgbWFyZ2luOiAyMHB4IDA7XG59XG5cbi5tZXRyaWMtY2FyZCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBwYWRkaW5nOiAxNXB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5tZXRyaWMtdmFsdWUge1xuICBmb250LXNpemU6IDI0cHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLm1ldHJpYy1sYWJlbCB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBtYXJnaW4tdG9wOiA1cHg7XG59XG5cbi8qIEFkdmFuY2VkIFNldHRpbmdzIFN0eWxlcyAqL1xuLmFkdmFuY2VkLXNldHRpbmdzIHtcbiAgcGFkZGluZzogMjBweDtcbn1cblxuLnNldHRpbmdzLXNlY3Rpb24ge1xuICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICBwYWRkaW5nLWJvdHRvbTogMjBweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cblxuLnNldHRpbmdzLXNlY3Rpb246bGFzdC1jaGlsZCB7XG4gIGJvcmRlci1ib3R0b206IG5vbmU7XG59XG5cbi5zZWN0aW9uLWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcbn1cblxuLnNlY3Rpb24tdGl0bGUge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5wcm9maWxlLW1hbmFnZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogMTVweDtcbiAgbWFyZ2luOiAxNXB4IDA7XG59XG5cbi5wcm9maWxlcy1saXN0IHtcbiAgbWFyZ2luOiAxNXB4IDA7XG59XG5cbi5wcm9maWxlLWl0ZW0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDhweCAxMnB4O1xuICBtYXJnaW46IDVweCAwO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuLnByb2ZpbGUtaXRlbS5hY3RpdmUge1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xufVxuXG4uY29uZmlnLWdyb3VwIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIHBhZGRpbmc6IDE1cHg7XG4gIG1hcmdpbjogMTBweCAwO1xufVxuXG4uY29uZmlnLXJvdyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luOiAxMHB4IDA7XG59XG5cbi52YWxpZGF0aW9uLXN0YXR1cyB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgcGFkZGluZzogNHB4IDhweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW4tbGVmdDogMTBweDtcbn1cblxuLnZhbGlkYXRpb24tc3RhdHVzLnZhbGlkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbn1cblxuLnZhbGlkYXRpb24tc3RhdHVzLmludmFsaWQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG59XG5cbi8qIE1vZGFsIFN0eWxlcyAqL1xuLnZhdWx0cGlsb3QtcGhhc2UzLW1vZGFsIHtcbiAgd2lkdGg6IDcwMHB4O1xuICBtYXgtd2lkdGg6IDk1dnc7XG59XG5cbi5tb2RhbC1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIHBhZGRpbmctYm90dG9tOiAxNXB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuXG4ubW9kYWwtYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogMTBweDtcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgcGFkZGluZy10b3A6IDE1cHg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG59XG5cbi8qIFJlY29tbWVuZGF0aW9uIEVuZ2luZSBTdHlsZXMgKi9cbi5yZWNvbW1lbmRhdGlvbnMtY29udGFpbmVyIHtcbiAgbWFyZ2luOiAyMHB4IDA7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi1jYXJkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogMTZweDtcbiAgbWFyZ2luOiAxMnB4IDA7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi1jYXJkLmhpZ2gtcHJpb3JpdHkge1xuICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHZhcigtLWNvbG9yLXJlZCk7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi1jYXJkLm1lZGl1bS1wcmlvcml0eSB7XG4gIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29sb3Itb3JhbmdlKTtcbn1cblxuLnJlY29tbWVuZGF0aW9uLWNhcmQubG93LXByaW9yaXR5IHtcbiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB2YXIoLS1jb2xvci1ncmVlbik7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi10aXRsZSB7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5yZWNvbW1lbmRhdGlvbi1hY3Rpb25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG59XG5cbi8qIFJlc3BvbnNpdmUgRGVzaWduICovXG5AbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgLnZhdWx0cGlsb3Qtb25ib2FyZGluZy1tb2RhbCxcbiAgLnZhdWx0cGlsb3QtcGhhc2UzLW1vZGFsIHtcbiAgICB3aWR0aDogOTV2dztcbiAgfVxuICBcbiAgLm1ldHJpY3MtZ3JpZCB7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gIH1cbiAgXG4gIC5kYXNoYm9hcmQtaGVhZGVyLFxuICAubW9kYWwtaGVhZGVyIHtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogMTBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cbiAgXG4gIC5jb25maWctcm93IHtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgIGdhcDogMTBweDtcbiAgfVxufVxuYDtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cERhc2hib2FyZCgpIHtcbiAgICAvLyBEYXNoYm9hcmQgd2lsbCBiZSBjcmVhdGVkIHdoZW4gbmVlZGVkXG4gICAgY29uc29sZS5sb2coJ0Rhc2hib2FyZCBzZXR1cCByZWFkeScpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEFkdmFuY2VkU2V0dGluZ3MoKSB7XG4gICAgLy8gQWR2YW5jZWQgc2V0dGluZ3Mgd2lsbCBiZSBjcmVhdGVkIHdoZW4gbmVlZGVkXG4gICAgY29uc29sZS5sb2coJ0FkdmFuY2VkIHNldHRpbmdzIHNldHVwIHJlYWR5Jyk7XG4gIH1cblxuICBwcml2YXRlIHNob3dPbmJvYXJkaW5nKCkge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlT25ib2FyZGluZykge1xuICAgICAgbmV3IE5vdGljZSgnT25ib2FyZGluZyBpcyBkaXNhYmxlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5vbmJvYXJkaW5nV2l6YXJkKSB7XG4gICAgICAvLyBDbG9zZSBleGlzdGluZyB3aXphcmRcbiAgICAgIHRoaXMub25ib2FyZGluZ1dpemFyZC5jbG9zZSgpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLm9uYm9hcmRpbmdXaXphcmQgPSBuZXcgT25ib2FyZGluZ1dpemFyZCh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luKTtcbiAgICB0aGlzLm9uYm9hcmRpbmdXaXphcmQub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93RGFzaGJvYXJkKCkge1xuICAgIGlmICghdGhpcy5jb25maWcuZW5hYmxlRGFzaGJvYXJkKSB7XG4gICAgICBuZXcgTm90aWNlKCdEYXNoYm9hcmQgaXMgZGlzYWJsZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIG9yIHNob3cgZGFzaGJvYXJkIG1vZGFsXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgRGFzaGJvYXJkTW9kYWwodGhpcy5wbHVnaW4pO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0FkdmFuY2VkU2V0dGluZ3MoKSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVBZHZhbmNlZFNldHRpbmdzKSB7XG4gICAgICBuZXcgTm90aWNlKCdBZHZhbmNlZCBzZXR0aW5ncyBhcmUgZGlzYWJsZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIG9yIHNob3cgYWR2YW5jZWQgc2V0dGluZ3MgbW9kYWxcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBBZHZhbmNlZFNldHRpbmdzTW9kYWwodGhpcy5wbHVnaW4pO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2hvd1JlY29tbWVuZGF0aW9ucygpIHtcbiAgICBpZiAoIXRoaXMuY29uZmlnLmVuYWJsZVJlY29tbWVuZGF0aW9ucykge1xuICAgICAgbmV3IE5vdGljZSgnUmVjb21tZW5kYXRpb25zIGFyZSBkaXNhYmxlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBuZXcgTm90aWNlKCdHZW5lcmF0aW5nIEFJIHJlY29tbWVuZGF0aW9ucy4uLicpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgdGhpcy5idWlsZFJlY29tbWVuZGF0aW9uQ29udGV4dCgpO1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgdGhpcy5yZWNvbW1lbmRhdGlvbkVuZ2luZS5nZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhjb250ZXh0KTtcbiAgICAgIFxuICAgICAgaWYgKHJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFJlY29tbWVuZGF0aW9uc01vZGFsKHRoaXMucGx1Z2luLCByZWNvbW1lbmRhdGlvbnMsIHRoaXMucmVjb21tZW5kYXRpb25FbmdpbmUpO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdObyByZWNvbW1lbmRhdGlvbnMgYXZhaWxhYmxlIGF0IHRoaXMgdGltZScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgcmVjb21tZW5kYXRpb25zOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBnZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnMnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHF1aWNrT3B0aW1pemUoKSB7XG4gICAgbmV3IE5vdGljZSgnUnVubmluZyBxdWljayBvcHRpbWl6YXRpb24uLi4nKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGV4dCA9IGF3YWl0IHRoaXMuYnVpbGRSZWNvbW1lbmRhdGlvbkNvbnRleHQoKTtcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGF3YWl0IHRoaXMucmVjb21tZW5kYXRpb25FbmdpbmUuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoY29udGV4dCk7XG4gICAgICBcbiAgICAgIC8vIEZpbmQgcXVpY2ssIGF1dG9tYXRpYyBvcHRpbWl6YXRpb25zXG4gICAgICBjb25zdCBxdWlja1JlY3MgPSByZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHJlYyA9PiBcbiAgICAgICAgcmVjLmltcGxlbWVudGF0aW9uLmRpZmZpY3VsdHkgPT09ICdlYXN5JyAmJiBcbiAgICAgICAgcmVjLmltcGxlbWVudGF0aW9uLnN0ZXBzLnNvbWUoc3RlcCA9PiBzdGVwLmFjdGlvbiA9PT0gJ2F1dG9tYXRpYycpXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAocXVpY2tSZWNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQXBwbHkgdGhlIGZpcnN0IHF1aWNrIHJlY29tbWVuZGF0aW9uXG4gICAgICAgIGNvbnN0IHJlYyA9IHF1aWNrUmVjc1swXTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVJlY29tbWVuZGF0aW9uKHJlYyk7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKchSBBcHBsaWVkOiAke3JlYy50aXRsZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIHF1aWNrIG9wdGltaXphdGlvbnMgYXZhaWxhYmxlLiBVc2UgXCJTaG93IEFJIFJlY29tbWVuZGF0aW9uc1wiIGZvciBtYW51YWwgb3B0aW1pemF0aW9ucy4nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignUXVpY2sgb3B0aW1pemF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdRdWljayBvcHRpbWl6YXRpb24gZmFpbGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBidWlsZFJlY29tbWVuZGF0aW9uQ29udGV4dCgpOiBQcm9taXNlPFJlY29tbWVuZGF0aW9uQ29udGV4dD4ge1xuICAgIC8vIEJ1aWxkIGNvbnRleHQgZm9yIHJlY29tbWVuZGF0aW9uIGVuZ2luZVxuICAgIGNvbnN0IGNvbnRleHQ6IFJlY29tbWVuZGF0aW9uQ29udGV4dCA9IHtcbiAgICAgIHNlc3Npb25JZDogYHNlc3Npb24tJHtEYXRlLm5vdygpfWAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICBjdXJyZW50VHJhbnNwb3J0OiBUcmFuc3BvcnRUeXBlLkhUVFAsIC8vIERlZmF1bHQsIHNob3VsZCBiZSBkeW5hbWljXG4gICAgICBhdmFpbGFibGVUcmFuc3BvcnRzOiBbVHJhbnNwb3J0VHlwZS5IVFRQLCBUcmFuc3BvcnRUeXBlLldFQlNPQ0tFVCwgVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNXSxcbiAgICAgIHBlcmZvcm1hbmNlTWV0cmljczoge1xuICAgICAgICBhdmVyYWdlTGF0ZW5jeTogMTUwICsgTWF0aC5yYW5kb20oKSAqIDEwMCxcbiAgICAgICAgZXJyb3JSYXRlOiBNYXRoLnJhbmRvbSgpICogMC4wNSxcbiAgICAgICAgdGhyb3VnaHB1dDogMTAwICsgTWF0aC5yYW5kb20oKSAqIDUwLFxuICAgICAgICByZWxpYWJpbGl0eTogMC45NSArIE1hdGgucmFuZG9tKCkgKiAwLjA1LFxuICAgICAgICB0cmFuc3BvcnRVc2FnZToge1xuICAgICAgICAgIFtUcmFuc3BvcnRUeXBlLkhUVFBdOiAwLjcsXG4gICAgICAgICAgW1RyYW5zcG9ydFR5cGUuV0VCU09DS0VUXTogMC4yNSxcbiAgICAgICAgICBbVHJhbnNwb3J0VHlwZS5GSUxFU1lTVEVNXTogMC4wNVxuICAgICAgICB9LFxuICAgICAgICB0aW1lV2luZG93OiAnMWgnXG4gICAgICB9LFxuICAgICAgdXNlckJlaGF2aW9yOiB7XG4gICAgICAgIHVzYWdlRnJlcXVlbmN5OiAnbWVkaXVtJyxcbiAgICAgICAgcGVha1VzYWdlSG91cnM6IFs5LCAxMCwgMTEsIDE0LCAxNSwgMTZdLFxuICAgICAgICBwcmVmZXJyZWRGZWF0dXJlczogWydkYXNoYm9hcmQnLCAncmVjb21tZW5kYXRpb25zJ10sXG4gICAgICAgIGVycm9yVG9sZXJhbmNlOiAnbWVkaXVtJyxcbiAgICAgICAgcGVyZm9ybWFuY2VTZW5zaXRpdml0eTogJ21lZGl1bSdcbiAgICAgIH0sXG4gICAgICBlbnZpcm9ubWVudENvbnRleHQ6IHtcbiAgICAgICAgcGxhdGZvcm06ICdvYnNpZGlhbicsXG4gICAgICAgIGNvbm5lY3Rpdml0eTogJ2dvb2QnLFxuICAgICAgICBiYW5kd2lkdGg6IDUwLFxuICAgICAgICBsYXRlbmN5OiAzMCxcbiAgICAgICAgc3RhYmlsaXR5OiAwLjk1XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gY29udGV4dDtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYXBwbHlSZWNvbW1lbmRhdGlvbihyZWNvbW1lbmRhdGlvbjogUmVjb21tZW5kYXRpb24pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYEFwcGx5aW5nIHJlY29tbWVuZGF0aW9uOiAke3JlY29tbWVuZGF0aW9uLnRpdGxlfWApO1xuICAgICAgXG4gICAgICAvLyBGaW5kIGF1dG9tYXRpYyBzdGVwc1xuICAgICAgY29uc3QgYXV0b1N0ZXBzID0gcmVjb21tZW5kYXRpb24uaW1wbGVtZW50YXRpb24uc3RlcHMuZmlsdGVyKHN0ZXAgPT4gc3RlcC5hY3Rpb24gPT09ICdhdXRvbWF0aWMnKTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBzdGVwIG9mIGF1dG9TdGVwcykge1xuICAgICAgICBzd2l0Y2ggKHN0ZXAuaWQpIHtcbiAgICAgICAgICBjYXNlICdzd2l0Y2gtdHJhbnNwb3J0JzpcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHRyYW5zcG9ydCBzd2l0Y2hcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTd2l0Y2hpbmcgdHJhbnNwb3J0IGFzIHJlY29tbWVuZGVkJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdlbmFibGUtcG9vbGluZyc6XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBlbmFibGluZyBjb25uZWN0aW9uIHBvb2xpbmdcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFbmFibGluZyBjb25uZWN0aW9uIHBvb2xpbmcnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2VuYWJsZS1tb25pdG9yaW5nJzpcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIGVuYWJsaW5nIGVuaGFuY2VkIG1vbml0b3JpbmdcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFbmFibGluZyBlbmhhbmNlZCBtb25pdG9yaW5nJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS5sb2coYFVua25vd24gYXV0b21hdGljIHN0ZXA6ICR7c3RlcC5pZH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBUcmFjayBlZmZlY3RpdmVuZXNzXG4gICAgICB0aGlzLnJlY29tbWVuZGF0aW9uRW5naW5lLnRyYWNrUmVjb21tZW5kYXRpb25FZmZlY3RpdmVuZXNzKHJlY29tbWVuZGF0aW9uLmlkLCAwLjgpO1xuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGFwcGx5IHJlY29tbWVuZGF0aW9uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UmVjb21tZW5kYXRpb25FbmdpbmUoKSB7XG4gICAgLy8gU3RhcnQgYmFja2dyb3VuZCByZWNvbW1lbmRhdGlvbiBhbmFseXNpc1xuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyByZWNvbW1lbmRhdGlvbiBlbmdpbmUuLi4nKTtcbiAgICBcbiAgICAvLyBHZW5lcmF0ZSBpbml0aWFsIHJlY29tbWVuZGF0aW9uc1xuICAgIHRoaXMuZ2VuZXJhdGVCYWNrZ3JvdW5kUmVjb21tZW5kYXRpb25zKCk7XG4gICAgXG4gICAgLy8gU2V0IHVwIHBlcmlvZGljIHJlY29tbWVuZGF0aW9uIHVwZGF0ZXNcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmdlbmVyYXRlQmFja2dyb3VuZFJlY29tbWVuZGF0aW9ucygpO1xuICAgIH0sIDMwICogNjAgKiAxMDAwKTsgLy8gRXZlcnkgMzAgbWludXRlc1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZUJhY2tncm91bmRSZWNvbW1lbmRhdGlvbnMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRleHQgPSBhd2FpdCB0aGlzLmJ1aWxkUmVjb21tZW5kYXRpb25Db250ZXh0KCk7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCB0aGlzLnJlY29tbWVuZGF0aW9uRW5naW5lLmdlbmVyYXRlUmVjb21tZW5kYXRpb25zKGNvbnRleHQpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgY3JpdGljYWwgcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBjcml0aWNhbFJlY3MgPSByZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHJlYyA9PiByZWMucHJpb3JpdHkgPT09ICdjcml0aWNhbCcpO1xuICAgICAgaWYgKGNyaXRpY2FsUmVjcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKaoO+4jyAke2NyaXRpY2FsUmVjcy5sZW5ndGh9IGNyaXRpY2FsIG9wdGltaXphdGlvbihzKSBhdmFpbGFibGUuIFVzZSBDb21tYW5kIFBhbGV0dGUgPiBcIlNob3cgQUkgUmVjb21tZW5kYXRpb25zXCJgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYEdlbmVyYXRlZCAke3JlY29tbWVuZGF0aW9ucy5sZW5ndGh9IHJlY29tbWVuZGF0aW9ucyAoJHtjcml0aWNhbFJlY3MubGVuZ3RofSBjcml0aWNhbClgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQmFja2dyb3VuZCByZWNvbW1lbmRhdGlvbiBnZW5lcmF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwKCkge1xuICAgIC8vIENsZWFudXAgY29tcG9uZW50IGluc3RhbmNlc1xuICAgIGlmICh0aGlzLm9uYm9hcmRpbmdXaXphcmQpIHtcbiAgICAgIHRoaXMub25ib2FyZGluZ1dpemFyZC5jbG9zZSgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy50cmFuc3BvcnREYXNoYm9hcmQpIHtcbiAgICAgIHRoaXMudHJhbnNwb3J0RGFzaGJvYXJkLnVubG9hZCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5hZHZhbmNlZFNldHRpbmdzKSB7XG4gICAgICB0aGlzLmFkdmFuY2VkU2V0dGluZ3MudW5sb2FkKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gUHVibGljIEFQSSBtZXRob2RzIGZvciBvdGhlciBjb21wb25lbnRzXG4gIHB1YmxpYyBhc3luYyBzaG93T25ib2FyZGluZ0lmTmVlZGVkKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Mub25ib2FyZGluZ0NvbXBsZXRlICYmIHRoaXMuY29uZmlnLmVuYWJsZU9uYm9hcmRpbmcpIHtcbiAgICAgIHRoaXMuc2hvd09uYm9hcmRpbmcoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmVjb21tZW5kYXRpb25FbmdpbmUoKTogUmVjb21tZW5kYXRpb25FbmdpbmUge1xuICAgIHJldHVybiB0aGlzLnJlY29tbWVuZGF0aW9uRW5naW5lO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlZnJlc2hEYXNoYm9hcmQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMudHJhbnNwb3J0RGFzaGJvYXJkKSB7XG4gICAgICAvLyBSZWZyZXNoIGRhc2hib2FyZCBkYXRhXG4gICAgICBjb25zb2xlLmxvZygnUmVmcmVzaGluZyBkYXNoYm9hcmQuLi4nKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gTW9kYWwgZm9yIGRpc3BsYXlpbmcgdGhlIHRyYW5zcG9ydCBkYXNoYm9hcmRcbmNsYXNzIERhc2hib2FyZE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBkYXNoYm9hcmQ/OiBUcmFuc3BvcnREYXNoYm9hcmQ7XG5cbiAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5tb2RhbEVsLmFkZENsYXNzKCdkYXNoYm9hcmQtbW9kYWwnKTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgZGFzaGJvYXJkXG4gICAgdGhpcy5kYXNoYm9hcmQgPSBuZXcgVHJhbnNwb3J0RGFzaGJvYXJkKGNvbnRlbnRFbCwgdGhpcy5wbHVnaW4pO1xuICAgIHRoaXMuZGFzaGJvYXJkLmxvYWQoKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgaWYgKHRoaXMuZGFzaGJvYXJkKSB7XG4gICAgICB0aGlzLmRhc2hib2FyZC51bmxvYWQoKTtcbiAgICB9XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLy8gTW9kYWwgZm9yIGRpc3BsYXlpbmcgYWR2YW5jZWQgc2V0dGluZ3NcbmNsYXNzIEFkdmFuY2VkU2V0dGluZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc2V0dGluZ3M/OiBBZHZhbmNlZFNldHRpbmdzO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygnYWR2YW5jZWQtc2V0dGluZ3MtbW9kYWwnKTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYWR2YW5jZWQgc2V0dGluZ3NcbiAgICB0aGlzLnNldHRpbmdzID0gbmV3IEFkdmFuY2VkU2V0dGluZ3MoY29udGVudEVsLCB0aGlzLnBsdWdpbik7XG4gICAgdGhpcy5zZXR0aW5ncy5sb2FkKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLnVubG9hZCgpO1xuICAgIH1cbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG4vLyBNb2RhbCBmb3IgZGlzcGxheWluZyBBSSByZWNvbW1lbmRhdGlvbnNcbmNsYXNzIFJlY29tbWVuZGF0aW9uc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSByZWNvbW1lbmRhdGlvbnM6IFJlY29tbWVuZGF0aW9uW107XG4gIHByaXZhdGUgZW5naW5lOiBSZWNvbW1lbmRhdGlvbkVuZ2luZTtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4sIHJlY29tbWVuZGF0aW9uczogUmVjb21tZW5kYXRpb25bXSwgZW5naW5lOiBSZWNvbW1lbmRhdGlvbkVuZ2luZSkge1xuICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMucmVjb21tZW5kYXRpb25zID0gcmVjb21tZW5kYXRpb25zO1xuICAgIHRoaXMuZW5naW5lID0gZW5naW5lO1xuICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygncmVjb21tZW5kYXRpb25zLW1vZGFsJyk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gSGVhZGVyXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgQUktUG93ZXJlZCBSZWNvbW1lbmRhdGlvbnMnIH0pO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnSGVyZSBhcmUgcGVyc29uYWxpemVkIHJlY29tbWVuZGF0aW9ucyB0byBvcHRpbWl6ZSB5b3VyIFZhdWx0UGlsb3QgZXhwZXJpZW5jZTonLFxuICAgICAgY2xzOiAncmVjb21tZW5kYXRpb25zLXN1YnRpdGxlJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlY29tbWVuZGF0aW9ucyBsaXN0XG4gICAgY29uc3QgcmVjc0xpc3QgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdyZWNvbW1lbmRhdGlvbnMtbGlzdCcpO1xuICAgIFxuICAgIHRoaXMucmVjb21tZW5kYXRpb25zLmZvckVhY2goKHJlYywgaW5kZXgpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyUmVjb21tZW5kYXRpb24ocmVjc0xpc3QsIHJlYywgaW5kZXgpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEZvb3RlclxuICAgIGNvbnN0IGZvb3RlciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3JlY29tbWVuZGF0aW9ucy1mb290ZXInKTtcbiAgICBmb290ZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYEdlbmVyYXRlZCAke3RoaXMucmVjb21tZW5kYXRpb25zLmxlbmd0aH0gcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHlvdXIgdXNhZ2UgcGF0dGVybnNgLFxuICAgICAgY2xzOiAncmVjb21tZW5kYXRpb25zLXN0YXRzJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENsb3NlIGJ1dHRvblxuICAgIGNvbnN0IGNsb3NlQnRuID0gZm9vdGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDbG9zZScsIGNsczogJ21vZC1jdGEnIH0pO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUmVjb21tZW5kYXRpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcmVjOiBSZWNvbW1lbmRhdGlvbiwgaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IHJlY0VsID0gY29udGFpbmVyLmNyZWF0ZURpdigncmVjb21tZW5kYXRpb24taXRlbScpO1xuICAgIHJlY0VsLmFkZENsYXNzKGBwcmlvcml0eS0ke3JlYy5wcmlvcml0eX1gKTtcbiAgICBcbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXIgPSByZWNFbC5jcmVhdGVEaXYoJ3JlYy1oZWFkZXInKTtcbiAgICBjb25zdCB0aXRsZSA9IGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IHJlYy50aXRsZSB9KTtcbiAgICB0aXRsZS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogcmVjLnByaW9yaXR5LnRvVXBwZXJDYXNlKCksIGNsczogYHByaW9yaXR5LWJhZGdlICR7cmVjLnByaW9yaXR5fWAgfSk7XG4gICAgXG4gICAgLy8gRGVzY3JpcHRpb25cbiAgICByZWNFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogcmVjLmRlc2NyaXB0aW9uLCBjbHM6ICdyZWMtZGVzY3JpcHRpb24nIH0pO1xuICAgIFxuICAgIC8vIEV4cGVjdGVkIGltcGFjdFxuICAgIGNvbnN0IGltcGFjdCA9IHJlY0VsLmNyZWF0ZURpdigncmVjLWltcGFjdCcpO1xuICAgIGltcGFjdC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdFeHBlY3RlZCBJbXBhY3Q6JyB9KTtcbiAgICBjb25zdCBpbXBhY3RMaXN0ID0gaW1wYWN0LmNyZWF0ZUVsKCd1bCcpO1xuICAgIGltcGFjdExpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBgUGVyZm9ybWFuY2U6ICske3JlYy5leHBlY3RlZEltcGFjdC5wZXJmb3JtYW5jZUltcHJvdmVtZW50fSVgIH0pO1xuICAgIGltcGFjdExpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBgRXJyb3IgUmVkdWN0aW9uOiAke3JlYy5leHBlY3RlZEltcGFjdC5lcnJvclJlZHVjdGlvbn0lYCB9KTtcbiAgICBpbXBhY3RMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYFJlbGlhYmlsaXR5OiArJHtyZWMuZXhwZWN0ZWRJbXBhY3QucmVsaWFiaWxpdHlJbXByb3ZlbWVudH0lYCB9KTtcbiAgICBpbXBhY3RMaXN0LmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogYENvbmZpZGVuY2U6ICR7KHJlYy5leHBlY3RlZEltcGFjdC5jb25maWRlbmNlU2NvcmUgKiAxMDApLnRvRml4ZWQoMCl9JWAgfSk7XG4gICAgXG4gICAgLy8gSW1wbGVtZW50YXRpb24gZGV0YWlsc1xuICAgIGNvbnN0IGltcGwgPSByZWNFbC5jcmVhdGVEaXYoJ3JlYy1pbXBsZW1lbnRhdGlvbicpO1xuICAgIGltcGwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnSW1wbGVtZW50YXRpb246JyB9KTtcbiAgICBpbXBsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgRGlmZmljdWx0eTogJHtyZWMuaW1wbGVtZW50YXRpb24uZGlmZmljdWx0eX0gfCBUaW1lOiAke3JlYy5pbXBsZW1lbnRhdGlvbi5lc3RpbWF0ZWRUaW1lfWAgfSk7XG4gICAgXG4gICAgLy8gU3RlcHNcbiAgICBpZiAocmVjLmltcGxlbWVudGF0aW9uLnN0ZXBzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHN0ZXBzTGlzdCA9IGltcGwuY3JlYXRlRWwoJ29sJyk7XG4gICAgICByZWMuaW1wbGVtZW50YXRpb24uc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcbiAgICAgICAgY29uc3Qgc3RlcEVsID0gc3RlcHNMaXN0LmNyZWF0ZUVsKCdsaScpO1xuICAgICAgICBzdGVwRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogc3RlcC50aXRsZSB9KTtcbiAgICAgICAgc3RlcEVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgIC0gJHtzdGVwLmRlc2NyaXB0aW9ufWAgfSk7XG4gICAgICAgIGlmIChzdGVwLmFjdGlvbiA9PT0gJ2F1dG9tYXRpYycpIHtcbiAgICAgICAgICBzdGVwRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICcgKEF1dG9tYXRpYyknLCBjbHM6ICdzdGVwLWF1dG9tYXRpYycgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBY3Rpb25zXG4gICAgY29uc3QgYWN0aW9ucyA9IHJlY0VsLmNyZWF0ZURpdigncmVjLWFjdGlvbnMnKTtcbiAgICBcbiAgICBpZiAocmVjLmltcGxlbWVudGF0aW9uLnN0ZXBzLnNvbWUoc3RlcCA9PiBzdGVwLmFjdGlvbiA9PT0gJ2F1dG9tYXRpYycpKSB7XG4gICAgICBjb25zdCBhcHBseUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0FwcGx5IEF1dG9tYXRpY2FsbHknLCBjbHM6ICdtb2QtY3RhJyB9KTtcbiAgICAgIGFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhcHBseUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGFwcGx5QnRuLnRleHRDb250ZW50ID0gJ0FwcGx5aW5nLi4uJztcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMuYXBwbHlSZWNvbW1lbmRhdGlvbihyZWMpO1xuICAgICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICBhcHBseUJ0bi50ZXh0Q29udGVudCA9ICfinIUgQXBwbGllZCc7XG4gICAgICAgICAgICBhcHBseUJ0bi5yZW1vdmVDbGFzcygnbW9kLWN0YScpO1xuICAgICAgICAgICAgYXBwbHlCdG4uYWRkQ2xhc3MoJ21vZC1zdWNjZXNzJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFwcGx5QnRuLnRleHRDb250ZW50ID0gJ+KdjCBGYWlsZWQnO1xuICAgICAgICAgICAgYXBwbHlCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgYXBwbHlCdG4udGV4dENvbnRlbnQgPSAn4p2MIEVycm9yJztcbiAgICAgICAgICBhcHBseUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGlzbWlzc0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0Rpc21pc3MnLCBjbHM6ICdtb2QtbXV0ZWQnIH0pO1xuICAgIGRpc21pc3NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICByZWNFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFJhdGlvbmFsZSAoY29sbGFwc2libGUpXG4gICAgY29uc3QgcmF0aW9uYWxlID0gcmVjRWwuY3JlYXRlRGl2KCdyZWMtcmF0aW9uYWxlJyk7XG4gICAgY29uc3QgcmF0aW9uYWxlVG9nZ2xlID0gcmF0aW9uYWxlLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTaG93IFJhdGlvbmFsZScsIGNsczogJ3JhdGlvbmFsZS10b2dnbGUnIH0pO1xuICAgIGNvbnN0IHJhdGlvbmFsZUNvbnRlbnQgPSByYXRpb25hbGUuY3JlYXRlRGl2KCdyYXRpb25hbGUtY29udGVudCcpO1xuICAgIHJhdGlvbmFsZUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICByYXRpb25hbGVDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiByZWMucmF0aW9uYWxlIH0pO1xuICAgIFxuICAgIHJhdGlvbmFsZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmIChyYXRpb25hbGVDb250ZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICByYXRpb25hbGVDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByYXRpb25hbGVUb2dnbGUudGV4dENvbnRlbnQgPSAnSGlkZSBSYXRpb25hbGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmF0aW9uYWxlQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICByYXRpb25hbGVUb2dnbGUudGV4dENvbnRlbnQgPSAnU2hvdyBSYXRpb25hbGUnO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhcHBseVJlY29tbWVuZGF0aW9uKHJlYzogUmVjb21tZW5kYXRpb24pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgLy8gU2ltdWxhdGUgYXBwbHlpbmcgdGhlIHJlY29tbWVuZGF0aW9uXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpO1xuICAgICAgXG4gICAgICAvLyBUcmFjayBlZmZlY3RpdmVuZXNzXG4gICAgICB0aGlzLmVuZ2luZS50cmFja1JlY29tbWVuZGF0aW9uRWZmZWN0aXZlbmVzcyhyZWMuaWQsIDAuOCk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYOKchSBBcHBsaWVkIHJlY29tbWVuZGF0aW9uOiAke3JlYy50aXRsZX1gKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gYXBwbHkgcmVjb21tZW5kYXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShg4p2MIEZhaWxlZCB0byBhcHBseSByZWNvbW1lbmRhdGlvbjogJHtyZWMudGl0bGV9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBFbmhhbmNlZCBVSSBDb21wb25lbnRzIGZvciBWYXVsdFBpbG90XG4gKiBQcm92aWRlcyBwcm9ncmVzcyBpbmRpY2F0b3JzIGFuZCByZXNwb25zZSBvcHRpbWl6YXRpb25cbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE5vdGljZSwgQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NDb25maWcge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBtZXNzYWdlPzogc3RyaW5nO1xuICAgIHBlcmNlbnRhZ2U/OiBudW1iZXI7XG4gICAgZXRhPzogbnVtYmVyO1xuICAgIGNhbmNlbGFibGU/OiBib29sZWFuO1xuICAgIHBvc2l0aW9uPzogJ3RvcC1yaWdodCcgfCAnYm90dG9tLXJpZ2h0JyB8ICdjZW50ZXInO1xuICAgIHRpbWVvdXQ/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVFbnRyeTxUID0gYW55PiB7XG4gICAgZGF0YTogVDtcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICB0dGw6IG51bWJlcjtcbiAgICBoaXRDb3VudDogbnVtYmVyO1xuICAgIHNpemU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZU1ldHJpY3Mge1xuICAgIHRvdGFsUmVxdWVzdHM6IG51bWJlcjtcbiAgICBjYWNoZUhpdHM6IG51bWJlcjtcbiAgICBjYWNoZU1pc3NlczogbnVtYmVyO1xuICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IG51bWJlcjtcbiAgICBzbG93ZXN0UmVzcG9uc2U6IG51bWJlcjtcbiAgICBmYXN0ZXN0UmVzcG9uc2U6IG51bWJlcjtcbiAgICBjdXJyZW50Q2FjaGVTaXplOiBudW1iZXI7XG4gICAgbWVtb3J5VXNhZ2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRNZXNzYWdlIHtcbiAgICB0eXBlOiAncHJvZ3Jlc3NfdXBkYXRlJyB8ICdwZXJmb3JtYW5jZV9zdGF0cycgfCAnc2hvcnRjdXRzJyB8ICdwaW5nJyB8ICdwb25nJyB8ICdlcnJvcic7XG4gICAgZGF0YTogYW55O1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICAgIGlkPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFByb2dyZXNzIEluZGljYXRvciBVSSBDbGFzc1xuICogSGFuZGxlcyByZWFsLXRpbWUgcHJvZ3Jlc3MgYmFycyB3aXRoIGFuaW1hdGlvbnMgYW5kIEVUQSBjYWxjdWxhdGlvblxuICovXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NJbmRpY2F0b3JVSSBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcbiAgICBwcml2YXRlIGFjdGl2ZVByb2dyZXNzOiBNYXA8c3RyaW5nLCBQcm9ncmVzc0NvbmZpZz4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBwcm9ncmVzc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHVwZGF0ZUludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ29udGFpbmVyKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQ29udGFpbmVyKCkge1xuICAgICAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyJztcbiAgICAgICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgICAgdG9wOiAyMHB4O1xuICAgICAgICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICAgICAgICB6LWluZGV4OiAxMDAwMDtcbiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgbWF4LXdpZHRoOiA0MDBweDtcbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnByb2dyZXNzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBzaG93UHJvZ3Jlc3MoY29uZmlnOiBQcm9ncmVzc0NvbmZpZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmFjdGl2ZVByb2dyZXNzLnNldChjb25maWcuaWQsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvZ3Jlc3MoY29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb25maWcudGltZW91dCkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoY29uZmlnLmlkKTtcbiAgICAgICAgICAgIH0sIGNvbmZpZy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVByb2dyZXNzKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UHJvZ3Jlc3NDb25maWc+KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5hY3RpdmVQcm9ncmVzcy5nZXQoaWQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSB7IC4uLmV4aXN0aW5nLCAuLi51cGRhdGVzIH07XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVByb2dyZXNzLnNldChpZCwgdXBkYXRlZCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb2dyZXNzKHVwZGF0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGlkZVByb2dyZXNzKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hY3RpdmVQcm9ncmVzcy5kZWxldGUoaWQpO1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHByb2dyZXNzLSR7aWR9YCk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmFuaW1hdGlvbiA9ICdzbGlkZU91dFJpZ2h0IDAuM3MgZWFzZS1pbic7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUHJvZ3Jlc3MoY29uZmlnOiBQcm9ncmVzc0NvbmZpZyk6IHZvaWQge1xuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwcm9ncmVzcy0ke2NvbmZpZy5pZH1gKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuY3JlYXRlUHJvZ3Jlc3NFbGVtZW50KGNvbmZpZyk7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyPy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NFbGVtZW50KGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVByb2dyZXNzRWxlbWVudChjb25maWc6IFByb2dyZXNzQ29uZmlnKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZW1lbnQuaWQgPSBgcHJvZ3Jlc3MtJHtjb25maWcuaWR9YDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSAndmF1bHRwaWxvdC1wcm9ncmVzcy1pdGVtJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMTZweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogc2xpZGVJblJpZ2h0IDAuM3MgZWFzZS1vdXQ7XG4gICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgICAgICAgICAgIG1pbi13aWR0aDogMzAwcHg7XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzRWxlbWVudChlbGVtZW50LCBjb25maWcpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVByb2dyZXNzRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnOiBQcm9ncmVzc0NvbmZpZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gY29uZmlnLnBlcmNlbnRhZ2UgfHwgMDtcbiAgICAgICAgY29uc3QgZXRhID0gY29uZmlnLmV0YSA/IHRoaXMuZm9ybWF0RVRBKGNvbmZpZy5ldGEpIDogJyc7XG4gICAgICAgIFxuICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1oZWFkZXJcIiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogOHB4O1wiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy10aXRsZVwiIHN0eWxlPVwiZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcIj5cbiAgICAgICAgICAgICAgICAgICAgJHtjb25maWcudGl0bGV9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgJHtjb25maWcuY2FuY2VsYWJsZSA/ICc8YnV0dG9uIGNsYXNzPVwicHJvZ3Jlc3MtY2FuY2VsXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiBub25lOyBib3JkZXI6IG5vbmU7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgY3Vyc29yOiBwb2ludGVyO1wiPsOXPC9idXR0b24+JyA6ICcnfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAke2NvbmZpZy5tZXNzYWdlID8gYDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1tZXNzYWdlXCIgc3R5bGU9XCJjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IGZvbnQtc2l6ZTogMC45ZW07IG1hcmdpbi1ib3R0b206IDhweDtcIj4ke2NvbmZpZy5tZXNzYWdlfTwvZGl2PmAgOiAnJ31cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXItY29udGFpbmVyXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7IGJvcmRlci1yYWRpdXM6IDRweDsgaGVpZ2h0OiA2cHg7IG92ZXJmbG93OiBoaWRkZW47XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICR7cGVyY2VudGFnZX0lO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzIGVhc2U7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWluZm9cIiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLXRvcDogOHB4OyBmb250LXNpemU6IDAuOGVtOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+JHtNYXRoLnJvdW5kKHBlcmNlbnRhZ2UpfSU8L3NwYW4+XG4gICAgICAgICAgICAgICAgJHtldGEgPyBgPHNwYW4+RVRBOiAke2V0YX08L3NwYW4+YCA6ICcnfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gQWRkIGNhbmNlbCBoYW5kbGVyIGlmIGNhbmNlbGFibGVcbiAgICAgICAgaWYgKGNvbmZpZy5jYW5jZWxhYmxlKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9ncmVzcy1jYW5jZWwnKTtcbiAgICAgICAgICAgIGNhbmNlbEJ0bj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlUHJvZ3Jlc3MoY29uZmlnLmlkKTtcbiAgICAgICAgICAgICAgICAvLyBFbWl0IGNhbmNlbCBldmVudFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UudHJpZ2dlcigndmF1bHRwaWxvdDpwcm9ncmVzcy1jYW5jZWxsZWQnLCBjb25maWcuaWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdEVUQShzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAoc2Vjb25kcyA8IDYwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7TWF0aC5yb3VuZChzZWNvbmRzKX1zYDtcbiAgICAgICAgfSBlbHNlIGlmIChzZWNvbmRzIDwgMzYwMCkge1xuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgICAgICAgICAgIGNvbnN0IHNlY3MgPSBNYXRoLnJvdW5kKHNlY29uZHMgJSA2MCk7XG4gICAgICAgICAgICByZXR1cm4gYCR7bWludXRlc31tICR7c2Vjc31zYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gICAgICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgICAgICAgICAgcmV0dXJuIGAke2hvdXJzfWggJHttaW51dGVzfW1gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QWN0aXZlUHJvZ3Jlc3MoKTogUHJvZ3Jlc3NDb25maWdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYWN0aXZlUHJvZ3Jlc3MudmFsdWVzKCkpO1xuICAgIH1cblxuICAgIGNsZWFyQWxsUHJvZ3Jlc3MoKTogdm9pZCB7XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgdGhpcy5hY3RpdmVQcm9ncmVzcy5rZXlzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVByb2dyZXNzKGlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9udW5sb2FkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5wcm9ncmVzc0NvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51cGRhdGVJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnVwZGF0ZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBSZXNwb25zZSBUaW1lIE9wdGltaXplciBDbGFzc1xuICogSGFuZGxlcyBjbGllbnQtc2lkZSBjYWNoaW5nLCByZXF1ZXN0IGRlZHVwbGljYXRpb24sIGFuZCBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFJlc3BvbnNlVGltZU9wdGltaXplciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gICAgcHJpdmF0ZSBjYWNoZTogTWFwPHN0cmluZywgQ2FjaGVFbnRyeT4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSByZXF1ZXN0UXVldWU6IE1hcDxzdHJpbmcsIFByb21pc2U8YW55Pj4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBtZXRyaWNzITogUGVyZm9ybWFuY2VNZXRyaWNzO1xuICAgIHByaXZhdGUgbWF4Q2FjaGVTaXplID0gMTAwOyAvLyBNYXhpbXVtIG51bWJlciBvZiBjYWNoZWQgZW50cmllc1xuICAgIHByaXZhdGUgZGVmYXVsdFRUTCA9IDMwMDAwMDsgLy8gNSBtaW51dGVzIGRlZmF1bHQgVFRMXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZU1ldHJpY3MoKTtcbiAgICAgICAgdGhpcy5zdGFydENsZWFudXBJbnRlcnZhbCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZU1ldHJpY3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWV0cmljcyA9IHtcbiAgICAgICAgICAgIHRvdGFsUmVxdWVzdHM6IDAsXG4gICAgICAgICAgICBjYWNoZUhpdHM6IDAsXG4gICAgICAgICAgICBjYWNoZU1pc3NlczogMCxcbiAgICAgICAgICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IDAsXG4gICAgICAgICAgICBzbG93ZXN0UmVzcG9uc2U6IDAsXG4gICAgICAgICAgICBmYXN0ZXN0UmVzcG9uc2U6IEluZmluaXR5LFxuICAgICAgICAgICAgY3VycmVudENhY2hlU2l6ZTogMCxcbiAgICAgICAgICAgIG1lbW9yeVVzYWdlOiAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgb3B0aW1pemVkUmVxdWVzdDxUPihcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RGbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgdHRsPzogbnVtYmVyO1xuICAgICAgICAgICAgc2tpcENhY2hlPzogYm9vbGVhbjtcbiAgICAgICAgICAgIHByaW9yaXR5PzogJ2hpZ2gnIHwgJ25vcm1hbCcgfCAnbG93JztcbiAgICAgICAgfSA9IHt9XG4gICAgKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB0aGlzLm1ldHJpY3MudG90YWxSZXF1ZXN0cysrO1xuXG4gICAgICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0ICh1bmxlc3Mgc2tpcHBlZClcbiAgICAgICAgaWYgKCFvcHRpb25zLnNraXBDYWNoZSkge1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRGcm9tQ2FjaGU8VD4oa2V5KTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ldHJpY3MuY2FjaGVIaXRzKys7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZXNwb25zZVRpbWVNZXRyaWNzKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tZXRyaWNzLmNhY2hlTWlzc2VzKys7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcmVxdWVzdCBpcyBhbHJlYWR5IGluIHByb2dyZXNzIChkZWR1cGxpY2F0aW9uKVxuICAgICAgICBjb25zdCBleGlzdGluZ1JlcXVlc3QgPSB0aGlzLnJlcXVlc3RRdWV1ZS5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nUmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nUmVxdWVzdCBhcyBQcm9taXNlPFQ+O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFrZSB0aGUgcmVxdWVzdFxuICAgICAgICBjb25zdCByZXF1ZXN0UHJvbWlzZSA9IHRoaXMuZXhlY3V0ZVJlcXVlc3QocmVxdWVzdEZuLCBrZXksIG9wdGlvbnMudHRsIHx8IHRoaXMuZGVmYXVsdFRUTCk7XG4gICAgICAgIHRoaXMucmVxdWVzdFF1ZXVlLnNldChrZXksIHJlcXVlc3RQcm9taXNlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVxdWVzdFByb21pc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3BvbnNlVGltZU1ldHJpY3MocGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFF1ZXVlLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlUmVxdWVzdDxUPihcbiAgICAgICAgcmVxdWVzdEZuOiAoKSA9PiBQcm9taXNlPFQ+LFxuICAgICAgICBrZXk6IHN0cmluZyxcbiAgICAgICAgdHRsOiBudW1iZXJcbiAgICApOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcXVlc3RGbigpO1xuICAgICAgICAgICAgdGhpcy5zZXRDYWNoZShrZXksIHJlc3VsdCwgdHRsKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBjYWNoZSBlcnJvcnMsIGJ1dCBzdGlsbCByZW1vdmUgZnJvbSBxdWV1ZVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEZyb21DYWNoZTxUPihrZXk6IHN0cmluZyk6IFQgfCBudWxsIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGV4cGlyZWRcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBlbnRyeS50aW1lc3RhbXAgPiBlbnRyeS50dGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBoaXQgY291bnRcbiAgICAgICAgZW50cnkuaGl0Q291bnQrKztcbiAgICAgICAgcmV0dXJuIGVudHJ5LmRhdGEgYXMgVDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldENhY2hlPFQ+KGtleTogc3RyaW5nLCBkYXRhOiBULCB0dGw6IG51bWJlcik6IHZvaWQge1xuICAgICAgICAvLyBFbmZvcmNlIGNhY2hlIHNpemUgbGltaXRcbiAgICAgICAgaWYgKHRoaXMuY2FjaGUuc2l6ZSA+PSB0aGlzLm1heENhY2hlU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5ldmljdExlYXN0VXNlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW50cnk6IENhY2hlRW50cnk8VD4gPSB7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgdHRsLFxuICAgICAgICAgICAgaGl0Q291bnQ6IDAsXG4gICAgICAgICAgICBzaXplOiB0aGlzLmVzdGltYXRlU2l6ZShkYXRhKVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgZW50cnkpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlTWV0cmljcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZXZpY3RMZWFzdFVzZWQoKTogdm9pZCB7XG4gICAgICAgIGxldCBsZWFzdFVzZWRLZXkgPSAnJztcbiAgICAgICAgbGV0IGxlYXN0VXNlZENvdW50ID0gSW5maW5pdHk7XG5cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgdGhpcy5jYWNoZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChlbnRyeS5oaXRDb3VudCA8IGxlYXN0VXNlZENvdW50KSB7XG4gICAgICAgICAgICAgICAgbGVhc3RVc2VkQ291bnQgPSBlbnRyeS5oaXRDb3VudDtcbiAgICAgICAgICAgICAgICBsZWFzdFVzZWRLZXkgPSBrZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGVhc3RVc2VkS2V5KSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShsZWFzdFVzZWRLZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlc3RpbWF0ZVNpemUoZGF0YTogYW55KTogbnVtYmVyIHtcbiAgICAgICAgLy8gUm91Z2ggZXN0aW1hdGlvbiBvZiBvYmplY3Qgc2l6ZSBpbiBieXRlc1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSkubGVuZ3RoICogMjsgLy8gQXBwcm94aW1hdGUgVVRGLTE2IGVuY29kaW5nXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVSZXNwb25zZVRpbWVNZXRyaWNzKHJlc3BvbnNlVGltZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBdmcgPSB0aGlzLm1ldHJpY3MuYXZlcmFnZVJlc3BvbnNlVGltZTtcbiAgICAgICAgY29uc3QgdG90YWxSZXF1ZXN0cyA9IHRoaXMubWV0cmljcy50b3RhbFJlcXVlc3RzO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5tZXRyaWNzLmF2ZXJhZ2VSZXNwb25zZVRpbWUgPSBcbiAgICAgICAgICAgIChjdXJyZW50QXZnICogKHRvdGFsUmVxdWVzdHMgLSAxKSArIHJlc3BvbnNlVGltZSkgLyB0b3RhbFJlcXVlc3RzO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlVGltZSA+IHRoaXMubWV0cmljcy5zbG93ZXN0UmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMubWV0cmljcy5zbG93ZXN0UmVzcG9uc2UgPSByZXNwb25zZVRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZVRpbWUgPCB0aGlzLm1ldHJpY3MuZmFzdGVzdFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLm1ldHJpY3MuZmFzdGVzdFJlc3BvbnNlID0gcmVzcG9uc2VUaW1lO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVDYWNoZU1ldHJpY3MoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWV0cmljcy5jdXJyZW50Q2FjaGVTaXplID0gdGhpcy5jYWNoZS5zaXplO1xuICAgICAgICB0aGlzLm1ldHJpY3MubWVtb3J5VXNhZ2UgPSBBcnJheS5mcm9tKHRoaXMuY2FjaGUudmFsdWVzKCkpXG4gICAgICAgICAgICAucmVkdWNlKCh0b3RhbCwgZW50cnkpID0+IHRvdGFsICsgZW50cnkuc2l6ZSwgMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydENsZWFudXBJbnRlcnZhbCgpOiB2b2lkIHtcbiAgICAgICAgLy8gQ2xlYW4gdXAgZXhwaXJlZCBlbnRyaWVzIGV2ZXJ5IG1pbnV0ZVxuICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsZWFudXBFeHBpcmVkRW50cmllcygpO1xuICAgICAgICB9LCA2MDAwMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhbnVwRXhwaXJlZEVudHJpZXMoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAobm93IC0gZW50cnkudGltZXN0YW1wID4gZW50cnkudHRsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlTWV0cmljcygpO1xuICAgIH1cblxuICAgIGdldE1ldHJpY3MoKTogUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgICAgICAgcmV0dXJuIHsgLi4udGhpcy5tZXRyaWNzIH07XG4gICAgfVxuXG4gICAgZ2V0Q2FjaGVIaXRSYXRlKCk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5tZXRyaWNzLmNhY2hlSGl0cyArIHRoaXMubWV0cmljcy5jYWNoZU1pc3NlcztcbiAgICAgICAgcmV0dXJuIHRvdGFsID4gMCA/ICh0aGlzLm1ldHJpY3MuY2FjaGVIaXRzIC8gdG90YWwpICogMTAwIDogMDtcbiAgICB9XG5cbiAgICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FjaGVNZXRyaWNzKCk7XG4gICAgfVxuXG4gICAgc2V0Q2FjaGVDb25maWcobWF4U2l6ZTogbnVtYmVyLCBkZWZhdWx0VFRMOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tYXhDYWNoZVNpemUgPSBtYXhTaXplO1xuICAgICAgICB0aGlzLmRlZmF1bHRUVEwgPSBkZWZhdWx0VFRMO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogV2ViU29ja2V0IEhhbmRsZXIgZm9yIFJlYWwtdGltZSBVcGRhdGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRIYW5kbGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBwcml2YXRlIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgICBwcml2YXRlIHdzOiBXZWJTb2NrZXQgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHJlY29ubmVjdEludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGlzQ29ubmVjdGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBtZXNzYWdlSGFuZGxlcnMgPSBuZXcgTWFwPHN0cmluZywgKGRhdGE6IGFueSkgPT4gdm9pZD4oKTtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5zZXR1cE1lc3NhZ2VIYW5kbGVycygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBNZXNzYWdlSGFuZGxlcnMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzLnNldCgncHJvZ3Jlc3NfdXBkYXRlJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIGVuaGFuY2VtZW50IG1hbmFnZXIgaW5zdGFuY2VcbiAgICAgICAgICAgIGNvbnN0IGVuaGFuY2VtZW50TWFuYWdlciA9ICh0aGlzLnBsdWdpbiBhcyBhbnkpLmVuaGFuY2VtZW50TWFuYWdlcjtcbiAgICAgICAgICAgIGlmIChlbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yKSB7XG4gICAgICAgICAgICAgICAgZW5oYW5jZW1lbnRNYW5hZ2VyLnByb2dyZXNzSW5kaWNhdG9yLnVwZGF0ZVByb2dyZXNzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiBkYXRhLnBlcmNlbnRhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBldGE6IGRhdGEuZXRhXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycy5zZXQoJ3BlcmZvcm1hbmNlX3N0YXRzJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzIHVwZGF0ZXNcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQZXJmb3JtYW5jZSBzdGF0czonLCBkYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5tZXNzYWdlSGFuZGxlcnMuc2V0KCdwaW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZW5kKHsgdHlwZTogJ3BvbmcnLCBkYXRhOiB7fSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25uZWN0KHVybDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLndzICYmIHRoaXMud3MucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndzID0gbmV3IFdlYlNvY2tldCh1cmwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLndzLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdCBXZWJTb2NrZXQgY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVjb25uZWN0SW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlY29ubmVjdEludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3RJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy53cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlOiBXZWJTb2NrZXRNZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBXZWJTb2NrZXQgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy53cy5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdCBXZWJTb2NrZXQgZGlzY29ubmVjdGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFJlY29ubmVjdCh1cmwpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy53cy5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVmF1bHRQaWxvdCBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IFdlYlNvY2tldDonLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UmVjb25uZWN0KHVybCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZU1lc3NhZ2UobWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSk6IHZvaWQge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5tZXNzYWdlSGFuZGxlcnMuZ2V0KG1lc3NhZ2UudHlwZSk7XG4gICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICBoYW5kbGVyKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXJ0UmVjb25uZWN0KHVybDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnJlY29ubmVjdEludGVydmFsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlY29ubmVjdEludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHJlY29ubmVjdCBWYXVsdFBpbG90IFdlYlNvY2tldC4uLicpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0KHVybCk7XG4gICAgICAgIH0sIDUwMDApO1xuICAgIH1cblxuICAgIHNlbmQobWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICB0aGlzLndzLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnJlY29ubmVjdEludGVydmFsKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucmVjb25uZWN0SW50ZXJ2YWwpO1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3RJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy53cykge1xuICAgICAgICAgICAgdGhpcy53cy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy53cyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlzU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0Nvbm5lY3RlZDtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1haW4gRW5oYW5jZW1lbnQgTWFuYWdlclxuICogT3JjaGVzdHJhdGVzIGFsbCBlbmhhbmNlbWVudCBmZWF0dXJlc1xuICovXG5leHBvcnQgY2xhc3MgVmF1bHRQaWxvdEVuaGFuY2VtZW50TWFuYWdlciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcHVibGljIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgICBwdWJsaWMgcHJvZ3Jlc3NJbmRpY2F0b3I6IFByb2dyZXNzSW5kaWNhdG9yVUk7XG4gICAgcHVibGljIHJlc3BvbnNlT3B0aW1pemVyOiBSZXNwb25zZVRpbWVPcHRpbWl6ZXI7XG4gICAgcHVibGljIHdlYlNvY2tldEhhbmRsZXI6IFdlYlNvY2tldEhhbmRsZXI7XG4gICAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NJbmRpY2F0b3IgPSBuZXcgUHJvZ3Jlc3NJbmRpY2F0b3JVSShwbHVnaW4pO1xuICAgICAgICB0aGlzLnJlc3BvbnNlT3B0aW1pemVyID0gbmV3IFJlc3BvbnNlVGltZU9wdGltaXplcihwbHVnaW4pO1xuICAgICAgICB0aGlzLndlYlNvY2tldEhhbmRsZXIgPSBuZXcgV2ViU29ja2V0SGFuZGxlcihwbHVnaW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHByb2dyZXNzIGluZGljYXRvclxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCh0aGlzLnByb2dyZXNzSW5kaWNhdG9yKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSByZXNwb25zZSBvcHRpbWl6ZXJcbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5yZXNwb25zZU9wdGltaXplcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgV2ViU29ja2V0IGNvbm5lY3Rpb25cbiAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQodGhpcy53ZWJTb2NrZXRIYW5kbGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHdzVXJsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFja2VuZFVybC5yZXBsYWNlKC9eaHR0cC8sICd3cycpICsgJy9hcGkvb2JzaWRpYW4vd3MvZW5oYW5jZWQnO1xuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRIYW5kbGVyLmNvbm5lY3Qod3NVcmwpO1xuXG4gICAgICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3QgRW5oYW5jZW1lbnQgTWFuYWdlciBpbml0aWFsaXplZCcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgRW5oYW5jZW1lbnQgTWFuYWdlcjonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93UHJvZ3Jlc3MoY29uZmlnOiBQcm9ncmVzc0NvbmZpZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnByb2dyZXNzSW5kaWNhdG9yLnNob3dQcm9ncmVzcyhjb25maWcpO1xuICAgIH1cblxuICAgIGFzeW5jIG9wdGltaXplZEFQSUNhbGw8VD4oXG4gICAgICAgIGVuZHBvaW50OiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RGbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgICAgICAgb3B0aW9ucz86IHsgdHRsPzogbnVtYmVyOyBza2lwQ2FjaGU/OiBib29sZWFuIH1cbiAgICApOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VPcHRpbWl6ZXIub3B0aW1pemVkUmVxdWVzdChlbmRwb2ludCwgcmVxdWVzdEZuLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBnZXRQZXJmb3JtYW5jZU1ldHJpY3MoKTogUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VPcHRpbWl6ZXIuZ2V0TWV0cmljcygpO1xuICAgIH1cblxuICAgIGdldENhY2hlSGl0UmF0ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZU9wdGltaXplci5nZXRDYWNoZUhpdFJhdGUoKTtcbiAgICB9XG5cbiAgICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlc3BvbnNlT3B0aW1pemVyLmNsZWFyQ2FjaGUoKTtcbiAgICB9XG5cbiAgICBpc1dlYlNvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2ViU29ja2V0SGFuZGxlci5pc1NvY2tldENvbm5lY3RlZCgpO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgc3VwZXIub251bmxvYWQoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQcm9ncmVzc0luZGljYXRvclVJLFxuICAgIFJlc3BvbnNlVGltZU9wdGltaXplcixcbiAgICBXZWJTb2NrZXRIYW5kbGVyLFxuICAgIFZhdWx0UGlsb3RFbmhhbmNlbWVudE1hbmFnZXJcbn07XG4iLCIvKipcbiAqIEVuaGFuY2VkIENvbW1hbmRzIFN5c3RlbSBmb3IgVmF1bHRQaWxvdFxuICogUHJvdmlkZXMga2V5Ym9hcmQgc2hvcnRjdXRzIGFuZCBlbmhhbmNlZCBjb21tYW5kIGRlZmluaXRpb25zXG4gKi9cblxuaW1wb3J0IHsgQXBwLCBOb3RpY2UsIEVkaXRvciwgVEZpbGUsIE1vZGFsLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBLZXlib2FyZFNob3J0Y3V0IHtcbiAgICBrZXk6IHN0cmluZztcbiAgICBtb2RpZmllcnM6IHN0cmluZ1tdO1xuICAgIGNvbW1hbmQ6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGNvbnRleHQ/OiAnZWRpdG9yJyB8ICdnbG9iYWwnIHwgJ21vZGFsJztcbiAgICBlbmFibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbmhhbmNlZENvbW1hbmQge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgY2FsbGJhY2s/OiAoKSA9PiB2b2lkO1xuICAgIGVkaXRvckNhbGxiYWNrPzogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBhbnkpID0+IHZvaWQ7XG4gICAgY2hlY2tDYWxsYmFjaz86IChjaGVja2luZzogYm9vbGVhbikgPT4gYm9vbGVhbiB8IHZvaWQ7XG4gICAgaG90a2V5cz86IEtleWJvYXJkU2hvcnRjdXRbXTtcbiAgICBjYXRlZ29yeT86IHN0cmluZztcbiAgICBwcmlvcml0eT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEtleWJvYXJkU2hvcnRjdXRIYW5kbGVyIHtcbiAgICBwcml2YXRlIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgc2hvcnRjdXRzOiBNYXA8c3RyaW5nLCBLZXlib2FyZFNob3J0Y3V0PiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIGNvbnRleHRNZW51RW5hYmxlZCA9IHRydWU7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURlZmF1bHRTaG9ydGN1dHMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRpYWxpemVEZWZhdWx0U2hvcnRjdXRzKCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0U2hvcnRjdXRzOiBLZXlib2FyZFNob3J0Y3V0W10gPSBbXG4gICAgICAgICAgICAvLyBDb3JlIFZhdWx0UGlsb3Qgc2hvcnRjdXRzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnRW50ZXInLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6b3Blbi1jaGF0JyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wZW4gVmF1bHRQaWxvdCBDaGF0JyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlTJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnNtYXJ0LXNlYXJjaCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTbWFydCBTZWFyY2gnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUMnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6cXVpY2stY2hhdCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdRdWljayBDaGF0IHdpdGggU2VsZWN0aW9uJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZWRpdG9yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdTcGFjZScsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpjb3BpbG90LWNvbXBsZXRlJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0dldCBBSSBDb21wbGV0aW9uJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZWRpdG9yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlXJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OmV4ZWN1dGUtd29ya2Zsb3cnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5QScsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDphbmFseXplLXZhdWx0JyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgQ3VycmVudCBWYXVsdCcsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5RCcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpvcGVuLWRhc2hib2FyZCcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdPcGVuIFZhdWx0UGlsb3QgRGFzaGJvYXJkJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlQJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnBsYW4tbXktZGF5JyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1BsYW4gTXkgRGF5JyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIFZhdWx0IE1hbmFnZW1lbnQgc2hvcnRjdXRzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5VicsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDp2YXVsdC1zdHJ1Y3R1cmUnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVmlldyBWYXVsdCBTdHJ1Y3R1cmUnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleUYnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6ZmlsZS1vcGVyYXRpb25zJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ZpbGUgT3BlcmF0aW9ucycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5TycsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDp2YXVsdC1vcmdhbml6ZXInLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVmF1bHQgT3JnYW5pemVyJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlCJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OmJhdGNoLW9wZXJhdGlvbnMnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQmF0Y2ggT3BlcmF0aW9ucycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBFbmhhbmNlZCBzaG9ydGN1dHNcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlIJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnNob3ctc2hvcnRjdXRzJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Nob3cgS2V5Ym9hcmQgU2hvcnRjdXRzJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdLZXlSJyxcbiAgICAgICAgICAgICAgICBtb2RpZmllcnM6IFsnQ3RybCcsICdTaGlmdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnJlZnJlc2gtY2FjaGUnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmVmcmVzaCBDYWNoZScsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5TScsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpwZXJmb3JtYW5jZS1tZXRyaWNzJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Nob3cgUGVyZm9ybWFuY2UgTWV0cmljcycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5RycsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDphZ2VudC1tYXJrZXRwbGFjZScsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBZ2VudCBNYXJrZXRwbGFjZScsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5RScsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDphZ2VudC1ldm9sdXRpb24nLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWdlbnQgRXZvbHV0aW9uIFN0YXR1cycsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBRdWljayBhY3Rpb25zXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5UScsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0FsdCddLFxuICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICd2YXVsdHBpbG90OnF1aWNrLW5vdGUnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUXVpY2sgTm90ZSBDcmVhdGlvbicsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2dsb2JhbCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5SScsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnQWx0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6aW5zZXJ0LXRlbXBsYXRlJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0luc2VydCBUZW1wbGF0ZScsXG4gICAgICAgICAgICAgICAgY29udGV4dDogJ2VkaXRvcidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAga2V5OiAnS2V5TCcsXG4gICAgICAgICAgICAgICAgbW9kaWZpZXJzOiBbJ0N0cmwnLCAnU2hpZnQnXSxcbiAgICAgICAgICAgICAgICBjb21tYW5kOiAndmF1bHRwaWxvdDpsaW5rLWFuYWx5emVyJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgTGlua3MnLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdlZGl0b3InXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleVQnLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6dGFnLW1hbmFnZXInLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGFnIE1hbmFnZXInLFxuICAgICAgICAgICAgICAgIGNvbnRleHQ6ICdnbG9iYWwnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gRGVtbyBzaG9ydGN1dFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGtleTogJ0tleVonLFxuICAgICAgICAgICAgICAgIG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXG4gICAgICAgICAgICAgICAgY29tbWFuZDogJ3ZhdWx0cGlsb3Q6ZW5oYW5jZW1lbnQtZGVtbycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFbmhhbmNlbWVudCBGZWF0dXJlcyBEZW1vJyxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiAnZ2xvYmFsJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGRlZmF1bHRTaG9ydGN1dHMuZm9yRWFjaChzaG9ydGN1dCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFNob3J0Y3V0KHNob3J0Y3V0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkU2hvcnRjdXQoc2hvcnRjdXQ6IEtleWJvYXJkU2hvcnRjdXQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5nZXRTaG9ydGN1dEtleShzaG9ydGN1dCk7XG4gICAgICAgIHRoaXMuc2hvcnRjdXRzLnNldChrZXksIHNob3J0Y3V0KTtcbiAgICB9XG5cbiAgICByZW1vdmVTaG9ydGN1dChzaG9ydGN1dDogS2V5Ym9hcmRTaG9ydGN1dCkge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmdldFNob3J0Y3V0S2V5KHNob3J0Y3V0KTtcbiAgICAgICAgdGhpcy5zaG9ydGN1dHMuZGVsZXRlKGtleSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRTaG9ydGN1dEtleShzaG9ydGN1dDogS2V5Ym9hcmRTaG9ydGN1dCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtzaG9ydGN1dC5tb2RpZmllcnMuc29ydCgpLmpvaW4oJysnKX1fJHtzaG9ydGN1dC5rZXl9YDtcbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWVycyA9IFtdO1xuICAgICAgICBpZiAoZXZlbnQuY3RybEtleSkgbW9kaWZpZXJzLnB1c2goJ0N0cmwnKTtcbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBtb2RpZmllcnMucHVzaCgnU2hpZnQnKTtcbiAgICAgICAgaWYgKGV2ZW50LmFsdEtleSkgbW9kaWZpZXJzLnB1c2goJ0FsdCcpO1xuICAgICAgICBpZiAoZXZlbnQubWV0YUtleSkgbW9kaWZpZXJzLnB1c2goJ01ldGEnKTtcblxuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5jb2RlO1xuICAgICAgICBjb25zdCBzaG9ydGN1dEtleSA9IGAke21vZGlmaWVycy5zb3J0KCkuam9pbignKycpfV8ke2tleX1gO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2hvcnRjdXQgPSB0aGlzLnNob3J0Y3V0cy5nZXQoc2hvcnRjdXRLZXkpO1xuICAgICAgICBpZiAoc2hvcnRjdXQgJiYgKHNob3J0Y3V0LmVuYWJsZWQgIT09IGZhbHNlKSkge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHRoaXMuZ2V0Q3VycmVudENvbnRleHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2hvcnRjdXRWYWxpZEZvckNvbnRleHQoc2hvcnRjdXQsIGNvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVDb21tYW5kKHNob3J0Y3V0LmNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDdXJyZW50Q29udGV4dCgpOiAnZWRpdG9yJyB8ICdnbG9iYWwnIHwgJ21vZGFsJyB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgcmV0dXJuICdlZGl0b3InO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBtb2RhbCBpcyBvcGVuXG4gICAgICAgIGNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpO1xuICAgICAgICBpZiAobW9kYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiAnbW9kYWwnO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gJ2dsb2JhbCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Nob3J0Y3V0VmFsaWRGb3JDb250ZXh0KHNob3J0Y3V0OiBLZXlib2FyZFNob3J0Y3V0LCBjb250ZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFzaG9ydGN1dC5jb250ZXh0KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHNob3J0Y3V0LmNvbnRleHQgPT09IGNvbnRleHQgfHwgc2hvcnRjdXQuY29udGV4dCA9PT0gJ2dsb2JhbCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBleGVjdXRlQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gY29tbWFuZElkLnJlcGxhY2UoJ3ZhdWx0cGlsb3Q6JywgJycpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICAgICAgICBjYXNlICdvcGVuLWNoYXQnOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm9wZW5DaGF0TW9kYWwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NtYXJ0LXNlYXJjaCc6XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ub3BlblNtYXJ0U2VhcmNoTW9kYWwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3F1aWNrLWNoYXQnOlxuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmVkaXRvcjtcbiAgICAgICAgICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24oZWRpdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjb3BpbG90LWNvbXBsZXRlJzpcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVFZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUVkaXRvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5nZXRDb3BpbG90Q29tcGxldGlvbihhY3RpdmVFZGl0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2V4ZWN1dGUtd29ya2Zsb3cnOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm9wZW5Xb3JrZmxvd01vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhbmFseXplLXZhdWx0JzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hbmFseXplVmF1bHQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ29wZW4tZGFzaGJvYXJkJzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdwbGFuLW15LWRheSc6XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucGxhbk15RGF5KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd2YXVsdC1zdHJ1Y3R1cmUnOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmaWxlLW9wZXJhdGlvbnMnOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd2YXVsdC1vcmdhbml6ZXInOlxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm9wZW5WYXVsdE9yZ2FuaXplck1vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdiYXRjaC1vcGVyYXRpb25zJzpcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5vcGVuQmF0Y2hPcGVyYXRpb25zTW9kYWwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Nob3ctc2hvcnRjdXRzJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dTaG9ydGN1dHNIZWxwKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyZWZyZXNoLWNhY2hlJzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYWNoZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncGVyZm9ybWFuY2UtbWV0cmljcyc6XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhZ2VudC1tYXJrZXRwbGFjZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuQWdlbnRNYXJrZXRwbGFjZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWdlbnQtZXZvbHV0aW9uJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dBZ2VudEV2b2x1dGlvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncXVpY2stbm90ZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVRdWlja05vdGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2luc2VydC10ZW1wbGF0ZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbGluay1hbmFseXplcic6XG4gICAgICAgICAgICAgICAgdGhpcy5hbmFseXplTGlua3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RhZy1tYW5hZ2VyJzpcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5UYWdNYW5hZ2VyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdlbmhhbmNlbWVudC1kZW1vJzpcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5FbmhhbmNlbWVudERlbW8oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgVW5rbm93biBjb21tYW5kOiAke2NvbW1hbmR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dTaG9ydGN1dHNIZWxwKCkge1xuICAgICAgICBjb25zdCBzaG9ydGN1dHMgPSBBcnJheS5mcm9tKHRoaXMuc2hvcnRjdXRzLnZhbHVlcygpKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuZ2VuZXJhdGVTaG9ydGN1dHNIZWxwQ29udGVudChzaG9ydGN1dHMpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gJ1ZhdWx0UGlsb3QgS2V5Ym9hcmQgU2hvcnRjdXRzJztcbiAgICAgICAgbW9kYWwuY29udGVudEVsLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlU2hvcnRjdXRzSGVscENvbnRlbnQoc2hvcnRjdXRzOiBLZXlib2FyZFNob3J0Y3V0W10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBjYXRlZ29yaXplZCA9IHRoaXMuY2F0ZWdvcml6ZVNob3J0Y3V0cyhzaG9ydGN1dHMpO1xuICAgICAgICBcbiAgICAgICAgbGV0IGh0bWwgPSAnPGRpdiBjbGFzcz1cInZhdWx0cGlsb3Qtc2hvcnRjdXRzLWhlbHBcIj4nO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBbY2F0ZWdvcnksIGNhdGVnb3J5U2hvcnRjdXRzXSBvZiBPYmplY3QuZW50cmllcyhjYXRlZ29yaXplZCkpIHtcbiAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJzaG9ydGN1dC1jYXRlZ29yeVwiPmA7XG4gICAgICAgICAgICBodG1sICs9IGA8aDM+JHtjYXRlZ29yeX08L2gzPmA7XG4gICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwic2hvcnRjdXQtbGlzdFwiPmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhdGVnb3J5U2hvcnRjdXRzLmZvckVhY2goc2hvcnRjdXQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleUNvbWJvID0gYCR7c2hvcnRjdXQubW9kaWZpZXJzLmpvaW4oJyArICcpfSArICR7c2hvcnRjdXQua2V5LnJlcGxhY2UoJ0tleScsICcnKX1gO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJzaG9ydGN1dC1pdGVtXCI+YDtcbiAgICAgICAgICAgICAgICBodG1sICs9IGA8c3BhbiBjbGFzcz1cInNob3J0Y3V0LWtleXNcIj4ke2tleUNvbWJvfTwvc3Bhbj5gO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxzcGFuIGNsYXNzPVwic2hvcnRjdXQtZGVzY1wiPiR7c2hvcnRjdXQuZGVzY3JpcHRpb259PC9zcGFuPmA7XG4gICAgICAgICAgICAgICAgaHRtbCArPSBgPC9kaXY+YDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBodG1sICs9IGA8L2Rpdj48L2Rpdj5gO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgICAgICByZXR1cm4gaHRtbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhdGVnb3JpemVTaG9ydGN1dHMoc2hvcnRjdXRzOiBLZXlib2FyZFNob3J0Y3V0W10pOiBSZWNvcmQ8c3RyaW5nLCBLZXlib2FyZFNob3J0Y3V0W10+IHtcbiAgICAgICAgY29uc3QgY2F0ZWdvcmllczogUmVjb3JkPHN0cmluZywgS2V5Ym9hcmRTaG9ydGN1dFtdPiA9IHtcbiAgICAgICAgICAgICdDb3JlIEZlYXR1cmVzJzogW10sXG4gICAgICAgICAgICAnVmF1bHQgTWFuYWdlbWVudCc6IFtdLFxuICAgICAgICAgICAgJ0FnZW50IEZlYXR1cmVzJzogW10sXG4gICAgICAgICAgICAnUXVpY2sgQWN0aW9ucyc6IFtdLFxuICAgICAgICAgICAgJ1N5c3RlbSc6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgc2hvcnRjdXRzLmZvckVhY2goc2hvcnRjdXQgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IHNob3J0Y3V0LmNvbW1hbmQucmVwbGFjZSgndmF1bHRwaWxvdDonLCAnJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChbJ29wZW4tY2hhdCcsICdjb3BpbG90LWNvbXBsZXRlJywgJ2V4ZWN1dGUtd29ya2Zsb3cnLCAnYW5hbHl6ZS12YXVsdCddLmluY2x1ZGVzKGNvbW1hbmQpKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllc1snQ29yZSBGZWF0dXJlcyddLnB1c2goc2hvcnRjdXQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChbJ3ZhdWx0LXN0cnVjdHVyZScsICdmaWxlLW9wZXJhdGlvbnMnLCAndmF1bHQtb3JnYW5pemVyJywgJ2JhdGNoLW9wZXJhdGlvbnMnXS5pbmNsdWRlcyhjb21tYW5kKSkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNbJ1ZhdWx0IE1hbmFnZW1lbnQnXS5wdXNoKHNob3J0Y3V0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoWydhZ2VudC1tYXJrZXRwbGFjZScsICdhZ2VudC1ldm9sdXRpb24nXS5pbmNsdWRlcyhjb21tYW5kKSkge1xuICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNbJ0FnZW50IEZlYXR1cmVzJ10ucHVzaChzaG9ydGN1dCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFsncXVpY2stbm90ZScsICdpbnNlcnQtdGVtcGxhdGUnLCAnbGluay1hbmFseXplcicsICd0YWctbWFuYWdlciddLmluY2x1ZGVzKGNvbW1hbmQpKSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcmllc1snUXVpY2sgQWN0aW9ucyddLnB1c2goc2hvcnRjdXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzWydTeXN0ZW0nXS5wdXNoKHNob3J0Y3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNhdGVnb3JpZXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWZyZXNoQ2FjaGUoKSB7XG4gICAgICAgIC8vIEltcGxlbWVudCBjYWNoZSByZWZyZXNoIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgbmV3IE5vdGljZSgnQ2FjaGUgcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1BlcmZvcm1hbmNlTWV0cmljcygpIHtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJlIGltcGxlbWVudGVkIHdpdGggUHJvZ3Jlc3NJbmRpY2F0b3JVSVxuICAgICAgICBuZXcgTm90aWNlKCdQZXJmb3JtYW5jZSBtZXRyaWNzIGZlYXR1cmUgY29taW5nIHNvb24nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5BZ2VudE1hcmtldHBsYWNlKCkge1xuICAgICAgICAvLyBVc2UgZXhpc3RpbmcgYWdlbnQgbWFya2V0cGxhY2UgaWYgYXZhaWxhYmxlXG4gICAgICAgIG5ldyBOb3RpY2UoJ0FnZW50IG1hcmtldHBsYWNlIGZlYXR1cmUgY29taW5nIHNvb24nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dBZ2VudEV2b2x1dGlvbigpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnQWdlbnQgZXZvbHV0aW9uIHN0YXR1cyBmZWF0dXJlIGNvbWluZyBzb29uJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVRdWlja05vdGUoKSB7XG4gICAgICAgIGNvbnN0IG5ld0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5jcmVhdGUoXG4gICAgICAgICAgICBgUXVpY2sgTm90ZSAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxOSl9Lm1kYCxcbiAgICAgICAgICAgICcjIFF1aWNrIE5vdGVcXG5cXG4nXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBuZXdGaWxlLnRoZW4oZmlsZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluc2VydFRlbXBsYXRlKCkge1xuICAgICAgICBuZXcgTm90aWNlKCdUZW1wbGF0ZSBpbnNlcnRpb24gZmVhdHVyZSBjb21pbmcgc29vbicpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYW5hbHl6ZUxpbmtzKCkge1xuICAgICAgICBuZXcgTm90aWNlKCdMaW5rIGFuYWx5emVyIGZlYXR1cmUgY29taW5nIHNvb24nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5UYWdNYW5hZ2VyKCkge1xuICAgICAgICBuZXcgTm90aWNlKCdUYWcgbWFuYWdlciBmZWF0dXJlIGNvbWluZyBzb29uJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuRW5oYW5jZW1lbnREZW1vKCkge1xuICAgICAgICAvLyBJbXBvcnQgZGVtbyBjbGFzcyBkeW5hbWljYWxseSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcbiAgICAgICAgaW1wb3J0KCcuL2VuaGFuY2VtZW50LWRlbW8nKS50aGVuKCh7IFZhdWx0UGlsb3RFbmhhbmNlbWVudERlbW8gfSkgPT4ge1xuICAgICAgICAgICAgbmV3IFZhdWx0UGlsb3RFbmhhbmNlbWVudERlbW8odGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGVuaGFuY2VtZW50IGRlbW86JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRW5oYW5jZW1lbnQgZGVtbyBmYWlsZWQgdG8gbG9hZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTaG9ydGN1dHMoKTogS2V5Ym9hcmRTaG9ydGN1dFtdIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zaG9ydGN1dHMudmFsdWVzKCkpO1xuICAgIH1cblxuICAgIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dE1lbnVFbmFibGVkO1xuICAgIH1cblxuICAgIHNldEVuYWJsZWQoZW5hYmxlZDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmNvbnRleHRNZW51RW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuaGFuY2VkIENvbW1hbmRzIEZhY3RvcnlcbiAqIENyZWF0ZXMgZW5oYW5jZWQgY29tbWFuZCBkZWZpbml0aW9ucyBmb3IgVmF1bHRQaWxvdFxuICovXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDb21tYW5kc0ZhY3Rvcnkge1xuICAgIHN0YXRpYyBjcmVhdGVFbmhhbmNlZENvbW1hbmRzKHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbik6IEVuaGFuY2VkQ29tbWFuZFtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3ZhdWx0cGlsb3QtZW5oYW5jZWQtY2hhdCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ0VuaGFuY2VkIEFJIENoYXQnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT3BlbiBlbmhhbmNlZCBBSSBjaGF0IHdpdGggcmVhbC10aW1lIHByb2dyZXNzJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gcGx1Z2luLm9wZW5DaGF0TW9kYWwoKSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ0FJIEZlYXR1cmVzJyxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3ZhdWx0cGlsb3Qtc21hcnQtc2VhcmNoJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnU21hcnQgU2VhcmNoJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FJLXBvd2VyZWQgc2VhcmNoIHdpdGggY29udGV4dCBhd2FyZW5lc3MnLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiBwbHVnaW4ub3BlblNtYXJ0U2VhcmNoTW9kYWwoKSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ1NlYXJjaCcsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IDJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICd2YXVsdHBpbG90LXF1aWNrLWNvbXBsZXRpb24nLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdRdWljayBBSSBDb21wbGV0aW9uJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0dldCBBSSBjb21wbGV0aW9uIGZvciBjdXJyZW50IGNvbnRleHQnLFxuICAgICAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHBsdWdpbi5nZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3IpLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnQUkgRmVhdHVyZXMnLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAndmF1bHRwaWxvdC13b3JrZmxvdy1lbmhhbmNlZCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ0VuaGFuY2VkIFdvcmtmbG93IEV4ZWN1dGlvbicsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFeGVjdXRlIHdvcmtmbG93cyB3aXRoIHByb2dyZXNzIHRyYWNraW5nJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gcGx1Z2luLm9wZW5Xb3JrZmxvd01vZGFsKCksXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdBdXRvbWF0aW9uJyxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogNFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtYW5hbHlzaXMnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdFbmhhbmNlZCBWYXVsdCBBbmFseXNpcycsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDb21wcmVoZW5zaXZlIHZhdWx0IGFuYWx5c2lzIHdpdGggb3B0aW1pemF0aW9uJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gcGx1Z2luLmFuYWx5emVWYXVsdCgpLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAnQW5hbHl0aWNzJyxcbiAgICAgICAgICAgICAgICBwcmlvcml0eTogNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogJ3ZhdWx0cGlsb3QtZW5oYW5jZW1lbnQtZGVtbycsXG4gICAgICAgICAgICAgICAgbmFtZTogJ0VuaGFuY2VtZW50IEZlYXR1cmVzIERlbW8nLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGVtb25zdHJhdGUga2V5Ym9hcmQgc2hvcnRjdXRzLCBwcm9ncmVzcyBpbmRpY2F0b3JzLCBhbmQgcGVyZm9ybWFuY2UgZmVhdHVyZXMnLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGltcG9ydCgnLi9lbmhhbmNlbWVudC1kZW1vJykudGhlbigoeyBWYXVsdFBpbG90RW5oYW5jZW1lbnREZW1vIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBWYXVsdFBpbG90RW5oYW5jZW1lbnREZW1vKHBsdWdpbi5hcHAsIHBsdWdpbikub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBlbmhhbmNlbWVudCBkZW1vOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VuaGFuY2VtZW50IGRlbW8gZmFpbGVkIHRvIGxvYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogJ0RlbW8nLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAxMFxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBLZXlib2FyZFNob3J0Y3V0SGFuZGxlciwgRW5oYW5jZWRDb21tYW5kc0ZhY3RvcnkgfTtcbiIsImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldywgVEZpbGUsIEVkaXRvclBvc2l0aW9uLCByZXF1ZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9ULCBWYXVsdFBpbG90VmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQiwgVmF1bHRQaWxvdEZ1bGxUYWJWaWV3IH0gZnJvbSAnLi9mdWxsLXRhYi12aWV3JztcbmltcG9ydCB7IENoYXRNb2RhbCB9IGZyb20gJy4vY2hhdC1tb2RhbCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGFsIH0gZnJvbSAnLi93b3JrZmxvdy1tb2RhbCc7XG5pbXBvcnQgeyBFdm9BZ2VudFhDbGllbnQgfSBmcm9tICcuL2FwaS1jbGllbnQnO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzLCBDb3BpbG90UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZldGNoU2NoZWR1bGUsIGluamVjdFNjaGVkdWxlLCB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24sIGZpbmRTY2hlZHVsZVNlY3Rpb24sIGZpbmRQbGFuU2VjdGlvbiB9IGZyb20gJy4vcGxhbm5lcic7XG5pbXBvcnQgeyBwbGFuTXlEYXlEZWJ1Z2dlciB9IGZyb20gJy4vcGxhbi1teS1kYXktZGVidWcnO1xuaW1wb3J0IHsgc2V0QXBwIH0gZnJvbSAnLi92YXVsdC11dGlscyc7XG5pbXBvcnQgeyBWYXVsdE1hbmFnZW1lbnRDbGllbnQgfSBmcm9tICcuL3ZhdWx0LWFwaS1jbGllbnQnO1xuaW1wb3J0IHsgY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMgfSBmcm9tICcuL3ZhdWx0LWNvbW1hbmRzJztcbmltcG9ydCB7IE1vZGVsU2VsZWN0aW9uU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvTW9kZWxTZWxlY3Rpb25TZXJ2aWNlJztcbmltcG9ydCB7IEVudmlyb25tZW50RGV0ZWN0b3IgfSBmcm9tICcuL3V0aWxzL0Vudmlyb25tZW50RGV0ZWN0b3InO1xuaW1wb3J0IHsgXG4gIFZhdWx0U3RydWN0dXJlTW9kYWwsIFxuICBTbWFydFNlYXJjaE1vZGFsLCBcbiAgRmlsZU9wZXJhdGlvbnNNb2RhbFxufSBmcm9tICcuL3ZhdWx0LW1vZGFscyc7XG5pbXBvcnQgeyBQaGFzZTNJbnRlZ3JhdGlvbiB9IGZyb20gJy4vY29tcG9uZW50cy9QaGFzZTNJbnRlZ3JhdGlvbic7XG4vLyBFbmhhbmNlZCBVSSBDb21wb25lbnRzXG5pbXBvcnQgeyBWYXVsdFBpbG90RW5oYW5jZW1lbnRNYW5hZ2VyIH0gZnJvbSAnLi92YXVsdC1tYW5hZ2VtZW50L2VuaGFuY2VkLXVpLWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgS2V5Ym9hcmRTaG9ydGN1dEhhbmRsZXIsIEVuaGFuY2VkQ29tbWFuZHNGYWN0b3J5IH0gZnJvbSAnLi92YXVsdC1tYW5hZ2VtZW50L2VuaGFuY2VkLWNvbW1hbmRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmF1bHRQaWxvdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzITogVmF1bHRQaWxvdFNldHRpbmdzO1xuICBhcGlDbGllbnQhOiBFdm9BZ2VudFhDbGllbnQ7XG4gIHZhdWx0Q2xpZW50ITogVmF1bHRNYW5hZ2VtZW50Q2xpZW50O1xuICBtb2RlbFNlbGVjdGlvblNlcnZpY2U/OiBNb2RlbFNlbGVjdGlvblNlcnZpY2U7XG4gIHBoYXNlM0ludGVncmF0aW9uPzogUGhhc2UzSW50ZWdyYXRpb247XG4gIGVuaGFuY2VtZW50TWFuYWdlcj86IFZhdWx0UGlsb3RFbmhhbmNlbWVudE1hbmFnZXI7XG4gIGtleWJvYXJkSGFuZGxlcj86IEtleWJvYXJkU2hvcnRjdXRIYW5kbGVyO1xuICBwcml2YXRlIHdlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICBwcml2YXRlIGNvcGlsb3RFbmFibGVkID0gZmFsc2U7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBMb2FkIGVuaGFuY2VkIFVJIHN0eWxlc1xuICAgIHRoaXMubG9hZEVuaGFuY2VkVUlTdHlsZXMoKTtcblxuICAgIC8vIEluaXRpYWxpemUgYXBwIGluc3RhbmNlIGZvciB2YXVsdC11dGlsc1xuICAgIHNldEFwcCh0aGlzLmFwcCk7XG5cbiAgICAvLyBJbml0aWFsaXplIEFQSSBjbGllbnRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG5cbiAgICAvLyBJbml0aWFsaXplIHZhdWx0IG1hbmFnZW1lbnQgaWYgZW5hYmxlZFxuICAgIGlmICh0aGlzLnNldHRpbmdzLnZhdWx0TWFuYWdlbWVudD8uZW5hYmxlVmF1bHRNYW5hZ2VtZW50KSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQoKTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIG1vZGVsIHNlbGVjdGlvbiBpZiBlbmFibGVkICh3aXRoIGVycm9yIGhhbmRsaW5nKVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5lbmFibGVkKSB7XG4gICAgICAvLyBEb24ndCBhd2FpdCAtIGluaXRpYWxpemUgaW4gYmFja2dyb3VuZCB0byBhdm9pZCBibG9ja2luZyBwbHVnaW4gbG9hZFxuICAgICAgdGhpcy5pbml0aWFsaXplTW9kZWxTZWxlY3Rpb24oKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTW9kZWwgc2VsZWN0aW9uIGluaXRpYWxpemF0aW9uIGZhaWxlZCBkdXJpbmcgcGx1Z2luIGxvYWQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbGVudGx5IGZhaWwgZHVyaW5nIHBsdWdpbiBpbml0aWFsaXphdGlvblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gVGVzdCBiYWNrZW5kIGNvbm5lY3Rpb25cbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKCfinIUgVmF1bHRQaWxvdCBjb25uZWN0ZWQgdG8gRXZvQWdlbnRYJywgMzAwMCk7XG4gICAgICAgIC8vIENvbm5lY3QgV2ViU29ja2V0IGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KSB7XG4gICAgICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWx0aCBjaGVjayBmYWlsZWQ6JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gRXZvQWdlbnRYIGJhY2tlbmQgb2ZmbGluZSAtIHNvbWUgZmVhdHVyZXMgbWF5IG5vdCB3b3JrJywgNTAwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWx0aCBjaGVjayBlcnJvcjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCfimqDvuI8gQ2Fubm90IGNvbm5lY3QgdG8gRXZvQWdlbnRYIGJhY2tlbmQnLCA1MDAwKTtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciB2aWV3c1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCLFxuICAgICAgKGxlYWYpID0+IG5ldyBWYXVsdFBpbG90RnVsbFRhYlZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuXG4gICAgLy8gQWRkIHJpYmJvbiBpY29uXG4gICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdib3QnLCAnVmF1bHRQaWxvdCcsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChldnQuY3RybEtleSB8fCBldnQubWV0YUtleSkge1xuICAgICAgICAvLyBPcGVuIGZ1bGwgdGFiIHZpZXcgb24gQ3RybC9DbWQgKyBjbGlja1xuICAgICAgICB0aGlzLmFjdGl2YXRlRnVsbFRhYlZpZXcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERlZmF1bHQgYWN0aW9uOiBvcGVuIGNoYXQgbW9kYWxcbiAgICAgICAgdGhpcy5vcGVuQ2hhdE1vZGFsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmliYm9uSWNvbkVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXJpYmJvbi1jbGFzcycpO1xuICAgIHJpYmJvbkljb25FbC50aXRsZSA9ICdWYXVsdFBpbG90IChDdHJsK2NsaWNrIGZvciBEYXNoYm9hcmQpJztcblxuICAgIC8vIFJlZ2lzdGVyIGNvbW1hbmRzXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1jaGF0JyxcbiAgICAgIG5hbWU6ICdPcGVuIENoYXQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlbkNoYXRNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdleGVjdXRlLXdvcmtmbG93JyxcbiAgICAgIG5hbWU6ICdFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5Xb3JrZmxvd01vZGFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2FuYWx5emUtdmF1bHQnLFxuICAgICAgbmFtZTogJ0FuYWx5emUgQ3VycmVudCBWYXVsdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hbmFseXplVmF1bHQoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnY29waWxvdC1jb21wbGV0ZScsXG4gICAgICBuYW1lOiAnR2V0IEFJIENvbXBsZXRpb24nLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5nZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdxdWljay1jaGF0JyxcbiAgICAgIG5hbWU6ICdRdWljayBDaGF0IHdpdGggU2VsZWN0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMucXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLXRhc2tzJyxcbiAgICAgIG5hbWU6ICdQbGFuIFRhc2tzIGZyb20gTm90ZScsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tbXktZGF5JyxcbiAgICAgIG5hbWU6ICdQbGFuIE15IERheScsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5wbGFuTXlEYXkoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAncGxhbi1teS1kYXktZGVidWcnLFxuICAgICAgbmFtZTogJ1BsYW4gTXkgRGF5IC0gRGVidWcgQ29ubmVjdGlvbicsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5kZWJ1Z1BsYW5NeURheSgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICd0ZXN0LW1vZGVsLXNlbGVjdGlvbicsXG4gICAgICBuYW1lOiAnVGVzdCBTbWFydCBNb2RlbCBTZWxlY3Rpb24nLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMudGVzdE1vZGVsU2VsZWN0aW9uKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Nob3ctbW9kZWwtaGVhbHRoJyxcbiAgICAgIG5hbWU6ICdTaG93IE1vZGVsIEhlYWx0aCBTdGF0dXMnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2hvd01vZGVsSGVhbHRoKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3JldHJ5LW1vZGVsLXNlbGVjdGlvbicsXG4gICAgICBuYW1lOiAnUmV0cnkgTW9kZWwgU2VsZWN0aW9uIEluaXRpYWxpemF0aW9uJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnJldHJ5TW9kZWxTZWxlY3Rpb25NYW51YWwoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnY2hlY2stc2VydmljZS1zdGF0dXMnLFxuICAgICAgbmFtZTogJ0NoZWNrIFZhdWx0UGlsb3QgU2VydmljZSBTdGF0dXMnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuY2hlY2tTZXJ2aWNlU3RhdHVzKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tdmF1bHRwaWxvdC12aWV3JyxcbiAgICAgIG5hbWU6ICdPcGVuIFZhdWx0UGlsb3QgVmlldycsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZVZpZXcoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi12YXVsdHBpbG90LWZ1bGwtdGFiJyxcbiAgICAgIG5hbWU6ICdPcGVuIFZhdWx0UGlsb3QgRGFzaGJvYXJkJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlRnVsbFRhYlZpZXcoKVxuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0ZXIgdmF1bHQgbWFuYWdlbWVudCBjb21tYW5kc1xuICAgIHRoaXMucmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcygpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBQaGFzZSAzIGZlYXR1cmVzXG4gICAgdGhpcy5pbml0aWFsaXplUGhhc2UzKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIEVuaGFuY2VtZW50IE1hbmFnZXIgYW5kIEtleWJvYXJkIFNob3J0Y3V0c1xuICAgIHRoaXMuaW5pdGlhbGl6ZUVuaGFuY2VtZW50TWFuYWdlcigpO1xuXG4gICAgLy8gUmVnaXN0ZXIgZWRpdG9yIGV2ZW50cyBmb3IgY29waWxvdFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleXVwJywgdGhpcy5oYW5kbGVLZXlVcC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBWYXVsdFBpbG90U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICB9XG5cbiAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVCk7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQik7XG4gICAgdGhpcy5kaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0TW9kZWxTZWxlY3Rpb24oKTtcbiAgICB0aGlzLmRpc2FibGVQaGFzZTMoKTtcbiAgICB0aGlzLmRpc2FibGVFbmhhbmNlbWVudE1hbmFnZXIoKTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBNYW5hZ2VtZW50XG4gIGNvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSByZXR1cm47XG5cbiAgICB0aGlzLmFwaUNsaWVudC5jb25uZWN0V2ViU29ja2V0KHtcbiAgICAgIG9uQ2hhdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjaGF0IHVwZGF0ZXNcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjaGF0IHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbldvcmtmbG93UHJvZ3Jlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93OiAke2RhdGEuc3RlcH1gLCAyMDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvcGlsb3Q6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBjb3BpbG90IHN1Z2dlc3Rpb25zXG4gICAgICAgIHRoaXMuaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25WYXVsdFN5bmM6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB2YXVsdCBzeW5jaHJvbml6YXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IHN5bmMgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uSW50ZW50RGVidWc6IChkZWJ1ZykgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgaW50ZW50IGRlYnVnIGluZm8gKG9ubHkgaW4gZGVidWcgbW9kZSlcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ludGVudERlYnVnICYmIHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ludGVudCBkZWJ1ZzonLCBkZWJ1Zyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgbmV3IE5vdGljZShgV2ViU29ja2V0IGVycm9yOiAke2Vycm9yfWAsIDUwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRGlzY29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgZGlzY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgdGhpcy5hcGlDbGllbnQuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBpc1dlYlNvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBNb2RhbCBNYW5hZ2VtZW50XG4gIG9wZW5DaGF0TW9kYWwoKSB7XG4gICAgbmV3IENoYXRNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlbldvcmtmbG93TW9kYWwoKSB7XG4gICAgbmV3IFdvcmtmbG93TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIC8vIENvbW1hbmQgSW1wbGVtZW50YXRpb25zXG4gIGFzeW5jIGFuYWx5emVWYXVsdCgpIHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdBbmFseXppbmcgdmF1bHQuLi4nLCAwKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlc1xuICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICAvLyBJbmNsdWRlIHVwIHRvIDEwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMTApKSB7XG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgY29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2ZpbGVDb250ZW50fVxcblxcbmA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuYW5hbHl6ZVZhdWx0Q29udGV4dCh7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGFuYWx5c2lzX3R5cGU6ICdpbnNpZ2h0cydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhbmFseXNpcyBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdCBBbmFseXNpcyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IGFuYWx5c2lzQ29udGVudCA9IGAjIFZhdWx0IEFuYWx5c2lzIC0gJHt0aW1lc3RhbXB9XFxuXFxuYDtcbiAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBBbmFseXNpc1xcblxcbiR7cmVzcG9uc2UuZGF0YS5hbmFseXNpc31cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5zaWdodHMgJiYgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBLZXkgSW5zaWdodHNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMuZm9yRWFjaChpbnNpZ2h0ID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke2luc2lnaHR9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMgJiYgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgUmVjb21tZW5kYXRpb25zXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtyZWN9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgYW5hbHlzaXNDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVmF1bHQgYW5hbHlzaXMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBBbmFseXNpcyBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSB7XG4gICAgICBuZXcgTm90aWNlKCdDb3BpbG90IGlzIGRpc2FibGVkIGluIHNldHRpbmdzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSBjdXJyZW50TGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcbiAgICBjb25zdCBmdWxsVGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gICAgLy8gQ2xpZW50LXNpZGUgdmFsaWRhdGlvbiB0byBwcmV2ZW50IDQyMiBlcnJvcnNcbiAgICBpZiAoIWZ1bGxUZXh0IHx8IGZ1bGxUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBjb21wbGV0ZSBlbXB0eSB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBmdWxsVGV4dCxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nLFxuICAgICAgICBjb250ZXh0OiB0ZXh0QmVmb3JlQ3Vyc29yXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgY29tcGxldGlvbiBhdCBjdXJzb3JcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShyZXNwb25zZS5kYXRhLmNvbXBsZXRpb24sIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0NvbXBsZXRpb24gaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgbmV3IE5vdGljZSgnTm8gdGV4dCBzZWxlY3RlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNoYXQoe1xuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGV4cGxhaW4gb3IgYW5hbHl6ZSB0aGlzIHRleHQ6IFwiJHtzZWxlY3Rpb259XCJgLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBlZGl0b3IuZ2V0VmFsdWUoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IHJlc3BvbnNlIGJlbG93IHNlbGVjdGlvblxuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCd0bycpO1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gYFxcblxcbioqVmF1bHRQaWxvdCBBbmFseXNpczoqKlxcbiR7cmVzcG9uc2UuZGF0YS5yZXNwb25zZX1cXG5cXG5gO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0FuYWx5c2lzIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghY29udGVudC50cmltKCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGNvbnRlbnQgdG8gYW5hbHl6ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHRhc2tzLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgICBnb2FsOiBgQ3JlYXRlIGEgdGFzayBwbGFuIGJhc2VkIG9uIHRoaXMgbm90ZTogJHthY3RpdmVGaWxlPy5uYW1lIHx8ICdVbnRpdGxlZCd9YCxcbiAgICAgICAgY29udGV4dDogY29udGVudCxcbiAgICAgICAgdGltZWZyYW1lOiAnMSB3ZWVrJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRhc2sgcGxhbiBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBUYXNrIFBsYW4gLSAke2FjdGl2ZUZpbGU/LmJhc2VuYW1lIHx8ICdVbnRpdGxlZCd9IC0gJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXNrQ29udGVudCA9IGAjICR7cmVzcG9uc2UuZGF0YS5wbGFuLnRpdGxlfVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAke3Jlc3BvbnNlLmRhdGEucGxhbi5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgKipFc3RpbWF0ZWQgRHVyYXRpb246KiogJHtyZXNwb25zZS5kYXRhLnBsYW4uZXN0aW1hdGVkX2R1cmF0aW9ufVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzICYmIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIFRhc2tzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnBsYW4udGFza3MuZm9yRWFjaCgodGFzazogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2suc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICdbeF0nIDogJ1sgXSc7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgJHtjaGVja2JveH0gKioke3Rhc2sudGl0bGV9KiogKCR7dGFzay5wcmlvcml0eX0gcHJpb3JpdHkpXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAke3Rhc2suZGVzY3JpcHRpb259XFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAqRXN0aW1hdGVkIHRpbWU6ICR7dGFzay5lc3RpbWF0ZWRfdGltZX0qXFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMgJiYgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgTWlsZXN0b25lc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmZvckVhY2goKG1pbGVzdG9uZTogYW55KSA9PiB7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgLSAqKiR7bWlsZXN0b25lLnRpdGxlfSoqICgke21pbGVzdG9uZS50YXJnZXRfZGF0ZX0pXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICR7bWlsZXN0b25lLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIHRhc2tDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFuIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1Rhc2sgcGxhbm5pbmcgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW5uaW5nIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5NeURheSgpIHtcbiAgICBjb25zb2xlLmxvZygn8J+agCBbUGxhbiBNeSBEYXldIENvbW1hbmQgc3RhcnRlZCcpO1xuICAgIFxuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gW1BsYW4gTXkgRGF5XSBObyBhY3RpdmUgZmlsZSBmb3VuZCcpO1xuICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIG5vdGXigJRvcGVuIHRvZGF5XFwncyBkYWlseSBub3RlIGZpcnN0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfwn5OBIFtQbGFuIE15IERheV0gQWN0aXZlIGZpbGU6Jywge1xuICAgICAgbmFtZTogYWN0aXZlRmlsZS5uYW1lLFxuICAgICAgcGF0aDogYWN0aXZlRmlsZS5wYXRoLFxuICAgICAgZXh0ZW5zaW9uOiBhY3RpdmVGaWxlLmV4dGVuc2lvblxuICAgIH0pO1xuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUGxhbm5pbmcgeW91ciBkYXkgd2l0aCBBSS4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OWIFtQbGFuIE15IERheV0gUmVhZGluZyBmaWxlIGNvbnRlbnQuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gUmVhZCB0aGUgZW50aXJlIGZpbGUgY29udGVudFxuICAgICAgY29uc3QgZmlsZVRleHQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn8J+TnSBbUGxhbiBNeSBEYXldIEZpbGUgY29udGVudCByZWFkOicsIHtcbiAgICAgICAgbGVuZ3RoOiBmaWxlVGV4dC5sZW5ndGgsXG4gICAgICAgIGhhc0NvbnRlbnQ6IGZpbGVUZXh0LnRyaW0oKS5sZW5ndGggPiAwLFxuICAgICAgICBmaXJzdExpbmU6IGZpbGVUZXh0LnNwbGl0KCdcXG4nKVswXSxcbiAgICAgICAgbGluZUNvdW50OiBmaWxlVGV4dC5zcGxpdCgnXFxuJykubGVuZ3RoXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBDaGVja2luZyBBUEkgY2xpZW50Li4uJyk7XG4gICAgICBjb25zb2xlLmxvZygn8J+UlyBbUGxhbiBNeSBEYXldIEFQSSBjbGllbnQgc3RhdHVzOicsIHtcbiAgICAgICAgZXhpc3RzOiAhIXRoaXMuYXBpQ2xpZW50LFxuICAgICAgICB0eXBlOiB0eXBlb2YgdGhpcy5hcGlDbGllbnQsXG4gICAgICAgIGlzQ29ubmVjdGVkOiB0aGlzLmFwaUNsaWVudCA/ICdhdmFpbGFibGUnIDogJ25vdCBhdmFpbGFibGUnXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0aGlzLmFwaUNsaWVudCkge1xuICAgICAgICBjb25zdCBlcnJvciA9ICdBUEkgY2xpZW50IG5vdCBpbml0aWFsaXplZC4gQ2hlY2sgVmF1bHRQaWxvdCBzZXR0aW5ncyBhbmQgY29ubmVjdGlvbi4nO1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBFcnJvcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OkIFtQbGFuIE15IERheV0gRmV0Y2hpbmcgc2NoZWR1bGUgZnJvbSBFdm9BZ2VudFguLi4nKTtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggc2NoZWR1bGUgZnJvbSBFdm9BZ2VudFggaW5zdGVhZCBvZiBsb2NhbGhvc3Q6MzAwMFxuICAgICAgY29uc3QgeyBzY2hlZHVsZU1hcmtkb3duLCBoZWFkbGluZSB9ID0gYXdhaXQgZmV0Y2hTY2hlZHVsZShmaWxlVGV4dCwgdGhpcy5hcGlDbGllbnQpO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIHJlY2VpdmVkOicsIHtcbiAgICAgICAgbWFya2Rvd25MZW5ndGg6IHNjaGVkdWxlTWFya2Rvd24ubGVuZ3RoLFxuICAgICAgICBoZWFkbGluZTogaGVhZGxpbmUsXG4gICAgICAgIGZpcnN0TGluZTogc2NoZWR1bGVNYXJrZG93bi5zcGxpdCgnXFxuJylbMF1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZygn4pyFIFtQbGFuIE15IERheV0gVmFsaWRhdGluZyBzY2hlZHVsZS4uLicpO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgcmV0dXJuZWQgc2NoZWR1bGVcbiAgICAgIGlmICghdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duKHNjaGVkdWxlTWFya2Rvd24pKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gJ0ludmFsaWQgc2NoZWR1bGUgZGF0YSByZWNlaXZlZCBmcm9tIEFQSSc7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIFZhbGlkYXRpb24gZmFpbGVkOicsIHtcbiAgICAgICAgICBzY2hlZHVsZU1hcmtkb3duOiBzY2hlZHVsZU1hcmtkb3duLnN1YnN0cmluZygwLCAyMDApLFxuICAgICAgICAgIGxlbmd0aDogc2NoZWR1bGVNYXJrZG93bi5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OdIFtQbGFuIE15IERheV0gSW5qZWN0aW5nIHNjaGVkdWxlIGludG8gbm90ZS4uLicpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBub3RlIGFscmVhZHkgaGFzIGEgcGxhbiBzZWN0aW9uIChjb21tZW50IHdyYXBwZXIpIG9yIHNjaGVkdWxlIHNlY3Rpb25cbiAgICAgIGNvbnN0IGV4aXN0aW5nUGxhblNlY3Rpb24gPSBmaW5kUGxhblNlY3Rpb24oZmlsZVRleHQpO1xuICAgICAgY29uc3QgZXhpc3RpbmdTY2hlZHVsZVNlY3Rpb24gPSBmaW5kU2NoZWR1bGVTZWN0aW9uKGZpbGVUZXh0KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBFeGlzdGluZyBzZWN0aW9uczonLCB7XG4gICAgICAgIGhhc1BsYW5XcmFwcGVyOiAhIWV4aXN0aW5nUGxhblNlY3Rpb24sXG4gICAgICAgIGhhc1NjaGVkdWxlU2VjdGlvbjogISFleGlzdGluZ1NjaGVkdWxlU2VjdGlvbixcbiAgICAgICAgcGxhbkNvbnRlbnQ6IGV4aXN0aW5nUGxhblNlY3Rpb24/LlsyXT8uc3Vic3RyaW5nKDAsIDUwKSxcbiAgICAgICAgc2NoZWR1bGVIZWFkaW5nOiBleGlzdGluZ1NjaGVkdWxlU2VjdGlvbj8uWzFdPy5zdWJzdHJpbmcoMCwgNTApXG4gICAgICB9KTtcblxuICAgICAgLy8gSW5qZWN0IHRoZSBzY2hlZHVsZSBpbnRvIHRoZSBub3RlXG4gICAgICBjb25zdCB1cGRhdGVkVGV4dCA9IGluamVjdFNjaGVkdWxlKGZpbGVUZXh0LCBzY2hlZHVsZU1hcmtkb3duKTtcblxuICAgICAgY29uc29sZS5sb2coJ/Cfkr4gW1BsYW4gTXkgRGF5XSBVcGRhdGluZyBmaWxlLi4uJywge1xuICAgICAgICBvcmlnaW5hbExlbmd0aDogZmlsZVRleHQubGVuZ3RoLFxuICAgICAgICB1cGRhdGVkTGVuZ3RoOiB1cGRhdGVkVGV4dC5sZW5ndGgsXG4gICAgICAgIGNoYW5nZWQ6IGZpbGVUZXh0ICE9PSB1cGRhdGVkVGV4dFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHVwZGF0ZWRUZXh0KTtcblxuICAgICAgY29uc29sZS5sb2coJ+KchSBbUGxhbiBNeSBEYXldIEZpbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcblxuICAgICAgLy8gSGlkZSB0aGUgcHJvZ3Jlc3Mgbm90aWNlXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICAvLyBTaG93IHN1Y2Nlc3Mgbm90aWNlXG4gICAgICBjb25zdCBzdWNjZXNzTWVzc2FnZSA9IGhlYWRsaW5lID8gYCR7aGVhZGxpbmV9IOKchWAgOiAnU2NoZWR1bGUgaW5zZXJ0ZWQg4pyFJztcbiAgICAgIGNvbnNvbGUubG9nKCfwn46JIFtQbGFuIE15IERheV0gU3VjY2VzczonLCBzdWNjZXNzTWVzc2FnZSk7XG4gICAgICBuZXcgTm90aWNlKHN1Y2Nlc3NNZXNzYWdlKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBPcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CflI0gW1BsYW4gTXkgRGF5XSBFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICBzdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogJ05vIHN0YWNrIHRyYWNlJyxcbiAgICAgICAgdHlwZTogdHlwZW9mIGVycm9yLFxuICAgICAgICBuYW1lOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubmFtZSA6ICdVbmtub3duJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdHlwZXMgb2YgZXJyb3JzIGZyb20gRXZvQWdlbnRYXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXldIEFuYWx5emluZyBlcnJvciBtZXNzYWdlOicsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdBUEkgY2xpZW50IG5vdCBpbml0aWFsaXplZCcpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gQVBJIGNsaWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogVmF1bHRQaWxvdCBub3QgY29ubmVjdGVkIHRvIEV2b0FnZW50WC4gQ2hlY2sgc2V0dGluZ3MgYW5kIHJlc3RhcnQgcGx1Z2luLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZG9lcyBub3QgaGF2ZSBwbGFuVGFza3MgbWV0aG9kJykpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgW1BsYW4gTXkgRGF5XSBBUEkgY2xpZW50IG1pc3NpbmcgcGxhblRhc2tzIG1ldGhvZCcpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBFdm9BZ2VudFggQVBJIGNsaWVudCBvdXRkYXRlZC4gUGxlYXNlIHVwZGF0ZSBWYXVsdFBpbG90IHBsdWdpbi4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0pTT04nKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0ludmFsaWQgc2NoZWR1bGUgZGF0YScpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gSW52YWxpZCByZXNwb25zZSBmb3JtYXQnKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBFdm9BZ2VudFgnKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdGYWlsZWQgdG8gZmV0Y2gnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIE5ldHdvcmsgZXJyb3InKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmluZyBlcnJvcjogVW5hYmxlIHRvIGNvbm5lY3QgdG8gRXZvQWdlbnRYIHNlcnZlci4gQ2hlY2sgeW91ciBjb25uZWN0aW9uIGFuZCBzZXJ2ZXIgc3RhdHVzLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGdlbmVyYXRlIHNjaGVkdWxlJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdTY2hlZHVsZSBmZXRjaCBmYWlsZWQnKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIFNjaGVkdWxlIGdlbmVyYXRpb24gZmFpbGVkJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IEV2b0FnZW50WCB0YXNrIHBsYW5uaW5nIGZhaWxlZC4gQ2hlY2sgc2VydmVyIGxvZ3MgZm9yIGRldGFpbHMuJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdObyBkYXRhIGluIEFQSSByZXNwb25zZScpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gRW1wdHkgQVBJIHJlc3BvbnNlJyk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5pbmcgZXJyb3I6IEV2b0FnZW50WCByZXR1cm5lZCBlbXB0eSByZXNwb25zZS4gVHJ5IGFnYWluIG9yIGNoZWNrIHNlcnZlciBzdGF0dXMuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFtQbGFuIE15IERheV0gVW5oYW5kbGVkIGVycm9yJyk7XG4gICAgICAgICAgbmV3IE5vdGljZShgUGxhbm5pbmcgZXJyb3I6ICR7ZXJyb3JNZXNzYWdlLnN1YnN0cmluZygwLCAxMDApfSR7ZXJyb3JNZXNzYWdlLmxlbmd0aCA+IDEwMCA/ICcuLi4nIDogJyd9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBbUGxhbiBNeSBEYXldIE5vbi1FcnJvciBvYmplY3QgdGhyb3duJyk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BsYW5uaW5nIGVycm9yOiBVbmtub3duIGVycm9yIG9jY3VycmVkIHdpdGggRXZvQWdlbnRYJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFsd2F5cyBsb2cgdGhlIGZ1bGwgZXJyb3IgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gW1BsYW4gTXkgRGF5XSBGdWxsIGVycm9yIGxvZyBjb21wbGV0ZWQnKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWJ1Z1BsYW5NeURheSgpIHtcbiAgICBjb25zb2xlLmxvZygn8J+UjSBbUGxhbiBNeSBEYXkgRGVidWddIFN0YXJ0aW5nIGNvbXByZWhlbnNpdmUgZGVidWcuLi4nKTtcbiAgICBwbGFuTXlEYXlEZWJ1Z2dlci5jbGVhckxvZ3MoKTtcbiAgICBcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdSdW5uaW5nIFBsYW4gTXkgRGF5IGRpYWdub3N0aWNzLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gVGVzdCAxOiBDaGVjayBhY3RpdmUgZmlsZVxuICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ/Cfk4EgQWN0aXZlIGZpbGUgY2hlY2snLCB7XG4gICAgICAgIGhhc0FjdGl2ZUZpbGU6ICEhYWN0aXZlRmlsZSxcbiAgICAgICAgZmlsZU5hbWU6IGFjdGl2ZUZpbGU/Lm5hbWUsXG4gICAgICAgIGZpbGVFeHRlbnNpb246IGFjdGl2ZUZpbGU/LmV4dGVuc2lvblxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRlc3QgMjogQW5hbHl6ZSBBUEkgY2xpZW50XG4gICAgICBjb25zdCBhcGlBbmFseXNpcyA9IHBsYW5NeURheURlYnVnZ2VyLmFuYWx5emVBcGlDbGllbnQodGhpcy5hcGlDbGllbnQpO1xuICAgICAgcGxhbk15RGF5RGVidWdnZXIubG9nKCfwn5SXIEFQSSBjbGllbnQgYW5hbHlzaXMnLCBhcGlBbmFseXNpcyk7XG5cbiAgICAgIC8vIFRlc3QgMzogVGVzdCBFdm9BZ2VudFggY29ubmVjdGlvblxuICAgICAgaWYgKHRoaXMuYXBpQ2xpZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25UZXN0ID0gYXdhaXQgcGxhbk15RGF5RGVidWdnZXIudGVzdENvbm5lY3Rpb24odGhpcy5hcGlDbGllbnQpO1xuICAgICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ/CfjJAgQ29ubmVjdGlvbiB0ZXN0IHJlc3VsdCcsIGNvbm5lY3Rpb25UZXN0KTtcblxuICAgICAgICAvLyBUZXN0IDQ6IFRlc3QgdGFzayBwbGFubmluZyBmdW5jdGlvbmFsaXR5XG4gICAgICAgIGlmIChjb25uZWN0aW9uVGVzdC5zdWNjZXNzKSB7XG4gICAgICAgICAgY29uc3QgcGxhbm5pbmdUZXN0ID0gYXdhaXQgcGxhbk15RGF5RGVidWdnZXIudGVzdFRhc2tQbGFubmluZyhcbiAgICAgICAgICAgIHRoaXMuYXBpQ2xpZW50LCBcbiAgICAgICAgICAgICdUZXN0IG5vdGUgd2l0aCBzb21lIHRhc2tzOlxcbi0gV3JpdGUgY29kZVxcbi0gVGVzdCBmdW5jdGlvbmFsaXR5XFxuLSBSZXZpZXcgcmVzdWx0cydcbiAgICAgICAgICApO1xuICAgICAgICAgIHBsYW5NeURheURlYnVnZ2VyLmxvZygn8J+TiyBUYXNrIHBsYW5uaW5nIHRlc3QgcmVzdWx0JywgcGxhbm5pbmdUZXN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IDU6IENoZWNrIHNldHRpbmdzXG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5sb2coJ+Kame+4jyBQbHVnaW4gc2V0dGluZ3MnLCB7XG4gICAgICAgIGJhY2tlbmRVcmw6IHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCxcbiAgICAgICAgaGFzQXBpS2V5OiAhIXRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuICAgICAgICBkZWJ1Z01vZGU6IHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlXG4gICAgICB9KTtcblxuICAgICAgbm90aWNlLmhpZGUoKTtcblxuICAgICAgLy8gU2hvdyByZXN1bHRzIGluIGEgbW9kYWwgb3IgY29uc29sZVxuICAgICAgY29uc3QgbG9ncyA9IHBsYW5NeURheURlYnVnZ2VyLmdldExvZ3MoKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFtQbGFuIE15IERheSBEZWJ1Z10gQ29tcGxldGUgZGlhZ25vc3RpYyBsb2c6JywgbG9ncyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ1N1bW1hcnkgPSBsb2dzLnNsaWNlKC01KS5qb2luKCdcXG4nKTsgLy8gTGFzdCA1IGVudHJpZXNcbiAgICAgIG5ldyBOb3RpY2UoYERlYnVnIGNvbXBsZXRlISBDaGVjayBjb25zb2xlIGZvciBmdWxsIGxvZ3MuXFxuXFxuTGFzdCBlbnRyaWVzOlxcbiR7bG9nU3VtbWFyeX1gLCAxMDAwMCk7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGRlYnVnIGZpbGUgaWYgYWN0aXZlIGZpbGUgZXhpc3RzXG4gICAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBkZWJ1Z0NvbnRlbnQgPSBgIyBQbGFuIE15IERheSBEZWJ1ZyBSZXBvcnRcXG5cXG5HZW5lcmF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfVxcblxcbiMjIERpYWdub3N0aWMgUmVzdWx0c1xcblxcblxcYFxcYFxcYFxcbiR7cGxhbk15RGF5RGVidWdnZXIuZXhwb3J0TG9ncygpfVxcblxcYFxcYFxcYGA7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShgUGxhbiBNeSBEYXkgRGVidWcgLSAke0RhdGUubm93KCl9Lm1kYCwgZGVidWdDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZSgnRGVidWcgcmVwb3J0IHNhdmVkIGFzIG5ldyBub3RlIScpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBwbGFuTXlEYXlEZWJ1Z2dlci5lcnJvcignRGVidWcgcHJvY2VzcyBmYWlsZWQnLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBEZWJ1ZyBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgIGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUZ1bGxUYWJWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGUgYSBuZXcgdGFiIGluIHRoZSBtYWluIHdvcmtzcGFjZVxuICAgICAgY29uc3QgbmV3TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGlmIChuZXdMZWFmKSB7XG4gICAgICAgIGF3YWl0IG5ld0xlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQixcbiAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09IFZBVUxUIE1BTkFHRU1FTlQgTUVUSE9EUyA9PT1cblxuICBpbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50KCkge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCkgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMudmF1bHRDbGllbnQgPSBuZXcgVmF1bHRNYW5hZ2VtZW50Q2xpZW50KFxuICAgICAgdGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLFxuICAgICAgdGhpcy5zZXR0aW5ncy5hcGlLZXlcbiAgICApO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHZhdWx0IG1hbmFnZW1lbnQgZW5kcG9pbnRzIGFyZSBhdmFpbGFibGVcbiAgICB0aGlzLmNoZWNrVmF1bHRNYW5hZ2VtZW50QXZhaWxhYmlsaXR5KCk7XG4gICAgXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygnVmF1bHQgbWFuYWdlbWVudCBpbml0aWFsaXplZCcpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrVmF1bHRNYW5hZ2VtZW50QXZhaWxhYmlsaXR5KCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgYSBzaW1wbGUgdGVzdCBjYWxsIHRvIHNlZSBpZiB2YXVsdCBlbmRwb2ludHMgZXhpc3RcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsfS9hcGkvb2JzaWRpYW4vdmF1bHQvc3RydWN0dXJlYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgLi4uKHRoaXMuc2V0dGluZ3MuYXBpS2V5ICYmIHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5zZXR0aW5ncy5hcGlLZXl9YCB9KVxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGluY2x1ZGVfY29udGVudDogZmFsc2UsIG1heF9kZXB0aDogMSB9KVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAvLyBFbmRwb2ludCBkb2Vzbid0IGV4aXN0IC0gZGlzYWJsZSB2YXVsdCBtYW5hZ2VtZW50XG4gICAgICAgIHRoaXMuZGlzYWJsZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogVmF1bHQgbWFuYWdlbWVudCBlbmRwb2ludHMgbm90IGF2YWlsYWJsZSwgZGlzYWJsaW5nIGZlYXR1cmVzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBOZXR3b3JrIGVycm9yIG9yIG90aGVyIGlzc3VlIC0ga2VlcCB2YXVsdCBtYW5hZ2VtZW50IGJ1dCBsb2cgd2FybmluZ1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBDb3VsZCBub3QgY2hlY2sgdmF1bHQgbWFuYWdlbWVudCBhdmFpbGFiaWxpdHk6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGRpc2FibGVWYXVsdE1hbmFnZW1lbnQoKSB7XG4gICAgdGhpcy52YXVsdENsaWVudCA9IG51bGwgYXMgYW55O1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IG1hbmFnZW1lbnQgZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cblxuICByZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKCkge1xuICAgIGNvbnN0IGNvbW1hbmRzID0gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcbiAgICBjb21tYW5kcy5mb3JFYWNoKGNvbW1hbmQgPT4ge1xuICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgLi4uY29tbWFuZCxcbiAgICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2s/LmJpbmQodGhpcyksXG4gICAgICAgIGVkaXRvckNhbGxiYWNrOiBjb21tYW5kLmVkaXRvckNhbGxiYWNrPy5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1vZGFsIG9wZW5pbmcgbWV0aG9kcyBmb3IgdmF1bHQgbWFuYWdlbWVudFxuICBvcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCgpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBuZXcgVmF1bHRTdHJ1Y3R1cmVNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlblNtYXJ0U2VhcmNoTW9kYWwocXVlcnk/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBTbWFydFNlYXJjaE1vZGFsKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBpZiAocXVlcnkpIG1vZGFsLnNldEluaXRpYWxRdWVyeShxdWVyeSwgdHlwZSBhcyBhbnkpO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIG9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKHBhdGg/OiBzdHJpbmcsIG9wZXJhdGlvbj86IHN0cmluZykge1xuICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgYXZhaWxhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVPcGVyYXRpb25zTW9kYWwodGhpcy5hcHAsIHRoaXMpO1xuICAgIGlmIChwYXRoKSBtb2RhbC5zZXRJbml0aWFsUGF0aChwYXRoKTtcbiAgICBpZiAob3BlcmF0aW9uKSBtb2RhbC5zZXRPcGVyYXRpb24ob3BlcmF0aW9uKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICBvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCgpIHtcbiAgICBuZXcgTm90aWNlKCdWYXVsdCBvcmdhbml6ZXIgbW9kYWwgbm90IHlldCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgb3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsKCkge1xuICAgIG5ldyBOb3RpY2UoJ0JhdGNoIG9wZXJhdGlvbnMgbW9kYWwgbm90IHlldCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgLy8gPT09IEVORCBWQVVMVCBNQU5BR0VNRU5UIE1FVEhPRFMgPT09XG5cbiAgLy8gPT09IFBIQVNFIDMgSU5URUdSQVRJT04gPT09XG5cbiAgaW5pdGlhbGl6ZVBoYXNlMygpIHtcbiAgICAvLyBGb3Igbm93LCBhbHdheXMgaW5pdGlhbGl6ZSBQaGFzZSAzIGZlYXR1cmVzXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucGhhc2UzSW50ZWdyYXRpb24gPSBuZXcgUGhhc2UzSW50ZWdyYXRpb24odGhpcywge1xuICAgICAgICBhdXRvU2hvd09uYm9hcmRpbmc6ICF0aGlzLnNldHRpbmdzLm9uYm9hcmRpbmdDb21wbGV0ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIExvYWQgdGhlIFBoYXNlIDMgaW50ZWdyYXRpb25cbiAgICAgIHRoaXMucGhhc2UzSW50ZWdyYXRpb24ub25sb2FkKCk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnUGhhc2UgMyBmZWF0dXJlcyBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2hvdyBvbmJvYXJkaW5nIGZvciBmaXJzdC10aW1lIHVzZXJzXG4gICAgICBpZiAoIXRoaXMuc2V0dGluZ3Mub25ib2FyZGluZ0NvbXBsZXRlKSB7XG4gICAgICAgIC8vIERlbGF5IG9uYm9hcmRpbmcgc2xpZ2h0bHkgdG8gbGV0IHBsdWdpbiBmdWxseSBsb2FkXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucGhhc2UzSW50ZWdyYXRpb24/LnNob3dPbmJvYXJkaW5nSWZOZWVkZWQoKTtcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIFBoYXNlIDMgZmVhdHVyZXM6JywgZXJyb3IpO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1BoYXNlIDMgZmVhdHVyZXMgZmFpbGVkIHRvIGluaXRpYWxpemUgLSBjaGVjayBjb25zb2xlIGZvciBkZXRhaWxzJywgNTAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGlzYWJsZVBoYXNlMygpIHtcbiAgICBpZiAodGhpcy5waGFzZTNJbnRlZ3JhdGlvbikge1xuICAgICAgdGhpcy5waGFzZTNJbnRlZ3JhdGlvbi5vbnVubG9hZCgpO1xuICAgICAgdGhpcy5waGFzZTNJbnRlZ3JhdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZygnUGhhc2UgMyBmZWF0dXJlcyBkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PSBFTkQgUEhBU0UgMyBJTlRFR1JBVElPTiA9PT1cblxuICAvLyA9PT0gRU5IQU5DRU1FTlQgTUFOQUdFUiBJTlRFR1JBVElPTiA9PT1cblxuICBpbml0aWFsaXplRW5oYW5jZW1lbnRNYW5hZ2VyKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBJbml0aWFsaXplIEVuaGFuY2VtZW50IE1hbmFnZXJcbiAgICAgIHRoaXMuZW5oYW5jZW1lbnRNYW5hZ2VyID0gbmV3IFZhdWx0UGlsb3RFbmhhbmNlbWVudE1hbmFnZXIodGhpcyk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIGVuaGFuY2VtZW50IG1hbmFnZXJcbiAgICAgIHRoaXMuZW5oYW5jZW1lbnRNYW5hZ2VyLmluaXRpYWxpemUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3QgRW5oYW5jZW1lbnQgTWFuYWdlciBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBFbmhhbmNlbWVudCBNYW5hZ2VyOicsIGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBJbml0aWFsaXplIEtleWJvYXJkIFNob3J0Y3V0IEhhbmRsZXJcbiAgICAgIHRoaXMua2V5Ym9hcmRIYW5kbGVyID0gbmV3IEtleWJvYXJkU2hvcnRjdXRIYW5kbGVyKHRoaXMpO1xuICAgICAgXG4gICAgICAvLyBSZWdpc3RlciBnbG9iYWwga2V5Ym9hcmQgZXZlbnQgbGlzdGVuZXJcbiAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMua2V5Ym9hcmRIYW5kbGVyPy5oYW5kbGVLZXlEb3duKGV2ZW50KSkge1xuICAgICAgICAgIC8vIEV2ZW50IHdhcyBoYW5kbGVkIGJ5IGtleWJvYXJkIHNob3J0Y3V0c1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlZ2lzdGVyIGVuaGFuY2VkIGNvbW1hbmRzXG4gICAgICBjb25zdCBlbmhhbmNlZENvbW1hbmRzID0gRW5oYW5jZWRDb21tYW5kc0ZhY3RvcnkuY3JlYXRlRW5oYW5jZWRDb21tYW5kcyh0aGlzKTtcbiAgICAgIGVuaGFuY2VkQ29tbWFuZHMuZm9yRWFjaChjb21tYW5kID0+IHtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICBpZDogY29tbWFuZC5pZCxcbiAgICAgICAgICBuYW1lOiBjb21tYW5kLm5hbWUsXG4gICAgICAgICAgY2FsbGJhY2s6IGNvbW1hbmQuY2FsbGJhY2ssXG4gICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2ssXG4gICAgICAgICAgY2hlY2tDYWxsYmFjazogY29tbWFuZC5jaGVja0NhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnS2V5Ym9hcmQgc2hvcnRjdXRzIGFuZCBlbmhhbmNlZCBjb21tYW5kcyBpbml0aWFsaXplZCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBFbmhhbmNlbWVudCBNYW5hZ2VyOicsIGVycm9yKTtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBuZXcgTm90aWNlKCdFbmhhbmNlbWVudCBmZWF0dXJlcyBmYWlsZWQgdG8gaW5pdGlhbGl6ZSAtIGNoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMnLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkaXNhYmxlRW5oYW5jZW1lbnRNYW5hZ2VyKCkge1xuICAgIGlmICh0aGlzLmVuaGFuY2VtZW50TWFuYWdlcikge1xuICAgICAgdGhpcy5lbmhhbmNlbWVudE1hbmFnZXIudW5sb2FkKCk7XG4gICAgICB0aGlzLmVuaGFuY2VtZW50TWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMua2V5Ym9hcmRIYW5kbGVyKSB7XG4gICAgICB0aGlzLmtleWJvYXJkSGFuZGxlciA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFbmhhbmNlbWVudCBNYW5hZ2VyIGRpc2FibGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09IEVORCBFTkhBTkNFTUVOVCBNQU5BR0VSIElOVEVHUkFUSU9OID09PVxuXG4gIC8vIEF1dG8tY29tcGxldGlvbiBoYW5kbGluZ1xuICBwcml2YXRlIGhhbmRsZUtleVVwKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSB8fCAhdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20tY29udGVudCcpKSByZXR1cm47XG5cbiAgICAvLyBPbmx5IHRyaWdnZXIgb24gc3BlY2lmaWMga2V5cyBhbmQgY29uZGl0aW9uc1xuICAgIGlmICghdGhpcy5zaG91bGRUcmlnZ2VyQXV0b0NvbXBsZXRlKGV2ZW50KSkgcmV0dXJuO1xuXG4gICAgLy8gRGVib3VuY2UgYXV0by1jb21wbGV0aW9uIHJlcXVlc3RzIHdpdGggbG9uZ2VyIGRlbGF5XG4gICAgY2xlYXJUaW1lb3V0KCh0aGlzIGFzIGFueSkuYXV0b0NvbXBsZXRlVGltZW91dCk7XG4gICAgKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRyaWdnZXJBdXRvQ29tcGxldGlvbigpO1xuICAgIH0sIDMwMDApOyAvLyBJbmNyZWFzZWQgdG8gMyBzZWNvbmRzXG4gIH1cblxuICBwcml2YXRlIHNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICAvLyBEb24ndCB0cmlnZ2VyIG9uIG5hdmlnYXRpb24gb3IgbW9kaWZpZXIga2V5c1xuICAgIGNvbnN0IG5vblRyaWdnZXJLZXlzID0gWydBcnJvd1VwJywgJ0Fycm93RG93bicsICdBcnJvd0xlZnQnLCAnQXJyb3dSaWdodCcsICdUYWInLCAnU2hpZnQnLCAnQ29udHJvbCcsICdBbHQnLCAnTWV0YScsICdFc2NhcGUnXTtcbiAgICBpZiAobm9uVHJpZ2dlcktleXMuaW5kZXhPZihldmVudC5rZXkpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIFxuICAgIC8vIE9ubHkgdHJpZ2dlciBhdCB0aGUgZW5kIG9mIGEgbGluZVxuICAgIGlmIChjdXJzb3IuY2ggIT09IGN1cnJlbnRMaW5lLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBzZW50ZW5jZS1lbmRpbmcgdHJpZ2dlcnNcbiAgICBjb25zdCB0cmlnZ2VyQ2hhcnMgPSBbJy4nLCAnIScsICc/JywgJzonLCAnXFxuJ107XG4gICAgY29uc3QgbGFzdENoYXIgPSBjdXJyZW50TGluZS5zbGljZSgtMSk7XG4gICAgXG4gICAgLy8gVHJpZ2dlciBhZnRlciBzZW50ZW5jZSBlbmRpbmdzIHdpdGggc3BhY2VcbiAgICBpZiAodHJpZ2dlckNoYXJzLmluZGV4T2YobGFzdENoYXIpICE9PSAtMSAmJiBldmVudC5rZXkgPT09ICcgJykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyaWdnZXIgYWZ0ZXIgRW50ZXIga2V5IChuZXcgbGluZSlcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmIGN1cnJlbnRMaW5lLnRyaW0oKS5sZW5ndGggPiAxMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdHJpZ2dlckF1dG9Db21wbGV0aW9uKCkge1xuICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xuXG4gICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgXG4gICAgLy8gTW9yZSByZXN0cmljdGl2ZSBjb25kaXRpb25zIGZvciBhdXRvLWNvbXBsZXRpb25cbiAgICBpZiAoY3VycmVudExpbmUudHJpbSgpLmxlbmd0aCA8IDEwIHx8IGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm47XG4gICAgXG4gICAgLy8gUHJldmVudCA0MjIgZXJyb3JzIGZyb20gZW1wdHkgdGV4dFxuICAgIGlmICghZnVsbFRleHQgfHwgZnVsbFRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQWRkIGNvb2xkb3duIHRvIHByZXZlbnQgdG9vIGZyZXF1ZW50IHJlcXVlc3RzXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBsYXN0UmVxdWVzdCA9ICh0aGlzIGFzIGFueSkubGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QgfHwgMDtcbiAgICBpZiAobm93IC0gbGFzdFJlcXVlc3QgPCAxMDAwMCkgcmV0dXJuOyAvLyAxMCBzZWNvbmQgY29vbGRvd25cbiAgICBcbiAgICAodGhpcyBhcyBhbnkpLmxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0ID0gbm93O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBmdWxsVGV4dCxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2hvdyBzdWdnZXN0aW9ucyAoZm9yIG5vdyBqdXN0IHNob3cgZmlyc3Qgc3VnZ2VzdGlvbilcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgQXV0by1zdWdnZXN0aW9uOiAke3Jlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnNbMF19YCwgMzAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFpbCBmb3IgYXV0by1jb21wbGV0aW9uXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXV0by1jb21wbGV0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uKGRhdGE6IENvcGlsb3RSZXNwb25zZSkge1xuICAgIC8vIEhhbmRsZSByZWFsLXRpbWUgY29waWxvdCBzdWdnZXN0aW9ucyBmcm9tIFdlYlNvY2tldFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgbmV3IE5vdGljZShgTGl2ZSBzdWdnZXN0aW9uOiAke2RhdGEuY29tcGxldGlvbn1gLCAyMDAwKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXR0aW5ncyBtYW5hZ2VtZW50XG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBBUEkgY2xpZW50IGlmIFVSTCBjaGFuZ2VkXG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuICAgIFxuICAgIC8vIFJlaW5pdGlhbGl6ZSB2YXVsdCBtYW5hZ2VtZW50IGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy52YXVsdE1hbmFnZW1lbnQ/LmVuYWJsZVZhdWx0TWFuYWdlbWVudCkge1xuICAgICAgdGhpcy5pbml0aWFsaXplVmF1bHRNYW5hZ2VtZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZVZhdWx0TWFuYWdlbWVudCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSZWluaXRpYWxpemUgbW9kZWwgc2VsZWN0aW9uIGlmIHNldHRpbmdzIGNoYW5nZWRcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCkge1xuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplTW9kZWxTZWxlY3Rpb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0TW9kZWxTZWxlY3Rpb24oKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVjb25uZWN0IFdlYlNvY2tldCBpZiBzZXR0aW5ncyBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmICF0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vZGVsIFNlbGVjdGlvbiBNYW5hZ2VtZW50IE1ldGhvZHNcbiAgYXN5bmMgaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCkge1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBzZWxlY3Rpb24gZGlzYWJsZWQgaW4gc2V0dGluZ3MnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gVmFsaWRhdGUgZW52aXJvbm1lbnRcbiAgICAgIGNvbnN0IGVudiA9IEVudmlyb25tZW50RGV0ZWN0b3IuZGV0ZWN0KCk7XG4gICAgICBpZiAoIWVudi5oYXNIVFRQKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSFRUUCB0cmFuc3BvcnQgbm90IGF2YWlsYWJsZScpO1xuICAgICAgfVxuXG4gICAgICAvLyBJbml0aWFsaXplIHNlcnZpY2Ugd2l0aCBlcnJvciBib3VuZGFyeVxuICAgICAgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UgPSBuZXcgTW9kZWxTZWxlY3Rpb25TZXJ2aWNlKFxuICAgICAgICB0aGlzLnNldHRpbmdzLmJhY2tlbmRVcmwsXG4gICAgICAgIHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZGV2cGlwZVBhdGgsXG4gICAgICAgIHtcbiAgICAgICAgICBtb25pdG9yaW5nX2ludGVydmFsOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLm1vbml0b3JpbmdJbnRlcnZhbCxcbiAgICAgICAgICBmYWxsYmFja19lbmFibGVkOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLmZhbGxiYWNrRW5hYmxlZCxcbiAgICAgICAgICBjYWNoZV9kdXJhdGlvbjogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5jYWNoZUR1cmF0aW9uLFxuICAgICAgICAgIHJldHJ5X2F0dGVtcHRzOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnJldHJ5QXR0ZW1wdHMsXG4gICAgICAgICAgdGltZW91dDogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi50aW1lb3V0LFxuICAgICAgICAgIGRlYnVnX21vZGU6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24uZGVidWdNb2RlXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLnVwZGF0ZVByZWZlcmVuY2VzKHtcbiAgICAgICAgcHJpb3JpdHk6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udXNlclByZWZlcmVuY2VzLnByaW9yaXR5LFxuICAgICAgICBtYXhfY29zdF9wZXJfcmVxdWVzdDogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi51c2VyUHJlZmVyZW5jZXMubWF4Q29zdFBlclJlcXVlc3QsXG4gICAgICAgIHByZWZlcnJlZF9wcm92aWRlcnM6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udXNlclByZWZlcmVuY2VzLnByZWZlcnJlZFByb3ZpZGVycyxcbiAgICAgICAgZmFsbGJhY2tfZW5hYmxlZDogdGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbi5mYWxsYmFja0VuYWJsZWQsXG4gICAgICAgIHF1YWxpdHlfdGhyZXNob2xkOiB0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uLnVzZXJQcmVmZXJlbmNlcy5xdWFsaXR5VGhyZXNob2xkLFxuICAgICAgICB0aW1lb3V0X3ByZWZlcmVuY2U6IHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24udGltZW91dFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLmluaXRpYWxpemUoKTtcblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbFNlbGVjdGlvblNlcnZpY2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UoJ/CfpJYgU21hcnQgbW9kZWwgc2VsZWN0aW9uIGVuYWJsZWQnLCAzMDAwKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNb2RlbFNlbGVjdGlvblNlcnZpY2U6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBTaG93IHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZVxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBhY2Nlc3NpYmxlJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykpIHtcbiAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBNb2RlbCBzZWxlY3Rpb24gc2VydmljZSB1bmF2YWlsYWJsZSAtIHVzaW5nIGZhbGxiYWNrIG1vZGUnLCA0MDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRG9uJ3Qgc2hvdyBlcnJvciB0byB1c2VyIGluIHByb2R1Y3Rpb24gLSBqdXN0IGxvZyBpdFxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3RyYW5zcG9ydCBub3QgYXZhaWxhYmxlJykpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gTW9kZWwgc2VsZWN0aW9uIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcsIDUwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgn4pqg77iPIE1vZGVsIHNlbGVjdGlvbiBpbml0aWFsaXphdGlvbiBmYWlsZWQnLCAzMDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIHJldHJ5IG1lY2hhbmlzbVxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24ucmV0cnlBdHRlbXB0cyA+IDApIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZXRyeU1vZGVsU2VsZWN0aW9uSW5pdCgxKTtcbiAgICAgICAgfSwgMTAwMDApOyAvLyBSZXRyeSBhZnRlciAxMCBzZWNvbmRzXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyeU1vZGVsU2VsZWN0aW9uSW5pdChhdHRlbXB0OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoYXR0ZW1wdCA+ICh0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5yZXRyeUF0dGVtcHRzIHx8IDMpKSB7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIHNlbGVjdGlvbiBpbml0aWFsaXphdGlvbiByZXRyeSBsaW1pdCByZWFjaGVkJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhgUmV0cnlpbmcgbW9kZWwgc2VsZWN0aW9uIGluaXRpYWxpemF0aW9uIChhdHRlbXB0ICR7YXR0ZW1wdH0pYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEV4cG9uZW50aWFsIGJhY2tvZmYgZm9yIHJldHJpZXNcbiAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oMzAwMDAsIDUwMDAgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSkpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucmV0cnlNb2RlbFNlbGVjdGlvbkluaXQoYXR0ZW1wdCArIDEpO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2VydmljZVN0YXR1cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdDaGVja2luZyBWYXVsdFBpbG90IHNlcnZpY2Ugc3RhdHVzLi4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGxldCBzdGF0dXNUZXh0ID0gJ/CflI0gVmF1bHRQaWxvdCBTZXJ2aWNlIFN0YXR1czpcXG5cXG4nO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBtYWluIGJhY2tlbmQgY29ubmVjdGlvblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgIHN0YXR1c1RleHQgKz0gJ+KchSBNYWluIEJhY2tlbmQ6IENvbm5lY3RlZFxcbic7XG4gICAgICAgICAgc3RhdHVzVGV4dCArPSBgICAgU2VydmVyOiAke3RoaXMuc2V0dGluZ3MuYmFja2VuZFVybH1cXG5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXR1c1RleHQgKz0gJ+KdjCBNYWluIEJhY2tlbmQ6IEZhaWxlZFxcbic7XG4gICAgICAgICAgc3RhdHVzVGV4dCArPSBgICAgRXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9XFxuYDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgc3RhdHVzVGV4dCArPSAn4p2MIE1haW4gQmFja2VuZDogQ29ubmVjdGlvbiBFcnJvclxcbic7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIFdlYlNvY2tldCBjb25uZWN0aW9uXG4gICAgICBpZiAodGhpcy5pc1dlYlNvY2tldENvbm5lY3RlZCgpKSB7XG4gICAgICAgIHN0YXR1c1RleHQgKz0gJ+KchSBXZWJTb2NrZXQ6IENvbm5lY3RlZFxcbic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0dXNUZXh0ICs9ICfinYwgV2ViU29ja2V0OiBEaXNjb25uZWN0ZWRcXG4nO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBtb2RlbCBzZWxlY3Rpb24gc2VydmljZVxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kZWxTZWxlY3Rpb24/LmVuYWJsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlICYmIHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICBzdGF0dXNUZXh0ICs9ICfinIUgTW9kZWwgU2VsZWN0aW9uOiBDb25uZWN0ZWRcXG4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXR1c1RleHQgKz0gJ+KdjCBNb2RlbCBTZWxlY3Rpb246IE5vdCBBdmFpbGFibGVcXG4nO1xuICAgICAgICAgIGlmICghdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgICAgICAgIHN0YXR1c1RleHQgKz0gJyAgIFJlYXNvbjogU2VydmljZSBub3QgaW5pdGlhbGl6ZWRcXG4nO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0dXNUZXh0ICs9ICcgICBSZWFzb246IFNlcnZpY2UgZGlzY29ubmVjdGVkXFxuJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXR1c1RleHQgKz0gJ+KaoO+4jyBNb2RlbCBTZWxlY3Rpb246IERpc2FibGVkIGluIHNldHRpbmdzXFxuJztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgdmF1bHQgbWFuYWdlbWVudFxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudmF1bHRNYW5hZ2VtZW50Py5lbmFibGVWYXVsdE1hbmFnZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgICAgICBzdGF0dXNUZXh0ICs9ICfinIUgVmF1bHQgTWFuYWdlbWVudDogRW5hYmxlZFxcbic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdHVzVGV4dCArPSAn4p2MIFZhdWx0IE1hbmFnZW1lbnQ6IEZhaWxlZCB0byBpbml0aWFsaXplXFxuJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHVzVGV4dCArPSAn4pqg77iPIFZhdWx0IE1hbmFnZW1lbnQ6IERpc2FibGVkIGluIHNldHRpbmdzXFxuJztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2Uoc3RhdHVzVGV4dCwgMTUwMDApO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0UGlsb3QgU2VydmljZSBTdGF0dXM6Jywgc3RhdHVzVGV4dCk7XG4gICAgICB9XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBGYWlsZWQgdG8gY2hlY2sgc2VydmljZSBzdGF0dXM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV0cnlNb2RlbFNlbGVjdGlvbk1hbnVhbCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UgJiYgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgbmV3IE5vdGljZSgnTW9kZWwgc2VsZWN0aW9uIGFscmVhZHkgY29ubmVjdGVkJywgMzAwMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnUmV0cnlpbmcgbW9kZWwgc2VsZWN0aW9uIGluaXRpYWxpemF0aW9uLi4uJywgMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZU1vZGVsU2VsZWN0aW9uKCk7XG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgbmV3IE5vdGljZSgn4pyFIE1vZGVsIHNlbGVjdGlvbiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5JywgMzAwMCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGDinYwgTW9kZWwgc2VsZWN0aW9uIHJldHJ5IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLCA1MDAwKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0TW9kZWxTZWxlY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlID0gdW5kZWZpbmVkO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ01vZGVsU2VsZWN0aW9uU2VydmljZSBkaXNjb25uZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGlzY29ubmVjdGluZyBNb2RlbFNlbGVjdGlvblNlcnZpY2U6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHRlc3RNb2RlbFNlbGVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICBuZXcgTm90aWNlKCfinYwgTW9kZWwgc2VsZWN0aW9uIHNlcnZpY2Ugbm90IGluaXRpYWxpemVkJywgNTAwMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgn8J+kliBUZXN0aW5nIG1vZGVsIHNlbGVjdGlvbi4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRhc2tzID0gW1xuICAgICAgICB7IHR5cGU6ICd0ZXh0LWdlbmVyYXRpb24nLCBxdWFsaXR5OiAnbWVkaXVtJyBhcyBjb25zdCB9LFxuICAgICAgICB7IHR5cGU6ICdjb2RlLWdlbmVyYXRpb24nLCBxdWFsaXR5OiAnaGlnaCcgYXMgY29uc3QgfSxcbiAgICAgICAgeyB0eXBlOiAnY2hhdCcsIHF1YWxpdHk6ICdsb3cnIGFzIGNvbnN0IH0sXG4gICAgICAgIHsgdHlwZTogJ3N1bW1hcml6YXRpb24nLCBxdWFsaXR5OiAnbWVkaXVtJyBhcyBjb25zdCB9XG4gICAgICBdO1xuXG4gICAgICBsZXQgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXdhaXQgdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2Uuc2VsZWN0Rm9yVGFzayh0YXNrLnR5cGUsIHRhc2sucXVhbGl0eSk7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGDinIUgJHt0YXNrLnR5cGV9OiAke3NlbGVjdGlvbi5zZWxlY3RlZF9tb2RlbC5uYW1lfSAoJCR7c2VsZWN0aW9uLmVzdGltYXRlZF9jb3N0LnRvRml4ZWQoNCl9KWApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChg4p2MICR7dGFzay50eXBlfTogRmFpbGVkIC0gJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuICAgICAgY29uc3QgcmVzdWx0VGV4dCA9IHJlc3VsdHMuam9pbignXFxuJyk7XG4gICAgICBuZXcgTm90aWNlKGBNb2RlbCBTZWxlY3Rpb24gVGVzdCBSZXN1bHRzOlxcbiR7cmVzdWx0VGV4dH1gLCAxMDAwMCk7XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgc2VsZWN0aW9uIHRlc3QgcmVzdWx0czonLCByZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBNb2RlbCBzZWxlY3Rpb24gdGVzdCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2hvd01vZGVsSGVhbHRoKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ+KdjCBNb2RlbCBzZWxlY3Rpb24gc2VydmljZSBub3QgaW5pdGlhbGl6ZWQnLCA1MDAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCfwn4+lIENoZWNraW5nIG1vZGVsIGhlYWx0aC4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IHRoaXMubW9kZWxTZWxlY3Rpb25TZXJ2aWNlLmdldE1vZGVsSGVhbHRoKCk7XG4gICAgICBcbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChoZWFsdGgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ+KaoO+4jyBObyBtb2RlbCBoZWFsdGggaW5mb3JtYXRpb24gYXZhaWxhYmxlJywgNTAwMCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaGVhbHRoSW5mbyA9IGhlYWx0aC5tYXAoaCA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGguc3RhdHVzID09PSAnaGVhbHRoeScgPyAn4pyFJyA6IGguc3RhdHVzID09PSAnZGVncmFkZWQnID8gJ+KaoO+4jycgOiAn4p2MJztcbiAgICAgICAgcmV0dXJuIGAke3N0YXR1c30gJHtoLm1vZGVsX2lkfTogJHtoLnN0YXR1c30gKCR7aC5yZXNwb25zZV90aW1lfW1zLCAke2guYXZhaWxhYmlsaXR5X3BlcmNlbnRhZ2V9JSlgO1xuICAgICAgfSkuam9pbignXFxuJyk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYE1vZGVsIEhlYWx0aCBTdGF0dXM6XFxuJHtoZWFsdGhJbmZvfWAsIDE1MDAwKTtcblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBoZWFsdGggc3RhdHVzOicsIGhlYWx0aCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGDinYwgRmFpbGVkIHRvIGdldCBtb2RlbCBoZWFsdGg6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCwgNTAwMCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QmVzdE1vZGVsRm9yVGFzayh0YXNrVHlwZTogc3RyaW5nLCBxdWFsaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnID0gJ21lZGl1bScpIHtcbiAgICAvLyBDaGVjayBpZiBtb2RlbCBzZWxlY3Rpb24gc2VydmljZSBpcyBhdmFpbGFibGUgYW5kIGNvbm5lY3RlZFxuICAgIGlmICh0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSAmJiB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBhd2FpdCB0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZS5zZWxlY3RGb3JUYXNrKHRhc2tUeXBlLCBxdWFsaXR5KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTZWxlY3RlZCBtb2RlbCAke3NlbGVjdGlvbi5zZWxlY3RlZF9tb2RlbC5uYW1lfSBmb3IgJHt0YXNrVHlwZX0gdGFza2ApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdNb2RlbCBzZWxlY3Rpb24gZmFpbGVkLCB1c2luZyBkZWZhdWx0OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgZW5hYmxlZCwgdHJ5IHRvIHJlaW5pdGlhbGl6ZSB0aGUgc2VydmljZVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2RlbFNlbGVjdGlvbj8uZW5hYmxlZCAmJiAhdGhpcy5tb2RlbFNlbGVjdGlvblNlcnZpY2UuaXNDb25uZWN0ZWQoKSkge1xuICAgICAgICAgIHRoaXMucmV0cnlNb2RlbFNlbGVjdGlvbkluaXQoMSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2lsZW50bHkgZmFpbCByZXRyeVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLm1vZGVsU2VsZWN0aW9uPy5lbmFibGVkICYmICF0aGlzLm1vZGVsU2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgLy8gU2VydmljZSBub3QgaW5pdGlhbGl6ZWQsIHRyeSB0byBpbml0aWFsaXplIGl0XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZGVsIHNlbGVjdGlvbiBzZXJ2aWNlIG5vdCBpbml0aWFsaXplZCwgYXR0ZW1wdGluZyBpbml0aWFsaXphdGlvbi4uLicpO1xuICAgICAgfVxuICAgICAgdGhpcy5pbml0aWFsaXplTW9kZWxTZWxlY3Rpb24oKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIFNpbGVudGx5IGZhaWwgaW5pdGlhbGl6YXRpb25cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vID09PSBFTkhBTkNFRCBVSSBTVFlMRVMgPT09XG5cbiAgcHJpdmF0ZSBsb2FkRW5oYW5jZWRVSVN0eWxlcygpIHtcbiAgICAvLyBMb2FkIGVuaGFuY2VkIFVJIHN0eWxlcyBmb3IgcHJvZ3Jlc3MgaW5kaWNhdG9ycyBhbmQga2V5Ym9hcmQgc2hvcnRjdXRzXG4gICAgY29uc3Qgc3R5bGVJZCA9ICd2YXVsdHBpbG90LWVuaGFuY2VkLXVpLXN0eWxlcyc7XG4gICAgXG4gICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHN0eWxlcyBpZiB0aGV5IGV4aXN0XG4gICAgY29uc3QgZXhpc3RpbmdTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpO1xuICAgIGlmIChleGlzdGluZ1N0eWxlKSB7XG4gICAgICBleGlzdGluZ1N0eWxlLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgc3R5bGUgZWxlbWVudFxuICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZS5pZCA9IHN0eWxlSWQ7XG4gICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAvKiBWYXVsdFBpbG90IEVuaGFuY2VkIFVJIFN0eWxlcyAqL1xuICAgICAgQGltcG9ydCB1cmwoXCJhcHA6Ly9vYnNpZGlhbi5tZC92YXVsdC1tYW5hZ2VtZW50L2VuaGFuY2VkLXVpLXN0eWxlcy5jc3NcIik7XG4gICAgICBcbiAgICAgIC8qIEZhbGxiYWNrIHN0eWxlcyBpbiBjYXNlIGltcG9ydCBmYWlscyAqL1xuICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICB0b3A6IDIwcHg7XG4gICAgICAgIHJpZ2h0OiAyMHB4O1xuICAgICAgICB6LWluZGV4OiAxMDAwMDtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIG1heC13aWR0aDogNDAwcHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWludGVyZmFjZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC52YXVsdHBpbG90LXByb2dyZXNzLWl0ZW0ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgcGFkZGluZzogMTJweCAxNnB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICAgICAgbWluLXdpZHRoOiAzMDBweDtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgIGFuaW1hdGlvbjogc2xpZGVJblJpZ2h0IDAuM3MgZWFzZS1vdXQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIEBrZXlmcmFtZXMgc2xpZGVJblJpZ2h0IHtcbiAgICAgICAgZnJvbSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMDAlKTsgb3BhY2l0eTogMDsgfVxuICAgICAgICB0byB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTsgb3BhY2l0eTogMTsgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlT3V0UmlnaHQge1xuICAgICAgICBmcm9tIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOyBvcGFjaXR5OiAxOyB9XG4gICAgICAgIHRvIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEwMCUpOyBvcGFjaXR5OiAwOyB9XG4gICAgICB9XG4gICAgYDtcbiAgICBcbiAgICAvLyBBZGQgdG8gZG9jdW1lbnQgaGVhZFxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgY29uc29sZS5sb2coJ0VuaGFuY2VkIFVJIHN0eWxlcyBsb2FkZWQnKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29tbWFuZCBEZWZpbml0aW9ucyBmb3IgVmF1bHRQaWxvdCBWYXVsdCBNYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgQ29tbWFuZCwgTm90aWNlLCBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIERlZmluZSBhIHR5cGUgZm9yIHBsdWdpbiBpbnN0YW5jZSB3aXRoIHZhdWx0IG1hbmFnZW1lbnQgbWV0aG9kc1xuaW50ZXJmYWNlIFZhdWx0TWFuYWdlbWVudFBsdWdpbiB7XG4gIGFwcDogYW55O1xuICB2YXVsdENsaWVudD86IGFueTtcbiAgb3BlblZhdWx0U3RydWN0dXJlTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuU21hcnRTZWFyY2hNb2RhbD86IChxdWVyeT86IHN0cmluZywgdHlwZT86IHN0cmluZykgPT4gdm9pZDtcbiAgb3BlbkZpbGVPcGVyYXRpb25zTW9kYWw/OiAoKSA9PiB2b2lkO1xuICBvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbD86ICgpID0+IHZvaWQ7XG4gIG9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbD86ICgpID0+IHZvaWQ7XG59XG5cbi8qKlxuICogVmF1bHQgTWFuYWdlbWVudCBDb21tYW5kc1xuICogVGhlc2Ugd2lsbCBiZSByZWdpc3RlcmVkIGluIHRoZSBtYWluIHBsdWdpbiBmaWxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVWYXVsdE1hbmFnZW1lbnRDb21tYW5kcygpOiBDb21tYW5kW10ge1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnLFxuICAgICAgbmFtZTogJ1ZpZXcgVmF1bHQgU3RydWN0dXJlJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgdmF1bHQgc3RydWN0dXJlIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuVmF1bHRTdHJ1Y3R1cmVNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IHN0cnVjdHVyZSBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCcsXG4gICAgICBuYW1lOiAnU21hcnQgVmF1bHQgU2VhcmNoJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ09wZW5pbmcgc21hcnQgc2VhcmNoIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1NtYXJ0IHNlYXJjaCBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucycsXG4gICAgICBuYW1lOiAnRmlsZSBPcGVyYXRpb25zIE1hbmFnZXInLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyBmaWxlIG9wZXJhdGlvbnMgbW9kYWwnKTtcbiAgICAgICAgaWYgKHRoaXMub3BlbkZpbGVPcGVyYXRpb25zTW9kYWwpIHtcbiAgICAgICAgICB0aGlzLm9wZW5GaWxlT3BlcmF0aW9uc01vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnRmlsZSBvcGVyYXRpb25zIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtb3JnYW5pemUtdmF1bHQnLFxuICAgICAgbmFtZTogJ0FJIFZhdWx0IE9yZ2FuaXphdGlvbicsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHZhdWx0IG9yZ2FuaXplciBtb2RhbCcpO1xuICAgICAgICBpZiAodGhpcy5vcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblZhdWx0T3JnYW5pemVyTW9kYWwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBvcmdhbml6ZXIgZmVhdHVyZSBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1iYXRjaC1vcGVyYXRpb25zJyxcbiAgICAgIG5hbWU6ICdCYXRjaCBGaWxlIE9wZXJhdGlvbnMnLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyBiYXRjaCBvcGVyYXRpb25zIG1vZGFsJyk7XG4gICAgICAgIGlmICh0aGlzLm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlbkJhdGNoT3BlcmF0aW9uc01vZGFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnQmF0Y2ggb3BlcmF0aW9ucyBmZWF0dXJlIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICd2YXVsdHBpbG90LXF1aWNrLXNlYXJjaC1zZWxlY3Rpb24nLFxuICAgICAgbmFtZTogJ1F1aWNrIFNlYXJjaCBTZWxlY3RlZCBUZXh0JyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlbGVjdGlvbi50cmltKCkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUXVpY2sgc2VhcmNoIGZvcjonLCBzZWxlY3Rpb24udHJpbSgpKTtcbiAgICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgICAgdGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbChzZWxlY3Rpb24udHJpbSgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnU21hcnQgc2VhcmNoIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IHRleHQgdG8gc2VhcmNoIGZvcicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJyxcbiAgICAgIG5hbWU6ICdWYXVsdCBIZWFsdGggQ2hlY2snLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jIGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghdGhpcy52YXVsdENsaWVudCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnVmF1bHQgbWFuYWdlbWVudCBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZSgnUnVubmluZyB2YXVsdCBoZWFsdGggY2hlY2suLi4nKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUZXN0IGJhc2ljIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVGVzdCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgICAgICBpZiAoIWNvbm5lY3Rpb25UZXN0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEhlYWx0aCBjaGVjayBmYWlsZWQ6ICR7Y29ubmVjdGlvblRlc3QubWVzc2FnZX1gLCA1MDAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IGJhc2ljIHN0cnVjdHVyZSB0byB0ZXN0IGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHsgXG4gICAgICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlLCBcbiAgICAgICAgICAgIG1heF9kZXB0aDogMSBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUZXN0IHNlYXJjaCBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY29uc3Qgc2VhcmNoVGVzdCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuc2VhcmNoVmF1bHQoeyBcbiAgICAgICAgICAgIHF1ZXJ5OiAndGVzdCcsIFxuICAgICAgICAgICAgbWF4X3Jlc3VsdHM6IDEgXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg4pyFIFZhdWx0IEhlYWx0aCBDaGVjayBQYXNzZWRcbvCfk4EgJHtzdHJ1Y3R1cmUudG90YWxfZmlsZXN9IGZpbGVzLCAke3N0cnVjdHVyZS50b3RhbF9mb2xkZXJzfSBmb2xkZXJzXG7wn5SNIFNlYXJjaDogJHtzZWFyY2hUZXN0LnJlc3VsdHMubGVuZ3RofSByZXN1bHRzXG7wn5K+IFNpemU6ICR7KHN0cnVjdHVyZS50b3RhbF9zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CYCwgODAwMCk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdCBoZWFsdGggY2hlY2sgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGDinYwgSGVhbHRoIGNoZWNrIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtdmF1bHQtYmFja3VwJyxcbiAgICAgIG5hbWU6ICdDcmVhdGUgVmF1bHQgQmFja3VwJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyBmdW5jdGlvbih0aGlzOiBWYXVsdE1hbmFnZW1lbnRQbHVnaW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoIXRoaXMudmF1bHRDbGllbnQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1ZhdWx0IG1hbmFnZW1lbnQgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoJ0NyZWF0aW5nIHZhdWx0IGJhY2t1cC4uLicpO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGJhY2t1cCA9IGF3YWl0IHRoaXMudmF1bHRDbGllbnQuYmFja3VwVmF1bHQoe1xuICAgICAgICAgICAgaW5jbHVkZV9zZXR0aW5nczogdHJ1ZSxcbiAgICAgICAgICAgIGNvbXByZXNzaW9uOiB0cnVlLFxuICAgICAgICAgICAgYmFja3VwX25hbWU6IGB2YXVsdHBpbG90LWJhY2t1cC0ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfWBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKGDinIUgQmFja3VwIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG7wn5OmICR7YmFja3VwLmZpbGVzX2JhY2tlZF91cH0gZmlsZXNcbvCfkr4gU2l6ZTogJHsoYmFja3VwLmJhY2t1cF9zaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CXG7wn5OBIExvY2F0aW9uOiAke2JhY2t1cC5iYWNrdXBfcGF0aH1gLCA4MDAwKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0JhY2t1cCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoYOKdjCBCYWNrdXAgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgNTAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndmF1bHRwaWxvdC1zZWFyY2gtY29udGVudCcsXG4gICAgICBuYW1lOiAnU2VhcmNoIENvbnRlbnQnLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IGZ1bmN0aW9uKHRoaXM6IFZhdWx0TWFuYWdlbWVudFBsdWdpbiwgZWRpdG9yOiBFZGl0b3IpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHNlbGVjdGlvbi50cmltKCkgfHwgJ0VudGVyIHNlYXJjaCBxdWVyeSc7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCkge1xuICAgICAgICAgIHRoaXMub3BlblNtYXJ0U2VhcmNoTW9kYWwocXVlcnksICdjb250ZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnU21hcnQgc2VhcmNoIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3Qtc2VhcmNoLWZpbGVuYW1lcycsXG4gICAgICBuYW1lOiAnU2VhcmNoIEZpbGVuYW1lcycsXG4gICAgICBjYWxsYmFjazogZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIGlmICh0aGlzLm9wZW5TbWFydFNlYXJjaE1vZGFsKSB7XG4gICAgICAgICAgdGhpcy5vcGVuU21hcnRTZWFyY2hNb2RhbCgnJywgJ2ZpbGVuYW1lJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnU21hcnQgc2VhcmNoIGZlYXR1cmUgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3ZhdWx0cGlsb3QtcmVjZW50LWZpbGVzJyxcbiAgICAgIG5hbWU6ICdWaWV3IFJlY2VudCBGaWxlcycsXG4gICAgICBjYWxsYmFjazogYXN5bmMgZnVuY3Rpb24odGhpczogVmF1bHRNYW5hZ2VtZW50UGx1Z2luKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLnZhdWx0Q2xpZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdWYXVsdCBtYW5hZ2VtZW50IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBzdHJ1Y3R1cmUgPSBhd2FpdCB0aGlzLnZhdWx0Q2xpZW50LmdldFZhdWx0U3RydWN0dXJlKHsgXG4gICAgICAgICAgICBpbmNsdWRlX2NvbnRlbnQ6IGZhbHNlIFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gcmVjZW50IGZpbGVzIGZvdW5kJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHJlY2VudExpc3QgPSBzdHJ1Y3R1cmUucmVjZW50X2ZpbGVzXG4gICAgICAgICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAgICAgICAubWFwKChmaWxlOiBhbnkpID0+IGDigKIgJHtmaWxlLm5hbWV9ICgke2ZpbGUubW9kaWZpZWR9KWApXG4gICAgICAgICAgICAuam9pbignXFxuJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShg8J+TnSBSZWNlbnQgRmlsZXM6XFxuJHtyZWNlbnRMaXN0fWAsIDEwMDAwKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgcmVjZW50IGZpbGVzOicsIGVycm9yKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGEgXCJOb3QgRm91bmRcIiBlcnJvciAtIHByb3ZpZGUgZmFsbGJhY2tcbiAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ05vdCBGb3VuZCcpIHx8IGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDQnKSkge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gbG9jYWwgcmVjZW50IGZpbGVzXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgICAgICAuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZSlcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIDEwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyByZWNlbnQgZmlsZXMgZm91bmQnKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZWNlbnRMaXN0ID0gZmlsZXNcbiAgICAgICAgICAgICAgLm1hcCgoZmlsZTogYW55KSA9PiBg4oCiICR7ZmlsZS5iYXNlbmFtZX0gKCR7bmV3IERhdGUoZmlsZS5zdGF0Lm10aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKX0pYClcbiAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgTm90aWNlKGDwn5OdIFJlY2VudCBGaWxlcyAoTG9jYWwpOlxcbiR7cmVjZW50TGlzdH1gLCAxMDAwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYOKdjCBGYWlsZWQgdG8gZ2V0IHJlY2VudCBmaWxlczogJHtlcnJvci5tZXNzYWdlfWAsIDUwMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgXTtcbn1cblxuLyoqXG4gKiBIb3RrZXkgZGVmaW5pdGlvbnMgZm9yIHZhdWx0IG1hbmFnZW1lbnQgY29tbWFuZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFZBVUxUX01BTkFHRU1FTlRfSE9US0VZUzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgJ3ZhdWx0cGlsb3QtdmF1bHQtc3RydWN0dXJlJzogJ0N0cmwrU2hpZnQrVicsXG4gICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCc6ICdDdHJsK1NoaWZ0K0YnLFxuICAndmF1bHRwaWxvdC1xdWljay1zZWFyY2gtc2VsZWN0aW9uJzogJ0N0cmwrU2hpZnQrUycsXG4gICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucyc6ICdDdHJsK1NoaWZ0K08nLFxuICAndmF1bHRwaWxvdC1vcmdhbml6ZS12YXVsdCc6ICdDdHJsK1NoaWZ0K0cnLFxuICAndmF1bHRwaWxvdC12YXVsdC1oZWFsdGgtY2hlY2snOiAnQ3RybCtTaGlmdCtIJ1xufTtcblxuLyoqXG4gKiBSaWJib24gaWNvbiBkZWZpbml0aW9ucyBmb3IgY29tbW9ubHkgdXNlZCBjb21tYW5kc1xuICovXG5leHBvcnQgY29uc3QgVkFVTFRfTUFOQUdFTUVOVF9SSUJCT05fSUNPTlMgPSBbXG4gIHtcbiAgICBpY29uOiAnZm9sZGVyLXRyZWUnLFxuICAgIHRpdGxlOiAnVmF1bHQgU3RydWN0dXJlJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXZhdWx0LXN0cnVjdHVyZSdcbiAgfSxcbiAge1xuICAgIGljb246ICdzZWFyY2gnLFxuICAgIHRpdGxlOiAnU21hcnQgU2VhcmNoJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCdcbiAgfSxcbiAge1xuICAgIGljb246ICdmb2xkZXItcGx1cycsXG4gICAgdGl0bGU6ICdGaWxlIE9wZXJhdGlvbnMnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtZmlsZS1vcGVyYXRpb25zJ1xuICB9XG5dO1xuXG4vKipcbiAqIENvbW1hbmQgbWVudSBpdGVtcyBmb3IgY29udGV4dCBtZW51c1xuICovXG5leHBvcnQgY29uc3QgVkFVTFRfTUFOQUdFTUVOVF9NRU5VX0lURU1TID0gW1xuICB7XG4gICAgdGl0bGU6ICdBbmFseXplIFN0cnVjdHVyZScsXG4gICAgY29tbWFuZElkOiAndmF1bHRwaWxvdC12YXVsdC1zdHJ1Y3R1cmUnLFxuICAgIHNlY3Rpb246ICd2YXVsdC1hbmFseXNpcydcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnU21hcnQgU2VhcmNoJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LXNtYXJ0LXNlYXJjaCcsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LXNlYXJjaCdcbiAgfSxcbiAge1xuICAgIHRpdGxlOiAnRmlsZSBPcGVyYXRpb25zJyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LWZpbGUtb3BlcmF0aW9ucycsXG4gICAgc2VjdGlvbjogJ3ZhdWx0LW9wZXJhdGlvbnMnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ09yZ2FuaXplIFZhdWx0JyxcbiAgICBjb21tYW5kSWQ6ICd2YXVsdHBpbG90LW9yZ2FuaXplLXZhdWx0JyxcbiAgICBzZWN0aW9uOiAndmF1bHQtb3JnYW5pemF0aW9uJ1xuICB9LFxuICB7XG4gICAgdGl0bGU6ICdIZWFsdGggQ2hlY2snLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtaGVhbHRoLWNoZWNrJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtbWFpbnRlbmFuY2UnXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogJ0NyZWF0ZSBCYWNrdXAnLFxuICAgIGNvbW1hbmRJZDogJ3ZhdWx0cGlsb3QtdmF1bHQtYmFja3VwJyxcbiAgICBzZWN0aW9uOiAndmF1bHQtbWFpbnRlbmFuY2UnXG4gIH1cbl07XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIGFsbCB2YXVsdCBtYW5hZ2VtZW50IGNvbW1hbmRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclZhdWx0TWFuYWdlbWVudENvbW1hbmRzKHBsdWdpbjogYW55KSB7XG4gIGNvbnN0IGNvbW1hbmRzID0gY3JlYXRlVmF1bHRNYW5hZ2VtZW50Q29tbWFuZHMoKTtcbiAgY29tbWFuZHMuZm9yRWFjaCgoY29tbWFuZDogQ29tbWFuZCkgPT4ge1xuICAgIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgIC4uLmNvbW1hbmQsXG4gICAgICBjYWxsYmFjazogY29tbWFuZC5jYWxsYmFjaz8uYmluZChwbHVnaW4pLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IGNvbW1hbmQuZWRpdG9yQ2FsbGJhY2s/LmJpbmQocGx1Z2luKVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIC8vIEFkZCBob3RrZXlzIGlmIGRlZmluZWRcbiAgT2JqZWN0LmVudHJpZXMoVkFVTFRfTUFOQUdFTUVOVF9IT1RLRVlTKS5mb3JFYWNoKChbY29tbWFuZElkLCBob3RrZXldKSA9PiB7XG4gICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5jb21tYW5kcz8uW2NvbW1hbmRJZF07XG4gICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgIGNvbW1hbmQuaG90a2V5cyA9IFt7IG1vZGlmaWVyczogW10sIGtleTogaG90a2V5IH1dO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCB2YXVsdCBtYW5hZ2VtZW50IHJpYmJvbiBpY29uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkVmF1bHRNYW5hZ2VtZW50UmliYm9uSWNvbnMocGx1Z2luOiBhbnkpIHtcbiAgVkFVTFRfTUFOQUdFTUVOVF9SSUJCT05fSUNPTlMuZm9yRWFjaCgoeyBpY29uLCB0aXRsZSwgY29tbWFuZElkIH0pID0+IHtcbiAgICBjb25zdCByaWJib25JY29uID0gcGx1Z2luLmFkZFJpYmJvbkljb24oaWNvbiwgdGl0bGUsICgpID0+IHtcbiAgICAgIHBsdWdpbi5hcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKGNvbW1hbmRJZCk7XG4gICAgfSk7XG4gICAgcmliYm9uSWNvbi5hZGRDbGFzcygndmF1bHRwaWxvdC12YXVsdC1tYW5hZ2VtZW50LXJpYmJvbicpO1xuICB9KTtcbn1cbiIsIi8qKlxuICogVmF1bHRQaWxvdCBFbmhhbmNlbWVudCBGZWF0dXJlcyBEZW1vXG4gKiBEZW1vbnN0cmF0ZXMgdGhlIG5ldyBrZXlib2FyZCBzaG9ydGN1dHMsIHByb2dyZXNzIGluZGljYXRvcnMsIGFuZCBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25cbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RFbmhhbmNlbWVudERlbW8gZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdWYXVsdFBpbG90IEVuaGFuY2VtZW50IEZlYXR1cmVzIERlbW8nIH0pO1xuXG4gICAgICAgIC8vIERlbW8gU2VjdGlvbiAxOiBLZXlib2FyZCBTaG9ydGN1dHNcbiAgICAgICAgdGhpcy5jcmVhdGVLZXlib2FyZFNob3J0Y3V0c0RlbW8oY29udGVudEVsKTtcblxuICAgICAgICAvLyBEZW1vIFNlY3Rpb24gMjogUHJvZ3Jlc3MgSW5kaWNhdG9yc1xuICAgICAgICB0aGlzLmNyZWF0ZVByb2dyZXNzSW5kaWNhdG9yRGVtbyhjb250ZW50RWwpO1xuXG4gICAgICAgIC8vIERlbW8gU2VjdGlvbiAzOiBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25cbiAgICAgICAgdGhpcy5jcmVhdGVQZXJmb3JtYW5jZURlbW8oY29udGVudEVsKTtcblxuICAgICAgICAvLyBEZW1vIFNlY3Rpb24gNDogV2ViU29ja2V0IEZlYXR1cmVzXG4gICAgICAgIHRoaXMuY3JlYXRlV2ViU29ja2V0RGVtbyhjb250ZW50RWwpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlS2V5Ym9hcmRTaG9ydGN1dHNEZW1vKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbmhhbmNlbWVudC1kZW1vLXNlY3Rpb24nIH0pO1xuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KMqO+4jyBLZXlib2FyZCBTaG9ydGN1dHMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBzZWN0aW9uLmNyZWF0ZUVsKCdwJyk7XG4gICAgICAgIGRlc2NyaXB0aW9uLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxzdHJvbmc+MjArIGtleWJvYXJkIHNob3J0Y3V0cyBhcmUgbm93IGF2YWlsYWJsZSE8L3N0cm9uZz48YnI+XG4gICAgICAgICAgICBUcnkgdGhlc2Ugc2hvcnRjdXRzOlxuICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIDxsaT48Y29kZT5DdHJsK1NoaWZ0K0VudGVyPC9jb2RlPiAtIE9wZW4gVmF1bHRQaWxvdCBDaGF0PC9saT5cbiAgICAgICAgICAgICAgICA8bGk+PGNvZGU+Q3RybCtTaGlmdCtTPC9jb2RlPiAtIFNtYXJ0IFNlYXJjaDwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPjxjb2RlPkN0cmwrU3BhY2U8L2NvZGU+IC0gQUkgQ29tcGxldGlvbjwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPjxjb2RlPkN0cmwrU2hpZnQrSDwvY29kZT4gLSBTaG93IEFsbCBTaG9ydGN1dHM8L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBidXR0b24gPSBzZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdTaG93IEFsbCBLZXlib2FyZCBTaG9ydGN1dHMnIH0pO1xuICAgICAgICBidXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5rZXlib2FyZEhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5rZXlib2FyZEhhbmRsZXIuZ2V0U2hvcnRjdXRzKCk7XG4gICAgICAgICAgICAgICAgLy8gTWFudWFsbHkgdHJpZ2dlciB0aGUgc2hvcnRjdXRzIGhlbHBcbiAgICAgICAgICAgICAgICBjb25zdCBzaG9ydGN1dHMgPSB0aGlzLnBsdWdpbi5rZXlib2FyZEhhbmRsZXIuZ2V0U2hvcnRjdXRzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVscE1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgICAgICAgICBoZWxwTW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9ICdWYXVsdFBpbG90IEtleWJvYXJkIFNob3J0Y3V0cyc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGhlbHBNb2RhbC5jb250ZW50RWw7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSAnNzB2aCc7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2hvcnRjdXRzLmZvckVhY2goc2hvcnRjdXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdzaG9ydGN1dC1pdGVtJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsgXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogNHB4IDA7IFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBpdGVtLmNyZWF0ZVNwYW4oeyBjbHM6ICdzaG9ydGN1dC1rZXlzJyB9KTtcbiAgICAgICAgICAgICAgICAgICAga2V5cy50ZXh0Q29udGVudCA9IGAke3Nob3J0Y3V0Lm1vZGlmaWVycy5qb2luKCcgKyAnKX0gKyAke3Nob3J0Y3V0LmtleS5yZXBsYWNlKCdLZXknLCAnJyl9YDtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsgXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTsgXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNnB4OyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc2MgPSBpdGVtLmNyZWF0ZVNwYW4oeyBjbHM6ICdzaG9ydGN1dC1kZXNjJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgZGVzYy50ZXh0Q29udGVudCA9IHNob3J0Y3V0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGhlbHBNb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQcm9ncmVzc0luZGljYXRvckRlbW8oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VuaGFuY2VtZW50LWRlbW8tc2VjdGlvbicgfSk7XG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn8J+TiiBQcm9ncmVzcyBJbmRpY2F0b3JzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1JlYWwtdGltZSBwcm9ncmVzcyBiYXJzIHdpdGggYW5pbWF0aW9ucywgRVRBIGNhbGN1bGF0aW9uLCBhbmQgV2ViU29ja2V0IHVwZGF0ZXMuJyBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uc0RpdiA9IHNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnZGVtby1idXR0b25zJyB9KTtcbiAgICAgICAgYnV0dG9uc0Rpdi5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgZmxleC13cmFwOiB3cmFwOyc7XG5cbiAgICAgICAgLy8gUXVpY2sgUHJvZ3Jlc3MgRGVtb1xuICAgICAgICBjb25zdCBxdWlja1Byb2dyZXNzQnRuID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUXVpY2sgUHJvZ3Jlc3MgKDNzKScgfSk7XG4gICAgICAgIHF1aWNrUHJvZ3Jlc3NCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVtb1F1aWNrUHJvZ3Jlc3MoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBMb25nIFByb2dyZXNzIERlbW9cbiAgICAgICAgY29uc3QgbG9uZ1Byb2dyZXNzQnRuID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTG9uZyBQcm9ncmVzcyAoMTBzKScgfSk7XG4gICAgICAgIGxvbmdQcm9ncmVzc0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kZW1vTG9uZ1Byb2dyZXNzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTXVsdGlwbGUgUHJvZ3Jlc3MgRGVtb1xuICAgICAgICBjb25zdCBtdWx0aVByb2dyZXNzQnRuID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTXVsdGlwbGUgUHJvZ3Jlc3MnIH0pO1xuICAgICAgICBtdWx0aVByb2dyZXNzQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRlbW9NdWx0aXBsZVByb2dyZXNzKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQZXJmb3JtYW5jZURlbW8oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VuaGFuY2VtZW50LWRlbW8tc2VjdGlvbicgfSk7XG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn4pqhIFBlcmZvcm1hbmNlIE9wdGltaXphdGlvbicgfSk7XG4gICAgICAgIFxuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdJbnRlbGxpZ2VudCBjYWNoaW5nLCByZXF1ZXN0IGRlZHVwbGljYXRpb24sIGFuZCBwZXJmb3JtYW5jZSBtZXRyaWNzLicgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNEaXYgPSBzZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2RlbW8tYnV0dG9ucycgfSk7XG4gICAgICAgIGJ1dHRvbnNEaXYuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGZsZXgtd3JhcDogd3JhcDsnO1xuXG4gICAgICAgIC8vIENhY2hlIERlbW9cbiAgICAgICAgY29uc3QgY2FjaGVCdG4gPSBidXR0b25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdUZXN0IENhY2hpbmcnIH0pO1xuICAgICAgICBjYWNoZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kZW1vQ2FjaGluZygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFBlcmZvcm1hbmNlIE1ldHJpY3NcbiAgICAgICAgY29uc3QgbWV0cmljc0J0biA9IGJ1dHRvbnNEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1Nob3cgTWV0cmljcycgfSk7XG4gICAgICAgIG1ldHJpY3NCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1BlcmZvcm1hbmNlTWV0cmljcygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENsZWFyIENhY2hlXG4gICAgICAgIGNvbnN0IGNsZWFyQnRuID0gYnV0dG9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2xlYXIgQ2FjaGUnIH0pO1xuICAgICAgICBjbGVhckJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlci5jbGVhckNhY2hlKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ2FjaGUgY2xlYXJlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVdlYlNvY2tldERlbW8oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VuaGFuY2VtZW50LWRlbW8tc2VjdGlvbicgfSk7XG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAn8J+UlyBXZWJTb2NrZXQgRmVhdHVyZXMnIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdHVzRGl2ID0gc2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgICAgY29uc3QgaXNDb25uZWN0ZWQgPSB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LmlzV2ViU29ja2V0Q29ubmVjdGVkKCkgfHwgZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBzdGF0dXNEaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHA+V2ViU29ja2V0IFN0YXR1czogXG4gICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJjb2xvcjogJHtpc0Nvbm5lY3RlZCA/ICd2YXIoLS1jb2xvci1ncmVlbiknIDogJ3ZhcigtLWNvbG9yLXJlZCknfTtcIj5cbiAgICAgICAgICAgICAgICAgICAgJHtpc0Nvbm5lY3RlZCA/ICfwn5+iIENvbm5lY3RlZCcgOiAn8J+UtCBEaXNjb25uZWN0ZWQnfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwPlJlYWwtdGltZSBmZWF0dXJlczogUHJvZ3Jlc3MgdXBkYXRlcywgUGVyZm9ybWFuY2UgbWV0cmljcywgRHluYW1pYyBzaG9ydGN1dHM8L3A+XG4gICAgICAgIGA7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gc2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnVGVzdCBXZWJTb2NrZXQgQ29ubmVjdGlvbicgfSk7XG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGVkID0gdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyPy5pc1dlYlNvY2tldENvbm5lY3RlZCgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgV2ViU29ja2V0IGlzICR7Y29ubmVjdGVkID8gJ2Nvbm5lY3RlZCcgOiAnZGlzY29ubmVjdGVkJ31gLCAzMDAwKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlbW9RdWlja1Byb2dyZXNzKCkge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRW5oYW5jZW1lbnQgTWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb2dyZXNzSWQgPSAnZGVtby1xdWljay0nICsgRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyLnNob3dQcm9ncmVzcyh7XG4gICAgICAgICAgICBpZDogcHJvZ3Jlc3NJZCxcbiAgICAgICAgICAgIHRpdGxlOiAnUXVpY2sgRGVtbyBUYXNrJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdQcm9jZXNzaW5nLi4uJyxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDAsXG4gICAgICAgICAgICBldGE6IDMsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBwcm9ncmVzcyA9IDA7XG4gICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgcHJvZ3Jlc3MgKz0gMzMuMzM7XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPj0gMTAwKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSAxMDA7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcj8ucHJvZ3Jlc3NJbmRpY2F0b3IuaGlkZVByb2dyZXNzKHByb2dyZXNzSWQpO1xuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcj8ucHJvZ3Jlc3NJbmRpY2F0b3IudXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NJZCwge1xuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHByb2dyZXNzLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHByb2dyZXNzIDwgMTAwID8gJ1Byb2Nlc3NpbmcuLi4nIDogJ0NvbXBsZXRlIScsXG4gICAgICAgICAgICAgICAgZXRhOiBwcm9ncmVzcyA8IDEwMCA/ICgxMDAgLSBwcm9ncmVzcykgLyAzMy4zMyA6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlbW9Mb25nUHJvZ3Jlc3MoKSB7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFbmhhbmNlbWVudCBNYW5hZ2VyIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NJZCA9ICdkZW1vLWxvbmctJyArIERhdGUubm93KCk7XG4gICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlci5zaG93UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgaWQ6IHByb2dyZXNzSWQsXG4gICAgICAgICAgICB0aXRsZTogJ0xvbmcgUnVubmluZyBUYXNrJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdBbmFseXppbmcgdmF1bHQgc3RydWN0dXJlLi4uJyxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IDAsXG4gICAgICAgICAgICBldGE6IDEwLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzdGFnZXMgPSBbXG4gICAgICAgICAgICB7IG1zZzogJ0FuYWx5emluZyB2YXVsdCBzdHJ1Y3R1cmUuLi4nLCBkdXJhdGlvbjogMjAwMCB9LFxuICAgICAgICAgICAgeyBtc2c6ICdQcm9jZXNzaW5nIGZpbGVzLi4uJywgZHVyYXRpb246IDMwMDAgfSxcbiAgICAgICAgICAgIHsgbXNnOiAnR2VuZXJhdGluZyBpbnNpZ2h0cy4uLicsIGR1cmF0aW9uOiAyMDAwIH0sXG4gICAgICAgICAgICB7IG1zZzogJ09wdGltaXppbmcgcGVyZm9ybWFuY2UuLi4nLCBkdXJhdGlvbjogMjAwMCB9LFxuICAgICAgICAgICAgeyBtc2c6ICdGaW5hbGl6aW5nIHJlc3VsdHMuLi4nLCBkdXJhdGlvbjogMTAwMCB9XG4gICAgICAgIF07XG5cbiAgICAgICAgbGV0IGN1cnJlbnRTdGFnZSA9IDA7XG4gICAgICAgIGxldCB0b3RhbFByb2dyZXNzID0gMDtcblxuICAgICAgICBjb25zdCBydW5TdGFnZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RhZ2UgPj0gc3RhZ2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcj8ucHJvZ3Jlc3NJbmRpY2F0b3IudXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NJZCwge1xuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiAxMDAsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb21wbGV0ZSEnLFxuICAgICAgICAgICAgICAgICAgICBldGE6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyPy5wcm9ncmVzc0luZGljYXRvci5oaWRlUHJvZ3Jlc3MocHJvZ3Jlc3NJZCk7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzdGFnZSA9IHN0YWdlc1tjdXJyZW50U3RhZ2VdO1xuICAgICAgICAgICAgY29uc3Qgc3RhZ2VQcm9ncmVzcyA9IDEwMCAvIHN0YWdlcy5sZW5ndGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcj8ucHJvZ3Jlc3NJbmRpY2F0b3IudXBkYXRlUHJvZ3Jlc3MocHJvZ3Jlc3NJZCwge1xuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHRvdGFsUHJvZ3Jlc3MsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogc3RhZ2UubXNnLFxuICAgICAgICAgICAgICAgIGV0YTogKHN0YWdlcy5sZW5ndGggLSBjdXJyZW50U3RhZ2UpICogMlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRvdGFsUHJvZ3Jlc3MgKz0gc3RhZ2VQcm9ncmVzcztcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RhZ2UrKztcbiAgICAgICAgICAgICAgICBydW5TdGFnZSgpO1xuICAgICAgICAgICAgfSwgc3RhZ2UuZHVyYXRpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJ1blN0YWdlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZW1vTXVsdGlwbGVQcm9ncmVzcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VuaGFuY2VtZW50IE1hbmFnZXIgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdGFydCAzIGRpZmZlcmVudCBwcm9ncmVzcyBpbmRpY2F0b3JzXG4gICAgICAgIGNvbnN0IHRhc2tzID0gW1xuICAgICAgICAgICAgeyBpZDogJ3Rhc2sxJywgdGl0bGU6ICdCYWNrdXAgQ3JlYXRpb24nLCBkdXJhdGlvbjogNTAwMCB9LFxuICAgICAgICAgICAgeyBpZDogJ3Rhc2syJywgdGl0bGU6ICdGaWxlIEFuYWx5c2lzJywgZHVyYXRpb246IDcwMDAgfSxcbiAgICAgICAgICAgIHsgaWQ6ICd0YXNrMycsIHRpdGxlOiAnSW5kZXggVXBkYXRlJywgZHVyYXRpb246IDMwMDAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRhc2tzLmZvckVhY2goKHRhc2ssIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc0lkID0gYGRlbW8tbXVsdGktJHt0YXNrLmlkfS0ke0RhdGUubm93KCl9YDtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnNob3dQcm9ncmVzcyh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBwcm9ncmVzc0lkLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGFzay50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N0YXJ0aW5nLi4uJyxcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZXRhOiB0YXNrLmR1cmF0aW9uIC8gMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MgKz0gMTA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+PSAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzID0gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yLmhpZGVQcm9ncmVzcyhwcm9ncmVzc0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXI/LnByb2dyZXNzSW5kaWNhdG9yLnVwZGF0ZVByb2dyZXNzKHByb2dyZXNzSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcHJvZ3Jlc3MgPCAxMDAgPyAnUHJvY2Vzc2luZy4uLicgOiAnQ29tcGxldGUhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV0YTogcHJvZ3Jlc3MgPCAxMDAgPyAoKDEwMCAtIHByb2dyZXNzKSAvIDEwKSAqICh0YXNrLmR1cmF0aW9uIC8gMTAwMDApIDogMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCB0YXNrLmR1cmF0aW9uIC8gMTApO1xuICAgICAgICAgICAgfSwgaW5kZXggKiAxMDAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBkZW1vQ2FjaGluZygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VuaGFuY2VtZW50IE1hbmFnZXIgbm90IGluaXRpYWxpemVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXN0RW5kcG9pbnQgPSAnZGVtby1jYWNoZS10ZXN0JztcbiAgICAgICAgXG4gICAgICAgIC8vIEZpcnN0IHJlcXVlc3QgKGNhY2hlIG1pc3MpXG4gICAgICAgIGNvbnN0IHN0YXJ0MSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZW5oYW5jZW1lbnRNYW5hZ2VyLm9wdGltaXplZEFQSUNhbGwoXG4gICAgICAgICAgICAgICAgdGVzdEVuZHBvaW50LFxuICAgICAgICAgICAgICAgICgpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHsgZGF0YTogJ3Rlc3QgcmVzcG9uc2UnIH0pLCAxMDAwKSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB0aW1lMSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQxO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZWNvbmQgcmVxdWVzdCAoY2FjaGUgaGl0KVxuICAgICAgICAgICAgY29uc3Qgc3RhcnQyID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIub3B0aW1pemVkQVBJQ2FsbChcbiAgICAgICAgICAgICAgICB0ZXN0RW5kcG9pbnQsXG4gICAgICAgICAgICAgICAgKCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoeyBkYXRhOiAndGVzdCByZXNwb25zZScgfSksIDEwMDApKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWUyID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydDI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZpcnN0IHJlcXVlc3Q6ICR7TWF0aC5yb3VuZCh0aW1lMSl9bXMgKGNhY2hlIG1pc3MpXFxuU2Vjb25kIHJlcXVlc3Q6ICR7TWF0aC5yb3VuZCh0aW1lMil9bXMgKGNhY2hlIGhpdClgLCA1MDAwKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NhY2hlIHRlc3QgZmFpbGVkOiAnICsgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93UGVyZm9ybWFuY2VNZXRyaWNzKCkge1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRW5oYW5jZW1lbnQgTWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1ldHJpY3MgPSB0aGlzLnBsdWdpbi5lbmhhbmNlbWVudE1hbmFnZXIuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gICAgICAgIGNvbnN0IGNhY2hlSGl0UmF0ZSA9IHRoaXMucGx1Z2luLmVuaGFuY2VtZW50TWFuYWdlci5nZXRDYWNoZUhpdFJhdGUoKTtcblxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSAnUGVyZm9ybWFuY2UgTWV0cmljcyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2YXVsdHBpbG90LW1ldHJpY3MtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpY3MtZ3JpZFwiIHN0eWxlPVwiZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyMDBweCwgMWZyKSk7IGdhcDogMTZweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5Ub3RhbCBSZXF1ZXN0czwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7bWV0cmljcy50b3RhbFJlcXVlc3RzfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5DYWNoZSBIaXQgUmF0ZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7TWF0aC5yb3VuZChjYWNoZUhpdFJhdGUpfSU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiA2cHg7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWxhYmVsXCI+QXZnIFJlc3BvbnNlIFRpbWU8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke01hdGgucm91bmQobWV0cmljcy5hdmVyYWdlUmVzcG9uc2VUaW1lKX1tczwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1yYWRpdXM6IDZweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtbGFiZWxcIj5DYWNoZSBTaXplPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLXZhbHVlXCI+JHttZXRyaWNzLmN1cnJlbnRDYWNoZVNpemV9IGl0ZW1zPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWl0ZW1cIiBzdHlsZT1cImJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgcGFkZGluZzogMTJweDsgYm9yZGVyLXJhZGl1czogNnB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPk1lbW9yeSBVc2FnZTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy12YWx1ZVwiPiR7TWF0aC5yb3VuZChtZXRyaWNzLm1lbW9yeVVzYWdlIC8gMTAyNCl9IEtCPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWV0cmljLWl0ZW1cIiBzdHlsZT1cImJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgcGFkZGluZzogMTJweDsgYm9yZGVyLXJhZGl1czogNnB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1ldHJpYy1sYWJlbFwiPkZhc3Rlc3QgUmVzcG9uc2U8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXRyaWMtdmFsdWVcIj4ke01hdGgucm91bmQobWV0cmljcy5mYXN0ZXN0UmVzcG9uc2UpfW1zPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLy8gQWRkIHN0eWxlcyBmb3IgdGhlIGRlbW9cbmNvbnN0IGRlbW9TdHlsZXMgPSBgXG4uZW5oYW5jZW1lbnQtZGVtby1zZWN0aW9uIHtcbiAgICBtYXJnaW46IDIwcHggMDtcbiAgICBwYWRkaW5nOiAxNXB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xufVxuXG4uZW5oYW5jZW1lbnQtZGVtby1zZWN0aW9uIGgzIHtcbiAgICBtYXJnaW4tdG9wOiAwO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG59XG5cbi5kZW1vLWJ1dHRvbnMge1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG59XG5cbi5kZW1vLWJ1dHRvbnMgYnV0dG9uIHtcbiAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICBtYXJnaW46IDRweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xufVxuXG4uZGVtby1idXR0b25zIGJ1dHRvbjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtaG92ZXIpO1xufVxuXG4uc2hvcnRjdXQtaXRlbSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiA4cHg7XG4gICAgbWFyZ2luOiA0cHggMDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xufVxuXG4ubWV0cmljLWxhYmVsIHtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG59XG5cbi5tZXRyaWMtdmFsdWUge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgZm9udC1zaXplOiAxLjJlbTtcbiAgICBmb250LXdlaWdodDogNjAwO1xufVxuYDtcblxuLy8gSW5qZWN0IGRlbW8gc3R5bGVzXG5jb25zdCBzdHlsZUlkID0gJ3ZhdWx0cGlsb3QtZGVtby1zdHlsZXMnO1xuaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdHlsZUlkKSkge1xuICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZS5pZCA9IHN0eWxlSWQ7XG4gICAgc3R5bGUudGV4dENvbnRlbnQgPSBkZW1vU3R5bGVzO1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxuIl0sIm5hbWVzIjpbIkRFRkFVTFRfVkFVTFRfTUFOQUdFTUVOVF9TRVRUSU5HUyIsImVuYWJsZVZhdWx0TWFuYWdlbWVudCIsImF1dG9TeW5jVmF1bHRTdHJ1Y3R1cmUiLCJzZWFyY2hSZXN1bHRzTGltaXQiLCJlbmFibGVTbWFydFNlYXJjaCIsImJhdGNoT3BlcmF0aW9uVGltZW91dCIsInNob3dWYXVsdFN0YXRzIiwibWF4U2VhcmNoUmVzdWx0cyIsImRlZmF1bHRTZWFyY2hUeXBlIiwiZW5hYmxlRmlsZU9wZXJhdGlvbnMiLCJjb25maXJtRGVzdHJ1Y3RpdmVPcGVyYXRpb25zIiwiYXV0b0JhY2t1cEJlZm9yZU9wZXJhdGlvbnMiLCJERUZBVUxUX1NFVFRJTkdTIiwiYmFja2VuZFVybCIsImFwaUtleSIsImVuYWJsZVdlYlNvY2tldCIsImVuYWJsZUNvcGlsb3QiLCJlbmFibGVBdXRvQ29tcGxldGUiLCJkZWZhdWx0QWdlbnQiLCJkZWZhdWx0TW9kZSIsImNoYXRIaXN0b3J5TGltaXQiLCJkZWJ1Z01vZGUiLCJzaG93SW50ZW50RGVidWciLCJ2YXVsdE1hbmFnZW1lbnQiLCJtb2RlbFNlbGVjdGlvbiIsImVuYWJsZWQiLCJkZXZwaXBlUGF0aCIsIm1vbml0b3JpbmdJbnRlcnZhbCIsImZhbGxiYWNrRW5hYmxlZCIsImNhY2hlRHVyYXRpb24iLCJyZXRyeUF0dGVtcHRzIiwidGltZW91dCIsInVzZXJQcmVmZXJlbmNlcyIsInByaW9yaXR5IiwibWF4Q29zdFBlclJlcXVlc3QiLCJwcmVmZXJyZWRQcm92aWRlcnMiLCJxdWFsaXR5VGhyZXNob2xkIiwiVmF1bHRQaWxvdFNldHRpbmdUYWIiLCJQbHVnaW5TZXR0aW5nVGFiIiwiY29uc3RydWN0b3IiLCJhcHAiLCJwbHVnaW4iLCJzdXBlciIsInRoaXMiLCJkaXNwbGF5IiwiY29udGFpbmVyRWwiLCJlbXB0eSIsImNyZWF0ZUVsIiwidGV4dCIsIlNldHRpbmciLCJzZXROYW1lIiwic2V0RGVzYyIsImFkZFRleHQiLCJzZXRQbGFjZWhvbGRlciIsInNldFZhbHVlIiwic2V0dGluZ3MiLCJvbkNoYW5nZSIsInZhbHVlIiwiX19hd2FpdGVyIiwic2F2ZVNldHRpbmdzIiwiYWRkQnV0dG9uIiwiYnV0dG9uIiwic2V0QnV0dG9uVGV4dCIsIm9uQ2xpY2siLCJ0ZXN0Q29ubmVjdGlvbiIsImFkZFRvZ2dsZSIsInRvZ2dsZSIsImNvbm5lY3RXZWJTb2NrZXQiLCJkaXNjb25uZWN0V2ViU29ja2V0IiwiYWRkRHJvcGRvd24iLCJkcm9wZG93biIsImFkZE9wdGlvbiIsImFkZFNsaWRlciIsInNsaWRlciIsInNldExpbWl0cyIsInNldER5bmFtaWNUb29sdGlwIiwiX2IiLCJfYSIsIk9iamVjdCIsImFzc2lnbiIsImluaXRpYWxpemVWYXVsdE1hbmFnZW1lbnQiLCJkaXNhYmxlVmF1bHRNYW5hZ2VtZW50IiwiU3RyaW5nIiwicGFyc2VJbnQiLCJzZXRDdGEiLCJ2YXVsdENsaWVudCIsInNldFRpbWVvdXQiLCJzZXREaXNhYmxlZCIsInN1Y2Nlc3MiLCJlcnJvciIsInNldFdhcm5pbmciLCJzZXR0aW5nc1RhYiIsInNldHRpbmciLCJhY3RpdmVUYWIiLCJhZGRWYXVsdE1hbmFnZW1lbnRTZXR0aW5ncyIsImluaXRpYWxpemVNb2RlbFNlbGVjdGlvbiIsImRpc2Nvbm5lY3RNb2RlbFNlbGVjdGlvbiIsImNscyIsImlubmVySFRNTCIsIm5vdGljZSIsIk5vdGljZSIsInJlc3BvbnNlIiwiYXBpQ2xpZW50IiwiaGVhbHRoQ2hlY2siLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJ3YXJuIiwic2ltcGxlUmVzcG9uc2UiLCJzaW1wbGVIZWFsdGhDaGVjayIsImRhdGEiLCJzdGF0dXMiLCJ2ZXJzaW9uIiwiaGlkZSIsIkVycm9yIiwibWVzc2FnZSIsIlZJRVdfVFlQRV9WQVVMVFBJTE9UIiwiVmF1bHRQaWxvdFZpZXciLCJJdGVtVmlldyIsImxlYWYiLCJnZXRWaWV3VHlwZSIsImdldERpc3BsYXlUZXh0IiwiZ2V0SWNvbiIsIm9uT3BlbiIsImNvbnRhaW5lciIsImFkZENsYXNzIiwiaGVhZGVyRWwiLCJzdGF0dXNFbCIsInVwZGF0ZVN0YXR1cyIsInF1aWNrQWN0aW9uc0VsIiwiY3JlYXRlUXVpY2tBY3Rpb25zIiwidmF1bHRTdGF0c0VsIiwidXBkYXRlVmF1bHRTdGF0cyIsImFjdGl2aXRpZXNFbCIsImFkZFN0eWxlcyIsInN0YXR1c0NvbnRhaW5lciIsImJhY2tlbmRTdGF0dXMiLCJiYWNrZW5kSW5kaWNhdG9yIiwid3NTdGF0dXMiLCJpc1dlYlNvY2tldENvbm5lY3RlZCIsImNoZWNrQmFja2VuZFN0YXR1cyIsImluZGljYXRvciIsInRleHRDb250ZW50IiwiY2xhc3NOYW1lIiwiYWN0aW9uc0dyaWQiLCJvbmNsaWNrIiwib3BlbkNoYXRNb2RhbCIsImFjdGl2YXRlRnVsbFRhYlZpZXciLCJvcGVuV29ya2Zsb3dNb2RhbCIsImFuYWx5emVWYXVsdCIsImFjdGl2ZVZpZXciLCJ3b3Jrc3BhY2UiLCJnZXRBY3RpdmVWaWV3T2ZUeXBlIiwiTWFya2Rvd25WaWV3IiwiZ2V0Q29waWxvdENvbXBsZXRpb24iLCJlZGl0b3IiLCJzdGF0c0NvbnRhaW5lciIsImZpbGVzIiwidmF1bHQiLCJnZXRGaWxlcyIsIm1hcmtkb3duRmlsZXMiLCJnZXRNYXJrZG93bkZpbGVzIiwibGFiZWwiLCJsZW5ndGgiLCJ0b1N0cmluZyIsImdldEFsbExvYWRlZEZpbGVzIiwiZmlsdGVyIiwiZiIsIlRGb2xkZXIiLCJmb3JFYWNoIiwic3RhdCIsInN0YXRFbCIsImxvYWRBZ2VudEluZm8iLCJsb2ciLCJnZXRBZ2VudHMiLCJhZ2VudHMiLCJBcnJheSIsImlzQXJyYXkiLCJkYXRhT2JqIiwiYWdlbnRDb3VudCIsImFjdGl2ZUFnZW50cyIsImFnZW50IiwiYWN0aXZlIiwiYWdlbnRTdGF0c0VsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlRWwiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJvbkNsb3NlIiwiVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIiLCJWYXVsdFBpbG90RnVsbFRhYlZpZXciLCJzdHlsZSIsImhlaWdodCIsIm92ZXJmbG93IiwibWFpbkxheW91dCIsImxlZnRTaWRlYmFyIiwiY3JlYXRlTGVmdFNpZGViYXIiLCJtYWluQ29udGVudCIsImNyZWF0ZU1haW5Db250ZW50IiwicmlnaHRTaWRlYmFyIiwiY3JlYXRlUmlnaHRTaWRlYmFyIiwiYWRkRnVsbFRhYlN0eWxlcyIsInNpZGViYXIiLCJjb250ZW50IiwidGFiTmF2IiwiY2hhdFRhYiIsIndvcmtmbG93VGFiIiwiYW5hbHl0aWNzVGFiIiwidGFiQ29udGVudCIsImNoYXRFbCIsImNyZWF0ZUNoYXRTZWN0aW9uIiwid29ya2Zsb3dFbCIsImNyZWF0ZVdvcmtmbG93U2VjdGlvbiIsImFuYWx5dGljc0VsIiwiY3JlYXRlQW5hbHl0aWNzU2VjdGlvbiIsInN3aXRjaFRhYiIsInJlY2VudEZpbGVzRWwiLCJ1cGRhdGVSZWNlbnRGaWxlcyIsImFnZW50U3RhdHVzRWwiLCJ1cGRhdGVBZ2VudFN0YXR1cyIsImFjdGl2aXR5RWwiLCJjcmVhdGVBY3Rpdml0eUZlZWQiLCJjaGF0Q29udGVudCIsImNoYXRIaXN0b3J5IiwiY2hhdElucHV0IiwidGV4dGFyZWEiLCJwbGFjZWhvbGRlciIsInNlbmRCdXR0b24iLCJ0cmltIiwic2VuZENoYXRNZXNzYWdlIiwib25rZXlkb3duIiwiZSIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJjbGljayIsIndvcmtmbG93Q29udGVudCIsIndvcmtmbG93R3JpZCIsIm5hbWUiLCJpY29uIiwiZGVzY3JpcHRpb24iLCJ3b3JrZmxvdyIsIndvcmtmbG93Q2FyZCIsInJ1bldvcmtmbG93IiwiYW5hbHl0aWNzQ29udGVudCIsImNoYXJ0c0NvbnRhaW5lciIsImZpbGVUeXBlQ2hhcnQiLCJ0aW1lbGluZUNoYXJ0IiwidGFnQ2hhcnQiLCJ3b3JkQ291bnRDaGFydCIsImxpbmtDaGFydCIsImFjdGl2aXR5Q2hhcnQiLCJ0YWJOYW1lIiwicXVlcnlTZWxlY3RvckFsbCIsImJ0biIsInJlbW92ZUNsYXNzIiwic2VjdGlvbiIsInF1ZXJ5U2VsZWN0b3IiLCJ0aGlua2luZ01lc3NhZ2UiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJzZW5kQ2hhdCIsImNvbnRleHQiLCJyZW1vdmUiLCJ3b3JrZmxvd05hbWUiLCJydW5BbmFseXplVmF1bHRXb3JrZmxvdyIsInBsYW5NeURheSIsInJ1blN1bW1hcnlXb3JrZmxvdyIsInJ1bkxpbmtBbmFseXNpc1dvcmtmbG93IiwicnVuQ29udGVudFNlYXJjaFdvcmtmbG93IiwicnVuR2VuZXJpY1dvcmtmbG93Iiwic3RydWN0dXJlIiwiZ2V0VmF1bHRTdHJ1Y3R1cmUiLCJpbmNsdWRlX2NvbnRlbnQiLCJtYXhfZGVwdGgiLCJ0b3RhbF9maWxlcyIsInRvdGFsX2ZvbGRlcnMiLCJydW5Mb2NhbFZhdWx0QW5hbHlzaXMiLCJmb2xkZXJzIiwiYWN0aXZlRmlsZSIsImdldEFjdGl2ZUZpbGUiLCJyZWFkIiwidG90YWxMaW5rcyIsImxpbmtlZEZpbGVzIiwiU2V0IiwiZmlsZSIsImxpbmtNYXRjaGVzIiwibWF0Y2giLCJsaW5rVGFyZ2V0Iiwic2xpY2UiLCJhZGQiLCJvcnBoYW5lZEZpbGVzIiwic2l6ZSIsIm9wZW5TbWFydFNlYXJjaE1vZGFsIiwiYWN0aXZhdGVWaWV3Iiwic29ydCIsImEiLCJiIiwibXRpbWUiLCJmaWxlRWwiLCJiYXNlbmFtZSIsIm9wZW5MaW5rVGV4dCIsInBhdGgiLCJhZ2VudEluZm8iLCJhZ2VudEVsIiwidGltZSIsImFjdGl2aXR5IiwiZ2V0QWN0aXZlTWFya2Rvd24iLCJDaGF0TW9kYWwiLCJNb2RhbCIsImN1cnJlbnRDb252ZXJzYXRpb25JZCIsIm1lc3NhZ2VzIiwiY29udGVudEVsIiwidG9vbGJhckVsIiwiY2xlYXJDaGF0IiwiYWdlbnRTZWxlY3QiLCJsb2FkQWdlbnRzIiwiY2hhdENvbnRhaW5lciIsIm1lc3NhZ2VzRWwiLCJpbnB1dENvbnRhaW5lciIsImlucHV0RWwiLCJ0eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwiZGlzYWJsZWQiLCJnZXRDb252ZXJzYXRpb25IaXN0b3J5IiwicmVuZGVyTWVzc2FnZXMiLCJhZGRNZXNzYWdlIiwiaW50ZW50UmVzIiwiUHJvbWlzZSIsImFsbCIsImNsYXNzaWZ5SW50ZW50IiwicGF5bG9hZCIsImludGVudCIsInJlc3VsdCIsImNvbnZlcnNhdGlvbl9pZCIsInVuZGVmaW5lZCIsImFnZW50X2lkIiwiZ2V0U2VsZWN0ZWRBZ2VudCIsImVycm9yTXNnIiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJyZW5kZXJNZXNzYWdlIiwic2Nyb2xsVG9Cb3R0b20iLCJtZXNzYWdlRWwiLCJyZW5kZXJNYXJrZG93biIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlcGxhY2UiLCJkZWJ1Z0VsIiwiV29ya2Zsb3dNb2RhbCIsImlzRXhlY3V0aW5nIiwiZm9ybUVsIiwiZ29hbENvbnRhaW5lciIsImdvYWxJbnB1dCIsImNvbnRleHRDb250YWluZXIiLCJjb250ZXh0SW5wdXQiLCJvcHRpb25zQ29udGFpbmVyIiwiaW5jbHVkZUFjdGl2ZUZpbGUiLCJhY3RpdmVGaWxlQ2hlY2tib3giLCJjcmVhdGVTcGFuIiwiaW5jbHVkZUFsbEZpbGVzIiwiYWxsRmlsZXNDaGVja2JveCIsImV4ZWN1dGVCdXR0b24iLCJleGVjdXRlV29ya2Zsb3ciLCJjaGVja2VkIiwicHJvZ3Jlc3NDb250YWluZXIiLCJyZXN1bHRzQ29udGFpbmVyIiwiZ29hbCIsInZhdWx0Q29udGVudCIsInJlcXVlc3QiLCJ2YXVsdF9jb250ZW50Iiwic2V0dXBQcm9ncmVzc0xpc3RlbmVyIiwiZGlzcGxheVJlc3VsdHMiLCJkaXNwbGF5RXJyb3IiLCJkaXNwbGF5UHJvZ3Jlc3MiLCJleGVjdXRpb25fdGltZSIsInJlc3VsdEVsIiwic3RlcHNfdGFrZW4iLCJzdGVwc0VsIiwic3RlcHNMaXN0Iiwic3RlcCIsImFydGlmYWN0cyIsImFydGlmYWN0c0VsIiwiYXJ0aWZhY3QiLCJpbmRleCIsImFydGlmYWN0RWwiLCJ0aXRsZSIsInNhdmVBcnRpZmFjdEFzTm90ZSIsInNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUiLCJmaWxlbmFtZSIsImNyZWF0ZSIsInNwbGl0IiwiRXZvQWdlbnRYQ2xpZW50IiwiYmFzZVVybCIsIndzQ2FsbGJhY2tzIiwiTWFwIiwibWFrZVJlcXVlc3QiLCJlbmRwb2ludF8xIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwidXJsIiwiaGVhZGVycyIsIkFjY2VwdCIsImZldGNoIiwibW9kZSIsImNyZWRlbnRpYWxzIiwiY29udGVudFR5cGUiLCJnZXQiLCJqc29uIiwib2siLCJlcnJvck1lc3NhZ2UiLCJzdGF0dXNUZXh0IiwibWV0aG9kIiwiY2hhdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udmVyc2F0aW9uSWRfMSIsImNvbnZlcnNhdGlvbklkIiwibGltaXQiLCJyZXF1ZXN0Qm9keSIsImluY2x1ZGVfbWVzc2FnZXMiLCJkZWxldGVDb252ZXJzYXRpb24iLCJ2YXVsdF9jb250ZXh0IiwiY3JlYXRlQWdlbnQiLCJleGVjdXRlQWdlbnQiLCJhbmFseXplVmF1bHRDb250ZXh0IiwicGxhblRhc2tzIiwicGFyc2VJbnRlbGxpZ2VuY2UiLCJjb25maWRlbmNlIiwiZXhwbGFpbkludGVudCIsImluY2x1ZGVfZGVidWciLCJyZWFzb25pbmciLCJ1cGRhdGVNZW1vcnkiLCJjYWxsYmFja3MiLCJ3c1VybCIsIndlYnNvY2tldCIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uQ29ubmVjdCIsImNhbGwiLCJvbm1lc3NhZ2UiLCJldmVudCIsInBhcnNlIiwib25DaGF0Iiwib25Xb3JrZmxvd1Byb2dyZXNzIiwiX2MiLCJvbkNvcGlsb3QiLCJfZCIsIm9uVmF1bHRTeW5jIiwiX2UiLCJvbkludGVudERlYnVnIiwiX2YiLCJvbkVycm9yIiwiX2ciLCJvbmNsb3NlIiwiY29kZSIsInJlYXNvbiIsIm9uRGlzY29ubmVjdCIsIm9uZXJyb3IiLCJjbG9zZSIsInNlbmRXZWJTb2NrZXRNZXNzYWdlIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwiZmluZFBsYW5TZWN0aW9uIiwiZmluZFNjaGVkdWxlU2VjdGlvbiIsInNjaGVkdWxlUmVnZXgiLCJQbGFuTXlEYXlEZWJ1Z2dlciIsImxvZ3MiLCJtYXhMb2dzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImxvZ0VudHJ5IiwiZXJyb3JEYXRhIiwic3RhY2siLCJnZXRMb2dzIiwiY2xlYXJMb2dzIiwiZXhwb3J0TG9ncyIsImpvaW4iLCJhbmFseXplQXBpQ2xpZW50IiwiYXZhaWxhYmxlIiwibWV0aG9kcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRQcm90b3R5cGVPZiIsImhhc1BsYW5UYXNrcyIsImhhc0hlYWx0aENoZWNrIiwidGVzdFRhc2tQbGFubmluZyIsImFwaUNsaWVudF8xIiwidGVzdE5vdGUiLCJ0aW1lZnJhbWUiLCJoYXNEYXRhIiwiaGFzUGxhbiIsInBsYW4iLCJ0YXNrQ291bnQiLCJ0YXNrcyIsInBsYW5NeURheURlYnVnZ2VyIiwiVmF1bHRNYW5hZ2VtZW50RXJyb3IiLCJmZWF0dXJlIiwiVmF1bHRNYW5hZ2VtZW50Q2xpZW50IiwidmF1bHRfbmFtZSIsInRvdGFsX3NpemUiLCJjaGlsZHJlbiIsInJlY2VudF9maWxlcyIsIm9ycGhhbmVkX2ZpbGVzIiwiaGFuZGxlVmF1bHRNYW5hZ2VtZW50RXJyb3IiLCJwZXJmb3JtRmlsZU9wZXJhdGlvbiIsInZhbGlkYXRlRmlsZU9wZXJhdGlvblJlcXVlc3QiLCJwZXJmb3JtQmF0Y2hPcGVyYXRpb25zIiwib3BlcmF0aW9ucyIsIm9wIiwiZXJyIiwic2VhcmNoVmF1bHQiLCJxdWVyeSIsIm9yZ2FuaXplVmF1bHQiLCJiYWNrdXBWYXVsdCIsImNyZWF0ZUZpbGUiLCJmaWxlUGF0aF8xIiwiY29udGVudF8xIiwiYXJndW1lbnRzIiwiZmlsZVBhdGgiLCJiYWNrdXAiLCJvcGVyYXRpb24iLCJmaWxlX3BhdGgiLCJ1cGRhdGVGaWxlIiwiZGVsZXRlRmlsZSIsIm1vdmVGaWxlIiwiZnJvbVBhdGhfMSIsInRvUGF0aF8xIiwiZnJvbVBhdGgiLCJ0b1BhdGgiLCJuZXdfcGF0aCIsImNvcHlGaWxlIiwicXVpY2tTZWFyY2giLCJxdWVyeV8xIiwibWF4UmVzdWx0cyIsInNlYXJjaF90eXBlIiwibWF4X3Jlc3VsdHMiLCJyZXF1ZXN0T3B0aW9ucyIsIkVudmlyb25tZW50RGV0ZWN0b3IiLCJkZXRlY3QiLCJpbmZvIiwicGxhdGZvcm0iLCJoYXNGaWxlU3lzdGVtIiwiaGFzV2ViU29ja2V0IiwiaGFzSFRUUCIsImNhcGFiaWxpdGllcyIsIndpbmRvdyIsImdsb2JhbFRoaXMiLCJwcm9jZXNzIiwidmVyc2lvbnMiLCJub2RlIiwicmVxdWlyZSIsImlzT2JzaWRpYW4iLCJjYW5Vc2VGaWxlU3lzdGVtIiwiY2FuVXNlV2ViU29ja2V0IiwiZ2V0T3B0aW1hbFRyYW5zcG9ydCIsImVudiIsIkRldlBpcGVDbGllbnQiLCJjb25maWciLCJpc0Nvbm5lY3RlZCIsIm1lc3NhZ2VJZCIsInBlbmRpbmdSZXF1ZXN0cyIsImV2ZW50TGlzdGVuZXJzIiwiZW52aXJvbm1lbnQiLCJzZXJ2ZXJVcmwiLCJzZXJ2ZXJfdXJsIiwiZGVidWdfbW9kZSIsIm9uIiwibGlzdGVuZXIiLCJoYXMiLCJzZXQiLCJvZmYiLCJsaXN0ZW5lcnMiLCJpbmRleE9mIiwic3BsaWNlIiwiZW1pdCIsImluaXRpYWxpemUiLCJ0cmFuc3BvcnQiLCJzaWduYWwiLCJBYm9ydFNpZ25hbCIsImZhbGxiYWNrRXJyb3IiLCJ0eXBlXzEiLCJwYXlsb2FkXzEiLCJnZW5lcmF0ZU1lc3NhZ2VJZCIsInNlbmRlciIsInJlY2lwaWVudCIsInJlc29sdmUiLCJyZWplY3QiLCJ0aW1lb3V0SGFuZGxlIiwiZGVsZXRlIiwic2VuZE1lc3NhZ2VUb1NlcnZlciIsImNhdGNoIiwiY2xlYXJUaW1lb3V0IiwicGVuZGluZ1JlcXVlc3QiLCJub3ciLCJkaXNjb25uZWN0IiwicGVuZGluZ0VudHJpZXMiLCJmcm9tIiwiZW50cmllcyIsImNsZWFyIiwiaXNSZWFkeSIsImdldFBlbmRpbmdSZXF1ZXN0Q291bnQiLCJNb2RlbFNlbGVjdGlvbkVycm9yIiwiZGV0YWlscyIsInN1Z2dlc3Rpb25zIiwiTW9kZWxTZWxlY3Rpb25TZXJ2aWNlIiwiZGV2UGlwZVBhdGgiLCJjYWNoZWRIZWFsdGgiLCJsYXN0SGVhbHRoVXBkYXRlIiwiZGV2cGlwZV9wYXRoIiwibW9uaXRvcmluZ19pbnRlcnZhbCIsImZhbGxiYWNrX2VuYWJsZWQiLCJjYWNoZV9kdXJhdGlvbiIsInJldHJ5X2F0dGVtcHRzIiwiZGV2UGlwZUNsaWVudCIsIm1heF9jb3N0X3Blcl9yZXF1ZXN0IiwicHJlZmVycmVkX3Byb3ZpZGVycyIsInF1YWxpdHlfdGhyZXNob2xkIiwidGltZW91dF9wcmVmZXJlbmNlIiwic2V0dXBFdmVudExpc3RlbmVycyIsImhlYWx0aERhdGEiLCJtZXRyaWNzIiwicmVmcmVzaE1vZGVsSGVhbHRoIiwic3RhcnRIZWFsdGhNb25pdG9yaW5nIiwic2VsZWN0TW9kZWwiLCJwZXJmb3JtU2VsZWN0aW9uIiwiZmFsbGJhY2tTZWxlY3Rpb24iLCJlbmhhbmNlZFJlcXVlc3QiLCJ1c2VyX3ByZWZlcmVuY2VzIiwidGltZW91dF9tcyIsIm9yaWdpbmFsRXJyb3IiLCJjYWNoZWQiLCJnZXRDYWNoZWRTZWxlY3Rpb24iLCJzdGF0aWNNb2RlbFNlbGVjdGlvbiIsImRlZmF1bHRNb2RlbHMiLCJjb3N0Iiwic3VtbWFyaXphdGlvbiIsInRyYW5zbGF0aW9uIiwiZGVmYXVsdE1vZGVsIiwidGFza190eXBlIiwic2VsZWN0ZWRfbW9kZWwiLCJwcm92aWRlciIsInNjb3JlIiwiY29zdF9wZXJfdG9rZW4iLCJtYXhfdG9rZW5zIiwicmVzcG9uc2VfdGltZV9hdmdfbXMiLCJhdmFpbGFiaWxpdHlfc2NvcmUiLCJxdWFsaXR5X3Njb3JlIiwiZmFsbGJhY2tfbW9kZWxzIiwiZXN0aW1hdGVkX2Nvc3QiLCJlc3RpbWF0ZWRfdGltZV9tcyIsInNlbGVjdGlvbl9tZXRhZGF0YSIsInNlbGVjdGlvbl90aW1lX21zIiwiZmFjdG9yc19jb25zaWRlcmVkIiwiY29uZmlkZW5jZV9zY29yZSIsInNlbGVjdE1vZGVsX09MRCIsImdldE1vZGVsSGVhbHRoIiwiaGVhbHRoIiwidXBkYXRlUHJlZmVyZW5jZXMiLCJwcmVmZXJlbmNlcyIsImdldFByZWZlcmVuY2VzIiwic2V0SW50ZXJ2YWwiLCJzZWxlY3RGb3JUYXNrIiwidGFza1R5cGVfMSIsInRhc2tUeXBlIiwicXVhbGl0eSIsInF1YWxpdHlfcmVxdWlyZW1lbnQiLCJzZWxlY3RDb3N0T3B0aW1pemVkIiwibWF4Q29zdCIsIm1heF9jb3N0Iiwic2VsZWN0SGlnaFBlcmZvcm1hbmNlIiwiZ2V0Q29uZmlnIiwiVmF1bHRTdHJ1Y3R1cmVNb2RhbCIsInNldEZvY3VzUGF0aCIsImZvY3VzUGF0aCIsInJlZnJlc2hCdXR0b24iLCJsb2FkaW5nRWwiLCJjcmVhdGVEaXYiLCJzZXRUZXh0IiwicmVuZGVyU3RydWN0dXJlIiwicmVuZGVyRmFsbGJhY2tTdHJ1Y3R1cmUiLCJ0b0ZpeGVkIiwidHJlZUNvbnRhaW5lciIsInRyZWVFbCIsInJlbmRlckZvbGRlciIsInJlY2VudENvbnRhaW5lciIsInJlY2VudEVsIiwibW9kaWZpZWQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJvcnBoYW5lZENvbnRhaW5lciIsIm9ycGhhbmVkRWwiLCJmb2xkZXIiLCJsZXZlbCIsImZvbGRlckVsIiwiYXR0ciIsImNoaWxkcmVuRWwiLCJ0b2dnbGVFbCIsImlzT3BlbiIsImNoaWxkIiwiZmFsbGJhY2tFbCIsInJlY2VudEZpbGVzIiwicmVjZW50TGlzdCIsIlNtYXJ0U2VhcmNoTW9kYWwiLCJzZXRJbml0aWFsUXVlcnkiLCJpbml0aWFsUXVlcnkiLCJzZWFyY2hUeXBlIiwic2VhcmNoRm9ybSIsInF1ZXJ5SW5wdXQiLCJzZWFyY2hUeXBlU2VsZWN0Iiwib3B0aW9uIiwic2VsZWN0ZWQiLCJzZWFyY2hCdXR0b24iLCJwZXJmb3JtU2VhcmNoIiwicmVzdWx0cyIsInJlbmRlclNlYXJjaFJlc3VsdHMiLCJ0b3RhbF9mb3VuZCIsImluc2lnaHRzIiwicmVzdWx0c0xpc3QiLCJmaWxlX25hbWUiLCJtYXRjaF90eXBlIiwicHJldmlldyIsIm1hdGNoZXMiLCJzdWdnZXN0ZWRfcXVlcmllcyIsInN1Z2dlc3Rpb25zRWwiLCJzdWdnZXN0aW9uc0xpc3QiLCJzdWdnZXN0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIktleWJvYXJkRXZlbnQiLCJGaWxlT3BlcmF0aW9uc01vZGFsIiwic2V0SW5pdGlhbFBhdGgiLCJpbml0aWFsUGF0aCIsInNldE9wZXJhdGlvbiIsInVwZGF0ZU9wZXJhdGlvbkZvcm0iLCJmb3JtQ29udGFpbmVyIiwiYWRkVGV4dEFyZWEiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImV4ZWN1dGVPcGVyYXRpb24iLCJwYXRoSW5wdXQiLCJuZXdQYXRoSW5wdXQiLCJjb250ZW50VGV4dGFyZWEiLCJiYWNrdXBUb2dnbGUiLCJUcmFuc3BvcnRUeXBlIiwiVHJhbnNwb3J0RXZlbnQiLCJPbmJvYXJkaW5nU3RlcCIsIlJlY29tbWVuZGF0aW9uVHlwZSIsIkNpcmN1aXRCcmVha2VyIiwic3RhdGUiLCJmYWlsdXJlQ291bnQiLCJsYXN0RmFpbHVyZVRpbWUiLCJuZXh0QXR0ZW1wdCIsImV4ZWN1dGUiLCJvblN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJmYWlsdXJlVGhyZXNob2xkIiwicmVzZXRUaW1lb3V0IiwiZ2V0U3RhdGUiLCJCYXNlVHJhbnNwb3J0IiwiY29ubmVjdGVkIiwiaW5pdGlhbGl6ZWQiLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwiaGVhbHRoU3RhdHVzIiwibGFzdENoZWNrIiwibGF0ZW5jeSIsImVycm9yUmF0ZSIsImNvbnNlY3V0aXZlRmFpbHVyZXMiLCJ1cHRpbWUiLCJjaXJjdWl0QnJlYWtlciIsIm1vbml0b3JpbmdQZXJpb2QiLCJtZXNzYWdlc1NlbnQiLCJtZXNzYWdlc1JlY2VpdmVkIiwiZXJyb3JzIiwidG90YWxMYXRlbmN5IiwibGFzdEFjdGl2aXR5IiwiZGVidWciLCJldmVudEtleSIsInBlcmZvcm1IZWFsdGhDaGVjayIsInN0YXJ0VGltZSIsImRvSGVhbHRoQ2hlY2siLCJIRUFMVEhfQ0hFQ0siLCJleGVjdXRlV2l0aENpcmN1aXRCcmVha2VyIiwib3BlcmF0aW9uTmFtZSIsInVwZGF0ZU1ldHJpY3MiLCJhcmdzIiwiY2FsY3VsYXRlUmVsaWFiaWxpdHkiLCJ0b3RhbCIsImlzQXZhaWxhYmxlIiwiZ2V0SGVhbHRoU3RhdHVzIiwiZG9Jbml0aWFsaXplIiwiZGVzdHJveSIsIkNvbm5lY3Rpb25Qb29sIiwiYWN0aXZlQ29ubmVjdGlvbnMiLCJxdWV1ZSIsIm1heENvbm5lY3Rpb25zIiwiYWNxdWlyZSIsIm5leHQiLCJzaGlmdCIsIkhUVFBUcmFuc3BvcnQiLCJIVFRQIiwibWVzc2FnZVF1ZXVlIiwicHJvY2Vzc2luZ1F1ZXVlIiwiaHR0cENvbmZpZyIsImh0dHAiLCJlbmFibGVTU0UiLCJrZWVwQWxpdmUiLCJjb21wcmVzc2lvbiIsImNvbm5lY3Rpb25Qb29sIiwiY29ubmVjdCIsInNldHVwU1NFIiwiQ09OTkVDVEVEIiwiRVJST1IiLCJyZXF1ZXN0cyIsInZhbHVlcyIsInNzZUNvbm5lY3Rpb24iLCJESVNDT05ORUNURUQiLCJzZW5kSHR0cFJlcXVlc3QiLCJwZXJmb3JtSHR0cFJlcXVlc3QiLCJmZXRjaFJlc3BvbnNlIiwiZGV2UGlwZVJlc3BvbnNlIiwic3NlVXJsIiwiRXZlbnRTb3VyY2UiLCJoYW5kbGVTU0VNZXNzYWdlIiwiQ09OTkVDVElORyIsIlJFQ09OTkVDVElORyIsIk1FU1NBR0UiLCJnZXRDYXBhYmlsaXRpZXMiLCJzdXBwb3J0c1JlYWx0aW1lIiwic3VwcG9ydHNCaWRpcmVjdGlvbmFsIiwic3VwcG9ydHNGaWxlU3lzdGVtIiwic3VwcG9ydHNTdHJlYW1pbmciLCJtYXhNZXNzYWdlU2l6ZSIsImF2ZXJhZ2VMYXRlbmN5IiwibWF4Q29uY3VycmVudENvbm5lY3Rpb25zIiwicmVsaWFiaWxpdHkiLCJzdXBwb3J0ZWRFbnZpcm9ubWVudHMiLCJSZWNvbm5lY3RpbmdXZWJTb2NrZXQiLCJwcm90b2NvbHMiLCJyZWNvbm5lY3RBdHRlbXB0cyIsInNob3VsZFJlY29ubmVjdCIsIm1heFJlY29ubmVjdEF0dGVtcHRzIiwicmVjb25uZWN0RGVsYXkiLCJ3cyIsInJlY29ubmVjdCIsInBvdyIsIkV2ZW50IiwiQ0xPU0VEIiwiV2ViU29ja2V0VHJhbnNwb3J0IiwiV0VCU09DS0VUIiwicmVzcG9uc2VIYW5kbGVycyIsIndzQ29uZmlnIiwiaGVhcnRiZWF0SW50ZXJ2YWwiLCJwZXJzaXN0TWVzc2FnZXMiLCJtYXhTaXplIiwicGVyc2lzdFRvRGlzayIsImNvbm5lY3Rpb25UaW1lb3V0Iiwic3RhcnRIZWFydGJlYXQiLCJoYW5kbGVNZXNzYWdlIiwic3RvcEhlYXJ0YmVhdCIsImhhbmRsZXJzIiwiaGFuZGxlciIsInJlcGx5VG8iLCJjbGVhckludGVydmFsIiwicGluZ0lkIiwiRmlsZUxvY2tNYW5hZ2VyIiwibG9ja1RpbWVvdXQiLCJsb2NrcyIsImFjcXVpcmVMb2NrIiwiYXR0ZW1wdExvY2siLCJyZWxlYXNlTG9jayIsIkZpbGVXYXRjaGVyIiwid2F0Y2hlcnMiLCJ3YXRjaCIsImNhbGxiYWNrIiwid2F0Y2hlciIsImZpbGVFeGlzdHMiLCJyZWFkRmlsZSIsInVud2F0Y2giLCJhZGFwdGVyIiwiZXhpc3RzIiwiZnMiLCJwcm9taXNlcyIsImFjY2VzcyIsIkZpbGVTeXN0ZW1UcmFuc3BvcnQiLCJGSUxFU1lTVEVNIiwiZnNDb25maWciLCJmaWxlc3lzdGVtIiwid2F0Y2hJbnRlcnZhbCIsIm1heFF1ZXVlU2l6ZSIsImZpbGVXYXRjaGVyIiwibG9ja01hbmFnZXIiLCJlbnN1cmVEaXJlY3RvcnlFeGlzdHMiLCJzZXR1cEluY29taW5nTWVzc2FnZVdhdGNoZXIiLCJyZXNwb25zZUZpbGUiLCJzZW5kRmlsZU1lc3NhZ2UiLCJyZXF1ZXN0RmlsZSIsIndyaXRlUmVxdWVzdEZpbGUiLCJ3cml0ZUZpbGUiLCJta2RpciIsInJlY3Vyc2l2ZSIsIndyaXRlIiwidGVzdEZpbGUiLCJ1bmxpbmsiLCJEZWZhdWx0TWV0cmljc0NvbGxlY3RvciIsImxhdGVuY3lIaXN0b3J5IiwiTUFYX0hJU1RPUllfU0laRSIsInJlY29yZExhdGVuY3kiLCJnZXRPckNyZWF0ZU1ldHJpY3MiLCJoaXN0b3J5IiwiZ2V0T3JDcmVhdGVIaXN0b3J5IiwicmVkdWNlIiwic3VtIiwidmFsIiwibWluTGF0ZW5jeSIsIm1pbiIsIm1heExhdGVuY3kiLCJtYXgiLCJyZWNvcmRTdWNjZXNzIiwidG90YWxSZXF1ZXN0cyIsInN1Y2Nlc3NmdWxSZXF1ZXN0cyIsInJlY29yZEZhaWx1cmUiLCJmYWlsZWRSZXF1ZXN0cyIsImdldE1ldHJpY3MiLCJJbmZpbml0eSIsIlRyYW5zcG9ydEhlYWx0aE1vbml0b3IiLCJtZXRyaWNzQ29sbGVjdG9yIiwic2NoZWR1bGVzIiwic3RhcnRNb25pdG9yaW5nIiwiaW50ZXJ2YWwiLCJzY2hlZHVsZSIsImFzc2Vzc1RyYW5zcG9ydEhlYWx0aCIsInN0YXJ0UGVyaW9kaWNDaGVja3MiLCJzdG9wTW9uaXRvcmluZyIsImF2YWlsYWJpbGl0eSIsImNhbGN1bGF0ZUF2YWlsYWJpbGl0eVNjb3JlIiwiY2FsY3VsYXRlTGF0ZW5jeVNjb3JlIiwiY2FsY3VsYXRlUmVsaWFiaWxpdHlTY29yZSIsImNhbGN1bGF0ZUVycm9yUmF0ZVNjb3JlIiwicmVjb21tZW5kYXRpb24iLCJmYWlsdXJlUGVuYWx0eSIsImdldE1ldHJpY3NDb2xsZWN0b3IiLCJUcmFuc3BvcnRTZWxlY3RvciIsImNyaXRlcmlhIiwiY2FsY3VsYXRlU2NvcmUiLCJjYXBhYmlsaXR5U2NvcmUiLCJyZXF1aXJlc1JlYWx0aW1lIiwibGF0ZW5jeVNjb3JlIiwicmVsaWFiaWxpdHlTY29yZSIsImNvc3RTY29yZSIsImF2YWlsYWJpbGl0eU11bHRpcGxpZXIiLCJ3ZWlnaHRlZFNjb3JlIiwibGF0ZW5jeVdlaWdodCIsInJlbGlhYmlsaXR5V2VpZ2h0IiwiY2FwYWJpbGl0eVdlaWdodCIsImNvc3RXZWlnaHQiLCJzZWxlY3RCZXN0Iiwic2NvcmVkVHJhbnNwb3J0cyIsIm1hcCIsIlRyYW5zcG9ydE1hbmFnZXIiLCJ0cmFuc3BvcnRzIiwiZmFpbG92ZXJJblByb2dyZXNzIiwiZmFsbGJhY2tDaGFpbiIsImhlYWx0aE1vbml0b3IiLCJzZWxlY3RvciIsInNlbGVjdGlvbkNyaXRlcmlhIiwiaW5pdGlhbGl6ZVRyYW5zcG9ydHMiLCJzZXR1cEhlYWx0aE1vbml0b3JpbmciLCJodHRwVHJhbnNwb3J0IiwidHJhbnNwb3J0Q29uZmlncyIsIndzVHJhbnNwb3J0IiwiZnNUcmFuc3BvcnQiLCJzZXR1cFRyYW5zcG9ydEV2ZW50SGFuZGxlcnMiLCJhY3RpdmVUcmFuc3BvcnQiLCJhdXRvRmFpbG92ZXIiLCJoYW5kbGVUcmFuc3BvcnRGYWlsdXJlIiwiaGVhbHRoQ2hlY2tJbnRlcnZhbCIsImFzc2Vzc21lbnQiLCJzZWxlY3RPcHRpbWFsVHJhbnNwb3J0IiwiYXZhaWxhYmxlVHJhbnNwb3J0cyIsInNlbGVjdGVkVHJhbnNwb3J0Iiwic3dpdGNoVHJhbnNwb3J0IiwibmV3VHJhbnNwb3J0Iiwib2xkVHJhbnNwb3J0IiwidG8iLCJmYWlsZWRUcmFuc3BvcnQiLCJ0cmFuc3BvcnRUeXBlIiwiZmFsbGJhY2tUcmFuc3BvcnQiLCJkaXNjb25uZWN0UHJvbWlzZXMiLCJnZXRBY3RpdmVUcmFuc3BvcnQiLCJnZXRBdmFpbGFibGVUcmFuc3BvcnRzIiwiZ2V0VHJhbnNwb3J0SGVhbHRoIiwiYXNzZXNzbWVudHMiLCJPbmJvYXJkaW5nV2l6YXJkIiwiY3VycmVudFN0ZXAiLCJ0b3RhbFN0ZXBzIiwic3RlcEVsZW1lbnRzIiwidHJhbnNwb3J0Q29uZmlnIiwidHJhbnNwb3J0TWFuYWdlciIsInByb2dyZXNzIiwiY29tcGxldGVkU3RlcHMiLCJmaWxsIiwiZW5hYmxlUmVhbFRpbWVVcGRhdGVzIiwicGVyZm9ybWFuY2VNb2RlIiwiZW5hYmxlQW5hbHl0aWNzIiwibW9kYWxFbCIsImNyZWF0ZUhlYWRlciIsImNyZWF0ZVByb2dyZXNzQmFyIiwiY3JlYXRlTmF2aWdhdGlvbiIsInJlbmRlckN1cnJlbnRTdGVwIiwiaGVhZGVyIiwic3RlcHNDb250YWluZXIiLCJpIiwicHJvZ3Jlc3NCYXIiLCJ3aWR0aCIsIm5hdmlnYXRpb24iLCJwcmV2aW91c0J1dHRvbiIsIkJ1dHRvbkNvbXBvbmVudCIsInNldENsYXNzIiwicHJldmlvdXNTdGVwIiwic2tpcEJ1dHRvbiIsInNraXBPbmJvYXJkaW5nIiwibmV4dEJ1dHRvbiIsIm5leHRTdGVwIiwidXBkYXRlTmF2aWdhdGlvblN0YXRlIiwic3RlcENvbnRhaW5lciIsInVwZGF0ZVByb2dyZXNzSW5kaWNhdG9ycyIsIldFTENPTUUiLCJyZW5kZXJXZWxjb21lU3RlcCIsIkVOVklST05NRU5UX0RFVEVDVElPTiIsInJlbmRlckVudmlyb25tZW50U3RlcCIsIlBSRUZFUkVOQ0VTIiwicmVuZGVyUHJlZmVyZW5jZXNTdGVwIiwiVkFMSURBVElPTiIsInJlbmRlclZhbGlkYXRpb25TdGVwIiwiQ09NUExFVElPTiIsInJlbmRlckNvbXBsZXRpb25TdGVwIiwiZmVhdHVyZXMiLCJmZWF0dXJlTGlzdCIsInNraXBFbnZpcm9ubWVudERldGVjdGlvbiIsImRldGVjdGVkQ2FwYWJpbGl0aWVzIiwicmVuZGVyRW52aXJvbm1lbnRSZXN1bHRzIiwiZGV0ZWN0RW52aXJvbm1lbnQiLCJyZW5kZXJFbnZpcm9ubWVudEVycm9yIiwiZW52SW5mbyIsIndlYlNvY2tldFN1cHBvcnRlZCIsImZpbGVTeXN0ZW1BY2Nlc3MiLCJodHRwQ2FwYWJpbGl0aWVzIiwicmVjb21tZW5kZWRUcmFuc3BvcnQiLCJwZXJmb3JtYW5jZUVzdGltYXRlIiwiY2FwYWJpbGl0aWVzTGlzdCIsIndzQ2FwYWJpbGl0eSIsImh0dHBDYXBhYmlsaXR5IiwiZnNDYXBhYmlsaXR5IiwiZXJyb3JDb250YWluZXIiLCJwcmVmZXJlbmNlc0NvbnRhaW5lciIsInNraXBWYWxpZGF0aW9uIiwidmFsaWRhdGlvblJlc3VsdHMiLCJyZW5kZXJWYWxpZGF0aW9uUmVzdWx0cyIsInZhbGlkYXRlQ29uZmlndXJhdGlvbiIsInJlbmRlclZhbGlkYXRpb25FcnJvciIsInRyYW5zcG9ydHNXb3JraW5nIiwidHJhbnNwb3J0c0ZhaWxpbmciLCJyZWNvbW1lbmRlZENvbmZpZ3VyYXRpb24iLCJwZXJmb3JtYW5jZUJhc2VsaW5lIiwiYXZnUmVzcG9uc2VUaW1lIiwidGhyb3VnaHB1dCIsIndvcmtpbmdDb250YWluZXIiLCJ3b3JraW5nTGlzdCIsInBlcmZvcm1hbmNlQ29udGFpbmVyIiwicGVyZkxpc3QiLCJzdW1tYXJ5Iiwic3VtbWFyeUxpc3QiLCJuZXh0U3RlcHMiLCJuZXh0TGlzdCIsImVsZW1lbnQiLCJwcm9ncmVzc0ZpbGwiLCJidXR0b25FbCIsImZpbmlzaE9uYm9hcmRpbmciLCJjb25maXJtIiwic2tpcHBlZCIsImFwcGx5Q29uZmlndXJhdGlvbiIsIm9uYm9hcmRpbmdDb21wbGV0ZSIsImdldFNlbGVjdGlvbkNyaXRlcmlhRm9yTW9kZSIsImJ1aWxkRmFsbGJhY2tDaGFpbiIsIndlYlNvY2tldFVybCIsImJhc2VQYXRoIiwiY2hhaW4iLCJUcmFuc3BvcnREYXNoYm9hcmQiLCJDb21wb25lbnQiLCJ1cGRhdGVJbnRlcnZhbCIsInNob3dBZHZhbmNlZE1ldHJpY3MiLCJzdGF0dXNDYXJkcyIsImlzUmVhbFRpbWVFbmFibGVkIiwib25sb2FkIiwiaW5pdGlhbGl6ZURhc2hib2FyZCIsInN0YXJ0UmVhbFRpbWVVcGRhdGVzIiwidXBkYXRlRGFzaGJvYXJkIiwib251bmxvYWQiLCJzdG9wUmVhbFRpbWVVcGRhdGVzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJjcmVhdGVTeXN0ZW1IZWFsdGhTZWN0aW9uIiwiY3JlYXRlVHJhbnNwb3J0U3RhdHVzU2VjdGlvbiIsImNyZWF0ZVBlcmZvcm1hbmNlTWV0cmljc1NlY3Rpb24iLCJjcmVhdGVDaGFydHNTZWN0aW9uIiwiY3JlYXRlQ29udHJvbHNTZWN0aW9uIiwibGFzdFVwZGF0ZSIsInN5c3RlbUhlYWx0aENvbnRhaW5lciIsInJlbmRlclN5c3RlbUhlYWx0aFBsYWNlaG9sZGVyIiwiY2FyZHNDb250YWluZXIiLCJjYXJkIiwiY3JlYXRlVHJhbnNwb3J0Q2FyZCIsInJlc3BvbnNlVGltZSIsInN1Y2Nlc3NSYXRlIiwiZXJyb3JDb3VudCIsImFjdGlvbnMiLCJ0ZXN0VHJhbnNwb3J0Iiwic3dpdGNoVG9UcmFuc3BvcnQiLCJtZXRyaWNzQ29udGFpbmVyIiwicmVuZGVyUGVyZm9ybWFuY2VNZXRyaWNzUGxhY2Vob2xkZXIiLCJyZW5kZXJDaGFydHNQbGFjZWhvbGRlciIsImNvbnRyb2xzIiwibWFudWFsUmVmcmVzaCIsImV4cG9ydERhdGEiLCJvcGVuRGFzaGJvYXJkU2V0dGluZ3MiLCJyZWFsdGltZVRvZ2dsZSIsIm9uY2hhbmdlIiwidG9nZ2xlUmVhbFRpbWVVcGRhdGVzIiwiY3VycmVudEhlYWx0aCIsImdldFN5c3RlbUhlYWx0aCIsInJlbmRlclN5c3RlbUhlYWx0aCIsInVwZGF0ZVRyYW5zcG9ydFN0YXR1c2VzIiwiY3VycmVudE1ldHJpY3MiLCJnZXRQZXJmb3JtYW5jZU1ldHJpY3MiLCJyZW5kZXJQZXJmb3JtYW5jZU1ldHJpY3MiLCJ1cGRhdGVUaW1lc3RhbXAiLCJyZW5kZXJFcnJvciIsIm92ZXJhbGwiLCJsYXN0SGVhbHRoQ2hlY2siLCJzdGFydGVkIiwiZmxvb3IiLCJ0b3RhbEVycm9ycyIsImF2ZXJhZ2VSZXNwb25zZVRpbWUiLCJwOTVSZXNwb25zZVRpbWUiLCJyZXF1ZXN0c1Blck1pbnV0ZSIsInRyYW5zcG9ydERpc3RyaWJ1dGlvbiIsInRyZW5kcyIsImdlbmVyYXRlVHJlbmREYXRhIiwidGltZXN0YW1wcyIsImdlbmVyYXRlVGltZXN0YW1wcyIsImJhc2VsaW5lIiwidmFyaWFuY2UiLCJwb2ludHMiLCJnZXRUaW1lIiwic3VwcG9ydGVkVHJhbnNwb3J0cyIsImdldFRyYW5zcG9ydFN0YXR1cyIsInVwZGF0ZVRyYW5zcG9ydENhcmQiLCJpc0FjdGl2ZSIsImxhc3RSZXNwb25zZVRpbWUiLCJnZXRUcmFuc3BvcnRDYXBhYmlsaXRpZXMiLCJjb25uZWN0aW9uU3RhdGUiLCJsYXN0RXJyb3IiLCJjb25uZWN0aW9uRWwiLCJoZWFsdGhHcmlkIiwib3ZlcmFsbEhlYWx0aCIsImZvcm1hdFVwdGltZSIsInRvTG9jYWxlU3RyaW5nIiwicmF0ZSIsIm1ldHJpY3NHcmlkIiwiYXZnUmVzcG9uc2UiLCJwOTVSZXNwb25zZSIsInJwbSIsImRpc3RyaWJ1dGlvbiIsImRpc3RyaWJ1dGlvbkJhcnMiLCJwZXJjZW50YWdlIiwiYmFyIiwic2Vjb25kcyIsIm1pbnV0ZXMiLCJob3VycyIsImRheXMiLCJ0aW1lc3RhbXBFbCIsIm9uVHJhbnNwb3J0U3dpdGNoZWQiLCJvbkhlYWx0aENoYW5nZWQiLCJvbkVycm9yT2NjdXJyZWQiLCJwZXJmb3JtVHJhbnNwb3J0VGVzdCIsInN5c3RlbUhlYWx0aCIsInBlcmZvcm1hbmNlTWV0cmljcyIsImV4cG9ydGVkQnkiLCJibG9iIiwiQmxvYiIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImhyZWYiLCJkb3dubG9hZCIsInJldm9rZU9iamVjdFVSTCIsIkFkdmFuY2VkU2V0dGluZ3MiLCJzaG93RXhwZXJ0T3B0aW9ucyIsImVuYWJsZVJlYWxUaW1lVmFsaWRhdGlvbiIsImFsbG93SW1wb3J0RXhwb3J0IiwicHJvZmlsZXMiLCJoYXNVbnNhdmVkQ2hhbmdlcyIsImN1cnJlbnRDb25maWd1cmF0aW9uIiwiZ2V0RGVmYXVsdENvbmZpZ3VyYXRpb24iLCJsb2FkUHJvZmlsZXMiLCJpbml0aWFsaXplSW50ZXJmYWNlIiwibG9hZEN1cnJlbnRDb25maWd1cmF0aW9uIiwicmVuZGVyU2V0dGluZ3MiLCJzdGFydFJlYWxUaW1lVmFsaWRhdGlvbiIsInZhbGlkYXRpb25UaW1lb3V0Iiwic2F2ZUNvbmZpZ3VyYXRpb24iLCJjcmVhdGVQcm9maWxlTWFuYWdlbWVudCIsImNyZWF0ZVZhbGlkYXRpb25TZWN0aW9uIiwiY3JlYXRlQ29uZmlndXJhdGlvblNlY3Rpb25zIiwiY3JlYXRlUHJldmlld1NlY3Rpb24iLCJjcmVhdGVBY3Rpb25CdXR0b25zIiwiZXhwZXJ0TGFiZWwiLCJleHBlcnRDaGVja2JveCIsInVwZGF0ZUV4cGVydE9wdGlvbnNWaXNpYmlsaXR5IiwicHJvZmlsZUNvbnRyb2xzIiwic2VsZWN0b3JDb250YWluZXIiLCJwcm9maWxlU2VsZWN0b3IiLCJ1cGRhdGVQcm9maWxlU2VsZWN0b3IiLCJsb2FkUHJvZmlsZSIsInByb2ZpbGVBY3Rpb25zIiwic2hvd1NhdmVQcm9maWxlTW9kYWwiLCJkZWxldGVDdXJyZW50UHJvZmlsZSIsImltcG9ydENvbmZpZ3VyYXRpb24iLCJleHBvcnRDb25maWd1cmF0aW9uIiwidmFsaWRhdGlvbkNvbnRhaW5lciIsInJlbmRlclZhbGlkYXRpb25QbGFjZWhvbGRlciIsImNvbmZpZ3VyYXRpb25Db250YWluZXIiLCJjcmVhdGVUcmFuc3BvcnRTZXR0aW5ncyIsImNyZWF0ZVBlcmZvcm1hbmNlU2V0dGluZ3MiLCJjcmVhdGVNb25pdG9yaW5nU2V0dGluZ3MiLCJjcmVhdGVVSVNldHRpbmdzIiwiY3JlYXRlUHJpdmFjeVNldHRpbmdzIiwic2V0dGluZ3NDb250YWluZXIiLCJwcmltYXJ5VHJhbnNwb3J0Iiwib25Db25maWd1cmF0aW9uQ2hhbmdlIiwiY3JlYXRlRmFsbGJhY2tDaGFpbkNvbmZpZyIsImNyZWF0ZVNlbGVjdGlvbkNyaXRlcmlhQ29uZmlnIiwiY3JlYXRlVGltZW91dENvbmZpZyIsImNyZWF0ZVJldHJ5UG9saWN5Q29uZmlnIiwiZmFsbGJhY2tDb250YWluZXIiLCJjb250cm9sRWwiLCJjaGFpbkRpc3BsYXkiLCJ1cGRhdGVGYWxsYmFja0NoYWluRGlzcGxheSIsImFkZEJ1dHRvbnMiLCJpdGVtIiwiY3JpdGVyaWFDb250YWluZXIiLCJub3JtYWxpemVTZWxlY3Rpb25Dcml0ZXJpYSIsInRpbWVvdXRDb250YWluZXIiLCJ0aW1lb3V0cyIsImNvbm5lY3Rpb24iLCJwYXJzZWQiLCJpc05hTiIsInJldHJ5Q29udGFpbmVyIiwicmV0cnkiLCJyZXRyeVBvbGljeSIsIm1heEF0dGVtcHRzIiwiYmFja29mZk11bHRpcGxpZXIiLCJwZXJmb3JtYW5jZSIsImFwcGx5UGVyZm9ybWFuY2VNb2RlUHJlc2V0IiwiZW5hYmxlQ29ubmVjdGlvblBvb2xpbmciLCJlbmFibGVDb21wcmVzc2lvbiIsImVuYWJsZUNhY2hpbmciLCJtYXhDb25jdXJyZW50UmVxdWVzdHMiLCJjYWNoZVNpemUiLCJtb25pdG9yaW5nIiwiZW5hYmxlSGVhbHRoQ2hlY2tzIiwiZW5hYmxlTWV0cmljcyIsImVuYWJsZVByZWRpY3RpdmVBbGVydHMiLCJ1aSIsInRoZW1lIiwiZW5hYmxlQW5pbWF0aW9ucyIsImRhc2hib2FyZFJlZnJlc2hSYXRlIiwicHJpdmFjeSIsImRhdGFSZXRlbnRpb25EYXlzIiwicHJldmlld0NvbnRhaW5lciIsInVwZGF0ZVByZXZpZXciLCJyZXNldFRvRGVmYXVsdHMiLCJ0ZXN0Q29uZmlndXJhdGlvbiIsImFkdmFuY2VkQ29uZmlndXJhdGlvbiIsIm1heEJhY2tvZmZUaW1lIiwibWV0cmljc1JldGVudGlvbiIsImVuYWJsZU5vdGlmaWNhdGlvbnMiLCJzaGFyZVVzYWdlRGF0YSIsInNjaGVkdWxlVmFsaWRhdGlvbiIsIndhcm5pbmdzIiwiZmllbGQiLCJzZXZlcml0eSIsInRvdGFsV2VpZ2h0IiwiYWJzIiwiaW1wYWN0IiwiZXN0aW1hdGVkSW1wYWN0IiwiZXN0aW1hdGVDb25maWd1cmF0aW9uSW1wYWN0IiwiaXNWYWxpZCIsInZhbGlkYXRpb25SZXN1bHQiLCJyZW5kZXJWYWxpZGF0aW9uUmVzdWx0IiwicGVyZm9ybWFuY2VDaGFuZ2UiLCJyZWxpYWJpbGl0eUNoYW5nZSIsInJlc291cmNlVXNhZ2UiLCJlcnJvckVsIiwid2FybmluZyIsIndhcm5pbmdFbCIsImltcGFjdEVsIiwiaW1wYWN0R3JpZCIsInBlcmZJbXBhY3QiLCJyZWxpYWJpbGl0eUltcGFjdCIsInJlc291cmNlSW1wYWN0IiwicGVyZiIsImVsIiwicHJvZmlsZSIsInNhdmVkUHJvZmlsZXMiLCJjb25maWd1cmF0aW9uUHJvZmlsZXMiLCJwIiwiY3JlYXRlZCIsImxhc3RNb2RpZmllZCIsInByb2ZpbGVJZCIsImZpbmQiLCJwcm9tcHQiLCJzYXZlQXNQcm9maWxlIiwiaXNEZWZhdWx0Iiwic2F2ZVByb2ZpbGVzIiwiY3VycmVudFByb2ZpbGVJZCIsInRlc3RSZXN1bHQiLCJjb25maWd1cmF0aW9uIiwiaW5wdXQiLCJhY2NlcHQiLCJ0YXJnZXQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzVGV4dCIsIlJlY29tbWVuZGF0aW9uRW5naW5lIiwicGVyZm9ybWFuY2VIaXN0b3J5IiwiYmVoYXZpb3JQYXR0ZXJucyIsImFwcGxpZWRSZWNvbW1lbmRhdGlvbnMiLCJpbnNpZ2h0Q2FjaGUiLCJwcmVkaWN0aW9uTW9kZWxzIiwiQU5BTFlTSVNfV0lORE9XIiwiTUlOX0RBVEFfUE9JTlRTIiwiQ09ORklERU5DRV9USFJFU0hPTEQiLCJpbml0aWFsaXplUHJlZGljdGlvbk1vZGVscyIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25zIiwicmVjb21tZW5kYXRpb25zIiwib3Bwb3J0dW5pdGllcyIsImFuYWx5emVPcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzIiwidHJhbnNwb3J0UmVjcyIsImdlbmVyYXRlVHJhbnNwb3J0UmVjb21tZW5kYXRpb25zIiwicGVyZm9ybWFuY2VSZWNzIiwiZ2VuZXJhdGVQZXJmb3JtYW5jZVJlY29tbWVuZGF0aW9ucyIsImNvbmZpZ1JlY3MiLCJnZW5lcmF0ZUNvbmZpZ3VyYXRpb25SZWNvbW1lbmRhdGlvbnMiLCJtYWludGVuYW5jZVJlY3MiLCJnZW5lcmF0ZU1haW50ZW5hbmNlUmVjb21tZW5kYXRpb25zIiwic29ydGVkUmVjb21tZW5kYXRpb25zIiwicHJpb3JpdGl6ZVJlY29tbWVuZGF0aW9ucyIsInJlYyIsImFyZWEiLCJlZmZvcnQiLCJjdXJyZW50VmFsdWUiLCJwb3RlbnRpYWxWYWx1ZSIsImltcHJvdmVtZW50IiwidHJhbnNwb3J0VXNhZ2UiLCJtYXhVc2FnZSIsIm1pblVzYWdlIiwib3B0aW1hbFRyYW5zcG9ydCIsImRldGVybWluZU9wdGltYWxUcmFuc3BvcnQiLCJjdXJyZW50VHJhbnNwb3J0IiwiVFJBTlNQT1JUX09QVElNSVpBVElPTiIsInJhdGlvbmFsZSIsImdlbmVyYXRlVHJhbnNwb3J0U3dpdGNoUmF0aW9uYWxlIiwiZXhwZWN0ZWRJbXBhY3QiLCJwZXJmb3JtYW5jZUltcHJvdmVtZW50IiwiZXJyb3JSZWR1Y3Rpb24iLCJyZWxpYWJpbGl0eUltcHJvdmVtZW50IiwiY29uZmlkZW5jZVNjb3JlIiwiaW1wbGVtZW50YXRpb24iLCJkaWZmaWN1bHR5IiwiZXN0aW1hdGVkVGltZSIsInN0ZXBzIiwiYWN0aW9uIiwicmV2ZXJzaWJsZSIsInJpc2tMZXZlbCIsImNhdGVnb3J5IiwidGFncyIsIlBFUkZPUk1BTkNFX1RVTklORyIsIkNPTkZJR1VSQVRJT05fSU1QUk9WRU1FTlQiLCJoZWFsdGhNb25pdG9yaW5nUmVjb21tZW5kYXRpb24iLCJQUk9BQ1RJVkVfTUFJTlRFTkFOQ0UiLCJlbnZpcm9ubWVudENvbnRleHQiLCJiZWhhdmlvciIsInVzZXJCZWhhdmlvciIsInNjb3JlcyIsImNvbm5lY3Rpdml0eSIsInBlcmZvcm1hbmNlU2Vuc2l0aXZpdHkiLCJ1c2FnZUZyZXF1ZW5jeSIsImVycm9yVG9sZXJhbmNlIiwiY3VycmVudCIsInByaW9yaXR5T3JkZXIiLCJjcml0aWNhbCIsImhpZ2giLCJtZWRpdW0iLCJsb3ciLCJwcmlvcml0eURpZmYiLCJpbXBhY3RBIiwiZ2VuZXJhdGVJbnNpZ2h0cyIsImNhY2hlS2V5IiwiZ2VuZXJhdGVJbnNpZ2h0Q2FjaGVLZXkiLCJwZXJmb3JtYW5jZUluc2lnaHRzIiwiZ2VuZXJhdGVQZXJmb3JtYW5jZUluc2lnaHRzIiwidXNhZ2VJbnNpZ2h0cyIsImdlbmVyYXRlVXNhZ2VJbnNpZ2h0cyIsInRyYW5zcG9ydEluc2lnaHRzIiwiZ2VuZXJhdGVUcmFuc3BvcnRJbnNpZ2h0cyIsImFjdGlvbmFibGUiLCJyZWxhdGVkIiwiZ2V0VXNhZ2VGcmVxdWVuY3lBZHZpY2UiLCJmcmVxdWVuY3kiLCJwZWFrVXNhZ2VIb3VycyIsInBlYWtIb3VycyIsInVzYWdlIiwidG90YWxVc2FnZSIsImRvbWluYW50VHJhbnNwb3J0IiwiZG9taW5hbnRQZXJjZW50YWdlIiwiZG9taW5hbnQiLCJnZW5lcmF0ZVByZWRpY3RpdmVBbGVydHMiLCJhbGVydHMiLCJwZXJmb3JtYW5jZVRyZW5kIiwiYW5hbHl6ZVBlcmZvcm1hbmNlVHJlbmQiLCJkZWNsaW5pbmciLCJwcm9iYWJpbGl0eSIsInByZXZlbnRpdmVBY3Rpb25zIiwidHJpZ2dlcnMiLCJyZWNlbnRMYXRlbmN5IiwicmVjZW50RXJyb3JSYXRlIiwic2Vzc2lvbklkIiwidHJhaW5lZCIsInRyYWNrUmVjb21tZW5kYXRpb25FZmZlY3RpdmVuZXNzIiwicmVjb21tZW5kYXRpb25JZCIsImVmZmVjdGl2ZW5lc3MiLCJhcHBsaWVkQXQiLCJnZXRSZWNvbW1lbmRhdGlvblN0YXRzIiwiYXBwbGllZCIsInIiLCJieVR5cGUiLCJhdmVyYWdlRWZmZWN0aXZlbmVzcyIsIlBoYXNlM0ludGVncmF0aW9uIiwiZW5hYmxlT25ib2FyZGluZyIsImVuYWJsZURhc2hib2FyZCIsImVuYWJsZVJlY29tbWVuZGF0aW9ucyIsImVuYWJsZUFkdmFuY2VkU2V0dGluZ3MiLCJhdXRvU2hvd09uYm9hcmRpbmciLCJyZWNvbW1lbmRhdGlvbkVuZ2luZSIsInJlZ2lzdGVyQ29tbWFuZHMiLCJzZXR1cENvbXBvbmVudHMiLCJzaG93T25ib2FyZGluZyIsInN0YXJ0UmVjb21tZW5kYXRpb25FbmdpbmUiLCJjbGVhbnVwIiwiYWRkQ29tbWFuZCIsInNob3dEYXNoYm9hcmQiLCJzaG93QWR2YW5jZWRTZXR0aW5ncyIsInNob3dSZWNvbW1lbmRhdGlvbnMiLCJxdWlja09wdGltaXplIiwibG9hZFBoYXNlM1N0eWxlcyIsInNldHVwRGFzaGJvYXJkIiwic2V0dXBBZHZhbmNlZFNldHRpbmdzIiwib25ib2FyZGluZ1dpemFyZCIsIm9wZW4iLCJEYXNoYm9hcmRNb2RhbCIsIkFkdmFuY2VkU2V0dGluZ3NNb2RhbCIsImJ1aWxkUmVjb21tZW5kYXRpb25Db250ZXh0IiwiUmVjb21tZW5kYXRpb25zTW9kYWwiLCJxdWlja1JlY3MiLCJzb21lIiwiYXBwbHlSZWNvbW1lbmRhdGlvbiIsInRpbWVXaW5kb3ciLCJwcmVmZXJyZWRGZWF0dXJlcyIsImJhbmR3aWR0aCIsInN0YWJpbGl0eSIsImF1dG9TdGVwcyIsImdlbmVyYXRlQmFja2dyb3VuZFJlY29tbWVuZGF0aW9ucyIsImNyaXRpY2FsUmVjcyIsInRyYW5zcG9ydERhc2hib2FyZCIsInVubG9hZCIsImFkdmFuY2VkU2V0dGluZ3MiLCJzaG93T25ib2FyZGluZ0lmTmVlZGVkIiwiZ2V0UmVjb21tZW5kYXRpb25FbmdpbmUiLCJyZWZyZXNoRGFzaGJvYXJkIiwiZGFzaGJvYXJkIiwibG9hZCIsImVuZ2luZSIsInJlY3NMaXN0IiwicmVuZGVyUmVjb21tZW5kYXRpb24iLCJmb290ZXIiLCJyZWNFbCIsImltcGFjdExpc3QiLCJpbXBsIiwic3RlcEVsIiwiYXBwbHlCdG4iLCJyYXRpb25hbGVUb2dnbGUiLCJyYXRpb25hbGVDb250ZW50IiwiUHJvZ3Jlc3NJbmRpY2F0b3JVSSIsImFjdGl2ZVByb2dyZXNzIiwiaW5pdGlhbGl6ZUNvbnRhaW5lciIsImNzc1RleHQiLCJzaG93UHJvZ3Jlc3MiLCJyZW5kZXJQcm9ncmVzcyIsImhpZGVQcm9ncmVzcyIsInVwZGF0ZVByb2dyZXNzIiwidXBkYXRlcyIsImV4aXN0aW5nIiwidXBkYXRlZCIsImFuaW1hdGlvbiIsInVwZGF0ZVByb2dyZXNzRWxlbWVudCIsImNyZWF0ZVByb2dyZXNzRWxlbWVudCIsImV0YSIsImZvcm1hdEVUQSIsImNhbmNlbGFibGUiLCJyb3VuZCIsImNhbmNlbEJ0biIsInRyaWdnZXIiLCJnZXRBY3RpdmVQcm9ncmVzcyIsImNsZWFyQWxsUHJvZ3Jlc3MiLCJrZXlzIiwiUmVzcG9uc2VUaW1lT3B0aW1pemVyIiwiY2FjaGUiLCJyZXF1ZXN0UXVldWUiLCJtYXhDYWNoZVNpemUiLCJkZWZhdWx0VFRMIiwiaW5pdGlhbGl6ZU1ldHJpY3MiLCJzdGFydENsZWFudXBJbnRlcnZhbCIsImNhY2hlSGl0cyIsImNhY2hlTWlzc2VzIiwic2xvd2VzdFJlc3BvbnNlIiwiZmFzdGVzdFJlc3BvbnNlIiwiY3VycmVudENhY2hlU2l6ZSIsIm1lbW9yeVVzYWdlIiwib3B0aW1pemVkUmVxdWVzdCIsImtleV8xIiwicmVxdWVzdEZuXzEiLCJyZXF1ZXN0Rm4iLCJza2lwQ2FjaGUiLCJnZXRGcm9tQ2FjaGUiLCJ1cGRhdGVSZXNwb25zZVRpbWVNZXRyaWNzIiwiZXhpc3RpbmdSZXF1ZXN0IiwicmVxdWVzdFByb21pc2UiLCJleGVjdXRlUmVxdWVzdCIsInR0bCIsInNldENhY2hlIiwiZW50cnkiLCJoaXRDb3VudCIsImV2aWN0TGVhc3RVc2VkIiwiZXN0aW1hdGVTaXplIiwidXBkYXRlQ2FjaGVNZXRyaWNzIiwibGVhc3RVc2VkS2V5IiwibGVhc3RVc2VkQ291bnQiLCJjdXJyZW50QXZnIiwiY2xlYW51cEV4cGlyZWRFbnRyaWVzIiwiZ2V0Q2FjaGVIaXRSYXRlIiwiY2xlYXJDYWNoZSIsInNldENhY2hlQ29uZmlnIiwiV2ViU29ja2V0SGFuZGxlciIsInJlY29ubmVjdEludGVydmFsIiwibWVzc2FnZUhhbmRsZXJzIiwic2V0dXBNZXNzYWdlSGFuZGxlcnMiLCJlbmhhbmNlbWVudE1hbmFnZXIiLCJwcm9ncmVzc0luZGljYXRvciIsInN0YXJ0UmVjb25uZWN0IiwiaXNTb2NrZXRDb25uZWN0ZWQiLCJWYXVsdFBpbG90RW5oYW5jZW1lbnRNYW5hZ2VyIiwiaXNJbml0aWFsaXplZCIsInJlc3BvbnNlT3B0aW1pemVyIiwid2ViU29ja2V0SGFuZGxlciIsImFkZENoaWxkIiwib3B0aW1pemVkQVBJQ2FsbCIsIktleWJvYXJkU2hvcnRjdXRIYW5kbGVyIiwic2hvcnRjdXRzIiwiY29udGV4dE1lbnVFbmFibGVkIiwiaW5pdGlhbGl6ZURlZmF1bHRTaG9ydGN1dHMiLCJtb2RpZmllcnMiLCJjb21tYW5kIiwic2hvcnRjdXQiLCJhZGRTaG9ydGN1dCIsImdldFNob3J0Y3V0S2V5IiwicmVtb3ZlU2hvcnRjdXQiLCJoYW5kbGVLZXlEb3duIiwiY3RybEtleSIsImFsdEtleSIsIm1ldGFLZXkiLCJzaG9ydGN1dEtleSIsImdldEN1cnJlbnRDb250ZXh0IiwiaXNTaG9ydGN1dFZhbGlkRm9yQ29udGV4dCIsInN0b3BQcm9wYWdhdGlvbiIsImV4ZWN1dGVDb21tYW5kIiwiY29tbWFuZElkIiwicXVpY2tDaGF0V2l0aFNlbGVjdGlvbiIsImFjdGl2ZUVkaXRvciIsIm9wZW5WYXVsdFN0cnVjdHVyZU1vZGFsIiwib3BlbkZpbGVPcGVyYXRpb25zTW9kYWwiLCJvcGVuVmF1bHRPcmdhbml6ZXJNb2RhbCIsIm9wZW5CYXRjaE9wZXJhdGlvbnNNb2RhbCIsInNob3dTaG9ydGN1dHNIZWxwIiwicmVmcmVzaENhY2hlIiwic2hvd1BlcmZvcm1hbmNlTWV0cmljcyIsIm9wZW5BZ2VudE1hcmtldHBsYWNlIiwic2hvd0FnZW50RXZvbHV0aW9uIiwiY3JlYXRlUXVpY2tOb3RlIiwiaW5zZXJ0VGVtcGxhdGUiLCJhbmFseXplTGlua3MiLCJvcGVuVGFnTWFuYWdlciIsIm9wZW5FbmhhbmNlbWVudERlbW8iLCJnZW5lcmF0ZVNob3J0Y3V0c0hlbHBDb250ZW50IiwibW9kYWwiLCJ0aXRsZUVsIiwiY2F0ZWdvcml6ZWQiLCJjYXRlZ29yaXplU2hvcnRjdXRzIiwiaHRtbCIsImNhdGVnb3J5U2hvcnRjdXRzIiwia2V5Q29tYm8iLCJjYXRlZ29yaWVzIiwiU3lzdGVtIiwidGhlbiIsImdldExlYWYiLCJvcGVuRmlsZSIsImVuaGFuY2VtZW50RGVtbyIsIlZhdWx0UGlsb3RFbmhhbmNlbWVudERlbW8iLCJnZXRTaG9ydGN1dHMiLCJpc0VuYWJsZWQiLCJzZXRFbmFibGVkIiwiRW5oYW5jZWRDb21tYW5kc0ZhY3RvcnkiLCJjcmVhdGVFbmhhbmNlZENvbW1hbmRzIiwiZWRpdG9yQ2FsbGJhY2siLCJWYXVsdFBpbG90UGx1Z2luIiwiUGx1Z2luIiwid2Vic29ja2V0Q29ubmVjdGVkIiwiY29waWxvdEVuYWJsZWQiLCJhcHBJbnN0YW5jZSIsImxvYWRTZXR0aW5ncyIsImxvYWRFbmhhbmNlZFVJU3R5bGVzIiwicmVnaXN0ZXJWaWV3IiwicmliYm9uSWNvbkVsIiwiYWRkUmliYm9uSWNvbiIsImV2dCIsInBsYW5UYXNrc0Zyb21Ob3RlIiwiZGVidWdQbGFuTXlEYXkiLCJ0ZXN0TW9kZWxTZWxlY3Rpb24iLCJzaG93TW9kZWxIZWFsdGgiLCJyZXRyeU1vZGVsU2VsZWN0aW9uTWFudWFsIiwiY2hlY2tTZXJ2aWNlU3RhdHVzIiwicmVnaXN0ZXJWYXVsdE1hbmFnZW1lbnRDb21tYW5kcyIsImluaXRpYWxpemVQaGFzZTMiLCJpbml0aWFsaXplRW5oYW5jZW1lbnRNYW5hZ2VyIiwicmVnaXN0ZXJEb21FdmVudCIsImhhbmRsZUtleVVwIiwiYmluZCIsImFkZFNldHRpbmdUYWIiLCJkZXRhY2hMZWF2ZXNPZlR5cGUiLCJkaXNhYmxlUGhhc2UzIiwiZGlzYWJsZUVuaGFuY2VtZW50TWFuYWdlciIsImhhbmRsZUNvcGlsb3RTdWdnZXN0aW9uIiwiZmlsZUNvbnRlbnQiLCJhbmFseXNpc190eXBlIiwiYW5hbHlzaXNDb250ZW50IiwiYW5hbHlzaXMiLCJpbnNpZ2h0IiwiY3Vyc29yIiwiZ2V0Q3Vyc29yIiwidGV4dEJlZm9yZUN1cnNvciIsImdldExpbmUiLCJsaW5lIiwic3Vic3RyaW5nIiwiY2giLCJmdWxsVGV4dCIsImdldFZhbHVlIiwiY3Vyc29yX3Bvc2l0aW9uIiwicG9zVG9PZmZzZXQiLCJmaWxlX3R5cGUiLCJyZXBsYWNlUmFuZ2UiLCJjb21wbGV0aW9uIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwibmV3TGluZSIsInRhc2tDb250ZW50IiwiZXN0aW1hdGVkX2R1cmF0aW9uIiwidGFzayIsImNoZWNrYm94IiwiZXN0aW1hdGVkX3RpbWUiLCJtaWxlc3RvbmVzIiwibWlsZXN0b25lIiwidGFyZ2V0X2RhdGUiLCJleHRlbnNpb24iLCJmaWxlVGV4dCIsImhhc0NvbnRlbnQiLCJmaXJzdExpbmUiLCJsaW5lQ291bnQiLCJzY2hlZHVsZU1hcmtkb3duIiwiaGVhZGxpbmUiLCJub3RlVGV4dCIsImFjdHVhbERhdGEiLCJwbGFuS2V5cyIsImhhc1Rhc2tzIiwidGltZU1hdGNoIiwibWFya2Rvd25MZW5ndGgiLCJmZXRjaFNjaGVkdWxlIiwidHJpbW1lZExlbmd0aCIsImlzU3RyaW5nIiwidmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duIiwiZXhpc3RpbmdQbGFuU2VjdGlvbiIsImV4aXN0aW5nU2NoZWR1bGVTZWN0aW9uIiwiaGFzUGxhbldyYXBwZXIiLCJoYXNTY2hlZHVsZVNlY3Rpb24iLCJwbGFuQ29udGVudCIsInNjaGVkdWxlSGVhZGluZyIsInVwZGF0ZWRUZXh0Iiwib3JpZ2luYWxUZXh0Iiwib3JpZ2luYWxMZW5ndGgiLCJzY2hlZHVsZUxlbmd0aCIsImhhc09yaWdpbmFsQ29udGVudCIsInBsYW5NYXRjaCIsInN0YXJ0Q29tbWVudCIsImNvbnRlbnRMZW5ndGgiLCJlbmRDb21tZW50IiwiZnVsbE1hdGNoIiwicmVwbGFjZW1lbnQiLCJzY2hlZHVsZU1hdGNoIiwiaGVhZGluZ01hdGNoIiwiY29udGVudE1hdGNoIiwiaGVhZGluZyIsImluamVjdFNjaGVkdWxlIiwidXBkYXRlZExlbmd0aCIsImNoYW5nZWQiLCJtb2RpZnkiLCJzdWNjZXNzTWVzc2FnZSIsImhhc0FjdGl2ZUZpbGUiLCJmaWxlTmFtZSIsImZpbGVFeHRlbnNpb24iLCJhcGlBbmFseXNpcyIsImNvbm5lY3Rpb25UZXN0IiwicGxhbm5pbmdUZXN0IiwiaGFzQXBpS2V5IiwibG9nU3VtbWFyeSIsImRlYnVnQ29udGVudCIsImxlYXZlcyIsImdldExlYXZlc09mVHlwZSIsInJpZ2h0TGVhZiIsImdldFJpZ2h0TGVhZiIsInNldFZpZXdTdGF0ZSIsInJldmVhbExlYWYiLCJuZXdMZWFmIiwiY2hlY2tWYXVsdE1hbmFnZW1lbnRBdmFpbGFiaWxpdHkiLCJBdXRob3JpemF0aW9uIiwic2VhcmNoVGVzdCIsImluY2x1ZGVfc2V0dGluZ3MiLCJiYWNrdXBfbmFtZSIsImZpbGVzX2JhY2tlZF91cCIsImJhY2t1cF9zaXplIiwiYmFja3VwX3BhdGgiLCJwaGFzZTNJbnRlZ3JhdGlvbiIsImtleWJvYXJkSGFuZGxlciIsImNoZWNrQ2FsbGJhY2siLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUiLCJhdXRvQ29tcGxldGVUaW1lb3V0IiwidHJpZ2dlckF1dG9Db21wbGV0aW9uIiwiY3VycmVudExpbmUiLCJsYXN0Q2hhciIsImxhc3RBdXRvQ29tcGxldGVSZXF1ZXN0IiwibG9hZERhdGEiLCJzYXZlRGF0YSIsIm1vZGVsU2VsZWN0aW9uU2VydmljZSIsInJldHJ5TW9kZWxTZWxlY3Rpb25Jbml0IiwiYXR0ZW1wdCIsImRlbGF5IiwicmVzdWx0VGV4dCIsImhlYWx0aEluZm8iLCJoIiwibW9kZWxfaWQiLCJyZXNwb25zZV90aW1lIiwiYXZhaWxhYmlsaXR5X3BlcmNlbnRhZ2UiLCJnZXRCZXN0TW9kZWxGb3JUYXNrIiwic3R5bGVJZCIsImV4aXN0aW5nU3R5bGUiLCJjcmVhdGVLZXlib2FyZFNob3J0Y3V0c0RlbW8iLCJjcmVhdGVQcm9ncmVzc0luZGljYXRvckRlbW8iLCJjcmVhdGVQZXJmb3JtYW5jZURlbW8iLCJjcmVhdGVXZWJTb2NrZXREZW1vIiwiaGVscE1vZGFsIiwibWF4SGVpZ2h0Iiwib3ZlcmZsb3dZIiwiYnV0dG9uc0RpdiIsImRlbW9RdWlja1Byb2dyZXNzIiwiZGVtb0xvbmdQcm9ncmVzcyIsImRlbW9NdWx0aXBsZVByb2dyZXNzIiwiZGVtb0NhY2hpbmciLCJzdGF0dXNEaXYiLCJwcm9ncmVzc0lkIiwic3RhZ2VzIiwibXNnIiwiZHVyYXRpb24iLCJjdXJyZW50U3RhZ2UiLCJ0b3RhbFByb2dyZXNzIiwicnVuU3RhZ2UiLCJzdGFnZSIsInN0YWdlUHJvZ3Jlc3MiLCJ0ZXN0RW5kcG9pbnQiLCJzdGFydDEiLCJ0aW1lMSIsInN0YXJ0MiIsInRpbWUyIiwiY2FjaGVIaXRSYXRlIl0sIm1hcHBpbmdzIjoiNFhBT08sTUFBTUEsRUFBNkQsQ0FDeEVDLHVCQUF1QixFQUN2QkMsd0JBQXdCLEVBQ3hCQyxtQkFBb0IsR0FDcEJD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
