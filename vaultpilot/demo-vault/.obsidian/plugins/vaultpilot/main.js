"use strict";var t=require("obsidian");function e(t,e,n,i){return new(n||(n=Promise))(function(o,a){function s(t){try{r(i.next(t))}catch(t){a(t)}}function l(t){try{r(i.throw(t))}catch(t){a(t)}}function r(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,l)}r((i=i.apply(t,e||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const n={backendUrl:"http://localhost:8000",apiKey:"",enableWebSocket:!0,enableCopilot:!0,enableAutoComplete:!1,defaultAgent:"",defaultMode:"ask",chatHistoryLimit:100,debugMode:!1,showIntentDebug:!1};class i extends t.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"VaultPilot Settings"}),n.createEl("p",{text:"Configure your connection to EvoAgentX backend and AI features."}),n.createEl("h3",{text:"Connection"}),new t.Setting(n).setName("Backend URL").setDesc("URL of EvoAgentX backend server").addText(t=>t.setPlaceholder("http://localhost:8000").setValue(this.plugin.settings.backendUrl).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.backendUrl=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("API Key").setDesc("Optional API key for authentication (if required by backend)").addText(t=>t.setPlaceholder("Enter API key...").setValue(this.plugin.settings.apiKey||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.apiKey=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Connection Test").setDesc("Test connection to EvoAgentX backend").addButton(t=>t.setButtonText("Test Connection").onClick(()=>e(this,void 0,void 0,function*(){yield this.testConnection()}))),n.createEl("h3",{text:"Features"}),new t.Setting(n).setName("Enable WebSocket").setDesc("Enable real-time communication for live updates and progress tracking").addToggle(t=>t.setValue(this.plugin.settings.enableWebSocket).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableWebSocket=t,yield this.plugin.saveSettings(),t?this.plugin.connectWebSocket():this.plugin.disconnectWebSocket()}))),new t.Setting(n).setName("Enable Copilot").setDesc("Enable AI-powered text completion and suggestions").addToggle(t=>t.setValue(this.plugin.settings.enableCopilot).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableCopilot=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Enable Auto-Complete").setDesc("Automatically suggest completions after sentence endings and new lines (with 10s cooldown)").addToggle(t=>t.setValue(this.plugin.settings.enableAutoComplete).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.enableAutoComplete=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Agent Configuration"}),new t.Setting(n).setName("Default Agent").setDesc("Default agent to use for chat and workflows (leave empty for auto-selection)").addText(t=>t.setPlaceholder("Agent ID or name...").setValue(this.plugin.settings.defaultAgent||"").onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultAgent=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Default Chat Mode").setDesc("Default mode for new chat sessions: Ask for simple Q&A, Agent for complex workflows").addDropdown(t=>t.addOption("ask","Ask Mode - Simple Q&A").addOption("agent","Agent Mode - Complex Workflows").setValue(this.plugin.settings.defaultMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.defaultMode=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Chat History Limit").setDesc("Maximum number of chat messages to keep in history").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.chatHistoryLimit).setDynamicTooltip().onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.chatHistoryLimit=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Advanced"}),new t.Setting(n).setName("Debug Mode").setDesc("Enable debug logging and additional developer features").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.debugMode=t,yield this.plugin.saveSettings()}))),new t.Setting(n).setName("Show Intent Debug Overlay").setDesc("Display automatic intent detection in chat (Ask vs Agent mode)").addToggle(t=>t.setValue(this.plugin.settings.showIntentDebug).onChange(t=>e(this,void 0,void 0,function*(){this.plugin.settings.showIntentDebug=t,yield this.plugin.saveSettings()}))),n.createEl("h3",{text:"Information"});n.createEl("div",{cls:"setting-item-description"}).innerHTML="\n      <p><strong>VaultPilot v1.0.0</strong></p>\n      <p>Comprehensive EvoAgentX integration for Obsidian</p>\n      <p>Features: AI Chat, Copilot, Workflows, Vault Analysis, Task Planning</p>\n      <p>For help and documentation, visit the GitHub repository.</p>\n    "}testConnection(){return e(this,void 0,void 0,function*(){var e;const n=new t.Notice("Testing connection...",0);try{let i=yield this.plugin.apiClient.healthCheck();if(!i.success&&(null===(e=i.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(i={success:!0,data:{status:t.data.status,version:"unknown"}})}n.hide(),i.success?new t.Notice("‚úÖ Connection successful!",3e3):new t.Notice(`‚ùå Connection failed: ${i.error}`,5e3)}catch(e){n.hide(),new t.Notice(`‚ùå Connection error: ${e instanceof Error?e.message:"Unknown error"}`,5e3)}})}}const o="vaultpilot-view";class a extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return o}getDisplayText(){return"VaultPilot"}getIcon(){return"bot"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-view");const e=t.createEl("div",{cls:"vaultpilot-header"});e.createEl("h2",{text:"ü§ñ VaultPilot"}),e.createEl("p",{text:"Your AI assistant for Obsidian",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats();const n=t.createEl("div",{cls:"vaultpilot-activities"});n.createEl("h3",{text:"Recent Activities"}),n.createEl("p",{text:"Activity tracking coming soon...",cls:"vaultpilot-placeholder"}),this.addStyles()})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=t.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"üü¢ Connected":"üî¥ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="üü¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="üî¥ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="üî¥ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const e=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});e.createEl("button",{text:"üí¨ Open Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();e.createEl("button",{text:"üìä Open Dashboard",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateFullTabView();e.createEl("button",{text:"‚öôÔ∏è Execute Workflow",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal();e.createEl("button",{text:"üîç Analyze Vault",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.analyzeVault();e.createEl("button",{text:"‚ú® Get Completion",cls:"vaultpilot-action-button"}).onclick=()=>{const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);e?this.plugin.getCopilotCompletion(e.editor):new t.Notice("No active editor found")};this.quickActionsEl.createEl("button",{text:"üîÑ Refresh Status",cls:"vaultpilot-refresh-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()}}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})}),this.loadAgentInfo()}loadAgentInfo(){return e(this,void 0,void 0,function*(){try{const t=yield this.plugin.apiClient.getAgents();if(t.success&&t.data){const e=t.data.length,n=t.data.filter(t=>t.active).length,i=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-agent-stats"});i.createEl("h4",{text:"Available Agents"});i.createEl("div",{cls:"vaultpilot-agent-info"}).createEl("span",{text:`${n}/${e} active`})}}catch(t){}})}addStyles(){if(!document.getElementById("vaultpilot-view-styles")){const t=document.createElement("style");t.id="vaultpilot-view-styles",t.textContent="\n        .vaultpilot-view {\n          padding: 20px;\n        }\n        .vaultpilot-header {\n          text-align: center;\n          margin-bottom: 30px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-subtitle {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats,\n        .vaultpilot-activities {\n          margin-bottom: 25px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3,\n        .vaultpilot-activities h3 {\n          margin-bottom: 15px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 5px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 10px;\n          margin-bottom: 15px;\n        }\n        .vaultpilot-action-button {\n          padding: 12px 8px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 13px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-refresh-button {\n          width: 100%;\n          padding: 8px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 15px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 24px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 5px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-agent-stats {\n          margin-top: 15px;\n          padding: 10px;\n          background: var(--background-primary-alt);\n          border-radius: 6px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-agent-stats h4 {\n          margin: 0 0 8px 0;\n          font-size: 14px;\n        }\n        .vaultpilot-agent-info {\n          font-size: 12px;\n          color: var(--text-muted);\n        }\n        .vaultpilot-placeholder {\n          color: var(--text-muted);\n          font-style: italic;\n          text-align: center;\n          padding: 20px;\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}const s="vaultpilot-full-tab-view";class l extends t.ItemView{constructor(t,e){super(t),this.plugin=e}getViewType(){return s}getDisplayText(){return"VaultPilot Dashboard"}getIcon(){return"layout-dashboard"}onOpen(){return e(this,void 0,void 0,function*(){const t=this.containerEl;t.empty(),t.addClass("vaultpilot-full-tab-view");const e=t.createEl("div",{cls:"vaultpilot-main-layout"}),n=e.createEl("div",{cls:"vaultpilot-left-sidebar"});this.createLeftSidebar(n);const i=e.createEl("div",{cls:"vaultpilot-main-content"});this.createMainContent(i);const o=e.createEl("div",{cls:"vaultpilot-right-sidebar"});this.createRightSidebar(o),this.addFullTabStyles()})}createLeftSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-sidebar-header"});e.createEl("h2",{text:"ü§ñ VaultPilot"}),e.createEl("p",{text:"AI Assistant Dashboard",cls:"vaultpilot-subtitle"}),this.statusEl=t.createEl("div",{cls:"vaultpilot-status"}),this.updateStatus(),this.quickActionsEl=t.createEl("div",{cls:"vaultpilot-quick-actions"}),this.createQuickActions(),this.vaultStatsEl=t.createEl("div",{cls:"vaultpilot-vault-stats"}),this.updateVaultStats()}createMainContent(t){const e=t.createEl("div",{cls:"vaultpilot-tab-nav"}),n=e.createEl("button",{text:"üí¨ Chat",cls:"vaultpilot-tab-button active"}),i=e.createEl("button",{text:"‚öôÔ∏è Workflows",cls:"vaultpilot-tab-button"}),o=e.createEl("button",{text:"üìä Analytics",cls:"vaultpilot-tab-button"}),a=t.createEl("div",{cls:"vaultpilot-tab-content"});this.chatEl=a.createEl("div",{cls:"vaultpilot-chat-section active"}),this.createChatSection(this.chatEl),this.workflowEl=a.createEl("div",{cls:"vaultpilot-workflow-section"}),this.createWorkflowSection(this.workflowEl);const s=a.createEl("div",{cls:"vaultpilot-analytics-section"});this.createAnalyticsSection(s),n.onclick=()=>this.switchTab("chat",n),i.onclick=()=>this.switchTab("workflow",i),o.onclick=()=>this.switchTab("analytics",o)}createRightSidebar(t){const e=t.createEl("div",{cls:"vaultpilot-recent-files"});e.createEl("h3",{text:"Recent Files"}),this.updateRecentFiles(e);const n=t.createEl("div",{cls:"vaultpilot-agent-status"});n.createEl("h3",{text:"Agent Status"}),this.updateAgentStatus(n);const i=t.createEl("div",{cls:"vaultpilot-activity-feed"});i.createEl("h3",{text:"Activity Feed"}),this.createActivityFeed(i)}createChatSection(t){t.createEl("div",{cls:"vaultpilot-chat-header"}).createEl("h3",{text:"AI Chat Interface"});const e=t.createEl("div",{cls:"vaultpilot-chat-history"});e.createEl("div",{text:"Welcome! Start a conversation with your AI assistant.",cls:"vaultpilot-chat-welcome"});const n=t.createEl("div",{cls:"vaultpilot-chat-input"}),i=n.createEl("textarea",{placeholder:"Type your message here...",cls:"vaultpilot-chat-textarea"}),o=n.createEl("button",{text:"Send",cls:"vaultpilot-chat-send-button"});o.onclick=()=>{const t=i.value.trim();t&&(this.sendChatMessage(t,e),i.value="")},i.onkeydown=t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),o.click())}}createWorkflowSection(t){t.createEl("div",{cls:"vaultpilot-workflow-header"}).createEl("h3",{text:"Workflow Management"});const e=t.createEl("div",{cls:"vaultpilot-workflow-grid"});[{name:"Analyze Vault",icon:"üîç",description:"Analyze your vault structure and content"},{name:"Generate Summary",icon:"üìù",description:"Create summaries of your notes"},{name:"Link Analysis",icon:"üîó",description:"Analyze note connections and relationships"},{name:"Tag Management",icon:"üè∑Ô∏è",description:"Organize and manage your tags"},{name:"Daily Planning",icon:"üìÖ",description:"Plan your day based on your notes"},{name:"Knowledge Graph",icon:"üï∏Ô∏è",description:"Visualize your knowledge connections"}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-workflow-card"});n.createEl("div",{text:t.icon,cls:"vaultpilot-workflow-icon"}),n.createEl("h4",{text:t.name}),n.createEl("p",{text:t.description});n.createEl("button",{text:"Run",cls:"vaultpilot-workflow-run-button"}).onclick=()=>this.runWorkflow(t.name)})}createAnalyticsSection(t){t.createEl("div",{cls:"vaultpilot-analytics-header"}).createEl("h3",{text:"Vault Analytics"});const e=t.createEl("div",{cls:"vaultpilot-charts-container"}),n=e.createEl("div",{cls:"vaultpilot-chart-card"});n.createEl("h4",{text:"File Type Distribution"}),n.createEl("div",{text:"Chart visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const i=e.createEl("div",{cls:"vaultpilot-chart-card"});i.createEl("h4",{text:"Note Creation Timeline"}),i.createEl("div",{text:"Timeline visualization coming soon...",cls:"vaultpilot-chart-placeholder"});const o=e.createEl("div",{cls:"vaultpilot-chart-card"});o.createEl("h4",{text:"Tag Usage"}),o.createEl("div",{text:"Tag analytics coming soon...",cls:"vaultpilot-chart-placeholder"})}switchTab(t,e){var n;this.containerEl.querySelectorAll(".vaultpilot-tab-button").forEach(t=>{t.removeClass("active")}),this.containerEl.querySelectorAll(".vaultpilot-chat-section, .vaultpilot-workflow-section, .vaultpilot-analytics-section").forEach(t=>{t.removeClass("active")}),e.addClass("active"),"chat"===t?this.chatEl.addClass("active"):"workflow"===t?this.workflowEl.addClass("active"):"analytics"===t&&(null===(n=this.containerEl.querySelector(".vaultpilot-analytics-section"))||void 0===n||n.addClass("active"))}sendChatMessage(t,n){return e(this,void 0,void 0,function*(){n.createEl("div",{cls:"vaultpilot-chat-message user"}).createEl("div",{text:t});const e=n.createEl("div",{cls:"vaultpilot-chat-message assistant thinking"});e.createEl("div",{text:"Thinking..."}),n.scrollTop=n.scrollHeight;try{const i=yield this.plugin.apiClient.sendChat({message:t,context:null});if(e.remove(),i.success&&i.data){n.createEl("div",{cls:"vaultpilot-chat-message assistant"}).createEl("div",{text:i.data.response})}else{n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Could not get response from AI"})}}catch(t){e.remove();n.createEl("div",{cls:"vaultpilot-chat-message error"}).createEl("div",{text:"Error: Connection failed"})}n.scrollTop=n.scrollHeight})}runWorkflow(n){return e(this,void 0,void 0,function*(){new t.Notice(`Running workflow: ${n}`);try{switch(n){case"Analyze Vault":yield this.plugin.analyzeVault();break;case"Daily Planning":yield this.plugin.planMyDay();break;default:new t.Notice(`${n} workflow is coming soon!`)}}catch(e){new t.Notice(`Error running workflow: ${n}`)}})}updateStatus(){this.statusEl.empty(),this.statusEl.createEl("h3",{text:"Connection Status"});const t=this.statusEl.createEl("div",{cls:"vaultpilot-status-container"}),e=t.createEl("div",{cls:"vaultpilot-status-item"});e.createEl("span",{text:"Backend: "});const n=e.createEl("span",{cls:"vaultpilot-status-indicator",text:"Checking..."}),i=t.createEl("div",{cls:"vaultpilot-status-item"});i.createEl("span",{text:"WebSocket: "}),i.createEl("span",{cls:"vaultpilot-status-indicator",text:this.plugin.isWebSocketConnected()?"üü¢ Connected":"üî¥ Disconnected"}),this.checkBackendStatus(n)}checkBackendStatus(t){return e(this,void 0,void 0,function*(){var e;try{let n=yield this.plugin.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){const t=yield this.plugin.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(t.textContent="üü¢ Connected",t.className="vaultpilot-status-indicator vaultpilot-status-connected"):(t.textContent="üî¥ Error",t.className="vaultpilot-status-indicator vaultpilot-status-error")}catch(e){t.textContent="üî¥ Offline",t.className="vaultpilot-status-indicator vaultpilot-status-offline"}})}createQuickActions(){this.quickActionsEl.empty(),this.quickActionsEl.createEl("h3",{text:"Quick Actions"});const t=this.quickActionsEl.createEl("div",{cls:"vaultpilot-actions-grid"});t.createEl("button",{text:"üîÑ Refresh",cls:"vaultpilot-action-button"}).onclick=()=>{this.updateStatus(),this.updateVaultStats()};t.createEl("button",{text:"üìã Sidebar View",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.activateView();t.createEl("button",{text:"üí¨ Modal Chat",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openChatModal();t.createEl("button",{text:"‚öôÔ∏è Workflows",cls:"vaultpilot-action-button"}).onclick=()=>this.plugin.openWorkflowModal()}updateVaultStats(){this.vaultStatsEl.empty(),this.vaultStatsEl.createEl("h3",{text:"Vault Statistics"});const e=this.vaultStatsEl.createEl("div",{cls:"vaultpilot-stats-container"}),n=this.app.vault.getFiles(),i=this.app.vault.getMarkdownFiles();[{label:"Total Files",value:n.length.toString()},{label:"Markdown Files",value:i.length.toString()},{label:"Folders",value:this.app.vault.getAllLoadedFiles().filter(e=>e instanceof t.TFolder).length.toString()}].forEach(t=>{const n=e.createEl("div",{cls:"vaultpilot-stat-item"});n.createEl("div",{text:t.value,cls:"vaultpilot-stat-value"}),n.createEl("div",{text:t.label,cls:"vaultpilot-stat-label"})})}updateRecentFiles(t){this.app.vault.getMarkdownFiles().sort((t,e)=>e.stat.mtime-t.stat.mtime).slice(0,5).forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-recent-file"});n.createEl("span",{text:e.basename}),n.onclick=()=>{this.app.workspace.openLinkText(e.path,"",!1)}})}updateAgentStatus(t){this.loadAgentInfo(t)}loadAgentInfo(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();if(e.success&&e.data&&t){const n=e.data.length,i=e.data.filter(t=>t.active).length,o=t.createEl("div",{cls:"vaultpilot-agent-info"});o.createEl("div",{text:`${i}/${n} active`}),e.data.forEach(t=>{const e=o.createEl("div",{cls:"vaultpilot-agent-item"});e.createEl("span",{text:t.name}),e.createEl("span",{text:t.active?"üü¢":"üî¥",cls:"vaultpilot-agent-status"})})}}catch(t){}})}createActivityFeed(t){[{time:"Just now",activity:"VaultPilot started"},{time:"5 min ago",activity:"Connection established"},{time:"1 hour ago",activity:"Last vault analysis"}].forEach(e=>{const n=t.createEl("div",{cls:"vaultpilot-activity-item"});n.createEl("div",{text:e.activity}),n.createEl("div",{text:e.time,cls:"vaultpilot-activity-time"})})}addFullTabStyles(){if(!document.getElementById("vaultpilot-full-tab-styles")){const t=document.createElement("style");t.id="vaultpilot-full-tab-styles",t.textContent="\n        .vaultpilot-full-tab-view {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-main-layout {\n          display: flex;\n          height: 100%;\n          gap: 1px;\n          background: var(--background-modifier-border);\n        }\n        .vaultpilot-left-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-main-content {\n          flex: 1;\n          background: var(--background-primary);\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-right-sidebar {\n          width: 250px;\n          background: var(--background-primary);\n          padding: 16px;\n          overflow-y: auto;\n        }\n        .vaultpilot-sidebar-header {\n          text-align: center;\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-nav {\n          display: flex;\n          background: var(--background-secondary);\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-tab-button {\n          flex: 1;\n          padding: 12px 16px;\n          background: transparent;\n          border: none;\n          color: var(--text-muted);\n          cursor: pointer;\n          transition: all 0.2s;\n        }\n        .vaultpilot-tab-button:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-tab-button.active {\n          background: var(--background-primary);\n          color: var(--text-normal);\n          border-bottom: 2px solid var(--interactive-accent);\n        }\n        .vaultpilot-tab-content {\n          flex: 1;\n          overflow: hidden;\n        }\n        .vaultpilot-chat-section,\n        .vaultpilot-workflow-section,\n        .vaultpilot-analytics-section {\n          height: 100%;\n          padding: 16px;\n          display: none;\n        }\n        .vaultpilot-chat-section.active,\n        .vaultpilot-workflow-section.active,\n        .vaultpilot-analytics-section.active {\n          display: flex;\n          flex-direction: column;\n        }\n        .vaultpilot-chat-history {\n          flex: 1;\n          overflow-y: auto;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          margin-bottom: 16px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-chat-input {\n          display: flex;\n          gap: 8px;\n        }\n        .vaultpilot-chat-textarea {\n          flex: 1;\n          min-height: 60px;\n          padding: 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-chat-send-button {\n          padding: 8px 16px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          height: fit-content;\n          align-self: flex-end;\n        }\n        .vaultpilot-chat-message {\n          margin-bottom: 12px;\n          padding: 8px 12px;\n          border-radius: 8px;\n          max-width: 80%;\n        }\n        .vaultpilot-chat-message.user {\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          margin-left: auto;\n        }\n        .vaultpilot-chat-message.assistant {\n          background: var(--background-primary);\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-message.thinking {\n          opacity: 0.7;\n          font-style: italic;\n        }\n        .vaultpilot-chat-message.error {\n          background: var(--background-modifier-error);\n          color: var(--text-error);\n        }\n        .vaultpilot-workflow-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n        }\n        .vaultpilot-workflow-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n          text-align: center;\n        }\n        .vaultpilot-workflow-icon {\n          font-size: 32px;\n          margin-bottom: 8px;\n        }\n        .vaultpilot-workflow-run-button {\n          margin-top: 8px;\n          padding: 6px 12px;\n          background: var(--interactive-accent);\n          color: var(--text-on-accent);\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n        }\n        .vaultpilot-charts-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 16px;\n        }\n        .vaultpilot-chart-card {\n          background: var(--background-secondary);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          padding: 16px;\n        }\n        .vaultpilot-chart-placeholder {\n          text-align: center;\n          color: var(--text-muted);\n          font-style: italic;\n          padding: 40px;\n        }\n        .vaultpilot-recent-file {\n          padding: 4px 8px;\n          margin-bottom: 4px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-recent-file:hover {\n          background: var(--background-modifier-hover);\n        }\n        .vaultpilot-agent-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 4px 0;\n        }\n        .vaultpilot-activity-item {\n          margin-bottom: 8px;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-activity-time {\n          font-size: 11px;\n          color: var(--text-muted);\n          margin-top: 2px;\n        }\n        /* Inherit styles from original view */\n        .vaultpilot-status,\n        .vaultpilot-quick-actions,\n        .vaultpilot-vault-stats {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-status h3,\n        .vaultpilot-quick-actions h3,\n        .vaultpilot-vault-stats h3 {\n          margin-bottom: 12px;\n          color: var(--text-normal);\n          border-bottom: 1px solid var(--background-modifier-border);\n          padding-bottom: 4px;\n          font-size: 14px;\n        }\n        .vaultpilot-status-container {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n        .vaultpilot-status-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n        .vaultpilot-status-indicator {\n          font-weight: 500;\n          font-size: 11px;\n        }\n        .vaultpilot-status-connected {\n          color: var(--color-green);\n        }\n        .vaultpilot-status-error,\n        .vaultpilot-status-offline {\n          color: var(--color-red);\n        }\n        .vaultpilot-actions-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-action-button {\n          padding: 8px 6px;\n          background: var(--interactive-normal);\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          color: var(--text-normal);\n          cursor: pointer;\n          font-size: 11px;\n          transition: background-color 0.2s;\n        }\n        .vaultpilot-action-button:hover {\n          background: var(--interactive-hover);\n        }\n        .vaultpilot-stats-container {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 8px;\n        }\n        .vaultpilot-stat-item {\n          text-align: center;\n          padding: 8px;\n          background: var(--background-secondary);\n          border-radius: 4px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-stat-value {\n          font-size: 18px;\n          font-weight: bold;\n          color: var(--text-accent);\n          margin-bottom: 2px;\n        }\n        .vaultpilot-stat-label {\n          font-size: 10px;\n          color: var(--text-muted);\n        }\n      ",document.head.appendChild(t)}}onClose(){return e(this,void 0,void 0,function*(){})}}let r;function c(){return e(this,void 0,void 0,function*(){const t=r.workspace.getActiveFile();if(!t)return null;return(yield r.vault.read(t)).slice(0,8e3)})}class d extends t.Modal{constructor(t,e){super(t),this.currentConversationId=null,this.messages=[],this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-chat-modal");const e=t.createEl("div",{cls:"vaultpilot-chat-header"});e.createEl("h2",{text:"ü§ñ VaultPilot Chat"});const n=e.createEl("div",{cls:"vaultpilot-chat-toolbar"});n.createEl("div",{cls:"vaultpilot-auto-mode-info",text:"‚ö° Automatic mode detection enabled"});n.createEl("button",{text:"Clear Chat",cls:"mod-cta"}).onclick=()=>this.clearChat();const i=n.createEl("select",{cls:"vaultpilot-agent-select"});i.createEl("option",{text:"Auto-select Agent",value:""}),this.loadAgents(i),this.chatContainer=t.createEl("div",{cls:"vaultpilot-chat-container"}),this.messagesEl=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-messages"}),this.inputContainer=this.chatContainer.createEl("div",{cls:"vaultpilot-chat-input-container"}),this.inputEl=this.inputContainer.createEl("input",{type:"text",placeholder:"Ask a question or describe what you want to accomplish...",cls:"vaultpilot-chat-input"}),this.sendButton=this.inputContainer.createEl("button",{text:"Send",cls:"mod-cta vaultpilot-send-button"}),this.inputEl.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.sendMessage())}),this.sendButton.onclick=()=>this.sendMessage(),this.inputEl.focus(),this.loadConversationHistory(),this.addStyles()}loadAgents(t){return e(this,void 0,void 0,function*(){try{const e=yield this.plugin.apiClient.getAgents();e.success&&e.data&&e.data.forEach(e=>{t.createEl("option",{text:e.name,value:e.id})})}catch(t){console.error("Failed to load agents:",t)}})}loadConversationHistory(){return e(this,void 0,void 0,function*(){if(this.currentConversationId)try{const t=yield this.plugin.apiClient.getConversationHistory(this.currentConversationId);t.success&&t.data&&(this.messages=t.data.messages,this.renderMessages())}catch(t){console.error("Failed to load conversation history:",t)}})}sendMessage(){return e(this,void 0,void 0,function*(){const e=this.inputEl.value.trim();if(e){this.inputEl.disabled=!0,this.sendButton.disabled=!0,this.sendButton.textContent="Sending...",this.addMessage("user",e),this.inputEl.value="";try{const[n,i]=yield Promise.all([c(),this.plugin.apiClient.classifyIntent(e)]),o={message:e,context:n};let a;this.plugin.settings.showIntentDebug&&this.showIntentDebug(i.intent),"agent"===i.intent?(a=yield this.plugin.apiClient.runWorkflow(o),a.success&&a.data?this.addMessage("assistant",`‚öôÔ∏è Agent Mode (auto-detected)\n\n${a.data.result}`):this.addMessage("assistant",`Error in agent mode: ${a.error||"Failed to get response"}`)):(a=yield this.plugin.apiClient.sendChat(o,{conversation_id:this.currentConversationId||void 0,agent_id:this.getSelectedAgent()}),a.success&&a.data?(this.currentConversationId=a.data.conversation_id,this.addMessage("assistant",a.data.response)):this.addMessage("assistant",`Error: ${a.error||"Failed to get response"}`)),(null==n?void 0:n.length)||new t.Notice("‚ö†Ô∏è No vault content was sent; replies may be generic."),a.success||new t.Notice(`Chat error: ${a.error}`)}catch(e){const n=e instanceof Error?e.message:"Unknown error";this.addMessage("assistant",`Error: ${n}`),new t.Notice(`Chat error: ${n}`)}finally{this.inputEl.disabled=!1,this.sendButton.disabled=!1,this.sendButton.textContent="Send",this.inputEl.focus()}}})}getSelectedAgent(){const t=this.contentEl.querySelector(".vaultpilot-agent-select");return(null==t?void 0:t.value)||void 0}addMessage(t,e){const n={role:t,content:e,timestamp:(new Date).toISOString()};this.messages.push(n),this.renderMessage(n),this.scrollToBottom()}renderMessages(){this.messagesEl.empty(),this.messages.forEach(t=>this.renderMessage(t)),this.scrollToBottom()}renderMessage(t){const e=this.messagesEl.createEl("div",{cls:`vaultpilot-message vaultpilot-message-${t.role}`});e.createEl("div",{cls:"vaultpilot-message-role",text:"user"===t.role?"You":"VaultPilot"});e.createEl("div",{cls:"vaultpilot-message-content"}).innerHTML=this.renderMarkdown(t.content),t.timestamp&&e.createEl("div",{cls:"vaultpilot-message-time",text:new Date(t.timestamp).toLocaleTimeString()})}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}scrollToBottom(){this.messagesEl.scrollTop=this.messagesEl.scrollHeight}clearChat(){this.messages=[],this.currentConversationId=null,this.messagesEl.empty(),new t.Notice("Chat cleared")}addStyles(){if(!document.getElementById("vaultpilot-chat-styles")){const t=document.createElement("style");t.id="vaultpilot-chat-styles",t.textContent="\n        .vaultpilot-chat-modal {\n          width: 600px;\n          height: 700px;\n        }\n        .vaultpilot-chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-chat-toolbar {\n          display: flex;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        .vaultpilot-auto-mode-info {\n          margin-right: 15px;\n          padding: 8px 12px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-secondary);\n          font-size: 0.85em;\n          color: var(--text-muted);\n          display: flex;\n          align-items: center;\n          gap: 6px;\n        }\n        .vaultpilot-agent-select {\n          padding: 4px 8px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 4px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-chat-container {\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 80px);\n        }\n        .vaultpilot-chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 8px;\n          margin-bottom: 15px;\n          background: var(--background-secondary);\n        }\n        .vaultpilot-message {\n          margin-bottom: 15px;\n          padding: 10px;\n          border-radius: 8px;\n        }\n        .vaultpilot-message-user {\n          background: var(--background-primary-alt);\n          margin-left: 20px;\n        }\n        .vaultpilot-message-assistant {\n          background: var(--background-primary);\n          margin-right: 20px;\n        }\n        .vaultpilot-message-role {\n          font-weight: bold;\n          margin-bottom: 5px;\n          color: var(--text-accent);\n        }\n        .vaultpilot-message-content {\n          line-height: 1.4;\n          color: var(--text-normal);\n          user-select: text;\n        }\n        .vaultpilot-message-time {\n          font-size: 0.8em;\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-chat-input-container {\n          display: flex;\n          gap: 10px;\n        }\n        .vaultpilot-chat-input {\n          flex: 1;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n        }\n        .vaultpilot-send-button {\n          padding: 10px 20px;\n        }\n        .vaultpilot-intent-debug {\n          background: var(--background-modifier-success);\n          color: var(--text-normal);\n          padding: 8px 12px;\n          border-radius: 4px;\n          margin: 8px 0;\n          font-size: 0.85em;\n          text-align: center;\n          border: 1px solid var(--background-modifier-border-hover);\n          animation: fadeInOut 3s ease-in-out;\n        }\n        @keyframes fadeInOut {\n          0% { opacity: 0; transform: translateY(-10px); }\n          10% { opacity: 1; transform: translateY(0); }\n          90% { opacity: 1; transform: translateY(0); }\n          100% { opacity: 0; transform: translateY(-10px); }\n        }\n      ",document.head.appendChild(t)}}showIntentDebug(t){const e=this.messagesEl.createEl("div",{cls:"vaultpilot-intent-debug",text:"üîç Intent detected: "+("agent"===t?"‚öôÔ∏è Agent Mode":"üí¨ Ask Mode")});setTimeout(()=>{e.remove()},3e3)}onClose(){const{contentEl:t}=this;t.empty()}}class u extends t.Modal{constructor(t,e){super(t),this.isExecuting=!1,this.plugin=e}onOpen(){const{contentEl:t}=this;t.empty(),t.addClass("vaultpilot-workflow-modal");const e=t.createEl("div",{cls:"vaultpilot-workflow-header"});e.createEl("h2",{text:"‚öôÔ∏è Workflow Execution"}),e.createEl("p",{text:"Define a goal and let VaultPilot create and execute a comprehensive workflow to achieve it.",cls:"vaultpilot-workflow-description"});const n=t.createEl("div",{cls:"vaultpilot-workflow-form"}),i=n.createEl("div",{cls:"vaultpilot-form-group"});i.createEl("label",{text:"Goal *",cls:"vaultpilot-form-label"}),this.goalInput=i.createEl("textarea",{placeholder:'e.g., "Create a comprehensive study plan for machine learning based on my notes"',cls:"vaultpilot-goal-input"});const o=n.createEl("div",{cls:"vaultpilot-form-group"});o.createEl("label",{text:"Additional Context (optional)",cls:"vaultpilot-form-label"}),this.contextInput=o.createEl("textarea",{placeholder:"Provide any additional context, constraints, or requirements...",cls:"vaultpilot-context-input"});const a=n.createEl("div",{cls:"vaultpilot-form-group"});a.createEl("label",{text:"Vault Integration",cls:"vaultpilot-form-label"});const s=a.createEl("label",{cls:"vaultpilot-checkbox-label"}),l=s.createEl("input",{type:"checkbox"});s.createSpan({text:"Include active file content"});const r=a.createEl("label",{cls:"vaultpilot-checkbox-label"}),c=r.createEl("input",{type:"checkbox"});r.createSpan({text:"Include all vault files (may take longer)"}),this.executeButton=n.createEl("button",{text:"Execute Workflow",cls:"mod-cta vaultpilot-execute-button"}),this.executeButton.onclick=()=>this.executeWorkflow(l.checked,c.checked),this.progressContainer=t.createEl("div",{cls:"vaultpilot-progress-container"}),this.progressContainer.style.display="none",this.resultsContainer=t.createEl("div",{cls:"vaultpilot-results-container"}),this.resultsContainer.style.display="none",this.goalInput.focus(),this.addStyles()}executeWorkflow(n,i){return e(this,void 0,void 0,function*(){const e=this.goalInput.value.trim();if(e){this.isExecuting=!0,this.executeButton.disabled=!0,this.executeButton.textContent="Executing...",this.progressContainer.style.display="block",this.resultsContainer.style.display="none";try{let t="";if(n){const e=this.app.workspace.getActiveFile();if(e){const n=yield this.app.vault.read(e);t+=`=== ${e.name} ===\n${n}\n\n`}}if(i){const e=this.app.vault.getMarkdownFiles();for(const n of e.slice(0,20)){const e=yield this.app.vault.read(n);t+=`=== ${n.name} ===\n${e}\n\n`}}const o={goal:e,context:this.contextInput.value.trim()||void 0,vault_content:t||void 0};this.plugin.isWebSocketConnected()&&this.setupProgressListener();const a=yield this.plugin.apiClient.executeWorkflow(o);if(!a.success||!a.data)throw new Error(a.error||"Workflow execution failed");yield this.displayResults(a.data)}catch(e){const n=e instanceof Error?e.message:"Unknown error";new t.Notice(`Workflow error: ${n}`),this.displayError(n)}finally{this.isExecuting=!1,this.executeButton.disabled=!1,this.executeButton.textContent="Execute Workflow"}}else new t.Notice("Please enter a goal for the workflow")})}setupProgressListener(){this.displayProgress("Analyzing goal and context..."),setTimeout(()=>{this.displayProgress("Planning workflow steps...")},1e3),setTimeout(()=>{this.displayProgress("Executing workflow...")},2e3)}displayProgress(t){this.progressContainer.innerHTML=`\n      <div class="vaultpilot-progress-item">\n        <div class="vaultpilot-progress-spinner"></div>\n        <span>${t}</span>\n      </div>\n    `}displayResults(t){return e(this,void 0,void 0,function*(){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.empty();const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-results-header"});e.createEl("h3",{text:"‚úÖ Workflow Completed"}),e.createEl("p",{text:`Execution time: ${t.execution_time}s`,cls:"vaultpilot-execution-time"});const n=this.resultsContainer.createEl("div",{cls:"vaultpilot-result-content"});n.createEl("h4",{text:"Result"});if(n.createEl("div",{cls:"vaultpilot-result-text"}).innerHTML=this.renderMarkdown(t.result),t.steps_taken&&t.steps_taken.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-steps-container"});e.createEl("h4",{text:"Steps Taken"});const n=e.createEl("ol",{cls:"vaultpilot-steps-list"});t.steps_taken.forEach(t=>{n.createEl("li",{text:t})})}if(t.artifacts&&t.artifacts.length>0){const e=this.resultsContainer.createEl("div",{cls:"vaultpilot-artifacts-container"});e.createEl("h4",{text:"Generated Artifacts"}),t.artifacts.forEach((t,n)=>{const i=e.createEl("div",{cls:"vaultpilot-artifact"});i.createEl("h5",{text:t.title}),i.createEl("p",{text:`Type: ${t.type}`,cls:"vaultpilot-artifact-type"});i.createEl("button",{text:"Save as Note",cls:"mod-cta"}).onclick=()=>this.saveArtifactAsNote(t,n)})}this.resultsContainer.createEl("div",{cls:"vaultpilot-results-actions"}).createEl("button",{text:"Save Complete Results as Note",cls:"mod-cta"}).onclick=()=>this.saveCompleteResultsAsNote(t)})}saveArtifactAsNote(n,i){return e(this,void 0,void 0,function*(){try{const e=`${n.title.replace(/[^a-zA-Z0-9\s]/g,"")}.md`,i=`# ${n.title}\n\n${n.content}`;yield this.app.vault.create(e,i),new t.Notice(`Artifact saved as ${e}`)}catch(e){new t.Notice(`Failed to save artifact: ${e instanceof Error?e.message:"Unknown error"}`)}})}saveCompleteResultsAsNote(n){return e(this,void 0,void 0,function*(){try{const e=`VaultPilot Workflow Results ${(new Date).toISOString().split("T")[0]}.md`;let i="# VaultPilot Workflow Results\n\n";i+=`**Goal:** ${this.goalInput.value}\n\n`,i+=`**Execution Time:** ${n.execution_time}s\n\n`,i+=`## Result\n\n${n.result}\n\n`,n.steps_taken&&n.steps_taken.length>0&&(i+="## Steps Taken\n\n",n.steps_taken.forEach((t,e)=>{i+=`${e+1}. ${t}\n`}),i+="\n"),n.artifacts&&n.artifacts.length>0&&(i+="## Generated Artifacts\n\n",n.artifacts.forEach(t=>{i+=`### ${t.title}\n\n${t.content}\n\n`})),yield this.app.vault.create(e,i),new t.Notice(`Complete results saved as ${e}`)}catch(e){new t.Notice(`Failed to save results: ${e instanceof Error?e.message:"Unknown error"}`)}})}displayError(t){this.progressContainer.style.display="none",this.resultsContainer.style.display="block",this.resultsContainer.innerHTML=`\n      <div class="vaultpilot-error">\n        <h3>‚ùå Workflow Failed</h3>\n        <p>${t}</p>\n      </div>\n    `}renderMarkdown(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}addStyles(){if(!document.getElementById("vaultpilot-workflow-styles")){const t=document.createElement("style");t.id="vaultpilot-workflow-styles",t.textContent="\n        .vaultpilot-workflow-modal {\n          width: 700px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n        .vaultpilot-workflow-header {\n          margin-bottom: 20px;\n          padding-bottom: 15px;\n          border-bottom: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-workflow-description {\n          color: var(--text-muted);\n          margin-top: 5px;\n        }\n        .vaultpilot-form-group {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-form-label {\n          display: block;\n          margin-bottom: 8px;\n          font-weight: 500;\n          color: var(--text-normal);\n        }\n        .vaultpilot-goal-input,\n        .vaultpilot-context-input {\n          width: 100%;\n          min-height: 80px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary);\n          color: var(--text-normal);\n          resize: vertical;\n        }\n        .vaultpilot-checkbox-label {\n          display: block;\n          margin-bottom: 8px;\n          cursor: pointer;\n        }\n        .vaultpilot-checkbox-label input {\n          margin-right: 8px;\n        }\n        .vaultpilot-execute-button {\n          width: 100%;\n          padding: 12px;\n          font-size: 16px;\n        }\n        .vaultpilot-progress-container {\n          margin: 20px 0;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-progress-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        .vaultpilot-progress-spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid var(--background-modifier-border);\n          border-top: 2px solid var(--text-accent);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .vaultpilot-results-container {\n          margin-top: 20px;\n        }\n        .vaultpilot-results-header {\n          margin-bottom: 15px;\n        }\n        .vaultpilot-execution-time {\n          color: var(--text-muted);\n          font-size: 0.9em;\n        }\n        .vaultpilot-result-content {\n          margin-bottom: 20px;\n          padding: 15px;\n          background: var(--background-secondary);\n          border-radius: 8px;\n          border: 1px solid var(--background-modifier-border);\n        }\n        .vaultpilot-result-text {\n          line-height: 1.5;\n          color: var(--text-normal);\n        }\n        .vaultpilot-steps-container,\n        .vaultpilot-artifacts-container {\n          margin-bottom: 20px;\n        }\n        .vaultpilot-steps-list {\n          padding-left: 20px;\n        }\n        .vaultpilot-artifact {\n          margin-bottom: 15px;\n          padding: 10px;\n          border: 1px solid var(--background-modifier-border);\n          border-radius: 6px;\n          background: var(--background-primary-alt);\n        }\n        .vaultpilot-artifact-type {\n          color: var(--text-muted);\n          font-size: 0.9em;\n          margin-bottom: 10px;\n        }\n        .vaultpilot-results-actions {\n          margin-top: 20px;\n          text-align: center;\n        }\n        .vaultpilot-error {\n          padding: 20px;\n          background: var(--background-primary-alt);\n          border: 1px solid var(--color-red);\n          border-radius: 8px;\n          color: var(--color-red);\n        }\n      ",document.head.appendChild(t)}}onClose(){const{contentEl:t}=this;t.empty()}}class p{constructor(t,e){this.wsCallbacks=new Map,this.baseUrl=t.replace(/\/$/,""),this.apiKey=e}makeRequest(t){return e(this,arguments,void 0,function*(t,e={}){const n=`${this.baseUrl}${t}`,i=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers||{});this.apiKey&&(i.Authorization=`Bearer ${this.apiKey}`);try{const t=yield fetch(n,Object.assign(Object.assign({},e),{headers:i,mode:"cors",credentials:"omit"}));let o;const a=t.headers.get("content-type");if(o=a&&a.includes("application/json")?yield t.json():yield t.text(),!t.ok){const e="object"==typeof o&&o.error?o.error:`HTTP ${t.status}: ${t.statusText}`;return console.error(`API Error [${t.status}]:`,e),{success:!1,error:e}}return{success:!0,data:"string"==typeof o?{message:o}:o}}catch(t){return console.error("API Request Error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})}healthCheck(){return e(this,void 0,void 0,function*(){console.log(`VaultPilot: Attempting health check to ${this.baseUrl}/api/obsidian/health`);const t=yield this.makeRequest("/api/obsidian/health",{method:"GET"});return console.log("VaultPilot: Health check result:",t),t})}simpleHealthCheck(){return e(this,void 0,void 0,function*(){try{const t=`${this.baseUrl}/api/obsidian/health`,e=yield fetch(t,{method:"HEAD",mode:"cors",credentials:"omit"});return e.ok||405===e.status?{success:!0,data:{status:"ok"}}:{success:!1,error:`Server responded with status ${e.status}`}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Connection failed"}}})}chat(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify(t)})})}getConversationHistory(t){return e(this,arguments,void 0,function*(t,e=50){const n={conversation_id:t,limit:e,include_messages:!0};return this.makeRequest("/api/obsidian/conversation/history",{method:"POST",body:JSON.stringify(n)})})}deleteConversation(t){return e(this,void 0,void 0,function*(){return this.makeRequest(`/api/obsidian/conversations/${t}`,{method:"DELETE"})})}getCopilotCompletion(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/copilot/complete",{method:"POST",body:JSON.stringify(t)})})}executeWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify(t)})})}runWorkflow(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/workflow",{method:"POST",body:JSON.stringify({goal:t.message,context:t.context||void 0})})})}sendChat(t,n){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/chat",{method:"POST",body:JSON.stringify({message:t.message,vault_context:t.context||void 0,conversation_id:null==n?void 0:n.conversation_id,agent_id:null==n?void 0:n.agent_id,mode:"ask"})})})}getAgents(){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents")})}createAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agents/create",{method:"POST",body:JSON.stringify(t)})})}executeAgent(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/agent/execute",{method:"POST",body:JSON.stringify(t)})})}analyzeVaultContext(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/vault/context",{method:"POST",body:JSON.stringify(t)})})}planTasks(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/planning/tasks",{method:"POST",body:JSON.stringify(t)})})}parseIntelligence(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify(t)})})}classifyIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5}})}explainIntent(t){return e(this,void 0,void 0,function*(){const e=yield this.makeRequest("/api/obsidian/intelligence/parse",{method:"POST",body:JSON.stringify({message:t,include_debug:!0})});return e.success&&e.data?e.data:{intent:"ask",confidence:.5,reasoning:"Classification failed, defaulting to ask mode"}})}updateMemory(t){return e(this,void 0,void 0,function*(){return this.makeRequest("/api/obsidian/memory/update",{method:"POST",body:JSON.stringify(t)})})}connectWebSocket(t){const e=this.baseUrl.replace("http","ws")+"/ws/obsidian";console.log(`VaultPilot: Attempting WebSocket connection to ${e}`),this.websocket=new WebSocket(e),this.websocket.onopen=()=>{var e;console.log("VaultPilot: WebSocket connected to EvoAgentX"),null===(e=t.onConnect)||void 0===e||e.call(t)},this.websocket.onmessage=e=>{var n,i,o,a,s,l,r;try{const r=JSON.parse(e.data);switch(console.log("VaultPilot: WebSocket message received:",r.type),r.type){case"chat":null===(n=t.onChat)||void 0===n||n.call(t,r.data);break;case"workflow_progress":null===(i=t.onWorkflowProgress)||void 0===i||i.call(t,r.data);break;case"copilot":null===(o=t.onCopilot)||void 0===o||o.call(t,r.data);break;case"vault_sync":null===(a=t.onVaultSync)||void 0===a||a.call(t,r.data);break;case"intent_debug":null===(s=t.onIntentDebug)||void 0===s||s.call(t,r.data);break;case"error":null===(l=t.onError)||void 0===l||l.call(t,r.data)}}catch(e){console.error("VaultPilot: Error parsing WebSocket message:",e),null===(r=t.onError)||void 0===r||r.call(t,"Failed to parse WebSocket message")}},this.websocket.onclose=e=>{var n;console.log("VaultPilot: WebSocket disconnected from EvoAgentX",e.code,e.reason),null===(n=t.onDisconnect)||void 0===n||n.call(t)},this.websocket.onerror=e=>{var n;console.error("VaultPilot: WebSocket error:",e),null===(n=t.onError)||void 0===n||n.call(t,"WebSocket connection error")}}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=void 0)}sendWebSocketMessage(t,e){this.websocket&&this.websocket.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({type:t,data:e}))}isWebSocketConnected(){var t;return(null===(t=this.websocket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN}}class h extends t.Plugin{constructor(){super(...arguments),this.websocketConnected=!1,this.copilotEnabled=!1}onload(){return e(this,void 0,void 0,function*(){var e,n;yield this.loadSettings(),n=this.app,r=n,this.apiClient=new p(this.settings.backendUrl,this.settings.apiKey);try{let n=yield this.apiClient.healthCheck();if(!n.success&&(null===(e=n.error)||void 0===e?void 0:e.includes("400"))){console.warn("Main health check failed with 400, trying alternative method");const t=yield this.apiClient.simpleHealthCheck();t.success&&t.data&&(n={success:!0,data:{status:t.data.status,version:"unknown"}})}n.success?(new t.Notice("‚úÖ VaultPilot connected to EvoAgentX",3e3),this.settings.enableWebSocket&&this.connectWebSocket()):(console.error("Health check failed:",n.error),new t.Notice("‚ö†Ô∏è EvoAgentX backend offline - some features may not work",5e3))}catch(e){console.error("Health check error:",e),new t.Notice("‚ö†Ô∏è Cannot connect to EvoAgentX backend",5e3)}this.registerView(o,t=>new a(t,this)),this.registerView(s,t=>new l(t,this));const c=this.addRibbonIcon("bot","VaultPilot",t=>{t.ctrlKey||t.metaKey?this.activateFullTabView():this.openChatModal()});c.addClass("vaultpilot-ribbon-class"),c.title="VaultPilot (Ctrl+click for Dashboard)",this.addCommand({id:"open-chat",name:"Open Chat",callback:()=>this.openChatModal()}),this.addCommand({id:"execute-workflow",name:"Execute Workflow",callback:()=>this.openWorkflowModal()}),this.addCommand({id:"analyze-vault",name:"Analyze Current Vault",callback:()=>this.analyzeVault()}),this.addCommand({id:"copilot-complete",name:"Get AI Completion",editorCallback:t=>this.getCopilotCompletion(t)}),this.addCommand({id:"quick-chat",name:"Quick Chat with Selection",editorCallback:t=>this.quickChatWithSelection(t)}),this.addCommand({id:"plan-tasks",name:"Plan Tasks from Note",editorCallback:t=>this.planTasksFromNote(t)}),this.addCommand({id:"plan-my-day",name:"Plan My Day",callback:()=>this.planMyDay()}),this.addCommand({id:"open-vaultpilot-view",name:"Open VaultPilot View",callback:()=>this.activateView()}),this.addCommand({id:"open-vaultpilot-full-tab",name:"Open VaultPilot Dashboard",callback:()=>this.activateFullTabView()}),this.settings.enableCopilot&&this.settings.enableAutoComplete&&this.registerDomEvent(document,"keyup",this.handleKeyUp.bind(this)),this.addSettingTab(new i(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(o),this.app.workspace.detachLeavesOfType(s),this.disconnectWebSocket()}connectWebSocket(){this.websocketConnected||this.apiClient.connectWebSocket({onChat:t=>{console.log("WebSocket chat update:",t)},onWorkflowProgress:e=>{new t.Notice(`Workflow: ${e.step}`,2e3)},onCopilot:t=>{this.handleCopilotSuggestion(t)},onVaultSync:t=>{console.log("Vault sync update:",t)},onIntentDebug:t=>{this.settings.showIntentDebug&&this.settings.debugMode&&console.log("Intent debug:",t)},onError:e=>{new t.Notice(`WebSocket error: ${e}`,5e3)},onConnect:()=>{this.websocketConnected=!0,this.settings.debugMode&&new t.Notice("WebSocket connected",2e3)},onDisconnect:()=>{this.websocketConnected=!1,this.settings.debugMode&&new t.Notice("WebSocket disconnected",2e3)}})}disconnectWebSocket(){this.apiClient.disconnectWebSocket(),this.websocketConnected=!1}isWebSocketConnected(){return this.websocketConnected}openChatModal(){new d(this.app,this).open()}openWorkflowModal(){new u(this.app,this).open()}analyzeVault(){return e(this,void 0,void 0,function*(){const e=new t.Notice("Analyzing vault...",0);try{const n=this.app.vault.getMarkdownFiles();let i="";for(const t of n.slice(0,10)){const e=yield this.app.vault.read(t);i+=`=== ${t.name} ===\n${e}\n\n`}const o=yield this.apiClient.analyzeVaultContext({content:i,analysis_type:"insights"});if(e.hide(),!o.success||!o.data)throw new Error(o.error||"Analysis failed");{const e=(new Date).toISOString().split("T")[0],n=`Vault Analysis ${e}.md`;let i=`# Vault Analysis - ${e}\n\n`;i+=`## Analysis\n\n${o.data.analysis}\n\n`,o.data.insights&&o.data.insights.length>0&&(i+="## Key Insights\n\n",o.data.insights.forEach(t=>{i+=`- ${t}\n`}),i+="\n"),o.data.recommendations&&o.data.recommendations.length>0&&(i+="## Recommendations\n\n",o.data.recommendations.forEach(t=>{i+=`- ${t}\n`})),yield this.app.vault.create(n,i),new t.Notice(`Vault analysis saved as ${n}`)}}catch(n){e.hide(),new t.Notice(`Analysis error: ${n instanceof Error?n.message:"Unknown error"}`)}})}getCopilotCompletion(n){return e(this,void 0,void 0,function*(){if(!this.settings.enableCopilot)return void new t.Notice("Copilot is disabled in settings");const e=n.getCursor(),i=n.getLine(e.line).substring(0,e.ch),o=n.getValue();if(o&&0!==o.trim().length)try{const a=yield this.apiClient.getCopilotCompletion({text:o,cursor_position:n.posToOffset(e),file_type:"markdown",context:i});a.success&&a.data?(n.replaceRange(a.data.completion,e),new t.Notice("Completion inserted",2e3)):new t.Notice(`Copilot error: ${a.error}`)}catch(e){new t.Notice(`Copilot error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("Cannot complete empty text")})}quickChatWithSelection(n){return e(this,void 0,void 0,function*(){const e=n.getSelection();if(e)try{const i=yield this.apiClient.chat({message:`Please explain or analyze this text: "${e}"`,vault_context:n.getValue()});if(i.success&&i.data){const e=n.getCursor("to"),o=`\n\n**VaultPilot Analysis:**\n${i.data.response}\n\n`;n.replaceRange(o,e),new t.Notice("Analysis inserted",2e3)}else new t.Notice(`Chat error: ${i.error}`)}catch(e){new t.Notice(`Chat error: ${e instanceof Error?e.message:"Unknown error"}`)}else new t.Notice("No text selected")})}planTasksFromNote(n){return e(this,void 0,void 0,function*(){const e=n.getValue(),i=this.app.workspace.getActiveFile();if(!e.trim())return void new t.Notice("No content to analyze");const o=new t.Notice("Planning tasks...",0);try{const n=yield this.apiClient.planTasks({goal:`Create a task plan based on this note: ${(null==i?void 0:i.name)||"Untitled"}`,context:e,timeframe:"1 week"});if(o.hide(),!n.success||!n.data)throw new Error(n.error||"Task planning failed");{const e=(new Date).toISOString().split("T")[0],o=`Task Plan - ${(null==i?void 0:i.basename)||"Untitled"} - ${e}.md`;let a=`# ${n.data.plan.title}\n\n`;a+=`${n.data.plan.description}\n\n`,a+=`**Estimated Duration:** ${n.data.plan.estimated_duration}\n\n`,n.data.plan.tasks&&n.data.plan.tasks.length>0&&(a+="## Tasks\n\n",n.data.plan.tasks.forEach(t=>{const e="completed"===t.status?"[x]":"[ ]";a+=`${e} **${t.title}** (${t.priority} priority)\n`,a+=`   ${t.description}\n`,a+=`   *Estimated time: ${t.estimated_time}*\n\n`})),n.data.milestones&&n.data.milestones.length>0&&(a+="## Milestones\n\n",n.data.milestones.forEach(t=>{a+=`- **${t.title}** (${t.target_date})\n`,a+=`  ${t.description}\n\n`})),yield this.app.vault.create(o,a),new t.Notice(`Task plan saved as ${o}`)}}catch(e){o.hide(),new t.Notice(`Task planning error: ${e instanceof Error?e.message:"Unknown error"}`)}})}planMyDay(){return e(this,void 0,void 0,function*(){const n=this.app.workspace.getActiveFile();if(!n)return void new t.Notice("No active note‚Äîopen today's daily note first.");const i=new t.Notice("Planning your day...",0);try{const o=yield this.app.vault.read(n),{scheduleMarkdown:a,headline:s}=yield function(n){return e(this,void 0,void 0,function*(){const e=yield t.request({url:"http://localhost:3000/planday",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:n})});return JSON.parse(e)})}(o);if(!function(t){return t.trim().length>0}(a))throw new Error("Invalid schedule data received from API");const l=function(t,e){const n=function(t){let e=/(^##\s+Schedule\b[^\n]*\n)([\s\S]*?)(?=\n##\s|$)/im;return t.match(e)||(e=/(^##\s*(?:.*\s)?\bSchedule\b(?:\s.*)?$\n)([\s\S]*?)(?=\n##\s|$)/im,t.match(e))}(t);if(n){const[i,o]=n,a=o+e;return t.replace(i,a)}return t+`\n\n## Schedule\n${e}`}(o,a);yield this.app.vault.modify(n,l),i.hide();const r=s?`${s} ‚úÖ`:"Schedule inserted ‚úÖ";new t.Notice(r)}catch(e){i.hide(),e instanceof Error?e.message.includes("JSON")?new t.Notice("Planner API error: Invalid response format"):e.message.includes("fetch")||e.message.includes("network")?new t.Notice("Planner API error: Unable to connect to localhost:3000"):new t.Notice(`Planner API error: ${e.message}`):new t.Notice("Planner API error: Unknown error occurred")}})}activateView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(o);if(0===t.length){const t=this.app.workspace.getRightLeaf(!1);t&&(yield t.setViewState({type:o,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}activateFullTabView(){return e(this,void 0,void 0,function*(){const t=this.app.workspace.getLeavesOfType(s);if(0===t.length){const t=this.app.workspace.getLeaf("tab");t&&(yield t.setViewState({type:s,active:!0}))}else this.app.workspace.revealLeaf(t[0])})}handleKeyUp(t){if(!this.settings.enableAutoComplete||!this.settings.enableCopilot)return;t.target.classList.contains("cm-content")&&this.shouldTriggerAutoComplete(t)&&(clearTimeout(this.autoCompleteTimeout),this.autoCompleteTimeout=setTimeout(()=>{this.triggerAutoCompletion()},3e3))}shouldTriggerAutoComplete(e){if(-1!==["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Shift","Control","Alt","Meta","Escape"].indexOf(e.key))return!1;const n=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!n)return!1;const i=n.editor,o=i.getCursor(),a=i.getLine(o.line);if(o.ch!==a.length)return!1;const s=a.slice(-1);return-1!==[".","!","?",":","\n"].indexOf(s)&&" "===e.key||"Enter"===e.key&&a.trim().length>10}triggerAutoCompletion(){return e(this,void 0,void 0,function*(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.editor,i=n.getCursor(),o=n.getLine(i.line),a=n.getValue();if(o.trim().length<10||i.ch!==o.length)return;if(!a||0===a.trim().length)return;const s=Date.now();if(!(s-(this.lastAutoCompleteRequest||0)<1e4)){this.lastAutoCompleteRequest=s;try{const e=yield this.apiClient.getCopilotCompletion({text:a,cursor_position:n.posToOffset(i),file_type:"markdown"});e.success&&e.data&&e.data.suggestions.length>0&&this.settings.debugMode&&new t.Notice(`Auto-suggestion: ${e.data.suggestions[0]}`,3e3)}catch(t){this.settings.debugMode&&console.error("Auto-completion error:",t)}}})}handleCopilotSuggestion(e){this.settings.debugMode&&new t.Notice(`Live suggestion: ${e.completion}`,2e3)}loadSettings(){return e(this,void 0,void 0,function*(){this.settings=Object.assign({},n,yield this.loadData())})}saveSettings(){return e(this,void 0,void 0,function*(){yield this.saveData(this.settings),this.apiClient=new p(this.settings.backendUrl,this.settings.apiKey),this.settings.enableWebSocket&&!this.websocketConnected?this.connectWebSocket():!this.settings.enableWebSocket&&this.websocketConnected&&this.disconnectWebSocket()})}}module.exports=h;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3NldHRpbmdzLnRzIiwiLi4vc3JjL3ZpZXcudHMiLCIuLi9zcmMvZnVsbC10YWItdmlldy50cyIsIi4uL3NyYy92YXVsdC11dGlscy50cyIsIi4uL3NyYy9jaGF0LW1vZGFsLnRzIiwiLi4vc3JjL3dvcmtmbG93LW1vZGFsLnRzIiwiLi4vc3JjL2FwaS1jbGllbnQudHMiLCIuLi9zcmMvbWFpbi50cyIsIi4uL3NyYy9wbGFubmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBWYXVsdFBpbG90U2V0dGluZ3MgPSB7XG4gIGJhY2tlbmRVcmw6ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnLFxuICBhcGlLZXk6ICcnLFxuICBlbmFibGVXZWJTb2NrZXQ6IHRydWUsXG4gIGVuYWJsZUNvcGlsb3Q6IHRydWUsXG4gIGVuYWJsZUF1dG9Db21wbGV0ZTogZmFsc2UsIC8vIERpc2FibGVkIGJ5IGRlZmF1bHQgdG8gcHJldmVudCBmcmVxdWVudCByZXF1ZXN0c1xuICBkZWZhdWx0QWdlbnQ6ICcnLFxuICBkZWZhdWx0TW9kZTogJ2FzaycsXG4gIGNoYXRIaXN0b3J5TGltaXQ6IDEwMCxcbiAgZGVidWdNb2RlOiBmYWxzZSxcbiAgc2hvd0ludGVudERlYnVnOiBmYWxzZVxufTtcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnVmF1bHRQaWxvdCBTZXR0aW5ncycgfSk7XG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogJ0NvbmZpZ3VyZSB5b3VyIGNvbm5lY3Rpb24gdG8gRXZvQWdlbnRYIGJhY2tlbmQgYW5kIEFJIGZlYXR1cmVzLicgXG4gICAgfSk7XG5cbiAgICAvLyBDb25uZWN0aW9uIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29ubmVjdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdCYWNrZW5kIFVSTCcpXG4gICAgICAuc2V0RGVzYygnVVJMIG9mIEV2b0FnZW50WCBiYWNrZW5kIHNlcnZlcicpXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tlbmRVcmwgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQVBJIEtleScpXG4gICAgICAuc2V0RGVzYygnT3B0aW9uYWwgQVBJIGtleSBmb3IgYXV0aGVudGljYXRpb24gKGlmIHJlcXVpcmVkIGJ5IGJhY2tlbmQpJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgQVBJIGtleS4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSB8fCAnJylcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIC8vIFRlc3QgY29ubmVjdGlvbiBidXR0b25cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdDb25uZWN0aW9uIFRlc3QnKVxuICAgICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbiB0byBFdm9BZ2VudFggYmFja2VuZCcpXG4gICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PlxuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCBDb25uZWN0aW9uJylcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBGZWF0dXJlIFNldHRpbmdzXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRmVhdHVyZXMnIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIFdlYlNvY2tldCcpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIHJlYWwtdGltZSBjb21tdW5pY2F0aW9uIGZvciBsaXZlIHVwZGF0ZXMgYW5kIHByb2dyZXNzIHRyYWNraW5nJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVdlYlNvY2tldCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIENvcGlsb3QnKVxuICAgICAgLnNldERlc2MoJ0VuYWJsZSBBSS1wb3dlcmVkIHRleHQgY29tcGxldGlvbiBhbmQgc3VnZ2VzdGlvbnMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRW5hYmxlIEF1dG8tQ29tcGxldGUnKVxuICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgc3VnZ2VzdCBjb21wbGV0aW9ucyBhZnRlciBzZW50ZW5jZSBlbmRpbmdzIGFuZCBuZXcgbGluZXMgKHdpdGggMTBzIGNvb2xkb3duKScpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVBdXRvQ29tcGxldGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gQWdlbnQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBDb25maWd1cmF0aW9uJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgQWdlbnQnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgYWdlbnQgdG8gdXNlIGZvciBjaGF0IGFuZCB3b3JrZmxvd3MgKGxlYXZlIGVtcHR5IGZvciBhdXRvLXNlbGVjdGlvbiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdBZ2VudCBJRCBvciBuYW1lLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEFnZW50IHx8ICcnKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0QWdlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBDaGF0IE1vZGUnKVxuICAgICAgLnNldERlc2MoJ0RlZmF1bHQgbW9kZSBmb3IgbmV3IGNoYXQgc2Vzc2lvbnM6IEFzayBmb3Igc2ltcGxlIFEmQSwgQWdlbnQgZm9yIGNvbXBsZXggd29ya2Zsb3dzJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PlxuICAgICAgICBkcm9wZG93blxuICAgICAgICAgIC5hZGRPcHRpb24oJ2FzaycsICdBc2sgTW9kZSAtIFNpbXBsZSBRJkEnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2FnZW50JywgJ0FnZW50IE1vZGUgLSBDb21wbGV4IFdvcmtmbG93cycpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRNb2RlKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZSA9IHZhbHVlIGFzICdhc2snIHwgJ2FnZW50JztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnQ2hhdCBIaXN0b3J5IExpbWl0JylcbiAgICAgIC5zZXREZXNjKCdNYXhpbXVtIG51bWJlciBvZiBjaGF0IG1lc3NhZ2VzIHRvIGtlZXAgaW4gaGlzdG9yeScpXG4gICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PlxuICAgICAgICBzbGlkZXJcbiAgICAgICAgICAuc2V0TGltaXRzKDEwLCA1MDAsIDEwKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeUxpbWl0KVxuICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5TGltaXQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgLy8gQWR2YW5jZWQgU2V0dGluZ3NcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZHZhbmNlZCcgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdEZWJ1ZyBNb2RlJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgZGVidWcgbG9nZ2luZyBhbmQgYWRkaXRpb25hbCBkZXZlbG9wZXIgZmVhdHVyZXMnKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVidWdNb2RlID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ1Nob3cgSW50ZW50IERlYnVnIE92ZXJsYXknKVxuICAgICAgLnNldERlc2MoJ0Rpc3BsYXkgYXV0b21hdGljIGludGVudCBkZXRlY3Rpb24gaW4gY2hhdCAoQXNrIHZzIEFnZW50IG1vZGUpJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SW50ZW50RGVidWcpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1ZyA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAvLyBJbmZvcm1hdGlvbiBzZWN0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW5mb3JtYXRpb24nIH0pO1xuICAgIGNvbnN0IGluZm9FbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgfSk7XG4gICAgaW5mb0VsLmlubmVySFRNTCA9IGBcbiAgICAgIDxwPjxzdHJvbmc+VmF1bHRQaWxvdCB2MS4wLjA8L3N0cm9uZz48L3A+XG4gICAgICA8cD5Db21wcmVoZW5zaXZlIEV2b0FnZW50WCBpbnRlZ3JhdGlvbiBmb3IgT2JzaWRpYW48L3A+XG4gICAgICA8cD5GZWF0dXJlczogQUkgQ2hhdCwgQ29waWxvdCwgV29ya2Zsb3dzLCBWYXVsdCBBbmFseXNpcywgVGFzayBQbGFubmluZzwvcD5cbiAgICAgIDxwPkZvciBoZWxwIGFuZCBkb2N1bWVudGF0aW9uLCB2aXNpdCB0aGUgR2l0SHViIHJlcG9zaXRvcnkuPC9wPlxuICAgIGA7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1Rlc3RpbmcgY29ubmVjdGlvbi4uLicsIDApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zaW1wbGVIZWFsdGhDaGVjaygpO1xuICAgICAgICBpZiAoc2ltcGxlUmVzcG9uc2Uuc3VjY2VzcyAmJiBzaW1wbGVSZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogeyBzdGF0dXM6IHNpbXBsZVJlc3BvbnNlLmRhdGEuc3RhdHVzLCB2ZXJzaW9uOiAndW5rbm93bicgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgbmV3IE5vdGljZSgn4pyFIENvbm5lY3Rpb24gc3VjY2Vzc2Z1bCEnLCAzMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGZhaWxlZDogJHtyZXNwb25zZS5lcnJvcn1gLCA1MDAwKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbm90aWNlLmhpZGUoKTtcbiAgICAgIG5ldyBOb3RpY2UoYOKdjCBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsIDUwMDApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVmF1bHRQaWxvdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1ZBVUxUUElMT1QgPSAndmF1bHRwaWxvdC12aWV3JztcblxuZXhwb3J0IGNsYXNzIFZhdWx0UGlsb3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgc3RhdHVzRWwhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBxdWlja0FjdGlvbnNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHZhdWx0U3RhdHNFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1Q7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdib3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCd2YXVsdHBpbG90LXZpZXcnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfwn6SWIFZhdWx0UGlsb3QnIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdZb3VyIEFJIGFzc2lzdGFudCBmb3IgT2JzaWRpYW4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdWJ0aXRsZSdcbiAgICB9KTtcblxuICAgIC8vIFN0YXR1cyBzZWN0aW9uXG4gICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucycgfSk7XG4gICAgdGhpcy5jcmVhdGVRdWlja0FjdGlvbnMoKTtcblxuICAgIC8vIFZhdWx0IHN0YXRzXG4gICAgdGhpcy52YXVsdFN0YXRzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC12YXVsdC1zdGF0cycgfSk7XG4gICAgdGhpcy51cGRhdGVWYXVsdFN0YXRzKCk7XG5cbiAgICAvLyBSZWNlbnQgYWN0aXZpdGllcyAocGxhY2Vob2xkZXIgZm9yIGZ1dHVyZSBpbXBsZW1lbnRhdGlvbilcbiAgICBjb25zdCBhY3Rpdml0aWVzRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0aWVzJyB9KTtcbiAgICBhY3Rpdml0aWVzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUmVjZW50IEFjdGl2aXRpZXMnIH0pO1xuICAgIGFjdGl2aXRpZXNFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQWN0aXZpdHkgdHJhY2tpbmcgY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN0YXR1cygpIHtcbiAgICB0aGlzLnN0YXR1c0VsLmVtcHR5KCk7XG4gICAgdGhpcy5zdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDb25uZWN0aW9uIFN0YXR1cycgfSk7XG5cbiAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBCYWNrZW5kIHN0YXR1c1xuICAgIGNvbnN0IGJhY2tlbmRTdGF0dXMgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaXRlbScgfSk7XG4gICAgYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0JhY2tlbmQ6ICcgfSk7XG4gICAgY29uc3QgYmFja2VuZEluZGljYXRvciA9IGJhY2tlbmRTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6ICdDaGVja2luZy4uLidcbiAgICB9KTtcblxuICAgIC8vIFdlYlNvY2tldCBzdGF0dXNcbiAgICBjb25zdCB3c1N0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICB3c1N0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1dlYlNvY2tldDogJyB9KTtcbiAgICBjb25zdCB3c0luZGljYXRvciA9IHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvcicsXG4gICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpID8gJ/Cfn6IgQ29ubmVjdGVkJyA6ICfwn5S0IERpc2Nvbm5lY3RlZCdcbiAgICB9KTtcblxuICAgIC8vIENoZWNrIGJhY2tlbmQgc3RhdHVzXG4gICAgdGhpcy5jaGVja0JhY2tlbmRTdGF0dXMoYmFja2VuZEluZGljYXRvcik7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrQmFja2VuZFN0YXR1cyhpbmRpY2F0b3I6IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5oZWFsdGhDaGVjaygpO1xuICAgICAgXG4gICAgICAvLyBJZiB0aGUgbWFpbiBoZWFsdGggY2hlY2sgZmFpbHMgd2l0aCBhIDQwMCwgdHJ5IHRoZSBzaW1wbGUgY2hlY2tcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gQ2hhdCBhY3Rpb25cbiAgICBjb25zdCBjaGF0QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5KsIE9wZW4gQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgY2hhdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4ub3BlbkNoYXRNb2RhbCgpO1xuXG4gICAgLy8gRGFzaGJvYXJkIGFjdGlvbiAobmV3KVxuICAgIGNvbnN0IGRhc2hib2FyZEJ1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+TiiBPcGVuIERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgZGFzaGJvYXJkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5hY3RpdmF0ZUZ1bGxUYWJWaWV3KCk7XG5cbiAgICAvLyBXb3JrZmxvdyBhY3Rpb25cbiAgICBjb25zdCB3b3JrZmxvd0J1dHRvbiA9IGFjdGlvbnNHcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn4pqZ77iPIEV4ZWN1dGUgV29ya2Zsb3cnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuXG4gICAgLy8gQW5hbHl6ZSB2YXVsdCBhY3Rpb25cbiAgICBjb25zdCBhbmFseXplQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SNIEFuYWx5emUgVmF1bHQnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGFuYWx5emVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucGx1Z2luLmFuYWx5emVWYXVsdCgpO1xuXG4gICAgLy8gQ29waWxvdCBhY3Rpb25cbiAgICBjb25zdCBjb3BpbG90QnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfinKggR2V0IENvbXBsZXRpb24nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIGNvcGlsb3RCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4uZ2V0Q29waWxvdENvbXBsZXRpb24oYWN0aXZlVmlldy5lZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGVkaXRvciBmb3VuZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZWZyZXNoIGJ1dHRvblxuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSB0aGlzLnF1aWNrQWN0aW9uc0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAn8J+UhCBSZWZyZXNoIFN0YXR1cycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXJlZnJlc2gtYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFnZW50IGluZm8gaWYgYXZhaWxhYmxlXG4gICAgdGhpcy5sb2FkQWdlbnRJbmZvKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRBZ2VudEluZm8oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zdCBhZ2VudENvdW50ID0gcmVzcG9uc2UuZGF0YS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUFnZW50cyA9IHJlc3BvbnNlLmRhdGEuZmlsdGVyKChhZ2VudDogYW55KSA9PiBhZ2VudC5hY3RpdmUpLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFnZW50U3RhdHNFbCA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYWdlbnQtc3RhdHMnIH0pO1xuICAgICAgICBhZ2VudFN0YXRzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQXZhaWxhYmxlIEFnZW50cycgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudEluZm8gPSBhZ2VudFN0YXRzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pbmZvJyB9KTtcbiAgICAgICAgYWdlbnRJbmZvLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgJHthY3RpdmVBZ2VudHN9LyR7YWdlbnRDb3VudH0gYWN0aXZlYCB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50bHkgZmFpbCBpZiBhZ2VudHMgY2FuJ3QgYmUgbG9hZGVkXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC12aWV3LXN0eWxlcycpKSB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHN0eWxlRWwuaWQgPSAndmF1bHRwaWxvdC12aWV3LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC12aWV3IHtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWhlYWRlciB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdWJ0aXRsZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzLFxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0aWVzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtcXVpY2stYWN0aW9ucyBoMyxcbiAgICAgICAgLnZhdWx0cGlsb3QtdmF1bHQtc3RhdHMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LWFjdGl2aXRpZXMgaDMge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pdGVtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWNvbm5lY3RlZCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtZXJyb3IsXG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1vZmZsaW5lIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b24ge1xuICAgICAgICAgIHBhZGRpbmc6IDEycHggOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWZyZXNoLWJ1dHRvbiB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7XG4gICAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtaXRlbSB7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC12YWx1ZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtbGFiZWwge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtc3RhdHMge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXN0YXRzIGg0IHtcbiAgICAgICAgICBtYXJnaW46IDAgMCA4cHggMDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtaW5mbyB7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wbGFjZWhvbGRlciB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzXG4gIH1cbn1cbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldywgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCID0gJ3ZhdWx0cGlsb3QtZnVsbC10YWItdmlldyc7XG5cbmV4cG9ydCBjbGFzcyBWYXVsdFBpbG90RnVsbFRhYlZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbjtcbiAgcHJpdmF0ZSBzdGF0dXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHF1aWNrQWN0aW9uc0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdmF1bHRTdGF0c0VsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgY2hhdEVsITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgd29ya2Zsb3dFbCE6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUI7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnVmF1bHRQaWxvdCBEYXNoYm9hcmQnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnbGF5b3V0LWRhc2hib2FyZCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3QtZnVsbC10YWItdmlldycpO1xuXG4gICAgLy8gQ3JlYXRlIG1haW4gbGF5b3V0XG4gICAgY29uc3QgbWFpbkxheW91dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tbGF5b3V0JyB9KTtcblxuICAgIC8vIExlZnQgc2lkZWJhclxuICAgIGNvbnN0IGxlZnRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWxlZnQtc2lkZWJhcicgfSk7XG4gICAgdGhpcy5jcmVhdGVMZWZ0U2lkZWJhcihsZWZ0U2lkZWJhcik7XG5cbiAgICAvLyBNYWluIGNvbnRlbnQgYXJlYVxuICAgIGNvbnN0IG1haW5Db250ZW50ID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LW1haW4tY29udGVudCcgfSk7XG4gICAgdGhpcy5jcmVhdGVNYWluQ29udGVudChtYWluQ29udGVudCk7XG5cbiAgICAvLyBSaWdodCBzaWRlYmFyXG4gICAgY29uc3QgcmlnaHRTaWRlYmFyID0gbWFpbkxheW91dC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJpZ2h0LXNpZGViYXInIH0pO1xuICAgIHRoaXMuY3JlYXRlUmlnaHRTaWRlYmFyKHJpZ2h0U2lkZWJhcik7XG5cbiAgICB0aGlzLmFkZEZ1bGxUYWJTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTGVmdFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zaWRlYmFyLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAn8J+kliBWYXVsdFBpbG90JyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnQUkgQXNzaXN0YW50IERhc2hib2FyZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN1YnRpdGxlJ1xuICAgIH0pO1xuXG4gICAgLy8gU3RhdHVzIHNlY3Rpb25cbiAgICB0aGlzLnN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cycgfSk7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFF1aWNrIGFjdGlvbnNcbiAgICB0aGlzLnF1aWNrQWN0aW9uc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMnIH0pO1xuICAgIHRoaXMuY3JlYXRlUXVpY2tBY3Rpb25zKCk7XG5cbiAgICAvLyBWYXVsdCBzdGF0c1xuICAgIHRoaXMudmF1bHRTdGF0c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXZhdWx0LXN0YXRzJyB9KTtcbiAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWFpbkNvbnRlbnQoY29udGVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBUYWIgbmF2aWdhdGlvblxuICAgIGNvbnN0IHRhYk5hdiA9IGNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC10YWItbmF2JyB9KTtcbiAgICBjb25zdCBjaGF0VGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/CfkqwgQ2hhdCcsIFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC10YWItYnV0dG9uIGFjdGl2ZSdcbiAgICB9KTtcbiAgICBjb25zdCB3b3JrZmxvd1RhYiA9IHRhYk5hdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICfimpnvuI8gV29ya2Zsb3dzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG4gICAgY29uc3QgYW5hbHl0aWNzVGFiID0gdGFiTmF2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogJ/Cfk4ogQW5hbHl0aWNzJywgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXRhYi1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBUYWIgY29udGVudFxuICAgIGNvbnN0IHRhYkNvbnRlbnQgPSBjb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtdGFiLWNvbnRlbnQnIH0pO1xuXG4gICAgLy8gQ2hhdCBzZWN0aW9uXG4gICAgdGhpcy5jaGF0RWwgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uIGFjdGl2ZScgfSk7XG4gICAgdGhpcy5jcmVhdGVDaGF0U2VjdGlvbih0aGlzLmNoYXRFbCk7XG5cbiAgICAvLyBXb3JrZmxvdyBzZWN0aW9uXG4gICAgdGhpcy53b3JrZmxvd0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LXNlY3Rpb24nIH0pO1xuICAgIHRoaXMuY3JlYXRlV29ya2Zsb3dTZWN0aW9uKHRoaXMud29ya2Zsb3dFbCk7XG5cbiAgICAvLyBBbmFseXRpY3Mgc2VjdGlvblxuICAgIGNvbnN0IGFuYWx5dGljc0VsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uJyB9KTtcbiAgICB0aGlzLmNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWwpO1xuXG4gICAgLy8gVGFiIHN3aXRjaGluZ1xuICAgIGNoYXRUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdjaGF0JywgY2hhdFRhYik7XG4gICAgd29ya2Zsb3dUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCd3b3JrZmxvdycsIHdvcmtmbG93VGFiKTtcbiAgICBhbmFseXRpY3NUYWIub25jbGljayA9ICgpID0+IHRoaXMuc3dpdGNoVGFiKCdhbmFseXRpY3MnLCBhbmFseXRpY3NUYWIpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSaWdodFNpZGViYXIoc2lkZWJhcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZWNlbnQgZmlsZXNcbiAgICBjb25zdCByZWNlbnRGaWxlc0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlY2VudC1maWxlcycgfSk7XG4gICAgcmVjZW50RmlsZXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdSZWNlbnQgRmlsZXMnIH0pO1xuICAgIHRoaXMudXBkYXRlUmVjZW50RmlsZXMocmVjZW50RmlsZXNFbCk7XG5cbiAgICAvLyBBZ2VudCBzdGF0dXNcbiAgICBjb25zdCBhZ2VudFN0YXR1c0VsID0gc2lkZWJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cycgfSk7XG4gICAgYWdlbnRTdGF0dXNFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBZ2VudCBTdGF0dXMnIH0pO1xuICAgIHRoaXMudXBkYXRlQWdlbnRTdGF0dXMoYWdlbnRTdGF0dXNFbCk7XG5cbiAgICAvLyBBY3Rpdml0eSBmZWVkXG4gICAgY29uc3QgYWN0aXZpdHlFbCA9IHNpZGViYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS1mZWVkJyB9KTtcbiAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FjdGl2aXR5IEZlZWQnIH0pO1xuICAgIHRoaXMuY3JlYXRlQWN0aXZpdHlGZWVkKGFjdGl2aXR5RWwpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDaGF0U2VjdGlvbihjaGF0RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQ2hhdCBoZWFkZXJcbiAgICBjb25zdCBjaGF0SGVhZGVyID0gY2hhdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGNoYXRIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQUkgQ2hhdCBJbnRlcmZhY2UnIH0pO1xuXG4gICAgLy8gQ2hhdCBoaXN0b3J5XG4gICAgY29uc3QgY2hhdEhpc3RvcnkgPSBjaGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWhpc3RvcnknIH0pO1xuICAgIGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1dlbGNvbWUhIFN0YXJ0IGEgY29udmVyc2F0aW9uIHdpdGggeW91ciBBSSBhc3Npc3RhbnQuJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhdC13ZWxjb21lJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hhdCBpbnB1dFxuICAgIGNvbnN0IGNoYXRJbnB1dCA9IGNoYXRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnIH0pO1xuICAgIGNvbnN0IHRleHRhcmVhID0gY2hhdElucHV0LmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgXG4gICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBtZXNzYWdlIGhlcmUuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGF0LXRleHRhcmVhJ1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHNlbmRCdXR0b24gPSBjaGF0SW5wdXQuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICBzZW5kQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5zZW5kQ2hhdE1lc3NhZ2UobWVzc2FnZSwgY2hhdEhpc3RvcnkpO1xuICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgRW50ZXIga2V5XG4gICAgdGV4dGFyZWEub25rZXlkb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNlbmRCdXR0b24uY2xpY2soKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVXb3JrZmxvd1NlY3Rpb24od29ya2Zsb3dFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBXb3JrZmxvdyBoZWFkZXJcbiAgICBjb25zdCB3b3JrZmxvd0hlYWRlciA9IHdvcmtmbG93RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXInIH0pO1xuICAgIHdvcmtmbG93SGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1dvcmtmbG93IE1hbmFnZW1lbnQnIH0pO1xuXG4gICAgLy8gV29ya2Zsb3cgZ3JpZFxuICAgIGNvbnN0IHdvcmtmbG93R3JpZCA9IHdvcmtmbG93RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1ncmlkJyB9KTtcblxuICAgIC8vIFByZWRlZmluZWQgd29ya2Zsb3dzXG4gICAgY29uc3Qgd29ya2Zsb3dzID0gW1xuICAgICAgeyBuYW1lOiAnQW5hbHl6ZSBWYXVsdCcsIGljb246ICfwn5SNJywgZGVzY3JpcHRpb246ICdBbmFseXplIHlvdXIgdmF1bHQgc3RydWN0dXJlIGFuZCBjb250ZW50JyB9LFxuICAgICAgeyBuYW1lOiAnR2VuZXJhdGUgU3VtbWFyeScsIGljb246ICfwn5OdJywgZGVzY3JpcHRpb246ICdDcmVhdGUgc3VtbWFyaWVzIG9mIHlvdXIgbm90ZXMnIH0sXG4gICAgICB7IG5hbWU6ICdMaW5rIEFuYWx5c2lzJywgaWNvbjogJ/CflJcnLCBkZXNjcmlwdGlvbjogJ0FuYWx5emUgbm90ZSBjb25uZWN0aW9ucyBhbmQgcmVsYXRpb25zaGlwcycgfSxcbiAgICAgIHsgbmFtZTogJ1RhZyBNYW5hZ2VtZW50JywgaWNvbjogJ/Cfj7fvuI8nLCBkZXNjcmlwdGlvbjogJ09yZ2FuaXplIGFuZCBtYW5hZ2UgeW91ciB0YWdzJyB9LFxuICAgICAgeyBuYW1lOiAnRGFpbHkgUGxhbm5pbmcnLCBpY29uOiAn8J+ThScsIGRlc2NyaXB0aW9uOiAnUGxhbiB5b3VyIGRheSBiYXNlZCBvbiB5b3VyIG5vdGVzJyB9LFxuICAgICAgeyBuYW1lOiAnS25vd2xlZGdlIEdyYXBoJywgaWNvbjogJ/CflbjvuI8nLCBkZXNjcmlwdGlvbjogJ1Zpc3VhbGl6ZSB5b3VyIGtub3dsZWRnZSBjb25uZWN0aW9ucycgfVxuICAgIF07XG5cbiAgICB3b3JrZmxvd3MuZm9yRWFjaCh3b3JrZmxvdyA9PiB7XG4gICAgICBjb25zdCB3b3JrZmxvd0NhcmQgPSB3b3JrZmxvd0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC13b3JrZmxvdy1jYXJkJyB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiB3b3JrZmxvdy5pY29uLCBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWljb24nIH0pO1xuICAgICAgd29ya2Zsb3dDYXJkLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogd29ya2Zsb3cubmFtZSB9KTtcbiAgICAgIHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgncCcsIHsgdGV4dDogd29ya2Zsb3cuZGVzY3JpcHRpb24gfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJ1bkJ1dHRvbiA9IHdvcmtmbG93Q2FyZC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ1J1bicsXG4gICAgICAgIGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBydW5CdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMucnVuV29ya2Zsb3cod29ya2Zsb3cubmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUFuYWx5dGljc1NlY3Rpb24oYW5hbHl0aWNzRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQW5hbHl0aWNzIGhlYWRlclxuICAgIGNvbnN0IGFuYWx5dGljc0hlYWRlciA9IGFuYWx5dGljc0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtYW5hbHl0aWNzLWhlYWRlcicgfSk7XG4gICAgYW5hbHl0aWNzSGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZhdWx0IEFuYWx5dGljcycgfSk7XG5cbiAgICAvLyBDaGFydHMgcGxhY2Vob2xkZXJcbiAgICBjb25zdCBjaGFydHNDb250YWluZXIgPSBhbmFseXRpY3NFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXJ0cy1jb250YWluZXInIH0pO1xuICAgIFxuICAgIC8vIEZpbGUgdHlwZSBkaXN0cmlidXRpb25cbiAgICBjb25zdCBmaWxlVHlwZUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgZmlsZVR5cGVDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxlIFR5cGUgRGlzdHJpYnV0aW9uJyB9KTtcbiAgICBmaWxlVHlwZUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ0NoYXJ0IHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIE5vdGUgY3JlYXRpb24gdGltZWxpbmVcbiAgICBjb25zdCB0aW1lbGluZUNoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgdGltZWxpbmVDaGFydC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdOb3RlIENyZWF0aW9uIFRpbWVsaW5lJyB9KTtcbiAgICB0aW1lbGluZUNoYXJ0LmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgdGV4dDogJ1RpbWVsaW5lIHZpc3VhbGl6YXRpb24gY29taW5nIHNvb24uLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jaGFydC1wbGFjZWhvbGRlcidcbiAgICB9KTtcblxuICAgIC8vIFRhZyB1c2FnZVxuICAgIGNvbnN0IHRhZ0NoYXJ0ID0gY2hhcnRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtY2FyZCcgfSk7XG4gICAgdGFnQ2hhcnQuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnVGFnIFVzYWdlJyB9KTtcbiAgICB0YWdDaGFydC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIHRleHQ6ICdUYWcgYW5hbHl0aWNzIGNvbWluZyBzb29uLi4uJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtY2hhcnQtcGxhY2Vob2xkZXInXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN3aXRjaFRhYih0YWJOYW1lOiBzdHJpbmcsIGJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYWxsIHRhYnNcbiAgICB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52YXVsdHBpbG90LXRhYi1idXR0b24nKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLCAudmF1bHRwaWxvdC13b3JrZmxvdy1zZWN0aW9uLCAudmF1bHRwaWxvdC1hbmFseXRpY3Mtc2VjdGlvbicpLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICBzZWN0aW9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gY2xpY2tlZCB0YWJcbiAgICBidXR0b24uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgLy8gU2hvdyBjb3JyZXNwb25kaW5nIGNvbnRlbnRcbiAgICBpZiAodGFiTmFtZSA9PT0gJ2NoYXQnKSB7XG4gICAgICB0aGlzLmNoYXRFbC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfSBlbHNlIGlmICh0YWJOYW1lID09PSAnd29ya2Zsb3cnKSB7XG4gICAgICB0aGlzLndvcmtmbG93RWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSBpZiAodGFiTmFtZSA9PT0gJ2FuYWx5dGljcycpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24nKT8uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZENoYXRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZywgY2hhdEhpc3Rvcnk6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZVxuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgdXNlcicgfSk7XG4gICAgdXNlck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbWVzc2FnZSB9KTtcblxuICAgIC8vIEFkZCB0aGlua2luZyBpbmRpY2F0b3JcbiAgICBjb25zdCB0aGlua2luZ01lc3NhZ2UgPSBjaGF0SGlzdG9yeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZSBhc3Npc3RhbnQgdGhpbmtpbmcnIH0pO1xuICAgIHRoaW5raW5nTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnVGhpbmtpbmcuLi4nIH0pO1xuXG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbVxuICAgIGNoYXRIaXN0b3J5LnNjcm9sbFRvcCA9IGNoYXRIaXN0b3J5LnNjcm9sbEhlaWdodDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZW5kQ2hhdCh7IG1lc3NhZ2UsIGNvbnRleHQ6IG51bGwgfSk7XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSB0aGlua2luZyBpbmRpY2F0b3JcbiAgICAgIHRoaW5raW5nTWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgYXNzaXN0YW50JyB9KTtcbiAgICAgICAgYXNzaXN0YW50TWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gY2hhdEhpc3RvcnkuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2UgZXJyb3InIH0pO1xuICAgICAgICBlcnJvck1lc3NhZ2UuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0Vycm9yOiBDb3VsZCBub3QgZ2V0IHJlc3BvbnNlIGZyb20gQUknIH0pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBSZW1vdmUgdGhpbmtpbmcgaW5kaWNhdG9yXG4gICAgICB0aGlua2luZ01lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoYXRIaXN0b3J5LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlIGVycm9yJyB9KTtcbiAgICAgIGVycm9yTWVzc2FnZS5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnRXJyb3I6IENvbm5lY3Rpb24gZmFpbGVkJyB9KTtcbiAgICB9XG5cbiAgICAvLyBTY3JvbGwgdG8gYm90dG9tXG4gICAgY2hhdEhpc3Rvcnkuc2Nyb2xsVG9wID0gY2hhdEhpc3Rvcnkuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBydW5Xb3JrZmxvdyh3b3JrZmxvd05hbWU6IHN0cmluZykge1xuICAgIG5ldyBOb3RpY2UoYFJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfWApO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBNYXAgd29ya2Zsb3cgbmFtZXMgdG8gYXBwcm9wcmlhdGUgYWN0aW9uc1xuICAgICAgc3dpdGNoICh3b3JrZmxvd05hbWUpIHtcbiAgICAgICAgY2FzZSAnQW5hbHl6ZSBWYXVsdCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5hbHl6ZVZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0RhaWx5IFBsYW5uaW5nJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5wbGFuTXlEYXkoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBGb3Igbm93LCBzaG93IGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICBuZXcgTm90aWNlKGAke3dvcmtmbG93TmFtZX0gd29ya2Zsb3cgaXMgY29taW5nIHNvb24hYCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJ1bm5pbmcgd29ya2Zsb3c6ICR7d29ya2Zsb3dOYW1lfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3RhdHVzKCkge1xuICAgIHRoaXMuc3RhdHVzRWwuZW1wdHkoKTtcbiAgICB0aGlzLnN0YXR1c0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Nvbm5lY3Rpb24gU3RhdHVzJyB9KTtcblxuICAgIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IHRoaXMuc3RhdHVzRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEJhY2tlbmQgc3RhdHVzXG4gICAgY29uc3QgYmFja2VuZFN0YXR1cyA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pdGVtJyB9KTtcbiAgICBiYWNrZW5kU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQmFja2VuZDogJyB9KTtcbiAgICBjb25zdCBiYWNrZW5kSW5kaWNhdG9yID0gYmFja2VuZFN0YXR1cy5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3InLFxuICAgICAgdGV4dDogJ0NoZWNraW5nLi4uJ1xuICAgIH0pO1xuXG4gICAgLy8gV2ViU29ja2V0IHN0YXR1c1xuICAgIGNvbnN0IHdzU3RhdHVzID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0nIH0pO1xuICAgIHdzU3RhdHVzLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnV2ViU29ja2V0OiAnIH0pO1xuICAgIGNvbnN0IHdzSW5kaWNhdG9yID0gd3NTdGF0dXMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1zdGF0dXMtaW5kaWNhdG9yJyxcbiAgICAgIHRleHQ6IHRoaXMucGx1Z2luLmlzV2ViU29ja2V0Q29ubmVjdGVkKCkgPyAn8J+foiBDb25uZWN0ZWQnIDogJ/CflLQgRGlzY29ubmVjdGVkJ1xuICAgIH0pO1xuXG4gICAgLy8gQ2hlY2sgYmFja2VuZCBzdGF0dXNcbiAgICB0aGlzLmNoZWNrQmFja2VuZFN0YXR1cyhiYWNrZW5kSW5kaWNhdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tCYWNrZW5kU3RhdHVzKGluZGljYXRvcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmhlYWx0aENoZWNrKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5lcnJvcj8uaW5jbHVkZXMoJzQwMCcpKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBpbmRpY2F0b3IudGV4dENvbnRlbnQgPSAn8J+foiBDb25uZWN0ZWQnO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ/CflLQgRXJyb3InO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3ZhdWx0cGlsb3Qtc3RhdHVzLWluZGljYXRvciB2YXVsdHBpbG90LXN0YXR1cy1lcnJvcic7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGluZGljYXRvci50ZXh0Q29udGVudCA9ICfwn5S0IE9mZmxpbmUnO1xuICAgICAgaW5kaWNhdG9yLmNsYXNzTmFtZSA9ICd2YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3IgdmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVRdWlja0FjdGlvbnMoKSB7XG4gICAgdGhpcy5xdWlja0FjdGlvbnNFbC5lbXB0eSgpO1xuICAgIHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVpY2sgQWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBhY3Rpb25zR3JpZCA9IHRoaXMucXVpY2tBY3Rpb25zRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb25zLWdyaWQnIH0pO1xuXG4gICAgLy8gUmVmcmVzaCBidXR0b25cbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5SEIFJlZnJlc2gnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZhdWx0U3RhdHMoKTtcbiAgICB9O1xuXG4gICAgLy8gT3BlbiBzaWRlYmFyIHZpZXdcbiAgICBjb25zdCBzaWRlYmFyQnV0dG9uID0gYWN0aW9uc0dyaWQuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICfwn5OLIFNpZGViYXIgVmlldycsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgc2lkZWJhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5wbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cbiAgICAvLyBPcGVuIG1vZGFsIGNoYXRcbiAgICBjb25zdCBtb2RhbENoYXRCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ/CfkqwgTW9kYWwgQ2hhdCcsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWFjdGlvbi1idXR0b24nXG4gICAgfSk7XG4gICAgbW9kYWxDaGF0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuQ2hhdE1vZGFsKCk7XG5cbiAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgY29uc3Qgd29ya2Zsb3dCdXR0b24gPSBhY3Rpb25zR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ+Kame+4jyBXb3JrZmxvd3MnLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uJ1xuICAgIH0pO1xuICAgIHdvcmtmbG93QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5vcGVuV29ya2Zsb3dNb2RhbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVWYXVsdFN0YXRzKCkge1xuICAgIHRoaXMudmF1bHRTdGF0c0VsLmVtcHR5KCk7XG4gICAgdGhpcy52YXVsdFN0YXRzRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVmF1bHQgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMudmF1bHRTdGF0c0VsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RhdHMtY29udGFpbmVyJyB9KTtcblxuICAgIC8vIEdldCB2YXVsdCBzdGF0aXN0aWNzXG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBbXG4gICAgICB7IGxhYmVsOiAnVG90YWwgRmlsZXMnLCB2YWx1ZTogZmlsZXMubGVuZ3RoLnRvU3RyaW5nKCkgfSxcbiAgICAgIHsgbGFiZWw6ICdNYXJrZG93biBGaWxlcycsIHZhbHVlOiBtYXJrZG93bkZpbGVzLmxlbmd0aC50b1N0cmluZygpIH0sXG4gICAgICB7IGxhYmVsOiAnRm9sZGVycycsIHZhbHVlOiB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKS5sZW5ndGgudG9TdHJpbmcoKSB9XG4gICAgXTtcblxuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBzdGF0RWwgPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXN0YXQtaXRlbScgfSk7XG4gICAgICBzdGF0RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogc3RhdC52YWx1ZSwgY2xzOiAndmF1bHRwaWxvdC1zdGF0LXZhbHVlJyB9KTtcbiAgICAgIHN0YXRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBzdGF0LmxhYmVsLCBjbHM6ICd2YXVsdHBpbG90LXN0YXQtbGFiZWwnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVSZWNlbnRGaWxlcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcmVjZW50RmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpXG4gICAgICAuc2xpY2UoMCwgNSk7XG5cbiAgICByZWNlbnRGaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgY29uc3QgZmlsZUVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVjZW50LWZpbGUnIH0pO1xuICAgICAgZmlsZUVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBmaWxlLmJhc2VuYW1lIH0pO1xuICAgICAgZmlsZUVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5wYXRoLCAnJywgZmFsc2UpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQWdlbnRTdGF0dXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMubG9hZEFnZW50SW5mbyhjb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRJbmZvKGNvbnRhaW5lcj86IEhUTUxFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFnZW50cygpO1xuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSAmJiBjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgYWdlbnRDb3VudCA9IHJlc3BvbnNlLmRhdGEubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3RpdmVBZ2VudHMgPSByZXNwb25zZS5kYXRhLmZpbHRlcigoYWdlbnQ6IGFueSkgPT4gYWdlbnQuYWN0aXZlKS5sZW5ndGg7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZ2VudEluZm8gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1pbmZvJyB9KTtcbiAgICAgICAgYWdlbnRJbmZvLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGAke2FjdGl2ZUFnZW50c30vJHthZ2VudENvdW50fSBhY3RpdmVgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKChhZ2VudDogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgYWdlbnRFbCA9IGFnZW50SW5mby5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFnZW50LWl0ZW0nIH0pO1xuICAgICAgICAgIGFnZW50RWwuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGFnZW50Lm5hbWUgfSk7XG4gICAgICAgICAgYWdlbnRFbC5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiBhZ2VudC5hY3RpdmUgPyAn8J+foicgOiAn8J+UtCcsXG4gICAgICAgICAgICBjbHM6ICd2YXVsdHBpbG90LWFnZW50LXN0YXR1cydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgaWYgYWdlbnRzIGNhbid0IGJlIGxvYWRlZFxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQWN0aXZpdHlGZWVkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBhY3Rpdml0aWVzID0gW1xuICAgICAgeyB0aW1lOiAnSnVzdCBub3cnLCBhY3Rpdml0eTogJ1ZhdWx0UGlsb3Qgc3RhcnRlZCcgfSxcbiAgICAgIHsgdGltZTogJzUgbWluIGFnbycsIGFjdGl2aXR5OiAnQ29ubmVjdGlvbiBlc3RhYmxpc2hlZCcgfSxcbiAgICAgIHsgdGltZTogJzEgaG91ciBhZ28nLCBhY3Rpdml0eTogJ0xhc3QgdmF1bHQgYW5hbHlzaXMnIH1cbiAgICBdO1xuXG4gICAgYWN0aXZpdGllcy5mb3JFYWNoKGFjdGl2aXR5ID0+IHtcbiAgICAgIGNvbnN0IGFjdGl2aXR5RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hY3Rpdml0eS1pdGVtJyB9KTtcbiAgICAgIGFjdGl2aXR5RWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogYWN0aXZpdHkuYWN0aXZpdHkgfSk7XG4gICAgICBhY3Rpdml0eUVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGFjdGl2aXR5LnRpbWUsIGNsczogJ3ZhdWx0cGlsb3QtYWN0aXZpdHktdGltZScgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFkZEZ1bGxUYWJTdHlsZXMoKSB7XG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmF1bHRwaWxvdC1mdWxsLXRhYi1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3QtZnVsbC10YWItc3R5bGVzJztcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC52YXVsdHBpbG90LWZ1bGwtdGFiLXZpZXcge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWFpbi1sYXlvdXQge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIGdhcDogMXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1sZWZ0LXNpZGViYXIge1xuICAgICAgICAgIHdpZHRoOiAyNTBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tYWluLWNvbnRlbnQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmlnaHQtc2lkZWJhciB7XG4gICAgICAgICAgd2lkdGg6IDI1MHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXNpZGViYXItaGVhZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXRhYi1uYXYge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbiB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtdGFiLWJ1dHRvbi5hY3RpdmUge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC10YWItY29udGVudCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtc2VjdGlvbixcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbixcbiAgICAgICAgLnZhdWx0cGlsb3QtYW5hbHl0aWNzLXNlY3Rpb24ge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1zZWN0aW9uLmFjdGl2ZSxcbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctc2VjdGlvbi5hY3RpdmUsXG4gICAgICAgIC52YXVsdHBpbG90LWFuYWx5dGljcy1zZWN0aW9uLmFjdGl2ZSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaGlzdG9yeSB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWlucHV0IHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdGV4dGFyZWEge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LXNlbmQtYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiBmaXQtY29udGVudDtcbiAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIG1heC13aWR0aDogODAlO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS51c2VyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLmFzc2lzdGFudCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlLnRoaW5raW5nIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjc7XG4gICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtbWVzc2FnZS5lcnJvciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWdyaWQge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXdvcmtmbG93LWljb24ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtd29ya2Zsb3ctcnVuLWJ1dHRvbiB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydHMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMzAwcHgsIDFmcikpO1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGFydC1jYXJkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXJ0LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICBwYWRkaW5nOiA0MHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXJlY2VudC1maWxlIHtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZWNlbnQtZmlsZTpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWdlbnQtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0eS1pdGVtIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgcGFkZGluZzogNnB4IDA7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpdml0eS10aW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDJweDtcbiAgICAgICAgfVxuICAgICAgICAvKiBJbmhlcml0IHN0eWxlcyBmcm9tIG9yaWdpbmFsIHZpZXcgKi9cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLFxuICAgICAgICAudmF1bHRwaWxvdC1xdWljay1hY3Rpb25zLFxuICAgICAgICAudmF1bHRwaWxvdC12YXVsdC1zdGF0cyB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXF1aWNrLWFjdGlvbnMgaDMsXG4gICAgICAgIC52YXVsdHBpbG90LXZhdWx0LXN0YXRzIGgzIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNHB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWl0ZW0ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1pbmRpY2F0b3Ige1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXR1cy1jb25uZWN0ZWQge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdHVzLWVycm9yLFxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0dXMtb2ZmbGluZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYWN0aW9ucy1ncmlkIHtcbiAgICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1hY3Rpb24tYnV0dG9uIHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLW5vcm1hbCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFjdGlvbi1idXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0cy1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3Qtc3RhdC1pdGVtIHtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0YXQtdmFsdWUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDJweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGF0LWxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICBgO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBHbG9iYWwgYXBwIGluc3RhbmNlIC0gd2lsbCBiZSBzZXQgYnkgdGhlIG1haW4gcGx1Z2luXG5leHBvcnQgbGV0IGFwcDogQXBwO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXBwKGFwcEluc3RhbmNlOiBBcHApIHtcbiAgYXBwID0gYXBwSW5zdGFuY2U7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29udGVudCBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBtYXJrZG93biBmaWxlXG4gKiBAcmV0dXJucyBUaGUgbWFya2Rvd24gY29udGVudCAodHJ1bmNhdGVkIHRvIDgwMDAgY2hhcnMpIG9yIG51bGwgaWYgbm8gZmlsZSBpcyBhY3RpdmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZU1hcmtkb3duKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gIGlmICghZmlsZSkgcmV0dXJuIG51bGw7XG4gIFxuICAvLyBMYXJnZSBub3Rlcz8gU25pcCB0byA4MDAwIGNoYXJzIHRvIGtlZXAgdG9rZW5zIHJlYXNvbmFibGVcbiAgY29uc3QgdGV4dCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICByZXR1cm4gdGV4dC5zbGljZSgwLCA4XzAwMCk7XG59XG4iLCJpbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWYXVsdFBpbG90UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSwgSW50ZW50IH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBnZXRBY3RpdmVNYXJrZG93biB9IGZyb20gJy4vdmF1bHQtdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwbHVnaW46IFZhdWx0UGlsb3RQbHVnaW47XG4gIHByaXZhdGUgY2hhdENvbnRhaW5lciE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0Q29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbWVzc2FnZXNFbCE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGlucHV0RWwhOiBIVE1MSW5wdXRFbGVtZW50O1xuICBwcml2YXRlIHNlbmRCdXR0b24hOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVmF1bHRQaWxvdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29udGVudEVsLmFkZENsYXNzKCd2YXVsdHBpbG90LWNoYXQtbW9kYWwnKTtcblxuICAgIC8vIE1vZGFsIGhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hhdC1oZWFkZXInIH0pO1xuICAgIGhlYWRlckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/CfpJYgVmF1bHRQaWxvdCBDaGF0JyB9KTtcbiAgICBcbiAgICBjb25zdCB0b29sYmFyRWwgPSBoZWFkZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtdG9vbGJhcicgfSk7XG4gICAgXG4gICAgLy8gQWRkIGluZm8gYWJvdXQgYXV0b21hdGljIG1vZGUgZGV0ZWN0aW9uXG4gICAgY29uc3QgYXV0b01vZGVJbmZvID0gdG9vbGJhckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1hdXRvLW1vZGUtaW5mbycsXG4gICAgICB0ZXh0OiAn4pqhIEF1dG9tYXRpYyBtb2RlIGRldGVjdGlvbiBlbmFibGVkJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFyIGNoYXQgYnV0dG9uXG4gICAgY29uc3QgY2xlYXJCdG4gPSB0b29sYmFyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsZWFyQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsZWFyQ2hhdCgpO1xuXG4gICAgLy8gQWdlbnQgc2VsZWN0b3IgKHdpbGwgYmUgcG9wdWxhdGVkIHdoZW4gYWdlbnRzIGFyZSBsb2FkZWQpXG4gICAgY29uc3QgYWdlbnRTZWxlY3QgPSB0b29sYmFyRWwuY3JlYXRlRWwoJ3NlbGVjdCcsIHsgY2xzOiAndmF1bHRwaWxvdC1hZ2VudC1zZWxlY3QnIH0pO1xuICAgIGFnZW50U2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHRleHQ6ICdBdXRvLXNlbGVjdCBBZ2VudCcsIHZhbHVlOiAnJyB9KTtcbiAgICB0aGlzLmxvYWRBZ2VudHMoYWdlbnRTZWxlY3QpO1xuXG4gICAgLy8gQ2hhdCBjb250YWluZXJcbiAgICB0aGlzLmNoYXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgLy8gTWVzc2FnZXMgYXJlYVxuICAgIHRoaXMubWVzc2FnZXNFbCA9IHRoaXMuY2hhdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWNoYXQtbWVzc2FnZXMnIH0pO1xuICAgIFxuICAgIC8vIElucHV0IGNvbnRhaW5lclxuICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSB0aGlzLmNoYXRDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1jaGF0LWlucHV0LWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgdGhpcy5pbnB1dEVsID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FzayBhIHF1ZXN0aW9uIG9yIGRlc2NyaWJlIHdoYXQgeW91IHdhbnQgdG8gYWNjb21wbGlzaC4uLicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWNoYXQtaW5wdXQnXG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2VuZCcsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3Qtc2VuZC1idXR0b24nXG4gICAgfSk7XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lcnNcbiAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnNlbmRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2VuZE1lc3NhZ2UoKTtcblxuICAgIC8vIEZvY3VzIHRoZSBpbnB1dFxuICAgIHRoaXMuaW5wdXRFbC5mb2N1cygpO1xuXG4gICAgLy8gTG9hZCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIHRoaXMubG9hZENvbnZlcnNhdGlvbkhpc3RvcnkoKTtcblxuICAgIC8vIEFkZCBzdHlsZXNcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkQWdlbnRzKHNlbGVjdEVsOiBIVE1MU2VsZWN0RWxlbWVudCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBZ2VudHMoKTtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGFnZW50ID0+IHtcbiAgICAgICAgICBjb25zdCBvcHRpb24gPSBzZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICAgICAgdGV4dDogYWdlbnQubmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiBhZ2VudC5pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgYWdlbnRzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWRDb252ZXJzYXRpb25IaXN0b3J5KCkge1xuICAgIC8vIE9ubHkgdHJ5IHRvIGxvYWQgY29udmVyc2F0aW9uIGhpc3RvcnkgaWYgd2UgaGF2ZSBhIGNvbnZlcnNhdGlvbiBJRFxuICAgIGlmICh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSh0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlcztcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNvbnZlcnNhdGlvbiBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgbm8gY29udmVyc2F0aW9uIElELCBzdGFydCBmcmVzaCAobm8gaGlzdG9yeSB0byBsb2FkKVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZSgpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybjtcblxuICAgIC8vIERpc2FibGUgaW5wdXQgd2hpbGUgcHJvY2Vzc2luZ1xuICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZGluZy4uLic7XG5cbiAgICAvLyBBZGQgdXNlciBtZXNzYWdlIHRvIFVJXG4gICAgdGhpcy5hZGRNZXNzYWdlKCd1c2VyJywgbWVzc2FnZSk7XG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gJyc7XG5cbiAgICB0cnkge1xuICAgICAgLy8g4pSA4pSAIGZldGNoIGNvbnRleHQgJiBpbnRlbnQgaW4gcGFyYWxsZWwg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICBjb25zdCBbY29udGV4dCwgaW50ZW50UmVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0QWN0aXZlTWFya2Rvd24oKSwgICAgICAgICAgLy8gcmV0dXJucyBzdHJpbmcgfCBudWxsXG4gICAgICAgIHRoaXMucGx1Z2luLmFwaUNsaWVudC5jbGFzc2lmeUludGVudChtZXNzYWdlKSAgLy8gUE9TVCAvaW50ZWxsaWdlbmNlL3BhcnNlXG4gICAgICBdKTtcblxuICAgICAgLy8gYnVpbGQgYSBnZW5lcmljIHBheWxvYWQ7IGNvbnRleHQgbWF5IGJlIG51bGwvZW1wdHlcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IG1lc3NhZ2UsIGNvbnRleHQgfTtcblxuICAgICAgLy8gU2hvdyBpbnRlbnQgZGV0ZWN0aW9uIGluIFVJIGlmIGRlYnVnIG1vZGUgaXMgZW5hYmxlZFxuICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dJbnRlbnREZWJ1Zykge1xuICAgICAgICB0aGlzLnNob3dJbnRlbnREZWJ1ZyhpbnRlbnRSZXMuaW50ZW50KTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgXG4gICAgICBpZiAoaW50ZW50UmVzLmludGVudCA9PT0gXCJhZ2VudFwiKSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJ1bldvcmtmbG93KHBheWxvYWQpOyAgICAgLy8gUE9TVCAvd29ya2Zsb3dcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGDimpnvuI8gQWdlbnQgTW9kZSAoYXV0by1kZXRlY3RlZClcXG5cXG4ke3Jlc3BvbnNlLmRhdGEucmVzdWx0fWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgnYXNzaXN0YW50JywgYEVycm9yIGluIGFnZW50IG1vZGU6ICR7cmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBnZXQgcmVzcG9uc2UnfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZW5kQ2hhdChwYXlsb2FkLCB7XG4gICAgICAgICAgY29udmVyc2F0aW9uX2lkOiB0aGlzLmN1cnJlbnRDb252ZXJzYXRpb25JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgYWdlbnRfaWQ6IHRoaXMuZ2V0U2VsZWN0ZWRBZ2VudCgpXG4gICAgICAgIH0pOyAgICAgICAgLy8gUE9TVCAvY2hhdFxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gcmVzcG9uc2UuZGF0YS5jb252ZXJzYXRpb25faWQ7XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCByZXNwb25zZS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtyZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGdldCByZXNwb25zZSd9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2FybiB1c2VyIGlmIHRoZXkgaGFkIGNvbnRleHQgZGlzYWJsZWRcbiAgICAgIGlmICghY29udGV4dD8ubGVuZ3RoKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCLimqDvuI8gTm8gdmF1bHQgY29udGVudCB3YXMgc2VudDsgcmVwbGllcyBtYXkgYmUgZ2VuZXJpYy5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yTXNnfWApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBSZS1lbmFibGUgaW5wdXRcbiAgICAgIHRoaXMuaW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZW5kQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRCdXR0b24udGV4dENvbnRlbnQgPSAnU2VuZCc7XG4gICAgICB0aGlzLmlucHV0RWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFNlbGVjdGVkQWdlbnQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBzZWxlY3RFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy52YXVsdHBpbG90LWFnZW50LXNlbGVjdCcpIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHJldHVybiBzZWxlY3RFbD8udmFsdWUgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRNZXNzYWdlKHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgIHJvbGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5lbXB0eSgpO1xuICAgIHRoaXMubWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHRoaXMucmVuZGVyTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKSB7XG4gICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6IGB2YXVsdHBpbG90LW1lc3NhZ2UgdmF1bHRwaWxvdC1tZXNzYWdlLSR7bWVzc2FnZS5yb2xlfWBcbiAgICB9KTtcblxuICAgIGNvbnN0IHJvbGVFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXJvbGUnLFxuICAgICAgdGV4dDogbWVzc2FnZS5yb2xlID09PSAndXNlcicgPyAnWW91JyA6ICdWYXVsdFBpbG90J1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LW1lc3NhZ2UtY29udGVudCdcbiAgICB9KTtcblxuICAgIC8vIFNpbXBsZSBtYXJrZG93biByZW5kZXJpbmcgZm9yIGJhc2ljIGZvcm1hdHRpbmdcbiAgICBjb250ZW50RWwuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJNYXJrZG93bihtZXNzYWdlLmNvbnRlbnQpO1xuXG4gICAgaWYgKG1lc3NhZ2UudGltZXN0YW1wKSB7XG4gICAgICBjb25zdCB0aW1lRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1tZXNzYWdlLXRpbWUnLFxuICAgICAgICB0ZXh0OiBuZXcgRGF0ZShtZXNzYWdlLnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTWFya2Rvd24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnJlcGxhY2UoL1xcKlxcKiguKj8pXFwqXFwqL2csICc8c3Ryb25nPiQxPC9zdHJvbmc+JylcbiAgICAgIC5yZXBsYWNlKC9cXCooLio/KVxcKi9nLCAnPGVtPiQxPC9lbT4nKVxuICAgICAgLnJlcGxhY2UoL2AoLio/KWAvZywgJzxjb2RlPiQxPC9jb2RlPicpXG4gICAgICAucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gIH1cblxuICBwcml2YXRlIHNjcm9sbFRvQm90dG9tKCkge1xuICAgIHRoaXMubWVzc2FnZXNFbC5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzRWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhckNoYXQoKSB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIHRoaXMuY3VycmVudENvbnZlcnNhdGlvbklkID0gbnVsbDtcbiAgICB0aGlzLm1lc3NhZ2VzRWwuZW1wdHkoKTtcbiAgICBuZXcgTm90aWNlKCdDaGF0IGNsZWFyZWQnKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnKSkge1xuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gJ3ZhdWx0cGlsb3QtY2hhdC1zdHlsZXMnO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDYwMHB4O1xuICAgICAgICAgIGhlaWdodDogNzAwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1oZWFkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtdG9vbGJhciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXV0by1tb2RlLWluZm8ge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFnZW50LXNlbGVjdCB7XG4gICAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1jaGF0LWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gODBweCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1tZXNzYWdlcyB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1tZXNzYWdlIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2UtdXNlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1hc3Npc3RhbnQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LW1lc3NhZ2Utcm9sZSB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS1jb250ZW50IHtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS40O1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IHRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtbWVzc2FnZS10aW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hhdC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWNoYXQtaW5wdXQge1xuICAgICAgICAgIGZsZXg6IDE7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zZW5kLWJ1dHRvbiB7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWludGVudC1kZWJ1ZyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICBtYXJnaW46IDhweCAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlci1ob3Zlcik7XG4gICAgICAgICAgYW5pbWF0aW9uOiBmYWRlSW5PdXQgM3MgZWFzZS1pbi1vdXQ7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW5PdXQge1xuICAgICAgICAgIDAlIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTsgfVxuICAgICAgICAgIDEwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxuICAgICAgICAgIDkwJSB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfVxuICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9XG4gICAgICAgIH1cbiAgICAgIGA7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0ludGVudERlYnVnKGludGVudDogc3RyaW5nKSB7XG4gICAgLy8gQ3JlYXRlIGEgc3VidGxlIG5vdGlmaWNhdGlvbiBzaG93aW5nIHRoZSBkZXRlY3RlZCBpbnRlbnRcbiAgICBjb25zdCBkZWJ1Z0VsID0gdGhpcy5tZXNzYWdlc0VsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWludGVudC1kZWJ1ZycsXG4gICAgICB0ZXh0OiBg8J+UjSBJbnRlbnQgZGV0ZWN0ZWQ6ICR7aW50ZW50ID09PSAnYWdlbnQnID8gJ+Kame+4jyBBZ2VudCBNb2RlJyA6ICfwn5KsIEFzayBNb2RlJ31gXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQXV0by1yZW1vdmUgYWZ0ZXIgMyBzZWNvbmRzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWJ1Z0VsLnJlbW92ZSgpO1xuICAgIH0sIDMwMDApO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZhdWx0UGlsb3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFdvcmtmbG93UmVxdWVzdCwgV29ya2Zsb3dSZXNwb25zZSwgV29ya2Zsb3dQcm9ncmVzcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV29ya2Zsb3dNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luO1xuICBwcml2YXRlIGdvYWxJbnB1dCE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIHByaXZhdGUgY29udGV4dElucHV0ITogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHJpdmF0ZSBleGVjdXRlQnV0dG9uITogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gIHByaXZhdGUgcHJvZ3Jlc3NDb250YWluZXIhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSByZXN1bHRzQ29udGFpbmVyITogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgaXNFeGVjdXRpbmcgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWYXVsdFBpbG90UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctbW9kYWwnKTtcblxuICAgIC8vIEhlYWRlclxuICAgIGNvbnN0IGhlYWRlckVsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICfimpnvuI8gV29ya2Zsb3cgRXhlY3V0aW9uJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnRGVmaW5lIGEgZ29hbCBhbmQgbGV0IFZhdWx0UGlsb3QgY3JlYXRlIGFuZCBleGVjdXRlIGEgY29tcHJlaGVuc2l2ZSB3b3JrZmxvdyB0byBhY2hpZXZlIGl0LicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWRlc2NyaXB0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gRm9ybVxuICAgIGNvbnN0IGZvcm1FbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXdvcmtmbG93LWZvcm0nIH0pO1xuXG4gICAgLy8gR29hbCBpbnB1dFxuICAgIGNvbnN0IGdvYWxDb250YWluZXIgPSBmb3JtRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1mb3JtLWdyb3VwJyB9KTtcbiAgICBnb2FsQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgXG4gICAgICB0ZXh0OiAnR29hbCAqJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmdvYWxJbnB1dCA9IGdvYWxDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdlLmcuLCBcIkNyZWF0ZSBhIGNvbXByZWhlbnNpdmUgc3R1ZHkgcGxhbiBmb3IgbWFjaGluZSBsZWFybmluZyBiYXNlZCBvbiBteSBub3Rlc1wiJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZ29hbC1pbnB1dCdcbiAgICB9KTtcblxuICAgIC8vIENvbnRleHQgaW5wdXRcbiAgICBjb25zdCBjb250ZXh0Q29udGFpbmVyID0gZm9ybUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1ncm91cCcgfSk7XG4gICAgY29udGV4dENvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IFxuICAgICAgdGV4dDogJ0FkZGl0aW9uYWwgQ29udGV4dCAob3B0aW9uYWwpJyxcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtZm9ybS1sYWJlbCdcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHRJbnB1dCA9IGNvbnRleHRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgcGxhY2Vob2xkZXI6ICdQcm92aWRlIGFueSBhZGRpdGlvbmFsIGNvbnRleHQsIGNvbnN0cmFpbnRzLCBvciByZXF1aXJlbWVudHMuLi4nLFxuICAgICAgY2xzOiAndmF1bHRwaWxvdC1jb250ZXh0LWlucHV0J1xuICAgIH0pO1xuXG4gICAgLy8gVmF1bHQgY29udGVudCBvcHRpb25zXG4gICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWZvcm0tZ3JvdXAnIH0pO1xuICAgIG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBcbiAgICAgIHRleHQ6ICdWYXVsdCBJbnRlZ3JhdGlvbicsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWZvcm0tbGFiZWwnXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmNsdWRlQWN0aXZlRmlsZSA9IG9wdGlvbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyBjbHM6ICd2YXVsdHBpbG90LWNoZWNrYm94LWxhYmVsJyB9KTtcbiAgICBjb25zdCBhY3RpdmVGaWxlQ2hlY2tib3ggPSBpbmNsdWRlQWN0aXZlRmlsZS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG4gICAgaW5jbHVkZUFjdGl2ZUZpbGUuY3JlYXRlU3Bhbih7IHRleHQ6ICdJbmNsdWRlIGFjdGl2ZSBmaWxlIGNvbnRlbnQnIH0pO1xuXG4gICAgY29uc3QgaW5jbHVkZUFsbEZpbGVzID0gb3B0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IGNsczogJ3ZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwnIH0pO1xuICAgIGNvbnN0IGFsbEZpbGVzQ2hlY2tib3ggPSBpbmNsdWRlQWxsRmlsZXMuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgIGluY2x1ZGVBbGxGaWxlcy5jcmVhdGVTcGFuKHsgdGV4dDogJ0luY2x1ZGUgYWxsIHZhdWx0IGZpbGVzIChtYXkgdGFrZSBsb25nZXIpJyB9KTtcblxuICAgIC8vIEV4ZWN1dGUgYnV0dG9uXG4gICAgdGhpcy5leGVjdXRlQnV0dG9uID0gZm9ybUVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnRXhlY3V0ZSBXb3JrZmxvdycsXG4gICAgICBjbHM6ICdtb2QtY3RhIHZhdWx0cGlsb3QtZXhlY3V0ZS1idXR0b24nXG4gICAgfSk7XG4gICAgdGhpcy5leGVjdXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmV4ZWN1dGVXb3JrZmxvdyhhY3RpdmVGaWxlQ2hlY2tib3guY2hlY2tlZCwgYWxsRmlsZXNDaGVja2JveC5jaGVja2VkKTtcblxuICAgIC8vIFByb2dyZXNzIGNvbnRhaW5lclxuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LXByb2dyZXNzLWNvbnRhaW5lcidcbiAgICB9KTtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBSZXN1bHRzIGNvbnRhaW5lclxuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgIGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0cy1jb250YWluZXInXG4gICAgfSk7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBGb2N1cyB0aGUgZ29hbCBpbnB1dFxuICAgIHRoaXMuZ29hbElucHV0LmZvY3VzKCk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlV29ya2Zsb3coaW5jbHVkZUFjdGl2ZUZpbGU6IGJvb2xlYW4sIGluY2x1ZGVBbGxGaWxlczogYm9vbGVhbikge1xuICAgIGNvbnN0IGdvYWwgPSB0aGlzLmdvYWxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgaWYgKCFnb2FsKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSBnb2FsIGZvciB0aGUgd29ya2Zsb3cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzRXhlY3V0aW5nID0gdHJ1ZTtcbiAgICB0aGlzLmV4ZWN1dGVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdFeGVjdXRpbmcuLi4nO1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICB0cnkge1xuICAgICAgLy8gUHJlcGFyZSB2YXVsdCBjb250ZW50XG4gICAgICBsZXQgdmF1bHRDb250ZW50ID0gJyc7XG4gICAgICBcbiAgICAgIGlmIChpbmNsdWRlQWN0aXZlRmlsZSkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgICB2YXVsdENvbnRlbnQgKz0gYD09PSAke2FjdGl2ZUZpbGUubmFtZX0gPT09XFxuJHtjb250ZW50fVxcblxcbmA7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGluY2x1ZGVBbGxGaWxlcykge1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzLnNsaWNlKDAsIDIwKSkgeyAvLyBMaW1pdCB0byBmaXJzdCAyMCBmaWxlcyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgIHZhdWx0Q29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2NvbnRlbnR9XFxuXFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgd29ya2Zsb3cgcmVxdWVzdFxuICAgICAgY29uc3QgcmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0ID0ge1xuICAgICAgICBnb2FsLFxuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHRJbnB1dC52YWx1ZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuICAgICAgICB2YXVsdF9jb250ZW50OiB2YXVsdENvbnRlbnQgfHwgdW5kZWZpbmVkXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBXZWJTb2NrZXQgbGlzdGVuZXIgZm9yIHByb2dyZXNzIHVwZGF0ZXNcbiAgICAgIGlmICh0aGlzLnBsdWdpbi5pc1dlYlNvY2tldENvbm5lY3RlZCgpKSB7XG4gICAgICAgIC8vIExpc3RlbiBmb3Igd29ya2Zsb3cgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgICAgICB0aGlzLnNldHVwUHJvZ3Jlc3NMaXN0ZW5lcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIHdvcmtmbG93XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudCEuZXhlY3V0ZVdvcmtmbG93KHJlcXVlc3QpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGlzcGxheVJlc3VsdHMocmVzcG9uc2UuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1dvcmtmbG93IGV4ZWN1dGlvbiBmYWlsZWQnKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgbmV3IE5vdGljZShgV29ya2Zsb3cgZXJyb3I6ICR7ZXJyb3JNc2d9YCk7XG4gICAgICB0aGlzLmRpc3BsYXlFcnJvcihlcnJvck1zZyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNFeGVjdXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXhlY3V0ZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5leGVjdXRlQnV0dG9uLnRleHRDb250ZW50ID0gJ0V4ZWN1dGUgV29ya2Zsb3cnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBQcm9ncmVzc0xpc3RlbmVyKCkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgY29ubmVjdGVkIHRvIHRoZSBXZWJTb2NrZXQgcHJvZ3Jlc3MgdXBkYXRlc1xuICAgIC8vIEZvciBub3csIHdlJ2xsIHNpbXVsYXRlIHByb2dyZXNzXG4gICAgdGhpcy5kaXNwbGF5UHJvZ3Jlc3MoJ0FuYWx5emluZyBnb2FsIGFuZCBjb250ZXh0Li4uJyk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRpc3BsYXlQcm9ncmVzcygnUGxhbm5pbmcgd29ya2Zsb3cgc3RlcHMuLi4nKTtcbiAgICB9LCAxMDAwKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheVByb2dyZXNzKCdFeGVjdXRpbmcgd29ya2Zsb3cuLi4nKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzcGxheVByb2dyZXNzKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cInZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyXCI+PC9kaXY+XG4gICAgICAgIDxzcGFuPiR7bWVzc2FnZX08L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkaXNwbGF5UmVzdWx0cyh3b3JrZmxvdzogV29ya2Zsb3dSZXNwb25zZSkge1xuICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLnJlc3VsdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyByZXN1bHRzXG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfinIUgV29ya2Zsb3cgQ29tcGxldGVkJyB9KTtcbiAgICBoZWFkZXJFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRXhlY3V0aW9uIHRpbWU6ICR7d29ya2Zsb3cuZXhlY3V0aW9uX3RpbWV9c2AsXG4gICAgICBjbHM6ICd2YXVsdHBpbG90LWV4ZWN1dGlvbi10aW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gTWFpbiByZXN1bHRcbiAgICBjb25zdCByZXN1bHRFbCA9IHRoaXMucmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LXJlc3VsdC1jb250ZW50JyB9KTtcbiAgICByZXN1bHRFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdSZXN1bHQnIH0pO1xuICAgIGNvbnN0IHJlc3VsdENvbnRlbnRFbCA9IHJlc3VsdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3QtcmVzdWx0LXRleHQnIH0pO1xuICAgIHJlc3VsdENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlck1hcmtkb3duKHdvcmtmbG93LnJlc3VsdCk7XG5cbiAgICAvLyBTdGVwcyB0YWtlblxuICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdGVwc0VsID0gdGhpcy5yZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtY29udGFpbmVyJyB9KTtcbiAgICAgIHN0ZXBzRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3RlcHMgVGFrZW4nIH0pO1xuICAgICAgY29uc3Qgc3RlcHNMaXN0ID0gc3RlcHNFbC5jcmVhdGVFbCgnb2wnLCB7IGNsczogJ3ZhdWx0cGlsb3Qtc3RlcHMtbGlzdCcgfSk7XG4gICAgICB3b3JrZmxvdy5zdGVwc190YWtlbi5mb3JFYWNoKHN0ZXAgPT4ge1xuICAgICAgICBzdGVwc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBzdGVwIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQXJ0aWZhY3RzXG4gICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYXJ0aWZhY3RzRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdHMtY29udGFpbmVyJyB9KTtcbiAgICAgIGFydGlmYWN0c0VsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0dlbmVyYXRlZCBBcnRpZmFjdHMnIH0pO1xuICAgICAgXG4gICAgICB3b3JrZmxvdy5hcnRpZmFjdHMuZm9yRWFjaCgoYXJ0aWZhY3QsIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGFydGlmYWN0RWwgPSBhcnRpZmFjdHNFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2YXVsdHBpbG90LWFydGlmYWN0JyB9KTtcbiAgICAgICAgYXJ0aWZhY3RFbC5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6IGFydGlmYWN0LnRpdGxlIH0pO1xuICAgICAgICBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgICAgICB0ZXh0OiBgVHlwZTogJHthcnRpZmFjdC50eXBlfWAsXG4gICAgICAgICAgY2xzOiAndmF1bHRwaWxvdC1hcnRpZmFjdC10eXBlJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBhcnRpZmFjdEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1NhdmUgYXMgTm90ZScsXG4gICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUFydGlmYWN0QXNOb3RlKGFydGlmYWN0LCBpbmRleCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGFsbCBidXR0b25cbiAgICBjb25zdCBhY3Rpb25zRWwgPSB0aGlzLnJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndmF1bHRwaWxvdC1yZXN1bHRzLWFjdGlvbnMnIH0pO1xuICAgIGNvbnN0IHNhdmVBbGxCdXR0b24gPSBhY3Rpb25zRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlIENvbXBsZXRlIFJlc3VsdHMgYXMgTm90ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVBbGxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZUNvbXBsZXRlUmVzdWx0c0FzTm90ZSh3b3JrZmxvdyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVBcnRpZmFjdEFzTm90ZShhcnRpZmFjdDogYW55LCBpbmRleDogbnVtYmVyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7YXJ0aWZhY3QudGl0bGUucmVwbGFjZSgvW15hLXpBLVowLTlcXHNdL2csICcnKX0ubWRgO1xuICAgICAgY29uc3QgY29udGVudCA9IGAjICR7YXJ0aWZhY3QudGl0bGV9XFxuXFxuJHthcnRpZmFjdC5jb250ZW50fWA7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICBuZXcgTm90aWNlKGBBcnRpZmFjdCBzYXZlZCBhcyAke2ZpbGVuYW1lfWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSBhcnRpZmFjdDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVDb21wbGV0ZVJlc3VsdHNBc05vdGUod29ya2Zsb3c6IFdvcmtmbG93UmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHMgJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgIFxuICAgICAgbGV0IGNvbnRlbnQgPSBgIyBWYXVsdFBpbG90IFdvcmtmbG93IFJlc3VsdHNcXG5cXG5gO1xuICAgICAgY29udGVudCArPSBgKipHb2FsOioqICR7dGhpcy5nb2FsSW5wdXQudmFsdWV9XFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCoqRXhlY3V0aW9uIFRpbWU6KiogJHt3b3JrZmxvdy5leGVjdXRpb25fdGltZX1zXFxuXFxuYDtcbiAgICAgIGNvbnRlbnQgKz0gYCMjIFJlc3VsdFxcblxcbiR7d29ya2Zsb3cucmVzdWx0fVxcblxcbmA7XG4gICAgICBcbiAgICAgIGlmICh3b3JrZmxvdy5zdGVwc190YWtlbiAmJiB3b3JrZmxvdy5zdGVwc190YWtlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gYCMjIFN0ZXBzIFRha2VuXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuc3RlcHNfdGFrZW4uZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb250ZW50ICs9IGAke2luZGV4ICsgMX0uICR7c3RlcH1cXG5gO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGVudCArPSAnXFxuJztcbiAgICAgIH1cblxuICAgICAgaWYgKHdvcmtmbG93LmFydGlmYWN0cyAmJiB3b3JrZmxvdy5hcnRpZmFjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50ICs9IGAjIyBHZW5lcmF0ZWQgQXJ0aWZhY3RzXFxuXFxuYDtcbiAgICAgICAgd29ya2Zsb3cuYXJ0aWZhY3RzLmZvckVhY2goYXJ0aWZhY3QgPT4ge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCMjIyAke2FydGlmYWN0LnRpdGxlfVxcblxcbiR7YXJ0aWZhY3QuY29udGVudH1cXG5cXG5gO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBjb250ZW50KTtcbiAgICAgIG5ldyBOb3RpY2UoYENvbXBsZXRlIHJlc3VsdHMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgcmVzdWx0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc3BsYXlFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgdGhpcy5yZXN1bHRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMucmVzdWx0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwidmF1bHRwaWxvdC1lcnJvclwiPlxuICAgICAgICA8aDM+4p2MIFdvcmtmbG93IEZhaWxlZDwvaDM+XG4gICAgICAgIDxwPiR7bWVzc2FnZX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAucmVwbGFjZSgvXFwqXFwqKC4qPylcXCpcXCovZywgJzxzdHJvbmc+JDE8L3N0cm9uZz4nKVxuICAgICAgLnJlcGxhY2UoL1xcKiguKj8pXFwqL2csICc8ZW0+JDE8L2VtPicpXG4gICAgICAucmVwbGFjZSgvYCguKj8pYC9nLCAnPGNvZGU+JDE8L2NvZGU+JylcbiAgICAgIC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhdWx0cGlsb3Qtd29ya2Zsb3ctc3R5bGVzJykpIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9ICd2YXVsdHBpbG90LXdvcmtmbG93LXN0eWxlcyc7XG4gICAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1tb2RhbCB7XG4gICAgICAgICAgd2lkdGg6IDcwMHB4O1xuICAgICAgICAgIG1heC1oZWlnaHQ6IDgwdmg7XG4gICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1oZWFkZXIge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC13b3JrZmxvdy1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1mb3JtLWdyb3VwIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWZvcm0tbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtZ29hbC1pbnB1dCxcbiAgICAgICAgLnZhdWx0cGlsb3QtY29udGV4dC1pbnB1dCB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwge1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtY2hlY2tib3gtbGFiZWwgaW5wdXQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWV4ZWN1dGUtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcHJvZ3Jlc3MtaXRlbSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1wcm9ncmVzcy1zcGlubmVyIHtcbiAgICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgICBoZWlnaHQ6IDE2cHg7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHRzLWhlYWRlciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1leGVjdXRpb24tdGltZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0LWNvbnRlbnQge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1yZXN1bHQtdGV4dCB7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LXN0ZXBzLWNvbnRhaW5lcixcbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1zdGVwcy1saXN0IHtcbiAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtYXJ0aWZhY3Qge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICB9XG4gICAgICAgIC52YXVsdHBpbG90LWFydGlmYWN0LXR5cGUge1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIH1cbiAgICAgICAgLnZhdWx0cGlsb3QtcmVzdWx0cy1hY3Rpb25zIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICAudmF1bHRwaWxvdC1lcnJvciB7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgXG4gIEFQSVJlc3BvbnNlLCBcbiAgQ2hhdFJlcXVlc3QsIFxuICBDaGF0UmVzcG9uc2UsIFxuICBDb252ZXJzYXRpb25IaXN0b3J5LFxuICBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCxcbiAgQ29waWxvdFJlcXVlc3QsIFxuICBDb3BpbG90UmVzcG9uc2UsXG4gIFdvcmtmbG93UmVxdWVzdCxcbiAgV29ya2Zsb3dSZXNwb25zZSxcbiAgQWdlbnQsXG4gIEFnZW50Q3JlYXRlUmVxdWVzdCxcbiAgQWdlbnRFeGVjdXRlUmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVxdWVzdCxcbiAgVmF1bHRDb250ZXh0UmVzcG9uc2UsXG4gIFRhc2tQbGFubmluZ1JlcXVlc3QsXG4gIFRhc2tQbGFubmluZ1Jlc3BvbnNlLFxuICBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QsXG4gIEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2UsXG4gIE1lbW9yeVVwZGF0ZVJlcXVlc3QsXG4gIFdlYlNvY2tldE1lc3NhZ2UsXG4gIEVycm9yUmVzcG9uc2UsXG4gIEludGVudCxcbiAgSW50ZW50UmVzdWx0LFxuICBJbnRlbnREZWJ1Z1xufSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEV2b0FnZW50WENsaWVudCB7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIGFwaUtleT86IHN0cmluZztcbiAgcHJpdmF0ZSB3ZWJzb2NrZXQ/OiBXZWJTb2NrZXQ7XG4gIHByaXZhdGUgd3NDYWxsYmFja3M6IE1hcDxzdHJpbmcsIChkYXRhOiBhbnkpID0+IHZvaWQ+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmw6IHN0cmluZywgYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3Q8VD4oXG4gICAgZW5kcG9pbnQ6IHN0cmluZywgXG4gICAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fVxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlPFQ+PiB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfSR7ZW5kcG9pbnR9YDtcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAuLi4ob3B0aW9ucy5oZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfHwge30pLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5hcGlLZXkpIHtcbiAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gSGFuZGxlIG5vbi1KU09OIHJlc3BvbnNlcyBncmFjZWZ1bGx5XG4gICAgICBsZXQgZGF0YTtcbiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgaWYgKGNvbnRlbnRUeXBlICYmIGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIGRhdGEuZXJyb3IgXG4gICAgICAgICAgPyBkYXRhLmVycm9yIFxuICAgICAgICAgIDogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFQSSBFcnJvciBbJHtyZXNwb25zZS5zdGF0dXN9XTpgLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyA/IHsgbWVzc2FnZTogZGF0YSB9IGFzIFQgOiBkYXRhLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQVBJIFJlcXVlc3QgRXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJyxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gSGVhbHRoIGNoZWNrXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8QVBJUmVzcG9uc2U8eyBzdGF0dXM6IHN0cmluZzsgdmVyc2lvbjogc3RyaW5nIH0+PiB7XG4gICAgY29uc29sZS5sb2coYFZhdWx0UGlsb3Q6IEF0dGVtcHRpbmcgaGVhbHRoIGNoZWNrIHRvICR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vaGVhbHRoYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDx7IHN0YXR1czogc3RyaW5nOyB2ZXJzaW9uOiBzdHJpbmcgfT4oJy9hcGkvb2JzaWRpYW4vaGVhbHRoJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnVmF1bHRQaWxvdDogSGVhbHRoIGNoZWNrIHJlc3VsdDonLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBBbHRlcm5hdGl2ZSBoZWFsdGggY2hlY2sgbWV0aG9kIGlmIHRoZSBtYWluIG9uZSBmYWlsc1xuICBhc3luYyBzaW1wbGVIZWFsdGhDaGVjaygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHsgc3RhdHVzOiBzdHJpbmcgfT4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9hcGkvb2JzaWRpYW4vaGVhbHRoYDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ0hFQUQnLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnb21pdCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLm9rIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA1KSB7IC8vIDQwNSBtZWFucyBzZXJ2ZXIgaXMgdXAgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBIRUFEXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7IHN0YXR1czogJ29rJyB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYFNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9YFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdDb25uZWN0aW9uIGZhaWxlZCdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hhdCBmdW5jdGlvbmFsaXR5XG4gIGFzeW5jIGNoYXQocmVxdWVzdDogQ2hhdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENoYXRSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jaGF0Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldENvbnZlcnNhdGlvbkhpc3RvcnkoY29udmVyc2F0aW9uSWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDUwKTogUHJvbWlzZTxBUElSZXNwb25zZTxDb252ZXJzYXRpb25IaXN0b3J5Pj4ge1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5OiBDb252ZXJzYXRpb25IaXN0b3J5UmVxdWVzdCA9IHtcbiAgICAgIGNvbnZlcnNhdGlvbl9pZDogY29udmVyc2F0aW9uSWQsXG4gICAgICBsaW1pdDogbGltaXQsXG4gICAgICBpbmNsdWRlX21lc3NhZ2VzOiB0cnVlXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jb252ZXJzYXRpb24vaGlzdG9yeScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEFQSVJlc3BvbnNlPHZvaWQ+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoYC9hcGkvb2JzaWRpYW4vY29udmVyc2F0aW9ucy8ke2NvbnZlcnNhdGlvbklkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSk7XG4gIH1cblxuICAvLyBDb3BpbG90IGZ1bmN0aW9uYWxpdHlcbiAgYXN5bmMgZ2V0Q29waWxvdENvbXBsZXRpb24ocmVxdWVzdDogQ29waWxvdFJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPENvcGlsb3RSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9jb3BpbG90L2NvbXBsZXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFdvcmtmbG93IGV4ZWN1dGlvblxuICBhc3luYyBleGVjdXRlV29ya2Zsb3cocmVxdWVzdDogV29ya2Zsb3dSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxXb3JrZmxvd1Jlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL3dvcmtmbG93Jywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE5ldyB1bmlmaWVkIEFQSSBtZXRob2RzIGZvciBzaW1wbGlmaWVkIGNvbnRleHQgcGFja2FnaW5nXG4gIGFzeW5jIHJ1bldvcmtmbG93KHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmcgfCBudWxsIH0pOiBQcm9taXNlPEFQSVJlc3BvbnNlPFdvcmtmbG93UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vd29ya2Zsb3cnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZ29hbDogcGF5bG9hZC5tZXNzYWdlLFxuICAgICAgICBjb250ZXh0OiBwYXlsb2FkLmNvbnRleHQgfHwgdW5kZWZpbmVkXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbmRDaGF0KHBheWxvYWQ6IHsgbWVzc2FnZTogc3RyaW5nOyBjb250ZXh0OiBzdHJpbmcgfCBudWxsIH0sIG9wdGlvbnM/OiB7IGNvbnZlcnNhdGlvbl9pZD86IHN0cmluZzsgYWdlbnRfaWQ/OiBzdHJpbmcgfSk6IFByb21pc2U8QVBJUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2NoYXQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbWVzc2FnZTogcGF5bG9hZC5tZXNzYWdlLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBwYXlsb2FkLmNvbnRleHQgfHwgdW5kZWZpbmVkLFxuICAgICAgICBjb252ZXJzYXRpb25faWQ6IG9wdGlvbnM/LmNvbnZlcnNhdGlvbl9pZCxcbiAgICAgICAgYWdlbnRfaWQ6IG9wdGlvbnM/LmFnZW50X2lkLFxuICAgICAgICBtb2RlOiAnYXNrJ1xuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICAvLyBBZ2VudCBtYW5hZ2VtZW50XG4gIGFzeW5jIGdldEFnZW50cygpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50W10+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vYWdlbnRzJyk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVBZ2VudChyZXF1ZXN0OiBBZ2VudENyZWF0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEFnZW50Pj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL2FnZW50cy9jcmVhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUFnZW50KHJlcXVlc3Q6IEFnZW50RXhlY3V0ZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9hZ2VudC9leGVjdXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhdWx0IGFuYWx5c2lzXG4gIGFzeW5jIGFuYWx5emVWYXVsdENvbnRleHQocmVxdWVzdDogVmF1bHRDb250ZXh0UmVxdWVzdCk6IFByb21pc2U8QVBJUmVzcG9uc2U8VmF1bHRDb250ZXh0UmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vdmF1bHQvY29udGV4dCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBUYXNrIHBsYW5uaW5nXG4gIGFzeW5jIHBsYW5UYXNrcyhyZXF1ZXN0OiBUYXNrUGxhbm5pbmdSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTxUYXNrUGxhbm5pbmdSZXNwb25zZT4+IHtcbiAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS9vYnNpZGlhbi9wbGFubmluZy90YXNrcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgfSk7XG4gIH1cblxuICAvLyBJbnRlbGxpZ2VuY2UgcGFyc2luZ1xuICBhc3luYyBwYXJzZUludGVsbGlnZW5jZShyZXF1ZXN0OiBJbnRlbGxpZ2VuY2VQYXJzZVJlcXVlc3QpOiBQcm9taXNlPEFQSVJlc3BvbnNlPEludGVsbGlnZW5jZVBhcnNlUmVzcG9uc2U+PiB7XG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3QoJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEludGVudCBjbGFzc2lmaWNhdGlvblxuICBhc3luYyBjbGFzc2lmeUludGVudChtZXNzYWdlOiBzdHJpbmcpOiBQcm9taXNlPEludGVudFJlc3VsdD4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnRSZXN1bHQ+KCcvYXBpL29ic2lkaWFuL2ludGVsbGlnZW5jZS9wYXJzZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pLFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byAnYXNrJyBtb2RlIGlmIGNsYXNzaWZpY2F0aW9uIGZhaWxzXG4gICAgcmV0dXJuIHsgaW50ZW50OiAnYXNrJywgY29uZmlkZW5jZTogMC41IH07XG4gIH1cblxuICAvLyBPcHRpb25hbDogRGVidWcgaW50ZW50IGNsYXNzaWZpY2F0aW9uXG4gIGFzeW5jIGV4cGxhaW5JbnRlbnQobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTxJbnRlbnREZWJ1Zz4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5tYWtlUmVxdWVzdDxJbnRlbnREZWJ1Zz4oJy9hcGkvb2JzaWRpYW4vaW50ZWxsaWdlbmNlL3BhcnNlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2UsIGluY2x1ZGVfZGVidWc6IHRydWUgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrIGRlYnVnIGluZm9cbiAgICByZXR1cm4geyBcbiAgICAgIGludGVudDogJ2FzaycsIFxuICAgICAgY29uZmlkZW5jZTogMC41LCBcbiAgICAgIHJlYXNvbmluZzogJ0NsYXNzaWZpY2F0aW9uIGZhaWxlZCwgZGVmYXVsdGluZyB0byBhc2sgbW9kZScgXG4gICAgfTtcbiAgfVxuXG4gIC8vIE1lbW9yeSBtYW5hZ2VtZW50XG4gIGFzeW5jIHVwZGF0ZU1lbW9yeShyZXF1ZXN0OiBNZW1vcnlVcGRhdGVSZXF1ZXN0KTogUHJvbWlzZTxBUElSZXNwb25zZTx2b2lkPj4ge1xuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL29ic2lkaWFuL21lbW9yeS91cGRhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gV2ViU29ja2V0IGZ1bmN0aW9uYWxpdHlcbiAgY29ubmVjdFdlYlNvY2tldChjYWxsYmFja3M6IHtcbiAgICBvbkNoYXQ/OiAoZGF0YTogYW55KSA9PiB2b2lkO1xuICAgIG9uV29ya2Zsb3dQcm9ncmVzcz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25Db3BpbG90PzogKGRhdGE6IGFueSkgPT4gdm9pZDtcbiAgICBvblZhdWx0U3luYz86IChkYXRhOiBhbnkpID0+IHZvaWQ7XG4gICAgb25JbnRlbnREZWJ1Zz86IChkZWJ1ZzogSW50ZW50RGVidWcpID0+IHZvaWQ7XG4gICAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIG9uQ29ubmVjdD86ICgpID0+IHZvaWQ7XG4gICAgb25EaXNjb25uZWN0PzogKCkgPT4gdm9pZDtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHdzVXJsID0gdGhpcy5iYXNlVXJsLnJlcGxhY2UoJ2h0dHAnLCAnd3MnKSArICcvd3Mvb2JzaWRpYW4nO1xuICAgIGNvbnNvbGUubG9nKGBWYXVsdFBpbG90OiBBdHRlbXB0aW5nIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvICR7d3NVcmx9YCk7XG4gICAgXG4gICAgdGhpcy53ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgY29ubmVjdGVkIHRvIEV2b0FnZW50WCcpO1xuICAgICAgY2FsbGJhY2tzLm9uQ29ubmVjdD8uKCk7XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogV2ViU29ja2V0TWVzc2FnZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgbWVzc2FnZSByZWNlaXZlZDonLCBtZXNzYWdlLnR5cGUpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNoYXQ/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnd29ya2Zsb3dfcHJvZ3Jlc3MnOlxuICAgICAgICAgICAgY2FsbGJhY2tzLm9uV29ya2Zsb3dQcm9ncmVzcz8uKG1lc3NhZ2UuZGF0YSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjb3BpbG90JzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkNvcGlsb3Q/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAndmF1bHRfc3luYyc6XG4gICAgICAgICAgICBjYWxsYmFja3Mub25WYXVsdFN5bmM/LihtZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnaW50ZW50X2RlYnVnJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkludGVudERlYnVnPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgICAgIGNhbGxiYWNrcy5vbkVycm9yPy4obWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignRmFpbGVkIHRvIHBhcnNlIFdlYlNvY2tldCBtZXNzYWdlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZyb20gRXZvQWdlbnRYJywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgIGNhbGxiYWNrcy5vbkRpc2Nvbm5lY3Q/LigpO1xuICAgIH07XG5cbiAgICB0aGlzLndlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdWYXVsdFBpbG90OiBXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgY2FsbGJhY2tzLm9uRXJyb3I/LignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3InKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzY29ubmVjdFdlYlNvY2tldCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy53ZWJzb2NrZXQpIHtcbiAgICAgIHRoaXMud2Vic29ja2V0LmNsb3NlKCk7XG4gICAgICB0aGlzLndlYnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBzZW5kV2ViU29ja2V0TWVzc2FnZSh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSk6IHZvaWQge1xuICAgIGlmICh0aGlzLndlYnNvY2tldCAmJiB0aGlzLndlYnNvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGUsIGRhdGEgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGlzV2ViU29ja2V0Q29ubmVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLndlYnNvY2tldD8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU47XG4gIH1cbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldywgVEZpbGUsIEVkaXRvclBvc2l0aW9uLCByZXF1ZXN0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdUYWIsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFZJRVdfVFlQRV9WQVVMVFBJTE9ULCBWYXVsdFBpbG90VmlldyB9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQiwgVmF1bHRQaWxvdEZ1bGxUYWJWaWV3IH0gZnJvbSAnLi9mdWxsLXRhYi12aWV3JztcbmltcG9ydCB7IENoYXRNb2RhbCB9IGZyb20gJy4vY2hhdC1tb2RhbCc7XG5pbXBvcnQgeyBXb3JrZmxvd01vZGFsIH0gZnJvbSAnLi93b3JrZmxvdy1tb2RhbCc7XG5pbXBvcnQgeyBFdm9BZ2VudFhDbGllbnQgfSBmcm9tICcuL2FwaS1jbGllbnQnO1xuaW1wb3J0IHsgVmF1bHRQaWxvdFNldHRpbmdzLCBDb3BpbG90UmVzcG9uc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZldGNoU2NoZWR1bGUsIGluamVjdFNjaGVkdWxlLCB2YWxpZGF0ZVNjaGVkdWxlTWFya2Rvd24gfSBmcm9tICcuL3BsYW5uZXInO1xuaW1wb3J0IHsgc2V0QXBwIH0gZnJvbSAnLi92YXVsdC11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhdWx0UGlsb3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5ncyE6IFZhdWx0UGlsb3RTZXR0aW5ncztcbiAgYXBpQ2xpZW50ITogRXZvQWdlbnRYQ2xpZW50O1xuICBwcml2YXRlIHdlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICBwcml2YXRlIGNvcGlsb3RFbmFibGVkID0gZmFsc2U7XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIGFwcCBpbnN0YW5jZSBmb3IgdmF1bHQtdXRpbHNcbiAgICBzZXRBcHAodGhpcy5hcHApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBBUEkgY2xpZW50XG4gICAgdGhpcy5hcGlDbGllbnQgPSBuZXcgRXZvQWdlbnRYQ2xpZW50KHRoaXMuc2V0dGluZ3MuYmFja2VuZFVybCwgdGhpcy5zZXR0aW5ncy5hcGlLZXkpO1xuXG4gICAgLy8gVGVzdCBiYWNrZW5kIGNvbm5lY3Rpb25cbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuaGVhbHRoQ2hlY2soKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlIG1haW4gaGVhbHRoIGNoZWNrIGZhaWxzIHdpdGggYSA0MDAsIHRyeSB0aGUgc2ltcGxlIGNoZWNrXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZXJyb3I/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gaGVhbHRoIGNoZWNrIGZhaWxlZCB3aXRoIDQwMCwgdHJ5aW5nIGFsdGVybmF0aXZlIG1ldGhvZCcpO1xuICAgICAgICBjb25zdCBzaW1wbGVSZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnNpbXBsZUhlYWx0aENoZWNrKCk7XG4gICAgICAgIGlmIChzaW1wbGVSZXNwb25zZS5zdWNjZXNzICYmIHNpbXBsZVJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBkYXRhOiB7IHN0YXR1czogc2ltcGxlUmVzcG9uc2UuZGF0YS5zdGF0dXMsIHZlcnNpb246ICd1bmtub3duJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICBuZXcgTm90aWNlKCfinIUgVmF1bHRQaWxvdCBjb25uZWN0ZWQgdG8gRXZvQWdlbnRYJywgMzAwMCk7XG4gICAgICAgIC8vIENvbm5lY3QgV2ViU29ja2V0IGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0KSB7XG4gICAgICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWx0aCBjaGVjayBmYWlsZWQ6JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCfimqDvuI8gRXZvQWdlbnRYIGJhY2tlbmQgb2ZmbGluZSAtIHNvbWUgZmVhdHVyZXMgbWF5IG5vdCB3b3JrJywgNTAwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0hlYWx0aCBjaGVjayBlcnJvcjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCfimqDvuI8gQ2Fubm90IGNvbm5lY3QgdG8gRXZvQWdlbnRYIGJhY2tlbmQnLCA1MDAwKTtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciB2aWV3c1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1ZBVUxUUElMT1QsXG4gICAgICAobGVhZikgPT4gbmV3IFZhdWx0UGlsb3RWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCLFxuICAgICAgKGxlYWYpID0+IG5ldyBWYXVsdFBpbG90RnVsbFRhYlZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuXG4gICAgLy8gQWRkIHJpYmJvbiBpY29uXG4gICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdib3QnLCAnVmF1bHRQaWxvdCcsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChldnQuY3RybEtleSB8fCBldnQubWV0YUtleSkge1xuICAgICAgICAvLyBPcGVuIGZ1bGwgdGFiIHZpZXcgb24gQ3RybC9DbWQgKyBjbGlja1xuICAgICAgICB0aGlzLmFjdGl2YXRlRnVsbFRhYlZpZXcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERlZmF1bHQgYWN0aW9uOiBvcGVuIGNoYXQgbW9kYWxcbiAgICAgICAgdGhpcy5vcGVuQ2hhdE1vZGFsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmliYm9uSWNvbkVsLmFkZENsYXNzKCd2YXVsdHBpbG90LXJpYmJvbi1jbGFzcycpO1xuICAgIHJpYmJvbkljb25FbC50aXRsZSA9ICdWYXVsdFBpbG90IChDdHJsK2NsaWNrIGZvciBEYXNoYm9hcmQpJztcblxuICAgIC8vIFJlZ2lzdGVyIGNvbW1hbmRzXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1jaGF0JyxcbiAgICAgIG5hbWU6ICdPcGVuIENoYXQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMub3BlbkNoYXRNb2RhbCgpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdleGVjdXRlLXdvcmtmbG93JyxcbiAgICAgIG5hbWU6ICdFeGVjdXRlIFdvcmtmbG93JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5Xb3JrZmxvd01vZGFsKClcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ2FuYWx5emUtdmF1bHQnLFxuICAgICAgbmFtZTogJ0FuYWx5emUgQ3VycmVudCBWYXVsdCcsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hbmFseXplVmF1bHQoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnY29waWxvdC1jb21wbGV0ZScsXG4gICAgICBuYW1lOiAnR2V0IEFJIENvbXBsZXRpb24nLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4gdGhpcy5nZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdxdWljay1jaGF0JyxcbiAgICAgIG5hbWU6ICdRdWljayBDaGF0IHdpdGggU2VsZWN0aW9uJyxcbiAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHRoaXMucXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3IpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFuLXRhc2tzJyxcbiAgICAgIG5hbWU6ICdQbGFuIFRhc2tzIGZyb20gTm90ZScsXG4gICAgICBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB0aGlzLnBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcilcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3BsYW4tbXktZGF5JyxcbiAgICAgIG5hbWU6ICdQbGFuIE15IERheScsXG4gICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5wbGFuTXlEYXkoKVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi12YXVsdHBpbG90LXZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBWaWV3JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLXZhdWx0cGlsb3QtZnVsbC10YWInLFxuICAgICAgbmFtZTogJ09wZW4gVmF1bHRQaWxvdCBEYXNoYm9hcmQnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVGdWxsVGFiVmlldygpXG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBlZGl0b3IgZXZlbnRzIGZvciBjb3BpbG90XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29waWxvdCAmJiB0aGlzLnNldHRpbmdzLmVuYWJsZUF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCB0aGlzLmhhbmRsZUtleVVwLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFZhdWx0UGlsb3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UX0ZVTExfVEFCKTtcbiAgICB0aGlzLmRpc2Nvbm5lY3RXZWJTb2NrZXQoKTtcbiAgfVxuXG4gIC8vIFdlYlNvY2tldCBNYW5hZ2VtZW50XG4gIGNvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgaWYgKHRoaXMud2Vic29ja2V0Q29ubmVjdGVkKSByZXR1cm47XG5cbiAgICB0aGlzLmFwaUNsaWVudC5jb25uZWN0V2ViU29ja2V0KHtcbiAgICAgIG9uQ2hhdDogKGRhdGEpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjaGF0IHVwZGF0ZXNcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjaGF0IHVwZGF0ZTonLCBkYXRhKTtcbiAgICAgIH0sXG4gICAgICBvbldvcmtmbG93UHJvZ3Jlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB3b3JrZmxvdyBwcm9ncmVzcyB1cGRhdGVzXG4gICAgICAgIG5ldyBOb3RpY2UoYFdvcmtmbG93OiAke2RhdGEuc3RlcH1gLCAyMDAwKTtcbiAgICAgIH0sXG4gICAgICBvbkNvcGlsb3Q6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSBjb3BpbG90IHN1Z2dlc3Rpb25zXG4gICAgICAgIHRoaXMuaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YSk7XG4gICAgICB9LFxuICAgICAgb25WYXVsdFN5bmM6IChkYXRhKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsZSB2YXVsdCBzeW5jaHJvbml6YXRpb25cbiAgICAgICAgY29uc29sZS5sb2coJ1ZhdWx0IHN5bmMgdXBkYXRlOicsIGRhdGEpO1xuICAgICAgfSxcbiAgICAgIG9uSW50ZW50RGVidWc6IChkZWJ1ZykgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgaW50ZW50IGRlYnVnIGluZm8gKG9ubHkgaW4gZGVidWcgbW9kZSlcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd0ludGVudERlYnVnICYmIHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0ludGVudCBkZWJ1ZzonLCBkZWJ1Zyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgbmV3IE5vdGljZShgV2ViU29ja2V0IGVycm9yOiAke2Vycm9yfWAsIDUwMDApO1xuICAgICAgfSxcbiAgICAgIG9uQ29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1dlYlNvY2tldCBjb25uZWN0ZWQnLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRGlzY29ubmVjdDogKCkgPT4ge1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdXZWJTb2NrZXQgZGlzY29ubmVjdGVkJywgMjAwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RXZWJTb2NrZXQoKSB7XG4gICAgdGhpcy5hcGlDbGllbnQuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XG4gIH1cblxuICBpc1dlYlNvY2tldENvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBNb2RhbCBNYW5hZ2VtZW50XG4gIG9wZW5DaGF0TW9kYWwoKSB7XG4gICAgbmV3IENoYXRNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuICB9XG5cbiAgb3BlbldvcmtmbG93TW9kYWwoKSB7XG4gICAgbmV3IFdvcmtmbG93TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcbiAgfVxuXG4gIC8vIENvbW1hbmQgSW1wbGVtZW50YXRpb25zXG4gIGFzeW5jIGFuYWx5emVWYXVsdCgpIHtcbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdBbmFseXppbmcgdmF1bHQuLi4nLCAwKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlc1xuICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgXG4gICAgICAvLyBJbmNsdWRlIHVwIHRvIDEwIGZpbGVzIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgQVBJXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMuc2xpY2UoMCwgMTApKSB7XG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgY29udGVudCArPSBgPT09ICR7ZmlsZS5uYW1lfSA9PT1cXG4ke2ZpbGVDb250ZW50fVxcblxcbmA7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuYW5hbHl6ZVZhdWx0Q29udGV4dCh7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGFuYWx5c2lzX3R5cGU6ICdpbnNpZ2h0cydcbiAgICAgIH0pO1xuXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhbmFseXNpcyBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBWYXVsdCBBbmFseXNpcyAke3RpbWVzdGFtcH0ubWRgO1xuICAgICAgICBcbiAgICAgICAgbGV0IGFuYWx5c2lzQ29udGVudCA9IGAjIFZhdWx0IEFuYWx5c2lzIC0gJHt0aW1lc3RhbXB9XFxuXFxuYDtcbiAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBBbmFseXNpc1xcblxcbiR7cmVzcG9uc2UuZGF0YS5hbmFseXNpc31cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaW5zaWdodHMgJiYgcmVzcG9uc2UuZGF0YS5pbnNpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYW5hbHlzaXNDb250ZW50ICs9IGAjIyBLZXkgSW5zaWdodHNcXG5cXG5gO1xuICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW5zaWdodHMuZm9yRWFjaChpbnNpZ2h0ID0+IHtcbiAgICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgLSAke2luc2lnaHR9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gJ1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMgJiYgcmVzcG9uc2UuZGF0YS5yZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGFuYWx5c2lzQ29udGVudCArPSBgIyMgUmVjb21tZW5kYXRpb25zXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgICAgICBhbmFseXNpc0NvbnRlbnQgKz0gYC0gJHtyZWN9XFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgYW5hbHlzaXNDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVmF1bHQgYW5hbHlzaXMgc2F2ZWQgYXMgJHtmaWxlbmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5lcnJvciB8fCAnQW5hbHlzaXMgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBBbmFseXNpcyBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRDb3BpbG90Q29tcGxldGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVDb3BpbG90KSB7XG4gICAgICBuZXcgTm90aWNlKCdDb3BpbG90IGlzIGRpc2FibGVkIGluIHNldHRpbmdzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSBjdXJyZW50TGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcbiAgICBjb25zdCBmdWxsVGV4dCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuXG4gICAgLy8gQ2xpZW50LXNpZGUgdmFsaWRhdGlvbiB0byBwcmV2ZW50IDQyMiBlcnJvcnNcbiAgICBpZiAoIWZ1bGxUZXh0IHx8IGZ1bGxUZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBjb21wbGV0ZSBlbXB0eSB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29waWxvdENvbXBsZXRpb24oe1xuICAgICAgICB0ZXh0OiBmdWxsVGV4dCxcbiAgICAgICAgY3Vyc29yX3Bvc2l0aW9uOiBlZGl0b3IucG9zVG9PZmZzZXQoY3Vyc29yKSxcbiAgICAgICAgZmlsZV90eXBlOiAnbWFya2Rvd24nLFxuICAgICAgICBjb250ZXh0OiB0ZXh0QmVmb3JlQ3Vyc29yXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAvLyBJbnNlcnQgY29tcGxldGlvbiBhdCBjdXJzb3JcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShyZXNwb25zZS5kYXRhLmNvbXBsZXRpb24sIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0NvbXBsZXRpb24gaW5zZXJ0ZWQnLCAyMDAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7cmVzcG9uc2UuZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYENvcGlsb3QgZXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcXVpY2tDaGF0V2l0aFNlbGVjdGlvbihlZGl0b3I6IEVkaXRvcikge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgbmV3IE5vdGljZSgnTm8gdGV4dCBzZWxlY3RlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNoYXQoe1xuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGV4cGxhaW4gb3IgYW5hbHl6ZSB0aGlzIHRleHQ6IFwiJHtzZWxlY3Rpb259XCJgLFxuICAgICAgICB2YXVsdF9jb250ZXh0OiBlZGl0b3IuZ2V0VmFsdWUoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gSW5zZXJ0IHJlc3BvbnNlIGJlbG93IHNlbGVjdGlvblxuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCd0bycpO1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gYFxcblxcbioqVmF1bHRQaWxvdCBBbmFseXNpczoqKlxcbiR7cmVzcG9uc2UuZGF0YS5yZXNwb25zZX1cXG5cXG5gO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKG5ld0xpbmUsIGN1cnNvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0FuYWx5c2lzIGluc2VydGVkJywgMjAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke3Jlc3BvbnNlLmVycm9yfWApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKGBDaGF0IGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5UYXNrc0Zyb21Ob3RlKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgIGlmICghY29udGVudC50cmltKCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGNvbnRlbnQgdG8gYW5hbHl6ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdGljZSA9IG5ldyBOb3RpY2UoJ1BsYW5uaW5nIHRhc2tzLi4uJywgMCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5wbGFuVGFza3Moe1xuICAgICAgICBnb2FsOiBgQ3JlYXRlIGEgdGFzayBwbGFuIGJhc2VkIG9uIHRoaXMgbm90ZTogJHthY3RpdmVGaWxlPy5uYW1lIHx8ICdVbnRpdGxlZCd9YCxcbiAgICAgICAgY29udGV4dDogY29udGVudCxcbiAgICAgICAgdGltZWZyYW1lOiAnMSB3ZWVrJ1xuICAgICAgfSk7XG5cbiAgICAgIG5vdGljZS5oaWRlKCk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRhc2sgcGxhbiBub3RlXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBUYXNrIFBsYW4gLSAke2FjdGl2ZUZpbGU/LmJhc2VuYW1lIHx8ICdVbnRpdGxlZCd9IC0gJHt0aW1lc3RhbXB9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXNrQ29udGVudCA9IGAjICR7cmVzcG9uc2UuZGF0YS5wbGFuLnRpdGxlfVxcblxcbmA7XG4gICAgICAgIHRhc2tDb250ZW50ICs9IGAke3Jlc3BvbnNlLmRhdGEucGxhbi5kZXNjcmlwdGlvbn1cXG5cXG5gO1xuICAgICAgICB0YXNrQ29udGVudCArPSBgKipFc3RpbWF0ZWQgRHVyYXRpb246KiogJHtyZXNwb25zZS5kYXRhLnBsYW4uZXN0aW1hdGVkX2R1cmF0aW9ufVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5wbGFuLnRhc2tzICYmIHJlc3BvbnNlLmRhdGEucGxhbi50YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGFza0NvbnRlbnQgKz0gYCMjIFRhc2tzXFxuXFxuYDtcbiAgICAgICAgICByZXNwb25zZS5kYXRhLnBsYW4udGFza3MuZm9yRWFjaCgodGFzazogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IHRhc2suc3RhdHVzID09PSAnY29tcGxldGVkJyA/ICdbeF0nIDogJ1sgXSc7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgJHtjaGVja2JveH0gKioke3Rhc2sudGl0bGV9KiogKCR7dGFzay5wcmlvcml0eX0gcHJpb3JpdHkpXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAke3Rhc2suZGVzY3JpcHRpb259XFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICAqRXN0aW1hdGVkIHRpbWU6ICR7dGFzay5lc3RpbWF0ZWRfdGltZX0qXFxuXFxuYDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1pbGVzdG9uZXMgJiYgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0YXNrQ29udGVudCArPSBgIyMgTWlsZXN0b25lc1xcblxcbmA7XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5taWxlc3RvbmVzLmZvckVhY2goKG1pbGVzdG9uZTogYW55KSA9PiB7XG4gICAgICAgICAgICB0YXNrQ29udGVudCArPSBgLSAqKiR7bWlsZXN0b25lLnRpdGxlfSoqICgke21pbGVzdG9uZS50YXJnZXRfZGF0ZX0pXFxuYDtcbiAgICAgICAgICAgIHRhc2tDb250ZW50ICs9IGAgICR7bWlsZXN0b25lLmRlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZW5hbWUsIHRhc2tDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFzayBwbGFuIHNhdmVkIGFzICR7ZmlsZW5hbWV9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2UuZXJyb3IgfHwgJ1Rhc2sgcGxhbm5pbmcgZmFpbGVkJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBuZXcgTm90aWNlKGBUYXNrIHBsYW5uaW5nIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBsYW5NeURheSgpIHtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBub3Rl4oCUb3BlbiB0b2RheVxcJ3MgZGFpbHkgbm90ZSBmaXJzdC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RpY2UgPSBuZXcgTm90aWNlKCdQbGFubmluZyB5b3VyIGRheS4uLicsIDApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlYWQgdGhlIGVudGlyZSBmaWxlIGNvbnRlbnRcbiAgICAgIGNvbnN0IGZpbGVUZXh0ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgIFxuICAgICAgLy8gRmV0Y2ggc2NoZWR1bGUgZnJvbSBBUElcbiAgICAgIGNvbnN0IHsgc2NoZWR1bGVNYXJrZG93biwgaGVhZGxpbmUgfSA9IGF3YWl0IGZldGNoU2NoZWR1bGUoZmlsZVRleHQpO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgcmV0dXJuZWQgc2NoZWR1bGVcbiAgICAgIGlmICghdmFsaWRhdGVTY2hlZHVsZU1hcmtkb3duKHNjaGVkdWxlTWFya2Rvd24pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzY2hlZHVsZSBkYXRhIHJlY2VpdmVkIGZyb20gQVBJJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEluamVjdCB0aGUgc2NoZWR1bGUgaW50byB0aGUgbm90ZVxuICAgICAgY29uc3QgdXBkYXRlZFRleHQgPSBpbmplY3RTY2hlZHVsZShmaWxlVGV4dCwgc2NoZWR1bGVNYXJrZG93bik7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGFjdGl2ZUZpbGUsIHVwZGF0ZWRUZXh0KTtcblxuICAgICAgLy8gSGlkZSB0aGUgcHJvZ3Jlc3Mgbm90aWNlXG4gICAgICBub3RpY2UuaGlkZSgpO1xuXG4gICAgICAvLyBTaG93IHN1Y2Nlc3Mgbm90aWNlXG4gICAgICBjb25zdCBzdWNjZXNzTWVzc2FnZSA9IGhlYWRsaW5lID8gYCR7aGVhZGxpbmV9IOKchWAgOiAnU2NoZWR1bGUgaW5zZXJ0ZWQg4pyFJztcbiAgICAgIG5ldyBOb3RpY2Uoc3VjY2Vzc01lc3NhZ2UpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5vdGljZS5oaWRlKCk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdHlwZXMgb2YgZXJyb3JzXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnSlNPTicpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxhbm5lciBBUEkgZXJyb3I6IEludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGFubmVyIEFQSSBlcnJvcjogVW5hYmxlIHRvIGNvbm5lY3QgdG8gbG9jYWxob3N0OjMwMDAnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBQbGFubmVyIEFQSSBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdQbGFubmVyIEFQSSBlcnJvcjogVW5rbm93biBlcnJvciBvY2N1cnJlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9WQVVMVFBJTE9UKTtcbiAgICBpZiAobGVhdmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgIGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9WQVVMVFBJTE9ULFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhdmVzWzBdKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUZ1bGxUYWJWaWV3KCkge1xuICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIpO1xuICAgIGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGUgYSBuZXcgdGFiIGluIHRoZSBtYWluIHdvcmtzcGFjZVxuICAgICAgY29uc3QgbmV3TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGlmIChuZXdMZWFmKSB7XG4gICAgICAgIGF3YWl0IG5ld0xlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfVkFVTFRQSUxPVF9GVUxMX1RBQixcbiAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQXV0by1jb21wbGV0aW9uIGhhbmRsaW5nXG4gIHByaXZhdGUgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlQXV0b0NvbXBsZXRlIHx8ICF0aGlzLnNldHRpbmdzLmVuYWJsZUNvcGlsb3QpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbS1jb250ZW50JykpIHJldHVybjtcblxuICAgIC8vIE9ubHkgdHJpZ2dlciBvbiBzcGVjaWZpYyBrZXlzIGFuZCBjb25kaXRpb25zXG4gICAgaWYgKCF0aGlzLnNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUoZXZlbnQpKSByZXR1cm47XG5cbiAgICAvLyBEZWJvdW5jZSBhdXRvLWNvbXBsZXRpb24gcmVxdWVzdHMgd2l0aCBsb25nZXIgZGVsYXlcbiAgICBjbGVhclRpbWVvdXQoKHRoaXMgYXMgYW55KS5hdXRvQ29tcGxldGVUaW1lb3V0KTtcbiAgICAodGhpcyBhcyBhbnkpLmF1dG9Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckF1dG9Db21wbGV0aW9uKCk7XG4gICAgfSwgMzAwMCk7IC8vIEluY3JlYXNlZCB0byAzIHNlY29uZHNcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkVHJpZ2dlckF1dG9Db21wbGV0ZShldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIC8vIERvbid0IHRyaWdnZXIgb24gbmF2aWdhdGlvbiBvciBtb2RpZmllciBrZXlzXG4gICAgY29uc3Qgbm9uVHJpZ2dlcktleXMgPSBbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ1RhYicsICdTaGlmdCcsICdDb250cm9sJywgJ0FsdCcsICdNZXRhJywgJ0VzY2FwZSddO1xuICAgIGlmIChub25UcmlnZ2VyS2V5cy5pbmRleE9mKGV2ZW50LmtleSkgIT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgXG4gICAgLy8gT25seSB0cmlnZ2VyIGF0IHRoZSBlbmQgb2YgYSBsaW5lXG4gICAgaWYgKGN1cnNvci5jaCAhPT0gY3VycmVudExpbmUubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHNlbnRlbmNlLWVuZGluZyB0cmlnZ2Vyc1xuICAgIGNvbnN0IHRyaWdnZXJDaGFycyA9IFsnLicsICchJywgJz8nLCAnOicsICdcXG4nXTtcbiAgICBjb25zdCBsYXN0Q2hhciA9IGN1cnJlbnRMaW5lLnNsaWNlKC0xKTtcbiAgICBcbiAgICAvLyBUcmlnZ2VyIGFmdGVyIHNlbnRlbmNlIGVuZGluZ3Mgd2l0aCBzcGFjZVxuICAgIGlmICh0cmlnZ2VyQ2hhcnMuaW5kZXhPZihsYXN0Q2hhcikgIT09IC0xICYmIGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJpZ2dlciBhZnRlciBFbnRlciBrZXkgKG5ldyBsaW5lKVxuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicgJiYgY3VycmVudExpbmUudHJpbSgpLmxlbmd0aCA+IDEwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB0cmlnZ2VyQXV0b0NvbXBsZXRpb24oKSB7XG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm47XG5cbiAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgY29uc3QgZnVsbFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcbiAgICBcbiAgICAvLyBNb3JlIHJlc3RyaWN0aXZlIGNvbmRpdGlvbnMgZm9yIGF1dG8tY29tcGxldGlvblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkubGVuZ3RoIDwgMTAgfHwgY3Vyc29yLmNoICE9PSBjdXJyZW50TGluZS5sZW5ndGgpIHJldHVybjtcbiAgICBcbiAgICAvLyBQcmV2ZW50IDQyMiBlcnJvcnMgZnJvbSBlbXB0eSB0ZXh0XG4gICAgaWYgKCFmdWxsVGV4dCB8fCBmdWxsVGV4dC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBBZGQgY29vbGRvd24gdG8gcHJldmVudCB0b28gZnJlcXVlbnQgcmVxdWVzdHNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGxhc3RSZXF1ZXN0ID0gKHRoaXMgYXMgYW55KS5sYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCB8fCAwO1xuICAgIGlmIChub3cgLSBsYXN0UmVxdWVzdCA8IDEwMDAwKSByZXR1cm47IC8vIDEwIHNlY29uZCBjb29sZG93blxuICAgIFxuICAgICh0aGlzIGFzIGFueSkubGFzdEF1dG9Db21wbGV0ZVJlcXVlc3QgPSBub3c7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb3BpbG90Q29tcGxldGlvbih7XG4gICAgICAgIHRleHQ6IGZ1bGxUZXh0LFxuICAgICAgICBjdXJzb3JfcG9zaXRpb246IGVkaXRvci5wb3NUb09mZnNldChjdXJzb3IpLFxuICAgICAgICBmaWxlX3R5cGU6ICdtYXJrZG93bidcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLmRhdGEuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIChmb3Igbm93IGp1c3Qgc2hvdyBmaXJzdCBzdWdnZXN0aW9uKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Z01vZGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBBdXRvLXN1Z2dlc3Rpb246ICR7cmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9uc1swXX1gLCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBTaWxlbnRseSBmYWlsIGZvciBhdXRvLWNvbXBsZXRpb25cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRvLWNvbXBsZXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ29waWxvdFN1Z2dlc3Rpb24oZGF0YTogQ29waWxvdFJlc3BvbnNlKSB7XG4gICAgLy8gSGFuZGxlIHJlYWwtdGltZSBjb3BpbG90IHN1Z2dlc3Rpb25zIGZyb20gV2ViU29ja2V0XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICBuZXcgTm90aWNlKGBMaXZlIHN1Z2dlc3Rpb246ICR7ZGF0YS5jb21wbGV0aW9ufWAsIDIwMDApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldHRpbmdzIG1hbmFnZW1lbnRcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIEFQSSBjbGllbnQgaWYgVVJMIGNoYW5nZWRcbiAgICB0aGlzLmFwaUNsaWVudCA9IG5ldyBFdm9BZ2VudFhDbGllbnQodGhpcy5zZXR0aW5ncy5iYWNrZW5kVXJsLCB0aGlzLnNldHRpbmdzLmFwaUtleSk7XG4gICAgXG4gICAgLy8gUmVjb25uZWN0IFdlYlNvY2tldCBpZiBzZXR0aW5ncyBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlV2ViU29ja2V0ICYmICF0aGlzLndlYnNvY2tldENvbm5lY3RlZCkge1xuICAgICAgdGhpcy5jb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVXZWJTb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXRDb25uZWN0ZWQpIHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gVHlwZSBkZWZpbml0aW9ucyBmb3IgdGhlIHBsYW5uZXIgZmVhdHVyZVxuZXhwb3J0IGludGVyZmFjZSBQbGFubmVyUmVzcG9uc2Uge1xuICBzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmc7XG4gIGhlYWRsaW5lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhbm5lclJlcXVlc3Qge1xuICBub3RlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRmV0Y2hlcyBzY2hlZHVsZSBkYXRhIGZyb20gdGhlIHBsYW5uZXIgQVBJXG4gKiBAcGFyYW0gbm90ZVRleHQgLSBUaGUgZnVsbCB0ZXh0IG9mIHRoZSBhY3RpdmUgbm90ZVxuICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHRoZSBzY2hlZHVsZSBtYXJrZG93biBhbmQgaGVhZGxpbmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU2NoZWR1bGUobm90ZVRleHQ6IHN0cmluZyk6IFByb21pc2U8UGxhbm5lclJlc3BvbnNlPiB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3BsYW5kYXknLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbm90ZTogbm90ZVRleHQgfSlcbiAgfSk7XG5cbiAgcmV0dXJuIEpTT04ucGFyc2UocmVzcG9uc2UpO1xufVxuXG4vKipcbiAqIEZpbmRzIGFuZCBleHRyYWN0cyB0aGUgU2NoZWR1bGUgc2VjdGlvbiBmcm9tIG5vdGUgdGV4dFxuICogQHBhcmFtIHRleHQgLSBUaGUgZnVsbCBub3RlIHRleHRcbiAqIEByZXR1cm5zIE1hdGNoIHJlc3VsdCB3aXRoIHNjaGVkdWxlIHNlY3Rpb24gZGV0YWlscyBvciBudWxsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kU2NoZWR1bGVTZWN0aW9uKHRleHQ6IHN0cmluZyk6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsIHtcbiAgLy8gRmlyc3QgdHJ5IHRvIG1hdGNoIGhlYWRpbmdzIHRoYXQgYXJlIGV4YWN0bHkgXCIjIyBTY2hlZHVsZVwiICh3aXRoIG9wdGlvbmFsIGNvbnRlbnQgYWZ0ZXIpXG4gIGxldCBzY2hlZHVsZVJlZ2V4ID0gLyheIyNcXHMrU2NoZWR1bGVcXGJbXlxcbl0qXFxuKShbXFxzXFxTXSo/KSg/PVxcbiMjXFxzfCQpL2ltO1xuICBsZXQgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHNjaGVkdWxlUmVnZXgpO1xuICBcbiAgaWYgKG1hdGNoKSB7XG4gICAgcmV0dXJuIG1hdGNoO1xuICB9XG4gIFxuICAvLyBJZiBubyBleGFjdCBtYXRjaCwgdHJ5IHRvIG1hdGNoIGhlYWRpbmdzIHRoYXQgY29udGFpbiBcIlNjaGVkdWxlXCIgYXMgYSB3b3JkXG4gIHNjaGVkdWxlUmVnZXggPSAvKF4jI1xccyooPzouKlxccyk/XFxiU2NoZWR1bGVcXGIoPzpcXHMuKik/JFxcbikoW1xcc1xcU10qPykoPz1cXG4jI1xcc3wkKS9pbTtcbiAgcmV0dXJuIHRleHQubWF0Y2goc2NoZWR1bGVSZWdleCk7XG59XG5cbi8qKlxuICogSW5qZWN0cyBvciByZXBsYWNlcyB0aGUgc2NoZWR1bGUgc2VjdGlvbiBpbiB0aGUgbm90ZSB0ZXh0XG4gKiBAcGFyYW0gb3JpZ2luYWxUZXh0IC0gVGhlIG9yaWdpbmFsIG5vdGUgdGV4dFxuICogQHBhcmFtIHNjaGVkdWxlTWFya2Rvd24gLSBUaGUgbmV3IHNjaGVkdWxlIGNvbnRlbnQgdG8gaW5qZWN0XG4gKiBAcmV0dXJucyBVcGRhdGVkIG5vdGUgdGV4dCB3aXRoIHRoZSBuZXcgc2NoZWR1bGUgc2VjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0U2NoZWR1bGUob3JpZ2luYWxUZXh0OiBzdHJpbmcsIHNjaGVkdWxlTWFya2Rvd246IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IG1hdGNoID0gZmluZFNjaGVkdWxlU2VjdGlvbihvcmlnaW5hbFRleHQpO1xuICBcbiAgaWYgKG1hdGNoKSB7XG4gICAgLy8gUmVwbGFjZSBleGlzdGluZyBzY2hlZHVsZSBzZWN0aW9uIChrZWVwIGhlYWRpbmcsIHJlcGxhY2UgY29udGVudClcbiAgICBjb25zdCBbZnVsbE1hdGNoLCBoZWFkaW5nXSA9IG1hdGNoO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gaGVhZGluZyArIHNjaGVkdWxlTWFya2Rvd247XG4gICAgcmV0dXJuIG9yaWdpbmFsVGV4dC5yZXBsYWNlKGZ1bGxNYXRjaCwgcmVwbGFjZW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIC8vIEFwcGVuZCBuZXcgc2NoZWR1bGUgc2VjdGlvblxuICAgIGNvbnN0IG5ld1NlY3Rpb24gPSBgXFxuXFxuIyMgU2NoZWR1bGVcXG4ke3NjaGVkdWxlTWFya2Rvd259YDtcbiAgICByZXR1cm4gb3JpZ2luYWxUZXh0ICsgbmV3U2VjdGlvbjtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiB0aGUgc2NoZWR1bGUgbWFya2Rvd24gaXMgcHJvcGVybHkgZm9ybWF0dGVkXG4gKiBAcGFyYW0gc2NoZWR1bGVNYXJrZG93biAtIFRoZSBzY2hlZHVsZSBjb250ZW50IHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyBUcnVlIGlmIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU2NoZWR1bGVNYXJrZG93bihzY2hlZHVsZU1hcmtkb3duOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gQmFzaWMgdmFsaWRhdGlvbiAtIGNoZWNrIGlmIGl0J3Mgbm90IGVtcHR5IGFuZCBjb250YWlucyBzb21lIGNvbnRlbnRcbiAgcmV0dXJuIHNjaGVkdWxlTWFya2Rvd24udHJpbSgpLmxlbmd0aCA+IDA7XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9TRVRUSU5HUyIsImJhY2tlbmRVcmwiLCJhcGlLZXkiLCJlbmFibGVXZWJTb2NrZXQiLCJlbmFibGVDb3BpbG90IiwiZW5hYmxlQXV0b0NvbXBsZXRlIiwiZGVmYXVsdEFnZW50IiwiZGVmYXVsdE1vZGUiLCJjaGF0SGlzdG9yeUxpbWl0IiwiZGVidWdNb2RlIiwic2hvd0ludGVudERlYnVnIiwiVmF1bHRQaWxvdFNldHRpbmdUYWIiLCJQbHVnaW5TZXR0aW5nVGFiIiwiY29uc3RydWN0b3IiLCJhcHAiLCJwbHVnaW4iLCJzdXBlciIsInRoaXMiLCJkaXNwbGF5IiwiY29udGFpbmVyRWwiLCJlbXB0eSIsImNyZWF0ZUVsIiwidGV4dCIsIlNldHRpbmciLCJzZXROYW1lIiwic2V0RGVzYyIsImFkZFRleHQiLCJzZXRQbGFjZWhvbGRlciIsInNldFZhbHVlIiwic2V0dGluZ3MiLCJvbkNoYW5nZSIsInZhbHVlIiwiX19hd2FpdGVyIiwic2F2ZVNldHRpbmdzIiwiYWRkQnV0dG9uIiwiYnV0dG9uIiwic2V0QnV0dG9uVGV4dCIsIm9uQ2xpY2siLCJ0ZXN0Q29ubmVjdGlvbiIsImFkZFRvZ2dsZSIsInRvZ2dsZSIsImNvbm5lY3RXZWJTb2NrZXQiLCJkaXNjb25uZWN0V2ViU29ja2V0IiwiYWRkRHJvcGRvd24iLCJkcm9wZG93biIsImFkZE9wdGlvbiIsImFkZFNsaWRlciIsInNsaWRlciIsInNldExpbWl0cyIsInNldER5bmFtaWNUb29sdGlwIiwiY2xzIiwiaW5uZXJIVE1MIiwibm90aWNlIiwiTm90aWNlIiwicmVzcG9uc2UiLCJhcGlDbGllbnQiLCJoZWFsdGhDaGVjayIsInN1Y2Nlc3MiLCJlcnJvciIsIl9hIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwid2FybiIsInNpbXBsZVJlc3BvbnNlIiwic2ltcGxlSGVhbHRoQ2hlY2siLCJkYXRhIiwic3RhdHVzIiwidmVyc2lvbiIsImhpZGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJWSUVXX1RZUEVfVkFVTFRQSUxPVCIsIlZhdWx0UGlsb3RWaWV3IiwiSXRlbVZpZXciLCJsZWFmIiwiZ2V0Vmlld1R5cGUiLCJnZXREaXNwbGF5VGV4dCIsImdldEljb24iLCJvbk9wZW4iLCJjb250YWluZXIiLCJhZGRDbGFzcyIsImhlYWRlckVsIiwic3RhdHVzRWwiLCJ1cGRhdGVTdGF0dXMiLCJxdWlja0FjdGlvbnNFbCIsImNyZWF0ZVF1aWNrQWN0aW9ucyIsInZhdWx0U3RhdHNFbCIsInVwZGF0ZVZhdWx0U3RhdHMiLCJhY3Rpdml0aWVzRWwiLCJhZGRTdHlsZXMiLCJzdGF0dXNDb250YWluZXIiLCJiYWNrZW5kU3RhdHVzIiwiYmFja2VuZEluZGljYXRvciIsIndzU3RhdHVzIiwiaXNXZWJTb2NrZXRDb25uZWN0ZWQiLCJjaGVja0JhY2tlbmRTdGF0dXMiLCJpbmRpY2F0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTmFtZSIsImFjdGlvbnNHcmlkIiwib25jbGljayIsIm9wZW5DaGF0TW9kYWwiLCJhY3RpdmF0ZUZ1bGxUYWJWaWV3Iiwib3BlbldvcmtmbG93TW9kYWwiLCJhbmFseXplVmF1bHQiLCJhY3RpdmVWaWV3Iiwid29ya3NwYWNlIiwiZ2V0QWN0aXZlVmlld09mVHlwZSIsIk1hcmtkb3duVmlldyIsImdldENvcGlsb3RDb21wbGV0aW9uIiwiZWRpdG9yIiwic3RhdHNDb250YWluZXIiLCJmaWxlcyIsInZhdWx0IiwiZ2V0RmlsZXMiLCJtYXJrZG93bkZpbGVzIiwiZ2V0TWFya2Rvd25GaWxlcyIsImxhYmVsIiwibGVuZ3RoIiwidG9TdHJpbmciLCJnZXRBbGxMb2FkZWRGaWxlcyIsImZpbHRlciIsImYiLCJURm9sZGVyIiwiZm9yRWFjaCIsInN0YXQiLCJzdGF0RWwiLCJsb2FkQWdlbnRJbmZvIiwiZ2V0QWdlbnRzIiwiYWdlbnRDb3VudCIsImFjdGl2ZUFnZW50cyIsImFnZW50IiwiYWN0aXZlIiwiYWdlbnRTdGF0c0VsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlRWwiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJvbkNsb3NlIiwiVklFV19UWVBFX1ZBVUxUUElMT1RfRlVMTF9UQUIiLCJWYXVsdFBpbG90RnVsbFRhYlZpZXciLCJtYWluTGF5b3V0IiwibGVmdFNpZGViYXIiLCJjcmVhdGVMZWZ0U2lkZWJhciIsIm1haW5Db250ZW50IiwiY3JlYXRlTWFpbkNvbnRlbnQiLCJyaWdodFNpZGViYXIiLCJjcmVhdGVSaWdodFNpZGViYXIiLCJhZGRGdWxsVGFiU3R5bGVzIiwic2lkZWJhciIsImNvbnRlbnQiLCJ0YWJOYXYiLCJjaGF0VGFiIiwid29ya2Zsb3dUYWIiLCJhbmFseXRpY3NUYWIiLCJ0YWJDb250ZW50IiwiY2hhdEVsIiwiY3JlYXRlQ2hhdFNlY3Rpb24iLCJ3b3JrZmxvd0VsIiwiY3JlYXRlV29ya2Zsb3dTZWN0aW9uIiwiYW5hbHl0aWNzRWwiLCJjcmVhdGVBbmFseXRpY3NTZWN0aW9uIiwic3dpdGNoVGFiIiwicmVjZW50RmlsZXNFbCIsInVwZGF0ZVJlY2VudEZpbGVzIiwiYWdlbnRTdGF0dXNFbCIsInVwZGF0ZUFnZW50U3RhdHVzIiwiYWN0aXZpdHlFbCIsImNyZWF0ZUFjdGl2aXR5RmVlZCIsImNoYXRIaXN0b3J5IiwiY2hhdElucHV0IiwidGV4dGFyZWEiLCJwbGFjZWhvbGRlciIsInNlbmRCdXR0b24iLCJ0cmltIiwic2VuZENoYXRNZXNzYWdlIiwib25rZXlkb3duIiwiZSIsImtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJjbGljayIsIndvcmtmbG93R3JpZCIsIm5hbWUiLCJpY29uIiwiZGVzY3JpcHRpb24iLCJ3b3JrZmxvdyIsIndvcmtmbG93Q2FyZCIsInJ1bldvcmtmbG93IiwiY2hhcnRzQ29udGFpbmVyIiwiZmlsZVR5cGVDaGFydCIsInRpbWVsaW5lQ2hhcnQiLCJ0YWdDaGFydCIsInRhYk5hbWUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnRuIiwicmVtb3ZlQ2xhc3MiLCJzZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsInRoaW5raW5nTWVzc2FnZSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsInNlbmRDaGF0IiwiY29udGV4dCIsInJlbW92ZSIsIndvcmtmbG93TmFtZSIsInBsYW5NeURheSIsImFjdGl2YXRlVmlldyIsInNvcnQiLCJhIiwiYiIsIm10aW1lIiwic2xpY2UiLCJmaWxlIiwiZmlsZUVsIiwiYmFzZW5hbWUiLCJvcGVuTGlua1RleHQiLCJwYXRoIiwiYWdlbnRJbmZvIiwiYWdlbnRFbCIsInRpbWUiLCJhY3Rpdml0eSIsImdldEFjdGl2ZU1hcmtkb3duIiwiZ2V0QWN0aXZlRmlsZSIsInJlYWQiLCJDaGF0TW9kYWwiLCJNb2RhbCIsImN1cnJlbnRDb252ZXJzYXRpb25JZCIsIm1lc3NhZ2VzIiwiY29udGVudEVsIiwidG9vbGJhckVsIiwiY2xlYXJDaGF0IiwiYWdlbnRTZWxlY3QiLCJsb2FkQWdlbnRzIiwiY2hhdENvbnRhaW5lciIsIm1lc3NhZ2VzRWwiLCJpbnB1dENvbnRhaW5lciIsImlucHV0RWwiLCJ0eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlbmRNZXNzYWdlIiwiZm9jdXMiLCJsb2FkQ29udmVyc2F0aW9uSGlzdG9yeSIsInNlbGVjdEVsIiwiZ2V0Q29udmVyc2F0aW9uSGlzdG9yeSIsInJlbmRlck1lc3NhZ2VzIiwiZGlzYWJsZWQiLCJhZGRNZXNzYWdlIiwiaW50ZW50UmVzIiwiUHJvbWlzZSIsImFsbCIsImNsYXNzaWZ5SW50ZW50IiwicGF5bG9hZCIsImludGVudCIsInJlc3VsdCIsImNvbnZlcnNhdGlvbl9pZCIsInVuZGVmaW5lZCIsImFnZW50X2lkIiwiZ2V0U2VsZWN0ZWRBZ2VudCIsImVycm9yTXNnIiwicm9sZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInB1c2giLCJyZW5kZXJNZXNzYWdlIiwic2Nyb2xsVG9Cb3R0b20iLCJtZXNzYWdlRWwiLCJyZW5kZXJNYXJrZG93biIsInRvTG9jYWxlVGltZVN0cmluZyIsInJlcGxhY2UiLCJkZWJ1Z0VsIiwic2V0VGltZW91dCIsIldvcmtmbG93TW9kYWwiLCJpc0V4ZWN1dGluZyIsImZvcm1FbCIsImdvYWxDb250YWluZXIiLCJnb2FsSW5wdXQiLCJjb250ZXh0Q29udGFpbmVyIiwiY29udGV4dElucHV0Iiwib3B0aW9uc0NvbnRhaW5lciIsImluY2x1ZGVBY3RpdmVGaWxlIiwiYWN0aXZlRmlsZUNoZWNrYm94IiwiY3JlYXRlU3BhbiIsImluY2x1ZGVBbGxGaWxlcyIsImFsbEZpbGVzQ2hlY2tib3giLCJleGVjdXRlQnV0dG9uIiwiZXhlY3V0ZVdvcmtmbG93IiwiY2hlY2tlZCIsInByb2dyZXNzQ29udGFpbmVyIiwic3R5bGUiLCJyZXN1bHRzQ29udGFpbmVyIiwiZ29hbCIsInZhdWx0Q29udGVudCIsImFjdGl2ZUZpbGUiLCJyZXF1ZXN0IiwidmF1bHRfY29udGVudCIsInNldHVwUHJvZ3Jlc3NMaXN0ZW5lciIsImRpc3BsYXlSZXN1bHRzIiwiZGlzcGxheUVycm9yIiwiZGlzcGxheVByb2dyZXNzIiwiZXhlY3V0aW9uX3RpbWUiLCJyZXN1bHRFbCIsInN0ZXBzX3Rha2VuIiwic3RlcHNFbCIsInN0ZXBzTGlzdCIsInN0ZXAiLCJhcnRpZmFjdHMiLCJhcnRpZmFjdHNFbCIsImFydGlmYWN0IiwiaW5kZXgiLCJhcnRpZmFjdEVsIiwidGl0bGUiLCJzYXZlQXJ0aWZhY3RBc05vdGUiLCJzYXZlQ29tcGxldGVSZXN1bHRzQXNOb3RlIiwiZmlsZW5hbWUiLCJjcmVhdGUiLCJzcGxpdCIsIkV2b0FnZW50WENsaWVudCIsImJhc2VVcmwiLCJ3c0NhbGxiYWNrcyIsIk1hcCIsIm1ha2VSZXF1ZXN0IiwiZW5kcG9pbnRfMSIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVybCIsImhlYWRlcnMiLCJPYmplY3QiLCJhc3NpZ24iLCJBY2NlcHQiLCJmZXRjaCIsIm1vZGUiLCJjcmVkZW50aWFscyIsImNvbnRlbnRUeXBlIiwiZ2V0IiwianNvbiIsIm9rIiwiZXJyb3JNZXNzYWdlIiwic3RhdHVzVGV4dCIsImxvZyIsIm1ldGhvZCIsImNoYXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnZlcnNhdGlvbklkXzEiLCJjb252ZXJzYXRpb25JZCIsImxpbWl0IiwicmVxdWVzdEJvZHkiLCJpbmNsdWRlX21lc3NhZ2VzIiwiZGVsZXRlQ29udmVyc2F0aW9uIiwidmF1bHRfY29udGV4dCIsImNyZWF0ZUFnZW50IiwiZXhlY3V0ZUFnZW50IiwiYW5hbHl6ZVZhdWx0Q29udGV4dCIsInBsYW5UYXNrcyIsInBhcnNlSW50ZWxsaWdlbmNlIiwiY29uZmlkZW5jZSIsImV4cGxhaW5JbnRlbnQiLCJpbmNsdWRlX2RlYnVnIiwicmVhc29uaW5nIiwidXBkYXRlTWVtb3J5IiwiY2FsbGJhY2tzIiwid3NVcmwiLCJ3ZWJzb2NrZXQiLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJvbkNvbm5lY3QiLCJjYWxsIiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJzZSIsIm9uQ2hhdCIsIl9iIiwib25Xb3JrZmxvd1Byb2dyZXNzIiwiX2MiLCJvbkNvcGlsb3QiLCJfZCIsIm9uVmF1bHRTeW5jIiwiX2UiLCJvbkludGVudERlYnVnIiwiX2YiLCJvbkVycm9yIiwiX2ciLCJvbmNsb3NlIiwiY29kZSIsInJlYXNvbiIsIm9uRGlzY29ubmVjdCIsIm9uZXJyb3IiLCJjbG9zZSIsInNlbmRXZWJTb2NrZXRNZXNzYWdlIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwiVmF1bHRQaWxvdFBsdWdpbiIsIlBsdWdpbiIsIndlYnNvY2tldENvbm5lY3RlZCIsImNvcGlsb3RFbmFibGVkIiwib25sb2FkIiwiYXBwSW5zdGFuY2UiLCJsb2FkU2V0dGluZ3MiLCJyZWdpc3RlclZpZXciLCJyaWJib25JY29uRWwiLCJhZGRSaWJib25JY29uIiwiZXZ0IiwiY3RybEtleSIsIm1ldGFLZXkiLCJhZGRDb21tYW5kIiwiY2FsbGJhY2siLCJlZGl0b3JDYWxsYmFjayIsInF1aWNrQ2hhdFdpdGhTZWxlY3Rpb24iLCJwbGFuVGFza3NGcm9tTm90ZSIsInJlZ2lzdGVyRG9tRXZlbnQiLCJoYW5kbGVLZXlVcCIsImJpbmQiLCJhZGRTZXR0aW5nVGFiIiwib251bmxvYWQiLCJkZXRhY2hMZWF2ZXNPZlR5cGUiLCJoYW5kbGVDb3BpbG90U3VnZ2VzdGlvbiIsImRlYnVnIiwib3BlbiIsImZpbGVDb250ZW50IiwiYW5hbHlzaXNfdHlwZSIsImFuYWx5c2lzQ29udGVudCIsImFuYWx5c2lzIiwiaW5zaWdodHMiLCJpbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwicmVjIiwiY3Vyc29yIiwiZ2V0Q3Vyc29yIiwidGV4dEJlZm9yZUN1cnNvciIsImdldExpbmUiLCJsaW5lIiwic3Vic3RyaW5nIiwiY2giLCJmdWxsVGV4dCIsImdldFZhbHVlIiwiY3Vyc29yX3Bvc2l0aW9uIiwicG9zVG9PZmZzZXQiLCJmaWxlX3R5cGUiLCJyZXBsYWNlUmFuZ2UiLCJjb21wbGV0aW9uIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwibmV3TGluZSIsInRpbWVmcmFtZSIsInRhc2tDb250ZW50IiwicGxhbiIsImVzdGltYXRlZF9kdXJhdGlvbiIsInRhc2tzIiwidGFzayIsImNoZWNrYm94IiwicHJpb3JpdHkiLCJlc3RpbWF0ZWRfdGltZSIsIm1pbGVzdG9uZXMiLCJtaWxlc3RvbmUiLCJ0YXJnZXRfZGF0ZSIsImZpbGVUZXh0Iiwic2NoZWR1bGVNYXJrZG93biIsImhlYWRsaW5lIiwibm90ZVRleHQiLCJub3RlIiwiZmV0Y2hTY2hlZHVsZSIsInZhbGlkYXRlU2NoZWR1bGVNYXJrZG93biIsInVwZGF0ZWRUZXh0Iiwib3JpZ2luYWxUZXh0IiwibWF0Y2giLCJzY2hlZHVsZVJlZ2V4IiwiZmluZFNjaGVkdWxlU2VjdGlvbiIsImZ1bGxNYXRjaCIsImhlYWRpbmciLCJyZXBsYWNlbWVudCIsImluamVjdFNjaGVkdWxlIiwibW9kaWZ5Iiwic3VjY2Vzc01lc3NhZ2UiLCJsZWF2ZXMiLCJnZXRMZWF2ZXNPZlR5cGUiLCJyaWdodExlYWYiLCJnZXRSaWdodExlYWYiLCJzZXRWaWV3U3RhdGUiLCJyZXZlYWxMZWFmIiwibmV3TGVhZiIsImdldExlYWYiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3VsZFRyaWdnZXJBdXRvQ29tcGxldGUiLCJjbGVhclRpbWVvdXQiLCJhdXRvQ29tcGxldGVUaW1lb3V0IiwidHJpZ2dlckF1dG9Db21wbGV0aW9uIiwiaW5kZXhPZiIsImN1cnJlbnRMaW5lIiwibGFzdENoYXIiLCJub3ciLCJsYXN0QXV0b0NvbXBsZXRlUmVxdWVzdCIsInN1Z2dlc3Rpb25zIiwibG9hZERhdGEiLCJzYXZlRGF0YSJdLCJtYXBwaW5ncyI6IjRYQUlPLE1BQU1BLEVBQXVDLENBQ2xEQyxXQUFZLHdCQUNaQyxPQUFRLEdBQ1JDLGlCQUFpQixFQUNqQkMsZUFBZSxFQUNmQyxvQkFBb0IsRUFDcEJDLGFBQWMsR0FDZEMsWUFBYSxNQUNiQyxpQkFBa0IsSUFDbEJDLFdBQVcsRUFDWEMsaUJBQWlCLEdBR2IsTUFBT0MsVUFBNkJDLEVBQUFBLGlCQUd4QyxXQUFBQyxDQUFZQyxFQUFVQyxHQUNwQkMsTUFBTUYsRUFBS0MsR0FDWEUsS0FBS0YsT0FBU0EsQ0FDZixDQUVELE9BQUFHLEdBQ0UsTUFBTUMsWUFBRUEsR0FBZ0JGLEtBQ3hCRSxFQUFZQyxRQUVaRCxFQUFZRSxTQUFTLEtBQU0sQ0FBRUMsS0FBTSx3QkFDbkNILEVBQVlFLFNBQVMsSUFBSyxDQUN4QkMsS0FBTSxvRUFJUkgsRUFBWUUsU0FBUyxLQUFNLENBQUVDLEtBQU0sZUFFbkMsSUFBSUMsRUFBQUEsUUFBUUosR0FDVEssUUFBUSxlQUNSQyxRQUFRLG1DQUNSQyxRQUFRSixHQUNQQSxFQUNHSyxlQUFlLHlCQUNmQyxTQUFTWCxLQUFLRixPQUFPYyxTQUFTNUIsWUFDOUI2QixTQUFlQyxHQUFRQyxFQUFBZixVQUFBLE9BQUEsRUFBQSxZQUN0QkEsS0FBS0YsT0FBT2MsU0FBUzVCLFdBQWE4QixRQUM1QmQsS0FBS0YsT0FBT2tCLGNBQ25CLEtBR1AsSUFBSVYsRUFBQUEsUUFBUUosR0FDVEssUUFBUSxXQUNSQyxRQUFRLGdFQUNSQyxRQUFRSixHQUNQQSxFQUNHSyxlQUFlLG9CQUNmQyxTQUFTWCxLQUFLRixPQUFPYyxTQUFTM0IsUUFBVSxJQUN4QzRCLFNBQWVDLEdBQVFDLEVBQUFmLFVBQUEsT0FBQSxFQUFBLFlBQ3RCQSxLQUFLRixPQUFPYyxTQUFTM0Is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
